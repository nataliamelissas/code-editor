/*!-----------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.51.0-dev-20240725(02de12a70e318ac6743368f2c609c1cc9ea23e06)
 * Released under the MIT license
 * https://github.com/microsoft/vscode/blob/main/LICENSE.txt
 *-----------------------------------------------------------*/(function(){var oe=["exports","require","vs/base/common/lifecycle","vs/nls","vs/editor/common/core/range","vs/base/browser/dom","vs/base/common/event","vs/platform/instantiation/common/instantiation","vs/base/common/errors","vs/editor/common/core/position","vs/css!vs/editor/editor.main","vs/base/common/strings","vs/platform/contextkey/common/contextkey","vs/base/common/arrays","vs/base/common/async","vs/editor/browser/editorExtensions","vs/base/common/platform","vs/editor/common/services/languageFeatures","vs/base/common/cancellation","vs/base/common/types","vs/editor/common/editorContextKeys","vs/base/common/observable","vs/base/common/uri","vs/editor/common/core/selection","vs/platform/commands/common/commands","vs/platform/theme/common/themeService","vs/base/common/codicons","vs/platform/configuration/common/configuration","vs/editor/common/languages","vs/platform/actions/common/actions","vs/base/common/themables","vs/platform/keybinding/common/keybinding","vs/platform/theme/common/colorRegistry","vs/base/common/color","vs/editor/common/languages/languageConfigurationRegistry","vs/editor/browser/services/codeEditorService","vs/editor/common/model/textModel","vs/editor/common/config/editorOptions","vs/platform/registry/common/platform","vs/base/browser/fastDomNode","vs/editor/common/model","vs/base/common/actions","vs/editor/common/languages/language","vs/base/browser/ui/hover/hoverDelegateFactory","vs/editor/common/services/model","vs/base/common/map","vs/base/browser/keyboardEvent","vs/base/common/network","vs/base/browser/ui/aria/aria","vs/platform/instantiation/common/extensions","vs/platform/notification/common/notification","vs/base/common/resources","vs/base/browser/window","vs/base/common/iterator","vs/base/common/objects","vs/base/common/htmlContent","vs/editor/common/core/lineRange","vs/editor/browser/view/viewPart","vs/platform/contextview/browser/contextView","vs/base/common/stopwatch","vs/platform/accessibility/common/accessibility","vs/platform/log/common/log","vs/platform/opener/common/opener","vs/platform/quickinput/common/quickInput","vs/base/browser/browser","vs/base/common/observableInternal/derived","vs/platform/telemetry/common/telemetry","vs/base/common/arraysFind","vs/base/browser/touch","vs/editor/common/core/offsetRange","vs/editor/common/languages/modesRegistry","vs/platform/theme/common/iconRegistry","vs/base/common/keyCodes","vs/base/common/linkedList","vs/base/browser/mouseEvent","vs/editor/browser/config/domFontInfo","vs/editor/common/core/editOperation","vs/editor/common/cursorCommon","vs/editor/common/services/resolverService","vs/editor/common/services/languageFeatureDebounce","vs/editor/common/core/editorColorRegistry","vs/base/browser/ui/hover/hoverDelegate2","vs/base/common/filters","vs/base/browser/ui/widget","vs/base/browser/ui/scrollbar/scrollableElement","vs/editor/browser/widget/diffEditor/utils","vs/editor/contrib/hover/browser/hoverTypes","vs/base/browser/ui/actionbar/actionbar","vs/platform/theme/common/colorUtils","vs/base/common/assert","vs/base/common/hierarchicalKind","vs/base/common/observableInternal/base","vs/base/browser/event","vs/editor/common/core/cursorColumns","vs/editor/common/tokens/lineTokens","vs/editor/common/viewModel","vs/platform/progress/common/progress","vs/platform/theme/common/theme","vs/base/common/lazy","vs/base/common/path","vs/platform/storage/common/storage","vs/base/common/equals","vs/base/browser/trustedTypes","vs/editor/common/core/textEdit","vs/editor/common/diff/rangeMapping","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/length","vs/editor/common/standaloneStrings","vs/platform/markers/common/markers","vs/platform/configuration/common/configurationRegistry","vs/platform/theme/browser/defaultStyles","vs/base/common/severity","vs/base/browser/ui/iconLabel/iconLabels","vs/base/browser/ui/list/listWidget","vs/editor/browser/observableCodeEditor","vs/editor/common/core/stringBuilder","vs/editor/common/core/textLength","vs/editor/common/services/editorWorker","vs/platform/clipboard/common/clipboardService","vs/platform/hover/browser/hover","vs/platform/layout/browser/layoutService","vs/editor/browser/widget/markdownRenderer/browser/markdownRenderer","vs/platform/keybinding/common/keybindingsRegistry","vs/editor/contrib/editorState/browser/editorState","vs/platform/theme/common/colors/baseColors","vs/platform/actions/browser/menuEntryActionViewItem","vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget","vs/base/common/decorators","vs/base/common/functional","vs/base/common/mime","vs/base/common/hash","vs/editor/common/languages/languageConfiguration","vs/editor/common/textModelEvents","vs/editor/browser/view/dynamicViewOverlay","vs/editor/contrib/codeAction/common/types","vs/editor/contrib/snippet/browser/snippetParser","vs/editor/common/viewLayout/viewLineRenderer","vs/platform/accessibilitySignal/browser/accessibilitySignalService","vs/platform/theme/common/colors/editorColors","vs/editor/browser/widget/diffEditor/registrations.contribution","vs/base/common/keybindings","vs/base/common/numbers","vs/base/common/iconLabels","vs/editor/browser/stableEditorScroll","vs/editor/common/core/characterClassifier","vs/editor/common/core/eolCounter","vs/editor/common/commands/replaceCommand","vs/editor/common/editorFeatures","vs/editor/common/encodedTokenAttributes","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/smallImmutableSet","vs/editor/common/viewLayout/lineDecorations","vs/base/browser/ui/actionbar/actionViewItems","vs/editor/browser/services/bulkEditService","vs/editor/standalone/common/standaloneTheme","vs/editor/contrib/suggest/browser/suggest","vs/platform/quickinput/common/quickAccess","vs/editor/contrib/codeAction/browser/codeAction","vs/editor/contrib/peekView/browser/peekView","vs/base/browser/ui/tree/tree","vs/base/common/buffer","vs/base/common/observableInternal/debugName","vs/base/common/observableInternal/logging","vs/base/common/hotReloadHelpers","vs/base/common/scrollable","vs/base/browser/globalPointerMoveMonitor","vs/base/browser/ui/sash/sash","vs/base/browser/ui/toggle/toggle","vs/editor/browser/view/renderingContext","vs/editor/common/config/editorZoom","vs/editor/common/core/wordCharacterClassifier","vs/editor/common/core/wordHelper","vs/editor/common/diff/defaultLinesDiffComputer/algorithms/diffAlgorithm","vs/editor/browser/editorBrowser","vs/editor/common/languages/supports","vs/editor/common/viewEventHandler","vs/base/browser/ui/hover/hoverWidget","vs/base/browser/ui/tree/abstractTree","vs/editor/common/languages/nullTokenize","vs/editor/contrib/gotoSymbol/browser/referencesModel","vs/platform/contextkey/common/contextkeys","vs/platform/dialogs/common/dialogs","vs/platform/instantiation/common/serviceCollection","vs/platform/label/common/label","vs/editor/contrib/documentSymbols/browser/outlineModel","vs/editor/common/commands/shiftCommand","vs/editor/contrib/message/browser/messageController","vs/editor/browser/editorDom","vs/platform/workspace/common/workspace","vs/base/common/idGenerator","vs/base/common/range","vs/base/common/observableInternal/utils","vs/base/common/diff/diff","vs/base/common/codiconsUtil","vs/base/common/uint","vs/base/browser/markdownRenderer","vs/base/common/uuid","vs/base/common/dataTransfer","vs/base/browser/ui/codicons/codiconStyles","vs/editor/common/core/textModelDefaults","vs/editor/common/editorCommon","vs/editor/common/cursor/cursorWordOperations","vs/editor/common/languages/supports/richEditBrackets","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/ast","vs/editor/common/model/textModelSearch","vs/editor/contrib/folding/browser/foldingRanges","vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture","vs/editor/contrib/inlineCompletions/browser/ghostText","vs/editor/contrib/inlineCompletions/browser/utils","vs/base/browser/ui/keybindingLabel/keybindingLabel","vs/editor/common/services/textResourceConfiguration","vs/editor/browser/controller/textAreaInput","vs/editor/common/cursor/cursorTypeEditOperations","vs/editor/browser/coreCommands","vs/editor/browser/widget/diffEditor/diffProviderFactoryService","vs/platform/list/browser/listService","vs/editor/contrib/hover/browser/markdownHoverParticipant","vs/platform/actions/browser/toolbar","vs/platform/undoRedo/common/undoRedo","vs/editor/browser/widget/codeEditor/codeEditorWidget","vs/editor/contrib/find/browser/findModel","vs/editor/contrib/snippet/browser/snippetController2","vs/base/browser/ui/scrollbar/scrollbarState","vs/base/browser/dnd","vs/base/browser/canIUse","vs/base/common/extpath","vs/base/browser/ui/tree/indexTreeModel","vs/base/browser/ui/tree/objectTreeModel","vs/base/common/ternarySearchTree","vs/base/common/marshalling","vs/base/browser/pixelRatio","vs/base/browser/ui/scrollbar/scrollbarArrow","vs/base/browser/ui/button/button","vs/base/browser/ui/iconLabel/iconLabel","vs/base/browser/ui/mouseCursor/mouseCursor","vs/base/browser/ui/resizable/resizable","vs/base/browser/ui/list/listView","vs/css!vs/editor/contrib/colorPicker/browser/colorPicker","vs/css!vs/editor/contrib/hover/browser/hover","vs/css!vs/platform/quickinput/browser/media/quickInput","vs/editor/browser/config/tabFocus","vs/editor/common/core/indentation","vs/editor/browser/view/viewLayer","vs/editor/common/diff/defaultLinesDiffComputer/utils","vs/editor/common/diff/linesDiffComputer","vs/editor/common/cursor/cursorMoveOperations","vs/editor/common/cursor/cursorDeleteOperations","vs/editor/common/cursor/cursorMoveCommands","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/tokenizer","vs/editor/common/model/utils","vs/editor/common/standalone/standaloneEnums","vs/editor/common/textModelGuides","vs/editor/common/languages/supports/indentationLineProcessor","vs/editor/common/languages/autoIndent","vs/editor/browser/viewParts/glyphMargin/glyphMargin","vs/editor/common/viewEvents","vs/editor/common/viewModelEventDispatcher","vs/editor/contrib/inlineCompletions/browser/commandIds","vs/editor/contrib/inlineCompletions/browser/singleTextEdit","vs/base/browser/ui/inputbox/inputBox","vs/base/browser/ui/findinput/findInput","vs/base/common/keybindingLabels","vs/editor/common/config/fontInfo","vs/editor/contrib/hover/browser/hoverActionIds","vs/platform/instantiation/common/descriptors","vs/editor/common/services/markerDecorations","vs/editor/common/services/semanticTokensStyling","vs/editor/contrib/dropOrPasteInto/browser/edit","vs/editor/contrib/inlineCompletions/browser/inlineCompletionContextKeys","vs/editor/contrib/parameterHints/browser/provideSignatureHelp","vs/platform/environment/common/environment","vs/platform/quickinput/browser/quickInput","vs/platform/jsonschemas/common/jsonContributionRegistry","vs/editor/common/config/editorConfigurationSchema","vs/editor/browser/services/editorWorkerService","vs/editor/common/languages/enterAction","vs/editor/common/cursor/cursorTypeOperations","vs/editor/contrib/gotoSymbol/browser/goToSymbol","vs/platform/theme/common/colors/miscColors","vs/platform/theme/common/colors/listColors","vs/editor/contrib/symbolIcons/browser/symbolIcons","vs/editor/browser/viewParts/lines/viewLine","vs/editor/common/services/semanticTokensProviderStyling","vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHintsWidget","vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/diffEditorViewZones","vs/editor/browser/widget/diffEditor/diffEditorWidget","vs/editor/contrib/codeAction/browser/codeActionController","vs/editor/contrib/colorPicker/browser/colorHoverParticipant","vs/editor/contrib/folding/browser/folding","vs/editor/contrib/inlineProgress/browser/inlineProgress","vs/editor/contrib/gotoSymbol/browser/goToCommands","vs/editor/contrib/hover/browser/hoverController","vs/editor/contrib/dropOrPasteInto/browser/defaultProviders","vs/editor/contrib/suggest/browser/suggestController","vs/editor/contrib/inlineCompletions/browser/inlineCompletionsController","vs/editor/standalone/browser/standaloneServices","vs/base/browser/performance","vs/base/common/cache","vs/base/common/collections","vs/base/common/observableInternal/autorun","vs/base/browser/fonts","vs/base/common/process","vs/base/common/hotReload","vs/base/common/ime","vs/base/common/symbols","vs/base/common/glob","vs/base/browser/dompurify/dompurify","vs/base/browser/formattedTextRenderer","vs/base/browser/ui/highlightedlabel/highlightedLabel","vs/base/browser/ui/scrollbar/abstractScrollbar","vs/base/common/worker/simpleWorker","vs/css!vs/base/browser/ui/actionbar/actionbar","vs/base/browser/ui/contextview/contextview","vs/base/browser/ui/countBadge/countBadge","vs/css!vs/base/browser/ui/dropdown/dropdown","vs/css!vs/base/browser/ui/findinput/findInput","vs/css!vs/base/browser/ui/list/list","vs/base/browser/ui/splitview/splitview","vs/css!vs/platform/actionWidget/browser/actionWidget","vs/editor/browser/config/elementSizeObserver","vs/editor/browser/viewParts/minimap/minimapCharSheet","vs/editor/browser/widget/diffEditor/components/diffEditorSash","vs/editor/common/config/diffEditor","vs/editor/browser/view/viewUserInputEvents","vs/editor/browser/controller/textAreaState","vs/editor/common/core/rgba","vs/editor/common/commands/surroundSelectionCommand","vs/editor/common/core/textChange","vs/editor/common/cursor/cursorAtomicMoveOperations","vs/editor/common/diff/defaultLinesDiffComputer/algorithms/myersDiffAlgorithm","vs/editor/common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations","vs/editor/common/diff/defaultLinesDiffComputer/linesSliceCharSequence","vs/editor/common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer","vs/editor/common/editorAction","vs/editor/common/languageSelector","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/parser","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/brackets","vs/editor/common/model/prefixSumComputer","vs/editor/common/model/textModelPart","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/modelLineProjectionData","vs/editor/common/services/treeViewsDnd","vs/editor/common/services/unicodeTextModelHighlighter","vs/editor/common/model/guidesTextModelPart","vs/editor/common/tokens/contiguousMultilineTokensBuilder","vs/editor/browser/viewParts/margin/margin","vs/editor/common/viewModel/overviewZoneManager","vs/editor/contrib/comment/browser/blockCommentCommand","vs/editor/contrib/folding/browser/foldingModel","vs/editor/contrib/folding/browser/indentRangeProvider","vs/editor/contrib/folding/browser/syntaxRangeProvider","vs/editor/contrib/format/browser/formattingEdit","vs/editor/contrib/hover/browser/hoverOperation","vs/editor/contrib/indentation/common/indentUtils","vs/editor/contrib/inlayHints/browser/inlayHints","vs/editor/contrib/placeholderText/browser/placeholderTextContribution","vs/editor/contrib/semanticTokens/common/semanticTokensConfig","vs/editor/contrib/smartSelect/browser/bracketSelections","vs/editor/contrib/inlineCompletions/browser/provideInlineCompletions","vs/editor/contrib/stickyScroll/browser/stickyScrollElement","vs/editor/contrib/suggest/browser/completionModel","vs/editor/contrib/suggest/browser/wordDistance","vs/editor/standalone/common/monarch/monarchCommon","vs/base/browser/ui/findinput/findInputToggles","vs/base/browser/ui/dropdown/dropdownActionViewItem","vs/base/browser/ui/tree/objectTree","vs/base/common/errorMessage","vs/editor/browser/widget/diffEditor/features/movedBlocksLinesFeature","vs/editor/browser/widget/multiDiffEditor/utils","vs/editor/browser/config/fontMeasurements","vs/editor/common/languages/textToHtmlTokenizer","vs/editor/common/model/editStack","vs/editor/common/services/editorBaseApi","vs/editor/common/viewModel/minimapTokensColorTracker","vs/editor/common/viewModel/viewModelDecorations","vs/platform/accessibility/browser/accessibleViewRegistry","vs/platform/action/common/action","vs/platform/files/common/files","vs/editor/browser/widget/diffEditor/features/hideUnchangedRegionsFeature","vs/editor/contrib/codelens/browser/codelens","vs/editor/contrib/semanticTokens/common/getSemanticTokens","vs/editor/standalone/common/monarch/monarchLexer","vs/editor/contrib/inlineEdits/browser/consts","vs/editor/contrib/hover/browser/contentHoverStatusBar","vs/editor/contrib/hover/browser/contentHoverWidget","vs/platform/keybinding/common/keybindingResolver","vs/platform/keybinding/common/resolvedKeybindingItem","vs/editor/standalone/browser/standaloneLayoutService","vs/platform/contextview/browser/contextViewService","vs/editor/contrib/dropOrPasteInto/browser/postEditWidget","vs/platform/observable/common/platformObservableUtils","vs/platform/quickinput/browser/quickInputUtils","vs/platform/dnd/browser/dnd","vs/editor/browser/dnd","vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider","vs/editor/contrib/colorPicker/browser/color","vs/editor/contrib/suggest/browser/suggestWidgetDetails","vs/platform/configuration/common/configurationModels","vs/platform/history/browser/contextScopedHistoryWidget","vs/editor/contrib/suggest/browser/suggestMemory","vs/platform/actions/common/menuService","vs/editor/browser/widget/diffEditor/diffEditorViewModel","vs/editor/contrib/codeAction/browser/codeActionModel","vs/editor/contrib/format/browser/format","vs/editor/contrib/hover/browser/getHover","vs/editor/contrib/wordOperations/browser/wordOperations","vs/platform/theme/common/colors/inputColors","vs/platform/theme/common/colors/minimapColors","vs/editor/browser/controller/mouseTarget","vs/editor/browser/widget/diffEditor/features/overviewRulerFeature","vs/editor/browser/viewParts/lineNumbers/lineNumbers","vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess","vs/editor/standalone/browser/standaloneCodeEditorService","vs/editor/standalone/browser/standaloneThemeService","vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate","vs/editor/contrib/codeAction/browser/lightBulbWidget","vs/editor/contrib/colorPicker/browser/colorDetector","vs/editor/contrib/find/browser/findController","vs/editor/contrib/folding/browser/foldingDecorations","vs/editor/contrib/inlineEdit/browser/inlineEditController","vs/editor/contrib/wordHighlighter/browser/highlightDecorations","vs/editor/contrib/gotoError/browser/gotoError","vs/editor/contrib/gotoSymbol/browser/peek/referencesController","vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition","vs/editor/contrib/inlayHints/browser/inlayHintsLocations","vs/editor/contrib/inlayHints/browser/inlayHintsController","vs/editor/contrib/inlayHints/browser/inlayHintsHover","vs/editor/contrib/stickyScroll/browser/stickyScrollController","vs/editor/contrib/contextmenu/browser/contextmenu","vs/editor/contrib/dropOrPasteInto/browser/copyPasteController","vs/editor/contrib/snippet/browser/snippetSession","vs/editor/contrib/suggest/browser/suggestModel","vs/editor/contrib/inlineEdits/browser/inlineEditsWidget","vs/editor/contrib/inlineEdits/browser/inlineEditsController","vs/platform/workspace/common/workspaceTrust","vs/base/browser/iframe","vs/base/browser/ui/list/list","vs/base/browser/ui/list/splice","vs/base/common/diff/diffChange","vs/base/common/comparers","vs/base/common/linkedText","vs/base/common/marked/marked","vs/base/common/naturalLanguage/korean","vs/base/common/navigator","vs/base/common/history","vs/base/common/observableInternal/lazyObservableValue","vs/base/common/observableInternal/api","vs/base/common/observableInternal/promise","vs/base/browser/ui/list/rangeMap","vs/base/common/fuzzyScorer","vs/base/common/labels","vs/base/common/search","vs/base/browser/ui/scrollbar/scrollbarVisibilityController","vs/base/browser/ui/tree/compressedObjectTreeModel","vs/base/common/tfIdf","vs/base/common/codiconsLibrary","vs/base/browser/domObservable","vs/base/browser/ui/list/rowCache","vs/base/browser/ui/selectBox/selectBoxNative","vs/base/browser/ui/scrollbar/horizontalScrollbar","vs/base/browser/ui/scrollbar/verticalScrollbar","vs/base/browser/defaultWorkerFactory","vs/base/parts/storage/common/storage","vs/css!vs/base/browser/ui/aria/aria","vs/css!vs/base/browser/ui/button/button","vs/css!vs/base/browser/ui/codicons/codicon/codicon","vs/css!vs/base/browser/ui/codicons/codicon/codicon-modifiers","vs/css!vs/base/browser/ui/contextview/contextview","vs/css!vs/base/browser/ui/countBadge/countBadge","vs/css!vs/base/browser/ui/hover/hoverWidget","vs/css!vs/base/browser/ui/iconLabel/iconlabel","vs/css!vs/base/browser/ui/inputbox/inputBox","vs/css!vs/base/browser/ui/keybindingLabel/keybindingLabel","vs/css!vs/base/browser/ui/mouseCursor/mouseCursor","vs/css!vs/base/browser/ui/progressbar/progressbar","vs/base/browser/ui/progressbar/progressbar","vs/css!vs/base/browser/ui/sash/sash","vs/css!vs/base/browser/ui/scrollbar/media/scrollbars","vs/base/browser/ui/list/listPaging","vs/css!vs/base/browser/ui/selectBox/selectBox","vs/css!vs/base/browser/ui/selectBox/selectBoxCustom","vs/css!vs/base/browser/ui/splitview/splitview","vs/css!vs/base/browser/ui/table/table","vs/base/browser/ui/table/tableWidget","vs/css!vs/base/browser/ui/toggle/toggle","vs/css!vs/base/browser/ui/toolbar/toolbar","vs/css!vs/base/browser/ui/tree/media/tree","vs/css!vs/editor/browser/controller/textAreaHandler","vs/css!vs/editor/browser/services/hoverService/hover","vs/css!vs/editor/browser/viewParts/blockDecorations/blockDecorations","vs/css!vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight","vs/css!vs/editor/browser/viewParts/decorations/decorations","vs/css!vs/editor/browser/viewParts/glyphMargin/glyphMargin","vs/css!vs/editor/browser/viewParts/indentGuides/indentGuides","vs/css!vs/editor/browser/viewParts/lineNumbers/lineNumbers","vs/css!vs/editor/browser/viewParts/lines/viewLines","vs/css!vs/editor/browser/viewParts/linesDecorations/linesDecorations","vs/css!vs/editor/browser/viewParts/margin/margin","vs/css!vs/editor/browser/viewParts/marginDecorations/marginDecorations","vs/css!vs/editor/browser/viewParts/minimap/minimap","vs/css!vs/editor/browser/viewParts/overlayWidgets/overlayWidgets","vs/css!vs/editor/browser/viewParts/rulers/rulers","vs/css!vs/editor/browser/viewParts/scrollDecoration/scrollDecoration","vs/css!vs/editor/browser/viewParts/selections/selections","vs/css!vs/editor/browser/viewParts/viewCursors/viewCursors","vs/css!vs/editor/browser/viewParts/whitespace/whitespace","vs/css!vs/editor/browser/widget/codeEditor/editor","vs/css!vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer","vs/css!vs/editor/browser/widget/diffEditor/style","vs/css!vs/editor/browser/widget/markdownRenderer/browser/renderedMarkdown","vs/css!vs/editor/browser/widget/multiDiffEditor/style","vs/css!vs/editor/contrib/anchorSelect/browser/anchorSelect","vs/css!vs/editor/contrib/bracketMatching/browser/bracketMatching","vs/css!vs/editor/contrib/codeAction/browser/lightBulbWidget","vs/css!vs/editor/contrib/codelens/browser/codelensWidget","vs/css!vs/editor/contrib/dnd/browser/dnd","vs/css!vs/editor/contrib/dropOrPasteInto/browser/postEditWidget","vs/css!vs/editor/contrib/find/browser/findOptionsWidget","vs/css!vs/editor/contrib/find/browser/findWidget","vs/css!vs/editor/contrib/folding/browser/folding","vs/css!vs/editor/contrib/gotoError/browser/media/gotoErrorWidget","vs/css!vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition","vs/css!vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget","vs/css!vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace","vs/css!vs/editor/contrib/inlineCompletions/browser/ghostText","vs/css!vs/editor/contrib/inlineCompletions/browser/inlineCompletionsHintsWidget","vs/css!vs/editor/contrib/inlineEdit/browser/inlineEdit","vs/css!vs/editor/contrib/inlineEdit/browser/inlineEditHintsWidget","vs/css!vs/editor/contrib/inlineEdit/browser/inlineEditSideBySideWidget","vs/css!vs/editor/contrib/inlineEdits/browser/inlineEditsWidget","vs/css!vs/editor/contrib/inlineProgress/browser/inlineProgressWidget","vs/css!vs/editor/contrib/linkedEditing/browser/linkedEditing","vs/css!vs/editor/contrib/links/browser/links","vs/css!vs/editor/contrib/message/browser/messageController","vs/css!vs/editor/contrib/parameterHints/browser/parameterHints","vs/css!vs/editor/contrib/peekView/browser/media/peekViewWidget","vs/css!vs/editor/contrib/placeholderText/browser/placeholderText","vs/css!vs/editor/contrib/rename/browser/renameWidget","vs/css!vs/editor/contrib/snippet/browser/snippetSession","vs/css!vs/editor/contrib/stickyScroll/browser/stickyScroll","vs/css!vs/editor/contrib/suggest/browser/media/suggest","vs/css!vs/editor/contrib/symbolIcons/browser/symbolIcons","vs/css!vs/editor/contrib/unicodeHighlighter/browser/bannerController","vs/css!vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter","vs/css!vs/editor/contrib/wordHighlighter/browser/highlightDecorations","vs/css!vs/editor/contrib/zoneWidget/browser/zoneWidget","vs/css!vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard","vs/css!vs/editor/standalone/browser/inspectTokens/inspectTokens","vs/css!vs/editor/standalone/browser/quickInput/standaloneQuickInput","vs/css!vs/editor/standalone/browser/standalone-tokens","vs/css!vs/platform/actions/browser/menuEntryActionViewItem","vs/css!vs/platform/opener/browser/link","vs/css!vs/platform/severityIcon/browser/media/severityIcon","vs/editor/browser/config/charWidthReader","vs/editor/browser/config/migrateOptions","vs/editor/browser/viewParts/lines/domReadingContext","vs/editor/browser/viewParts/lines/rangeUtil","vs/editor/browser/viewParts/minimap/minimapCharRenderer","vs/editor/browser/viewParts/minimap/minimapPreBaked","vs/editor/browser/viewParts/minimap/minimapCharRendererFactory","vs/editor/browser/widget/codeEditor/codeEditorContributions","vs/editor/browser/widget/diffEditor/delegatingEditorImpl","vs/editor/browser/widget/multiDiffEditor/objectPool","vs/editor/common/commands/trimTrailingWhitespaceCommand","vs/editor/browser/widget/diffEditor/utils/editorGutter","vs/editor/common/core/positionToOffset","vs/editor/common/cursor/cursorContext","vs/editor/common/diff/defaultLinesDiffComputer/lineSequence","vs/editor/common/diff/defaultLinesDiffComputer/algorithms/dynamicProgrammingDiffing","vs/editor/common/diff/defaultLinesDiffComputer/computeMovedLines","vs/editor/common/diff/legacyLinesDiffComputer","vs/editor/common/diff/linesDiffComputers","vs/editor/common/editorTheme","vs/editor/common/languages/defaultDocumentColorsComputer","vs/editor/common/languages/linkComputer","vs/editor/common/cursor/cursorColumnSelection","vs/editor/common/cursor/oneCursor","vs/editor/common/cursor/cursorCollection","vs/editor/common/languages/supports/characterPair","vs/editor/common/languages/supports/indentRules","vs/editor/common/languages/supports/inplaceReplaceSupport","vs/editor/common/languages/supports/onEnter","vs/editor/common/languages/supports/electricCharacter","vs/editor/common/languages/supports/languageBracketsConfiguration","vs/editor/common/languages/supports/tokenization","vs/editor/common/languageFeatureRegistry","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/nodeReader","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/concat23Trees","vs/editor/common/model/bracketPairsTextModelPart/fixBrackets","vs/editor/common/model/fixedArray","vs/editor/common/model/indentationGuesser","vs/editor/common/model/intervalTree","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/editor/common/model/mirrorTextModel","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/editor/common/model/textModelText","vs/editor/common/services/findSectionHeaders","vs/editor/common/services/semanticTokensDto","vs/editor/common/textModelBracketPairs","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsTree/bracketPairsTree","vs/editor/common/model/bracketPairsTextModelPart/bracketPairsImpl","vs/editor/browser/view/domLineBreaksComputer","vs/editor/common/tokenizationRegistry","vs/editor/common/tokens/contiguousMultilineTokens","vs/editor/common/tokens/contiguousTokensEditing","vs/editor/common/tokens/contiguousTokensStore","vs/editor/common/tokens/sparseMultilineTokens","vs/editor/common/tokens/sparseTokensStore","vs/editor/browser/view/viewOverlays","vs/editor/browser/viewParts/blockDecorations/blockDecorations","vs/editor/browser/viewParts/contentWidgets/contentWidgets","vs/editor/browser/viewParts/decorations/decorations","vs/editor/browser/viewParts/linesDecorations/linesDecorations","vs/editor/browser/viewParts/marginDecorations/marginDecorations","vs/editor/browser/viewParts/overlayWidgets/overlayWidgets","vs/editor/browser/viewParts/rulers/rulers","vs/editor/browser/viewParts/scrollDecoration/scrollDecoration","vs/editor/browser/viewParts/viewZones/viewZones","vs/editor/common/viewLayout/linePart","vs/editor/common/viewLayout/linesLayout","vs/editor/common/viewLayout/viewLinesViewportData","vs/editor/common/viewModel/glyphLanesModel","vs/editor/common/viewModel/modelLineProjection","vs/editor/common/viewModel/monospaceLineBreaksComputer","vs/editor/browser/viewParts/overviewRuler/overviewRuler","vs/editor/common/viewModel/viewContext","vs/editor/common/viewLayout/viewLayout","vs/editor/contrib/caretOperations/browser/moveCaretCommand","vs/editor/contrib/colorPicker/browser/colorPickerModel","vs/editor/contrib/comment/browser/lineCommentCommand","vs/editor/contrib/dnd/browser/dragAndDropCommand","vs/editor/contrib/find/browser/replaceAllCommand","vs/editor/contrib/find/browser/replacePattern","vs/editor/contrib/folding/browser/hiddenRangeModel","vs/editor/contrib/hover/browser/contentHoverComputer","vs/editor/contrib/hover/browser/contentHoverTypes","vs/editor/contrib/hover/browser/hoverAccessibleViews","vs/editor/contrib/hover/browser/marginHoverComputer","vs/editor/contrib/hover/browser/resizableContentWidget","vs/editor/contrib/inPlaceReplace/browser/inPlaceReplaceCommand","vs/editor/contrib/inlineCompletions/browser/inlineCompletionsAccessibleView","vs/editor/contrib/inlineEdit/browser/commandIds","vs/editor/contrib/linesOperations/browser/copyLinesCommand","vs/editor/contrib/linesOperations/browser/sortLinesCommand","vs/editor/contrib/smartSelect/browser/wordSelections","vs/editor/contrib/suggest/browser/suggestCommitCharacters","vs/editor/contrib/suggest/browser/suggestOvertypingCapturer","vs/editor/standalone/common/monarch/monarchCompile","vs/base/browser/ui/selectBox/selectBoxCustom","vs/base/browser/ui/selectBox/selectBox","vs/base/browser/ui/dropdown/dropdown","vs/base/browser/ui/findinput/replaceInput","vs/base/browser/ui/menu/menu","vs/base/browser/ui/toolbar/toolbar","vs/base/browser/ui/tree/dataTree","vs/base/browser/ui/tree/asyncDataTree","vs/editor/browser/services/hoverService/updatableHoverWidget","vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/inlineDiffDeletedCodeMargin","vs/editor/browser/widget/diffEditor/features/revertButtonsFeature","vs/editor/browser/viewParts/viewCursors/viewCursor","vs/editor/common/model/textModelTokens","vs/editor/common/model/tokenizationTextModelPart","vs/editor/common/services/editorSimpleWorker","vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/renderLines","vs/platform/action/common/actionCommonCategories","vs/platform/contextkey/common/scanner","vs/platform/editor/common/editor","vs/platform/extensions/common/extensions","vs/platform/history/browser/historyWidgetKeybindingHint","vs/platform/instantiation/common/graph","vs/editor/common/services/languageFeaturesService","vs/editor/common/services/treeViewsDndService","vs/editor/contrib/inlineCompletions/browser/ghostTextWidget","vs/editor/contrib/links/browser/getLinks","vs/editor/standalone/browser/colorizer","vs/editor/contrib/parameterHints/browser/parameterHintsModel","vs/editor/contrib/suggest/browser/suggestAlternatives","vs/editor/contrib/suggest/browser/wordContextKey","vs/editor/browser/config/editorConfiguration","vs/platform/contextkey/browser/contextKeyService","vs/platform/instantiation/common/instantiationService","vs/platform/keybinding/common/baseResolvedKeybinding","vs/platform/keybinding/common/abstractKeybindingService","vs/platform/keybinding/common/usLayoutResolvedKeybinding","vs/platform/accessibility/browser/accessibilityService","vs/editor/contrib/diffEditorBreadcrumbs/browser/contribution","vs/editor/contrib/documentSymbols/browser/documentSymbols","vs/platform/clipboard/browser/clipboardService","vs/platform/log/common/logService","vs/editor/contrib/gotoError/browser/markerNavigationService","vs/platform/markers/common/markerService","vs/platform/observable/common/wrapInReloadableClass","vs/editor/browser/services/openerService","vs/platform/opener/browser/link","vs/platform/quickinput/browser/pickerQuickAccess","vs/platform/quickinput/browser/quickInputBox","vs/editor/browser/services/hoverService/hoverWidget","vs/editor/browser/services/webWorker","vs/editor/common/cursor/cursor","vs/editor/common/services/getIconClasses","vs/editor/common/services/languagesAssociations","vs/editor/common/services/languagesRegistry","vs/editor/common/services/languageService","vs/editor/contrib/hover/browser/marginHoverWidget","vs/editor/contrib/indentation/common/indentation","vs/editor/contrib/inlineCompletions/browser/inlineCompletionsSource","vs/editor/contrib/linesOperations/browser/moveLinesCommand","vs/platform/configuration/common/configurations","vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode","vs/platform/quickinput/browser/quickInputActions","vs/platform/quickinput/browser/helpQuickAccess","vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess","vs/platform/quickinput/browser/quickAccess","vs/platform/severityIcon/browser/severityIcon","vs/editor/contrib/codelens/browser/codeLensCache","vs/editor/browser/services/markerDecorations","vs/editor/browser/view/viewController","vs/editor/contrib/anchorSelect/browser/anchorSelect","vs/editor/contrib/caretOperations/browser/caretOperations","vs/editor/contrib/caretOperations/browser/transpose","vs/editor/contrib/comment/browser/comment","vs/editor/contrib/cursorUndo/browser/cursorUndo","vs/editor/contrib/editorState/browser/keybindingCancellation","vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver","vs/editor/contrib/fontZoom/browser/fontZoom","vs/editor/contrib/format/browser/formatActions","vs/editor/contrib/gotoSymbol/browser/symbolNavigation","vs/editor/contrib/indentation/browser/indentation","vs/editor/contrib/lineSelection/browser/lineSelection","vs/editor/contrib/linesOperations/browser/linesOperations","vs/editor/contrib/longLinesHelper/browser/longLinesHelper","vs/editor/contrib/readOnlyMessage/browser/contribution","vs/editor/contrib/smartSelect/browser/smartSelect","vs/editor/contrib/tokenization/browser/tokenization","vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators","vs/editor/contrib/wordPartOperations/browser/wordPartOperations","vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard","vs/editor/standalone/browser/inspectTokens/inspectTokens","vs/platform/quickinput/browser/commandsQuickAccess","vs/editor/contrib/quickAccess/browser/commandsQuickAccess","vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess","vs/platform/theme/common/colors/menuColors","vs/platform/theme/common/colors/chartsColors","vs/platform/theme/common/colors/quickpickColors","vs/platform/theme/common/colors/searchColors","vs/editor/browser/viewParts/minimap/minimap","vs/editor/browser/widget/multiDiffEditor/colors","vs/editor/contrib/codeAction/browser/codeActionMenu","vs/editor/contrib/gotoSymbol/browser/peek/referencesTree","vs/platform/actionWidget/browser/actionList","vs/platform/actionWidget/browser/actionWidget","vs/platform/contextview/browser/contextMenuHandler","vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer","vs/editor/contrib/colorPicker/browser/colorPickerWidget","vs/editor/contrib/parameterHints/browser/parameterHintsWidget","vs/editor/contrib/parameterHints/browser/parameterHints","vs/editor/contrib/unicodeHighlighter/browser/bannerController","vs/platform/theme/browser/iconsStyleSheet","vs/editor/browser/controller/mouseHandler","vs/editor/browser/controller/pointerHandler","vs/editor/browser/viewParts/lines/viewLines","vs/editor/browser/services/abstractCodeEditorService","vs/editor/browser/services/hoverService/hoverService","vs/editor/browser/viewParts/editorScrollbar/editorScrollbar","vs/editor/browser/viewParts/selections/selections","vs/editor/browser/widget/diffEditor/components/diffEditorEditors","vs/editor/browser/viewParts/currentLineHighlight/currentLineHighlight","vs/editor/browser/viewParts/indentGuides/indentGuides","vs/editor/browser/controller/textAreaHandler","vs/editor/browser/viewParts/overviewRuler/decorationsOverviewRuler","vs/editor/browser/viewParts/viewCursors/viewCursors","vs/editor/browser/viewParts/whitespace/whitespace","vs/editor/browser/view","vs/editor/common/model/bracketPairsTextModelPart/colorizedBracketPairsDecorationProvider","vs/editor/common/services/markerDecorationsService","vs/editor/common/services/semanticTokensStylingService","vs/editor/contrib/placeholderText/browser/placeholderText.contribution","vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess","vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess","vs/editor/contrib/rename/browser/renameWidget","vs/editor/contrib/rename/browser/rename","vs/editor/contrib/semanticTokens/browser/documentSemanticTokens","vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens","vs/editor/contrib/suggest/browser/suggestWidgetRenderer","vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess","vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess","vs/editor/standalone/common/themes","vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast","vs/editor/contrib/suggest/browser/suggestWidgetStatus","vs/editor/browser/widget/diffEditor/features/gutterFeature","vs/editor/contrib/inlineEdit/browser/inlineEditHintsWidget","vs/platform/contextview/browser/contextMenuService","vs/platform/quickinput/browser/quickInputTree","vs/platform/quickinput/browser/quickInputController","vs/platform/quickinput/browser/quickInputService","vs/editor/standalone/browser/quickInput/standaloneQuickInputService","vs/editor/browser/widget/diffEditor/components/diffEditorDecorations","vs/editor/browser/widget/diffEditor/diffEditorOptions","vs/editor/common/services/modelService","vs/editor/common/viewModel/viewModelLines","vs/editor/common/viewModel/viewModelImpl","vs/editor/browser/widget/diffEditor/commands","vs/editor/browser/widget/diffEditor/diffEditor.contribution","vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl","vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidget","vs/editor/contrib/bracketMatching/browser/bracketMatching","vs/editor/contrib/codeAction/browser/codeActionCommands","vs/editor/contrib/codeAction/browser/codeActionContributions","vs/editor/contrib/codelens/browser/codelensWidget","vs/editor/contrib/codelens/browser/codelensController","vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget","vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions","vs/editor/contrib/dnd/browser/dnd","vs/editor/contrib/find/browser/findDecorations","vs/editor/contrib/find/browser/findOptionsWidget","vs/editor/contrib/find/browser/findState","vs/editor/contrib/find/browser/findWidget","vs/editor/contrib/inPlaceReplace/browser/inPlaceReplace","vs/editor/contrib/inlineEdit/browser/ghostTextWidget","vs/editor/contrib/inlineEdit/browser/inlineEditSideBySideWidget","vs/editor/contrib/inlineEdit/browser/commands","vs/editor/contrib/inlineEdit/browser/inlineEdit.contribution","vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorController","vs/editor/contrib/linkedEditing/browser/linkedEditing","vs/editor/contrib/links/browser/links","vs/editor/contrib/sectionHeaders/browser/sectionHeaders","vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider","vs/editor/contrib/stickyScroll/browser/stickyScrollProvider","vs/editor/contrib/stickyScroll/browser/stickyScrollWidget","vs/editor/contrib/suggest/browser/suggestWidget","vs/editor/contrib/multicursor/browser/multicursor","vs/editor/contrib/wordHighlighter/browser/wordHighlighter","vs/editor/contrib/zoneWidget/browser/zoneWidget","vs/editor/contrib/gotoError/browser/gotoErrorWidget","vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget","vs/editor/contrib/hover/browser/markerHoverParticipant","vs/editor/contrib/hover/browser/contentHoverRendered","vs/editor/contrib/hover/browser/contentHoverController","vs/editor/contrib/colorPicker/browser/colorContributions","vs/editor/contrib/hover/browser/hoverActions","vs/editor/contrib/hover/browser/hoverContribution","vs/editor/contrib/inlayHints/browser/inlayHintsContribution","vs/editor/contrib/stickyScroll/browser/stickyScrollActions","vs/editor/contrib/stickyScroll/browser/stickyScrollContribution","vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch","vs/platform/undoRedo/common/undoRedoService","vs/editor/contrib/clipboard/browser/clipboard","vs/editor/contrib/dropOrPasteInto/browser/copyPasteContribution","vs/editor/contrib/dropOrPasteInto/browser/dropIntoEditorContribution","vs/editor/contrib/snippet/browser/snippetVariables","vs/editor/contrib/inlineCompletions/browser/inlineCompletionsModel","vs/editor/contrib/inlineCompletions/browser/suggestWidgetInlineCompletionProvider","vs/editor/contrib/inlineCompletions/browser/commands","vs/editor/contrib/inlineCompletions/browser/hoverParticipant","vs/editor/contrib/inlineCompletions/browser/inlineCompletions.contribution","vs/editor/contrib/inlineEdits/browser/inlineEditsModel","vs/editor/contrib/inlineEdits/browser/commands","vs/editor/contrib/inlineEdits/browser/inlineEdits.contribution","vs/editor/contrib/suggest/browser/suggestInlineCompletions","vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter","vs/editor/editor.all","vs/editor/standalone/browser/standaloneCodeEditor","vs/editor/standalone/browser/standaloneEditor","vs/editor/standalone/browser/standaloneLanguages","vs/editor/editor.api","vs/css","vs/editor/edcore.main"],re=function(ae){for(var e=[],c=0,k=ae.length;c<k;c++)e[c]=oe[ae[c]];return e};define(oe[866],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.load=c;function c(f,_,b,p){if(p=p||{},(p["vs/css"]||{}).disabled){b({});return}const s=_.toUrl(f+".css");k(f,s,()=>{b({})},t=>{typeof b.error=="function"&&b.error("Could not find "+s+".")})}function k(f,_,b,p){if(E(f,_)){b();return}L(f,_,b,p)}function E(f,_){const b=window.document.getElementsByTagName("link");for(let p=0,n=b.length;p<n;p++){const s=b[p].getAttribute("data-name"),t=b[p].getAttribute("href");if(s===f||t===_)return!0}return!1}function L(f,_,b,p){const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("data-name",f),y(f,n,b,p),n.setAttribute("href",_),(window.document.head||window.document.getElementsByTagName("head")[0]).appendChild(n)}function y(f,_,b,p){const n=()=>{_.removeEventListener("load",s),_.removeEventListener("error",t)},s=i=>{n(),b()},t=i=>{n(),p(i)};_.addEventListener("load",s),_.addEventListener("error",t)}});/*! @license DOMPurify 3.0.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.5/LICENSE */const{entries:qt,setPrototypeOf:Ut,isFrozen:li,getPrototypeOf:di,getOwnPropertyDescriptor:ci}=Object;let{freeze:mt,seal:yt,create:ui}=Object,{apply:Pt,construct:Ot}=typeof Reflect<"u"&&Reflect;Pt||(Pt=function(e,c,k){return e.apply(c,k)}),mt||(mt=function(e){return e}),yt||(yt=function(e){return e}),Ot||(Ot=function(e,c){return new e(...c)});const hi=vt(Array.prototype.forEach),jt=vt(Array.prototype.pop),kt=vt(Array.prototype.push),Mt=vt(String.prototype.toLowerCase),Ft=vt(String.prototype.toString),gi=vt(String.prototype.match),Lt=vt(String.prototype.replace),fi=vt(String.prototype.indexOf),mi=vt(String.prototype.trim),Ct=vt(RegExp.prototype.test),Tt=pi(TypeError);function vt(ae){return function(e){for(var c=arguments.length,k=new Array(c>1?c-1:0),E=1;E<c;E++)k[E-1]=arguments[E];return Pt(ae,e,k)}}function pi(ae){return function(){for(var e=arguments.length,c=new Array(e),k=0;k<e;k++)c[k]=arguments[k];return Ot(ae,c)}}function Ze(ae,e,c){var k;c=(k=c)!==null&&k!==void 0?k:Mt,Ut&&Ut(ae,null);let E=e.length;for(;E--;){let L=e[E];if(typeof L=="string"){const y=c(L);y!==L&&(li(e)||(e[E]=y),L=y)}ae[L]=!0}return ae}function It(ae){const e=ui(null);for(const[c,k]of qt(ae))e[c]=k;return e}function At(ae,e){for(;ae!==null;){const k=ci(ae,e);if(k){if(k.get)return vt(k.get);if(typeof k.value=="function")return vt(k.value)}ae=di(ae)}function c(k){return console.warn("fallback value for",k),null}return c}const Gt=mt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),xt=mt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Wt=mt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ci=mt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Bt=mt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),bi=mt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$t=mt(["#text"]),Yt=mt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ht=mt(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zt=mt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Rt=mt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vi=yt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Si=yt(/<%[\w\W]*|[\w\W]*%>/gm),_i=yt(/\${[\w\W]*}/gm),wi=yt(/^data-[\-\w.\u00B7-\uFFFF]/),yi=yt(/^aria-[\-\w]+$/),Qt=yt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Li=yt(/^(?:\w+script|data):/i),Ei=yt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Xt=yt(/^html$/i);var Jt=Object.freeze({__proto__:null,MUSTACHE_EXPR:vi,ERB_EXPR:Si,TMPLIT_EXPR:_i,DATA_ATTR:wi,ARIA_ATTR:yi,IS_ALLOWED_URI:Qt,IS_SCRIPT_OR_DATA:Li,ATTR_WHITESPACE:Ei,DOCTYPE_NAME:Xt});const Di=()=>typeof window>"u"?null:window,Ii=function(e,c){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let k=null;const E="data-tt-policy-suffix";c&&c.hasAttribute(E)&&(k=c.getAttribute(E));const L="dompurify"+(k?"#"+k:"");try{return e.createPolicy(L,{createHTML(y){return y},createScriptURL(y){return y}})}catch{return console.warn("TrustedTypes policy "+L+" could not be created."),null}};function ei(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Di();const e=qe=>ei(qe);if(e.version="3.0.5",e.removed=[],!ae||!ae.document||ae.document.nodeType!==9)return e.isSupported=!1,e;const c=ae.document,k=c.currentScript;let{document:E}=ae;const{DocumentFragment:L,HTMLTemplateElement:y,Node:f,Element:_,NodeFilter:b,NamedNodeMap:p=ae.NamedNodeMap||ae.MozNamedAttrMap,HTMLFormElement:n,DOMParser:s,trustedTypes:t}=ae,i=_.prototype,o=At(i,"cloneNode"),g=At(i,"nextSibling"),u=At(i,"childNodes"),l=At(i,"parentNode");if(typeof y=="function"){const qe=E.createElement("template");qe.content&&qe.content.ownerDocument&&(E=qe.content.ownerDocument)}let a,r="";const{implementation:d,createNodeIterator:m,createDocumentFragment:h,getElementsByTagName:v}=E,{importNode:C}=c;let w={};e.isSupported=typeof qt=="function"&&typeof l=="function"&&d&&d.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:S,ERB_EXPR:D,TMPLIT_EXPR:I,DATA_ATTR:T,ARIA_ATTR:M,IS_SCRIPT_OR_DATA:A,ATTR_WHITESPACE:R}=Jt;let{IS_ALLOWED_URI:N}=Jt,O=null;const x=Ze({},[...Gt,...xt,...Wt,...Bt,...$t]);let F=null;const W=Ze({},[...Yt,...Ht,...Zt,...Rt]);let z=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,H=null,K=!0,U=!0,Y=!1,Q=!0,X=!1,G=!1,P=!1,te=!1,se=!1,ue=!1,ge=!1,pe=!0,ce=!1;const ie="user-content-";let ne=!0,J=!1,B={},j=null;const V=Ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let $=null;const Z=Ze({},["audio","video","img","source","image","track"]);let ee=null;const le=Ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",me="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml";let ve=be,Le=!1,Se=null;const ye=Ze({},[de,me,be],Ft);let Ee;const ke=["application/xhtml+xml","text/html"],Re="text/html";let Pe,Fe=null;const je=E.createElement("form"),Te=function(Ce){return Ce instanceof RegExp||Ce instanceof Function},Ne=function(Ce){if(!(Fe&&Fe===Ce)){if((!Ce||typeof Ce!="object")&&(Ce={}),Ce=It(Ce),Ee=ke.indexOf(Ce.PARSER_MEDIA_TYPE)===-1?Ee=Re:Ee=Ce.PARSER_MEDIA_TYPE,Pe=Ee==="application/xhtml+xml"?Ft:Mt,O="ALLOWED_TAGS"in Ce?Ze({},Ce.ALLOWED_TAGS,Pe):x,F="ALLOWED_ATTR"in Ce?Ze({},Ce.ALLOWED_ATTR,Pe):W,Se="ALLOWED_NAMESPACES"in Ce?Ze({},Ce.ALLOWED_NAMESPACES,Ft):ye,ee="ADD_URI_SAFE_ATTR"in Ce?Ze(It(le),Ce.ADD_URI_SAFE_ATTR,Pe):le,$="ADD_DATA_URI_TAGS"in Ce?Ze(It(Z),Ce.ADD_DATA_URI_TAGS,Pe):Z,j="FORBID_CONTENTS"in Ce?Ze({},Ce.FORBID_CONTENTS,Pe):V,q="FORBID_TAGS"in Ce?Ze({},Ce.FORBID_TAGS,Pe):{},H="FORBID_ATTR"in Ce?Ze({},Ce.FORBID_ATTR,Pe):{},B="USE_PROFILES"in Ce?Ce.USE_PROFILES:!1,K=Ce.ALLOW_ARIA_ATTR!==!1,U=Ce.ALLOW_DATA_ATTR!==!1,Y=Ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Q=Ce.ALLOW_SELF_CLOSE_IN_ATTR!==!1,X=Ce.SAFE_FOR_TEMPLATES||!1,G=Ce.WHOLE_DOCUMENT||!1,se=Ce.RETURN_DOM||!1,ue=Ce.RETURN_DOM_FRAGMENT||!1,ge=Ce.RETURN_TRUSTED_TYPE||!1,te=Ce.FORCE_BODY||!1,pe=Ce.SANITIZE_DOM!==!1,ce=Ce.SANITIZE_NAMED_PROPS||!1,ne=Ce.KEEP_CONTENT!==!1,J=Ce.IN_PLACE||!1,N=Ce.ALLOWED_URI_REGEXP||Qt,ve=Ce.NAMESPACE||be,z=Ce.CUSTOM_ELEMENT_HANDLING||{},Ce.CUSTOM_ELEMENT_HANDLING&&Te(Ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(z.tagNameCheck=Ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ce.CUSTOM_ELEMENT_HANDLING&&Te(Ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(z.attributeNameCheck=Ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ce.CUSTOM_ELEMENT_HANDLING&&typeof Ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(z.allowCustomizedBuiltInElements=Ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),X&&(U=!1),ue&&(se=!0),B&&(O=Ze({},[...$t]),F=[],B.html===!0&&(Ze(O,Gt),Ze(F,Yt)),B.svg===!0&&(Ze(O,xt),Ze(F,Ht),Ze(F,Rt)),B.svgFilters===!0&&(Ze(O,Wt),Ze(F,Ht),Ze(F,Rt)),B.mathMl===!0&&(Ze(O,Bt),Ze(F,Zt),Ze(F,Rt))),Ce.ADD_TAGS&&(O===x&&(O=It(O)),Ze(O,Ce.ADD_TAGS,Pe)),Ce.ADD_ATTR&&(F===W&&(F=It(F)),Ze(F,Ce.ADD_ATTR,Pe)),Ce.ADD_URI_SAFE_ATTR&&Ze(ee,Ce.ADD_URI_SAFE_ATTR,Pe),Ce.FORBID_CONTENTS&&(j===V&&(j=It(j)),Ze(j,Ce.FORBID_CONTENTS,Pe)),ne&&(O["#text"]=!0),G&&Ze(O,["html","head","body"]),O.table&&(Ze(O,["tbody"]),delete q.tbody),Ce.TRUSTED_TYPES_POLICY){if(typeof Ce.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ce.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');a=Ce.TRUSTED_TYPES_POLICY,r=a.createHTML("")}else a===void 0&&(a=Ii(t,k)),a!==null&&typeof r=="string"&&(r=a.createHTML(""));mt&&mt(Ce),Fe=Ce}},fe=Ze({},["mi","mo","mn","ms","mtext"]),we=Ze({},["foreignobject","desc","title","annotation-xml"]),Oe=Ze({},["title","style","font","a","script"]),Be=Ze({},xt);Ze(Be,Wt),Ze(Be,Ci);const Ue=Ze({},Bt);Ze(Ue,bi);const Ye=function(Ce){let _e=l(Ce);(!_e||!_e.tagName)&&(_e={namespaceURI:ve,tagName:"template"});const Ie=Mt(Ce.tagName),Ae=Mt(_e.tagName);return Se[Ce.namespaceURI]?Ce.namespaceURI===me?_e.namespaceURI===be?Ie==="svg":_e.namespaceURI===de?Ie==="svg"&&(Ae==="annotation-xml"||fe[Ae]):!!Be[Ie]:Ce.namespaceURI===de?_e.namespaceURI===be?Ie==="math":_e.namespaceURI===me?Ie==="math"&&we[Ae]:!!Ue[Ie]:Ce.namespaceURI===be?_e.namespaceURI===me&&!we[Ae]||_e.namespaceURI===de&&!fe[Ae]?!1:!Ue[Ie]&&(Oe[Ie]||!Be[Ie]):!!(Ee==="application/xhtml+xml"&&Se[Ce.namespaceURI]):!1},Qe=function(Ce){kt(e.removed,{element:Ce});try{Ce.parentNode.removeChild(Ce)}catch{Ce.remove()}},tt=function(Ce,_e){try{kt(e.removed,{attribute:_e.getAttributeNode(Ce),from:_e})}catch{kt(e.removed,{attribute:null,from:_e})}if(_e.removeAttribute(Ce),Ce==="is"&&!F[Ce])if(se||ue)try{Qe(_e)}catch{}else try{_e.setAttribute(Ce,"")}catch{}},it=function(Ce){let _e,Ie;if(te)Ce="<remove></remove>"+Ce;else{const Ke=gi(Ce,/^[\r\n\t ]+/);Ie=Ke&&Ke[0]}Ee==="application/xhtml+xml"&&ve===be&&(Ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ce+"</body></html>");const Ae=a?a.createHTML(Ce):Ce;if(ve===be)try{_e=new s().parseFromString(Ae,Ee)}catch{}if(!_e||!_e.documentElement){_e=d.createDocument(ve,"template",null);try{_e.documentElement.innerHTML=Le?r:Ae}catch{}}const We=_e.body||_e.documentElement;return Ce&&Ie&&We.insertBefore(E.createTextNode(Ie),We.childNodes[0]||null),ve===be?v.call(_e,G?"html":"body")[0]:G?_e.documentElement:We},ut=function(Ce){return m.call(Ce.ownerDocument||Ce,Ce,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,null,!1)},ct=function(Ce){return Ce instanceof n&&(typeof Ce.nodeName!="string"||typeof Ce.textContent!="string"||typeof Ce.removeChild!="function"||!(Ce.attributes instanceof p)||typeof Ce.removeAttribute!="function"||typeof Ce.setAttribute!="function"||typeof Ce.namespaceURI!="string"||typeof Ce.insertBefore!="function"||typeof Ce.hasChildNodes!="function")},nt=function(Ce){return typeof f=="object"?Ce instanceof f:Ce&&typeof Ce=="object"&&typeof Ce.nodeType=="number"&&typeof Ce.nodeName=="string"},st=function(Ce,_e,Ie){w[Ce]&&hi(w[Ce],Ae=>{Ae.call(e,_e,Ie,Fe)})},dt=function(Ce){let _e;if(st("beforeSanitizeElements",Ce,null),ct(Ce))return Qe(Ce),!0;const Ie=Pe(Ce.nodeName);if(st("uponSanitizeElement",Ce,{tagName:Ie,allowedTags:O}),Ce.hasChildNodes()&&!nt(Ce.firstElementChild)&&(!nt(Ce.content)||!nt(Ce.content.firstElementChild))&&Ct(/<[/\w]/g,Ce.innerHTML)&&Ct(/<[/\w]/g,Ce.textContent))return Qe(Ce),!0;if(!O[Ie]||q[Ie]){if(!q[Ie]&&_t(Ie)&&(z.tagNameCheck instanceof RegExp&&Ct(z.tagNameCheck,Ie)||z.tagNameCheck instanceof Function&&z.tagNameCheck(Ie)))return!1;if(ne&&!j[Ie]){const Ae=l(Ce)||Ce.parentNode,We=u(Ce)||Ce.childNodes;if(We&&Ae){const Ke=We.length;for(let He=Ke-1;He>=0;--He)Ae.insertBefore(o(We[He],!0),g(Ce))}}return Qe(Ce),!0}return Ce instanceof _&&!Ye(Ce)||(Ie==="noscript"||Ie==="noembed"||Ie==="noframes")&&Ct(/<\/no(script|embed|frames)/i,Ce.innerHTML)?(Qe(Ce),!0):(X&&Ce.nodeType===3&&(_e=Ce.textContent,_e=Lt(_e,S," "),_e=Lt(_e,D," "),_e=Lt(_e,I," "),Ce.textContent!==_e&&(kt(e.removed,{element:Ce.cloneNode()}),Ce.textContent=_e)),st("afterSanitizeElements",Ce,null),!1)},St=function(Ce,_e,Ie){if(pe&&(_e==="id"||_e==="name")&&(Ie in E||Ie in je))return!1;if(!(U&&!H[_e]&&Ct(T,_e))){if(!(K&&Ct(M,_e))){if(!F[_e]||H[_e]){if(!(_t(Ce)&&(z.tagNameCheck instanceof RegExp&&Ct(z.tagNameCheck,Ce)||z.tagNameCheck instanceof Function&&z.tagNameCheck(Ce))&&(z.attributeNameCheck instanceof RegExp&&Ct(z.attributeNameCheck,_e)||z.attributeNameCheck instanceof Function&&z.attributeNameCheck(_e))||_e==="is"&&z.allowCustomizedBuiltInElements&&(z.tagNameCheck instanceof RegExp&&Ct(z.tagNameCheck,Ie)||z.tagNameCheck instanceof Function&&z.tagNameCheck(Ie))))return!1}else if(!ee[_e]){if(!Ct(N,Lt(Ie,R,""))){if(!((_e==="src"||_e==="xlink:href"||_e==="href")&&Ce!=="script"&&fi(Ie,"data:")===0&&$[Ce])){if(!(Y&&!Ct(A,Lt(Ie,R,"")))){if(Ie)return!1}}}}}}return!0},_t=function(Ce){return Ce.indexOf("-")>0},ht=function(Ce){let _e,Ie,Ae,We;st("beforeSanitizeAttributes",Ce,null);const{attributes:Ke}=Ce;if(!Ke)return;const He={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:F};for(We=Ke.length;We--;){_e=Ke[We];const{name:$e,namespaceURI:Ve}=_e;if(Ie=$e==="value"?_e.value:mi(_e.value),Ae=Pe($e),He.attrName=Ae,He.attrValue=Ie,He.keepAttr=!0,He.forceKeepAttr=void 0,st("uponSanitizeAttribute",Ce,He),Ie=He.attrValue,He.forceKeepAttr||(tt($e,Ce),!He.keepAttr))continue;if(!Q&&Ct(/\/>/i,Ie)){tt($e,Ce);continue}X&&(Ie=Lt(Ie,S," "),Ie=Lt(Ie,D," "),Ie=Lt(Ie,I," "));const Me=Pe(Ce.nodeName);if(St(Me,Ae,Ie)){if(ce&&(Ae==="id"||Ae==="name")&&(tt($e,Ce),Ie=ie+Ie),a&&typeof t=="object"&&typeof t.getAttributeType=="function"&&!Ve)switch(t.getAttributeType(Me,Ae)){case"TrustedHTML":{Ie=a.createHTML(Ie);break}case"TrustedScriptURL":{Ie=a.createScriptURL(Ie);break}}try{Ve?Ce.setAttributeNS(Ve,$e,Ie):Ce.setAttribute($e,Ie),jt(e.removed)}catch{}}}st("afterSanitizeAttributes",Ce,null)},wt=function qe(Ce){let _e;const Ie=ut(Ce);for(st("beforeSanitizeShadowDOM",Ce,null);_e=Ie.nextNode();)st("uponSanitizeShadowNode",_e,null),!dt(_e)&&(_e.content instanceof L&&qe(_e.content),ht(_e));st("afterSanitizeShadowDOM",Ce,null)};return e.sanitize=function(qe){let Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e,Ie,Ae,We;if(Le=!qe,Le&&(qe="<!-->"),typeof qe!="string"&&!nt(qe))if(typeof qe.toString=="function"){if(qe=qe.toString(),typeof qe!="string")throw Tt("dirty is not a string, aborting")}else throw Tt("toString is not a function");if(!e.isSupported)return qe;if(P||Ne(Ce),e.removed=[],typeof qe=="string"&&(J=!1),J){if(qe.nodeName){const $e=Pe(qe.nodeName);if(!O[$e]||q[$e])throw Tt("root node is forbidden and cannot be sanitized in-place")}}else if(qe instanceof f)_e=it("<!---->"),Ie=_e.ownerDocument.importNode(qe,!0),Ie.nodeType===1&&Ie.nodeName==="BODY"||Ie.nodeName==="HTML"?_e=Ie:_e.appendChild(Ie);else{if(!se&&!X&&!G&&qe.indexOf("<")===-1)return a&&ge?a.createHTML(qe):qe;if(_e=it(qe),!_e)return se?null:ge?r:""}_e&&te&&Qe(_e.firstChild);const Ke=ut(J?qe:_e);for(;Ae=Ke.nextNode();)dt(Ae)||(Ae.content instanceof L&&wt(Ae.content),ht(Ae));if(J)return qe;if(se){if(ue)for(We=h.call(_e.ownerDocument);_e.firstChild;)We.appendChild(_e.firstChild);else We=_e;return(F.shadowroot||F.shadowrootmode)&&(We=C.call(c,We,!0)),We}let He=G?_e.outerHTML:_e.innerHTML;return G&&O["!doctype"]&&_e.ownerDocument&&_e.ownerDocument.doctype&&_e.ownerDocument.doctype.name&&Ct(Xt,_e.ownerDocument.doctype.name)&&(He="<!DOCTYPE "+_e.ownerDocument.doctype.name+`>
`+He),X&&(He=Lt(He,S," "),He=Lt(He,D," "),He=Lt(He,I," ")),a&&ge?a.createHTML(He):He},e.setConfig=function(qe){Ne(qe),P=!0},e.clearConfig=function(){Fe=null,P=!1},e.isValidAttribute=function(qe,Ce,_e){Fe||Ne({});const Ie=Pe(qe),Ae=Pe(Ce);return St(Ie,Ae,_e)},e.addHook=function(qe,Ce){typeof Ce=="function"&&(w[qe]=w[qe]||[],kt(w[qe],Ce))},e.removeHook=function(qe){if(w[qe])return jt(w[qe])},e.removeHooks=function(qe){w[qe]&&(w[qe]=[])},e.removeAllHooks=function(){w={}},e}var ki=ei();define("vs/base/browser/dompurify/dompurify",function(){return ki}),define(oe[39],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FastDomNode=void 0,e.createFastDomNode=E;class c{constructor(y){this.domNode=y,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingLeft="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}setMaxWidth(y){const f=k(y);this._maxWidth!==f&&(this._maxWidth=f,this.domNode.style.maxWidth=this._maxWidth)}setWidth(y){const f=k(y);this._width!==f&&(this._width=f,this.domNode.style.width=this._width)}setHeight(y){const f=k(y);this._height!==f&&(this._height=f,this.domNode.style.height=this._height)}setTop(y){const f=k(y);this._top!==f&&(this._top=f,this.domNode.style.top=this._top)}setLeft(y){const f=k(y);this._left!==f&&(this._left=f,this.domNode.style.left=this._left)}setBottom(y){const f=k(y);this._bottom!==f&&(this._bottom=f,this.domNode.style.bottom=this._bottom)}setRight(y){const f=k(y);this._right!==f&&(this._right=f,this.domNode.style.right=this._right)}setPaddingLeft(y){const f=k(y);this._paddingLeft!==f&&(this._paddingLeft=f,this.domNode.style.paddingLeft=this._paddingLeft)}setFontFamily(y){this._fontFamily!==y&&(this._fontFamily=y,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(y){this._fontWeight!==y&&(this._fontWeight=y,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(y){const f=k(y);this._fontSize!==f&&(this._fontSize=f,this.domNode.style.fontSize=this._fontSize)}setFontStyle(y){this._fontStyle!==y&&(this._fontStyle=y,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(y){this._fontFeatureSettings!==y&&(this._fontFeatureSettings=y,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(y){this._fontVariationSettings!==y&&(this._fontVariationSettings=y,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(y){this._textDecoration!==y&&(this._textDecoration=y,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(y){const f=k(y);this._lineHeight!==f&&(this._lineHeight=f,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(y){const f=k(y);this._letterSpacing!==f&&(this._letterSpacing=f,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(y){this._className!==y&&(this._className=y,this.domNode.className=this._className)}toggleClassName(y,f){this.domNode.classList.toggle(y,f),this._className=this.domNode.className}setDisplay(y){this._display!==y&&(this._display=y,this.domNode.style.display=this._display)}setPosition(y){this._position!==y&&(this._position=y,this.domNode.style.position=this._position)}setVisibility(y){this._visibility!==y&&(this._visibility=y,this.domNode.style.visibility=this._visibility)}setColor(y){this._color!==y&&(this._color=y,this.domNode.style.color=this._color)}setBackgroundColor(y){this._backgroundColor!==y&&(this._backgroundColor=y,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(y){this._layerHint!==y&&(this._layerHint=y,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(y){this._boxShadow!==y&&(this._boxShadow=y,this.domNode.style.boxShadow=y)}setContain(y){this._contain!==y&&(this._contain=y,this.domNode.style.contain=this._contain)}setAttribute(y,f){this.domNode.setAttribute(y,f)}removeAttribute(y){this.domNode.removeAttribute(y)}appendChild(y){this.domNode.appendChild(y.domNode)}removeChild(y){this.domNode.removeChild(y.domNode)}}e.FastDomNode=c;function k(L){return typeof L=="number"?`${L}px`:L}function E(L){return new c(L)}}),define(oe[436],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IframeUtils=void 0;const c=new WeakMap;function k(L){if(!L.parent||L.parent===L)return null;try{const y=L.location,f=L.parent.location;if(y.origin!=="null"&&f.origin!=="null"&&y.origin!==f.origin)return null}catch{return null}return L.parent}class E{static getSameOriginWindowChain(y){let f=c.get(y);if(!f){f=[],c.set(y,f);let _=y,b;do b=k(_),b?f.push({window:new WeakRef(_),iframeElement:_.frameElement||null}):f.push({window:new WeakRef(_),iframeElement:null}),_=b;while(_)}return f.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(y,f){if(!f||y===f)return{top:0,left:0};let _=0,b=0;const p=this.getSameOriginWindowChain(y);for(const n of p){const s=n.window.deref();if(_+=s?.scrollY??0,b+=s?.scrollX??0,s===f||!n.iframeElement)break;const t=n.iframeElement.getBoundingClientRect();_+=t.top,b+=t.left}return{top:_,left:b}}}e.IframeUtils=E}),define(oe[295],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inputLatency=void 0;var c;(function(k){const E={total:0,min:Number.MAX_VALUE,max:0},L={...E},y={...E},f={...E};let _=0;const b={keydown:0,input:0,render:0};function p(){r(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),b.keydown=1,queueMicrotask(n)}k.onKeyDown=p;function n(){b.keydown===1&&(performance.mark("keydown/end"),b.keydown=2)}function s(){performance.mark("input/start"),b.input=1,a()}k.onBeforeInput=s;function t(){b.input===0&&s(),queueMicrotask(i)}k.onInput=t;function i(){b.input===1&&(performance.mark("input/end"),b.input=2)}function o(){r()}k.onKeyUp=o;function g(){r()}k.onSelectionChange=g;function u(){b.keydown===2&&b.input===2&&b.render===0&&(performance.mark("render/start"),b.render=1,queueMicrotask(l),a())}k.onRenderStart=u;function l(){b.render===1&&(performance.mark("render/end"),b.render=2)}function a(){setTimeout(r)}function r(){b.keydown===2&&b.input===2&&b.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),d("keydown",E),d("input",L),d("render",y),d("inputlatency",f),_++,m())}function d(w,S){const D=performance.getEntriesByName(w)[0].duration;S.total+=D,S.min=Math.min(S.min,D),S.max=Math.max(S.max,D)}function m(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),b.keydown=0,b.input=0,b.render=0}function h(){if(_===0)return;const w={keydown:v(E),input:v(L),render:v(y),total:v(f),sampleCount:_};return C(E),C(L),C(y),C(f),_=0,w}k.getAndClearMeasurements=h;function v(w){return{average:w.total/_,max:w.max,min:w.min}}function C(w){w.total=0,w.min=Number.MAX_VALUE,w.max=0}})(c||(e.inputLatency=c={}))}),define(oe[81],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setBaseLayerHoverDelegate=k,e.getBaseLayerHoverDelegate=E;let c={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function k(L){c=L}function E(){return c}}),define(oe[437],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListError=void 0;class c extends Error{constructor(E,L){super(`ListError [${E}] ${L}`)}}e.ListError=c}),define(oe[438],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CombinedSpliceable=void 0;class c{constructor(E){this.spliceables=E}splice(E,L,y){this.spliceables.forEach(f=>f.splice(E,L,y))}}e.CombinedSpliceable=c}),define(oe[221],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollbarState=void 0;const c=20;class k{constructor(L,y,f,_,b,p){this._scrollbarSize=Math.round(y),this._oppositeScrollbarSize=Math.round(f),this._arrowSize=Math.round(L),this._visibleSize=_,this._scrollSize=b,this._scrollPosition=p,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new k(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(L){const y=Math.round(L);return this._visibleSize!==y?(this._visibleSize=y,this._refreshComputedValues(),!0):!1}setScrollSize(L){const y=Math.round(L);return this._scrollSize!==y?(this._scrollSize=y,this._refreshComputedValues(),!0):!1}setScrollPosition(L){const y=Math.round(L);return this._scrollPosition!==y?(this._scrollPosition=y,this._refreshComputedValues(),!0):!1}setScrollbarSize(L){this._scrollbarSize=Math.round(L)}setOppositeScrollbarSize(L){this._oppositeScrollbarSize=Math.round(L)}static _computeValues(L,y,f,_,b){const p=Math.max(0,f-L),n=Math.max(0,p-2*y),s=_>0&&_>f;if(!s)return{computedAvailableSize:Math.round(p),computedIsNeeded:s,computedSliderSize:Math.round(n),computedSliderRatio:0,computedSliderPosition:0};const t=Math.round(Math.max(c,Math.floor(f*n/_))),i=(n-t)/(_-f),o=b*i;return{computedAvailableSize:Math.round(p),computedIsNeeded:s,computedSliderSize:Math.round(t),computedSliderRatio:i,computedSliderPosition:Math.round(o)}}_refreshComputedValues(){const L=k._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=L.computedAvailableSize,this._computedIsNeeded=L.computedIsNeeded,this._computedSliderSize=L.computedSliderSize,this._computedSliderRatio=L.computedSliderRatio,this._computedSliderPosition=L.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(L){if(!this._computedIsNeeded)return 0;const y=L-this._arrowSize-this._computedSliderSize/2;return Math.round(y/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(L){if(!this._computedIsNeeded)return 0;const y=L-this._arrowSize;let f=this._scrollPosition;return y<this._computedSliderPosition?f-=this._visibleSize:f+=this._visibleSize,f}getDesiredScrollPositionFromDelta(L){if(!this._computedIsNeeded)return 0;const y=this._computedSliderPosition+L;return Math.round(y/this._computedSliderRatio)}}e.ScrollbarState=k}),define(oe[157],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WeakMapper=e.TreeError=e.TreeMouseEventTarget=e.ObjectTreeElementCollapseState=void 0;var c;(function(y){y[y.Expanded=0]="Expanded",y[y.Collapsed=1]="Collapsed",y[y.PreserveOrExpanded=2]="PreserveOrExpanded",y[y.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(c||(e.ObjectTreeElementCollapseState=c={}));var k;(function(y){y[y.Unknown=0]="Unknown",y[y.Twistie=1]="Twistie",y[y.Element=2]="Element",y[y.Filter=3]="Filter"})(k||(e.TreeMouseEventTarget=k={}));class E extends Error{constructor(f,_){super(`TreeError [${f}] ${_}`)}}e.TreeError=E;class L{constructor(f){this.fn=f,this._map=new WeakMap}map(f){let _=this._map.get(f);return _||(_=this.fn(f),this._map.set(f,_)),_}}e.WeakMapper=L}),define(oe[52],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mainWindow=void 0,e.ensureCodeWindow=c;function c(k,E){const L=k;typeof L.vscodeWindowId!="number"&&Object.defineProperty(L,"vscodeWindowId",{get:()=>E})}e.mainWindow=window}),define(oe[64],re([1,0,52]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAndroid=e.isElectron=e.isWebkitWebView=e.isSafari=e.isChrome=e.isWebKit=e.isFirefox=void 0,e.addMatchMediaChangeListener=E,e.getZoomFactor=L,e.isStandalone=_;class k{constructor(){this.mapWindowIdToZoomFactor=new Map}static{this.INSTANCE=new k}getZoomFactor(p){return this.mapWindowIdToZoomFactor.get(this.getWindowId(p))??1}getWindowId(p){return p.vscodeWindowId}}function E(b,p,n){typeof p=="string"&&(p=b.matchMedia(p)),p.addEventListener("change",n)}function L(b){return k.INSTANCE.getZoomFactor(b)}const y=navigator.userAgent;e.isFirefox=y.indexOf("Firefox")>=0,e.isWebKit=y.indexOf("AppleWebKit")>=0,e.isChrome=y.indexOf("Chrome")>=0,e.isSafari=!e.isChrome&&y.indexOf("Safari")>=0,e.isWebkitWebView=!e.isChrome&&!e.isSafari&&e.isWebKit,e.isElectron=y.indexOf("Electron/")>=0,e.isAndroid=y.indexOf("Android")>=0;let f=!1;if(typeof c.mainWindow.matchMedia=="function"){const b=c.mainWindow.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),p=c.mainWindow.matchMedia("(display-mode: fullscreen)");f=b.matches,E(c.mainWindow,b,({matches:n})=>{f&&p.matches||(f=n)})}function _(){return f}}),define(oe[13],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Permutation=e.CallbackIterable=e.ArrayQueue=e.booleanComparator=e.numberComparator=e.CompareResult=void 0,e.tail=c,e.tail2=k,e.equals=E,e.removeFastWithoutKeepingOrder=L,e.binarySearch=y,e.binarySearch2=f,e.quickSelect=_,e.groupBy=b,e.groupAdjacentBy=p,e.forEachAdjacent=n,e.forEachWithNeighbors=s,e.coalesce=t,e.coalesceInPlace=i,e.isFalsyOrEmpty=o,e.isNonEmptyArray=g,e.distinct=u,e.firstOrDefault=l,e.range=a,e.arrayInsert=r,e.pushToStart=d,e.pushToEnd=m,e.pushMany=h,e.asArray=v,e.insertInto=C,e.splice=w,e.compareBy=I,e.tieBreakComparators=T,e.reverseOrder=R;function c(F,W=0){return F[F.length-(1+W)]}function k(F){if(F.length===0)throw new Error("Invalid tail call");return[F.slice(0,F.length-1),F[F.length-1]]}function E(F,W,z=(q,H)=>q===H){if(F===W)return!0;if(!F||!W||F.length!==W.length)return!1;for(let q=0,H=F.length;q<H;q++)if(!z(F[q],W[q]))return!1;return!0}function L(F,W){const z=F.length-1;W<z&&(F[W]=F[z]),F.pop()}function y(F,W,z){return f(F.length,q=>z(F[q],W))}function f(F,W){let z=0,q=F-1;for(;z<=q;){const H=(z+q)/2|0,K=W(H);if(K<0)z=H+1;else if(K>0)q=H-1;else return H}return-(z+1)}function _(F,W,z){if(F=F|0,F>=W.length)throw new TypeError("invalid index");const q=W[Math.floor(W.length*Math.random())],H=[],K=[],U=[];for(const Y of W){const Q=z(Y,q);Q<0?H.push(Y):Q>0?K.push(Y):U.push(Y)}return F<H.length?_(F,H,z):F<H.length+U.length?U[0]:_(F-(H.length+U.length),K,z)}function b(F,W){const z=[];let q;for(const H of F.slice(0).sort(W))!q||W(q[0],H)!==0?(q=[H],z.push(q)):q.push(H);return z}function*p(F,W){let z,q;for(const H of F)q!==void 0&&W(q,H)?z.push(H):(z&&(yield z),z=[H]),q=H;z&&(yield z)}function n(F,W){for(let z=0;z<=F.length;z++)W(z===0?void 0:F[z-1],z===F.length?void 0:F[z])}function s(F,W){for(let z=0;z<F.length;z++)W(z===0?void 0:F[z-1],F[z],z+1===F.length?void 0:F[z+1])}function t(F){return F.filter(W=>!!W)}function i(F){let W=0;for(let z=0;z<F.length;z++)F[z]&&(F[W]=F[z],W+=1);F.length=W}function o(F){return!Array.isArray(F)||F.length===0}function g(F){return Array.isArray(F)&&F.length>0}function u(F,W=z=>z){const z=new Set;return F.filter(q=>{const H=W(q);return z.has(H)?!1:(z.add(H),!0)})}function l(F,W){return F.length>0?F[0]:W}function a(F,W){let z=typeof W=="number"?F:0;typeof W=="number"?z=F:(z=0,W=F);const q=[];if(z<=W)for(let H=z;H<W;H++)q.push(H);else for(let H=z;H>W;H--)q.push(H);return q}function r(F,W,z){const q=F.slice(0,W),H=F.slice(W);return q.concat(z,H)}function d(F,W){const z=F.indexOf(W);z>-1&&(F.splice(z,1),F.unshift(W))}function m(F,W){const z=F.indexOf(W);z>-1&&(F.splice(z,1),F.push(W))}function h(F,W){for(const z of W)F.push(z)}function v(F){return Array.isArray(F)?F:[F]}function C(F,W,z){const q=S(F,W),H=F.length,K=z.length;F.length=H+K;for(let U=H-1;U>=q;U--)F[U+K]=F[U];for(let U=0;U<K;U++)F[U+q]=z[U]}function w(F,W,z,q){const H=S(F,W);let K=F.splice(H,z);return K===void 0&&(K=[]),C(F,H,q),K}function S(F,W){return W<0?Math.max(W+F.length,0):Math.min(W,F.length)}var D;(function(F){function W(K){return K<0}F.isLessThan=W;function z(K){return K<=0}F.isLessThanOrEqual=z;function q(K){return K>0}F.isGreaterThan=q;function H(K){return K===0}F.isNeitherLessOrGreaterThan=H,F.greaterThan=1,F.lessThan=-1,F.neitherLessOrGreaterThan=0})(D||(e.CompareResult=D={}));function I(F,W){return(z,q)=>W(F(z),F(q))}function T(...F){return(W,z)=>{for(const q of F){const H=q(W,z);if(!D.isNeitherLessOrGreaterThan(H))return H}return D.neitherLessOrGreaterThan}}const M=(F,W)=>F-W;e.numberComparator=M;const A=(F,W)=>(0,e.numberComparator)(F?1:0,W?1:0);e.booleanComparator=A;function R(F){return(W,z)=>-F(W,z)}class N{constructor(W){this.items=W,this.firstIdx=0,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(W){let z=this.firstIdx;for(;z<this.items.length&&W(this.items[z]);)z++;const q=z===this.firstIdx?null:this.items.slice(this.firstIdx,z);return this.firstIdx=z,q}takeFromEndWhile(W){let z=this.lastIdx;for(;z>=0&&W(this.items[z]);)z--;const q=z===this.lastIdx?null:this.items.slice(z+1,this.lastIdx+1);return this.lastIdx=z,q}peek(){if(this.length!==0)return this.items[this.firstIdx]}dequeue(){const W=this.items[this.firstIdx];return this.firstIdx++,W}takeCount(W){const z=this.items.slice(this.firstIdx,this.firstIdx+W);return this.firstIdx+=W,z}}e.ArrayQueue=N;class O{static{this.empty=new O(W=>{})}constructor(W){this.iterate=W}toArray(){const W=[];return this.iterate(z=>(W.push(z),!0)),W}filter(W){return new O(z=>this.iterate(q=>W(q)?z(q):!0))}map(W){return new O(z=>this.iterate(q=>z(W(q))))}findLast(W){let z;return this.iterate(q=>(W(q)&&(z=q),!0)),z}findLastMaxBy(W){let z,q=!0;return this.iterate(H=>((q||D.isGreaterThan(W(H,z)))&&(q=!1,z=H),!0)),z}}e.CallbackIterable=O;class x{constructor(W){this._indexMap=W}static createSortPermutation(W,z){const q=Array.from(W.keys()).sort((H,K)=>z(W[H],W[K]));return new x(q)}apply(W){return W.map((z,q)=>W[this._indexMap[q]])}inverse(){const W=this._indexMap.slice();for(let z=0;z<this._indexMap.length;z++)W[this._indexMap[z]]=z;return new x(W)}}e.Permutation=x}),define(oe[67],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MonotonousArray=void 0,e.findLast=c,e.findLastIdx=k,e.findLastMonotonous=E,e.findLastIdxMonotonous=L,e.findFirstMonotonous=y,e.findFirstIdxMonotonousOrArrLen=f,e.findFirstMax=b,e.findLastMax=p,e.findFirstMin=n,e.findMaxIdx=s,e.mapFindFirst=t;function c(i,o){const g=k(i,o);if(g!==-1)return i[g]}function k(i,o,g=i.length-1){for(let u=g;u>=0;u--){const l=i[u];if(o(l))return u}return-1}function E(i,o){const g=L(i,o);return g===-1?void 0:i[g]}function L(i,o,g=0,u=i.length){let l=g,a=u;for(;l<a;){const r=Math.floor((l+a)/2);o(i[r])?l=r+1:a=r}return l-1}function y(i,o){const g=f(i,o);return g===i.length?void 0:i[g]}function f(i,o,g=0,u=i.length){let l=g,a=u;for(;l<a;){const r=Math.floor((l+a)/2);o(i[r])?a=r:l=r+1}return l}class _{static{this.assertInvariants=!1}constructor(o){this._array=o,this._findLastMonotonousLastIdx=0}findLastMonotonous(o){if(_.assertInvariants){if(this._prevFindLastPredicate){for(const u of this._array)if(this._prevFindLastPredicate(u)&&!o(u))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=o}const g=L(this._array,o,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=g+1,g===-1?void 0:this._array[g]}}e.MonotonousArray=_;function b(i,o){if(i.length===0)return;let g=i[0];for(let u=1;u<i.length;u++){const l=i[u];o(l,g)>0&&(g=l)}return g}function p(i,o){if(i.length===0)return;let g=i[0];for(let u=1;u<i.length;u++){const l=i[u];o(l,g)>=0&&(g=l)}return g}function n(i,o){return b(i,(g,u)=>-o(g,u))}function s(i,o){if(i.length===0)return-1;let g=0;for(let u=1;u<i.length;u++){const l=i[u];o(l,i[g])>0&&(g=u)}return g}function t(i,o){for(const g of i){const u=o(g);if(u!==void 0)return u}}}),define(oe[296],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CachedFunction=e.LRUCachedFunction=void 0,e.identity=c;function c(L){return L}class k{constructor(y,f){this.lastCache=void 0,this.lastArgKey=void 0,typeof y=="function"?(this._fn=y,this._computeKey=c):(this._fn=f,this._computeKey=y.getCacheKey)}get(y){const f=this._computeKey(y);return this.lastArgKey!==f&&(this.lastArgKey=f,this.lastCache=this._fn(y)),this.lastCache}}e.LRUCachedFunction=k;class E{get cachedValues(){return this._map}constructor(y,f){this._map=new Map,this._map2=new Map,typeof y=="function"?(this._fn=y,this._computeKey=c):(this._fn=f,this._computeKey=y.getCacheKey)}get(y){const f=this._computeKey(y);if(this._map2.has(f))return this._map2.get(f);const _=this._fn(y);return this._map.set(y,_),this._map2.set(f,_),_}}e.CachedFunction=E}),define(oe[297],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diffSets=c,e.intersection=k;function c(E,L){const y=[],f=[];for(const _ of E)L.has(_)||y.push(_);for(const _ of L)E.has(_)||f.push(_);return{removed:y,added:f}}function k(E,L){const y=new Set;for(const f of L)E.has(f)&&y.add(f);return y}}),define(oe[33],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=e.HSVA=e.HSLA=e.RGBA=void 0;function c(f,_){const b=Math.pow(10,_);return Math.round(f*b)/b}class k{constructor(_,b,p,n=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,_))|0,this.g=Math.min(255,Math.max(0,b))|0,this.b=Math.min(255,Math.max(0,p))|0,this.a=c(Math.max(Math.min(1,n),0),3)}static equals(_,b){return _.r===b.r&&_.g===b.g&&_.b===b.b&&_.a===b.a}}e.RGBA=k;class E{constructor(_,b,p,n){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,_),0)|0,this.s=c(Math.max(Math.min(1,b),0),3),this.l=c(Math.max(Math.min(1,p),0),3),this.a=c(Math.max(Math.min(1,n),0),3)}static equals(_,b){return _.h===b.h&&_.s===b.s&&_.l===b.l&&_.a===b.a}static fromRGBA(_){const b=_.r/255,p=_.g/255,n=_.b/255,s=_.a,t=Math.max(b,p,n),i=Math.min(b,p,n);let o=0,g=0;const u=(i+t)/2,l=t-i;if(l>0){switch(g=Math.min(u<=.5?l/(2*u):l/(2-2*u),1),t){case b:o=(p-n)/l+(p<n?6:0);break;case p:o=(n-b)/l+2;break;case n:o=(b-p)/l+4;break}o*=60,o=Math.round(o)}return new E(o,g,u,s)}static _hue2rgb(_,b,p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?_+(b-_)*6*p:p<1/2?b:p<2/3?_+(b-_)*(2/3-p)*6:_}static toRGBA(_){const b=_.h/360,{s:p,l:n,a:s}=_;let t,i,o;if(p===0)t=i=o=n;else{const g=n<.5?n*(1+p):n+p-n*p,u=2*n-g;t=E._hue2rgb(u,g,b+1/3),i=E._hue2rgb(u,g,b),o=E._hue2rgb(u,g,b-1/3)}return new k(Math.round(t*255),Math.round(i*255),Math.round(o*255),s)}}e.HSLA=E;class L{constructor(_,b,p,n){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,_),0)|0,this.s=c(Math.max(Math.min(1,b),0),3),this.v=c(Math.max(Math.min(1,p),0),3),this.a=c(Math.max(Math.min(1,n),0),3)}static equals(_,b){return _.h===b.h&&_.s===b.s&&_.v===b.v&&_.a===b.a}static fromRGBA(_){const b=_.r/255,p=_.g/255,n=_.b/255,s=Math.max(b,p,n),t=Math.min(b,p,n),i=s-t,o=s===0?0:i/s;let g;return i===0?g=0:s===b?g=((p-n)/i%6+6)%6:s===p?g=(n-b)/i+2:g=(b-p)/i+4,new L(Math.round(g*60),o,s,_.a)}static toRGBA(_){const{h:b,s:p,v:n,a:s}=_,t=n*p,i=t*(1-Math.abs(b/60%2-1)),o=n-t;let[g,u,l]=[0,0,0];return b<60?(g=t,u=i):b<120?(g=i,u=t):b<180?(u=t,l=i):b<240?(u=i,l=t):b<300?(g=i,l=t):b<=360&&(g=t,l=i),g=Math.round((g+o)*255),u=Math.round((u+o)*255),l=Math.round((l+o)*255),new k(g,u,l,s)}}e.HSVA=L;class y{static fromHex(_){return y.Format.CSS.parseHex(_)||y.red}static equals(_,b){return!_&&!b?!0:!_||!b?!1:_.equals(b)}get hsla(){return this._hsla?this._hsla:E.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:L.fromRGBA(this.rgba)}constructor(_){if(_)if(_ instanceof k)this.rgba=_;else if(_ instanceof E)this._hsla=_,this.rgba=E.toRGBA(_);else if(_ instanceof L)this._hsva=_,this.rgba=L.toRGBA(_);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(_){return!!_&&k.equals(this.rgba,_.rgba)&&E.equals(this.hsla,_.hsla)&&L.equals(this.hsva,_.hsva)}getRelativeLuminance(){const _=y._relativeLuminanceForComponent(this.rgba.r),b=y._relativeLuminanceForComponent(this.rgba.g),p=y._relativeLuminanceForComponent(this.rgba.b),n=.2126*_+.7152*b+.0722*p;return c(n,4)}static _relativeLuminanceForComponent(_){const b=_/255;return b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4)}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(_){const b=this.getRelativeLuminance(),p=_.getRelativeLuminance();return b>p}isDarkerThan(_){const b=this.getRelativeLuminance(),p=_.getRelativeLuminance();return b<p}lighten(_){return new y(new E(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*_,this.hsla.a))}darken(_){return new y(new E(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*_,this.hsla.a))}transparent(_){const{r:b,g:p,b:n,a:s}=this.rgba;return new y(new k(b,p,n,s*_))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new y(new k(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}makeOpaque(_){if(this.isOpaque()||_.rgba.a!==1)return this;const{r:b,g:p,b:n,a:s}=this.rgba;return new y(new k(_.rgba.r-s*(_.rgba.r-b),_.rgba.g-s*(_.rgba.g-p),_.rgba.b-s*(_.rgba.b-n),1))}toString(){return this._toString||(this._toString=y.Format.CSS.format(this)),this._toString}static getLighterColor(_,b,p){if(_.isLighterThan(b))return _;p=p||.5;const n=_.getRelativeLuminance(),s=b.getRelativeLuminance();return p=p*(s-n)/s,_.lighten(p)}static getDarkerColor(_,b,p){if(_.isDarkerThan(b))return _;p=p||.5;const n=_.getRelativeLuminance(),s=b.getRelativeLuminance();return p=p*(n-s)/n,_.darken(p)}static{this.white=new y(new k(255,255,255,1))}static{this.black=new y(new k(0,0,0,1))}static{this.red=new y(new k(255,0,0,1))}static{this.blue=new y(new k(0,0,255,1))}static{this.green=new y(new k(0,255,0,1))}static{this.cyan=new y(new k(0,255,255,1))}static{this.lightgrey=new y(new k(211,211,211,1))}static{this.transparent=new y(new k(0,0,0,0))}}e.Color=y,function(f){let _;(function(b){let p;(function(n){function s(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:f.Format.CSS.formatRGBA(m)}n.formatRGB=s;function t(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}n.formatRGBA=t;function i(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:f.Format.CSS.formatHSLA(m)}n.formatHSL=i;function o(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}n.formatHSLA=o;function g(m){const h=m.toString(16);return h.length!==2?"0"+h:h}function u(m){return`#${g(m.rgba.r)}${g(m.rgba.g)}${g(m.rgba.b)}`}n.formatHex=u;function l(m,h=!1){return h&&m.rgba.a===1?f.Format.CSS.formatHex(m):`#${g(m.rgba.r)}${g(m.rgba.g)}${g(m.rgba.b)}${g(Math.round(m.rgba.a*255))}`}n.formatHexA=l;function a(m){return m.isOpaque()?f.Format.CSS.formatHex(m):f.Format.CSS.formatRGBA(m)}n.format=a;function r(m){const h=m.length;if(h===0||m.charCodeAt(0)!==35)return null;if(h===7){const v=16*d(m.charCodeAt(1))+d(m.charCodeAt(2)),C=16*d(m.charCodeAt(3))+d(m.charCodeAt(4)),w=16*d(m.charCodeAt(5))+d(m.charCodeAt(6));return new f(new k(v,C,w,1))}if(h===9){const v=16*d(m.charCodeAt(1))+d(m.charCodeAt(2)),C=16*d(m.charCodeAt(3))+d(m.charCodeAt(4)),w=16*d(m.charCodeAt(5))+d(m.charCodeAt(6)),S=16*d(m.charCodeAt(7))+d(m.charCodeAt(8));return new f(new k(v,C,w,S/255))}if(h===4){const v=d(m.charCodeAt(1)),C=d(m.charCodeAt(2)),w=d(m.charCodeAt(3));return new f(new k(16*v+v,16*C+C,16*w+w))}if(h===5){const v=d(m.charCodeAt(1)),C=d(m.charCodeAt(2)),w=d(m.charCodeAt(3)),S=d(m.charCodeAt(4));return new f(new k(16*v+v,16*C+C,16*w+w,(16*S+S)/255))}return null}n.parseHex=r;function d(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(p=b.CSS||(b.CSS={}))})(_=f.Format||(f.Format={}))}(y||(e.Color=y={}))}),define(oe[126],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.memoize=c;function c(k,E,L){let y=null,f=null;if(typeof L.value=="function"?(y="value",f=L.value,f.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof L.get=="function"&&(y="get",f=L.get),!f)throw new Error("not supported");const _=`$memoize$${E}`;L[y]=function(...b){return this.hasOwnProperty(_)||Object.defineProperty(this,_,{configurable:!1,enumerable:!1,writable:!1,value:f.apply(this,b)}),this[_]}}}),define(oe[439],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffChange=void 0;class c{constructor(E,L,y,f){this.originalStart=E,this.originalLength=L,this.modifiedStart=y,this.modifiedLength=f}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}e.DiffChange=c}),define(oe[101],re([1,0,13]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.strictEquals=void 0,e.itemsEquals=E,e.itemEquals=L,e.equalsIfDefined=y,e.structuralEquals=f;const k=(b,p)=>b===p;e.strictEquals=k;function E(b=e.strictEquals){return(p,n)=>c.equals(p,n,b)}function L(){return(b,p)=>b.equals(p)}function y(b,p,n){if(n!==void 0){const s=b;return s==null||p===void 0||p===null?p===s:n(s,p)}else{const s=b;return(t,i)=>t==null||i===void 0||i===null?i===t:s(t,i)}}function f(b,p){if(b===p)return!0;if(Array.isArray(b)&&Array.isArray(p)){if(b.length!==p.length)return!1;for(let n=0;n<b.length;n++)if(!f(b[n],p[n]))return!1;return!0}if(b&&typeof b=="object"&&p&&typeof p=="object"&&Object.getPrototypeOf(b)===Object.prototype&&Object.getPrototypeOf(p)===Object.prototype){const n=b,s=p,t=Object.keys(n),i=Object.keys(s),o=new Set(i);if(t.length!==i.length)return!1;for(const g of t)if(!o.has(g)||!f(n[g],s[g]))return!1;return!0}return!1}const _=new WeakMap}),define(oe[8],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BugIndicatingError=e.ErrorNoTelemetry=e.NotSupportedError=e.CancellationError=e.errorHandler=e.ErrorHandler=void 0,e.onUnexpectedError=k,e.onUnexpectedExternalError=E,e.transformErrorForSerialization=L,e.isCancellationError=f,e.canceled=b,e.illegalArgument=p,e.illegalState=n;class c{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(g){setTimeout(()=>{throw g.stack?t.isErrorNoTelemetry(g)?new t(g.message+`

`+g.stack):new Error(g.message+`

`+g.stack):g},0)}}emit(g){this.listeners.forEach(u=>{u(g)})}onUnexpectedError(g){this.unexpectedErrorHandler(g),this.emit(g)}onUnexpectedExternalError(g){this.unexpectedErrorHandler(g)}}e.ErrorHandler=c,e.errorHandler=new c;function k(o){f(o)||e.errorHandler.onUnexpectedError(o)}function E(o){f(o)||e.errorHandler.onUnexpectedExternalError(o)}function L(o){if(o instanceof Error){const{name:g,message:u}=o,l=o.stacktrace||o.stack;return{$isError:!0,name:g,message:u,stack:l,noTelemetry:t.isErrorNoTelemetry(o)}}return o}const y="Canceled";function f(o){return o instanceof _?!0:o instanceof Error&&o.name===y&&o.message===y}class _ extends Error{constructor(){super(y),this.name=this.message}}e.CancellationError=_;function b(){const o=new Error(y);return o.name=o.message,o}function p(o){return o?new Error(`Illegal argument: ${o}`):new Error("Illegal argument")}function n(o){return o?new Error(`Illegal state: ${o}`):new Error("Illegal state")}class s extends Error{constructor(g){super("NotSupported"),g&&(this.message=g)}}e.NotSupportedError=s;class t extends Error{constructor(g){super(g),this.name="CodeExpectedError"}static fromError(g){if(g instanceof t)return g;const u=new t;return u.message=g.message,u.stack=g.stack,u}static isErrorNoTelemetry(g){return g.name==="CodeExpectedError"}}e.ErrorNoTelemetry=t;class i extends Error{constructor(g){super(g||"An unexpected bug occurred."),Object.setPrototypeOf(this,i.prototype)}}e.BugIndicatingError=i}),define(oe[102],re([1,0,8]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createTrustedTypesPolicy=k;function k(E,L){const y=globalThis.MonacoEnvironment;if(y?.createTrustedTypesPolicy)try{return y.createTrustedTypesPolicy(E,L)}catch(f){(0,c.onUnexpectedError)(f);return}try{return globalThis.trustedTypes?.createPolicy(E,L)}catch(f){(0,c.onUnexpectedError)(f);return}}}),define(oe[89],re([1,0,8]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ok=k,e.assertNever=E,e.softAssert=L,e.assertFn=y,e.checkAdjacentItems=f;function k(_,b){if(!_)throw new Error(b?`Assertion failed (${b})`:"Assertion Failed")}function E(_,b="Unreachable"){throw new Error(b)}function L(_){_||(0,c.onUnexpectedError)(new c.BugIndicatingError("Soft Assertion Failed"))}function y(_){if(!_()){debugger;_(),(0,c.onUnexpectedError)(new c.BugIndicatingError("Assertion Failed"))}}function f(_,b){let p=0;for(;p<_.length-1;){const n=_[p],s=_[p+1];if(!b(n,s))return!1;p++}return!0}}),define(oe[127],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createSingleCallFunction=c;function c(k,E){const L=this;let y=!1,f;return function(){if(y)return f;if(y=!0,E)try{f=k.apply(L,arguments)}finally{E()}else f=k.apply(L,arguments);return f}}}),define(oe[90],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HierarchicalKind=void 0;class c{static{this.sep="."}static{this.None=new c("@@none@@")}static{this.Empty=new c("")}constructor(E){this.value=E}equals(E){return this.value===E.value}contains(E){return this.equals(E)||this.value===""||E.value.startsWith(this.value+c.sep)}intersects(E){return this.contains(E)||E.contains(this)}append(...E){return new c((this.value?[this.value,...E]:E).join(c.sep))}}e.HierarchicalKind=c}),define(oe[187],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultGenerator=e.IdGenerator=void 0;class c{constructor(E){this._prefix=E,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}e.IdGenerator=c,e.defaultGenerator=new c("id#")}),define(oe[53],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Iterable=void 0;var c;(function(k){function E(h){return h&&typeof h=="object"&&typeof h[Symbol.iterator]=="function"}k.is=E;const L=Object.freeze([]);function y(){return L}k.empty=y;function*f(h){yield h}k.single=f;function _(h){return E(h)?h:f(h)}k.wrap=_;function b(h){return h||L}k.from=b;function*p(h){for(let v=h.length-1;v>=0;v--)yield h[v]}k.reverse=p;function n(h){return!h||h[Symbol.iterator]().next().done===!0}k.isEmpty=n;function s(h){return h[Symbol.iterator]().next().value}k.first=s;function t(h,v){let C=0;for(const w of h)if(v(w,C++))return!0;return!1}k.some=t;function i(h,v){for(const C of h)if(v(C))return C}k.find=i;function*o(h,v){for(const C of h)v(C)&&(yield C)}k.filter=o;function*g(h,v){let C=0;for(const w of h)yield v(w,C++)}k.map=g;function*u(h,v){let C=0;for(const w of h)yield*v(w,C++)}k.flatMap=u;function*l(...h){for(const v of h)yield*v}k.concat=l;function a(h,v,C){let w=C;for(const S of h)w=v(w,S);return w}k.reduce=a;function*r(h,v,C=h.length){for(v<0&&(v+=h.length),C<0?C+=h.length:C>h.length&&(C=h.length);v<C;v++)yield h[v]}k.slice=r;function d(h,v=Number.POSITIVE_INFINITY){const C=[];if(v===0)return[C,h];const w=h[Symbol.iterator]();for(let S=0;S<v;S++){const D=w.next();if(D.done)return[C,k.empty()];C.push(D.value)}return[C,{[Symbol.iterator](){return w}}]}k.consume=d;async function m(h){const v=[];for await(const C of h)v.push(C);return Promise.resolve(v)}k.asyncToArray=m})(c||(e.Iterable=c={}))}),define(oe[72],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyCodeUtils=e.IMMUTABLE_KEY_CODE_TO_CODE=e.IMMUTABLE_CODE_TO_KEY_CODE=e.NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE=e.EVENT_KEY_CODE_MAP=void 0,e.KeyChord=p;class c{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(s,t){this._keyCodeToStr[s]=t,this._strToKeyCode[t.toLowerCase()]=s}keyCodeToStr(s){return this._keyCodeToStr[s]}strToKeyCode(s){return this._strToKeyCode[s.toLowerCase()]||0}}const k=new c,E=new c,L=new c;e.EVENT_KEY_CODE_MAP=new Array(230),e.NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE={};const y=[],f=Object.create(null),_=Object.create(null);e.IMMUTABLE_CODE_TO_KEY_CODE=[],e.IMMUTABLE_KEY_CODE_TO_CODE=[];for(let n=0;n<=193;n++)e.IMMUTABLE_CODE_TO_KEY_CODE[n]=-1;for(let n=0;n<=132;n++)e.IMMUTABLE_KEY_CODE_TO_CODE[n]=-1;(function(){const n="",s=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",n,n],[1,1,"Hyper",0,n,0,n,n,n],[1,2,"Super",0,n,0,n,n,n],[1,3,"Fn",0,n,0,n,n,n],[1,4,"FnLock",0,n,0,n,n,n],[1,5,"Suspend",0,n,0,n,n,n],[1,6,"Resume",0,n,0,n,n,n],[1,7,"Turbo",0,n,0,n,n,n],[1,8,"Sleep",0,n,0,"VK_SLEEP",n,n],[1,9,"WakeUp",0,n,0,n,n,n],[0,10,"KeyA",31,"A",65,"VK_A",n,n],[0,11,"KeyB",32,"B",66,"VK_B",n,n],[0,12,"KeyC",33,"C",67,"VK_C",n,n],[0,13,"KeyD",34,"D",68,"VK_D",n,n],[0,14,"KeyE",35,"E",69,"VK_E",n,n],[0,15,"KeyF",36,"F",70,"VK_F",n,n],[0,16,"KeyG",37,"G",71,"VK_G",n,n],[0,17,"KeyH",38,"H",72,"VK_H",n,n],[0,18,"KeyI",39,"I",73,"VK_I",n,n],[0,19,"KeyJ",40,"J",74,"VK_J",n,n],[0,20,"KeyK",41,"K",75,"VK_K",n,n],[0,21,"KeyL",42,"L",76,"VK_L",n,n],[0,22,"KeyM",43,"M",77,"VK_M",n,n],[0,23,"KeyN",44,"N",78,"VK_N",n,n],[0,24,"KeyO",45,"O",79,"VK_O",n,n],[0,25,"KeyP",46,"P",80,"VK_P",n,n],[0,26,"KeyQ",47,"Q",81,"VK_Q",n,n],[0,27,"KeyR",48,"R",82,"VK_R",n,n],[0,28,"KeyS",49,"S",83,"VK_S",n,n],[0,29,"KeyT",50,"T",84,"VK_T",n,n],[0,30,"KeyU",51,"U",85,"VK_U",n,n],[0,31,"KeyV",52,"V",86,"VK_V",n,n],[0,32,"KeyW",53,"W",87,"VK_W",n,n],[0,33,"KeyX",54,"X",88,"VK_X",n,n],[0,34,"KeyY",55,"Y",89,"VK_Y",n,n],[0,35,"KeyZ",56,"Z",90,"VK_Z",n,n],[0,36,"Digit1",22,"1",49,"VK_1",n,n],[0,37,"Digit2",23,"2",50,"VK_2",n,n],[0,38,"Digit3",24,"3",51,"VK_3",n,n],[0,39,"Digit4",25,"4",52,"VK_4",n,n],[0,40,"Digit5",26,"5",53,"VK_5",n,n],[0,41,"Digit6",27,"6",54,"VK_6",n,n],[0,42,"Digit7",28,"7",55,"VK_7",n,n],[0,43,"Digit8",29,"8",56,"VK_8",n,n],[0,44,"Digit9",30,"9",57,"VK_9",n,n],[0,45,"Digit0",21,"0",48,"VK_0",n,n],[1,46,"Enter",3,"Enter",13,"VK_RETURN",n,n],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",n,n],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",n,n],[1,49,"Tab",2,"Tab",9,"VK_TAB",n,n],[1,50,"Space",10,"Space",32,"VK_SPACE",n,n],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,n,0,n,n,n],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",n,n],[1,64,"F1",59,"F1",112,"VK_F1",n,n],[1,65,"F2",60,"F2",113,"VK_F2",n,n],[1,66,"F3",61,"F3",114,"VK_F3",n,n],[1,67,"F4",62,"F4",115,"VK_F4",n,n],[1,68,"F5",63,"F5",116,"VK_F5",n,n],[1,69,"F6",64,"F6",117,"VK_F6",n,n],[1,70,"F7",65,"F7",118,"VK_F7",n,n],[1,71,"F8",66,"F8",119,"VK_F8",n,n],[1,72,"F9",67,"F9",120,"VK_F9",n,n],[1,73,"F10",68,"F10",121,"VK_F10",n,n],[1,74,"F11",69,"F11",122,"VK_F11",n,n],[1,75,"F12",70,"F12",123,"VK_F12",n,n],[1,76,"PrintScreen",0,n,0,n,n,n],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",n,n],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",n,n],[1,79,"Insert",19,"Insert",45,"VK_INSERT",n,n],[1,80,"Home",14,"Home",36,"VK_HOME",n,n],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",n,n],[1,82,"Delete",20,"Delete",46,"VK_DELETE",n,n],[1,83,"End",13,"End",35,"VK_END",n,n],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",n,n],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",n],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",n],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",n],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",n],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",n,n],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",n,n],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",n,n],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",n,n],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",n,n],[1,94,"NumpadEnter",3,n,0,n,n,n],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",n,n],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",n,n],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",n,n],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",n,n],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",n,n],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",n,n],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",n,n],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",n,n],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",n,n],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",n,n],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",n,n],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",n,n],[1,107,"ContextMenu",58,"ContextMenu",93,n,n,n],[1,108,"Power",0,n,0,n,n,n],[1,109,"NumpadEqual",0,n,0,n,n,n],[1,110,"F13",71,"F13",124,"VK_F13",n,n],[1,111,"F14",72,"F14",125,"VK_F14",n,n],[1,112,"F15",73,"F15",126,"VK_F15",n,n],[1,113,"F16",74,"F16",127,"VK_F16",n,n],[1,114,"F17",75,"F17",128,"VK_F17",n,n],[1,115,"F18",76,"F18",129,"VK_F18",n,n],[1,116,"F19",77,"F19",130,"VK_F19",n,n],[1,117,"F20",78,"F20",131,"VK_F20",n,n],[1,118,"F21",79,"F21",132,"VK_F21",n,n],[1,119,"F22",80,"F22",133,"VK_F22",n,n],[1,120,"F23",81,"F23",134,"VK_F23",n,n],[1,121,"F24",82,"F24",135,"VK_F24",n,n],[1,122,"Open",0,n,0,n,n,n],[1,123,"Help",0,n,0,n,n,n],[1,124,"Select",0,n,0,n,n,n],[1,125,"Again",0,n,0,n,n,n],[1,126,"Undo",0,n,0,n,n,n],[1,127,"Cut",0,n,0,n,n,n],[1,128,"Copy",0,n,0,n,n,n],[1,129,"Paste",0,n,0,n,n,n],[1,130,"Find",0,n,0,n,n,n],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",n,n],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",n,n],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",n,n],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",n,n],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",n,n],[1,136,"KanaMode",0,n,0,n,n,n],[0,137,"IntlYen",0,n,0,n,n,n],[1,138,"Convert",0,n,0,n,n,n],[1,139,"NonConvert",0,n,0,n,n,n],[1,140,"Lang1",0,n,0,n,n,n],[1,141,"Lang2",0,n,0,n,n,n],[1,142,"Lang3",0,n,0,n,n,n],[1,143,"Lang4",0,n,0,n,n,n],[1,144,"Lang5",0,n,0,n,n,n],[1,145,"Abort",0,n,0,n,n,n],[1,146,"Props",0,n,0,n,n,n],[1,147,"NumpadParenLeft",0,n,0,n,n,n],[1,148,"NumpadParenRight",0,n,0,n,n,n],[1,149,"NumpadBackspace",0,n,0,n,n,n],[1,150,"NumpadMemoryStore",0,n,0,n,n,n],[1,151,"NumpadMemoryRecall",0,n,0,n,n,n],[1,152,"NumpadMemoryClear",0,n,0,n,n,n],[1,153,"NumpadMemoryAdd",0,n,0,n,n,n],[1,154,"NumpadMemorySubtract",0,n,0,n,n,n],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",n,n],[1,156,"NumpadClearEntry",0,n,0,n,n,n],[1,0,n,5,"Ctrl",17,"VK_CONTROL",n,n],[1,0,n,4,"Shift",16,"VK_SHIFT",n,n],[1,0,n,6,"Alt",18,"VK_MENU",n,n],[1,0,n,57,"Meta",91,"VK_COMMAND",n,n],[1,157,"ControlLeft",5,n,0,"VK_LCONTROL",n,n],[1,158,"ShiftLeft",4,n,0,"VK_LSHIFT",n,n],[1,159,"AltLeft",6,n,0,"VK_LMENU",n,n],[1,160,"MetaLeft",57,n,0,"VK_LWIN",n,n],[1,161,"ControlRight",5,n,0,"VK_RCONTROL",n,n],[1,162,"ShiftRight",4,n,0,"VK_RSHIFT",n,n],[1,163,"AltRight",6,n,0,"VK_RMENU",n,n],[1,164,"MetaRight",57,n,0,"VK_RWIN",n,n],[1,165,"BrightnessUp",0,n,0,n,n,n],[1,166,"BrightnessDown",0,n,0,n,n,n],[1,167,"MediaPlay",0,n,0,n,n,n],[1,168,"MediaRecord",0,n,0,n,n,n],[1,169,"MediaFastForward",0,n,0,n,n,n],[1,170,"MediaRewind",0,n,0,n,n,n],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",n,n],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",n,n],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",n,n],[1,174,"Eject",0,n,0,n,n,n],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",n,n],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",n,n],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",n,n],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",n,n],[1,179,"LaunchApp1",0,n,0,"VK_MEDIA_LAUNCH_APP1",n,n],[1,180,"SelectTask",0,n,0,n,n,n],[1,181,"LaunchScreenSaver",0,n,0,n,n,n],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",n,n],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",n,n],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",n,n],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",n,n],[1,186,"BrowserStop",0,n,0,"VK_BROWSER_STOP",n,n],[1,187,"BrowserRefresh",0,n,0,"VK_BROWSER_REFRESH",n,n],[1,188,"BrowserFavorites",0,n,0,"VK_BROWSER_FAVORITES",n,n],[1,189,"ZoomToggle",0,n,0,n,n,n],[1,190,"MailReply",0,n,0,n,n,n],[1,191,"MailForward",0,n,0,n,n,n],[1,192,"MailSend",0,n,0,n,n,n],[1,0,n,114,"KeyInComposition",229,n,n,n],[1,0,n,116,"ABNT_C2",194,"VK_ABNT_C2",n,n],[1,0,n,96,"OEM_8",223,"VK_OEM_8",n,n],[1,0,n,0,n,0,"VK_KANA",n,n],[1,0,n,0,n,0,"VK_HANGUL",n,n],[1,0,n,0,n,0,"VK_JUNJA",n,n],[1,0,n,0,n,0,"VK_FINAL",n,n],[1,0,n,0,n,0,"VK_HANJA",n,n],[1,0,n,0,n,0,"VK_KANJI",n,n],[1,0,n,0,n,0,"VK_CONVERT",n,n],[1,0,n,0,n,0,"VK_NONCONVERT",n,n],[1,0,n,0,n,0,"VK_ACCEPT",n,n],[1,0,n,0,n,0,"VK_MODECHANGE",n,n],[1,0,n,0,n,0,"VK_SELECT",n,n],[1,0,n,0,n,0,"VK_PRINT",n,n],[1,0,n,0,n,0,"VK_EXECUTE",n,n],[1,0,n,0,n,0,"VK_SNAPSHOT",n,n],[1,0,n,0,n,0,"VK_HELP",n,n],[1,0,n,0,n,0,"VK_APPS",n,n],[1,0,n,0,n,0,"VK_PROCESSKEY",n,n],[1,0,n,0,n,0,"VK_PACKET",n,n],[1,0,n,0,n,0,"VK_DBE_SBCSCHAR",n,n],[1,0,n,0,n,0,"VK_DBE_DBCSCHAR",n,n],[1,0,n,0,n,0,"VK_ATTN",n,n],[1,0,n,0,n,0,"VK_CRSEL",n,n],[1,0,n,0,n,0,"VK_EXSEL",n,n],[1,0,n,0,n,0,"VK_EREOF",n,n],[1,0,n,0,n,0,"VK_PLAY",n,n],[1,0,n,0,n,0,"VK_ZOOM",n,n],[1,0,n,0,n,0,"VK_NONAME",n,n],[1,0,n,0,n,0,"VK_PA1",n,n],[1,0,n,0,n,0,"VK_OEM_CLEAR",n,n]],t=[],i=[];for(const o of s){const[g,u,l,a,r,d,m,h,v]=o;if(i[u]||(i[u]=!0,y[u]=l,f[l]=u,_[l.toLowerCase()]=u,g&&(e.IMMUTABLE_CODE_TO_KEY_CODE[u]=a,a!==0&&a!==3&&a!==5&&a!==4&&a!==6&&a!==57&&(e.IMMUTABLE_KEY_CODE_TO_CODE[a]=u))),!t[a]){if(t[a]=!0,!r)throw new Error(`String representation missing for key code ${a} around scan code ${l}`);k.define(a,r),E.define(a,h||r),L.define(a,v||h||r)}d&&(e.EVENT_KEY_CODE_MAP[d]=a),m&&(e.NATIVE_WINDOWS_KEY_CODE_TO_KEY_CODE[m]=a)}e.IMMUTABLE_KEY_CODE_TO_CODE[3]=46})();var b;(function(n){function s(l){return k.keyCodeToStr(l)}n.toString=s;function t(l){return k.strToKeyCode(l)}n.fromString=t;function i(l){return E.keyCodeToStr(l)}n.toUserSettingsUS=i;function o(l){return L.keyCodeToStr(l)}n.toUserSettingsGeneral=o;function g(l){return E.strToKeyCode(l)||L.strToKeyCode(l)}n.fromUserSettings=g;function u(l){if(l>=98&&l<=113)return null;switch(l){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return k.keyCodeToStr(l)}n.toElectronAccelerator=u})(b||(e.KeyCodeUtils=b={}));function p(n,s){const t=(s&65535)<<16>>>0;return(n|t)>>>0}}),define(oe[139],re([1,0,8]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResolvedKeybinding=e.ResolvedChord=e.Keybinding=e.ScanCodeChord=e.KeyCodeChord=void 0,e.decodeKeybinding=k,e.createSimpleKeybinding=E;function k(p,n){if(typeof p=="number"){if(p===0)return null;const s=(p&65535)>>>0,t=(p&4294901760)>>>16;return t!==0?new f([E(s,n),E(t,n)]):new f([E(s,n)])}else{const s=[];for(let t=0;t<p.length;t++)s.push(E(p[t],n));return new f(s)}}function E(p,n){const s=!!(p&2048),t=!!(p&256),i=n===2?t:s,o=!!(p&1024),g=!!(p&512),u=n===2?s:t,l=p&255;return new L(i,o,g,u,l)}class L{constructor(n,s,t,i,o){this.ctrlKey=n,this.shiftKey=s,this.altKey=t,this.metaKey=i,this.keyCode=o}equals(n){return n instanceof L&&this.ctrlKey===n.ctrlKey&&this.shiftKey===n.shiftKey&&this.altKey===n.altKey&&this.metaKey===n.metaKey&&this.keyCode===n.keyCode}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}}e.KeyCodeChord=L;class y{constructor(n,s,t,i,o){this.ctrlKey=n,this.shiftKey=s,this.altKey=t,this.metaKey=i,this.scanCode=o}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===157||this.scanCode===161)||this.shiftKey&&(this.scanCode===158||this.scanCode===162)||this.altKey&&(this.scanCode===159||this.scanCode===163)||this.metaKey&&(this.scanCode===160||this.scanCode===164)}}e.ScanCodeChord=y;class f{constructor(n){if(n.length===0)throw(0,c.illegalArgument)("chords");this.chords=n}}e.Keybinding=f;class _{constructor(n,s,t,i,o,g){this.ctrlKey=n,this.shiftKey=s,this.altKey=t,this.metaKey=i,this.keyLabel=o,this.keyAriaLabel=g}}e.ResolvedChord=_;class b{}e.ResolvedKeybinding=b}),define(oe[98],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lazy=void 0;class c{constructor(E){this.executor=E,this._didRun=!1}get value(){if(!this._didRun)try{this._value=this.executor()}catch(E){this._error=E}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}e.Lazy=c}),define(oe[43],re([1,0,98]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHoverDelegateFactory=f,e.getDefaultHoverDelegate=_,e.createInstantHoverDelegate=b;let E=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});const L=new c.Lazy(()=>E("mouse",!1)),y=new c.Lazy(()=>E("element",!1));function f(p){E=p}function _(p){return p==="element"?y.value:L.value}function b(){return E("element",!0)}}),define(oe[158],re([1,0,98]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VSBuffer=void 0,e.readUInt16LE=f,e.writeUInt16LE=_,e.readUInt32BE=b,e.writeUInt32BE=p,e.readUInt8=n,e.writeUInt8=s;const k=typeof Buffer<"u",E=new c.Lazy(()=>new Uint8Array(256));let L;class y{static wrap(i){return k&&!Buffer.isBuffer(i)&&(i=Buffer.from(i.buffer,i.byteOffset,i.byteLength)),new y(i)}constructor(i){this.buffer=i,this.byteLength=this.buffer.byteLength}toString(){return k?this.buffer.toString():(L||(L=new TextDecoder),L.decode(this.buffer))}}e.VSBuffer=y;function f(t,i){return t[i+0]<<0>>>0|t[i+1]<<8>>>0}function _(t,i,o){t[o+0]=i&255,i=i>>>8,t[o+1]=i&255}function b(t,i){return t[i]*2**24+t[i+1]*2**16+t[i+2]*2**8+t[i+3]}function p(t,i,o){t[o+3]=i,i=i>>>8,t[o+2]=i,i=i>>>8,t[o+1]=i,i=i>>>8,t[o]=i}function n(t,i){return t[i]}function s(t,i,o){t[o]=i}}),define(oe[440],re([1,0,98]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compareFileNames=y,e.compareAnything=f,e.compareByPrefix=_;const k=new c.Lazy(()=>{const b=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:b,collatorIsNumeric:b.resolvedOptions().numeric}}),E=new c.Lazy(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),L=new c.Lazy(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));function y(b,p,n=!1){const s=b||"",t=p||"",i=k.value.collator.compare(s,t);return k.value.collatorIsNumeric&&i===0&&s!==t?s<t?-1:1:i}function f(b,p,n){const s=b.toLowerCase(),t=p.toLowerCase(),i=_(b,p,n);if(i)return i;const o=s.endsWith(n),g=t.endsWith(n);if(o!==g)return o?-1:1;const u=y(s,t);return u!==0?u:s.localeCompare(t)}function _(b,p,n){const s=b.toLowerCase(),t=p.toLowerCase(),i=s.startsWith(n),o=t.startsWith(n);if(i!==o)return i?-1:1;if(i&&o){if(s.length<t.length)return-1;if(s.length>t.length)return 1}return 0}}),define(oe[2],re([1,0,127,53]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableMap=e.ImmortalReference=e.RefCountedDisposable=e.MutableDisposable=e.Disposable=e.DisposableStore=void 0,e.setDisposableTracker=y,e.trackDisposable=f,e.markAsDisposed=_,e.markAsSingleton=n,e.isDisposable=s,e.dispose=t,e.combinedDisposable=i,e.toDisposable=o;const E=!1;let L=null;function y(m){L=m}if(E){const m="__is_disposable_tracked__";y(new class{trackDisposable(h){const v=new Error("Potentially leaked disposable").stack;setTimeout(()=>{h[m]||console.log(v)},3e3)}setParent(h,v){if(h&&h!==u.None)try{h[m]=!0}catch{}}markAsDisposed(h){if(h&&h!==u.None)try{h[m]=!0}catch{}}markAsSingleton(h){}})}function f(m){return L?.trackDisposable(m),m}function _(m){L?.markAsDisposed(m)}function b(m,h){L?.setParent(m,h)}function p(m,h){if(L)for(const v of m)L.setParent(v,h)}function n(m){return L?.markAsSingleton(m),m}function s(m){return typeof m=="object"&&m!==null&&typeof m.dispose=="function"&&m.dispose.length===0}function t(m){if(k.Iterable.is(m)){const h=[];for(const v of m)if(v)try{v.dispose()}catch(C){h.push(C)}if(h.length===1)throw h[0];if(h.length>1)throw new AggregateError(h,"Encountered errors while disposing of store");return Array.isArray(m)?[]:m}else if(m)return m.dispose(),m}function i(...m){const h=o(()=>t(m));return p(m,h),h}function o(m){const h=f({dispose:(0,c.createSingleCallFunction)(()=>{_(h),m()})});return h}class g{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this._toDispose=new Set,this._isDisposed=!1,f(this)}dispose(){this._isDisposed||(_(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{t(this._toDispose)}finally{this._toDispose.clear()}}add(h){if(!h)return h;if(h===this)throw new Error("Cannot register a disposable on itself!");return b(h,this),this._isDisposed?g.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(h),h}deleteAndLeak(h){h&&this._toDispose.has(h)&&(this._toDispose.delete(h),b(h,null))}}e.DisposableStore=g;class u{static{this.None=Object.freeze({dispose(){}})}constructor(){this._store=new g,f(this),b(this._store,this)}dispose(){_(this),this._store.dispose()}_register(h){if(h===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(h)}}e.Disposable=u;class l{constructor(){this._isDisposed=!1,f(this)}get value(){return this._isDisposed?void 0:this._value}set value(h){this._isDisposed||h===this._value||(this._value?.dispose(),h&&b(h,this),this._value=h)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,_(this),this._value?.dispose(),this._value=void 0}}e.MutableDisposable=l;class a{constructor(h){this._disposable=h,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}e.RefCountedDisposable=a;class r{constructor(h){this.object=h}dispose(){}}e.ImmortalReference=r;class d{constructor(){this._store=new Map,this._isDisposed=!1,f(this)}dispose(){_(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{t(this._store.values())}finally{this._store.clear()}}get(h){return this._store.get(h)}set(h,v,C=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),C||this._store.get(h)?.dispose(),this._store.set(h,v)}deleteAndDispose(h){this._store.get(h)?.dispose(),this._store.delete(h)}[Symbol.iterator](){return this._store[Symbol.iterator]()}}e.DisposableMap=d}),define(oe[73],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedList=void 0;class c{static{this.Undefined=new c(void 0)}constructor(L){this.element=L,this.next=c.Undefined,this.prev=c.Undefined}}class k{constructor(){this._first=c.Undefined,this._last=c.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===c.Undefined}clear(){let L=this._first;for(;L!==c.Undefined;){const y=L.next;L.prev=c.Undefined,L.next=c.Undefined,L=y}this._first=c.Undefined,this._last=c.Undefined,this._size=0}unshift(L){return this._insert(L,!1)}push(L){return this._insert(L,!0)}_insert(L,y){const f=new c(L);if(this._first===c.Undefined)this._first=f,this._last=f;else if(y){const b=this._last;this._last=f,f.prev=b,b.next=f}else{const b=this._first;this._first=f,f.next=b,b.prev=f}this._size+=1;let _=!1;return()=>{_||(_=!0,this._remove(f))}}shift(){if(this._first!==c.Undefined){const L=this._first.element;return this._remove(this._first),L}}pop(){if(this._last!==c.Undefined){const L=this._last.element;return this._remove(this._last),L}}_remove(L){if(L.prev!==c.Undefined&&L.next!==c.Undefined){const y=L.prev;y.next=L.next,L.next.prev=y}else L.prev===c.Undefined&&L.next===c.Undefined?(this._first=c.Undefined,this._last=c.Undefined):L.next===c.Undefined?(this._last=this._last.prev,this._last.next=c.Undefined):L.prev===c.Undefined&&(this._first=this._first.next,this._first.prev=c.Undefined);this._size-=1}*[Symbol.iterator](){let L=this._first;for(;L!==c.Undefined;)yield L.element,L=L.next}}e.LinkedList=k});var De=this&&this.__decorate||function(ae,e,c,k){var E=arguments.length,L=E<3?e:k===null?k=Object.getOwnPropertyDescriptor(e,c):k,y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(ae,e,c,k);else for(var f=ae.length-1;f>=0;f--)(y=ae[f])&&(L=(E<3?y(L):E>3?y(e,c,L):y(e,c))||L);return E>3&&L&&Object.defineProperty(e,c,L),L};define(oe[441],re([1,0,126]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedText=void 0,e.parseLinkedText=L;class k{constructor(f){this.nodes=f}toString(){return this.nodes.map(f=>typeof f=="string"?f:f.label).join("")}}e.LinkedText=k,De([c.memoize],k.prototype,"toString",null);const E=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function L(y){const f=[];let _=0,b;for(;b=E.exec(y);){b.index-_>0&&f.push(y.substring(_,b.index));const[,p,n,,s]=b;s?f.push({label:p,href:n,title:s}):f.push({label:p,href:n}),_=b.index+b[0].length}return _<y.length&&f.push(y.substring(_)),new k(f)}}),define(oe[45],re([1,0]),function(ae,e){"use strict";var c,k;Object.defineProperty(e,"__esModule",{value:!0}),e.SetMap=e.BidirectionalMap=e.LRUCache=e.LinkedMap=e.ResourceMap=void 0;class E{constructor(t,i){this.uri=t,this.value=i}}function L(s){return Array.isArray(s)}class y{static{this.defaultToKey=t=>t.toString()}constructor(t,i){if(this[c]="ResourceMap",t instanceof y)this.map=new Map(t.map),this.toKey=i??y.defaultToKey;else if(L(t)){this.map=new Map,this.toKey=i??y.defaultToKey;for(const[o,g]of t)this.set(o,g)}else this.map=new Map,this.toKey=t??y.defaultToKey}set(t,i){return this.map.set(this.toKey(t),new E(t,i)),this}get(t){return this.map.get(this.toKey(t))?.value}has(t){return this.map.has(this.toKey(t))}get size(){return this.map.size}clear(){this.map.clear()}delete(t){return this.map.delete(this.toKey(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[o,g]of this.map)t(g.value,g.uri,this)}*values(){for(const t of this.map.values())yield t.value}*keys(){for(const t of this.map.values())yield t.uri}*entries(){for(const t of this.map.values())yield[t.uri,t.value]}*[(c=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.map)yield[t.uri,t.value]}}e.ResourceMap=y;class f{constructor(){this[k]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(t){return this._map.has(t)}get(t,i=0){const o=this._map.get(t);if(o)return i!==0&&this.touch(o,i),o.value}set(t,i,o=0){let g=this._map.get(t);if(g)g.value=i,o!==0&&this.touch(g,o);else{switch(g={key:t,value:i,next:void 0,previous:void 0},o){case 0:this.addItemLast(g);break;case 1:this.addItemFirst(g);break;case 2:this.addItemLast(g);break;default:this.addItemLast(g);break}this._map.set(t,g),this._size++}return this}delete(t){return!!this.remove(t)}remove(t){const i=this._map.get(t);if(i)return this._map.delete(t),this.removeItem(i),this._size--,i.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const t=this._head;return this._map.delete(t.key),this.removeItem(t),this._size--,t.value}forEach(t,i){const o=this._state;let g=this._head;for(;g;){if(i?t.bind(i)(g.value,g.key,this):t(g.value,g.key,this),this._state!==o)throw new Error("LinkedMap got modified during iteration.");g=g.next}}keys(){const t=this,i=this._state;let o=this._head;const g={[Symbol.iterator](){return g},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const u={value:o.key,done:!1};return o=o.next,u}else return{value:void 0,done:!0}}};return g}values(){const t=this,i=this._state;let o=this._head;const g={[Symbol.iterator](){return g},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const u={value:o.value,done:!1};return o=o.next,u}else return{value:void 0,done:!0}}};return g}entries(){const t=this,i=this._state;let o=this._head;const g={[Symbol.iterator](){return g},next(){if(t._state!==i)throw new Error("LinkedMap got modified during iteration.");if(o){const u={value:[o.key,o.value],done:!1};return o=o.next,u}else return{value:void 0,done:!0}}};return g}[(k=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(t){if(t>=this.size)return;if(t===0){this.clear();return}let i=this._head,o=this.size;for(;i&&o>t;)this._map.delete(i.key),i=i.next,o--;this._head=i,this._size=o,i&&(i.previous=void 0),this._state++}trimNew(t){if(t>=this.size)return;if(t===0){this.clear();return}let i=this._tail,o=this.size;for(;i&&o>t;)this._map.delete(i.key),i=i.previous,o--;this._tail=i,this._size=o,i&&(i.next=void 0),this._state++}addItemFirst(t){if(!this._head&&!this._tail)this._tail=t;else if(this._head)t.next=this._head,this._head.previous=t;else throw new Error("Invalid list");this._head=t,this._state++}addItemLast(t){if(!this._head&&!this._tail)this._head=t;else if(this._tail)t.previous=this._tail,this._tail.next=t;else throw new Error("Invalid list");this._tail=t,this._state++}removeItem(t){if(t===this._head&&t===this._tail)this._head=void 0,this._tail=void 0;else if(t===this._head){if(!t.next)throw new Error("Invalid list");t.next.previous=void 0,this._head=t.next}else if(t===this._tail){if(!t.previous)throw new Error("Invalid list");t.previous.next=void 0,this._tail=t.previous}else{const i=t.next,o=t.previous;if(!i||!o)throw new Error("Invalid list");i.previous=o,o.next=i}t.next=void 0,t.previous=void 0,this._state++}touch(t,i){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(i!==1&&i!==2)){if(i===1){if(t===this._head)return;const o=t.next,g=t.previous;t===this._tail?(g.next=void 0,this._tail=g):(o.previous=g,g.next=o),t.previous=void 0,t.next=this._head,this._head.previous=t,this._head=t,this._state++}else if(i===2){if(t===this._tail)return;const o=t.next,g=t.previous;t===this._head?(o.previous=void 0,this._head=o):(o.previous=g,g.next=o),t.next=void 0,t.previous=this._tail,this._tail.next=t,this._tail=t,this._state++}}}toJSON(){const t=[];return this.forEach((i,o)=>{t.push([o,i])}),t}fromJSON(t){this.clear();for(const[i,o]of t)this.set(i,o)}}e.LinkedMap=f;class _ extends f{constructor(t,i=1){super(),this._limit=t,this._ratio=Math.min(Math.max(0,i),1)}get limit(){return this._limit}set limit(t){this._limit=t,this.checkTrim()}get(t,i=2){return super.get(t,i)}peek(t){return super.get(t,0)}set(t,i){return super.set(t,i,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class b extends _{constructor(t,i=1){super(t,i)}trim(t){this.trimOld(t)}set(t,i){return super.set(t,i),this.checkTrim(),this}}e.LRUCache=b;class p{constructor(t){if(this._m1=new Map,this._m2=new Map,t)for(const[i,o]of t)this.set(i,o)}clear(){this._m1.clear(),this._m2.clear()}set(t,i){this._m1.set(t,i),this._m2.set(i,t)}get(t){return this._m1.get(t)}getKey(t){return this._m2.get(t)}delete(t){const i=this._m1.get(t);return i===void 0?!1:(this._m1.delete(t),this._m2.delete(i),!0)}keys(){return this._m1.keys()}values(){return this._m1.values()}}e.BidirectionalMap=p;class n{constructor(){this.map=new Map}add(t,i){let o=this.map.get(t);o||(o=new Set,this.map.set(t,o)),o.add(i)}delete(t,i){const o=this.map.get(t);o&&(o.delete(i),o.size===0&&this.map.delete(t))}forEach(t,i){const o=this.map.get(t);o&&o.forEach(i)}get(t){const i=this.map.get(t);return i||new Set}}e.SetMap=n}),function(ae,e){typeof define=="function"&&define.amd?define(oe[442],re([0]),e):typeof exports=="object"&&typeof module<"u"?e(exports):(ae=typeof globalThis<"u"?globalThis:ae||self,e(ae.marked={}))}(this,function(ae){"use strict";function e(ie,ne){for(var J=0;J<ne.length;J++){var B=ne[J];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(ie,B.key,B)}}function c(ie,ne,J){return ne&&e(ie.prototype,ne),J&&e(ie,J),Object.defineProperty(ie,"prototype",{writable:!1}),ie}function k(ie,ne){if(ie){if(typeof ie=="string")return E(ie,ne);var J=Object.prototype.toString.call(ie).slice(8,-1);if(J==="Object"&&ie.constructor&&(J=ie.constructor.name),J==="Map"||J==="Set")return Array.from(ie);if(J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J))return E(ie,ne)}}function E(ie,ne){(ne==null||ne>ie.length)&&(ne=ie.length);for(var J=0,B=new Array(ne);J<ne;J++)B[J]=ie[J];return B}function L(ie,ne){var J=typeof Symbol<"u"&&ie[Symbol.iterator]||ie["@@iterator"];if(J)return(J=J.call(ie)).next.bind(J);if(Array.isArray(ie)||(J=k(ie))||ne&&ie&&typeof ie.length=="number"){J&&(ie=J);var B=0;return function(){return B>=ie.length?{done:!0}:{done:!1,value:ie[B++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}ae.defaults=y();function f(ie){ae.defaults=ie}var _=/[&<>"']/,b=/[&<>"']/g,p=/[<>"']|&(?!#?\w+;)/,n=/[<>"']|&(?!#?\w+;)/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},t=function(ne){return s[ne]};function i(ie,ne){if(ne){if(_.test(ie))return ie.replace(b,t)}else if(p.test(ie))return ie.replace(n,t);return ie}var o=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function g(ie){return ie.replace(o,function(ne,J){return J=J.toLowerCase(),J==="colon"?":":J.charAt(0)==="#"?J.charAt(1)==="x"?String.fromCharCode(parseInt(J.substring(2),16)):String.fromCharCode(+J.substring(1)):""})}var u=/(^|[^\[])\^/g;function l(ie,ne){ie=typeof ie=="string"?ie:ie.source,ne=ne||"";var J={replace:function(j,V){return V=V.source||V,V=V.replace(u,"$1"),ie=ie.replace(j,V),J},getRegex:function(){return new RegExp(ie,ne)}};return J}var a=/[^\w:]/g,r=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function d(ie,ne,J){if(ie){var B;try{B=decodeURIComponent(g(J)).replace(a,"").toLowerCase()}catch{return null}if(B.indexOf("javascript:")===0||B.indexOf("vbscript:")===0||B.indexOf("data:")===0)return null}ne&&!r.test(J)&&(J=w(ne,J));try{J=encodeURI(J).replace(/%25/g,"%")}catch{return null}return J}var m={},h=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,C=/^([^:]+:\/*[^/]*)[\s\S]*$/;function w(ie,ne){m[" "+ie]||(h.test(ie)?m[" "+ie]=ie+"/":m[" "+ie]=T(ie,"/",!0)),ie=m[" "+ie];var J=ie.indexOf(":")===-1;return ne.substring(0,2)==="//"?J?ne:ie.replace(v,"$1")+ne:ne.charAt(0)==="/"?J?ne:ie.replace(C,"$1")+ne:ie+ne}var S={exec:function(){}};function D(ie){for(var ne=1,J,B;ne<arguments.length;ne++){J=arguments[ne];for(B in J)Object.prototype.hasOwnProperty.call(J,B)&&(ie[B]=J[B])}return ie}function I(ie,ne){var J=ie.replace(/\|/g,function(V,$,Z){for(var ee=!1,le=$;--le>=0&&Z[le]==="\\";)ee=!ee;return ee?"|":" |"}),B=J.split(/ \|/),j=0;if(B[0].trim()||B.shift(),B.length>0&&!B[B.length-1].trim()&&B.pop(),B.length>ne)B.splice(ne);else for(;B.length<ne;)B.push("");for(;j<B.length;j++)B[j]=B[j].trim().replace(/\\\|/g,"|");return B}function T(ie,ne,J){var B=ie.length;if(B===0)return"";for(var j=0;j<B;){var V=ie.charAt(B-j-1);if(V===ne&&!J)j++;else if(V!==ne&&J)j++;else break}return ie.slice(0,B-j)}function M(ie,ne){if(ie.indexOf(ne[1])===-1)return-1;for(var J=ie.length,B=0,j=0;j<J;j++)if(ie[j]==="\\")j++;else if(ie[j]===ne[0])B++;else if(ie[j]===ne[1]&&(B--,B<0))return j;return-1}function A(ie){ie&&ie.sanitize&&!ie.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function R(ie,ne){if(ne<1)return"";for(var J="";ne>1;)ne&1&&(J+=ie),ne>>=1,ie+=ie;return J+ie}function N(ie,ne,J,B){var j=ne.href,V=ne.title?i(ne.title):null,$=ie[1].replace(/\\([\[\]])/g,"$1");if(ie[0].charAt(0)!=="!"){B.state.inLink=!0;var Z={type:"link",raw:J,href:j,title:V,text:$,tokens:B.inlineTokens($)};return B.state.inLink=!1,Z}return{type:"image",raw:J,href:j,title:V,text:i($)}}function O(ie,ne){var J=ie.match(/^(\s+)(?:```)/);if(J===null)return ne;var B=J[1];return ne.split(`
`).map(function(j){var V=j.match(/^\s+/);if(V===null)return j;var $=V[0];return $.length>=B.length?j.slice(B.length):j}).join(`
`)}var x=function(){function ie(J){this.options=J||ae.defaults}var ne=ie.prototype;return ne.space=function(B){var j=this.rules.block.newline.exec(B);if(j&&j[0].length>0)return{type:"space",raw:j[0]}},ne.code=function(B){var j=this.rules.block.code.exec(B);if(j){var V=j[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:j[0],codeBlockStyle:"indented",text:this.options.pedantic?V:T(V,`
`)}}},ne.fences=function(B){var j=this.rules.block.fences.exec(B);if(j){var V=j[0],$=O(V,j[3]||"");return{type:"code",raw:V,lang:j[2]?j[2].trim():j[2],text:$}}},ne.heading=function(B){var j=this.rules.block.heading.exec(B);if(j){var V=j[2].trim();if(/#$/.test(V)){var $=T(V,"#");(this.options.pedantic||!$||/ $/.test($))&&(V=$.trim())}return{type:"heading",raw:j[0],depth:j[1].length,text:V,tokens:this.lexer.inline(V)}}},ne.hr=function(B){var j=this.rules.block.hr.exec(B);if(j)return{type:"hr",raw:j[0]}},ne.blockquote=function(B){var j=this.rules.block.blockquote.exec(B);if(j){var V=j[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:j[0],tokens:this.lexer.blockTokens(V,[]),text:V}}},ne.list=function(B){var j=this.rules.block.list.exec(B);if(j){var V,$,Z,ee,le,de,me,be,ve,Le,Se,ye,Ee=j[1].trim(),ke=Ee.length>1,Re={type:"list",raw:"",ordered:ke,start:ke?+Ee.slice(0,-1):"",loose:!1,items:[]};Ee=ke?"\\d{1,9}\\"+Ee.slice(-1):"\\"+Ee,this.options.pedantic&&(Ee=ke?Ee:"[*+-]");for(var Pe=new RegExp("^( {0,3}"+Ee+")((?:[	 ][^\\n]*)?(?:\\n|$))");B&&(ye=!1,!(!(j=Pe.exec(B))||this.rules.block.hr.test(B)));){if(V=j[0],B=B.substring(V.length),be=j[2].split(`
`,1)[0],ve=B.split(`
`,1)[0],this.options.pedantic?(ee=2,Se=be.trimLeft()):(ee=j[2].search(/[^ ]/),ee=ee>4?1:ee,Se=be.slice(ee),ee+=j[1].length),de=!1,!be&&/^ *$/.test(ve)&&(V+=ve+`
`,B=B.substring(ve.length+1),ye=!0),!ye)for(var Fe=new RegExp("^ {0,"+Math.min(3,ee-1)+"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))"),je=new RegExp("^ {0,"+Math.min(3,ee-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Te=new RegExp("^ {0,"+Math.min(3,ee-1)+"}(?:```|~~~)"),Ne=new RegExp("^ {0,"+Math.min(3,ee-1)+"}#");B&&(Le=B.split(`
`,1)[0],be=Le,this.options.pedantic&&(be=be.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Te.test(be)||Ne.test(be)||Fe.test(be)||je.test(B)));){if(be.search(/[^ ]/)>=ee||!be.trim())Se+=`
`+be.slice(ee);else if(!de)Se+=`
`+be;else break;!de&&!be.trim()&&(de=!0),V+=Le+`
`,B=B.substring(Le.length+1)}Re.loose||(me?Re.loose=!0:/\n *\n *$/.test(V)&&(me=!0)),this.options.gfm&&($=/^\[[ xX]\] /.exec(Se),$&&(Z=$[0]!=="[ ] ",Se=Se.replace(/^\[[ xX]\] +/,""))),Re.items.push({type:"list_item",raw:V,task:!!$,checked:Z,loose:!1,text:Se}),Re.raw+=V}Re.items[Re.items.length-1].raw=V.trimRight(),Re.items[Re.items.length-1].text=Se.trimRight(),Re.raw=Re.raw.trimRight();var fe=Re.items.length;for(le=0;le<fe;le++){this.lexer.state.top=!1,Re.items[le].tokens=this.lexer.blockTokens(Re.items[le].text,[]);var we=Re.items[le].tokens.filter(function(Be){return Be.type==="space"}),Oe=we.every(function(Be){for(var Ue=Be.raw.split(""),Ye=0,Qe=L(Ue),tt;!(tt=Qe()).done;){var it=tt.value;if(it===`
`&&(Ye+=1),Ye>1)return!0}return!1});!Re.loose&&we.length&&Oe&&(Re.loose=!0,Re.items[le].loose=!0)}return Re}},ne.html=function(B){var j=this.rules.block.html.exec(B);if(j){var V={type:"html",raw:j[0],pre:!this.options.sanitizer&&(j[1]==="pre"||j[1]==="script"||j[1]==="style"),text:j[0]};if(this.options.sanitize){var $=this.options.sanitizer?this.options.sanitizer(j[0]):i(j[0]);V.type="paragraph",V.text=$,V.tokens=this.lexer.inline($)}return V}},ne.def=function(B){var j=this.rules.block.def.exec(B);if(j){j[3]&&(j[3]=j[3].substring(1,j[3].length-1));var V=j[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:V,raw:j[0],href:j[2],title:j[3]}}},ne.table=function(B){var j=this.rules.block.table.exec(B);if(j){var V={type:"table",header:I(j[1]).map(function(me){return{text:me}}),align:j[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:j[3]&&j[3].trim()?j[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(V.header.length===V.align.length){V.raw=j[0];var $=V.align.length,Z,ee,le,de;for(Z=0;Z<$;Z++)/^ *-+: *$/.test(V.align[Z])?V.align[Z]="right":/^ *:-+: *$/.test(V.align[Z])?V.align[Z]="center":/^ *:-+ *$/.test(V.align[Z])?V.align[Z]="left":V.align[Z]=null;for($=V.rows.length,Z=0;Z<$;Z++)V.rows[Z]=I(V.rows[Z],V.header.length).map(function(me){return{text:me}});for($=V.header.length,ee=0;ee<$;ee++)V.header[ee].tokens=this.lexer.inline(V.header[ee].text);for($=V.rows.length,ee=0;ee<$;ee++)for(de=V.rows[ee],le=0;le<de.length;le++)de[le].tokens=this.lexer.inline(de[le].text);return V}}},ne.lheading=function(B){var j=this.rules.block.lheading.exec(B);if(j)return{type:"heading",raw:j[0],depth:j[2].charAt(0)==="="?1:2,text:j[1],tokens:this.lexer.inline(j[1])}},ne.paragraph=function(B){var j=this.rules.block.paragraph.exec(B);if(j){var V=j[1].charAt(j[1].length-1)===`
`?j[1].slice(0,-1):j[1];return{type:"paragraph",raw:j[0],text:V,tokens:this.lexer.inline(V)}}},ne.text=function(B){var j=this.rules.block.text.exec(B);if(j)return{type:"text",raw:j[0],text:j[0],tokens:this.lexer.inline(j[0])}},ne.escape=function(B){var j=this.rules.inline.escape.exec(B);if(j)return{type:"escape",raw:j[0],text:i(j[1])}},ne.tag=function(B){var j=this.rules.inline.tag.exec(B);if(j)return!this.lexer.state.inLink&&/^<a /i.test(j[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(j[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(j[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(j[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:j[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(j[0]):i(j[0]):j[0]}},ne.link=function(B){var j=this.rules.inline.link.exec(B);if(j){var V=j[2].trim();if(!this.options.pedantic&&/^</.test(V)){if(!/>$/.test(V))return;var $=T(V.slice(0,-1),"\\");if((V.length-$.length)%2===0)return}else{var Z=M(j[2],"()");if(Z>-1){var ee=j[0].indexOf("!")===0?5:4,le=ee+j[1].length+Z;j[2]=j[2].substring(0,Z),j[0]=j[0].substring(0,le).trim(),j[3]=""}}var de=j[2],me="";if(this.options.pedantic){var be=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(de);be&&(de=be[1],me=be[3])}else me=j[3]?j[3].slice(1,-1):"";return de=de.trim(),/^</.test(de)&&(this.options.pedantic&&!/>$/.test(V)?de=de.slice(1):de=de.slice(1,-1)),N(j,{href:de&&de.replace(this.rules.inline._escapes,"$1"),title:me&&me.replace(this.rules.inline._escapes,"$1")},j[0],this.lexer)}},ne.reflink=function(B,j){var V;if((V=this.rules.inline.reflink.exec(B))||(V=this.rules.inline.nolink.exec(B))){var $=(V[2]||V[1]).replace(/\s+/g," ");if($=j[$.toLowerCase()],!$||!$.href){var Z=V[0].charAt(0);return{type:"text",raw:Z,text:Z}}return N(V,$,V[0],this.lexer)}},ne.emStrong=function(B,j,V){V===void 0&&(V="");var $=this.rules.inline.emStrong.lDelim.exec(B);if($&&!($[3]&&V.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Z=$[1]||$[2]||"";if(!Z||Z&&(V===""||this.rules.inline.punctuation.exec(V))){var ee=$[0].length-1,le,de,me=ee,be=0,ve=$[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(ve.lastIndex=0,j=j.slice(-1*B.length+ee);($=ve.exec(j))!=null;)if(le=$[1]||$[2]||$[3]||$[4]||$[5]||$[6],!!le){if(de=le.length,$[3]||$[4]){me+=de;continue}else if(($[5]||$[6])&&ee%3&&!((ee+de)%3)){be+=de;continue}if(me-=de,!(me>0)){if(de=Math.min(de,de+me+be),Math.min(ee,de)%2){var Le=B.slice(1,ee+$.index+de);return{type:"em",raw:B.slice(0,ee+$.index+de+1),text:Le,tokens:this.lexer.inlineTokens(Le)}}var Se=B.slice(2,ee+$.index+de-1);return{type:"strong",raw:B.slice(0,ee+$.index+de+1),text:Se,tokens:this.lexer.inlineTokens(Se)}}}}}},ne.codespan=function(B){var j=this.rules.inline.code.exec(B);if(j){var V=j[2].replace(/\n/g," "),$=/[^ ]/.test(V),Z=/^ /.test(V)&&/ $/.test(V);return $&&Z&&(V=V.substring(1,V.length-1)),V=i(V,!0),{type:"codespan",raw:j[0],text:V}}},ne.br=function(B){var j=this.rules.inline.br.exec(B);if(j)return{type:"br",raw:j[0]}},ne.del=function(B){var j=this.rules.inline.del.exec(B);if(j)return{type:"del",raw:j[0],text:j[2],tokens:this.lexer.inlineTokens(j[2])}},ne.autolink=function(B,j){var V=this.rules.inline.autolink.exec(B);if(V){var $,Z;return V[2]==="@"?($=i(this.options.mangle?j(V[1]):V[1]),Z="mailto:"+$):($=i(V[1]),Z=$),{type:"link",raw:V[0],text:$,href:Z,tokens:[{type:"text",raw:$,text:$}]}}},ne.url=function(B,j){var V;if(V=this.rules.inline.url.exec(B)){var $,Z;if(V[2]==="@")$=i(this.options.mangle?j(V[0]):V[0]),Z="mailto:"+$;else{var ee;do ee=V[0],V[0]=this.rules.inline._backpedal.exec(V[0])[0];while(ee!==V[0]);$=i(V[0]),V[1]==="www."?Z="http://"+$:Z=$}return{type:"link",raw:V[0],text:$,href:Z,tokens:[{type:"text",raw:$,text:$}]}}},ne.inlineText=function(B,j){var V=this.rules.inline.text.exec(B);if(V){var $;return this.lexer.state.inRawBlock?$=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(V[0]):i(V[0]):V[0]:$=i(this.options.smartypants?j(V[0]):V[0]),{type:"text",raw:V[0],text:$}}},ie}(),F={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:S,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};F._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,F._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,F.def=l(F.def).replace("label",F._label).replace("title",F._title).getRegex(),F.bullet=/(?:[*+-]|\d{1,9}[.)])/,F.listItemStart=l(/^( *)(bull) */).replace("bull",F.bullet).getRegex(),F.list=l(F.list).replace(/bull/g,F.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+F.def.source+")").getRegex(),F._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",F._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,F.html=l(F.html,"i").replace("comment",F._comment).replace("tag",F._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),F.paragraph=l(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.blockquote=l(F.blockquote).replace("paragraph",F.paragraph).getRegex(),F.normal=D({},F),F.gfm=D({},F.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),F.gfm.table=l(F.gfm.table).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.gfm.paragraph=l(F._paragraph).replace("hr",F.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",F.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F._tag).getRegex(),F.pedantic=D({},F.normal,{html:l(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",F._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:S,paragraph:l(F.normal._paragraph).replace("hr",F.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",F.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:S,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:S,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};W._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",W.punctuation=l(W.punctuation).replace(/punctuation/g,W._punctuation).getRegex(),W.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,W.escapedEmSt=/\\\*|\\_/g,W._comment=l(F._comment).replace("(?:-->|$)","-->").getRegex(),W.emStrong.lDelim=l(W.emStrong.lDelim).replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimAst=l(W.emStrong.rDelimAst,"g").replace(/punct/g,W._punctuation).getRegex(),W.emStrong.rDelimUnd=l(W.emStrong.rDelimUnd,"g").replace(/punct/g,W._punctuation).getRegex(),W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,W.autolink=l(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex(),W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,W.tag=l(W.tag).replace("comment",W._comment).replace("attribute",W._attribute).getRegex(),W._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,W._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,W.link=l(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex(),W.reflink=l(W.reflink).replace("label",W._label).replace("ref",F._label).getRegex(),W.nolink=l(W.nolink).replace("ref",F._label).getRegex(),W.reflinkSearch=l(W.reflinkSearch,"g").replace("reflink",W.reflink).replace("nolink",W.nolink).getRegex(),W.normal=D({},W),W.pedantic=D({},W.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:l(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:l(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()}),W.gfm=D({},W.normal,{escape:l(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),W.gfm.url=l(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex(),W.breaks=D({},W.gfm,{br:l(W.br).replace("{2,}","*").getRegex(),text:l(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function z(ie){return ie.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function q(ie){var ne="",J,B,j=ie.length;for(J=0;J<j;J++)B=ie.charCodeAt(J),Math.random()>.5&&(B="x"+B.toString(16)),ne+="&#"+B+";";return ne}var H=function(){function ie(J){this.tokens=[],this.tokens.links=Object.create(null),this.options=J||ae.defaults,this.options.tokenizer=this.options.tokenizer||new x,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var B={block:F.normal,inline:W.normal};this.options.pedantic?(B.block=F.pedantic,B.inline=W.pedantic):this.options.gfm&&(B.block=F.gfm,this.options.breaks?B.inline=W.breaks:B.inline=W.gfm),this.tokenizer.rules=B}ie.lex=function(B,j){var V=new ie(j);return V.lex(B)},ie.lexInline=function(B,j){var V=new ie(j);return V.inlineTokens(B)};var ne=ie.prototype;return ne.lex=function(B){B=B.replace(/\r\n|\r/g,`
`),this.blockTokens(B,this.tokens);for(var j;j=this.inlineQueue.shift();)this.inlineTokens(j.src,j.tokens);return this.tokens},ne.blockTokens=function(B,j){var V=this;j===void 0&&(j=[]),this.options.pedantic?B=B.replace(/\t/g,"    ").replace(/^ +$/gm,""):B=B.replace(/^( *)(\t+)/gm,function(me,be,ve){return be+"    ".repeat(ve.length)});for(var $,Z,ee,le;B;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(me){return($=me.call({lexer:V},B,j))?(B=B.substring($.raw.length),j.push($),!0):!1}))){if($=this.tokenizer.space(B)){B=B.substring($.raw.length),$.raw.length===1&&j.length>0?j[j.length-1].raw+=`
`:j.push($);continue}if($=this.tokenizer.code(B)){B=B.substring($.raw.length),Z=j[j.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+$.raw,Z.text+=`
`+$.text,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):j.push($);continue}if($=this.tokenizer.fences(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.heading(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.hr(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.blockquote(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.list(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.html(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.def(B)){B=B.substring($.raw.length),Z=j[j.length-1],Z&&(Z.type==="paragraph"||Z.type==="text")?(Z.raw+=`
`+$.raw,Z.text+=`
`+$.raw,this.inlineQueue[this.inlineQueue.length-1].src=Z.text):this.tokens.links[$.tag]||(this.tokens.links[$.tag]={href:$.href,title:$.title});continue}if($=this.tokenizer.table(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.lheading(B)){B=B.substring($.raw.length),j.push($);continue}if(ee=B,this.options.extensions&&this.options.extensions.startBlock&&function(){var me=1/0,be=B.slice(1),ve=void 0;V.options.extensions.startBlock.forEach(function(Le){ve=Le.call({lexer:this},be),typeof ve=="number"&&ve>=0&&(me=Math.min(me,ve))}),me<1/0&&me>=0&&(ee=B.substring(0,me+1))}(),this.state.top&&($=this.tokenizer.paragraph(ee))){Z=j[j.length-1],le&&Z.type==="paragraph"?(Z.raw+=`
`+$.raw,Z.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):j.push($),le=ee.length!==B.length,B=B.substring($.raw.length);continue}if($=this.tokenizer.text(B)){B=B.substring($.raw.length),Z=j[j.length-1],Z&&Z.type==="text"?(Z.raw+=`
`+$.raw,Z.text+=`
`+$.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=Z.text):j.push($);continue}if(B){var de="Infinite loop on byte: "+B.charCodeAt(0);if(this.options.silent){console.error(de);break}else throw new Error(de)}}return this.state.top=!0,j},ne.inline=function(B,j){return j===void 0&&(j=[]),this.inlineQueue.push({src:B,tokens:j}),j},ne.inlineTokens=function(B,j){var V=this;j===void 0&&(j=[]);var $,Z,ee,le=B,de,me,be;if(this.tokens.links){var ve=Object.keys(this.tokens.links);if(ve.length>0)for(;(de=this.tokenizer.rules.inline.reflinkSearch.exec(le))!=null;)ve.includes(de[0].slice(de[0].lastIndexOf("[")+1,-1))&&(le=le.slice(0,de.index)+"["+R("a",de[0].length-2)+"]"+le.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(de=this.tokenizer.rules.inline.blockSkip.exec(le))!=null;)le=le.slice(0,de.index)+"["+R("a",de[0].length-2)+"]"+le.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(de=this.tokenizer.rules.inline.escapedEmSt.exec(le))!=null;)le=le.slice(0,de.index)+"++"+le.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;B;)if(me||(be=""),me=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(Se){return($=Se.call({lexer:V},B,j))?(B=B.substring($.raw.length),j.push($),!0):!1}))){if($=this.tokenizer.escape(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.tag(B)){B=B.substring($.raw.length),Z=j[j.length-1],Z&&$.type==="text"&&Z.type==="text"?(Z.raw+=$.raw,Z.text+=$.text):j.push($);continue}if($=this.tokenizer.link(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.reflink(B,this.tokens.links)){B=B.substring($.raw.length),Z=j[j.length-1],Z&&$.type==="text"&&Z.type==="text"?(Z.raw+=$.raw,Z.text+=$.text):j.push($);continue}if($=this.tokenizer.emStrong(B,le,be)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.codespan(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.br(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.del(B)){B=B.substring($.raw.length),j.push($);continue}if($=this.tokenizer.autolink(B,q)){B=B.substring($.raw.length),j.push($);continue}if(!this.state.inLink&&($=this.tokenizer.url(B,q))){B=B.substring($.raw.length),j.push($);continue}if(ee=B,this.options.extensions&&this.options.extensions.startInline&&function(){var Se=1/0,ye=B.slice(1),Ee=void 0;V.options.extensions.startInline.forEach(function(ke){Ee=ke.call({lexer:this},ye),typeof Ee=="number"&&Ee>=0&&(Se=Math.min(Se,Ee))}),Se<1/0&&Se>=0&&(ee=B.substring(0,Se+1))}(),$=this.tokenizer.inlineText(ee,z)){B=B.substring($.raw.length),$.raw.slice(-1)!=="_"&&(be=$.raw.slice(-1)),me=!0,Z=j[j.length-1],Z&&Z.type==="text"?(Z.raw+=$.raw,Z.text+=$.text):j.push($);continue}if(B){var Le="Infinite loop on byte: "+B.charCodeAt(0);if(this.options.silent){console.error(Le);break}else throw new Error(Le)}}return j},c(ie,null,[{key:"rules",get:function(){return{block:F,inline:W}}}]),ie}(),K=function(){function ie(J){this.options=J||ae.defaults}var ne=ie.prototype;return ne.code=function(B,j,V){var $=(j||"").match(/\S*/)[0];if(this.options.highlight){var Z=this.options.highlight(B,$);Z!=null&&Z!==B&&(V=!0,B=Z)}return B=B.replace(/\n$/,"")+`
`,$?'<pre><code class="'+this.options.langPrefix+i($,!0)+'">'+(V?B:i(B,!0))+`</code></pre>
`:"<pre><code>"+(V?B:i(B,!0))+`</code></pre>
`},ne.blockquote=function(B){return`<blockquote>
`+B+`</blockquote>
`},ne.html=function(B){return B},ne.heading=function(B,j,V,$){if(this.options.headerIds){var Z=this.options.headerPrefix+$.slug(V);return"<h"+j+' id="'+Z+'">'+B+"</h"+j+`>
`}return"<h"+j+">"+B+"</h"+j+`>
`},ne.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},ne.list=function(B,j,V){var $=j?"ol":"ul",Z=j&&V!==1?' start="'+V+'"':"";return"<"+$+Z+`>
`+B+"</"+$+`>
`},ne.listitem=function(B){return"<li>"+B+`</li>
`},ne.checkbox=function(B){return"<input "+(B?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},ne.paragraph=function(B){return"<p>"+B+`</p>
`},ne.table=function(B,j){return j&&(j="<tbody>"+j+"</tbody>"),`<table>
<thead>
`+B+`</thead>
`+j+`</table>
`},ne.tablerow=function(B){return`<tr>
`+B+`</tr>
`},ne.tablecell=function(B,j){var V=j.header?"th":"td",$=j.align?"<"+V+' align="'+j.align+'">':"<"+V+">";return $+B+("</"+V+`>
`)},ne.strong=function(B){return"<strong>"+B+"</strong>"},ne.em=function(B){return"<em>"+B+"</em>"},ne.codespan=function(B){return"<code>"+B+"</code>"},ne.br=function(){return this.options.xhtml?"<br/>":"<br>"},ne.del=function(B){return"<del>"+B+"</del>"},ne.link=function(B,j,V){if(B=d(this.options.sanitize,this.options.baseUrl,B),B===null)return V;var $='<a href="'+i(B)+'"';return j&&($+=' title="'+j+'"'),$+=">"+V+"</a>",$},ne.image=function(B,j,V){if(B=d(this.options.sanitize,this.options.baseUrl,B),B===null)return V;var $='<img src="'+B+'" alt="'+V+'"';return j&&($+=' title="'+j+'"'),$+=this.options.xhtml?"/>":">",$},ne.text=function(B){return B},ie}(),U=function(){function ie(){}var ne=ie.prototype;return ne.strong=function(B){return B},ne.em=function(B){return B},ne.codespan=function(B){return B},ne.del=function(B){return B},ne.html=function(B){return B},ne.text=function(B){return B},ne.link=function(B,j,V){return""+V},ne.image=function(B,j,V){return""+V},ne.br=function(){return""},ie}(),Y=function(){function ie(){this.seen={}}var ne=ie.prototype;return ne.serialize=function(B){return B.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},ne.getNextSafeSlug=function(B,j){var V=B,$=0;if(this.seen.hasOwnProperty(V)){$=this.seen[B];do $++,V=B+"-"+$;while(this.seen.hasOwnProperty(V))}return j||(this.seen[B]=$,this.seen[V]=0),V},ne.slug=function(B,j){j===void 0&&(j={});var V=this.serialize(B);return this.getNextSafeSlug(V,j.dryrun)},ie}(),Q=function(){function ie(J){this.options=J||ae.defaults,this.options.renderer=this.options.renderer||new K,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new U,this.slugger=new Y}ie.parse=function(B,j){var V=new ie(j);return V.parse(B)},ie.parseInline=function(B,j){var V=new ie(j);return V.parseInline(B)};var ne=ie.prototype;return ne.parse=function(B,j){j===void 0&&(j=!0);var V="",$,Z,ee,le,de,me,be,ve,Le,Se,ye,Ee,ke,Re,Pe,Fe,je,Te,Ne,fe=B.length;for($=0;$<fe;$++){if(Se=B[$],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Se.type]&&(Ne=this.options.extensions.renderers[Se.type].call({parser:this},Se),Ne!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(Se.type))){V+=Ne||"";continue}switch(Se.type){case"space":continue;case"hr":{V+=this.renderer.hr();continue}case"heading":{V+=this.renderer.heading(this.parseInline(Se.tokens),Se.depth,g(this.parseInline(Se.tokens,this.textRenderer)),this.slugger);continue}case"code":{V+=this.renderer.code(Se.text,Se.lang,Se.escaped);continue}case"table":{for(ve="",be="",le=Se.header.length,Z=0;Z<le;Z++)be+=this.renderer.tablecell(this.parseInline(Se.header[Z].tokens),{header:!0,align:Se.align[Z]});for(ve+=this.renderer.tablerow(be),Le="",le=Se.rows.length,Z=0;Z<le;Z++){for(me=Se.rows[Z],be="",de=me.length,ee=0;ee<de;ee++)be+=this.renderer.tablecell(this.parseInline(me[ee].tokens),{header:!1,align:Se.align[ee]});Le+=this.renderer.tablerow(be)}V+=this.renderer.table(ve,Le);continue}case"blockquote":{Le=this.parse(Se.tokens),V+=this.renderer.blockquote(Le);continue}case"list":{for(ye=Se.ordered,Ee=Se.start,ke=Se.loose,le=Se.items.length,Le="",Z=0;Z<le;Z++)Pe=Se.items[Z],Fe=Pe.checked,je=Pe.task,Re="",Pe.task&&(Te=this.renderer.checkbox(Fe),ke?Pe.tokens.length>0&&Pe.tokens[0].type==="paragraph"?(Pe.tokens[0].text=Te+" "+Pe.tokens[0].text,Pe.tokens[0].tokens&&Pe.tokens[0].tokens.length>0&&Pe.tokens[0].tokens[0].type==="text"&&(Pe.tokens[0].tokens[0].text=Te+" "+Pe.tokens[0].tokens[0].text)):Pe.tokens.unshift({type:"text",text:Te}):Re+=Te),Re+=this.parse(Pe.tokens,ke),Le+=this.renderer.listitem(Re,je,Fe);V+=this.renderer.list(Le,ye,Ee);continue}case"html":{V+=this.renderer.html(Se.text);continue}case"paragraph":{V+=this.renderer.paragraph(this.parseInline(Se.tokens));continue}case"text":{for(Le=Se.tokens?this.parseInline(Se.tokens):Se.text;$+1<fe&&B[$+1].type==="text";)Se=B[++$],Le+=`
`+(Se.tokens?this.parseInline(Se.tokens):Se.text);V+=j?this.renderer.paragraph(Le):Le;continue}default:{var we='Token with "'+Se.type+'" type was not found.';if(this.options.silent){console.error(we);return}else throw new Error(we)}}}return V},ne.parseInline=function(B,j){j=j||this.renderer;var V="",$,Z,ee,le=B.length;for($=0;$<le;$++){if(Z=B[$],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Z.type]&&(ee=this.options.extensions.renderers[Z.type].call({parser:this},Z),ee!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Z.type))){V+=ee||"";continue}switch(Z.type){case"escape":{V+=j.text(Z.text);break}case"html":{V+=j.html(Z.text);break}case"link":{V+=j.link(Z.href,Z.title,this.parseInline(Z.tokens,j));break}case"image":{V+=j.image(Z.href,Z.title,Z.text);break}case"strong":{V+=j.strong(this.parseInline(Z.tokens,j));break}case"em":{V+=j.em(this.parseInline(Z.tokens,j));break}case"codespan":{V+=j.codespan(Z.text);break}case"br":{V+=j.br();break}case"del":{V+=j.del(this.parseInline(Z.tokens,j));break}case"text":{V+=j.text(Z.text);break}default:{var de='Token with "'+Z.type+'" type was not found.';if(this.options.silent){console.error(de);return}else throw new Error(de)}}}return V},ie}();function X(ie,ne,J){if(typeof ie>"u"||ie===null)throw new Error("marked(): input parameter is undefined or null");if(typeof ie!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(ie)+", string expected");if(typeof ne=="function"&&(J=ne,ne=null),ne=D({},X.defaults,ne||{}),A(ne),J){var B=ne.highlight,j;try{j=H.lex(ie,ne)}catch(le){return J(le)}var V=function(de){var me;if(!de)try{ne.walkTokens&&X.walkTokens(j,ne.walkTokens),me=Q.parse(j,ne)}catch(be){de=be}return ne.highlight=B,de?J(de):J(null,me)};if(!B||B.length<3||(delete ne.highlight,!j.length))return V();var $=0;X.walkTokens(j,function(le){le.type==="code"&&($++,setTimeout(function(){B(le.text,le.lang,function(de,me){if(de)return V(de);me!=null&&me!==le.text&&(le.text=me,le.escaped=!0),$--,$===0&&V()})},0))}),$===0&&V();return}function Z(le){if(le.message+=`
Please report this to https://github.com/markedjs/marked.`,ne.silent)return"<p>An error occurred:</p><pre>"+i(le.message+"",!0)+"</pre>";throw le}try{var ee=H.lex(ie,ne);if(ne.walkTokens){if(ne.async)return Promise.all(X.walkTokens(ee,ne.walkTokens)).then(function(){return Q.parse(ee,ne)}).catch(Z);X.walkTokens(ee,ne.walkTokens)}return Q.parse(ee,ne)}catch(le){Z(le)}}X.options=X.setOptions=function(ie){return D(X.defaults,ie),f(X.defaults),X},X.getDefaults=y,X.defaults=ae.defaults,X.use=function(){for(var ie=arguments.length,ne=new Array(ie),J=0;J<ie;J++)ne[J]=arguments[J];var B=D.apply(void 0,[{}].concat(ne)),j=X.defaults.extensions||{renderers:{},childTokens:{}},V;ne.forEach(function($){if($.extensions&&(V=!0,$.extensions.forEach(function(ee){if(!ee.name)throw new Error("extension name required");if(ee.renderer){var le=j.renderers?j.renderers[ee.name]:null;le?j.renderers[ee.name]=function(){for(var de=arguments.length,me=new Array(de),be=0;be<de;be++)me[be]=arguments[be];var ve=ee.renderer.apply(this,me);return ve===!1&&(ve=le.apply(this,me)),ve}:j.renderers[ee.name]=ee.renderer}if(ee.tokenizer){if(!ee.level||ee.level!=="block"&&ee.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");j[ee.level]?j[ee.level].unshift(ee.tokenizer):j[ee.level]=[ee.tokenizer],ee.start&&(ee.level==="block"?j.startBlock?j.startBlock.push(ee.start):j.startBlock=[ee.start]:ee.level==="inline"&&(j.startInline?j.startInline.push(ee.start):j.startInline=[ee.start]))}ee.childTokens&&(j.childTokens[ee.name]=ee.childTokens)})),$.renderer&&function(){var ee=X.defaults.renderer||new K,le=function(be){var ve=ee[be];ee[be]=function(){for(var Le=arguments.length,Se=new Array(Le),ye=0;ye<Le;ye++)Se[ye]=arguments[ye];var Ee=$.renderer[be].apply(ee,Se);return Ee===!1&&(Ee=ve.apply(ee,Se)),Ee}};for(var de in $.renderer)le(de);B.renderer=ee}(),$.tokenizer&&function(){var ee=X.defaults.tokenizer||new x,le=function(be){var ve=ee[be];ee[be]=function(){for(var Le=arguments.length,Se=new Array(Le),ye=0;ye<Le;ye++)Se[ye]=arguments[ye];var Ee=$.tokenizer[be].apply(ee,Se);return Ee===!1&&(Ee=ve.apply(ee,Se)),Ee}};for(var de in $.tokenizer)le(de);B.tokenizer=ee}(),$.walkTokens){var Z=X.defaults.walkTokens;B.walkTokens=function(ee){var le=[];return le.push($.walkTokens.call(this,ee)),Z&&(le=le.concat(Z.call(this,ee))),le}}V&&(B.extensions=j),X.setOptions(B)})},X.walkTokens=function(ie,ne){for(var J=[],B=function(){var Z=V.value;switch(J=J.concat(ne.call(X,Z)),Z.type){case"table":{for(var ee=L(Z.header),le;!(le=ee()).done;){var de=le.value;J=J.concat(X.walkTokens(de.tokens,ne))}for(var me=L(Z.rows),be;!(be=me()).done;)for(var ve=be.value,Le=L(ve),Se;!(Se=Le()).done;){var ye=Se.value;J=J.concat(X.walkTokens(ye.tokens,ne))}break}case"list":{J=J.concat(X.walkTokens(Z.items,ne));break}default:X.defaults.extensions&&X.defaults.extensions.childTokens&&X.defaults.extensions.childTokens[Z.type]?X.defaults.extensions.childTokens[Z.type].forEach(function(Ee){J=J.concat(X.walkTokens(Z[Ee],ne))}):Z.tokens&&(J=J.concat(X.walkTokens(Z.tokens,ne)))}},j=L(ie),V;!(V=j()).done;)B();return J},X.parseInline=function(ie,ne){if(typeof ie>"u"||ie===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof ie!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(ie)+", string expected");ne=D({},X.defaults,ne||{}),A(ne);try{var J=H.lexInline(ie,ne);return ne.walkTokens&&X.walkTokens(J,ne.walkTokens),Q.parseInline(J,ne)}catch(B){if(B.message+=`
Please report this to https://github.com/markedjs/marked.`,ne.silent)return"<p>An error occurred:</p><pre>"+i(B.message+"",!0)+"</pre>";throw B}},X.Parser=Q,X.parser=Q.parse,X.Renderer=K,X.TextRenderer=U,X.Lexer=H,X.lexer=H.lex,X.Tokenizer=x,X.Slugger=Y,X.parse=X;var G=X.options,P=X.setOptions,te=X.use,se=X.walkTokens,ue=X.parseInline,ge=X,pe=Q.parse,ce=H.lex;ae.Lexer=H,ae.Parser=Q,ae.Renderer=K,ae.Slugger=Y,ae.TextRenderer=U,ae.Tokenizer=x,ae.getDefaults=y,ae.lexer=ce,ae.marked=X,ae.options=G,ae.parse=ge,ae.parseInline=ue,ae.parser=pe,ae.setOptions=P,ae.use=te,ae.walkTokens=se,Object.defineProperty(ae,"__esModule",{value:!0})}),define(oe[128],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"})}),define(oe[222],re([1,0,128]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTransfers=void 0,e.DataTransfers={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:c.Mimes.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"}}),define(oe[443],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getKoreanAltChars=c;function c(s){const t=L(s);if(t&&t.length>0)return new Uint32Array(t)}let k=0;const E=new Uint32Array(10);function L(s){if(k=0,y(s,_,4352),k>0||(y(s,b,4449),k>0)||(y(s,p,4520),k>0)||(y(s,n,12593),k))return E.subarray(0,k);if(s>=44032&&s<=55203){const t=s-44032,i=t%588,o=Math.floor(t/588),g=Math.floor(i/28),u=i%28-1;if(o<_.length?y(o,_,0):4352+o-12593<n.length&&y(4352+o,n,12593),g<b.length?y(g,b,0):4449+g-12593<n.length&&y(4449+g-12593,n,12593),u>=0&&(u<p.length?y(u,p,0):4520+u-12593<n.length&&y(4520+u-12593,n,12593)),k>0)return E.subarray(0,k)}}function y(s,t,i){s>=i&&s<i+t.length&&f(t[s-i])}function f(s){s!==0&&(E[k++]=s&255,s>>8&&(E[k++]=s>>8&255),s>>16&&(E[k++]=s>>16&255))}const _=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),b=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),p=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),n=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108])}),define(oe[444],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayNavigator=void 0;class c{constructor(E,L=0,y=E.length,f=L-1){this.items=E,this.start=L,this.end=y,this.index=f}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}e.ArrayNavigator=c}),define(oe[445],re([1,0,444]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryNavigator=void 0;class k{constructor(L=[],y=10){this._initialize(L),this._limit=y,this._onChange()}getHistory(){return this._elements}add(L){this._history.delete(L),this._history.add(L),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(L){return this._history.has(L)}_onChange(){this._reduceToLimit();const L=this._elements;this._navigator=new c.ArrayNavigator(L,0,L.length,L.length)}_reduceToLimit(){const L=this._elements;L.length>this._limit&&this._initialize(L.slice(L.length-this._limit))}_currentPosition(){const L=this._navigator.current();return L?this._elements.indexOf(L):-1}_initialize(L){this._history=new Set;for(const y of L)this._history.add(y)}get _elements(){const L=[];return this._history.forEach(y=>L.push(y)),L}}e.HistoryNavigator=k}),define(oe[140],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SlidingWindowAverage=e.MovingAverage=void 0,e.clamp=c;function c(L,y,f){return Math.min(Math.max(L,y),f)}class k{constructor(){this._n=1,this._val=0}update(y){return this._val=this._val+(y-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}e.MovingAverage=k;class E{constructor(y){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(y),this._values.fill(0,0,y)}update(y){const f=this._values[this._index];return this._values[this._index]=y,this._index=(this._index+1)%this._values.length,this._sum-=f,this._sum+=y,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}e.SlidingWindowAverage=E}),define(oe[159],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DebugNameData=void 0,e.getDebugName=L,e.getFunctionName=s;class c{constructor(i,o,g){this.owner=i,this.debugNameSource=o,this.referenceFn=g}getDebugName(i){return L(i,this)}}e.DebugNameData=c;const k=new Map,E=new WeakMap;function L(t,i){const o=E.get(t);if(o)return o;const g=y(t,i);if(g){let u=k.get(g)??0;u++,k.set(g,u);const l=u===1?g:`${g}#${u}`;return E.set(t,l),l}}function y(t,i){const o=E.get(t);if(o)return o;const g=i.owner?p(i.owner)+".":"";let u;const l=i.debugNameSource;if(l!==void 0)if(typeof l=="function"){if(u=l(),u!==void 0)return g+u}else return g+l;const a=i.referenceFn;if(a!==void 0&&(u=s(a),u!==void 0))return g+u;if(i.owner!==void 0){const r=f(i.owner,t);if(r!==void 0)return g+r}}function f(t,i){for(const o in t)if(t[o]===i)return o}const _=new Map,b=new WeakMap;function p(t){const i=b.get(t);if(i)return i;const o=n(t);let g=_.get(o)??0;g++,_.set(o,g);const u=g===1?o:`${o}#${g}`;return b.set(t,u),u}function n(t){const i=t.constructor;return i?i.name:"Object"}function s(t){const i=t.toString(),g=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(i);return(g?g[1]:void 0)?.trim()}}),define(oe[160],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConsoleObservableLogger=void 0,e.setLogger=k,e.getLogger=E;let c;function k(o){c=o}function E(){return c}class L{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}textToConsoleArgs(g){return y([f(t("|  ",this.indentation)),g])}formatInfo(g){return g.hadValue?g.didChange?[f(" "),b(p(g.oldValue,70),{color:"red",strikeThrough:!0}),f(" "),b(p(g.newValue,60),{color:"green"})]:[f(" (unchanged)")]:[f(" "),b(p(g.newValue,60),{color:"green"}),f(" (initial)")]}handleObservableChanged(g,u){console.log(...this.textToConsoleArgs([_("observable value changed"),b(g.debugName,{color:"BlueViolet"}),...this.formatInfo(u)]))}formatChanges(g){if(g.size!==0)return b(" (changed deps: "+[...g].map(u=>u.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(g){const u=g.handleChange;this.changedObservablesSets.set(g,new Set),g.handleChange=(l,a)=>(this.changedObservablesSets.get(g).add(l),u.apply(g,[l,a]))}handleDerivedRecomputed(g,u){const l=this.changedObservablesSets.get(g);console.log(...this.textToConsoleArgs([_("derived recomputed"),b(g.debugName,{color:"BlueViolet"}),...this.formatInfo(u),this.formatChanges(l),{data:[{fn:g._debugNameData.referenceFn??g._computeFn}]}])),l.clear()}handleFromEventObservableTriggered(g,u){console.log(...this.textToConsoleArgs([_("observable from event triggered"),b(g.debugName,{color:"BlueViolet"}),...this.formatInfo(u),{data:[{fn:g._getValue}]}]))}handleAutorunCreated(g){const u=g.handleChange;this.changedObservablesSets.set(g,new Set),g.handleChange=(l,a)=>(this.changedObservablesSets.get(g).add(l),u.apply(g,[l,a]))}handleAutorunTriggered(g){const u=this.changedObservablesSets.get(g);console.log(...this.textToConsoleArgs([_("autorun"),b(g.debugName,{color:"BlueViolet"}),this.formatChanges(u),{data:[{fn:g._debugNameData.referenceFn??g._runFn}]}])),u.clear(),this.indentation++}handleAutorunFinished(g){this.indentation--}handleBeginTransaction(g){let u=g.getDebugName();u===void 0&&(u=""),console.log(...this.textToConsoleArgs([_("transaction"),b(u,{color:"BlueViolet"}),{data:[{fn:g._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}e.ConsoleObservableLogger=L;function y(o){const g=new Array,u=[];let l="";function a(d){if("length"in d)for(const m of d)m&&a(m);else"text"in d?(l+=`%c${d.text}`,g.push(d.style),d.data&&u.push(...d.data)):"data"in d&&u.push(...d.data)}a(o);const r=[l,...g];return r.push(...u),r}function f(o){return b(o,{color:"black"})}function _(o){return b(i(`${o}: `,10),{color:"black",bold:!0})}function b(o,g={color:"black"}){function u(a){return Object.entries(a).reduce((r,[d,m])=>`${r}${d}:${m};`,"")}const l={color:g.color};return g.strikeThrough&&(l["text-decoration"]="line-through"),g.bold&&(l["font-weight"]="bold"),{text:o,style:u(l)}}function p(o,g){switch(typeof o){case"number":return""+o;case"string":return o.length+2<=g?`"${o}"`:`"${o.substr(0,g-7)}"+...`;case"boolean":return o?"true":"false";case"undefined":return"undefined";case"object":return o===null?"null":Array.isArray(o)?n(o,g):s(o,g);case"symbol":return o.toString();case"function":return`[[Function${o.name?" "+o.name:""}]]`;default:return""+o}}function n(o,g){let u="[ ",l=!0;for(const a of o){if(l||(u+=", "),u.length-5>g){u+="...";break}l=!1,u+=`${p(a,g-u.length)}`}return u+=" ]",u}function s(o,g){let u="{ ",l=!0;for(const[a,r]of Object.entries(o)){if(l||(u+=", "),u.length-5>g){u+="...";break}l=!1,u+=`${a}: ${p(r,g-u.length)}`}return u+=" }",u}function t(o,g){let u="";for(let l=1;l<=g;l++)u+=o;return u}function i(o,g){for(;o.length<g;)o+=" ";return o}}),define(oe[298],re([1,0,89,2,159,160]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutorunObserver=void 0,e.autorun=y,e.autorunOpts=f,e.autorunHandleChanges=_,e.autorunWithStoreHandleChanges=b,e.autorunWithStore=p;function y(s){return new n(new E.DebugNameData(void 0,void 0,s),s,void 0,void 0)}function f(s,t){return new n(new E.DebugNameData(s.owner,s.debugName,s.debugReferenceFn??t),t,void 0,void 0)}function _(s,t){return new n(new E.DebugNameData(s.owner,s.debugName,s.debugReferenceFn??t),t,s.createEmptyChangeSummary,s.handleChange)}function b(s,t){const i=new k.DisposableStore,o=_({owner:s.owner,debugName:s.debugName,debugReferenceFn:s.debugReferenceFn??t,createEmptyChangeSummary:s.createEmptyChangeSummary,handleChange:s.handleChange},(g,u)=>{i.clear(),t(g,u,i)});return(0,k.toDisposable)(()=>{o.dispose(),i.dispose()})}function p(s){const t=new k.DisposableStore,i=f({owner:void 0,debugName:void 0,debugReferenceFn:s},o=>{t.clear(),s(o,t)});return(0,k.toDisposable)(()=>{i.dispose(),t.dispose()})}class n{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(t,i,o,g){this._debugNameData=t,this._runFn=i,this.createChangeSummary=o,this._handleChange=g,this.state=2,this.updateCount=0,this.disposed=!1,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=this.createChangeSummary?.(),(0,L.getLogger)()?.handleAutorunCreated(this),this._runIfNeeded(),(0,k.trackDisposable)(this)}dispose(){this.disposed=!0;for(const t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),(0,k.markAsDisposed)(this)}_runIfNeeded(){if(this.state===3)return;const t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t,this.state=3;const i=this.disposed;try{if(!i){(0,L.getLogger)()?.handleAutorunTriggered(this);const o=this.changeSummary;this.changeSummary=this.createChangeSummary?.(),this._runFn(this,o)}}finally{i||(0,L.getLogger)()?.handleAutorunFinished(this);for(const o of this.dependenciesToBeRemoved)o.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){if(this.updateCount===1)do{if(this.state===1){this.state=3;for(const t of this.dependencies)if(t.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3);this.updateCount--,(0,c.assertFn)(()=>this.updateCount>=0)}handlePossibleChange(t){this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(this.state=1)}handleChange(t,i){this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)&&(!this._handleChange||this._handleChange({changedObservable:t,change:i,didChange:g=>g===t},this.changeSummary))&&(this.state=2)}readObservable(t){if(this.disposed)return t.get();t.addObserver(this);const i=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),i}}e.AutorunObserver=n,function(s){s.Observer=n}(y||(e.autorun=y={}))}),define(oe[91],re([1,0,101,159,160]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DisposableObservableValue=e.ObservableValue=e.TransactionImpl=e.BaseObservable=e.ConvenientObservable=void 0,e._setRecomputeInitiallyAndOnChange=y,e._setKeepObserved=_,e._setDerivedOpts=p,e.transaction=t,e.globalTransaction=o,e.asyncTransaction=g,e.subtransaction=u,e.observableValue=a,e.disposableObservableValue=d;let L;function y(h){L=h}let f;function _(h){f=h}let b;function p(h){b=h}class n{get TChange(){return null}reportChanges(){this.get()}read(v){return v?v.readObservable(this):this.get()}map(v,C){const w=C===void 0?void 0:v,S=C===void 0?v:C;return b({owner:w,debugName:()=>{const D=(0,k.getFunctionName)(S);if(D!==void 0)return D;const T=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(S.toString());if(T)return`${this.debugName}.${T[2]}`;if(!w)return`${this.debugName} (mapped)`},debugReferenceFn:S},D=>S(this.read(D),D))}flatten(){return b({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},v=>this.read(v).read(v))}recomputeInitiallyAndOnChange(v,C){return v.add(L(this,C)),this}keepObserved(v){return v.add(f(this)),this}}e.ConvenientObservable=n;class s extends n{constructor(){super(...arguments),this.observers=new Set}addObserver(v){const C=this.observers.size;this.observers.add(v),C===0&&this.onFirstObserverAdded()}removeObserver(v){this.observers.delete(v)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}}e.BaseObservable=s;function t(h,v){const C=new l(h,v);try{h(C)}finally{C.finish()}}let i;function o(h){if(i)h(i);else{const v=new l(h,void 0);i=v;try{h(v)}finally{v.finish(),i=void 0}}}async function g(h,v){const C=new l(h,v);try{await h(C)}finally{C.finish()}}function u(h,v,C){h?v(h):t(v,C)}class l{constructor(v,C){this._fn=v,this._getDebugName=C,this.updatingObservers=[],(0,E.getLogger)()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():(0,k.getFunctionName)(this._fn)}updateObserver(v,C){this.updatingObservers.push({observer:v,observable:C}),v.beginUpdate(C)}finish(){const v=this.updatingObservers;for(let C=0;C<v.length;C++){const{observer:w,observable:S}=v[C];w.endUpdate(S)}this.updatingObservers=null,(0,E.getLogger)()?.handleEndTransaction()}}e.TransactionImpl=l;function a(h,v){let C;return typeof h=="string"?C=new k.DebugNameData(void 0,h,void 0):C=new k.DebugNameData(h,void 0,void 0),new r(C,v,c.strictEquals)}class r extends s{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(v,C,w){super(),this._debugNameData=v,this._equalityComparator=w,this._value=C}get(){return this._value}set(v,C,w){if(w===void 0&&this._equalityComparator(this._value,v))return;let S;C||(C=S=new l(()=>{},()=>`Setting ${this.debugName}`));try{const D=this._value;this._setValue(v),(0,E.getLogger)()?.handleObservableChanged(this,{oldValue:D,newValue:v,change:w,didChange:!0,hadValue:!0});for(const I of this.observers)C.updateObserver(I,this),I.handleChange(this,w)}finally{S&&S.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(v){this._value=v}}e.ObservableValue=r;function d(h,v){let C;return typeof h=="string"?C=new k.DebugNameData(void 0,h,void 0):C=new k.DebugNameData(h,void 0,void 0),new m(C,v,c.strictEquals)}class m extends r{_setValue(v){this._value!==v&&(this._value&&this._value.dispose(),this._value=v)}dispose(){this._value?.dispose()}}e.DisposableObservableValue=m}),define(oe[65],re([1,0,89,101,2,91,159,160]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DerivedWithSetter=e.Derived=void 0,e.derived=_,e.derivedWithSetter=b,e.derivedOpts=p,e.derivedHandleChanges=n,e.derivedWithStore=s,e.derivedDisposable=t;function _(g,u){return u!==void 0?new i(new y.DebugNameData(g,void 0,u),u,void 0,void 0,void 0,k.strictEquals):new i(new y.DebugNameData(void 0,void 0,g),g,void 0,void 0,void 0,k.strictEquals)}function b(g,u,l){return new o(new y.DebugNameData(g,void 0,u),u,void 0,void 0,void 0,k.strictEquals,l)}function p(g,u){return new i(new y.DebugNameData(g.owner,g.debugName,g.debugReferenceFn),u,void 0,void 0,g.onLastObserverRemoved,g.equalsFn??k.strictEquals)}(0,L._setDerivedOpts)(p);function n(g,u){return new i(new y.DebugNameData(g.owner,g.debugName,void 0),u,g.createEmptyChangeSummary,g.handleChange,void 0,g.equalityComparer??k.strictEquals)}function s(g,u){let l,a;u===void 0?(l=g,a=void 0):(a=g,l=u);const r=new E.DisposableStore;return new i(new y.DebugNameData(a,void 0,l),d=>(r.clear(),l(d,r)),void 0,void 0,()=>r.dispose(),k.strictEquals)}function t(g,u){let l,a;u===void 0?(l=g,a=void 0):(a=g,l=u);let r;return new i(new y.DebugNameData(a,void 0,l),d=>{r?r.clear():r=new E.DisposableStore;const m=l(d);return m&&r.add(m),m},void 0,void 0,()=>{r&&(r.dispose(),r=void 0)},k.strictEquals)}class i extends L.BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(u,l,a,r,d=void 0,m){super(),this._debugNameData=u,this._computeFn=l,this.createChangeSummary=a,this._handleChange=r,this._handleLastObserverRemoved=d,this._equalityComparator=m,this.state=0,this.value=void 0,this.updateCount=0,this.dependencies=new Set,this.dependenciesToBeRemoved=new Set,this.changeSummary=void 0,this.changeSummary=this.createChangeSummary?.(),(0,f.getLogger)()?.handleDerivedCreated(this)}onLastObserverRemoved(){this.state=0,this.value=void 0;for(const u of this.dependencies)u.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){const u=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),u}else{do{if(this.state===1){for(const u of this.dependencies)if(u.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;const u=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=u;const l=this.state!==0,a=this.value;this.state=3;const r=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,r)}finally{for(const m of this.dependenciesToBeRemoved)m.removeObserver(this);this.dependenciesToBeRemoved.clear()}const d=l&&!this._equalityComparator(a,this.value);if((0,f.getLogger)()?.handleDerivedRecomputed(this,{oldValue:a,newValue:this.value,change:void 0,didChange:d,hadValue:l}),d)for(const m of this.observers)m.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(u){this.updateCount++;const l=this.updateCount===1;if(this.state===3&&(this.state=1,!l))for(const a of this.observers)a.handlePossibleChange(this);if(l)for(const a of this.observers)a.beginUpdate(this)}endUpdate(u){if(this.updateCount--,this.updateCount===0){const l=[...this.observers];for(const a of l)a.endUpdate(this)}(0,c.assertFn)(()=>this.updateCount>=0)}handlePossibleChange(u){if(this.state===3&&this.dependencies.has(u)&&!this.dependenciesToBeRemoved.has(u)){this.state=1;for(const l of this.observers)l.handlePossibleChange(this)}}handleChange(u,l){if(this.dependencies.has(u)&&!this.dependenciesToBeRemoved.has(u)){const a=this._handleChange?this._handleChange({changedObservable:u,change:l,didChange:d=>d===u},this.changeSummary):!0,r=this.state===3;if(a&&(this.state===1||r)&&(this.state=2,r))for(const d of this.observers)d.handlePossibleChange(this)}}readObservable(u){u.addObserver(this);const l=u.get();return this.dependencies.add(u),this.dependenciesToBeRemoved.delete(u),l}addObserver(u){const l=!this.observers.has(u)&&this.updateCount>0;super.addObserver(u),l&&u.beginUpdate(this)}removeObserver(u){const l=this.observers.has(u)&&this.updateCount>0;super.removeObserver(u),l&&u.endUpdate(this)}}e.Derived=i;class o extends i{constructor(u,l,a,r,d=void 0,m,h){super(u,l,a,r,d,m),this.set=h}}e.DerivedWithSetter=o}),define(oe[446],re([1,0,91]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LazyObservableValue=void 0;class k extends c.BaseObservable{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(L,y,f){super(),this._debugNameData=L,this._equalityComparator=f,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=y}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const L of this.observers)for(const y of this._deltas)L.handleChange(this,y);this._deltas.length=0}else for(const L of this.observers)L.handleChange(this,void 0)}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const L of this.observers)L.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const L=[...this.observers];for(const y of L)y.endUpdate(this)}}addObserver(L){const y=!this.observers.has(L)&&this._updateCounter>0;super.addObserver(L),y&&L.beginUpdate(this)}removeObserver(L){const y=this.observers.has(L)&&this._updateCounter>0;super.removeObserver(L),y&&L.endUpdate(this)}set(L,y,f){if(f===void 0&&this._equalityComparator(this._value,L))return;let _;y||(y=_=new c.TransactionImpl(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(L),f!==void 0&&this._deltas.push(f),y.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(b,p)=>{},handlePossibleChange:b=>{}},this),this._updateCounter>1)for(const b of this.observers)b.handlePossibleChange(this)}finally{_&&_.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(L){this._value=L}}e.LazyObservableValue=k}),define(oe[447],re([1,0,101,91,159,446]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observableValueOpts=y;function y(f,_){return f.lazy?new L.LazyObservableValue(new E.DebugNameData(f.owner,f.debugName,void 0),_,f.equalsFn??c.strictEquals):new k.ObservableValue(new E.DebugNameData(f.owner,f.debugName,void 0),_,f.equalsFn??c.strictEquals)}}),define(oe[448],re([1,0,298,91,8]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromiseResult=e.ObservablePromise=void 0,e.waitForState=f;class L{static fromFn(b){return new L(b())}constructor(b){this._value=(0,k.observableValue)(this,void 0),this.promiseResult=this._value,this.promise=b.then(p=>((0,k.transaction)(n=>{this._value.set(new y(p,void 0),n)}),p),p=>{throw(0,k.transaction)(n=>{this._value.set(new y(void 0,p),n)}),p})}}e.ObservablePromise=L;class y{constructor(b,p){this.data=b,this.error=p}}e.PromiseResult=y;function f(_,b,p,n){return b||(b=s=>s!=null),new Promise((s,t)=>{let i=!0,o=!1;const g=_.map(l=>({isFinished:b(l),error:p?p(l):!1,state:l})),u=(0,c.autorun)(l=>{const{isFinished:a,error:r,state:d}=g.read(l);(a||r)&&(i?o=!0:u.dispose(),r?t(r===!0?d:r):s(d))});if(n){const l=n.onCancellationRequested(()=>{u.dispose(),l.dispose(),t(new E.CancellationError)});if(n.isCancellationRequested){u.dispose(),l.dispose(),t(new E.CancellationError);return}}i=!1,o&&u.dispose()})}}),define(oe[16],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAndroid=e.isEdge=e.isSafari=e.isFirefox=e.isChrome=e.OS=e.setTimeout0=e.setTimeout0IsFaster=e.language=e.userAgent=e.isMobile=e.isIOS=e.webWorkerOrigin=e.isWebWorker=e.isWeb=e.isNative=e.isLinux=e.isMacintosh=e.isWindows=e.LANGUAGE_DEFAULT=void 0,e.isLittleEndian=v,e.LANGUAGE_DEFAULT="en";let c=!1,k=!1,E=!1,L=!1,y=!1,f=!1,_=!1,b=!1,p=!1,n=!1,s,t=e.LANGUAGE_DEFAULT,i=e.LANGUAGE_DEFAULT,o,g;const u=globalThis;let l;typeof u.vscode<"u"&&typeof u.vscode.process<"u"?l=u.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(l=process);const a=typeof l?.versions?.electron=="string",r=a&&l?.type==="renderer";if(typeof l=="object"){c=l.platform==="win32",k=l.platform==="darwin",E=l.platform==="linux",L=E&&!!l.env.SNAP&&!!l.env.SNAP_REVISION,_=a,p=!!l.env.CI||!!l.env.BUILD_ARTIFACTSTAGINGDIRECTORY,s=e.LANGUAGE_DEFAULT,t=e.LANGUAGE_DEFAULT;const C=l.env.VSCODE_NLS_CONFIG;if(C)try{const w=JSON.parse(C);s=w.userLocale,i=w.osLocale,t=w.resolvedLanguage||e.LANGUAGE_DEFAULT,o=w.languagePack?.translationsConfigFile}catch{}y=!0}else typeof navigator=="object"&&!r?(g=navigator.userAgent,c=g.indexOf("Windows")>=0,k=g.indexOf("Macintosh")>=0,b=(g.indexOf("Macintosh")>=0||g.indexOf("iPad")>=0||g.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,E=g.indexOf("Linux")>=0,n=g?.indexOf("Mobi")>=0,f=!0,t=globalThis._VSCODE_NLS_LANGUAGE||e.LANGUAGE_DEFAULT,s=navigator.language.toLowerCase(),i=s):console.error("Unable to resolve platform.");let d=0;k?d=1:c?d=3:E&&(d=2),e.isWindows=c,e.isMacintosh=k,e.isLinux=E,e.isNative=y,e.isWeb=f,e.isWebWorker=f&&typeof u.importScripts=="function",e.webWorkerOrigin=e.isWebWorker?u.origin:void 0,e.isIOS=b,e.isMobile=n,e.userAgent=g,e.language=t,e.setTimeout0IsFaster=typeof u.postMessage=="function"&&!u.importScripts,e.setTimeout0=(()=>{if(e.setTimeout0IsFaster){const C=[];u.addEventListener("message",S=>{if(S.data&&S.data.vscodeScheduleAsyncWork)for(let D=0,I=C.length;D<I;D++){const T=C[D];if(T.id===S.data.vscodeScheduleAsyncWork){C.splice(D,1),T.callback();return}}});let w=0;return S=>{const D=++w;C.push({id:D,callback:S}),u.postMessage({vscodeScheduleAsyncWork:D},"*")}}return C=>setTimeout(C)})(),e.OS=k||b?2:c?1:3;let m=!0,h=!1;function v(){if(!h){h=!0;const C=new Uint8Array(2);C[0]=1,C[1]=2,m=new Uint16Array(C.buffer)[0]===513}return m}e.isChrome=!!(e.userAgent&&e.userAgent.indexOf("Chrome")>=0),e.isFirefox=!!(e.userAgent&&e.userAgent.indexOf("Firefox")>=0),e.isSafari=!!(!e.isChrome&&e.userAgent&&e.userAgent.indexOf("Safari")>=0),e.isEdge=!!(e.userAgent&&e.userAgent.indexOf("Edg/")>=0),e.isAndroid=!!(e.userAgent&&e.userAgent.indexOf("Android")>=0)}),define(oe[223],re([1,0,64,52,16]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserFeatures=void 0,e.BrowserFeatures={clipboard:{writeText:E.isNative||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:E.isNative||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:E.isNative||c.isStandalone()?0:navigator.keyboard||c.isSafari?1:2,touch:"ontouchstart"in k.mainWindow||navigator.maxTouchPoints>0,pointerEvents:k.mainWindow.PointerEvent&&("ontouchstart"in k.mainWindow||navigator.maxTouchPoints>0)}}),define(oe[299],re([1,0,16]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FONT_FAMILY=void 0,e.DEFAULT_FONT_FAMILY=c.isWindows?'"Segoe WPC", "Segoe UI", sans-serif':c.isMacintosh?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif'}),define(oe[46],re([1,0,64,72,139,16]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardKeyboardEvent=void 0;function y(s){if(s.charCode){const i=String.fromCharCode(s.charCode).toUpperCase();return k.KeyCodeUtils.fromString(i)}const t=s.keyCode;if(t===3)return 7;if(c.isFirefox)switch(t){case 59:return 85;case 60:if(L.isLinux)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(L.isMacintosh)return 57;break}else if(c.isWebKit){if(L.isMacintosh&&t===93)return 57;if(!L.isMacintosh&&t===92)return 57}return k.EVENT_KEY_CODE_MAP[t]||0}const f=L.isMacintosh?256:2048,_=512,b=1024,p=L.isMacintosh?2048:256;class n{constructor(t){this._standardKeyboardEventBrand=!0;const i=t;this.browserEvent=i,this.target=i.target,this.ctrlKey=i.ctrlKey,this.shiftKey=i.shiftKey,this.altKey=i.altKey,this.metaKey=i.metaKey,this.altGraphKey=i.getModifierState?.("AltGraph"),this.keyCode=y(i),this.code=i.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(t){return this._asKeybinding===t}_computeKeybinding(){let t=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode);let i=0;return this.ctrlKey&&(i|=f),this.altKey&&(i|=_),this.shiftKey&&(i|=b),this.metaKey&&(i|=p),i|=t,i}_computeKeyCodeChord(){let t=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(t=this.keyCode),new E.KeyCodeChord(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,t)}}e.StandardKeyboardEvent=n}),define(oe[74],re([1,0,64,436,16]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandardWheelEvent=e.StandardMouseEvent=void 0;class L{constructor(_,b){this.timestamp=Date.now(),this.browserEvent=b,this.leftButton=b.button===0,this.middleButton=b.button===1,this.rightButton=b.button===2,this.buttons=b.buttons,this.target=b.target,this.detail=b.detail||1,b.type==="dblclick"&&(this.detail=2),this.ctrlKey=b.ctrlKey,this.shiftKey=b.shiftKey,this.altKey=b.altKey,this.metaKey=b.metaKey,typeof b.pageX=="number"?(this.posx=b.pageX,this.posy=b.pageY):(this.posx=b.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=b.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const p=k.IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(_,b.view);this.posx-=p.left,this.posy-=p.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}e.StandardMouseEvent=L;class y{constructor(_,b=0,p=0){this.browserEvent=_||null,this.target=_?_.target||_.targetNode||_.srcElement:null,this.deltaY=p,this.deltaX=b;let n=!1;if(c.isChrome){const s=navigator.userAgent.match(/Chrome\/(\d+)/);n=(s?parseInt(s[1]):123)<=122}if(_){const s=_,t=_,i=_.view?.devicePixelRatio||1;if(typeof s.wheelDeltaY<"u")n?this.deltaY=s.wheelDeltaY/(120*i):this.deltaY=s.wheelDeltaY/120;else if(typeof t.VERTICAL_AXIS<"u"&&t.axis===t.VERTICAL_AXIS)this.deltaY=-t.detail/3;else if(_.type==="wheel"){const o=_;o.deltaMode===o.DOM_DELTA_LINE?c.isFirefox&&!E.isMacintosh?this.deltaY=-_.deltaY/3:this.deltaY=-_.deltaY:this.deltaY=-_.deltaY/40}if(typeof s.wheelDeltaX<"u")c.isSafari&&E.isWindows?this.deltaX=-(s.wheelDeltaX/120):n?this.deltaX=s.wheelDeltaX/(120*i):this.deltaX=s.wheelDeltaX/120;else if(typeof t.HORIZONTAL_AXIS<"u"&&t.axis===t.HORIZONTAL_AXIS)this.deltaX=-_.detail/3;else if(_.type==="wheel"){const o=_;o.deltaMode===o.DOM_DELTA_LINE?c.isFirefox&&!E.isMacintosh?this.deltaX=-_.deltaX/3:this.deltaX=-_.deltaX:this.deltaX=-_.deltaX/40}this.deltaY===0&&this.deltaX===0&&_.wheelDelta&&(n?this.deltaY=_.wheelDelta/(120*i):this.deltaY=_.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}e.StandardWheelEvent=y}),define(oe[300],re([1,0,16]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.platform=e.env=e.cwd=void 0;let k;const E=globalThis.vscode;if(typeof E<"u"&&typeof E.process<"u"){const L=E.process;k={get platform(){return L.platform},get arch(){return L.arch},get env(){return L.env},cwd(){return L.cwd()}}}else typeof process<"u"?k={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:k={get platform(){return c.isWindows?"win32":c.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};e.cwd=k.cwd,e.env=k.env,e.platform=k.platform}),define(oe[301],re([1,0,300]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isHotReloadEnabled=k,e.registerHotReloadHandler=E;function k(){return c.env&&!!c.env.VSCODE_DEV}function E(f){if(k()){const _=L();return _.add(f),{dispose(){_.delete(f)}}}else return{dispose(){}}}function L(){y||(y=new Set);const f=globalThis;return f.$hotReload_applyNewExports||(f.$hotReload_applyNewExports=_=>{const b={config:{mode:void 0},..._},p=[];for(const n of y){const s=n(b);s&&p.push(s)}if(p.length>0)return n=>{let s=!1;for(const t of p)t(n)&&(s=!0);return s}}),y}let y;k()&&E(({oldExports:f,newSrc:_,config:b})=>{if(b.mode==="patch-prototype")return p=>{for(const n in p){const s=p[n];if(console.log(`[hot-reload] Patching prototype methods of '${n}'`,{exportedItem:s}),typeof s=="function"&&s.prototype){const t=f[n];if(t){for(const i of Object.getOwnPropertyNames(s.prototype)){const o=Object.getOwnPropertyDescriptor(s.prototype,i),g=Object.getOwnPropertyDescriptor(t.prototype,i);o?.value?.toString()!==g?.value?.toString()&&console.log(`[hot-reload] Patching prototype method '${n}.${i}'`),Object.defineProperty(t.prototype,i,o)}p[n]=t}}}return!0}})}),define(oe[99],re([1,0,300]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sep=e.extname=e.basename=e.dirname=e.relative=e.resolve=e.normalize=e.posix=e.win32=void 0;const k=65,E=97,L=90,y=122,f=46,_=47,b=92,p=58,n=63;class s extends Error{constructor(v,C,w){let S;typeof C=="string"&&C.indexOf("not ")===0?(S="must not be",C=C.replace(/^not /,"")):S="must be";const D=v.indexOf(".")!==-1?"property":"argument";let I=`The "${v}" ${D} ${S} of type ${C}`;I+=`. Received type ${typeof w}`,super(I),this.code="ERR_INVALID_ARG_TYPE"}}function t(h,v){if(h===null||typeof h!="object")throw new s(v,"Object",h)}function i(h,v){if(typeof h!="string")throw new s(v,"string",h)}const o=c.platform==="win32";function g(h){return h===_||h===b}function u(h){return h===_}function l(h){return h>=k&&h<=L||h>=E&&h<=y}function a(h,v,C,w){let S="",D=0,I=-1,T=0,M=0;for(let A=0;A<=h.length;++A){if(A<h.length)M=h.charCodeAt(A);else{if(w(M))break;M=_}if(w(M)){if(!(I===A-1||T===1))if(T===2){if(S.length<2||D!==2||S.charCodeAt(S.length-1)!==f||S.charCodeAt(S.length-2)!==f){if(S.length>2){const R=S.lastIndexOf(C);R===-1?(S="",D=0):(S=S.slice(0,R),D=S.length-1-S.lastIndexOf(C)),I=A,T=0;continue}else if(S.length!==0){S="",D=0,I=A,T=0;continue}}v&&(S+=S.length>0?`${C}..`:"..",D=2)}else S.length>0?S+=`${C}${h.slice(I+1,A)}`:S=h.slice(I+1,A),D=A-I-1;I=A,T=0}else M===f&&T!==-1?++T:T=-1}return S}function r(h){return h?`${h[0]==="."?"":"."}${h}`:""}function d(h,v){t(v,"pathObject");const C=v.dir||v.root,w=v.base||`${v.name||""}${r(v.ext)}`;return C?C===v.root?`${C}${w}`:`${C}${h}${w}`:w}e.win32={resolve(...h){let v="",C="",w=!1;for(let S=h.length-1;S>=-1;S--){let D;if(S>=0){if(D=h[S],i(D,`paths[${S}]`),D.length===0)continue}else v.length===0?D=c.cwd():(D=c.env[`=${v}`]||c.cwd(),(D===void 0||D.slice(0,2).toLowerCase()!==v.toLowerCase()&&D.charCodeAt(2)===b)&&(D=`${v}\\`));const I=D.length;let T=0,M="",A=!1;const R=D.charCodeAt(0);if(I===1)g(R)&&(T=1,A=!0);else if(g(R))if(A=!0,g(D.charCodeAt(1))){let N=2,O=N;for(;N<I&&!g(D.charCodeAt(N));)N++;if(N<I&&N!==O){const x=D.slice(O,N);for(O=N;N<I&&g(D.charCodeAt(N));)N++;if(N<I&&N!==O){for(O=N;N<I&&!g(D.charCodeAt(N));)N++;(N===I||N!==O)&&(M=`\\\\${x}\\${D.slice(O,N)}`,T=N)}}}else T=1;else l(R)&&D.charCodeAt(1)===p&&(M=D.slice(0,2),T=2,I>2&&g(D.charCodeAt(2))&&(A=!0,T=3));if(M.length>0)if(v.length>0){if(M.toLowerCase()!==v.toLowerCase())continue}else v=M;if(w){if(v.length>0)break}else if(C=`${D.slice(T)}\\${C}`,w=A,A&&v.length>0)break}return C=a(C,!w,"\\",g),w?`${v}\\${C}`:`${v}${C}`||"."},normalize(h){i(h,"path");const v=h.length;if(v===0)return".";let C=0,w,S=!1;const D=h.charCodeAt(0);if(v===1)return u(D)?"\\":h;if(g(D))if(S=!0,g(h.charCodeAt(1))){let T=2,M=T;for(;T<v&&!g(h.charCodeAt(T));)T++;if(T<v&&T!==M){const A=h.slice(M,T);for(M=T;T<v&&g(h.charCodeAt(T));)T++;if(T<v&&T!==M){for(M=T;T<v&&!g(h.charCodeAt(T));)T++;if(T===v)return`\\\\${A}\\${h.slice(M)}\\`;T!==M&&(w=`\\\\${A}\\${h.slice(M,T)}`,C=T)}}}else C=1;else l(D)&&h.charCodeAt(1)===p&&(w=h.slice(0,2),C=2,v>2&&g(h.charCodeAt(2))&&(S=!0,C=3));let I=C<v?a(h.slice(C),!S,"\\",g):"";return I.length===0&&!S&&(I="."),I.length>0&&g(h.charCodeAt(v-1))&&(I+="\\"),w===void 0?S?`\\${I}`:I:S?`${w}\\${I}`:`${w}${I}`},isAbsolute(h){i(h,"path");const v=h.length;if(v===0)return!1;const C=h.charCodeAt(0);return g(C)||v>2&&l(C)&&h.charCodeAt(1)===p&&g(h.charCodeAt(2))},join(...h){if(h.length===0)return".";let v,C;for(let D=0;D<h.length;++D){const I=h[D];i(I,"path"),I.length>0&&(v===void 0?v=C=I:v+=`\\${I}`)}if(v===void 0)return".";let w=!0,S=0;if(typeof C=="string"&&g(C.charCodeAt(0))){++S;const D=C.length;D>1&&g(C.charCodeAt(1))&&(++S,D>2&&(g(C.charCodeAt(2))?++S:w=!1))}if(w){for(;S<v.length&&g(v.charCodeAt(S));)S++;S>=2&&(v=`\\${v.slice(S)}`)}return e.win32.normalize(v)},relative(h,v){if(i(h,"from"),i(v,"to"),h===v)return"";const C=e.win32.resolve(h),w=e.win32.resolve(v);if(C===w||(h=C.toLowerCase(),v=w.toLowerCase(),h===v))return"";let S=0;for(;S<h.length&&h.charCodeAt(S)===b;)S++;let D=h.length;for(;D-1>S&&h.charCodeAt(D-1)===b;)D--;const I=D-S;let T=0;for(;T<v.length&&v.charCodeAt(T)===b;)T++;let M=v.length;for(;M-1>T&&v.charCodeAt(M-1)===b;)M--;const A=M-T,R=I<A?I:A;let N=-1,O=0;for(;O<R;O++){const F=h.charCodeAt(S+O);if(F!==v.charCodeAt(T+O))break;F===b&&(N=O)}if(O!==R){if(N===-1)return w}else{if(A>R){if(v.charCodeAt(T+O)===b)return w.slice(T+O+1);if(O===2)return w.slice(T+O)}I>R&&(h.charCodeAt(S+O)===b?N=O:O===2&&(N=3)),N===-1&&(N=0)}let x="";for(O=S+N+1;O<=D;++O)(O===D||h.charCodeAt(O)===b)&&(x+=x.length===0?"..":"\\..");return T+=N,x.length>0?`${x}${w.slice(T,M)}`:(w.charCodeAt(T)===b&&++T,w.slice(T,M))},toNamespacedPath(h){if(typeof h!="string"||h.length===0)return h;const v=e.win32.resolve(h);if(v.length<=2)return h;if(v.charCodeAt(0)===b){if(v.charCodeAt(1)===b){const C=v.charCodeAt(2);if(C!==n&&C!==f)return`\\\\?\\UNC\\${v.slice(2)}`}}else if(l(v.charCodeAt(0))&&v.charCodeAt(1)===p&&v.charCodeAt(2)===b)return`\\\\?\\${v}`;return h},dirname(h){i(h,"path");const v=h.length;if(v===0)return".";let C=-1,w=0;const S=h.charCodeAt(0);if(v===1)return g(S)?h:".";if(g(S)){if(C=w=1,g(h.charCodeAt(1))){let T=2,M=T;for(;T<v&&!g(h.charCodeAt(T));)T++;if(T<v&&T!==M){for(M=T;T<v&&g(h.charCodeAt(T));)T++;if(T<v&&T!==M){for(M=T;T<v&&!g(h.charCodeAt(T));)T++;if(T===v)return h;T!==M&&(C=w=T+1)}}}}else l(S)&&h.charCodeAt(1)===p&&(C=v>2&&g(h.charCodeAt(2))?3:2,w=C);let D=-1,I=!0;for(let T=v-1;T>=w;--T)if(g(h.charCodeAt(T))){if(!I){D=T;break}}else I=!1;if(D===-1){if(C===-1)return".";D=C}return h.slice(0,D)},basename(h,v){v!==void 0&&i(v,"suffix"),i(h,"path");let C=0,w=-1,S=!0,D;if(h.length>=2&&l(h.charCodeAt(0))&&h.charCodeAt(1)===p&&(C=2),v!==void 0&&v.length>0&&v.length<=h.length){if(v===h)return"";let I=v.length-1,T=-1;for(D=h.length-1;D>=C;--D){const M=h.charCodeAt(D);if(g(M)){if(!S){C=D+1;break}}else T===-1&&(S=!1,T=D+1),I>=0&&(M===v.charCodeAt(I)?--I===-1&&(w=D):(I=-1,w=T))}return C===w?w=T:w===-1&&(w=h.length),h.slice(C,w)}for(D=h.length-1;D>=C;--D)if(g(h.charCodeAt(D))){if(!S){C=D+1;break}}else w===-1&&(S=!1,w=D+1);return w===-1?"":h.slice(C,w)},extname(h){i(h,"path");let v=0,C=-1,w=0,S=-1,D=!0,I=0;h.length>=2&&h.charCodeAt(1)===p&&l(h.charCodeAt(0))&&(v=w=2);for(let T=h.length-1;T>=v;--T){const M=h.charCodeAt(T);if(g(M)){if(!D){w=T+1;break}continue}S===-1&&(D=!1,S=T+1),M===f?C===-1?C=T:I!==1&&(I=1):C!==-1&&(I=-1)}return C===-1||S===-1||I===0||I===1&&C===S-1&&C===w+1?"":h.slice(C,S)},format:d.bind(null,"\\"),parse(h){i(h,"path");const v={root:"",dir:"",base:"",ext:"",name:""};if(h.length===0)return v;const C=h.length;let w=0,S=h.charCodeAt(0);if(C===1)return g(S)?(v.root=v.dir=h,v):(v.base=v.name=h,v);if(g(S)){if(w=1,g(h.charCodeAt(1))){let N=2,O=N;for(;N<C&&!g(h.charCodeAt(N));)N++;if(N<C&&N!==O){for(O=N;N<C&&g(h.charCodeAt(N));)N++;if(N<C&&N!==O){for(O=N;N<C&&!g(h.charCodeAt(N));)N++;N===C?w=N:N!==O&&(w=N+1)}}}}else if(l(S)&&h.charCodeAt(1)===p){if(C<=2)return v.root=v.dir=h,v;if(w=2,g(h.charCodeAt(2))){if(C===3)return v.root=v.dir=h,v;w=3}}w>0&&(v.root=h.slice(0,w));let D=-1,I=w,T=-1,M=!0,A=h.length-1,R=0;for(;A>=w;--A){if(S=h.charCodeAt(A),g(S)){if(!M){I=A+1;break}continue}T===-1&&(M=!1,T=A+1),S===f?D===-1?D=A:R!==1&&(R=1):D!==-1&&(R=-1)}return T!==-1&&(D===-1||R===0||R===1&&D===T-1&&D===I+1?v.base=v.name=h.slice(I,T):(v.name=h.slice(I,D),v.base=h.slice(I,T),v.ext=h.slice(D,T))),I>0&&I!==w?v.dir=h.slice(0,I-1):v.dir=v.root,v},sep:"\\",delimiter:";",win32:null,posix:null};const m=(()=>{if(o){const h=/\\/g;return()=>{const v=c.cwd().replace(h,"/");return v.slice(v.indexOf("/"))}}return()=>c.cwd()})();e.posix={resolve(...h){let v="",C=!1;for(let w=h.length-1;w>=-1&&!C;w--){const S=w>=0?h[w]:m();i(S,`paths[${w}]`),S.length!==0&&(v=`${S}/${v}`,C=S.charCodeAt(0)===_)}return v=a(v,!C,"/",u),C?`/${v}`:v.length>0?v:"."},normalize(h){if(i(h,"path"),h.length===0)return".";const v=h.charCodeAt(0)===_,C=h.charCodeAt(h.length-1)===_;return h=a(h,!v,"/",u),h.length===0?v?"/":C?"./":".":(C&&(h+="/"),v?`/${h}`:h)},isAbsolute(h){return i(h,"path"),h.length>0&&h.charCodeAt(0)===_},join(...h){if(h.length===0)return".";let v;for(let C=0;C<h.length;++C){const w=h[C];i(w,"path"),w.length>0&&(v===void 0?v=w:v+=`/${w}`)}return v===void 0?".":e.posix.normalize(v)},relative(h,v){if(i(h,"from"),i(v,"to"),h===v||(h=e.posix.resolve(h),v=e.posix.resolve(v),h===v))return"";const C=1,w=h.length,S=w-C,D=1,I=v.length-D,T=S<I?S:I;let M=-1,A=0;for(;A<T;A++){const N=h.charCodeAt(C+A);if(N!==v.charCodeAt(D+A))break;N===_&&(M=A)}if(A===T)if(I>T){if(v.charCodeAt(D+A)===_)return v.slice(D+A+1);if(A===0)return v.slice(D+A)}else S>T&&(h.charCodeAt(C+A)===_?M=A:A===0&&(M=0));let R="";for(A=C+M+1;A<=w;++A)(A===w||h.charCodeAt(A)===_)&&(R+=R.length===0?"..":"/..");return`${R}${v.slice(D+M)}`},toNamespacedPath(h){return h},dirname(h){if(i(h,"path"),h.length===0)return".";const v=h.charCodeAt(0)===_;let C=-1,w=!0;for(let S=h.length-1;S>=1;--S)if(h.charCodeAt(S)===_){if(!w){C=S;break}}else w=!1;return C===-1?v?"/":".":v&&C===1?"//":h.slice(0,C)},basename(h,v){v!==void 0&&i(v,"ext"),i(h,"path");let C=0,w=-1,S=!0,D;if(v!==void 0&&v.length>0&&v.length<=h.length){if(v===h)return"";let I=v.length-1,T=-1;for(D=h.length-1;D>=0;--D){const M=h.charCodeAt(D);if(M===_){if(!S){C=D+1;break}}else T===-1&&(S=!1,T=D+1),I>=0&&(M===v.charCodeAt(I)?--I===-1&&(w=D):(I=-1,w=T))}return C===w?w=T:w===-1&&(w=h.length),h.slice(C,w)}for(D=h.length-1;D>=0;--D)if(h.charCodeAt(D)===_){if(!S){C=D+1;break}}else w===-1&&(S=!1,w=D+1);return w===-1?"":h.slice(C,w)},extname(h){i(h,"path");let v=-1,C=0,w=-1,S=!0,D=0;for(let I=h.length-1;I>=0;--I){const T=h.charCodeAt(I);if(T===_){if(!S){C=I+1;break}continue}w===-1&&(S=!1,w=I+1),T===f?v===-1?v=I:D!==1&&(D=1):v!==-1&&(D=-1)}return v===-1||w===-1||D===0||D===1&&v===w-1&&v===C+1?"":h.slice(v,w)},format:d.bind(null,"/"),parse(h){i(h,"path");const v={root:"",dir:"",base:"",ext:"",name:""};if(h.length===0)return v;const C=h.charCodeAt(0)===_;let w;C?(v.root="/",w=1):w=0;let S=-1,D=0,I=-1,T=!0,M=h.length-1,A=0;for(;M>=w;--M){const R=h.charCodeAt(M);if(R===_){if(!T){D=M+1;break}continue}I===-1&&(T=!1,I=M+1),R===f?S===-1?S=M:A!==1&&(A=1):S!==-1&&(A=-1)}if(I!==-1){const R=D===0&&C?1:D;S===-1||A===0||A===1&&S===I-1&&S===D+1?v.base=v.name=h.slice(R,I):(v.name=h.slice(R,S),v.base=h.slice(R,I),v.ext=h.slice(S,I))}return D>0?v.dir=h.slice(0,D-1):C&&(v.dir="/"),v},sep:"/",delimiter:":",win32:null,posix:null},e.posix.win32=e.win32.win32=e.win32,e.posix.posix=e.win32.posix=e.posix,e.normalize=o?e.win32.normalize:e.posix.normalize,e.resolve=o?e.win32.resolve:e.posix.resolve,e.relative=o?e.win32.relative:e.posix.relative,e.dirname=o?e.win32.dirname:e.posix.dirname,e.basename=o?e.win32.basename:e.posix.basename,e.extname=o?e.win32.extname:e.posix.extname,e.sep=o?e.win32.sep:e.posix.sep}),define(oe[188],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Range=void 0;var c;(function(k){function E(_,b){if(_.start>=b.end||b.start>=_.end)return{start:0,end:0};const p=Math.max(_.start,b.start),n=Math.min(_.end,b.end);return n-p<=0?{start:0,end:0}:{start:p,end:n}}k.intersect=E;function L(_){return _.end-_.start<=0}k.isEmpty=L;function y(_,b){return!L(E(_,b))}k.intersects=y;function f(_,b){const p=[],n={start:_.start,end:Math.min(b.start,_.end)},s={start:Math.max(b.end,_.start),end:_.end};return L(n)||p.push(n),L(s)||p.push(s),p}k.relativeComplement=f})(c||(e.Range=c={}))}),define(oe[449],re([1,0,188]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeMap=void 0,e.groupIntersect=k,e.shift=E,e.consolidate=L;function k(_,b){const p=[];for(const n of b){if(_.start>=n.range.end)continue;if(_.end<n.range.start)break;const s=c.Range.intersect(_,n.range);c.Range.isEmpty(s)||p.push({range:s,size:n.size})}return p}function E({start:_,end:b},p){return{start:_+p,end:b+p}}function L(_){const b=[];let p=null;for(const n of _){const s=n.range.start,t=n.range.end,i=n.size;if(p&&i===p.size){p.range.end=t;continue}p={range:{start:s,end:t},size:i},b.push(p)}return b}function y(..._){return L(_.reduce((b,p)=>b.concat(p),[]))}class f{get paddingTop(){return this._paddingTop}set paddingTop(b){this._size=this._size+b-this._paddingTop,this._paddingTop=b}constructor(b){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=b??0,this._size=this._paddingTop}splice(b,p,n=[]){const s=n.length-p,t=k({start:0,end:b},this.groups),i=k({start:b+p,end:Number.POSITIVE_INFINITY},this.groups).map(g=>({range:E(g.range,s),size:g.size})),o=n.map((g,u)=>({range:{start:b+u,end:b+u+1},size:g.size}));this.groups=y(t,o,i),this._size=this._paddingTop+this.groups.reduce((g,u)=>g+u.size*(u.range.end-u.range.start),0)}get count(){const b=this.groups.length;return b?this.groups[b-1].range.end:0}get size(){return this._size}indexAt(b){if(b<0)return-1;if(b<this._paddingTop)return 0;let p=0,n=this._paddingTop;for(const s of this.groups){const t=s.range.end-s.range.start,i=n+t*s.size;if(b<i)return p+Math.floor((b-n)/s.size);p+=t,n=i}return p}indexAfter(b){return Math.min(this.indexAt(b)+1,this.count)}positionAt(b){if(b<0)return-1;let p=0,n=0;for(const s of this.groups){const t=s.range.end-s.range.start,i=n+t;if(b<i)return this._paddingTop+p+(b-n)*s.size;p+=t*s.size,n=i}return-1}}e.RangeMap=f}),define(oe[59],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StopWatch=void 0;const c=globalThis.performance&&typeof globalThis.performance.now=="function";class k{static create(L){return new k(L)}constructor(L){this._now=c&&L===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}e.StopWatch=k}),define(oe[6],re([1,0,8,127,2,73,59]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Relay=e.EventBufferer=e.EventMultiplexer=e.MicrotaskEmitter=e.DebounceEmitter=e.PauseableEmitter=e.createEventDeliveryQueue=e.Emitter=e.ListenerRefusalError=e.ListenerLeakError=e.EventProfiling=e.Event=void 0;const f=!1,_=!1,b=!1;var p;(function(T){T.None=()=>E.Disposable.None;function M(j){if(b){const{onDidAddListener:V}=j,$=i.create();let Z=0;j.onDidAddListener=()=>{++Z===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),$.print()),V?.()}}}function A(j,V){return K(j,()=>{},0,void 0,!0,void 0,V)}T.defer=A;function R(j){return(V,$=null,Z)=>{let ee=!1,le;return le=j(de=>{if(!ee)return le?le.dispose():ee=!0,V.call($,de)},null,Z),ee&&le.dispose(),le}}T.once=R;function N(j,V,$){return q((Z,ee=null,le)=>j(de=>Z.call(ee,V(de)),null,le),$)}T.map=N;function O(j,V,$){return q((Z,ee=null,le)=>j(de=>{V(de),Z.call(ee,de)},null,le),$)}T.forEach=O;function x(j,V,$){return q((Z,ee=null,le)=>j(de=>V(de)&&Z.call(ee,de),null,le),$)}T.filter=x;function F(j){return j}T.signal=F;function W(...j){return(V,$=null,Z)=>{const ee=(0,E.combinedDisposable)(...j.map(le=>le(de=>V.call($,de))));return H(ee,Z)}}T.any=W;function z(j,V,$,Z){let ee=$;return N(j,le=>(ee=V(ee,le),ee),Z)}T.reduce=z;function q(j,V){let $;const Z={onWillAddFirstListener(){$=j(ee.fire,ee)},onDidRemoveLastListener(){$?.dispose()}};V||M(Z);const ee=new d(Z);return V?.add(ee),ee.event}function H(j,V){return V instanceof Array?V.push(j):V&&V.add(j),j}function K(j,V,$=100,Z=!1,ee=!1,le,de){let me,be,ve,Le=0,Se;const ye={leakWarningThreshold:le,onWillAddFirstListener(){me=j(ke=>{Le++,be=V(be,ke),Z&&!ve&&(Ee.fire(be),be=void 0),Se=()=>{const Re=be;be=void 0,ve=void 0,(!Z||Le>1)&&Ee.fire(Re),Le=0},typeof $=="number"?(clearTimeout(ve),ve=setTimeout(Se,$)):ve===void 0&&(ve=0,queueMicrotask(Se))})},onWillRemoveListener(){ee&&Le>0&&Se?.()},onDidRemoveLastListener(){Se=void 0,me.dispose()}};de||M(ye);const Ee=new d(ye);return de?.add(Ee),Ee.event}T.debounce=K;function U(j,V=0,$){return T.debounce(j,(Z,ee)=>Z?(Z.push(ee),Z):[ee],V,void 0,!0,void 0,$)}T.accumulate=U;function Y(j,V=(Z,ee)=>Z===ee,$){let Z=!0,ee;return x(j,le=>{const de=Z||!V(le,ee);return Z=!1,ee=le,de},$)}T.latch=Y;function Q(j,V,$){return[T.filter(j,V,$),T.filter(j,Z=>!V(Z),$)]}T.split=Q;function X(j,V=!1,$=[],Z){let ee=$.slice(),le=j(be=>{ee?ee.push(be):me.fire(be)});Z&&Z.add(le);const de=()=>{ee?.forEach(be=>me.fire(be)),ee=null},me=new d({onWillAddFirstListener(){le||(le=j(be=>me.fire(be)),Z&&Z.add(le))},onDidAddFirstListener(){ee&&(V?setTimeout(de):de())},onDidRemoveLastListener(){le&&le.dispose(),le=null}});return Z&&Z.add(me),me.event}T.buffer=X;function G(j,V){return(Z,ee,le)=>{const de=V(new te);return j(function(me){const be=de.evaluate(me);be!==P&&Z.call(ee,be)},void 0,le)}}T.chain=G;const P=Symbol("HaltChainable");class te{constructor(){this.steps=[]}map(V){return this.steps.push(V),this}forEach(V){return this.steps.push($=>(V($),$)),this}filter(V){return this.steps.push($=>V($)?$:P),this}reduce(V,$){let Z=$;return this.steps.push(ee=>(Z=V(Z,ee),Z)),this}latch(V=($,Z)=>$===Z){let $=!0,Z;return this.steps.push(ee=>{const le=$||!V(ee,Z);return $=!1,Z=ee,le?ee:P}),this}evaluate(V){for(const $ of this.steps)if(V=$(V),V===P)break;return V}}function se(j,V,$=Z=>Z){const Z=(...me)=>de.fire($(...me)),ee=()=>j.on(V,Z),le=()=>j.removeListener(V,Z),de=new d({onWillAddFirstListener:ee,onDidRemoveLastListener:le});return de.event}T.fromNodeEventEmitter=se;function ue(j,V,$=Z=>Z){const Z=(...me)=>de.fire($(...me)),ee=()=>j.addEventListener(V,Z),le=()=>j.removeEventListener(V,Z),de=new d({onWillAddFirstListener:ee,onDidRemoveLastListener:le});return de.event}T.fromDOMEventEmitter=ue;function ge(j){return new Promise(V=>R(j)(V))}T.toPromise=ge;function pe(j){const V=new d;return j.then($=>{V.fire($)},()=>{V.fire(void 0)}).finally(()=>{V.dispose()}),V.event}T.fromPromise=pe;function ce(j,V){return j($=>V.fire($))}T.forward=ce;function ie(j,V,$){return V($),j(Z=>V(Z))}T.runAndSubscribe=ie;class ne{constructor(V,$){this._observable=V,this._counter=0,this._hasChanged=!1;const Z={onWillAddFirstListener:()=>{V.addObserver(this)},onDidRemoveLastListener:()=>{V.removeObserver(this)}};$||M(Z),this.emitter=new d(Z),$&&$.add(this.emitter)}beginUpdate(V){this._counter++}handlePossibleChange(V){}handleChange(V,$){this._hasChanged=!0}endUpdate(V){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function J(j,V){return new ne(j,V).emitter.event}T.fromObservable=J;function B(j){return(V,$,Z)=>{let ee=0,le=!1;const de={beginUpdate(){ee++},endUpdate(){ee--,ee===0&&(j.reportChanges(),le&&(le=!1,V.call($)))},handlePossibleChange(){},handleChange(){le=!0}};j.addObserver(de),j.reportChanges();const me={dispose(){j.removeObserver(de)}};return Z instanceof E.DisposableStore?Z.add(me):Array.isArray(Z)&&Z.push(me),me}}T.fromObservableLight=B})(p||(e.Event=p={}));class n{static{this.all=new Set}static{this._idPool=0}constructor(M){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${M}_${n._idPool++}`,n.all.add(this)}start(M){this._stopWatch=new y.StopWatch,this.listenerCount=M}stop(){if(this._stopWatch){const M=this._stopWatch.elapsed();this.durations.push(M),this.elapsedOverall+=M,this.invocationCount+=1,this._stopWatch=void 0}}}e.EventProfiling=n;let s=-1;class t{static{this._idPool=1}constructor(M,A,R=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=M,this.threshold=A,this.name=R,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(M,A){const R=this.threshold;if(R<=0||A<R)return;this._stacks||(this._stacks=new Map);const N=this._stacks.get(M.value)||0;if(this._stacks.set(M.value,N+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=R*.5;const[O,x]=this.getMostFrequentStack(),F=`[${this.name}] potential listener LEAK detected, having ${A} listeners already. MOST frequent listener (${x}):`;console.warn(F),console.warn(O);const W=new o(F,O);this._errorHandler(W)}return()=>{const O=this._stacks.get(M.value)||0;this._stacks.set(M.value,O-1)}}getMostFrequentStack(){if(!this._stacks)return;let M,A=0;for(const[R,N]of this._stacks)(!M||A<N)&&(M=[R,N],A=N);return M}}class i{static create(){const M=new Error;return new i(M.stack??"")}constructor(M){this.value=M}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class o extends Error{constructor(M,A){super(M),this.name="ListenerLeakError",this.stack=A}}e.ListenerLeakError=o;class g extends Error{constructor(M,A){super(M),this.name="ListenerRefusalError",this.stack=A}}e.ListenerRefusalError=g;class u{constructor(M){this.value=M}}const l=2,a=(T,M)=>{if(T instanceof u)M(T);else for(let A=0;A<T.length;A++){const R=T[A];R&&M(R)}};let r;if(f){const T=[];setInterval(()=>{T.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(T.join(`
`)),T.length=0)},3e3),r=new FinalizationRegistry(M=>{typeof M=="string"&&T.push(M)})}class d{constructor(M){this._size=0,this._options=M,this._leakageMon=s>0||this._options?.leakWarningThreshold?new t(M?.onListenerError??c.onUnexpectedError,this._options?.leakWarningThreshold??s):void 0,this._perfMon=this._options?._profName?new n(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(_){const M=this._listeners;queueMicrotask(()=>{a(M,A=>A.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(M,A,R)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const W=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(W);const z=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],q=new g(`${W}. HINT: Stack shows most frequent listener (${z[1]}-times)`,z[0]);return(this._options?.onListenerError||c.onUnexpectedError)(q),E.Disposable.None}if(this._disposed)return E.Disposable.None;A&&(M=M.bind(A));const N=new u(M);let O,x;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(N.stack=i.create(),O=this._leakageMon.check(N.stack,this._size+1)),_&&(N.stack=x??i.create()),this._listeners?this._listeners instanceof u?(this._deliveryQueue??=new h,this._listeners=[this._listeners,N]):this._listeners.push(N):(this._options?.onWillAddFirstListener?.(this),this._listeners=N,this._options?.onDidAddFirstListener?.(this)),this._size++;const F=(0,E.toDisposable)(()=>{r?.unregister(F),O?.(),this._removeListener(N)});if(R instanceof E.DisposableStore?R.add(F):Array.isArray(R)&&R.push(F),r){const W=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),z=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(W);r.register(F,z?.[2]??W,F)}return F},this._event}_removeListener(M){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const A=this._listeners,R=A.indexOf(M);if(R===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,A[R]=void 0;const N=this._deliveryQueue.current===this;if(this._size*l<=A.length){let O=0;for(let x=0;x<A.length;x++)A[x]?A[O++]=A[x]:N&&(this._deliveryQueue.end--,O<this._deliveryQueue.i&&this._deliveryQueue.i--);A.length=O}}_deliver(M,A){if(!M)return;const R=this._options?.onListenerError||c.onUnexpectedError;if(!R){M.value(A);return}try{M.value(A)}catch(N){R(N)}}_deliverQueue(M){const A=M.current._listeners;for(;M.i<M.end;)this._deliver(A[M.i++],M.value);M.reset()}fire(M){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof u)this._deliver(this._listeners,M);else{const A=this._deliveryQueue;A.enqueue(this,M,this._listeners.length),this._deliverQueue(A)}this._perfMon?.stop()}hasListeners(){return this._size>0}}e.Emitter=d;const m=()=>new h;e.createEventDeliveryQueue=m;class h{constructor(){this.i=-1,this.end=0}enqueue(M,A,R){this.i=0,this.end=R,this.current=M,this.value=A}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class v extends d{constructor(M){super(M),this._isPaused=0,this._eventQueue=new L.LinkedList,this._mergeFn=M?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const M=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(M))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(M){this._size&&(this._isPaused!==0?this._eventQueue.push(M):super.fire(M))}}e.PauseableEmitter=v;class C extends v{constructor(M){super(M),this._delay=M.delay??100}fire(M){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(M)}}e.DebounceEmitter=C;class w extends d{constructor(M){super(M),this._queuedEvents=[],this._mergeFn=M?.merge}fire(M){this.hasListeners()&&(this._queuedEvents.push(M),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(A=>super.fire(A)),this._queuedEvents=[]}))}}e.MicrotaskEmitter=w;class S{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new d({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(M){const A={event:M,listener:null};this.events.push(A),this.hasListeners&&this.hook(A);const R=()=>{this.hasListeners&&this.unhook(A);const N=this.events.indexOf(A);this.events.splice(N,1)};return(0,E.toDisposable)((0,k.createSingleCallFunction)(R))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(M=>this.hook(M))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(M=>this.unhook(M))}hook(M){M.listener=M.event(A=>this.emitter.fire(A))}unhook(M){M.listener?.dispose(),M.listener=null}dispose(){this.emitter.dispose();for(const M of this.events)M.listener?.dispose();this.events=[]}}e.EventMultiplexer=S;class D{constructor(){this.data=[]}wrapEvent(M,A,R){return(N,O,x)=>M(F=>{const W=this.data[this.data.length-1];if(!A){W?W.buffers.push(()=>N.call(O,F)):N.call(O,F);return}const z=W;if(!z){N.call(O,A(R,F));return}z.items??=[],z.items.push(F),z.buffers.length===0&&W.buffers.push(()=>{z.reducedResult??=R?z.items.reduce(A,R):z.items.reduce(A),N.call(O,z.reducedResult)})},void 0,x)}bufferEvents(M){const A={buffers:new Array};this.data.push(A);const R=M();return this.data.pop(),A.buffers.forEach(N=>N()),R}}e.EventBufferer=D;class I{constructor(){this.listening=!1,this.inputEvent=p.None,this.inputEventListener=E.Disposable.None,this.emitter=new d({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(M){this.inputEvent=M,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=M(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}e.Relay=I}),define(oe[92],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomEmitter=void 0;class k{get event(){return this.emitter.event}constructor(L,y,f){const _=b=>this.emitter.fire(b);this.emitter=new c.Emitter({onWillAddFirstListener:()=>L.addEventListener(y,_,f),onDidRemoveLastListener:()=>L.removeEventListener(y,_,f)})}dispose(){this.emitter.dispose()}}e.DomEmitter=k}),define(oe[18],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0,e.cancelOnDispose=f;const k=Object.freeze(function(_,b){const p=setTimeout(_.bind(b),0);return{dispose(){clearTimeout(p)}}});var E;(function(_){function b(p){return p===_.None||p===_.Cancelled||p instanceof L?!0:!p||typeof p!="object"?!1:typeof p.isCancellationRequested=="boolean"&&typeof p.onCancellationRequested=="function"}_.isCancellationToken=b,_.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:c.Event.None}),_.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:k})})(E||(e.CancellationToken=E={}));class L{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?k:(this._emitter||(this._emitter=new c.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class y{constructor(b){this._token=void 0,this._parentListener=void 0,this._parentListener=b&&b.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new L),this._token}cancel(){this._token?this._token instanceof L&&this._token.cancel():this._token=E.Cancelled}dispose(b=!1){b&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof L&&this._token.dispose():this._token=E.None}}e.CancellationTokenSource=y;function f(_){const b=new y;return _.add({dispose(){b.cancel()}}),b.token}}),define(oe[302],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IME=e.IMEImpl=void 0;class k{constructor(){this._onDidChange=new c.Emitter,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}e.IMEImpl=k,e.IME=new k}),define(oe[189],re([1,0,6,2,91,159,65,160,101]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ValueWithChangeEventFromObservable=e.KeepAliveObserver=e.FromEventObservable=void 0,e.constObservable=b,e.observableFromEvent=n,e.observableFromEventOpts=s,e.observableSignalFromEvent=i,e.observableSignal=g,e.keepObserved=l,e.recomputeInitiallyAndOnChange=a,e.derivedObservableWithCache=d,e.derivedObservableWithWritableCache=m,e.mapObservableArrayCached=h,e.observableFromValueWithChangeEvent=w,e.derivedConstOnceDefined=S;function b(D){return new p(D)}class p extends E.ConvenientObservable{constructor(I){super(),this.value=I}get debugName(){return this.toString()}get(){return this.value}addObserver(I){}removeObserver(I){}toString(){return`Const: ${this.value}`}}function n(...D){let I,T,M;return D.length===3?[I,T,M]=D:[T,M]=D,new t(new L.DebugNameData(I,void 0,M),T,M,()=>t.globalTransaction,_.strictEquals)}function s(D,I,T){return new t(new L.DebugNameData(D.owner,D.debugName,D.debugReferenceFn??T),I,T,()=>t.globalTransaction,D.equalsFn??_.strictEquals)}class t extends E.BaseObservable{constructor(I,T,M,A,R){super(),this._debugNameData=I,this.event=T,this._getValue=M,this._getTransaction=A,this._equalityComparator=R,this.hasValue=!1,this.handleEvent=N=>{const O=this._getValue(N),x=this.value,F=!this.hasValue||!this._equalityComparator(x,O);let W=!1;F&&(this.value=O,this.hasValue&&(W=!0,(0,E.subtransaction)(this._getTransaction(),z=>{(0,f.getLogger)()?.handleFromEventObservableTriggered(this,{oldValue:x,newValue:O,change:void 0,didChange:F,hadValue:this.hasValue});for(const q of this.observers)z.updateObserver(q,this),q.handleChange(this,void 0)},()=>{const z=this.getDebugName();return"Event fired"+(z?`: ${z}`:"")})),this.hasValue=!0),W||(0,f.getLogger)()?.handleFromEventObservableTriggered(this,{oldValue:x,newValue:O,change:void 0,didChange:F,hadValue:this.hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const I=this.getDebugName();return"From Event"+(I?`: ${I}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}}e.FromEventObservable=t,function(D){D.Observer=t;function I(T,M){let A=!1;t.globalTransaction===void 0&&(t.globalTransaction=T,A=!0);try{M()}finally{A&&(t.globalTransaction=void 0)}}D.batchEventsGlobally=I}(n||(e.observableFromEvent=n={}));function i(D,I){return new o(D,I)}class o extends E.BaseObservable{constructor(I,T){super(),this.debugName=I,this.event=T,this.handleEvent=()=>{(0,E.transaction)(M=>{for(const A of this.observers)M.updateObserver(A,this),A.handleChange(this,void 0)},()=>this.debugName)}}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0}get(){}}function g(D){return typeof D=="string"?new u(D):new u(void 0,D)}class u extends E.BaseObservable{get debugName(){return new L.DebugNameData(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(I,T){super(),this._debugName=I,this._owner=T}trigger(I,T){if(!I){(0,E.transaction)(M=>{this.trigger(M,T)},()=>`Trigger signal ${this.debugName}`);return}for(const M of this.observers)I.updateObserver(M,this),M.handleChange(this,T)}get(){}}function l(D){const I=new r(!1,void 0);return D.addObserver(I),(0,k.toDisposable)(()=>{D.removeObserver(I)})}(0,E._setKeepObserved)(l);function a(D,I){const T=new r(!0,I);return D.addObserver(T),I?I(D.get()):D.reportChanges(),(0,k.toDisposable)(()=>{D.removeObserver(T)})}(0,E._setRecomputeInitiallyAndOnChange)(a);class r{constructor(I,T){this._forceRecompute=I,this._handleValue=T,this._counter=0}beginUpdate(I){this._counter++}endUpdate(I){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(I.get()):I.reportChanges())}handlePossibleChange(I){}handleChange(I,T){}}e.KeepAliveObserver=r;function d(D,I){let T;return(0,y.derivedOpts)({owner:D,debugReferenceFn:I},A=>(T=I(A,T),T))}function m(D,I){let T;const M=g("derivedObservableWithWritableCache"),A=(0,y.derived)(D,R=>(M.read(R),T=I(R,T),T));return Object.assign(A,{clearCache:R=>{T=void 0,M.trigger(R)},setCache:(R,N)=>{T=R,M.trigger(N)}})}function h(D,I,T,M){let A=new v(T,M);return(0,y.derivedOpts)({debugReferenceFn:T,owner:D,onLastObserverRemoved:()=>{A.dispose(),A=new v(T)}},N=>(A.setItems(I.read(N)),A.getItems()))}class v{constructor(I,T){this._map=I,this._keySelector=T,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(I=>I.store.dispose()),this._cache.clear()}setItems(I){const T=[],M=new Set(this._cache.keys());for(const A of I){const R=this._keySelector?this._keySelector(A):A;let N=this._cache.get(R);if(N)M.delete(R);else{const O=new k.DisposableStore;N={out:this._map(A,O),store:O},this._cache.set(R,N)}T.push(N.out)}for(const A of M)this._cache.get(A).store.dispose(),this._cache.delete(A);this._items=T}getItems(){return this._items}}class C{constructor(I){this.observable=I}get onDidChange(){return c.Event.fromObservableLight(this.observable)}get value(){return this.observable.get()}}e.ValueWithChangeEventFromObservable=C;function w(D,I){return I instanceof C?I.observable:n(D,I.onDidChange,()=>I.value)}function S(D,I){return d(D,(T,M)=>M??I(T))}}),define(oe[21],re([1,0,91,65,298,189,448,447,160]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observableValueOpts=e.waitForState=e.PromiseResult=e.ObservablePromise=e.observableSignalFromEvent=e.observableSignal=e.observableFromEvent=e.recomputeInitiallyAndOnChange=e.keepObserved=e.derivedObservableWithWritableCache=e.derivedObservableWithCache=e.constObservable=e.autorunWithStoreHandleChanges=e.autorunOpts=e.autorunWithStore=e.autorunHandleChanges=e.autorun=e.derivedWithStore=e.derivedHandleChanges=e.derivedOpts=e.derived=e.subtransaction=e.transaction=e.disposableObservableValue=e.observableValue=void 0,Object.defineProperty(e,"observableValue",{enumerable:!0,get:function(){return c.observableValue}}),Object.defineProperty(e,"disposableObservableValue",{enumerable:!0,get:function(){return c.disposableObservableValue}}),Object.defineProperty(e,"transaction",{enumerable:!0,get:function(){return c.transaction}}),Object.defineProperty(e,"subtransaction",{enumerable:!0,get:function(){return c.subtransaction}}),Object.defineProperty(e,"derived",{enumerable:!0,get:function(){return k.derived}}),Object.defineProperty(e,"derivedOpts",{enumerable:!0,get:function(){return k.derivedOpts}}),Object.defineProperty(e,"derivedHandleChanges",{enumerable:!0,get:function(){return k.derivedHandleChanges}}),Object.defineProperty(e,"derivedWithStore",{enumerable:!0,get:function(){return k.derivedWithStore}}),Object.defineProperty(e,"autorun",{enumerable:!0,get:function(){return E.autorun}}),Object.defineProperty(e,"autorunHandleChanges",{enumerable:!0,get:function(){return E.autorunHandleChanges}}),Object.defineProperty(e,"autorunWithStore",{enumerable:!0,get:function(){return E.autorunWithStore}}),Object.defineProperty(e,"autorunOpts",{enumerable:!0,get:function(){return E.autorunOpts}}),Object.defineProperty(e,"autorunWithStoreHandleChanges",{enumerable:!0,get:function(){return E.autorunWithStoreHandleChanges}}),Object.defineProperty(e,"constObservable",{enumerable:!0,get:function(){return L.constObservable}}),Object.defineProperty(e,"derivedObservableWithCache",{enumerable:!0,get:function(){return L.derivedObservableWithCache}}),Object.defineProperty(e,"derivedObservableWithWritableCache",{enumerable:!0,get:function(){return L.derivedObservableWithWritableCache}}),Object.defineProperty(e,"keepObserved",{enumerable:!0,get:function(){return L.keepObserved}}),Object.defineProperty(e,"recomputeInitiallyAndOnChange",{enumerable:!0,get:function(){return L.recomputeInitiallyAndOnChange}}),Object.defineProperty(e,"observableFromEvent",{enumerable:!0,get:function(){return L.observableFromEvent}}),Object.defineProperty(e,"observableSignal",{enumerable:!0,get:function(){return L.observableSignal}}),Object.defineProperty(e,"observableSignalFromEvent",{enumerable:!0,get:function(){return L.observableSignalFromEvent}}),Object.defineProperty(e,"ObservablePromise",{enumerable:!0,get:function(){return y.ObservablePromise}}),Object.defineProperty(e,"PromiseResult",{enumerable:!0,get:function(){return y.PromiseResult}}),Object.defineProperty(e,"waitForState",{enumerable:!0,get:function(){return y.waitForState}}),Object.defineProperty(e,"observableValueOpts",{enumerable:!0,get:function(){return f.observableValueOpts}}),!1&&(0,_.setLogger)(new _.ConsoleObservableLogger)}),define(oe[161],re([1,0,301,21]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readHotReloadableExport=E,e.observeHotReloadableExports=L;function E(y,f){return L([y],f),y}function L(y,f){(0,c.isHotReloadEnabled)()&&(0,k.observableSignalFromEvent)("reload",b=>(0,c.registerHotReloadHandler)(({oldExports:p})=>{if([...Object.values(p)].some(n=>y.includes(n)))return n=>(b(void 0),!0)})).read(f)}}),define(oe[162],re([1,0,6,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SmoothScrollingOperation=e.SmoothScrollingUpdate=e.Scrollable=e.ScrollState=void 0;class E{constructor(t,i,o,g,u,l,a){this._forceIntegerValues=t,this._scrollStateBrand=void 0,this._forceIntegerValues&&(i=i|0,o=o|0,g=g|0,u=u|0,l=l|0,a=a|0),this.rawScrollLeft=g,this.rawScrollTop=a,i<0&&(i=0),g+i>o&&(g=o-i),g<0&&(g=0),u<0&&(u=0),a+u>l&&(a=l-u),a<0&&(a=0),this.width=i,this.scrollWidth=o,this.scrollLeft=g,this.height=u,this.scrollHeight=l,this.scrollTop=a}equals(t){return this.rawScrollLeft===t.rawScrollLeft&&this.rawScrollTop===t.rawScrollTop&&this.width===t.width&&this.scrollWidth===t.scrollWidth&&this.scrollLeft===t.scrollLeft&&this.height===t.height&&this.scrollHeight===t.scrollHeight&&this.scrollTop===t.scrollTop}withScrollDimensions(t,i){return new E(this._forceIntegerValues,typeof t.width<"u"?t.width:this.width,typeof t.scrollWidth<"u"?t.scrollWidth:this.scrollWidth,i?this.rawScrollLeft:this.scrollLeft,typeof t.height<"u"?t.height:this.height,typeof t.scrollHeight<"u"?t.scrollHeight:this.scrollHeight,i?this.rawScrollTop:this.scrollTop)}withScrollPosition(t){return new E(this._forceIntegerValues,this.width,this.scrollWidth,typeof t.scrollLeft<"u"?t.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof t.scrollTop<"u"?t.scrollTop:this.rawScrollTop)}createScrollEvent(t,i){const o=this.width!==t.width,g=this.scrollWidth!==t.scrollWidth,u=this.scrollLeft!==t.scrollLeft,l=this.height!==t.height,a=this.scrollHeight!==t.scrollHeight,r=this.scrollTop!==t.scrollTop;return{inSmoothScrolling:i,oldWidth:t.width,oldScrollWidth:t.scrollWidth,oldScrollLeft:t.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:t.height,oldScrollHeight:t.scrollHeight,oldScrollTop:t.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:o,scrollWidthChanged:g,scrollLeftChanged:u,heightChanged:l,scrollHeightChanged:a,scrollTopChanged:r}}}e.ScrollState=E;class L extends k.Disposable{constructor(t){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new c.Emitter),this.onScroll=this._onScroll.event,this._smoothScrollDuration=t.smoothScrollDuration,this._scheduleAtNextAnimationFrame=t.scheduleAtNextAnimationFrame,this._state=new E(t.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(t){this._smoothScrollDuration=t}validateScrollPosition(t){return this._state.withScrollPosition(t)}getScrollDimensions(){return this._state}setScrollDimensions(t,i){const o=this._state.withScrollDimensions(t,i);this._setState(o,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(t){const i=this._state.withScrollPosition(t);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(i,!1)}setScrollPositionSmooth(t,i){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(t);if(this._smoothScrolling){t={scrollLeft:typeof t.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:t.scrollLeft,scrollTop:typeof t.scrollTop>"u"?this._smoothScrolling.to.scrollTop:t.scrollTop};const o=this._state.withScrollPosition(t);if(this._smoothScrolling.to.scrollLeft===o.scrollLeft&&this._smoothScrolling.to.scrollTop===o.scrollTop)return;let g;i?g=new b(this._smoothScrolling.from,o,this._smoothScrolling.startTime,this._smoothScrolling.duration):g=this._smoothScrolling.combine(this._state,o,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=g}else{const o=this._state.withScrollPosition(t);this._smoothScrolling=b.start(this._state,o,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const t=this._smoothScrolling.tick(),i=this._state.withScrollPosition(t);if(this._setState(i,!0),!!this._smoothScrolling){if(t.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(t,i){const o=this._state;o.equals(t)||(this._state=t,this._onScroll.fire(this._state.createScrollEvent(o,i)))}}e.Scrollable=L;class y{constructor(t,i,o){this.scrollLeft=t,this.scrollTop=i,this.isDone=o}}e.SmoothScrollingUpdate=y;function f(s,t){const i=t-s;return function(o){return s+i*n(o)}}function _(s,t,i){return function(o){return o<i?s(o/i):t((o-i)/(1-i))}}class b{constructor(t,i,o,g){this.from=t,this.to=i,this.duration=g,this.startTime=o,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(t,i,o){if(Math.abs(t-i)>2.5*o){let u,l;return t<i?(u=t+.75*o,l=i-.75*o):(u=t-.75*o,l=i+.75*o),_(f(t,u),f(l,i),.33)}return f(t,i)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(t){this.to=t.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(t){const i=(t-this.startTime)/this.duration;if(i<1){const o=this.scrollLeft(i),g=this.scrollTop(i);return new y(o,g,!1)}return new y(this.to.scrollLeft,this.to.scrollTop,!0)}combine(t,i,o){return b.start(t,i,o)}static start(t,i,o){o=o+10;const g=Date.now()-10;return new b(t,i,g,o)}}e.SmoothScrollingOperation=b;function p(s){return Math.pow(s,3)}function n(s){return 1-p(1-s)}}),define(oe[11],re([1,0,296,98]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvisibleCharacters=e.AmbiguousCharacters=e.noBreakWhitespace=e.UTF8_BOM_CHARACTER=e.UNUSUAL_LINE_TERMINATORS=e.GraphemeIterator=e.CodePointIterator=void 0,e.isFalsyOrWhitespace=E,e.format=y,e.htmlAttributeEncodeValue=f,e.escape=_,e.escapeRegExpCharacters=b,e.trim=p,e.ltrim=n,e.rtrim=s,e.convertSimple2RegExpPattern=t,e.stripWildcards=i,e.createRegExp=o,e.regExpLeadsToEndlessLoop=g,e.splitLines=u,e.splitLinesIncludeSeparators=l,e.firstNonWhitespaceIndex=a,e.getLeadingWhitespace=r,e.lastNonWhitespaceIndex=d,e.compare=m,e.compareSubstring=h,e.compareIgnoreCase=v,e.compareSubstringIgnoreCase=C,e.isAsciiDigit=w,e.isLowerAsciiLetter=S,e.isUpperAsciiLetter=D,e.equalsIgnoreCase=I,e.startsWithIgnoreCase=T,e.commonPrefixLength=M,e.commonSuffixLength=A,e.isHighSurrogate=R,e.isLowSurrogate=N,e.computeCodePoint=O,e.getNextCodePoint=x,e.nextCharLength=q,e.prevCharLength=H,e.getCharContainingOffset=K,e.containsRTL=Q,e.isBasicASCII=G,e.containsUnusualLineTerminators=P,e.isFullWidthCharacter=te,e.isEmojiImprecise=se,e.startsWithUTF8BOM=ue,e.containsUppercaseCharacter=ge,e.singleLetterHash=pe,e.getLeftDeleteOffset=J;function E(Z){return!Z||typeof Z!="string"?!0:Z.trim().length===0}const L=/{(\d+)}/g;function y(Z,...ee){return ee.length===0?Z:Z.replace(L,function(le,de){const me=parseInt(de,10);return isNaN(me)||me<0||me>=ee.length?le:ee[me]})}function f(Z){return Z.replace(/[<>"'&]/g,ee=>{switch(ee){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return ee})}function _(Z){return Z.replace(/[<>&]/g,function(ee){switch(ee){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return ee}})}function b(Z){return Z.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function p(Z,ee=" "){const le=n(Z,ee);return s(le,ee)}function n(Z,ee){if(!Z||!ee)return Z;const le=ee.length;if(le===0||Z.length===0)return Z;let de=0;for(;Z.indexOf(ee,de)===de;)de=de+le;return Z.substring(de)}function s(Z,ee){if(!Z||!ee)return Z;const le=ee.length,de=Z.length;if(le===0||de===0)return Z;let me=de,be=-1;for(;be=Z.lastIndexOf(ee,me-1),!(be===-1||be+le!==me);){if(be===0)return"";me=be}return Z.substring(0,me)}function t(Z){return Z.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function i(Z){return Z.replace(/\*/g,"")}function o(Z,ee,le={}){if(!Z)throw new Error("Cannot create regex from empty string");ee||(Z=b(Z)),le.wholeWord&&(/\B/.test(Z.charAt(0))||(Z="\\b"+Z),/\B/.test(Z.charAt(Z.length-1))||(Z=Z+"\\b"));let de="";return le.global&&(de+="g"),le.matchCase||(de+="i"),le.multiline&&(de+="m"),le.unicode&&(de+="u"),new RegExp(Z,de)}function g(Z){return Z.source==="^"||Z.source==="^$"||Z.source==="$"||Z.source==="^\\s*$"?!1:!!(Z.exec("")&&Z.lastIndex===0)}function u(Z){return Z.split(/\r\n|\r|\n/)}function l(Z){const ee=[],le=Z.split(/(\r\n|\r|\n)/);for(let de=0;de<Math.ceil(le.length/2);de++)ee.push(le[2*de]+(le[2*de+1]??""));return ee}function a(Z){for(let ee=0,le=Z.length;ee<le;ee++){const de=Z.charCodeAt(ee);if(de!==32&&de!==9)return ee}return-1}function r(Z,ee=0,le=Z.length){for(let de=ee;de<le;de++){const me=Z.charCodeAt(de);if(me!==32&&me!==9)return Z.substring(ee,de)}return Z.substring(ee,le)}function d(Z,ee=Z.length-1){for(let le=ee;le>=0;le--){const de=Z.charCodeAt(le);if(de!==32&&de!==9)return le}return-1}function m(Z,ee){return Z<ee?-1:Z>ee?1:0}function h(Z,ee,le=0,de=Z.length,me=0,be=ee.length){for(;le<de&&me<be;le++,me++){const Se=Z.charCodeAt(le),ye=ee.charCodeAt(me);if(Se<ye)return-1;if(Se>ye)return 1}const ve=de-le,Le=be-me;return ve<Le?-1:ve>Le?1:0}function v(Z,ee){return C(Z,ee,0,Z.length,0,ee.length)}function C(Z,ee,le=0,de=Z.length,me=0,be=ee.length){for(;le<de&&me<be;le++,me++){let Se=Z.charCodeAt(le),ye=ee.charCodeAt(me);if(Se===ye)continue;if(Se>=128||ye>=128)return h(Z.toLowerCase(),ee.toLowerCase(),le,de,me,be);S(Se)&&(Se-=32),S(ye)&&(ye-=32);const Ee=Se-ye;if(Ee!==0)return Ee}const ve=de-le,Le=be-me;return ve<Le?-1:ve>Le?1:0}function w(Z){return Z>=48&&Z<=57}function S(Z){return Z>=97&&Z<=122}function D(Z){return Z>=65&&Z<=90}function I(Z,ee){return Z.length===ee.length&&C(Z,ee)===0}function T(Z,ee){const le=ee.length;return ee.length>Z.length?!1:C(Z,ee,0,le)===0}function M(Z,ee){const le=Math.min(Z.length,ee.length);let de;for(de=0;de<le;de++)if(Z.charCodeAt(de)!==ee.charCodeAt(de))return de;return le}function A(Z,ee){const le=Math.min(Z.length,ee.length);let de;const me=Z.length-1,be=ee.length-1;for(de=0;de<le;de++)if(Z.charCodeAt(me-de)!==ee.charCodeAt(be-de))return de;return le}function R(Z){return 55296<=Z&&Z<=56319}function N(Z){return 56320<=Z&&Z<=57343}function O(Z,ee){return(Z-55296<<10)+(ee-56320)+65536}function x(Z,ee,le){const de=Z.charCodeAt(le);if(R(de)&&le+1<ee){const me=Z.charCodeAt(le+1);if(N(me))return O(de,me)}return de}function F(Z,ee){const le=Z.charCodeAt(ee-1);if(N(le)&&ee>1){const de=Z.charCodeAt(ee-2);if(R(de))return O(de,le)}return le}class W{get offset(){return this._offset}constructor(ee,le=0){this._str=ee,this._len=ee.length,this._offset=le}setOffset(ee){this._offset=ee}prevCodePoint(){const ee=F(this._str,this._offset);return this._offset-=ee>=65536?2:1,ee}nextCodePoint(){const ee=x(this._str,this._len,this._offset);return this._offset+=ee>=65536?2:1,ee}eol(){return this._offset>=this._len}}e.CodePointIterator=W;class z{get offset(){return this._iterator.offset}constructor(ee,le=0){this._iterator=new W(ee,le)}nextGraphemeLength(){const ee=ie.getInstance(),le=this._iterator,de=le.offset;let me=ee.getGraphemeBreakType(le.nextCodePoint());for(;!le.eol();){const be=le.offset,ve=ee.getGraphemeBreakType(le.nextCodePoint());if(ce(me,ve)){le.setOffset(be);break}me=ve}return le.offset-de}prevGraphemeLength(){const ee=ie.getInstance(),le=this._iterator,de=le.offset;let me=ee.getGraphemeBreakType(le.prevCodePoint());for(;le.offset>0;){const be=le.offset,ve=ee.getGraphemeBreakType(le.prevCodePoint());if(ce(ve,me)){le.setOffset(be);break}me=ve}return de-le.offset}eol(){return this._iterator.eol()}}e.GraphemeIterator=z;function q(Z,ee){return new z(Z,ee).nextGraphemeLength()}function H(Z,ee){return new z(Z,ee).prevGraphemeLength()}function K(Z,ee){ee>0&&N(Z.charCodeAt(ee))&&ee--;const le=ee+q(Z,ee);return[le-H(Z,le),le]}let U;function Y(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Q(Z){return U||(U=Y()),U.test(Z)}const X=/^[\t\n\r\x20-\x7E]*$/;function G(Z){return X.test(Z)}e.UNUSUAL_LINE_TERMINATORS=/[\u2028\u2029]/;function P(Z){return e.UNUSUAL_LINE_TERMINATORS.test(Z)}function te(Z){return Z>=11904&&Z<=55215||Z>=63744&&Z<=64255||Z>=65281&&Z<=65374}function se(Z){return Z>=127462&&Z<=127487||Z===8986||Z===8987||Z===9200||Z===9203||Z>=9728&&Z<=10175||Z===11088||Z===11093||Z>=127744&&Z<=128591||Z>=128640&&Z<=128764||Z>=128992&&Z<=129008||Z>=129280&&Z<=129535||Z>=129648&&Z<=129782}e.UTF8_BOM_CHARACTER="\uFEFF";function ue(Z){return!!(Z&&Z.length>0&&Z.charCodeAt(0)===65279)}function ge(Z,ee=!1){return Z?(ee&&(Z=Z.replace(/\\./g,"")),Z.toLowerCase()!==Z):!1}function pe(Z){return Z=Z%(2*26),Z<26?String.fromCharCode(97+Z):String.fromCharCode(65+Z-26)}function ce(Z,ee){return Z===0?ee!==5&&ee!==7:Z===2&&ee===3?!1:Z===4||Z===2||Z===3||ee===4||ee===2||ee===3?!0:!(Z===8&&(ee===8||ee===9||ee===11||ee===12)||(Z===11||Z===9)&&(ee===9||ee===10)||(Z===12||Z===10)&&ee===10||ee===5||ee===13||ee===7||Z===1||Z===13&&ee===14||Z===6&&ee===6)}class ie{static{this._INSTANCE=null}static getInstance(){return ie._INSTANCE||(ie._INSTANCE=new ie),ie._INSTANCE}constructor(){this._data=ne()}getGraphemeBreakType(ee){if(ee<32)return ee===10?3:ee===13?2:4;if(ee<127)return 0;const le=this._data,de=le.length/3;let me=1;for(;me<=de;)if(ee<le[3*me])me=2*me;else if(ee>le[3*me+1])me=2*me+1;else return le[3*me+2];return 0}}function ne(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function J(Z,ee){if(Z===0)return 0;const le=B(Z,ee);if(le!==void 0)return le;const de=new W(ee,Z);return de.prevCodePoint(),de.offset}function B(Z,ee){const le=new W(ee,Z);let de=le.prevCodePoint();for(;j(de)||de===65039||de===8419;){if(le.offset===0)return;de=le.prevCodePoint()}if(!se(de))return;let me=le.offset;return me>0&&le.prevCodePoint()===8205&&(me=le.offset),me}function j(Z){return 127995<=Z&&Z<=127999}e.noBreakWhitespace="\xA0";class V{static{this.ambiguousCharacterData=new k.Lazy(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new c.LRUCachedFunction({getCacheKey:JSON.stringify},ee=>{function le(Ee){const ke=new Map;for(let Re=0;Re<Ee.length;Re+=2)ke.set(Ee[Re],Ee[Re+1]);return ke}function de(Ee,ke){const Re=new Map(Ee);for(const[Pe,Fe]of ke)Re.set(Pe,Fe);return Re}function me(Ee,ke){if(!Ee)return ke;const Re=new Map;for(const[Pe,Fe]of Ee)ke.has(Pe)&&Re.set(Pe,Fe);return Re}const be=this.ambiguousCharacterData.value;let ve=ee.filter(Ee=>!Ee.startsWith("_")&&Ee in be);ve.length===0&&(ve=["_default"]);let Le;for(const Ee of ve){const ke=le(be[Ee]);Le=me(Le,ke)}const Se=le(be._common),ye=de(Se,Le);return new V(ye)})}static getInstance(ee){return V.cache.get(Array.from(ee))}static{this._locales=new k.Lazy(()=>Object.keys(V.ambiguousCharacterData.value).filter(ee=>!ee.startsWith("_")))}static getLocales(){return V._locales.value}constructor(ee){this.confusableDictionary=ee}isAmbiguous(ee){return this.confusableDictionary.has(ee)}getPrimaryConfusable(ee){return this.confusableDictionary.get(ee)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}e.AmbiguousCharacters=V;class ${static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set($.getRawData())),this._data}static isInvisibleCharacter(ee){return $.getData().has(ee)}static get codePoints(){return $.getData()}}e.InvisibleCharacters=$}),define(oe[224],re([1,0,99,16,11]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSeparator=L,e.toSlashes=y,e.toPosixPath=f,e.getRoot=_,e.isEqualOrParent=b,e.isWindowsDriveLetter=p,e.hasDriveLetter=n;function L(s){return s===47||s===92}function y(s){return s.replace(/[\\/]/g,c.posix.sep)}function f(s){return s.indexOf("/")===-1&&(s=y(s)),/^[a-zA-Z]:(\/|$)/.test(s)&&(s="/"+s),s}function _(s,t=c.posix.sep){if(!s)return"";const i=s.length,o=s.charCodeAt(0);if(L(o)){if(L(s.charCodeAt(1))&&!L(s.charCodeAt(2))){let u=3;const l=u;for(;u<i&&!L(s.charCodeAt(u));u++);if(l!==u&&!L(s.charCodeAt(u+1))){for(u+=1;u<i;u++)if(L(s.charCodeAt(u)))return s.slice(0,u+1).replace(/[\\/]/g,t)}}return t}else if(p(o)&&s.charCodeAt(1)===58)return L(s.charCodeAt(2))?s.slice(0,2)+t:s.slice(0,2);let g=s.indexOf("://");if(g!==-1){for(g+=3;g<i;g++)if(L(s.charCodeAt(g)))return s.slice(0,g+1)}return""}function b(s,t,i,o=c.sep){if(s===t)return!0;if(!s||!t||t.length>s.length)return!1;if(i){if(!(0,E.startsWithIgnoreCase)(s,t))return!1;if(t.length===s.length)return!0;let u=t.length;return t.charAt(t.length-1)===o&&u--,s.charAt(u)===o}return t.charAt(t.length-1)!==o&&(t+=o),s.indexOf(t)===0}function p(s){return s>=65&&s<=90||s>=97&&s<=122}function n(s,t=k.isWindows){return t?p(s.charCodeAt(0))&&s.charCodeAt(1)===58:!1}}),define(oe[82],re([1,0,45,443,11]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FuzzyScoreOptions=e.FuzzyScore=e.matchesPrefix=e.matchesStrictPrefix=void 0,e.or=L,e.matchesContiguousSubString=f,e.matchesSubString=_,e.isUpper=n,e.matchesCamelCase=S,e.matchesWords=D,e.matchesFuzzy=N,e.matchesFuzzy2=O,e.anyScore=x,e.createMatches=F,e.isPatternInWord=ge,e.fuzzyScore=ie,e.fuzzyScoreGracefulAggressive=B;function L(...$){return function(Z,ee){for(let le=0,de=$.length;le<de;le++){const me=$[le](Z,ee);if(me)return me}return null}}e.matchesStrictPrefix=y.bind(void 0,!1),e.matchesPrefix=y.bind(void 0,!0);function y($,Z,ee){if(!ee||ee.length<Z.length)return null;let le;return $?le=E.startsWithIgnoreCase(ee,Z):le=ee.indexOf(Z)===0,le?Z.length>0?[{start:0,end:Z.length}]:[]:null}function f($,Z){const ee=Z.toLowerCase().indexOf($.toLowerCase());return ee===-1?null:[{start:ee,end:ee+$.length}]}function _($,Z){return b($.toLowerCase(),Z.toLowerCase(),0,0)}function b($,Z,ee,le){if(ee===$.length)return[];if(le===Z.length)return null;if($[ee]===Z[le]){let de=null;return(de=b($,Z,ee+1,le+1))?r({start:le,end:le+1},de):null}return b($,Z,ee,le+1)}function p($){return 97<=$&&$<=122}function n($){return 65<=$&&$<=90}function s($){return 48<=$&&$<=57}function t($){return $===32||$===9||$===10||$===13}const i=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach($=>i.add($.charCodeAt(0)));function o($){return t($)||i.has($)}function g($,Z){return $===Z||o($)&&o(Z)}const u=new Map;function l($){if(u.has($))return u.get($);let Z;const ee=(0,k.getKoreanAltChars)($);return ee&&(Z=ee),u.set($,Z),Z}function a($){return p($)||n($)||s($)}function r($,Z){return Z.length===0?Z=[$]:$.end===Z[0].start?Z[0].start=$.start:Z.unshift($),Z}function d($,Z){for(let ee=Z;ee<$.length;ee++){const le=$.charCodeAt(ee);if(n(le)||s(le)||ee>0&&!a($.charCodeAt(ee-1)))return ee}return $.length}function m($,Z,ee,le){if(ee===$.length)return[];if(le===Z.length)return null;if($[ee]!==Z[le].toLowerCase())return null;{let de=null,me=le+1;for(de=m($,Z,ee+1,le+1);!de&&(me=d(Z,me))<Z.length;)de=m($,Z,ee+1,me),me++;return de===null?null:r({start:le,end:le+1},de)}}function h($){let Z=0,ee=0,le=0,de=0,me=0;for(let ye=0;ye<$.length;ye++)me=$.charCodeAt(ye),n(me)&&Z++,p(me)&&ee++,a(me)&&le++,s(me)&&de++;const be=Z/$.length,ve=ee/$.length,Le=le/$.length,Se=de/$.length;return{upperPercent:be,lowerPercent:ve,alphaPercent:Le,numericPercent:Se}}function v($){const{upperPercent:Z,lowerPercent:ee}=$;return ee===0&&Z>.6}function C($){const{upperPercent:Z,lowerPercent:ee,alphaPercent:le,numericPercent:de}=$;return ee>.2&&Z<.8&&le>.6&&de<.2}function w($){let Z=0,ee=0,le=0,de=0;for(let me=0;me<$.length;me++)le=$.charCodeAt(me),n(le)&&Z++,p(le)&&ee++,t(le)&&de++;return(Z===0||ee===0)&&de===0?$.length<=30:Z<=5}function S($,Z){if(!Z||(Z=Z.trim(),Z.length===0)||!w($))return null;Z.length>60&&(Z=Z.substring(0,60));const ee=h(Z);if(!C(ee)){if(!v(ee))return null;Z=Z.toLowerCase()}let le=null,de=0;for($=$.toLowerCase();de<Z.length&&(le=m($,Z,0,de))===null;)de=d(Z,de+1);return le}function D($,Z,ee=!1){if(!Z||Z.length===0)return null;let le=null,de=0;for($=$.toLowerCase(),Z=Z.toLowerCase();de<Z.length&&(le=I($,Z,0,de,ee),le===null);)de=T(Z,de+1);return le}function I($,Z,ee,le,de){let me=0;if(ee===$.length)return[];if(le===Z.length)return null;if(!g($.charCodeAt(ee),Z.charCodeAt(le))){const Le=l($.charCodeAt(ee));if(!Le)return null;for(let Se=0;Se<Le.length;Se++)if(!g(Le[Se],Z.charCodeAt(le+Se)))return null;me+=Le.length-1}let be=null,ve=le+me+1;if(be=I($,Z,ee+1,ve,de),!de)for(;!be&&(ve=T(Z,ve))<Z.length;)be=I($,Z,ee+1,ve,de),ve++;if(!be)return null;if($.charCodeAt(ee)!==Z.charCodeAt(le)){const Le=l($.charCodeAt(ee));if(!Le)return be;for(let Se=0;Se<Le.length;Se++)if(Le[Se]!==Z.charCodeAt(le+Se))return be}return r({start:le,end:le+me+1},be)}function T($,Z){for(let ee=Z;ee<$.length;ee++)if(o($.charCodeAt(ee))||ee>0&&o($.charCodeAt(ee-1)))return ee;return $.length}const M=L(e.matchesPrefix,S,f),A=L(e.matchesPrefix,S,_),R=new c.LRUCache(1e4);function N($,Z,ee=!1){if(typeof $!="string"||typeof Z!="string")return null;let le=R.get($);le||(le=new RegExp(E.convertSimple2RegExpPattern($),"i"),R.set($,le));const de=le.exec(Z);return de?[{start:de.index,end:de.index+de[0].length}]:ee?A($,Z):M($,Z)}function O($,Z){const ee=ie($,$.toLowerCase(),0,Z,Z.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return ee?F(ee):null}function x($,Z,ee,le,de,me){const be=Math.min(13,$.length);for(;ee<be;ee++){const ve=ie($,Z,ee,le,de,me,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(ve)return ve}return[0,me]}function F($){if(typeof $>"u")return[];const Z=[],ee=$[1];for(let le=$.length-1;le>1;le--){const de=$[le]+ee,me=Z[Z.length-1];me&&me.end===de?me.end=de+1:Z.push({start:de,end:de+1})}return Z}const W=128;function z(){const $=[],Z=[];for(let ee=0;ee<=W;ee++)Z[ee]=0;for(let ee=0;ee<=W;ee++)$.push(Z.slice(0));return $}function q($){const Z=[];for(let ee=0;ee<=$;ee++)Z[ee]=0;return Z}const H=q(2*W),K=q(2*W),U=z(),Y=z(),Q=z(),X=!1;function G($,Z,ee,le,de){function me(ve,Le,Se=" "){for(;ve.length<Le;)ve=Se+ve;return ve}let be=` |   |${le.split("").map(ve=>me(ve,3)).join("|")}
`;for(let ve=0;ve<=ee;ve++)ve===0?be+=" |":be+=`${Z[ve-1]}|`,be+=$[ve].slice(0,de+1).map(Le=>me(Le.toString(),3)).join("|")+`
`;return be}function P($,Z,ee,le){$=$.substr(Z),ee=ee.substr(le),console.log(G(Y,$,$.length,ee,ee.length)),console.log(G(Q,$,$.length,ee,ee.length)),console.log(G(U,$,$.length,ee,ee.length))}function te($,Z){if(Z<0||Z>=$.length)return!1;const ee=$.codePointAt(Z);switch(ee){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!E.isEmojiImprecise(ee)}}function se($,Z){if(Z<0||Z>=$.length)return!1;switch($.charCodeAt(Z)){case 32:case 9:return!0;default:return!1}}function ue($,Z,ee){return Z[$]!==ee[$]}function ge($,Z,ee,le,de,me,be=!1){for(;Z<ee&&de<me;)$[Z]===le[de]&&(be&&(H[Z]=de),Z+=1),de+=1;return Z===ee}var pe;(function($){$.Default=[-100,0];function Z(ee){return!ee||ee.length===2&&ee[0]===-100&&ee[1]===0}$.isDefault=Z})(pe||(e.FuzzyScore=pe={}));class ce{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(Z,ee){this.firstMatchCanBeWeak=Z,this.boostFullMatch=ee}}e.FuzzyScoreOptions=ce;function ie($,Z,ee,le,de,me,be=ce.default){const ve=$.length>W?W:$.length,Le=le.length>W?W:le.length;if(ee>=ve||me>=Le||ve-ee>Le-me||!ge(Z,ee,ve,de,me,Le,!0))return;ne(ve,Le,ee,me,Z,de);let Se=1,ye=1,Ee=ee,ke=me;const Re=[!1];for(Se=1,Ee=ee;Ee<ve;Se++,Ee++){const Ne=H[Ee],fe=K[Ee],we=Ee+1<ve?K[Ee+1]:Le;for(ye=Ne-me+1,ke=Ne;ke<we;ye++,ke++){let Oe=Number.MIN_SAFE_INTEGER,Be=!1;ke<=fe&&(Oe=J($,Z,Ee,ee,le,de,ke,Le,me,U[Se-1][ye-1]===0,Re));let Ue=0;Oe!==Number.MAX_SAFE_INTEGER&&(Be=!0,Ue=Oe+Y[Se-1][ye-1]);const Ye=ke>Ne,Qe=Ye?Y[Se][ye-1]+(U[Se][ye-1]>0?-5:0):0,tt=ke>Ne+1&&U[Se][ye-1]>0,it=tt?Y[Se][ye-2]+(U[Se][ye-2]>0?-5:0):0;if(tt&&(!Ye||it>=Qe)&&(!Be||it>=Ue))Y[Se][ye]=it,Q[Se][ye]=3,U[Se][ye]=0;else if(Ye&&(!Be||Qe>=Ue))Y[Se][ye]=Qe,Q[Se][ye]=2,U[Se][ye]=0;else if(Be)Y[Se][ye]=Ue,Q[Se][ye]=1,U[Se][ye]=U[Se-1][ye-1]+1;else throw new Error("not possible")}}if(X&&P($,ee,le,me),!Re[0]&&!be.firstMatchCanBeWeak)return;Se--,ye--;const Pe=[Y[Se][ye],me];let Fe=0,je=0;for(;Se>=1;){let Ne=ye;do{const fe=Q[Se][Ne];if(fe===3)Ne=Ne-2;else if(fe===2)Ne=Ne-1;else break}while(Ne>=1);Fe>1&&Z[ee+Se-1]===de[me+ye-1]&&!ue(Ne+me-1,le,de)&&Fe+1>U[Se][Ne]&&(Ne=ye),Ne===ye?Fe++:Fe=1,je||(je=Ne),Se--,ye=Ne-1,Pe.push(ye)}Le-me===ve&&be.boostFullMatch&&(Pe[0]+=2);const Te=je-ve;return Pe[0]-=Te,Pe}function ne($,Z,ee,le,de,me){let be=$-1,ve=Z-1;for(;be>=ee&&ve>=le;)de[be]===me[ve]&&(K[be]=ve,be--),ve--}function J($,Z,ee,le,de,me,be,ve,Le,Se,ye){if(Z[ee]!==me[be])return Number.MIN_SAFE_INTEGER;let Ee=1,ke=!1;return be===ee-le?Ee=$[ee]===de[be]?7:5:ue(be,de,me)&&(be===0||!ue(be-1,de,me))?(Ee=$[ee]===de[be]?7:5,ke=!0):te(me,be)&&(be===0||!te(me,be-1))?Ee=5:(te(me,be-1)||se(me,be-1))&&(Ee=5,ke=!0),Ee>1&&ee===le&&(ye[0]=!0),ke||(ke=ue(be,de,me)||te(me,be-1)||se(me,be-1)),ee===le?be>Le&&(Ee-=ke?3:5):Se?Ee+=ke?2:0:Ee+=ke?0:1,be+1===ve&&(Ee-=ke?3:5),Ee}function B($,Z,ee,le,de,me,be){return j($,Z,ee,le,de,me,!0,be)}function j($,Z,ee,le,de,me,be,ve){let Le=ie($,Z,ee,le,de,me,ve);if(Le&&!be)return Le;if($.length>=3){const Se=Math.min(7,$.length-1);for(let ye=ee+1;ye<Se;ye++){const Ee=V($,ye);if(Ee){const ke=ie(Ee,Ee.toLowerCase(),ee,le,de,me,ve);ke&&(ke[0]-=3,(!Le||ke[0]>Le[0])&&(Le=ke))}}}return Le}function V($,Z){if(Z+1>=$.length)return;const ee=$[Z],le=$[Z+1];if(ee!==le)return $.slice(0,Z)+le+ee+$.slice(Z+2)}}),define(oe[450],re([1,0,82,99,16,11]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.scoreFuzzy2=f,e.prepareQuery=o,e.pieceToQuery=u;const y=[void 0,[]];function f(l,a,r=0,d=0){const m=a;return m.values&&m.values.length>1?_(l,m.values,r,d):b(l,a,r,d)}function _(l,a,r,d){let m=0;const h=[];for(const v of a){const[C,w]=b(l,v,r,d);if(typeof C!="number")return y;m+=C,h.push(...w)}return[m,n(h)]}function b(l,a,r,d){const m=(0,c.fuzzyScore)(a.original,a.originalLowercase,r,l,l.toLowerCase(),d,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return m?[m[0],(0,c.createMatches)(m)]:y}const p=Object.freeze({score:0});function n(l){const a=l.sort((m,h)=>m.start-h.start),r=[];let d;for(const m of a)!d||!s(d,m)?(d=m,r.push(m)):(d.start=Math.min(d.start,m.start),d.end=Math.max(d.end,m.end));return r}function s(l,a){return!(l.end<a.start||a.end<l.start)}function t(l){return l.startsWith('"')&&l.endsWith('"')}const i=" ";function o(l){typeof l!="string"&&(l="");const a=l.toLowerCase(),{pathNormalized:r,normalized:d,normalizedLowercase:m}=g(l),h=r.indexOf(k.sep)>=0,v=t(l);let C;const w=l.split(i);if(w.length>1)for(const S of w){const D=t(S),{pathNormalized:I,normalized:T,normalizedLowercase:M}=g(S);T&&(C||(C=[]),C.push({original:S,originalLowercase:S.toLowerCase(),pathNormalized:I,normalized:T,normalizedLowercase:M,expectContiguousMatch:D}))}return{original:l,originalLowercase:a,pathNormalized:r,normalized:d,normalizedLowercase:m,values:C,containsPathSeparator:h,expectContiguousMatch:v}}function g(l){let a;E.isWindows?a=l.replace(/\//g,k.sep):a=l.replace(/\\/g,k.sep);const r=(0,L.stripWildcards)(a).replace(/\s|"/g,"");return{pathNormalized:a,normalized:r,normalizedLowercase:r.toLowerCase()}}function u(l){return Array.isArray(l)?o(l.map(a=>a.original).join(i)):o(l.original)}}),define(oe[129],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringSHA1=void 0,e.hash=k,e.doHash=E,e.numberHash=L,e.stringHash=f,e.toHexString=t;function k(o){return E(o,0)}function E(o,g){switch(typeof o){case"object":return o===null?L(349,g):Array.isArray(o)?_(o,g):b(o,g);case"string":return f(o,g);case"boolean":return y(o,g);case"number":return L(o,g);case"undefined":return L(937,g);default:return L(617,g)}}function L(o,g){return(g<<5)-g+o|0}function y(o,g){return L(o?433:863,g)}function f(o,g){g=L(149417,g);for(let u=0,l=o.length;u<l;u++)g=L(o.charCodeAt(u),g);return g}function _(o,g){return g=L(104579,g),o.reduce((u,l)=>E(l,u),g)}function b(o,g){return g=L(181387,g),Object.keys(o).sort().reduce((u,l)=>(u=f(l,u),E(o[l],u)),g)}function p(o,g,u=32){const l=u-g,a=~((1<<l)-1);return(o<<g|(a&o)>>>l)>>>0}function n(o,g=0,u=o.byteLength,l=0){for(let a=0;a<u;a++)o[g+a]=l}function s(o,g,u="0"){for(;o.length<g;)o=u+o;return o}function t(o,g=32){return o instanceof ArrayBuffer?Array.from(new Uint8Array(o)).map(u=>u.toString(16).padStart(2,"0")).join(""):s((o>>>0).toString(16),g/4)}class i{static{this._bigBlock32=new DataView(new ArrayBuffer(320))}constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(g){const u=g.length;if(u===0)return;const l=this._buff;let a=this._buffLen,r=this._leftoverHighSurrogate,d,m;for(r!==0?(d=r,m=-1,r=0):(d=g.charCodeAt(0),m=0);;){let h=d;if(c.isHighSurrogate(d))if(m+1<u){const v=g.charCodeAt(m+1);c.isLowSurrogate(v)?(m++,h=c.computeCodePoint(d,v)):h=65533}else{r=d;break}else c.isLowSurrogate(d)&&(h=65533);if(a=this._push(l,a,h),m++,m<u)d=g.charCodeAt(m);else break}this._buffLen=a,this._leftoverHighSurrogate=r}_push(g,u,l){return l<128?g[u++]=l:l<2048?(g[u++]=192|(l&1984)>>>6,g[u++]=128|(l&63)>>>0):l<65536?(g[u++]=224|(l&61440)>>>12,g[u++]=128|(l&4032)>>>6,g[u++]=128|(l&63)>>>0):(g[u++]=240|(l&1835008)>>>18,g[u++]=128|(l&258048)>>>12,g[u++]=128|(l&4032)>>>6,g[u++]=128|(l&63)>>>0),u>=64&&(this._step(),u-=64,this._totalLen+=64,g[0]=g[64],g[1]=g[65],g[2]=g[66]),u}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),t(this._h0)+t(this._h1)+t(this._h2)+t(this._h3)+t(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,n(this._buff,this._buffLen),this._buffLen>56&&(this._step(),n(this._buff));const g=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(g/4294967296),!1),this._buffDV.setUint32(60,g%4294967296,!1),this._step()}_step(){const g=i._bigBlock32,u=this._buffDV;for(let w=0;w<64;w+=4)g.setUint32(w,u.getUint32(w,!1),!1);for(let w=64;w<320;w+=4)g.setUint32(w,p(g.getUint32(w-12,!1)^g.getUint32(w-32,!1)^g.getUint32(w-56,!1)^g.getUint32(w-64,!1),1),!1);let l=this._h0,a=this._h1,r=this._h2,d=this._h3,m=this._h4,h,v,C;for(let w=0;w<80;w++)w<20?(h=a&r|~a&d,v=1518500249):w<40?(h=a^r^d,v=1859775393):w<60?(h=a&r|a&d|r&d,v=2400959708):(h=a^r^d,v=3395469782),C=p(l,5)+h+m+v+g.getUint32(w*4,!1)&4294967295,m=d,d=r,r=p(a,30),a=l,l=C;this._h0=this._h0+l&4294967295,this._h1=this._h1+a&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+d&4294967295,this._h4=this._h4+m&4294967295}}e.StringSHA1=i}),define(oe[190],re([1,0,439,129]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LcsDiff=e.StringDiffSequence=void 0,e.stringDiff=L;class E{constructor(n){this.source=n}getElements(){const n=this.source,s=new Int32Array(n.length);for(let t=0,i=n.length;t<i;t++)s[t]=n.charCodeAt(t);return s}}e.StringDiffSequence=E;function L(p,n,s){return new b(new E(p),new E(n)).ComputeDiff(s).changes}class y{static Assert(n,s){if(!n)throw new Error(s)}}class f{static Copy(n,s,t,i,o){for(let g=0;g<o;g++)t[i+g]=n[s+g]}static Copy2(n,s,t,i,o){for(let g=0;g<o;g++)t[i+g]=n[s+g]}}class _{constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new c.DiffChange(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(n,s){this.m_originalStart=Math.min(this.m_originalStart,n),this.m_modifiedStart=Math.min(this.m_modifiedStart,s),this.m_originalCount++}AddModifiedElement(n,s){this.m_originalStart=Math.min(this.m_originalStart,n),this.m_modifiedStart=Math.min(this.m_modifiedStart,s),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class b{constructor(n,s,t=null){this.ContinueProcessingPredicate=t,this._originalSequence=n,this._modifiedSequence=s;const[i,o,g]=b._getElements(n),[u,l,a]=b._getElements(s);this._hasStrings=g&&a,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=u,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(n){return n.length>0&&typeof n[0]=="string"}static _getElements(n){const s=n.getElements();if(b._isStringArray(s)){const t=new Int32Array(s.length);for(let i=0,o=s.length;i<o;i++)t[i]=(0,k.stringHash)(s[i],0);return[s,t,!0]}return s instanceof Int32Array?[[],s,!1]:[[],new Int32Array(s),!1]}ElementsAreEqual(n,s){return this._originalElementsOrHash[n]!==this._modifiedElementsOrHash[s]?!1:this._hasStrings?this._originalStringElements[n]===this._modifiedStringElements[s]:!0}ElementsAreStrictEqual(n,s){if(!this.ElementsAreEqual(n,s))return!1;const t=b._getStrictElement(this._originalSequence,n),i=b._getStrictElement(this._modifiedSequence,s);return t===i}static _getStrictElement(n,s){return typeof n.getStrictElement=="function"?n.getStrictElement(s):null}OriginalElementsAreEqual(n,s){return this._originalElementsOrHash[n]!==this._originalElementsOrHash[s]?!1:this._hasStrings?this._originalStringElements[n]===this._originalStringElements[s]:!0}ModifiedElementsAreEqual(n,s){return this._modifiedElementsOrHash[n]!==this._modifiedElementsOrHash[s]?!1:this._hasStrings?this._modifiedStringElements[n]===this._modifiedStringElements[s]:!0}ComputeDiff(n){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,n)}_ComputeDiff(n,s,t,i,o){const g=[!1];let u=this.ComputeDiffRecursive(n,s,t,i,g);return o&&(u=this.PrettifyChanges(u)),{quitEarly:g[0],changes:u}}ComputeDiffRecursive(n,s,t,i,o){for(o[0]=!1;n<=s&&t<=i&&this.ElementsAreEqual(n,t);)n++,t++;for(;s>=n&&i>=t&&this.ElementsAreEqual(s,i);)s--,i--;if(n>s||t>i){let d;return t<=i?(y.Assert(n===s+1,"originalStart should only be one more than originalEnd"),d=[new c.DiffChange(n,0,t,i-t+1)]):n<=s?(y.Assert(t===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new c.DiffChange(n,s-n+1,t,0)]):(y.Assert(n===s+1,"originalStart should only be one more than originalEnd"),y.Assert(t===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}const g=[0],u=[0],l=this.ComputeRecursionPoint(n,s,t,i,g,u,o),a=g[0],r=u[0];if(l!==null)return l;if(!o[0]){const d=this.ComputeDiffRecursive(n,a,t,r,o);let m=[];return o[0]?m=[new c.DiffChange(a+1,s-(a+1)+1,r+1,i-(r+1)+1)]:m=this.ComputeDiffRecursive(a+1,s,r+1,i,o),this.ConcatenateChanges(d,m)}return[new c.DiffChange(n,s-n+1,t,i-t+1)]}WALKTRACE(n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D){let I=null,T=null,M=new _,A=s,R=t,N=h[0]-w[0]-i,O=-1073741824,x=this.m_forwardHistory.length-1;do{const F=N+n;F===A||F<R&&a[F-1]<a[F+1]?(d=a[F+1],v=d-N-i,d<O&&M.MarkNextChange(),O=d,M.AddModifiedElement(d+1,v),N=F+1-n):(d=a[F-1]+1,v=d-N-i,d<O&&M.MarkNextChange(),O=d-1,M.AddOriginalElement(d,v+1),N=F-1-n),x>=0&&(a=this.m_forwardHistory[x],n=a[0],A=1,R=a.length-1)}while(--x>=-1);if(I=M.getReverseChanges(),D[0]){let F=h[0]+1,W=w[0]+1;if(I!==null&&I.length>0){const z=I[I.length-1];F=Math.max(F,z.getOriginalEnd()),W=Math.max(W,z.getModifiedEnd())}T=[new c.DiffChange(F,m-F+1,W,C-W+1)]}else{M=new _,A=g,R=u,N=h[0]-w[0]-l,O=1073741824,x=S?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const F=N+o;F===A||F<R&&r[F-1]>=r[F+1]?(d=r[F+1]-1,v=d-N-l,d>O&&M.MarkNextChange(),O=d+1,M.AddOriginalElement(d+1,v+1),N=F+1-o):(d=r[F-1],v=d-N-l,d>O&&M.MarkNextChange(),O=d,M.AddModifiedElement(d+1,v+1),N=F-1-o),x>=0&&(r=this.m_reverseHistory[x],o=r[0],A=1,R=r.length-1)}while(--x>=-1);T=M.getChanges()}return this.ConcatenateChanges(I,T)}ComputeRecursionPoint(n,s,t,i,o,g,u){let l=0,a=0,r=0,d=0,m=0,h=0;n--,t--,o[0]=0,g[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const v=s-n+(i-t),C=v+1,w=new Int32Array(C),S=new Int32Array(C),D=i-t,I=s-n,T=n-t,M=s-i,R=(I-D)%2===0;w[D]=n,S[I]=s,u[0]=!1;for(let N=1;N<=v/2+1;N++){let O=0,x=0;r=this.ClipDiagonalBound(D-N,N,D,C),d=this.ClipDiagonalBound(D+N,N,D,C);for(let W=r;W<=d;W+=2){W===r||W<d&&w[W-1]<w[W+1]?l=w[W+1]:l=w[W-1]+1,a=l-(W-D)-T;const z=l;for(;l<s&&a<i&&this.ElementsAreEqual(l+1,a+1);)l++,a++;if(w[W]=l,l+a>O+x&&(O=l,x=a),!R&&Math.abs(W-I)<=N-1&&l>=S[W])return o[0]=l,g[0]=a,z<=S[W]&&N<=1448?this.WALKTRACE(D,r,d,T,I,m,h,M,w,S,l,s,o,a,i,g,R,u):null}const F=(O-n+(x-t)-N)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(O,F))return u[0]=!0,o[0]=O,g[0]=x,F>0&&N<=1448?this.WALKTRACE(D,r,d,T,I,m,h,M,w,S,l,s,o,a,i,g,R,u):(n++,t++,[new c.DiffChange(n,s-n+1,t,i-t+1)]);m=this.ClipDiagonalBound(I-N,N,I,C),h=this.ClipDiagonalBound(I+N,N,I,C);for(let W=m;W<=h;W+=2){W===m||W<h&&S[W-1]>=S[W+1]?l=S[W+1]-1:l=S[W-1],a=l-(W-I)-M;const z=l;for(;l>n&&a>t&&this.ElementsAreEqual(l,a);)l--,a--;if(S[W]=l,R&&Math.abs(W-D)<=N&&l<=w[W])return o[0]=l,g[0]=a,z>=w[W]&&N<=1448?this.WALKTRACE(D,r,d,T,I,m,h,M,w,S,l,s,o,a,i,g,R,u):null}if(N<=1447){let W=new Int32Array(d-r+2);W[0]=D-r+1,f.Copy2(w,r,W,1,d-r+1),this.m_forwardHistory.push(W),W=new Int32Array(h-m+2),W[0]=I-m+1,f.Copy2(S,m,W,1,h-m+1),this.m_reverseHistory.push(W)}}return this.WALKTRACE(D,r,d,T,I,m,h,M,w,S,l,s,o,a,i,g,R,u)}PrettifyChanges(n){for(let s=0;s<n.length;s++){const t=n[s],i=s<n.length-1?n[s+1].originalStart:this._originalElementsOrHash.length,o=s<n.length-1?n[s+1].modifiedStart:this._modifiedElementsOrHash.length,g=t.originalLength>0,u=t.modifiedLength>0;for(;t.originalStart+t.originalLength<i&&t.modifiedStart+t.modifiedLength<o&&(!g||this.OriginalElementsAreEqual(t.originalStart,t.originalStart+t.originalLength))&&(!u||this.ModifiedElementsAreEqual(t.modifiedStart,t.modifiedStart+t.modifiedLength));){const a=this.ElementsAreStrictEqual(t.originalStart,t.modifiedStart);if(this.ElementsAreStrictEqual(t.originalStart+t.originalLength,t.modifiedStart+t.modifiedLength)&&!a)break;t.originalStart++,t.modifiedStart++}const l=[null];if(s<n.length-1&&this.ChangesOverlap(n[s],n[s+1],l)){n[s]=l[0],n.splice(s+1,1),s--;continue}}for(let s=n.length-1;s>=0;s--){const t=n[s];let i=0,o=0;if(s>0){const d=n[s-1];i=d.originalStart+d.originalLength,o=d.modifiedStart+d.modifiedLength}const g=t.originalLength>0,u=t.modifiedLength>0;let l=0,a=this._boundaryScore(t.originalStart,t.originalLength,t.modifiedStart,t.modifiedLength);for(let d=1;;d++){const m=t.originalStart-d,h=t.modifiedStart-d;if(m<i||h<o||g&&!this.OriginalElementsAreEqual(m,m+t.originalLength)||u&&!this.ModifiedElementsAreEqual(h,h+t.modifiedLength))break;const C=(m===i&&h===o?5:0)+this._boundaryScore(m,t.originalLength,h,t.modifiedLength);C>a&&(a=C,l=d)}t.originalStart-=l,t.modifiedStart-=l;const r=[null];if(s>0&&this.ChangesOverlap(n[s-1],n[s],r)){n[s-1]=r[0],n.splice(s,1),s++;continue}}if(this._hasStrings)for(let s=1,t=n.length;s<t;s++){const i=n[s-1],o=n[s],g=o.originalStart-i.originalStart-i.originalLength,u=i.originalStart,l=o.originalStart+o.originalLength,a=l-u,r=i.modifiedStart,d=o.modifiedStart+o.modifiedLength,m=d-r;if(g<5&&a<20&&m<20){const h=this._findBetterContiguousSequence(u,a,r,m,g);if(h){const[v,C]=h;(v!==i.originalStart+i.originalLength||C!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=v-i.originalStart,i.modifiedLength=C-i.modifiedStart,o.originalStart=v+g,o.modifiedStart=C+g,o.originalLength=l-o.originalStart,o.modifiedLength=d-o.modifiedStart)}}}return n}_findBetterContiguousSequence(n,s,t,i,o){if(s<o||i<o)return null;const g=n+s-o+1,u=t+i-o+1;let l=0,a=0,r=0;for(let d=n;d<g;d++)for(let m=t;m<u;m++){const h=this._contiguousSequenceScore(d,m,o);h>0&&h>l&&(l=h,a=d,r=m)}return l>0?[a,r]:null}_contiguousSequenceScore(n,s,t){let i=0;for(let o=0;o<t;o++){if(!this.ElementsAreEqual(n+o,s+o))return 0;i+=this._originalStringElements[n+o].length}return i}_OriginalIsBoundary(n){return n<=0||n>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[n])}_OriginalRegionIsBoundary(n,s){if(this._OriginalIsBoundary(n)||this._OriginalIsBoundary(n-1))return!0;if(s>0){const t=n+s;if(this._OriginalIsBoundary(t-1)||this._OriginalIsBoundary(t))return!0}return!1}_ModifiedIsBoundary(n){return n<=0||n>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[n])}_ModifiedRegionIsBoundary(n,s){if(this._ModifiedIsBoundary(n)||this._ModifiedIsBoundary(n-1))return!0;if(s>0){const t=n+s;if(this._ModifiedIsBoundary(t-1)||this._ModifiedIsBoundary(t))return!0}return!1}_boundaryScore(n,s,t,i){const o=this._OriginalRegionIsBoundary(n,s)?1:0,g=this._ModifiedRegionIsBoundary(t,i)?1:0;return o+g}ConcatenateChanges(n,s){const t=[];if(n.length===0||s.length===0)return s.length>0?s:n;if(this.ChangesOverlap(n[n.length-1],s[0],t)){const i=new Array(n.length+s.length-1);return f.Copy(n,0,i,0,n.length-1),i[n.length-1]=t[0],f.Copy(s,1,i,n.length,s.length-1),i}else{const i=new Array(n.length+s.length);return f.Copy(n,0,i,0,n.length),f.Copy(s,0,i,n.length,s.length),i}}ChangesOverlap(n,s,t){if(y.Assert(n.originalStart<=s.originalStart,"Left change is not less than or equal to right change"),y.Assert(n.modifiedStart<=s.modifiedStart,"Left change is not less than or equal to right change"),n.originalStart+n.originalLength>=s.originalStart||n.modifiedStart+n.modifiedLength>=s.modifiedStart){const i=n.originalStart;let o=n.originalLength;const g=n.modifiedStart;let u=n.modifiedLength;return n.originalStart+n.originalLength>=s.originalStart&&(o=s.originalStart+s.originalLength-n.originalStart),n.modifiedStart+n.modifiedLength>=s.modifiedStart&&(u=s.modifiedStart+s.modifiedLength-n.modifiedStart),t[0]=new c.DiffChange(i,o,g,u),!0}else return t[0]=null,!1}ClipDiagonalBound(n,s,t,i){if(n>=0&&n<i)return n;const o=t,g=i-t-1,u=s%2===0;if(n<0){const l=o%2===0;return u===l?0:1}else{const l=g%2===0;return u===l?i-1:i-2}}}e.LcsDiff=b}),define(oe[451],re([1,0,224,16]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeDriveLetter=E;function E(y,f=k.isWindows){return(0,c.hasDriveLetter)(y,f)?y.charAt(0).toUpperCase()+y.slice(1):y}let L=Object.create(null)}),define(oe[452],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.buildReplaceStringWithCasePreserved=k;function k(y,f){if(y&&y[0]!==""){const _=E(y,f,"-"),b=E(y,f,"_");return _&&!b?L(y,f,"-"):!_&&b?L(y,f,"_"):y[0].toUpperCase()===y[0]?f.toUpperCase():y[0].toLowerCase()===y[0]?f.toLowerCase():c.containsUppercaseCharacter(y[0][0])&&f.length>0?f[0].toUpperCase()+f.substr(1):y[0][0].toUpperCase()!==y[0][0]&&f.length>0?f[0].toLowerCase()+f.substr(1):f}else return f}function E(y,f,_){return y[0].indexOf(_)!==-1&&f.indexOf(_)!==-1&&y[0].split(_).length===f.split(_).length}function L(y,f,_){const b=f.split(_),p=y[0].split(_);let n="";return b.forEach((s,t)=>{n+=k([p[t]],s)+_}),n.slice(0,-1)}}),define(oe[110],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var k;(function(E){E[E.Ignore=0]="Ignore",E[E.Info=1]="Info",E[E.Warning=2]="Warning",E[E.Error=3]="Error"})(k||(k={})),function(E){const L="error",y="warning",f="warn",_="info",b="ignore";function p(s){return s?c.equalsIgnoreCase(L,s)?E.Error:c.equalsIgnoreCase(y,s)||c.equalsIgnoreCase(f,s)?E.Warning:c.equalsIgnoreCase(_,s)?E.Info:E.Ignore:E.Ignore}E.fromValue=p;function n(s){switch(s){case E.Error:return L;case E.Warning:return y;case E.Info:return _;default:return b}}E.toString=n}(k||(k={})),e.default=k}),define(oe[303],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(oe[14],re([1,0,18,8,6,2,16,303]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.GlobalIdleValue=e.AbstractIdleValue=e._runWhenIdle=e.runWhenGlobalIdle=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ThrottledDelayer=e.Delayer=e.Throttler=void 0,e.isThenable=_,e.createCancelablePromise=b,e.raceCancellation=p,e.timeout=g,e.disposableTimeout=u,e.first=l,e.createCancelableAsyncIterable=D;function _(I){return!!I&&typeof I.then=="function"}function b(I){const T=new c.CancellationTokenSource,M=I(T.token),A=new Promise((R,N)=>{const O=T.token.onCancellationRequested(()=>{O.dispose(),N(new k.CancellationError)});Promise.resolve(M).then(x=>{O.dispose(),T.dispose(),R(x)},x=>{O.dispose(),T.dispose(),N(x)})});return new class{cancel(){T.cancel(),T.dispose()}then(R,N){return A.then(R,N)}catch(R){return this.then(void 0,R)}finally(R){return A.finally(R)}}}function p(I,T,M){return new Promise((A,R)=>{const N=T.onCancellationRequested(()=>{N.dispose(),A(M)});I.then(A,R).finally(()=>N.dispose())})}class n{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(T){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=T,!this.queuedPromise){const M=()=>{if(this.queuedPromise=null,this.isDisposed)return;const A=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,A};this.queuedPromise=new Promise(A=>{this.activePromise.then(M,M).then(A)})}return new Promise((M,A)=>{this.queuedPromise.then(M,A)})}return this.activePromise=T(),new Promise((M,A)=>{this.activePromise.then(R=>{this.activePromise=null,M(R)},R=>{this.activePromise=null,A(R)})})}dispose(){this.isDisposed=!0}}e.Throttler=n;const s=(I,T)=>{let M=!0;const A=setTimeout(()=>{M=!1,T()},I);return{isTriggered:()=>M,dispose:()=>{clearTimeout(A),M=!1}}},t=I=>{let T=!0;return queueMicrotask(()=>{T&&(T=!1,I())}),{isTriggered:()=>T,dispose:()=>{T=!1}}};class i{constructor(T){this.defaultDelay=T,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(T,M=this.defaultDelay){this.task=T,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((R,N)=>{this.doResolve=R,this.doReject=N}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const R=this.task;return this.task=null,R()}}));const A=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=M===f.MicrotaskDelay?t(A):s(M,A),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new k.CancellationError),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}e.Delayer=i;class o{constructor(T){this.delayer=new i(T),this.throttler=new n}trigger(T,M){return this.delayer.trigger(()=>this.throttler.queue(T),M)}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}e.ThrottledDelayer=o;function g(I,T){return T?new Promise((M,A)=>{const R=setTimeout(()=>{N.dispose(),M()},I),N=T.onCancellationRequested(()=>{clearTimeout(R),N.dispose(),A(new k.CancellationError)})}):b(M=>g(I,M))}function u(I,T=0,M){const A=setTimeout(()=>{I(),M&&R.dispose()},T),R=(0,L.toDisposable)(()=>{clearTimeout(A),M?.deleteAndLeak(R)});return M?.add(R),R}function l(I,T=A=>!!A,M=null){let A=0;const R=I.length,N=()=>{if(A>=R)return Promise.resolve(M);const O=I[A++];return Promise.resolve(O()).then(F=>T(F)?Promise.resolve(F):N())};return N()}class a{constructor(T,M){this._isDisposed=!1,this._token=-1,typeof T=="function"&&typeof M=="number"&&this.setIfNotSet(T,M)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(T,M){if(this._isDisposed)throw new k.BugIndicatingError("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,T()},M)}setIfNotSet(T,M){if(this._isDisposed)throw new k.BugIndicatingError("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,T()},M))}}e.TimeoutTimer=a;class r{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(T,M,A=globalThis){if(this.isDisposed)throw new k.BugIndicatingError("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const R=A.setInterval(()=>{T()},M);this.disposable=(0,L.toDisposable)(()=>{A.clearInterval(R),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}e.IntervalTimer=r;class d{constructor(T,M){this.timeoutToken=-1,this.runner=T,this.timeout=M,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(T=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,T)}get delay(){return this.timeout}set delay(T){this.timeout=T}isScheduled(){return this.timeoutToken!==-1}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}}e.RunOnceScheduler=d,function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?e._runWhenIdle=(I,T)=>{(0,y.setTimeout0)(()=>{if(M)return;const A=Date.now()+15;T(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,A-Date.now())}}))});let M=!1;return{dispose(){M||(M=!0)}}}:e._runWhenIdle=(I,T,M)=>{const A=I.requestIdleCallback(T,typeof M=="number"?{timeout:M}:void 0);let R=!1;return{dispose(){R||(R=!0,I.cancelIdleCallback(A))}}},e.runWhenGlobalIdle=I=>(0,e._runWhenIdle)(globalThis,I)}();class m{constructor(T,M){this._didRun=!1,this._executor=()=>{try{this._value=M()}catch(A){this._error=A}finally{this._didRun=!0}},this._handle=(0,e._runWhenIdle)(T,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}e.AbstractIdleValue=m;class h extends m{constructor(T){super(globalThis,T)}}e.GlobalIdleValue=h;class v{get isRejected(){return this.outcome?.outcome===1}get isSettled(){return!!this.outcome}constructor(){this.p=new Promise((T,M)=>{this.completeCallback=T,this.errorCallback=M})}complete(T){return new Promise(M=>{this.completeCallback(T),this.outcome={outcome:0,value:T},M()})}error(T){return new Promise(M=>{this.errorCallback(T),this.outcome={outcome:1,value:T},M()})}cancel(){return this.error(new k.CancellationError)}}e.DeferredPromise=v;var C;(function(I){async function T(A){let R;const N=await Promise.all(A.map(O=>O.then(x=>x,x=>{R||(R=x)})));if(typeof R<"u")throw R;return N}I.settled=T;function M(A){return new Promise(async(R,N)=>{try{await A(R,N)}catch(O){N(O)}})}I.withAsyncBody=M})(C||(e.Promises=C={}));class w{static fromArray(T){return new w(M=>{M.emitMany(T)})}static fromPromise(T){return new w(async M=>{M.emitMany(await T)})}static fromPromises(T){return new w(async M=>{await Promise.all(T.map(async A=>M.emitOne(await A)))})}static merge(T){return new w(async M=>{await Promise.all(T.map(async A=>{for await(const R of A)M.emitOne(R)}))})}static{this.EMPTY=w.fromArray([])}constructor(T,M){this._state=0,this._results=[],this._error=null,this._onReturn=M,this._onStateChanged=new E.Emitter,queueMicrotask(async()=>{const A={emitOne:R=>this.emitOne(R),emitMany:R=>this.emitMany(R),reject:R=>this.reject(R)};try{await Promise.resolve(T(A)),this.resolve()}catch(R){this.reject(R)}finally{A.emitOne=void 0,A.emitMany=void 0,A.reject=void 0}})}[Symbol.asyncIterator](){let T=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(T<this._results.length)return{done:!1,value:this._results[T++]};if(this._state===1)return{done:!0,value:void 0};await E.Event.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(T,M){return new w(async A=>{for await(const R of T)A.emitOne(M(R))})}map(T){return w.map(this,T)}static filter(T,M){return new w(async A=>{for await(const R of T)M(R)&&A.emitOne(R)})}filter(T){return w.filter(this,T)}static coalesce(T){return w.filter(T,M=>!!M)}coalesce(){return w.coalesce(this)}static async toPromise(T){const M=[];for await(const A of T)M.push(A);return M}toPromise(){return w.toPromise(this)}emitOne(T){this._state===0&&(this._results.push(T),this._onStateChanged.fire())}emitMany(T){this._state===0&&(this._results=this._results.concat(T),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(T){this._state===0&&(this._state=2,this._error=T,this._onStateChanged.fire())}}e.AsyncIterableObject=w;class S extends w{constructor(T,M){super(M),this._source=T}cancel(){this._source.cancel()}}e.CancelableAsyncIterableObject=S;function D(I){const T=new c.CancellationTokenSource,M=I(T.token);return new S(T,async A=>{const R=T.token.onCancellationRequested(()=>{R.dispose(),T.dispose(),A.reject(new k.CancellationError)});try{for await(const N of M){if(T.token.isCancellationRequested)return;A.emitOne(N)}R.dispose(),T.dispose()}catch(N){R.dispose(),T.dispose(),A.reject(N)}})}}),define(oe[453],re([1,0,14,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollbarVisibilityController=void 0;class E extends k.Disposable{constructor(y,f,_){super(),this._visibility=y,this._visibleClassName=f,this._invisibleClassName=_,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new c.TimeoutTimer)}setVisibility(y){this._visibility!==y&&(this._visibility=y,this._updateShouldBeVisible())}setShouldBeVisible(y){this._rawShouldBeVisible=y,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const y=this._applyVisibilitySetting();this._shouldBeVisible!==y&&(this._shouldBeVisible=y,this.ensureVisibility())}setIsNeeded(y){this._isNeeded!==y&&(this._isNeeded=y,this.ensureVisibility())}setDomNode(y){this._domNode=y,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(y){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(y?" fade":"")))}}e.ScrollbarVisibilityController=E}),define(oe[225],re([1,0,157,13,14,303,190,6,53]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndexTreeModel=void 0,e.isFilterResult=b,e.getVisibleState=p;function b(t){return typeof t=="object"&&"visibility"in t&&"data"in t}function p(t){switch(t){case!0:return 1;case!1:return 0;default:return t}}function n(t){return typeof t.collapsible=="boolean"}class s{constructor(i,o,g,u={}){this.user=i,this.list=o,this.rootRef=[],this.eventBufferer=new f.EventBufferer,this._onDidChangeCollapseState=new f.Emitter,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new f.Emitter,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new f.Emitter,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new E.Delayer(L.MicrotaskDelay),this.collapseByDefault=typeof u.collapseByDefault>"u"?!1:u.collapseByDefault,this.allowNonCollapsibleParents=u.allowNonCollapsibleParents??!1,this.filter=u.filter,this.autoExpandSingleChildren=typeof u.autoExpandSingleChildren>"u"?!1:u.autoExpandSingleChildren,this.root={parent:void 0,element:g,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(i,o,g=_.Iterable.empty(),u={}){if(i.length===0)throw new c.TreeError(this.user,"Invalid tree location");u.diffIdentityProvider?this.spliceSmart(u.diffIdentityProvider,i,o,g,u):this.spliceSimple(i,o,g,u)}spliceSmart(i,o,g,u=_.Iterable.empty(),l,a=l.diffDepth??0){const{parentNode:r}=this.getParentNodeWithListIndex(o);if(!r.lastDiffIds)return this.spliceSimple(o,g,u,l);const d=[...u],m=o[o.length-1],h=new y.LcsDiff({getElements:()=>r.lastDiffIds},{getElements:()=>[...r.children.slice(0,m),...d,...r.children.slice(m+g)].map(D=>i.getId(D.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return r.lastDiffIds=void 0,this.spliceSimple(o,g,d,l);const v=o.slice(0,-1),C=(D,I,T)=>{if(a>0)for(let M=0;M<T;M++)D--,I--,this.spliceSmart(i,[...v,D,0],Number.MAX_SAFE_INTEGER,d[I].children,l,a-1)};let w=Math.min(r.children.length,m+g),S=d.length;for(const D of h.changes.sort((I,T)=>T.originalStart-I.originalStart))C(w,S,w-(D.originalStart+D.originalLength)),w=D.originalStart,S=D.modifiedStart-m,this.spliceSimple([...v,w],D.originalLength,_.Iterable.slice(d,S,S+D.modifiedLength),l);C(w,S,w)}spliceSimple(i,o,g=_.Iterable.empty(),{onDidCreateNode:u,onDidDeleteNode:l,diffIdentityProvider:a}){const{parentNode:r,listIndex:d,revealed:m,visible:h}=this.getParentNodeWithListIndex(i),v=[],C=_.Iterable.map(g,N=>this.createTreeNode(N,r,r.visible?1:0,m,v,u)),w=i[i.length-1];let S=0;for(let N=w;N>=0&&N<r.children.length;N--){const O=r.children[N];if(O.visible){S=O.visibleChildIndex;break}}const D=[];let I=0,T=0;for(const N of C)D.push(N),T+=N.renderNodeCount,N.visible&&(N.visibleChildIndex=S+I++);const M=(0,k.splice)(r.children,w,o,D);a?r.lastDiffIds?(0,k.splice)(r.lastDiffIds,w,o,D.map(N=>a.getId(N.element).toString())):r.lastDiffIds=r.children.map(N=>a.getId(N.element).toString()):r.lastDiffIds=void 0;let A=0;for(const N of M)N.visible&&A++;if(A!==0)for(let N=w+D.length;N<r.children.length;N++){const O=r.children[N];O.visible&&(O.visibleChildIndex-=A)}if(r.visibleChildrenCount+=I-A,m&&h){const N=M.reduce((O,x)=>O+(x.visible?x.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(r,T-N),this.list.splice(d,N,v)}if(M.length>0&&l){const N=O=>{l(O),O.children.forEach(N)};M.forEach(N)}this._onDidSplice.fire({insertedNodes:D,deletedNodes:M});let R=r;for(;R;){if(R.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}R=R.parent}}rerender(i){if(i.length===0)throw new c.TreeError(this.user,"Invalid tree location");const{node:o,listIndex:g,revealed:u}=this.getTreeNodeWithListIndex(i);o.visible&&u&&this.list.splice(g,1,[o])}has(i){return this.hasTreeNode(i)}getListIndex(i){const{listIndex:o,visible:g,revealed:u}=this.getTreeNodeWithListIndex(i);return g&&u?o:-1}getListRenderCount(i){return this.getTreeNode(i).renderNodeCount}isCollapsible(i){return this.getTreeNode(i).collapsible}setCollapsible(i,o){const g=this.getTreeNode(i);typeof o>"u"&&(o=!g.collapsible);const u={collapsible:o};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(i,u))}isCollapsed(i){return this.getTreeNode(i).collapsed}setCollapsed(i,o,g){const u=this.getTreeNode(i);typeof o>"u"&&(o=!u.collapsed);const l={collapsed:o,recursive:g||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(i,l))}_setCollapseState(i,o){const{node:g,listIndex:u,revealed:l}=this.getTreeNodeWithListIndex(i),a=this._setListNodeCollapseState(g,u,l,o);if(g!==this.root&&this.autoExpandSingleChildren&&a&&!n(o)&&g.collapsible&&!g.collapsed&&!o.recursive){let r=-1;for(let d=0;d<g.children.length;d++)if(g.children[d].visible)if(r>-1){r=-1;break}else r=d;r>-1&&this._setCollapseState([...i,r],o)}return a}_setListNodeCollapseState(i,o,g,u){const l=this._setNodeCollapseState(i,u,!1);if(!g||!i.visible||!l)return l;const a=i.renderNodeCount,r=this.updateNodeAfterCollapseChange(i),d=a-(o===-1?0:1);return this.list.splice(o+1,d,r.slice(1)),l}_setNodeCollapseState(i,o,g){let u;if(i===this.root?u=!1:(n(o)?(u=i.collapsible!==o.collapsible,i.collapsible=o.collapsible):i.collapsible?(u=i.collapsed!==o.collapsed,i.collapsed=o.collapsed):u=!1,u&&this._onDidChangeCollapseState.fire({node:i,deep:g})),!n(o)&&o.recursive)for(const l of i.children)u=this._setNodeCollapseState(l,o,!0)||u;return u}expandTo(i){this.eventBufferer.bufferEvents(()=>{let o=this.getTreeNode(i);for(;o.parent;)o=o.parent,i=i.slice(0,i.length-1),o.collapsed&&this._setCollapseState(i,{collapsed:!1,recursive:!1})})}refilter(){const i=this.root.renderNodeCount,o=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,i,o),this.refilterDelayer.cancel()}createTreeNode(i,o,g,u,l,a){const r={parent:o,element:i.element,children:[],depth:o.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof i.collapsible=="boolean"?i.collapsible:typeof i.collapsed<"u",collapsed:typeof i.collapsed>"u"?this.collapseByDefault:i.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},d=this._filterNode(r,g);r.visibility=d,u&&l.push(r);const m=i.children||_.Iterable.empty(),h=u&&d!==0&&!r.collapsed;let v=0,C=1;for(const w of m){const S=this.createTreeNode(w,r,d,h,l,a);r.children.push(S),C+=S.renderNodeCount,S.visible&&(S.visibleChildIndex=v++)}return this.allowNonCollapsibleParents||(r.collapsible=r.collapsible||r.children.length>0),r.visibleChildrenCount=v,r.visible=d===2?v>0:d===1,r.visible?r.collapsed||(r.renderNodeCount=C):(r.renderNodeCount=0,u&&l.pop()),a?.(r),r}updateNodeAfterCollapseChange(i){const o=i.renderNodeCount,g=[];return this._updateNodeAfterCollapseChange(i,g),this._updateAncestorsRenderNodeCount(i.parent,g.length-o),g}_updateNodeAfterCollapseChange(i,o){if(i.visible===!1)return 0;if(o.push(i),i.renderNodeCount=1,!i.collapsed)for(const g of i.children)i.renderNodeCount+=this._updateNodeAfterCollapseChange(g,o);return this._onDidChangeRenderNodeCount.fire(i),i.renderNodeCount}updateNodeAfterFilterChange(i){const o=i.renderNodeCount,g=[];return this._updateNodeAfterFilterChange(i,i.visible?1:0,g),this._updateAncestorsRenderNodeCount(i.parent,g.length-o),g}_updateNodeAfterFilterChange(i,o,g,u=!0){let l;if(i!==this.root){if(l=this._filterNode(i,o),l===0)return i.visible=!1,i.renderNodeCount=0,!1;u&&g.push(i)}const a=g.length;i.renderNodeCount=i===this.root?0:1;let r=!1;if(!i.collapsed||l!==0){let d=0;for(const m of i.children)r=this._updateNodeAfterFilterChange(m,l,g,u&&!i.collapsed)||r,m.visible&&(m.visibleChildIndex=d++);i.visibleChildrenCount=d}else i.visibleChildrenCount=0;return i!==this.root&&(i.visible=l===2?r:l===1,i.visibility=l),i.visible?i.collapsed||(i.renderNodeCount+=g.length-a):(i.renderNodeCount=0,u&&g.pop()),this._onDidChangeRenderNodeCount.fire(i),i.visible}_updateAncestorsRenderNodeCount(i,o){if(o!==0)for(;i;)i.renderNodeCount+=o,this._onDidChangeRenderNodeCount.fire(i),i=i.parent}_filterNode(i,o){const g=this.filter?this.filter.filter(i.element,o):1;return typeof g=="boolean"?(i.filterData=void 0,g?1:0):b(g)?(i.filterData=g.data,p(g.visibility)):(i.filterData=void 0,p(g))}hasTreeNode(i,o=this.root){if(!i||i.length===0)return!0;const[g,...u]=i;return g<0||g>o.children.length?!1:this.hasTreeNode(u,o.children[g])}getTreeNode(i,o=this.root){if(!i||i.length===0)return o;const[g,...u]=i;if(g<0||g>o.children.length)throw new c.TreeError(this.user,"Invalid tree location");return this.getTreeNode(u,o.children[g])}getTreeNodeWithListIndex(i){if(i.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:o,listIndex:g,revealed:u,visible:l}=this.getParentNodeWithListIndex(i),a=i[i.length-1];if(a<0||a>o.children.length)throw new c.TreeError(this.user,"Invalid tree location");const r=o.children[a];return{node:r,listIndex:g,revealed:u,visible:l&&r.visible}}getParentNodeWithListIndex(i,o=this.root,g=0,u=!0,l=!0){const[a,...r]=i;if(a<0||a>o.children.length)throw new c.TreeError(this.user,"Invalid tree location");for(let d=0;d<a;d++)g+=o.children[d].renderNodeCount;return u=u&&!o.collapsed,l=l&&o.visible,r.length===0?{parentNode:o,listIndex:g,revealed:u,visible:l}:this.getParentNodeWithListIndex(r,o.children[a],g+1,u,l)}getNode(i=[]){return this.getTreeNode(i)}getNodeLocation(i){const o=[];let g=i;for(;g.parent;)o.push(g.parent.children.indexOf(g)),g=g.parent;return o.reverse()}getParentNodeLocation(i){if(i.length!==0)return i.length===1?[]:(0,k.tail2)(i)[0]}getFirstElementChild(i){const o=this.getTreeNode(i);if(o.children.length!==0)return o.children[0].element}}e.IndexTreeModel=s}),define(oe[226],re([1,0,225,157,53]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectTreeModel=void 0;class L{constructor(f,_,b={}){this.user=f,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new c.IndexTreeModel(f,_,null,b),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,b.sorter&&(this.sorter={compare(p,n){return b.sorter.compare(p.element,n.element)}}),this.identityProvider=b.identityProvider}setChildren(f,_=E.Iterable.empty(),b={}){const p=this.getElementLocation(f);this._setChildren(p,this.preserveCollapseState(_),b)}_setChildren(f,_=E.Iterable.empty(),b){const p=new Set,n=new Set,s=i=>{if(i.element===null)return;const o=i;if(p.add(o.element),this.nodes.set(o.element,o),this.identityProvider){const g=this.identityProvider.getId(o.element).toString();n.add(g),this.nodesByIdentity.set(g,o)}b.onDidCreateNode?.(o)},t=i=>{if(i.element===null)return;const o=i;if(p.has(o.element)||this.nodes.delete(o.element),this.identityProvider){const g=this.identityProvider.getId(o.element).toString();n.has(g)||this.nodesByIdentity.delete(g)}b.onDidDeleteNode?.(o)};this.model.splice([...f,0],Number.MAX_VALUE,_,{...b,onDidCreateNode:s,onDidDeleteNode:t})}preserveCollapseState(f=E.Iterable.empty()){return this.sorter&&(f=[...f].sort(this.sorter.compare.bind(this.sorter))),E.Iterable.map(f,_=>{let b=this.nodes.get(_.element);if(!b&&this.identityProvider){const s=this.identityProvider.getId(_.element).toString();b=this.nodesByIdentity.get(s)}if(!b){let s;return typeof _.collapsed>"u"?s=void 0:_.collapsed===k.ObjectTreeElementCollapseState.Collapsed||_.collapsed===k.ObjectTreeElementCollapseState.PreserveOrCollapsed?s=!0:_.collapsed===k.ObjectTreeElementCollapseState.Expanded||_.collapsed===k.ObjectTreeElementCollapseState.PreserveOrExpanded?s=!1:s=!!_.collapsed,{..._,children:this.preserveCollapseState(_.children),collapsed:s}}const p=typeof _.collapsible=="boolean"?_.collapsible:b.collapsible;let n;return typeof _.collapsed>"u"||_.collapsed===k.ObjectTreeElementCollapseState.PreserveOrCollapsed||_.collapsed===k.ObjectTreeElementCollapseState.PreserveOrExpanded?n=b.collapsed:_.collapsed===k.ObjectTreeElementCollapseState.Collapsed?n=!0:_.collapsed===k.ObjectTreeElementCollapseState.Expanded?n=!1:n=!!_.collapsed,{..._,collapsible:p,collapsed:n,children:this.preserveCollapseState(_.children)}})}rerender(f){const _=this.getElementLocation(f);this.model.rerender(_)}getFirstElementChild(f=null){const _=this.getElementLocation(f);return this.model.getFirstElementChild(_)}has(f){return this.nodes.has(f)}getListIndex(f){const _=this.getElementLocation(f);return this.model.getListIndex(_)}getListRenderCount(f){const _=this.getElementLocation(f);return this.model.getListRenderCount(_)}isCollapsible(f){const _=this.getElementLocation(f);return this.model.isCollapsible(_)}setCollapsible(f,_){const b=this.getElementLocation(f);return this.model.setCollapsible(b,_)}isCollapsed(f){const _=this.getElementLocation(f);return this.model.isCollapsed(_)}setCollapsed(f,_,b){const p=this.getElementLocation(f);return this.model.setCollapsed(p,_,b)}expandTo(f){const _=this.getElementLocation(f);this.model.expandTo(_)}refilter(){this.model.refilter()}getNode(f=null){if(f===null)return this.model.getNode(this.model.rootRef);const _=this.nodes.get(f);if(!_)throw new k.TreeError(this.user,`Tree element not found: ${f}`);return _}getNodeLocation(f){return f.element}getParentNodeLocation(f){if(f===null)throw new k.TreeError(this.user,"Invalid getParentNodeLocation call");const _=this.nodes.get(f);if(!_)throw new k.TreeError(this.user,`Tree element not found: ${f}`);const b=this.model.getNodeLocation(_),p=this.model.getParentNodeLocation(b);return this.model.getNode(p).element}getElementLocation(f){if(f===null)return[];const _=this.nodes.get(f);if(!_)throw new k.TreeError(this.user,`Tree element not found: ${f}`);return this.model.getNodeLocation(_)}}e.ObjectTreeModel=L}),define(oe[454],re([1,0,226,157,13,6,53]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompressibleObjectTreeModel=e.DefaultElementMapper=e.CompressedObjectTreeModel=void 0,e.compress=_,e.decompress=p;function f(a){const r=[a.element],d=a.incompressible||!1;return{element:{elements:r,incompressible:d},children:y.Iterable.map(y.Iterable.from(a.children),f),collapsible:a.collapsible,collapsed:a.collapsed}}function _(a){const r=[a.element],d=a.incompressible||!1;let m,h;for(;[h,m]=y.Iterable.consume(y.Iterable.from(a.children),2),!(h.length!==1||h[0].incompressible);)a=h[0],r.push(a.element);return{element:{elements:r,incompressible:d},children:y.Iterable.map(y.Iterable.concat(h,m),_),collapsible:a.collapsible,collapsed:a.collapsed}}function b(a,r=0){let d;return r<a.element.elements.length-1?d=[b(a,r+1)]:d=y.Iterable.map(y.Iterable.from(a.children),m=>b(m,0)),r===0&&a.element.incompressible?{element:a.element.elements[r],children:d,incompressible:!0,collapsible:a.collapsible,collapsed:a.collapsed}:{element:a.element.elements[r],children:d,collapsible:a.collapsible,collapsed:a.collapsed}}function p(a){return b(a,0)}function n(a,r,d){return a.element===r?{...a,children:d}:{...a,children:y.Iterable.map(y.Iterable.from(a.children),m=>n(m,r,d))}}const s=a=>({getId(r){return r.elements.map(d=>a.getId(d).toString()).join("\0")}});class t{get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}constructor(r,d,m={}){this.user=r,this.rootRef=null,this.nodes=new Map,this.model=new c.ObjectTreeModel(r,d,m),this.enabled=typeof m.compressionEnabled>"u"?!0:m.compressionEnabled,this.identityProvider=m.identityProvider}setChildren(r,d=y.Iterable.empty(),m){const h=m.diffIdentityProvider&&s(m.diffIdentityProvider);if(r===null){const R=y.Iterable.map(d,this.enabled?_:f);this._setChildren(null,R,{diffIdentityProvider:h,diffDepth:1/0});return}const v=this.nodes.get(r);if(!v)throw new k.TreeError(this.user,"Unknown compressed tree node");const C=this.model.getNode(v),w=this.model.getParentNodeLocation(v),S=this.model.getNode(w),D=p(C),I=n(D,r,d),T=(this.enabled?_:f)(I),M=m.diffIdentityProvider?(R,N)=>m.diffIdentityProvider.getId(R)===m.diffIdentityProvider.getId(N):void 0;if((0,E.equals)(T.element.elements,C.element.elements,M)){this._setChildren(v,T.children||y.Iterable.empty(),{diffIdentityProvider:h,diffDepth:1});return}const A=S.children.map(R=>R===C?T:R);this._setChildren(S.element,A,{diffIdentityProvider:h,diffDepth:C.depth-S.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(r){if(r===this.enabled)return;this.enabled=r;const m=this.model.getNode().children,h=y.Iterable.map(m,p),v=y.Iterable.map(h,r?_:f);this._setChildren(null,v,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(r,d,m){const h=new Set,v=w=>{for(const S of w.element.elements)h.add(S),this.nodes.set(S,w.element)},C=w=>{for(const S of w.element.elements)h.has(S)||this.nodes.delete(S)};this.model.setChildren(r,d,{...m,onDidCreateNode:v,onDidDeleteNode:C})}has(r){return this.nodes.has(r)}getListIndex(r){const d=this.getCompressedNode(r);return this.model.getListIndex(d)}getListRenderCount(r){const d=this.getCompressedNode(r);return this.model.getListRenderCount(d)}getNode(r){if(typeof r>"u")return this.model.getNode();const d=this.getCompressedNode(r);return this.model.getNode(d)}getNodeLocation(r){const d=this.model.getNodeLocation(r);return d===null?null:d.elements[d.elements.length-1]}getParentNodeLocation(r){const d=this.getCompressedNode(r),m=this.model.getParentNodeLocation(d);return m===null?null:m.elements[m.elements.length-1]}getFirstElementChild(r){const d=this.getCompressedNode(r);return this.model.getFirstElementChild(d)}isCollapsible(r){const d=this.getCompressedNode(r);return this.model.isCollapsible(d)}setCollapsible(r,d){const m=this.getCompressedNode(r);return this.model.setCollapsible(m,d)}isCollapsed(r){const d=this.getCompressedNode(r);return this.model.isCollapsed(d)}setCollapsed(r,d,m){const h=this.getCompressedNode(r);return this.model.setCollapsed(h,d,m)}expandTo(r){const d=this.getCompressedNode(r);this.model.expandTo(d)}rerender(r){const d=this.getCompressedNode(r);this.model.rerender(d)}refilter(){this.model.refilter()}getCompressedNode(r){if(r===null)return null;const d=this.nodes.get(r);if(!d)throw new k.TreeError(this.user,`Tree element not found: ${r}`);return d}}e.CompressedObjectTreeModel=t;const i=a=>a[a.length-1];e.DefaultElementMapper=i;class o{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(r=>new o(this.unwrapper,r))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(r,d){this.unwrapper=r,this.node=d}}function g(a,r){return{splice(d,m,h){r.splice(d,m,h.map(v=>a.map(v)))},updateElementHeight(d,m){r.updateElementHeight(d,m)}}}function u(a,r){return{...r,identityProvider:r.identityProvider&&{getId(d){return r.identityProvider.getId(a(d))}},sorter:r.sorter&&{compare(d,m){return r.sorter.compare(d.elements[0],m.elements[0])}},filter:r.filter&&{filter(d,m){return r.filter.filter(a(d),m)}}}}class l{get onDidSplice(){return L.Event.map(this.model.onDidSplice,({insertedNodes:r,deletedNodes:d})=>({insertedNodes:r.map(m=>this.nodeMapper.map(m)),deletedNodes:d.map(m=>this.nodeMapper.map(m))}))}get onDidChangeCollapseState(){return L.Event.map(this.model.onDidChangeCollapseState,({node:r,deep:d})=>({node:this.nodeMapper.map(r),deep:d}))}get onDidChangeRenderNodeCount(){return L.Event.map(this.model.onDidChangeRenderNodeCount,r=>this.nodeMapper.map(r))}constructor(r,d,m={}){this.rootRef=null,this.elementMapper=m.elementMapper||e.DefaultElementMapper;const h=v=>this.elementMapper(v.elements);this.nodeMapper=new k.WeakMapper(v=>new o(h,v)),this.model=new t(r,g(this.nodeMapper,d),u(h,m))}setChildren(r,d=y.Iterable.empty(),m={}){this.model.setChildren(r,d,m)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(r){this.model.setCompressionEnabled(r)}has(r){return this.model.has(r)}getListIndex(r){return this.model.getListIndex(r)}getListRenderCount(r){return this.model.getListRenderCount(r)}getNode(r){return this.nodeMapper.map(this.model.getNode(r))}getNodeLocation(r){return r.element}getParentNodeLocation(r){return this.model.getParentNodeLocation(r)}getFirstElementChild(r){const d=this.model.getFirstElementChild(r);return d===null||typeof d>"u"?d:this.elementMapper(d.elements)}isCollapsible(r){return this.model.isCollapsible(r)}setCollapsible(r,d){return this.model.setCollapsible(r,d)}isCollapsed(r){return this.model.isCollapsed(r)}setCollapsed(r,d,m){return this.model.setCollapsed(r,d,m)}expandTo(r){return this.model.expandTo(r)}rerender(r){return this.model.rerender(r)}refilter(){return this.model.refilter()}getCompressedTreeNode(r=null){return this.model.getNode(r)}}e.CompressibleObjectTreeModel=l}),define(oe[304],re([1,0,14,224,45,99,16,11]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GLOB_SPLIT=e.GLOBSTAR=void 0,e.splitGlobAware=s,e.match=M,e.parse=A,e.isRelativePattern=R,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const _="[/\\\\]",b="[^/\\\\]",p=/\//g;function n(F,W){switch(F){case 0:return"";case 1:return`${b}*?`;default:return`(?:${_}|${b}+${_}${W?`|${_}${b}+`:""})*?`}}function s(F,W){if(!F)return[];const z=[];let q=!1,H=!1,K="";for(const U of F){switch(U){case W:if(!q&&!H){z.push(K),K="";continue}break;case"{":q=!0;break;case"}":q=!1;break;case"[":H=!0;break;case"]":H=!1;break}K+=U}return K&&z.push(K),z}function t(F){if(!F)return"";let W="";const z=s(F,e.GLOB_SPLIT);if(z.every(q=>q===e.GLOBSTAR))W=".*";else{let q=!1;z.forEach((H,K)=>{if(H===e.GLOBSTAR){if(q)return;W+=n(2,K===z.length-1)}else{let U=!1,Y="",Q=!1,X="";for(const G of H){if(G!=="}"&&U){Y+=G;continue}if(Q&&(G!=="]"||!X)){let P;G==="-"?P=G:(G==="^"||G==="!")&&!X?P="^":G===e.GLOB_SPLIT?P="":P=(0,f.escapeRegExpCharacters)(G),X+=P;continue}switch(G){case"{":U=!0;continue;case"[":Q=!0;continue;case"}":{const te=`(?:${s(Y,",").map(se=>t(se)).join("|")})`;W+=te,U=!1,Y="";break}case"]":{W+="["+X+"]",Q=!1,X="";break}case"?":W+=b;continue;case"*":W+=n(1);continue;default:W+=(0,f.escapeRegExpCharacters)(G)}}K<z.length-1&&(z[K+1]!==e.GLOBSTAR||K+2<z.length)&&(W+=_)}q=H===e.GLOBSTAR})}return W}const i=/^\*\*\/\*\.[\w\.-]+$/,o=/^\*\*\/([\w\.-]+)\/?$/,g=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,u=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,l=/^\*\*((\/[\w\.-]+)+)\/?$/,a=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,r=new E.LRUCache(1e4),d=function(){return!1},m=function(){return null};function h(F,W){if(!F)return m;let z;typeof F!="string"?z=F.pattern:z=F,z=z.trim();const q=`${z}_${!!W.trimForExclusions}`;let H=r.get(q);if(H)return v(H,F);let K;return i.test(z)?H=w(z.substr(4),z):(K=o.exec(C(z,W)))?H=S(K[1],z):(W.trimForExclusions?u:g).test(z)?H=D(z,W):(K=l.exec(C(z,W)))?H=I(K[1].substr(1),z,!0):(K=a.exec(C(z,W)))?H=I(K[1],z,!1):H=T(z),r.set(q,H),v(H,F)}function v(F,W){if(typeof W=="string")return F;const z=function(q,H){return(0,k.isEqualOrParent)(q,W.base,!y.isLinux)?F((0,f.ltrim)(q.substr(W.base.length),L.sep),H):null};return z.allBasenames=F.allBasenames,z.allPaths=F.allPaths,z.basenames=F.basenames,z.patterns=F.patterns,z}function C(F,W){return W.trimForExclusions&&F.endsWith("/**")?F.substr(0,F.length-2):F}function w(F,W){return function(z,q){return typeof z=="string"&&z.endsWith(F)?W:null}}function S(F,W){const z=`/${F}`,q=`\\${F}`,H=function(U,Y){return typeof U!="string"?null:Y?Y===F?W:null:U===F||U.endsWith(z)||U.endsWith(q)?W:null},K=[F];return H.basenames=K,H.patterns=[W],H.allBasenames=K,H}function D(F,W){const z=x(F.slice(1,-1).split(",").map(Y=>h(Y,W)).filter(Y=>Y!==m),F),q=z.length;if(!q)return m;if(q===1)return z[0];const H=function(Y,Q){for(let X=0,G=z.length;X<G;X++)if(z[X](Y,Q))return F;return null},K=z.find(Y=>!!Y.allBasenames);K&&(H.allBasenames=K.allBasenames);const U=z.reduce((Y,Q)=>Q.allPaths?Y.concat(Q.allPaths):Y,[]);return U.length&&(H.allPaths=U),H}function I(F,W,z){const q=L.sep===L.posix.sep,H=q?F:F.replace(p,L.sep),K=L.sep+H,U=L.posix.sep+F;let Y;return z?Y=function(Q,X){return typeof Q=="string"&&(Q===H||Q.endsWith(K)||!q&&(Q===F||Q.endsWith(U)))?W:null}:Y=function(Q,X){return typeof Q=="string"&&(Q===H||!q&&Q===F)?W:null},Y.allPaths=[(z?"*/":"./")+F],Y}function T(F){try{const W=new RegExp(`^${t(F)}$`);return function(z){return W.lastIndex=0,typeof z=="string"&&W.test(z)?F:null}}catch{return m}}function M(F,W,z){return!F||typeof W!="string"?!1:A(F)(W,void 0,z)}function A(F,W={}){if(!F)return d;if(typeof F=="string"||R(F)){const z=h(F,W);if(z===m)return d;const q=function(H,K){return!!z(H,K)};return z.allBasenames&&(q.allBasenames=z.allBasenames),z.allPaths&&(q.allPaths=z.allPaths),q}return N(F,W)}function R(F){const W=F;return W?typeof W.base=="string"&&typeof W.pattern=="string":!1}function N(F,W){const z=x(Object.getOwnPropertyNames(F).map(Y=>O(Y,F[Y],W)).filter(Y=>Y!==m)),q=z.length;if(!q)return m;if(!z.some(Y=>!!Y.requiresSiblings)){if(q===1)return z[0];const Y=function(G,P){let te;for(let se=0,ue=z.length;se<ue;se++){const ge=z[se](G,P);if(typeof ge=="string")return ge;(0,c.isThenable)(ge)&&(te||(te=[]),te.push(ge))}return te?(async()=>{for(const se of te){const ue=await se;if(typeof ue=="string")return ue}return null})():null},Q=z.find(G=>!!G.allBasenames);Q&&(Y.allBasenames=Q.allBasenames);const X=z.reduce((G,P)=>P.allPaths?G.concat(P.allPaths):G,[]);return X.length&&(Y.allPaths=X),Y}const H=function(Y,Q,X){let G,P;for(let te=0,se=z.length;te<se;te++){const ue=z[te];ue.requiresSiblings&&X&&(Q||(Q=(0,L.basename)(Y)),G||(G=Q.substr(0,Q.length-(0,L.extname)(Y).length)));const ge=ue(Y,Q,G,X);if(typeof ge=="string")return ge;(0,c.isThenable)(ge)&&(P||(P=[]),P.push(ge))}return P?(async()=>{for(const te of P){const se=await te;if(typeof se=="string")return se}return null})():null},K=z.find(Y=>!!Y.allBasenames);K&&(H.allBasenames=K.allBasenames);const U=z.reduce((Y,Q)=>Q.allPaths?Y.concat(Q.allPaths):Y,[]);return U.length&&(H.allPaths=U),H}function O(F,W,z){if(W===!1)return m;const q=h(F,z);if(q===m)return m;if(typeof W=="boolean")return q;if(W){const H=W.when;if(typeof H=="string"){const K=(U,Y,Q,X)=>{if(!X||!q(U,Y))return null;const G=H.replace("$(basename)",()=>Q),P=X(G);return(0,c.isThenable)(P)?P.then(te=>te?F:null):P?F:null};return K.requiresSiblings=!0,K}}return q}function x(F,W){const z=F.filter(Y=>!!Y.basenames);if(z.length<2)return F;const q=z.reduce((Y,Q)=>{const X=Q.basenames;return X?Y.concat(X):Y},[]);let H;if(W){H=[];for(let Y=0,Q=q.length;Y<Q;Y++)H.push(W)}else H=z.reduce((Y,Q)=>{const X=Q.patterns;return X?Y.concat(X):Y},[]);const K=function(Y,Q){if(typeof Y!="string")return null;if(!Q){let G;for(G=Y.length;G>0;G--){const P=Y.charCodeAt(G-1);if(P===47||P===92)break}Q=Y.substr(G)}const X=q.indexOf(Q);return X!==-1?H[X]:null};K.basenames=q,K.patterns=H,K.allBasenames=q;const U=F.filter(Y=>!Y.basenames);return U.push(K),U}}),define(oe[227],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TernarySearchTree=e.UriIterator=e.PathIterator=e.ConfigKeysIterator=e.StringIterator=void 0;class k{constructor(){this._value="",this._pos=0}reset(p){return this._value=p,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(p){const n=p.charCodeAt(0),s=this._value.charCodeAt(this._pos);return n-s}value(){return this._value[this._pos]}}e.StringIterator=k;class E{constructor(p=!0){this._caseSensitive=p}reset(p){return this._value=p,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let p=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(p)this._from++;else break;else p=!1;return this}cmp(p){return this._caseSensitive?(0,c.compareSubstring)(p,this._value,0,p.length,this._from,this._to):(0,c.compareSubstringIgnoreCase)(p,this._value,0,p.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.ConfigKeysIterator=E;class L{constructor(p=!0,n=!0){this._splitOnBackslash=p,this._caseSensitive=n}reset(p){this._from=0,this._to=0,this._value=p,this._valueLen=p.length;for(let n=p.length-1;n>=0;n--,this._valueLen--){const s=this._value.charCodeAt(n);if(!(s===47||this._splitOnBackslash&&s===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let p=!0;for(;this._to<this._valueLen;this._to++){const n=this._value.charCodeAt(this._to);if(n===47||this._splitOnBackslash&&n===92)if(p)this._from++;else break;else p=!1}return this}cmp(p){return this._caseSensitive?(0,c.compareSubstring)(p,this._value,0,p.length,this._from,this._to):(0,c.compareSubstringIgnoreCase)(p,this._value,0,p.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}e.PathIterator=L;class y{constructor(p,n){this._ignorePathCasing=p,this._ignoreQueryAndFragment=n,this._states=[],this._stateIdx=0}reset(p){return this._value=p,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new L(!1,!this._ignorePathCasing(p)),this._pathIterator.reset(p.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(p)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(p){if(this._states[this._stateIdx]===1)return(0,c.compareIgnoreCase)(p,this._value.scheme);if(this._states[this._stateIdx]===2)return(0,c.compareIgnoreCase)(p,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(p);if(this._states[this._stateIdx]===4)return(0,c.compare)(p,this._value.query);if(this._states[this._stateIdx]===5)return(0,c.compare)(p,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}e.UriIterator=y;class f{constructor(){this.height=1}rotateLeft(){const p=this.right;return this.right=p.left,p.left=this,this.updateHeight(),p.updateHeight(),p}rotateRight(){const p=this.left;return this.left=p.right,p.right=this,this.updateHeight(),p.updateHeight(),p}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}class _{static forUris(p=()=>!1,n=()=>!1){return new _(new y(p,n))}static forStrings(){return new _(new k)}static forConfigKeys(){return new _(new E)}constructor(p){this._iter=p}clear(){this._root=void 0}set(p,n){const s=this._iter.reset(p);let t;this._root||(this._root=new f,this._root.segment=s.value());const i=[];for(t=this._root;;){const g=s.cmp(t.segment);if(g>0)t.left||(t.left=new f,t.left.segment=s.value()),i.push([-1,t]),t=t.left;else if(g<0)t.right||(t.right=new f,t.right.segment=s.value()),i.push([1,t]),t=t.right;else if(s.hasNext())s.next(),t.mid||(t.mid=new f,t.mid.segment=s.value()),i.push([0,t]),t=t.mid;else break}const o=t.value;t.value=n,t.key=p;for(let g=i.length-1;g>=0;g--){const u=i[g][1];u.updateHeight();const l=u.balanceFactor();if(l<-1||l>1){const a=i[g][0],r=i[g+1][0];if(a===1&&r===1)i[g][1]=u.rotateLeft();else if(a===-1&&r===-1)i[g][1]=u.rotateRight();else if(a===1&&r===-1)u.right=i[g+1][1]=i[g+1][1].rotateRight(),i[g][1]=u.rotateLeft();else if(a===-1&&r===1)u.left=i[g+1][1]=i[g+1][1].rotateLeft(),i[g][1]=u.rotateRight();else throw new Error;if(g>0)switch(i[g-1][0]){case-1:i[g-1][1].left=i[g][1];break;case 1:i[g-1][1].right=i[g][1];break;case 0:i[g-1][1].mid=i[g][1];break}else this._root=i[0][1]}}return o}get(p){return this._getNode(p)?.value}_getNode(p){const n=this._iter.reset(p);let s=this._root;for(;s;){const t=n.cmp(s.segment);if(t>0)s=s.left;else if(t<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else break}return s}has(p){const n=this._getNode(p);return!(n?.value===void 0&&n?.mid===void 0)}delete(p){return this._delete(p,!1)}deleteSuperstr(p){return this._delete(p,!0)}_delete(p,n){const s=this._iter.reset(p),t=[];let i=this._root;for(;i;){const o=s.cmp(i.segment);if(o>0)t.push([-1,i]),i=i.left;else if(o<0)t.push([1,i]),i=i.right;else if(s.hasNext())s.next(),t.push([0,i]),i=i.mid;else break}if(i){if(n?(i.left=void 0,i.mid=void 0,i.right=void 0,i.height=1):(i.key=void 0,i.value=void 0),!i.mid&&!i.value)if(i.left&&i.right){const o=this._min(i.right);if(o.key){const{key:g,value:u,segment:l}=o;this._delete(o.key,!1),i.key=g,i.value=u,i.segment=l}}else{const o=i.left??i.right;if(t.length>0){const[g,u]=t[t.length-1];switch(g){case-1:u.left=o;break;case 0:u.mid=o;break;case 1:u.right=o;break}}else this._root=o}for(let o=t.length-1;o>=0;o--){const g=t[o][1];g.updateHeight();const u=g.balanceFactor();if(u>1?(g.right.balanceFactor()>=0||(g.right=g.right.rotateRight()),t[o][1]=g.rotateLeft()):u<-1&&(g.left.balanceFactor()<=0||(g.left=g.left.rotateLeft()),t[o][1]=g.rotateRight()),o>0)switch(t[o-1][0]){case-1:t[o-1][1].left=t[o][1];break;case 1:t[o-1][1].right=t[o][1];break;case 0:t[o-1][1].mid=t[o][1];break}else this._root=t[0][1]}}}_min(p){for(;p.left;)p=p.left;return p}findSubstr(p){const n=this._iter.reset(p);let s=this._root,t;for(;s;){const i=n.cmp(s.segment);if(i>0)s=s.left;else if(i<0)s=s.right;else if(n.hasNext())n.next(),t=s.value||t,s=s.mid;else break}return s&&s.value||t}findSuperstr(p){return this._findSuperstrOrElement(p,!1)}_findSuperstrOrElement(p,n){const s=this._iter.reset(p);let t=this._root;for(;t;){const i=s.cmp(t.segment);if(i>0)t=t.left;else if(i<0)t=t.right;else if(s.hasNext())s.next(),t=t.mid;else return t.mid?this._entries(t.mid):n?t.value:void 0}}forEach(p){for(const[n,s]of this)p(s,n)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(p){const n=[];return this._dfsEntries(p,n),n[Symbol.iterator]()}_dfsEntries(p,n){p&&(p.left&&this._dfsEntries(p.left,n),p.value&&n.push([p.key,p.value]),p.mid&&this._dfsEntries(p.mid,n),p.right&&this._dfsEntries(p.right,n))}}e.TernarySearchTree=_}),define(oe[455],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TfIdfCalculator=void 0,e.normalizeTfIdfScores=E;function c(L){const y=new Map;for(const f of L)y.set(f,(y.get(f)??0)+1);return y}class k{constructor(){this.chunkCount=0,this.chunkOccurrences=new Map,this.documents=new Map}calculateScores(y,f){const _=this.computeEmbedding(y),b=new Map,p=[];for(const[n,s]of this.documents){if(f.isCancellationRequested)return[];for(const t of s.chunks){const i=this.computeSimilarityScore(t,_,b);i>0&&p.push({key:n,score:i})}}return p}static termFrequencies(y){return c(k.splitTerms(y))}static*splitTerms(y){const f=_=>_.toLowerCase();for(const[_]of y.matchAll(/\b\p{Letter}[\p{Letter}\d]{2,}\b/gu)){yield f(_);const b=_.replace(/([a-z])([A-Z])/g,"$1 $2").split(/\s+/g);if(b.length>1)for(const p of b)p.length>2&&/\p{Letter}{3,}/gu.test(p)&&(yield f(p))}}updateDocuments(y){for(const{key:f}of y)this.deleteDocument(f);for(const f of y){const _=[];for(const b of f.textChunks){const p=k.termFrequencies(b);for(const n of p.keys())this.chunkOccurrences.set(n,(this.chunkOccurrences.get(n)??0)+1);_.push({text:b,tf:p})}this.chunkCount+=_.length,this.documents.set(f.key,{chunks:_})}return this}deleteDocument(y){const f=this.documents.get(y);if(f){this.documents.delete(y),this.chunkCount-=f.chunks.length;for(const _ of f.chunks)for(const b of _.tf.keys()){const p=this.chunkOccurrences.get(b);if(typeof p=="number"){const n=p-1;n<=0?this.chunkOccurrences.delete(b):this.chunkOccurrences.set(b,n)}}}}computeSimilarityScore(y,f,_){let b=0;for(const[p,n]of Object.entries(f)){const s=y.tf.get(p);if(!s)continue;let t=_.get(p);typeof t!="number"&&(t=this.computeIdf(p),_.set(p,t));const i=s*t;b+=i*n}return b}computeEmbedding(y){const f=k.termFrequencies(y);return this.computeTfidf(f)}computeIdf(y){const f=this.chunkOccurrences.get(y)??0;return f>0?Math.log((this.chunkCount+1)/f):0}computeTfidf(y){const f=Object.create(null);for(const[_,b]of y){const p=this.computeIdf(_);p>0&&(f[_]=b*p)}return f}}e.TfIdfCalculator=k;function E(L){const y=L.slice(0);y.sort((_,b)=>b.score-_.score);const f=y[0]?.score??0;if(f>0)for(const _ of y)_.score/=f;return y}}),define(oe[19],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isString=c,e.isObject=k,e.isTypedArray=E,e.isNumber=L,e.isIterable=y,e.isBoolean=f,e.isUndefined=_,e.isDefined=b,e.isUndefinedOrNull=p,e.assertType=n,e.assertIsDefined=s,e.isFunction=t,e.validateConstraints=i,e.validateConstraint=o;function c(g){return typeof g=="string"}function k(g){return typeof g=="object"&&g!==null&&!Array.isArray(g)&&!(g instanceof RegExp)&&!(g instanceof Date)}function E(g){const u=Object.getPrototypeOf(Uint8Array);return typeof g=="object"&&g instanceof u}function L(g){return typeof g=="number"&&!isNaN(g)}function y(g){return!!g&&typeof g[Symbol.iterator]=="function"}function f(g){return g===!0||g===!1}function _(g){return typeof g>"u"}function b(g){return!p(g)}function p(g){return _(g)||g===null}function n(g,u){if(!g)throw new Error(u?`Unexpected type, expected '${u}'`:"Unexpected type")}function s(g){if(p(g))throw new Error("Assertion Failed: argument is undefined or null");return g}function t(g){return typeof g=="function"}function i(g,u){const l=Math.min(g.length,u.length);for(let a=0;a<l;a++)o(g[a],u[a])}function o(g,u){if(c(u)){if(typeof g!==u)throw new Error(`argument does not match constraint: typeof ${u}`)}else if(t(u)){try{if(g instanceof u)return}catch{}if(!p(g)&&g.constructor===u||u.length===1&&u.call(void 0,g)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}}),define(oe[191],re([1,0,19]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.register=E,e.getCodiconFontCharacters=L;const k=Object.create(null);function E(y,f){if((0,c.isString)(f)){const _=k[f];if(_===void 0)throw new Error(`${y} references an unknown codicon: ${f}`);f=_}return k[y]=f,{id:y}}function L(){return k}}),define(oe[456],re([1,0,191]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.codiconsLibrary=void 0,e.codiconsLibrary={add:(0,c.register)("add",6e4),plus:(0,c.register)("plus",6e4),gistNew:(0,c.register)("gist-new",6e4),repoCreate:(0,c.register)("repo-create",6e4),lightbulb:(0,c.register)("lightbulb",60001),lightBulb:(0,c.register)("light-bulb",60001),repo:(0,c.register)("repo",60002),repoDelete:(0,c.register)("repo-delete",60002),gistFork:(0,c.register)("gist-fork",60003),repoForked:(0,c.register)("repo-forked",60003),gitPullRequest:(0,c.register)("git-pull-request",60004),gitPullRequestAbandoned:(0,c.register)("git-pull-request-abandoned",60004),recordKeys:(0,c.register)("record-keys",60005),keyboard:(0,c.register)("keyboard",60005),tag:(0,c.register)("tag",60006),gitPullRequestLabel:(0,c.register)("git-pull-request-label",60006),tagAdd:(0,c.register)("tag-add",60006),tagRemove:(0,c.register)("tag-remove",60006),person:(0,c.register)("person",60007),personFollow:(0,c.register)("person-follow",60007),personOutline:(0,c.register)("person-outline",60007),personFilled:(0,c.register)("person-filled",60007),gitBranch:(0,c.register)("git-branch",60008),gitBranchCreate:(0,c.register)("git-branch-create",60008),gitBranchDelete:(0,c.register)("git-branch-delete",60008),sourceControl:(0,c.register)("source-control",60008),mirror:(0,c.register)("mirror",60009),mirrorPublic:(0,c.register)("mirror-public",60009),star:(0,c.register)("star",60010),starAdd:(0,c.register)("star-add",60010),starDelete:(0,c.register)("star-delete",60010),starEmpty:(0,c.register)("star-empty",60010),comment:(0,c.register)("comment",60011),commentAdd:(0,c.register)("comment-add",60011),alert:(0,c.register)("alert",60012),warning:(0,c.register)("warning",60012),search:(0,c.register)("search",60013),searchSave:(0,c.register)("search-save",60013),logOut:(0,c.register)("log-out",60014),signOut:(0,c.register)("sign-out",60014),logIn:(0,c.register)("log-in",60015),signIn:(0,c.register)("sign-in",60015),eye:(0,c.register)("eye",60016),eyeUnwatch:(0,c.register)("eye-unwatch",60016),eyeWatch:(0,c.register)("eye-watch",60016),circleFilled:(0,c.register)("circle-filled",60017),primitiveDot:(0,c.register)("primitive-dot",60017),closeDirty:(0,c.register)("close-dirty",60017),debugBreakpoint:(0,c.register)("debug-breakpoint",60017),debugBreakpointDisabled:(0,c.register)("debug-breakpoint-disabled",60017),debugHint:(0,c.register)("debug-hint",60017),terminalDecorationSuccess:(0,c.register)("terminal-decoration-success",60017),primitiveSquare:(0,c.register)("primitive-square",60018),edit:(0,c.register)("edit",60019),pencil:(0,c.register)("pencil",60019),info:(0,c.register)("info",60020),issueOpened:(0,c.register)("issue-opened",60020),gistPrivate:(0,c.register)("gist-private",60021),gitForkPrivate:(0,c.register)("git-fork-private",60021),lock:(0,c.register)("lock",60021),mirrorPrivate:(0,c.register)("mirror-private",60021),close:(0,c.register)("close",60022),removeClose:(0,c.register)("remove-close",60022),x:(0,c.register)("x",60022),repoSync:(0,c.register)("repo-sync",60023),sync:(0,c.register)("sync",60023),clone:(0,c.register)("clone",60024),desktopDownload:(0,c.register)("desktop-download",60024),beaker:(0,c.register)("beaker",60025),microscope:(0,c.register)("microscope",60025),vm:(0,c.register)("vm",60026),deviceDesktop:(0,c.register)("device-desktop",60026),file:(0,c.register)("file",60027),fileText:(0,c.register)("file-text",60027),more:(0,c.register)("more",60028),ellipsis:(0,c.register)("ellipsis",60028),kebabHorizontal:(0,c.register)("kebab-horizontal",60028),mailReply:(0,c.register)("mail-reply",60029),reply:(0,c.register)("reply",60029),organization:(0,c.register)("organization",60030),organizationFilled:(0,c.register)("organization-filled",60030),organizationOutline:(0,c.register)("organization-outline",60030),newFile:(0,c.register)("new-file",60031),fileAdd:(0,c.register)("file-add",60031),newFolder:(0,c.register)("new-folder",60032),fileDirectoryCreate:(0,c.register)("file-directory-create",60032),trash:(0,c.register)("trash",60033),trashcan:(0,c.register)("trashcan",60033),history:(0,c.register)("history",60034),clock:(0,c.register)("clock",60034),folder:(0,c.register)("folder",60035),fileDirectory:(0,c.register)("file-directory",60035),symbolFolder:(0,c.register)("symbol-folder",60035),logoGithub:(0,c.register)("logo-github",60036),markGithub:(0,c.register)("mark-github",60036),github:(0,c.register)("github",60036),terminal:(0,c.register)("terminal",60037),console:(0,c.register)("console",60037),repl:(0,c.register)("repl",60037),zap:(0,c.register)("zap",60038),symbolEvent:(0,c.register)("symbol-event",60038),error:(0,c.register)("error",60039),stop:(0,c.register)("stop",60039),variable:(0,c.register)("variable",60040),symbolVariable:(0,c.register)("symbol-variable",60040),array:(0,c.register)("array",60042),symbolArray:(0,c.register)("symbol-array",60042),symbolModule:(0,c.register)("symbol-module",60043),symbolPackage:(0,c.register)("symbol-package",60043),symbolNamespace:(0,c.register)("symbol-namespace",60043),symbolObject:(0,c.register)("symbol-object",60043),symbolMethod:(0,c.register)("symbol-method",60044),symbolFunction:(0,c.register)("symbol-function",60044),symbolConstructor:(0,c.register)("symbol-constructor",60044),symbolBoolean:(0,c.register)("symbol-boolean",60047),symbolNull:(0,c.register)("symbol-null",60047),symbolNumeric:(0,c.register)("symbol-numeric",60048),symbolNumber:(0,c.register)("symbol-number",60048),symbolStructure:(0,c.register)("symbol-structure",60049),symbolStruct:(0,c.register)("symbol-struct",60049),symbolParameter:(0,c.register)("symbol-parameter",60050),symbolTypeParameter:(0,c.register)("symbol-type-parameter",60050),symbolKey:(0,c.register)("symbol-key",60051),symbolText:(0,c.register)("symbol-text",60051),symbolReference:(0,c.register)("symbol-reference",60052),goToFile:(0,c.register)("go-to-file",60052),symbolEnum:(0,c.register)("symbol-enum",60053),symbolValue:(0,c.register)("symbol-value",60053),symbolRuler:(0,c.register)("symbol-ruler",60054),symbolUnit:(0,c.register)("symbol-unit",60054),activateBreakpoints:(0,c.register)("activate-breakpoints",60055),archive:(0,c.register)("archive",60056),arrowBoth:(0,c.register)("arrow-both",60057),arrowDown:(0,c.register)("arrow-down",60058),arrowLeft:(0,c.register)("arrow-left",60059),arrowRight:(0,c.register)("arrow-right",60060),arrowSmallDown:(0,c.register)("arrow-small-down",60061),arrowSmallLeft:(0,c.register)("arrow-small-left",60062),arrowSmallRight:(0,c.register)("arrow-small-right",60063),arrowSmallUp:(0,c.register)("arrow-small-up",60064),arrowUp:(0,c.register)("arrow-up",60065),bell:(0,c.register)("bell",60066),bold:(0,c.register)("bold",60067),book:(0,c.register)("book",60068),bookmark:(0,c.register)("bookmark",60069),debugBreakpointConditionalUnverified:(0,c.register)("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:(0,c.register)("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:(0,c.register)("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:(0,c.register)("debug-breakpoint-data-unverified",60072),debugBreakpointData:(0,c.register)("debug-breakpoint-data",60073),debugBreakpointDataDisabled:(0,c.register)("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:(0,c.register)("debug-breakpoint-log-unverified",60074),debugBreakpointLog:(0,c.register)("debug-breakpoint-log",60075),debugBreakpointLogDisabled:(0,c.register)("debug-breakpoint-log-disabled",60075),briefcase:(0,c.register)("briefcase",60076),broadcast:(0,c.register)("broadcast",60077),browser:(0,c.register)("browser",60078),bug:(0,c.register)("bug",60079),calendar:(0,c.register)("calendar",60080),caseSensitive:(0,c.register)("case-sensitive",60081),check:(0,c.register)("check",60082),checklist:(0,c.register)("checklist",60083),chevronDown:(0,c.register)("chevron-down",60084),chevronLeft:(0,c.register)("chevron-left",60085),chevronRight:(0,c.register)("chevron-right",60086),chevronUp:(0,c.register)("chevron-up",60087),chromeClose:(0,c.register)("chrome-close",60088),chromeMaximize:(0,c.register)("chrome-maximize",60089),chromeMinimize:(0,c.register)("chrome-minimize",60090),chromeRestore:(0,c.register)("chrome-restore",60091),circleOutline:(0,c.register)("circle-outline",60092),circle:(0,c.register)("circle",60092),debugBreakpointUnverified:(0,c.register)("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:(0,c.register)("terminal-decoration-incomplete",60092),circleSlash:(0,c.register)("circle-slash",60093),circuitBoard:(0,c.register)("circuit-board",60094),clearAll:(0,c.register)("clear-all",60095),clippy:(0,c.register)("clippy",60096),closeAll:(0,c.register)("close-all",60097),cloudDownload:(0,c.register)("cloud-download",60098),cloudUpload:(0,c.register)("cloud-upload",60099),code:(0,c.register)("code",60100),collapseAll:(0,c.register)("collapse-all",60101),colorMode:(0,c.register)("color-mode",60102),commentDiscussion:(0,c.register)("comment-discussion",60103),creditCard:(0,c.register)("credit-card",60105),dash:(0,c.register)("dash",60108),dashboard:(0,c.register)("dashboard",60109),database:(0,c.register)("database",60110),debugContinue:(0,c.register)("debug-continue",60111),debugDisconnect:(0,c.register)("debug-disconnect",60112),debugPause:(0,c.register)("debug-pause",60113),debugRestart:(0,c.register)("debug-restart",60114),debugStart:(0,c.register)("debug-start",60115),debugStepInto:(0,c.register)("debug-step-into",60116),debugStepOut:(0,c.register)("debug-step-out",60117),debugStepOver:(0,c.register)("debug-step-over",60118),debugStop:(0,c.register)("debug-stop",60119),debug:(0,c.register)("debug",60120),deviceCameraVideo:(0,c.register)("device-camera-video",60121),deviceCamera:(0,c.register)("device-camera",60122),deviceMobile:(0,c.register)("device-mobile",60123),diffAdded:(0,c.register)("diff-added",60124),diffIgnored:(0,c.register)("diff-ignored",60125),diffModified:(0,c.register)("diff-modified",60126),diffRemoved:(0,c.register)("diff-removed",60127),diffRenamed:(0,c.register)("diff-renamed",60128),diff:(0,c.register)("diff",60129),diffSidebyside:(0,c.register)("diff-sidebyside",60129),discard:(0,c.register)("discard",60130),editorLayout:(0,c.register)("editor-layout",60131),emptyWindow:(0,c.register)("empty-window",60132),exclude:(0,c.register)("exclude",60133),extensions:(0,c.register)("extensions",60134),eyeClosed:(0,c.register)("eye-closed",60135),fileBinary:(0,c.register)("file-binary",60136),fileCode:(0,c.register)("file-code",60137),fileMedia:(0,c.register)("file-media",60138),filePdf:(0,c.register)("file-pdf",60139),fileSubmodule:(0,c.register)("file-submodule",60140),fileSymlinkDirectory:(0,c.register)("file-symlink-directory",60141),fileSymlinkFile:(0,c.register)("file-symlink-file",60142),fileZip:(0,c.register)("file-zip",60143),files:(0,c.register)("files",60144),filter:(0,c.register)("filter",60145),flame:(0,c.register)("flame",60146),foldDown:(0,c.register)("fold-down",60147),foldUp:(0,c.register)("fold-up",60148),fold:(0,c.register)("fold",60149),folderActive:(0,c.register)("folder-active",60150),folderOpened:(0,c.register)("folder-opened",60151),gear:(0,c.register)("gear",60152),gift:(0,c.register)("gift",60153),gistSecret:(0,c.register)("gist-secret",60154),gist:(0,c.register)("gist",60155),gitCommit:(0,c.register)("git-commit",60156),gitCompare:(0,c.register)("git-compare",60157),compareChanges:(0,c.register)("compare-changes",60157),gitMerge:(0,c.register)("git-merge",60158),githubAction:(0,c.register)("github-action",60159),githubAlt:(0,c.register)("github-alt",60160),globe:(0,c.register)("globe",60161),grabber:(0,c.register)("grabber",60162),graph:(0,c.register)("graph",60163),gripper:(0,c.register)("gripper",60164),heart:(0,c.register)("heart",60165),home:(0,c.register)("home",60166),horizontalRule:(0,c.register)("horizontal-rule",60167),hubot:(0,c.register)("hubot",60168),inbox:(0,c.register)("inbox",60169),issueReopened:(0,c.register)("issue-reopened",60171),issues:(0,c.register)("issues",60172),italic:(0,c.register)("italic",60173),jersey:(0,c.register)("jersey",60174),json:(0,c.register)("json",60175),kebabVertical:(0,c.register)("kebab-vertical",60176),key:(0,c.register)("key",60177),law:(0,c.register)("law",60178),lightbulbAutofix:(0,c.register)("lightbulb-autofix",60179),linkExternal:(0,c.register)("link-external",60180),link:(0,c.register)("link",60181),listOrdered:(0,c.register)("list-ordered",60182),listUnordered:(0,c.register)("list-unordered",60183),liveShare:(0,c.register)("live-share",60184),loading:(0,c.register)("loading",60185),location:(0,c.register)("location",60186),mailRead:(0,c.register)("mail-read",60187),mail:(0,c.register)("mail",60188),markdown:(0,c.register)("markdown",60189),megaphone:(0,c.register)("megaphone",60190),mention:(0,c.register)("mention",60191),milestone:(0,c.register)("milestone",60192),gitPullRequestMilestone:(0,c.register)("git-pull-request-milestone",60192),mortarBoard:(0,c.register)("mortar-board",60193),move:(0,c.register)("move",60194),multipleWindows:(0,c.register)("multiple-windows",60195),mute:(0,c.register)("mute",60196),noNewline:(0,c.register)("no-newline",60197),note:(0,c.register)("note",60198),octoface:(0,c.register)("octoface",60199),openPreview:(0,c.register)("open-preview",60200),package:(0,c.register)("package",60201),paintcan:(0,c.register)("paintcan",60202),pin:(0,c.register)("pin",60203),play:(0,c.register)("play",60204),run:(0,c.register)("run",60204),plug:(0,c.register)("plug",60205),preserveCase:(0,c.register)("preserve-case",60206),preview:(0,c.register)("preview",60207),project:(0,c.register)("project",60208),pulse:(0,c.register)("pulse",60209),question:(0,c.register)("question",60210),quote:(0,c.register)("quote",60211),radioTower:(0,c.register)("radio-tower",60212),reactions:(0,c.register)("reactions",60213),references:(0,c.register)("references",60214),refresh:(0,c.register)("refresh",60215),regex:(0,c.register)("regex",60216),remoteExplorer:(0,c.register)("remote-explorer",60217),remote:(0,c.register)("remote",60218),remove:(0,c.register)("remove",60219),replaceAll:(0,c.register)("replace-all",60220),replace:(0,c.register)("replace",60221),repoClone:(0,c.register)("repo-clone",60222),repoForcePush:(0,c.register)("repo-force-push",60223),repoPull:(0,c.register)("repo-pull",60224),repoPush:(0,c.register)("repo-push",60225),report:(0,c.register)("report",60226),requestChanges:(0,c.register)("request-changes",60227),rocket:(0,c.register)("rocket",60228),rootFolderOpened:(0,c.register)("root-folder-opened",60229),rootFolder:(0,c.register)("root-folder",60230),rss:(0,c.register)("rss",60231),ruby:(0,c.register)("ruby",60232),saveAll:(0,c.register)("save-all",60233),saveAs:(0,c.register)("save-as",60234),save:(0,c.register)("save",60235),screenFull:(0,c.register)("screen-full",60236),screenNormal:(0,c.register)("screen-normal",60237),searchStop:(0,c.register)("search-stop",60238),server:(0,c.register)("server",60240),settingsGear:(0,c.register)("settings-gear",60241),settings:(0,c.register)("settings",60242),shield:(0,c.register)("shield",60243),smiley:(0,c.register)("smiley",60244),sortPrecedence:(0,c.register)("sort-precedence",60245),splitHorizontal:(0,c.register)("split-horizontal",60246),splitVertical:(0,c.register)("split-vertical",60247),squirrel:(0,c.register)("squirrel",60248),starFull:(0,c.register)("star-full",60249),starHalf:(0,c.register)("star-half",60250),symbolClass:(0,c.register)("symbol-class",60251),symbolColor:(0,c.register)("symbol-color",60252),symbolConstant:(0,c.register)("symbol-constant",60253),symbolEnumMember:(0,c.register)("symbol-enum-member",60254),symbolField:(0,c.register)("symbol-field",60255),symbolFile:(0,c.register)("symbol-file",60256),symbolInterface:(0,c.register)("symbol-interface",60257),symbolKeyword:(0,c.register)("symbol-keyword",60258),symbolMisc:(0,c.register)("symbol-misc",60259),symbolOperator:(0,c.register)("symbol-operator",60260),symbolProperty:(0,c.register)("symbol-property",60261),wrench:(0,c.register)("wrench",60261),wrenchSubaction:(0,c.register)("wrench-subaction",60261),symbolSnippet:(0,c.register)("symbol-snippet",60262),tasklist:(0,c.register)("tasklist",60263),telescope:(0,c.register)("telescope",60264),textSize:(0,c.register)("text-size",60265),threeBars:(0,c.register)("three-bars",60266),thumbsdown:(0,c.register)("thumbsdown",60267),thumbsup:(0,c.register)("thumbsup",60268),tools:(0,c.register)("tools",60269),triangleDown:(0,c.register)("triangle-down",60270),triangleLeft:(0,c.register)("triangle-left",60271),triangleRight:(0,c.register)("triangle-right",60272),triangleUp:(0,c.register)("triangle-up",60273),twitter:(0,c.register)("twitter",60274),unfold:(0,c.register)("unfold",60275),unlock:(0,c.register)("unlock",60276),unmute:(0,c.register)("unmute",60277),unverified:(0,c.register)("unverified",60278),verified:(0,c.register)("verified",60279),versions:(0,c.register)("versions",60280),vmActive:(0,c.register)("vm-active",60281),vmOutline:(0,c.register)("vm-outline",60282),vmRunning:(0,c.register)("vm-running",60283),watch:(0,c.register)("watch",60284),whitespace:(0,c.register)("whitespace",60285),wholeWord:(0,c.register)("whole-word",60286),window:(0,c.register)("window",60287),wordWrap:(0,c.register)("word-wrap",60288),zoomIn:(0,c.register)("zoom-in",60289),zoomOut:(0,c.register)("zoom-out",60290),listFilter:(0,c.register)("list-filter",60291),listFlat:(0,c.register)("list-flat",60292),listSelection:(0,c.register)("list-selection",60293),selection:(0,c.register)("selection",60293),listTree:(0,c.register)("list-tree",60294),debugBreakpointFunctionUnverified:(0,c.register)("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:(0,c.register)("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:(0,c.register)("debug-breakpoint-function-disabled",60296),debugStackframeActive:(0,c.register)("debug-stackframe-active",60297),circleSmallFilled:(0,c.register)("circle-small-filled",60298),debugStackframeDot:(0,c.register)("debug-stackframe-dot",60298),terminalDecorationMark:(0,c.register)("terminal-decoration-mark",60298),debugStackframe:(0,c.register)("debug-stackframe",60299),debugStackframeFocused:(0,c.register)("debug-stackframe-focused",60299),debugBreakpointUnsupported:(0,c.register)("debug-breakpoint-unsupported",60300),symbolString:(0,c.register)("symbol-string",60301),debugReverseContinue:(0,c.register)("debug-reverse-continue",60302),debugStepBack:(0,c.register)("debug-step-back",60303),debugRestartFrame:(0,c.register)("debug-restart-frame",60304),debugAlt:(0,c.register)("debug-alt",60305),callIncoming:(0,c.register)("call-incoming",60306),callOutgoing:(0,c.register)("call-outgoing",60307),menu:(0,c.register)("menu",60308),expandAll:(0,c.register)("expand-all",60309),feedback:(0,c.register)("feedback",60310),gitPullRequestReviewer:(0,c.register)("git-pull-request-reviewer",60310),groupByRefType:(0,c.register)("group-by-ref-type",60311),ungroupByRefType:(0,c.register)("ungroup-by-ref-type",60312),account:(0,c.register)("account",60313),gitPullRequestAssignee:(0,c.register)("git-pull-request-assignee",60313),bellDot:(0,c.register)("bell-dot",60314),debugConsole:(0,c.register)("debug-console",60315),library:(0,c.register)("library",60316),output:(0,c.register)("output",60317),runAll:(0,c.register)("run-all",60318),syncIgnored:(0,c.register)("sync-ignored",60319),pinned:(0,c.register)("pinned",60320),githubInverted:(0,c.register)("github-inverted",60321),serverProcess:(0,c.register)("server-process",60322),serverEnvironment:(0,c.register)("server-environment",60323),pass:(0,c.register)("pass",60324),issueClosed:(0,c.register)("issue-closed",60324),stopCircle:(0,c.register)("stop-circle",60325),playCircle:(0,c.register)("play-circle",60326),record:(0,c.register)("record",60327),debugAltSmall:(0,c.register)("debug-alt-small",60328),vmConnect:(0,c.register)("vm-connect",60329),cloud:(0,c.register)("cloud",60330),merge:(0,c.register)("merge",60331),export:(0,c.register)("export",60332),graphLeft:(0,c.register)("graph-left",60333),magnet:(0,c.register)("magnet",60334),notebook:(0,c.register)("notebook",60335),redo:(0,c.register)("redo",60336),checkAll:(0,c.register)("check-all",60337),pinnedDirty:(0,c.register)("pinned-dirty",60338),passFilled:(0,c.register)("pass-filled",60339),circleLargeFilled:(0,c.register)("circle-large-filled",60340),circleLarge:(0,c.register)("circle-large",60341),circleLargeOutline:(0,c.register)("circle-large-outline",60341),combine:(0,c.register)("combine",60342),gather:(0,c.register)("gather",60342),table:(0,c.register)("table",60343),variableGroup:(0,c.register)("variable-group",60344),typeHierarchy:(0,c.register)("type-hierarchy",60345),typeHierarchySub:(0,c.register)("type-hierarchy-sub",60346),typeHierarchySuper:(0,c.register)("type-hierarchy-super",60347),gitPullRequestCreate:(0,c.register)("git-pull-request-create",60348),runAbove:(0,c.register)("run-above",60349),runBelow:(0,c.register)("run-below",60350),notebookTemplate:(0,c.register)("notebook-template",60351),debugRerun:(0,c.register)("debug-rerun",60352),workspaceTrusted:(0,c.register)("workspace-trusted",60353),workspaceUntrusted:(0,c.register)("workspace-untrusted",60354),workspaceUnknown:(0,c.register)("workspace-unknown",60355),terminalCmd:(0,c.register)("terminal-cmd",60356),terminalDebian:(0,c.register)("terminal-debian",60357),terminalLinux:(0,c.register)("terminal-linux",60358),terminalPowershell:(0,c.register)("terminal-powershell",60359),terminalTmux:(0,c.register)("terminal-tmux",60360),terminalUbuntu:(0,c.register)("terminal-ubuntu",60361),terminalBash:(0,c.register)("terminal-bash",60362),arrowSwap:(0,c.register)("arrow-swap",60363),copy:(0,c.register)("copy",60364),personAdd:(0,c.register)("person-add",60365),filterFilled:(0,c.register)("filter-filled",60366),wand:(0,c.register)("wand",60367),debugLineByLine:(0,c.register)("debug-line-by-line",60368),inspect:(0,c.register)("inspect",60369),layers:(0,c.register)("layers",60370),layersDot:(0,c.register)("layers-dot",60371),layersActive:(0,c.register)("layers-active",60372),compass:(0,c.register)("compass",60373),compassDot:(0,c.register)("compass-dot",60374),compassActive:(0,c.register)("compass-active",60375),azure:(0,c.register)("azure",60376),issueDraft:(0,c.register)("issue-draft",60377),gitPullRequestClosed:(0,c.register)("git-pull-request-closed",60378),gitPullRequestDraft:(0,c.register)("git-pull-request-draft",60379),debugAll:(0,c.register)("debug-all",60380),debugCoverage:(0,c.register)("debug-coverage",60381),runErrors:(0,c.register)("run-errors",60382),folderLibrary:(0,c.register)("folder-library",60383),debugContinueSmall:(0,c.register)("debug-continue-small",60384),beakerStop:(0,c.register)("beaker-stop",60385),graphLine:(0,c.register)("graph-line",60386),graphScatter:(0,c.register)("graph-scatter",60387),pieChart:(0,c.register)("pie-chart",60388),bracket:(0,c.register)("bracket",60175),bracketDot:(0,c.register)("bracket-dot",60389),bracketError:(0,c.register)("bracket-error",60390),lockSmall:(0,c.register)("lock-small",60391),azureDevops:(0,c.register)("azure-devops",60392),verifiedFilled:(0,c.register)("verified-filled",60393),newline:(0,c.register)("newline",60394),layout:(0,c.register)("layout",60395),layoutActivitybarLeft:(0,c.register)("layout-activitybar-left",60396),layoutActivitybarRight:(0,c.register)("layout-activitybar-right",60397),layoutPanelLeft:(0,c.register)("layout-panel-left",60398),layoutPanelCenter:(0,c.register)("layout-panel-center",60399),layoutPanelJustify:(0,c.register)("layout-panel-justify",60400),layoutPanelRight:(0,c.register)("layout-panel-right",60401),layoutPanel:(0,c.register)("layout-panel",60402),layoutSidebarLeft:(0,c.register)("layout-sidebar-left",60403),layoutSidebarRight:(0,c.register)("layout-sidebar-right",60404),layoutStatusbar:(0,c.register)("layout-statusbar",60405),layoutMenubar:(0,c.register)("layout-menubar",60406),layoutCentered:(0,c.register)("layout-centered",60407),target:(0,c.register)("target",60408),indent:(0,c.register)("indent",60409),recordSmall:(0,c.register)("record-small",60410),errorSmall:(0,c.register)("error-small",60411),terminalDecorationError:(0,c.register)("terminal-decoration-error",60411),arrowCircleDown:(0,c.register)("arrow-circle-down",60412),arrowCircleLeft:(0,c.register)("arrow-circle-left",60413),arrowCircleRight:(0,c.register)("arrow-circle-right",60414),arrowCircleUp:(0,c.register)("arrow-circle-up",60415),layoutSidebarRightOff:(0,c.register)("layout-sidebar-right-off",60416),layoutPanelOff:(0,c.register)("layout-panel-off",60417),layoutSidebarLeftOff:(0,c.register)("layout-sidebar-left-off",60418),blank:(0,c.register)("blank",60419),heartFilled:(0,c.register)("heart-filled",60420),map:(0,c.register)("map",60421),mapHorizontal:(0,c.register)("map-horizontal",60421),foldHorizontal:(0,c.register)("fold-horizontal",60421),mapFilled:(0,c.register)("map-filled",60422),mapHorizontalFilled:(0,c.register)("map-horizontal-filled",60422),foldHorizontalFilled:(0,c.register)("fold-horizontal-filled",60422),circleSmall:(0,c.register)("circle-small",60423),bellSlash:(0,c.register)("bell-slash",60424),bellSlashDot:(0,c.register)("bell-slash-dot",60425),commentUnresolved:(0,c.register)("comment-unresolved",60426),gitPullRequestGoToChanges:(0,c.register)("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:(0,c.register)("git-pull-request-new-changes",60428),searchFuzzy:(0,c.register)("search-fuzzy",60429),commentDraft:(0,c.register)("comment-draft",60430),send:(0,c.register)("send",60431),sparkle:(0,c.register)("sparkle",60432),insert:(0,c.register)("insert",60433),mic:(0,c.register)("mic",60434),thumbsdownFilled:(0,c.register)("thumbsdown-filled",60435),thumbsupFilled:(0,c.register)("thumbsup-filled",60436),coffee:(0,c.register)("coffee",60437),snake:(0,c.register)("snake",60438),game:(0,c.register)("game",60439),vr:(0,c.register)("vr",60440),chip:(0,c.register)("chip",60441),piano:(0,c.register)("piano",60442),music:(0,c.register)("music",60443),micFilled:(0,c.register)("mic-filled",60444),repoFetch:(0,c.register)("repo-fetch",60445),copilot:(0,c.register)("copilot",60446),lightbulbSparkle:(0,c.register)("lightbulb-sparkle",60447),robot:(0,c.register)("robot",60448),sparkleFilled:(0,c.register)("sparkle-filled",60449),diffSingle:(0,c.register)("diff-single",60450),diffMultiple:(0,c.register)("diff-multiple",60451),surroundWith:(0,c.register)("surround-with",60452),share:(0,c.register)("share",60453),gitStash:(0,c.register)("git-stash",60454),gitStashApply:(0,c.register)("git-stash-apply",60455),gitStashPop:(0,c.register)("git-stash-pop",60456),vscode:(0,c.register)("vscode",60457),vscodeInsiders:(0,c.register)("vscode-insiders",60458),codeOss:(0,c.register)("code-oss",60459),runCoverage:(0,c.register)("run-coverage",60460),runAllCoverage:(0,c.register)("run-all-coverage",60461),coverage:(0,c.register)("coverage",60462),githubProject:(0,c.register)("github-project",60463),mapVertical:(0,c.register)("map-vertical",60464),foldVertical:(0,c.register)("fold-vertical",60464),mapVerticalFilled:(0,c.register)("map-vertical-filled",60465),foldVerticalFilled:(0,c.register)("fold-vertical-filled",60465),goToSearch:(0,c.register)("go-to-search",60466),percentage:(0,c.register)("percentage",60467),sortPercentage:(0,c.register)("sort-percentage",60467),attach:(0,c.register)("attach",60468)}}),define(oe[26],re([1,0,191,456]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Codicon=e.codiconsDerived=void 0,e.codiconsDerived={dialogError:(0,c.register)("dialog-error","error"),dialogWarning:(0,c.register)("dialog-warning","warning"),dialogInfo:(0,c.register)("dialog-info","info"),dialogClose:(0,c.register)("dialog-close","close"),treeItemExpanded:(0,c.register)("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:(0,c.register)("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:(0,c.register)("tree-filter-on-type-off","list-selection"),treeFilterClear:(0,c.register)("tree-filter-clear","close"),treeItemLoading:(0,c.register)("tree-item-loading","loading"),menuSelection:(0,c.register)("menu-selection","check"),menuSubmenu:(0,c.register)("menu-submenu","chevron-right"),menuBarMore:(0,c.register)("menubar-more","more"),scrollbarButtonLeft:(0,c.register)("scrollbar-button-left","triangle-left"),scrollbarButtonRight:(0,c.register)("scrollbar-button-right","triangle-right"),scrollbarButtonUp:(0,c.register)("scrollbar-button-up","triangle-up"),scrollbarButtonDown:(0,c.register)("scrollbar-button-down","triangle-down"),toolBarMore:(0,c.register)("toolbar-more","more"),quickInputBack:(0,c.register)("quick-input-back","arrow-left"),dropDownButton:(0,c.register)("drop-down-button",60084),symbolCustomColor:(0,c.register)("symbol-customcolor",60252),exportIcon:(0,c.register)("export",60332),workspaceUnspecified:(0,c.register)("workspace-unspecified",60355),newLine:(0,c.register)("newline",60394),thumbsDownFilled:(0,c.register)("thumbsdown-filled",60435),thumbsUpFilled:(0,c.register)("thumbsup-filled",60436),gitFetch:(0,c.register)("git-fetch",60445),lightbulbSparkleAutofix:(0,c.register)("lightbulb-sparkle-autofix",60447),debugBreakpointPending:(0,c.register)("debug-breakpoint-pending",60377)},e.Codicon={...k.codiconsLibrary,...e.codiconsDerived}}),define(oe[54],re([1,0,19]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deepClone=k,e.deepFreeze=E,e.cloneAndChange=y,e.mixin=_,e.equals=b,e.getAllPropertyNames=p,e.getAllMethodNames=n,e.createProxyObject=s;function k(t){if(!t||typeof t!="object"||t instanceof RegExp)return t;const i=Array.isArray(t)?[]:{};return Object.entries(t).forEach(([o,g])=>{i[o]=g&&typeof g=="object"?k(g):g}),i}function E(t){if(!t||typeof t!="object")return t;const i=[t];for(;i.length>0;){const o=i.shift();Object.freeze(o);for(const g in o)if(L.call(o,g)){const u=o[g];typeof u=="object"&&!Object.isFrozen(u)&&!(0,c.isTypedArray)(u)&&i.push(u)}}return t}const L=Object.prototype.hasOwnProperty;function y(t,i){return f(t,i,new Set)}function f(t,i,o){if((0,c.isUndefinedOrNull)(t))return t;const g=i(t);if(typeof g<"u")return g;if(Array.isArray(t)){const u=[];for(const l of t)u.push(f(l,i,o));return u}if((0,c.isObject)(t)){if(o.has(t))throw new Error("Cannot clone recursive data-structure");o.add(t);const u={};for(const l in t)L.call(t,l)&&(u[l]=f(t[l],i,o));return o.delete(t),u}return t}function _(t,i,o=!0){return(0,c.isObject)(t)?((0,c.isObject)(i)&&Object.keys(i).forEach(g=>{g in t?o&&((0,c.isObject)(t[g])&&(0,c.isObject)(i[g])?_(t[g],i[g],o):t[g]=i[g]):t[g]=i[g]}),t):i}function b(t,i){if(t===i)return!0;if(t==null||i===null||i===void 0||typeof t!=typeof i||typeof t!="object"||Array.isArray(t)!==Array.isArray(i))return!1;let o,g;if(Array.isArray(t)){if(t.length!==i.length)return!1;for(o=0;o<t.length;o++)if(!b(t[o],i[o]))return!1}else{const u=[];for(g in t)u.push(g);u.sort();const l=[];for(g in i)l.push(g);if(l.sort(),!b(u,l))return!1;for(o=0;o<u.length;o++)if(!b(t[u[o]],i[u[o]]))return!1}return!0}function p(t){let i=[];for(;Object.prototype!==t;)i=i.concat(Object.getOwnPropertyNames(t)),t=Object.getPrototypeOf(t);return i}function n(t){const i=[];for(const o of p(t))typeof t[o]=="function"&&i.push(o);return i}function s(t,i){const o=u=>function(){const l=Array.prototype.slice.call(arguments,0);return i(u,l)},g={};for(const u of t)g[u]=o(u);return g}}),define(oe[30],re([1,0,26]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeIcon=e.ThemeColor=void 0;var k;(function(L){function y(f){return f&&typeof f=="object"&&typeof f.id=="string"}L.isThemeColor=y})(k||(e.ThemeColor=k={}));var E;(function(L){L.iconNameSegment="[A-Za-z0-9]+",L.iconNameExpression="[A-Za-z0-9-]+",L.iconModifierExpression="~[A-Za-z]+",L.iconNameCharacter="[A-Za-z0-9~-]";const y=new RegExp(`^(${L.iconNameExpression})(${L.iconModifierExpression})?$`);function f(u){const l=y.exec(u.id);if(!l)return f(c.Codicon.error);const[,a,r]=l,d=["codicon","codicon-"+a];return r&&d.push("codicon-modifier-"+r.substring(1)),d}L.asClassNameArray=f;function _(u){return f(u).join(" ")}L.asClassName=_;function b(u){return"."+f(u).join(".")}L.asCSSSelector=b;function p(u){return u&&typeof u=="object"&&typeof u.id=="string"&&(typeof u.color>"u"||k.isThemeColor(u.color))}L.isThemeIcon=p;const n=new RegExp(`^\\$\\((${L.iconNameExpression}(?:${L.iconModifierExpression})?)\\)$`);function s(u){const l=n.exec(u);if(!l)return;const[,a]=l;return{id:a}}L.fromString=s;function t(u){return{id:u}}L.fromId=t;function i(u,l){let a=u.id;const r=a.lastIndexOf("~");return r!==-1&&(a=a.substring(0,r)),l&&(a=`${a}~${l}`),{id:a}}L.modify=i;function o(u){const l=u.id.lastIndexOf("~");if(l!==-1)return u.id.substring(l+1)}L.getModifier=o;function g(u,l){return u.id===l.id&&u.color?.id===l.color?.id}L.isEqual=g})(E||(e.ThemeIcon=E={}))}),define(oe[141],re([1,0,82,11,30]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.escapeIcons=_,e.markdownEscapeEscapedIcons=p,e.stripIcons=s,e.getCodiconAriaLabel=t,e.parseLabelWithIcons=o,e.matchesFuzzyIconAware=g;const L="$(",y=new RegExp(`\\$\\(${E.ThemeIcon.iconNameExpression}(?:${E.ThemeIcon.iconModifierExpression})?\\)`,"g"),f=new RegExp(`(\\\\)?${y.source}`,"g");function _(u){return u.replace(f,(l,a)=>a?l:`\\${l}`)}const b=new RegExp(`\\\\${y.source}`,"g");function p(u){return u.replace(b,l=>`\\${l}`)}const n=new RegExp(`(\\s)?(\\\\)?${y.source}(\\s)?`,"g");function s(u){return u.indexOf(L)===-1?u:u.replace(n,(l,a,r,d)=>r?l:a||d||"")}function t(u){return u?u.replace(/\$\((.*?)\)/g,(l,a)=>` ${a} `).trim():""}const i=new RegExp(`\\$\\(${E.ThemeIcon.iconNameCharacter}+\\)`,"g");function o(u){i.lastIndex=0;let l="";const a=[];let r=0;for(;;){const d=i.lastIndex,m=i.exec(u),h=u.substring(d,m?.index);if(h.length>0){l+=h;for(let v=0;v<h.length;v++)a.push(r)}if(!m)break;r+=m[0].length}return{text:l,iconOffsets:a}}function g(u,l,a=!1){const{text:r,iconOffsets:d}=l;if(!d||d.length===0)return(0,c.matchesFuzzy)(u,r,a);const m=(0,k.ltrim)(r," "),h=r.length-m.length,v=(0,c.matchesFuzzy)(u,m,a);if(v)for(const C of v){const w=d[C.start+h]+h;C.start+=w,C.end+=w}return v}}),define(oe[192],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toUint8=c,e.toUint32=k;function c(E){return E<0?0:E>255?255:E|0}function k(E){return E<0?0:E>4294967295?4294967295:E|0}}),define(oe[22],re([1,0,99,16]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.URI=void 0,e.uriToFsPath=a;const E=/^\w[\w\d+.-]*$/,L=/^\//,y=/^\/\//;function f(v,C){if(!v.scheme&&C)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${v.authority}", path: "${v.path}", query: "${v.query}", fragment: "${v.fragment}"}`);if(v.scheme&&!E.test(v.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(v.path){if(v.authority){if(!L.test(v.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(y.test(v.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _(v,C){return!v&&!C?"file":v}function b(v,C){switch(v){case"https":case"http":case"file":C?C[0]!==n&&(C=n+C):C=n;break}return C}const p="",n="/",s=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class t{static isUri(C){return C instanceof t?!0:C?typeof C.authority=="string"&&typeof C.fragment=="string"&&typeof C.path=="string"&&typeof C.query=="string"&&typeof C.scheme=="string"&&typeof C.fsPath=="string"&&typeof C.with=="function"&&typeof C.toString=="function":!1}constructor(C,w,S,D,I,T=!1){typeof C=="object"?(this.scheme=C.scheme||p,this.authority=C.authority||p,this.path=C.path||p,this.query=C.query||p,this.fragment=C.fragment||p):(this.scheme=_(C,T),this.authority=w||p,this.path=b(this.scheme,S||p),this.query=D||p,this.fragment=I||p,f(this,T))}get fsPath(){return a(this,!1)}with(C){if(!C)return this;let{scheme:w,authority:S,path:D,query:I,fragment:T}=C;return w===void 0?w=this.scheme:w===null&&(w=p),S===void 0?S=this.authority:S===null&&(S=p),D===void 0?D=this.path:D===null&&(D=p),I===void 0?I=this.query:I===null&&(I=p),T===void 0?T=this.fragment:T===null&&(T=p),w===this.scheme&&S===this.authority&&D===this.path&&I===this.query&&T===this.fragment?this:new o(w,S,D,I,T)}static parse(C,w=!1){const S=s.exec(C);return S?new o(S[2]||p,h(S[4]||p),h(S[5]||p),h(S[7]||p),h(S[9]||p),w):new o(p,p,p,p,p)}static file(C){let w=p;if(k.isWindows&&(C=C.replace(/\\/g,n)),C[0]===n&&C[1]===n){const S=C.indexOf(n,2);S===-1?(w=C.substring(2),C=n):(w=C.substring(2,S),C=C.substring(S)||n)}return new o("file",w,C,p,p)}static from(C,w){return new o(C.scheme,C.authority,C.path,C.query,C.fragment,w)}static joinPath(C,...w){if(!C.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let S;return k.isWindows&&C.scheme==="file"?S=t.file(c.win32.join(a(C,!0),...w)).path:S=c.posix.join(C.path,...w),C.with({path:S})}toString(C=!1){return r(this,C)}toJSON(){return this}static revive(C){if(C){if(C instanceof t)return C;{const w=new o(C);return w._formatted=C.external??null,w._fsPath=C._sep===i?C.fsPath??null:null,w}}else return C}}e.URI=t;const i=k.isWindows?1:void 0;class o extends t{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=a(this,!1)),this._fsPath}toString(C=!1){return C?r(this,!0):(this._formatted||(this._formatted=r(this,!1)),this._formatted)}toJSON(){const C={$mid:1};return this._fsPath&&(C.fsPath=this._fsPath,C._sep=i),this._formatted&&(C.external=this._formatted),this.path&&(C.path=this.path),this.scheme&&(C.scheme=this.scheme),this.authority&&(C.authority=this.authority),this.query&&(C.query=this.query),this.fragment&&(C.fragment=this.fragment),C}}const g={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function u(v,C,w){let S,D=-1;for(let I=0;I<v.length;I++){const T=v.charCodeAt(I);if(T>=97&&T<=122||T>=65&&T<=90||T>=48&&T<=57||T===45||T===46||T===95||T===126||C&&T===47||w&&T===91||w&&T===93||w&&T===58)D!==-1&&(S+=encodeURIComponent(v.substring(D,I)),D=-1),S!==void 0&&(S+=v.charAt(I));else{S===void 0&&(S=v.substr(0,I));const M=g[T];M!==void 0?(D!==-1&&(S+=encodeURIComponent(v.substring(D,I)),D=-1),S+=M):D===-1&&(D=I)}}return D!==-1&&(S+=encodeURIComponent(v.substring(D))),S!==void 0?S:v}function l(v){let C;for(let w=0;w<v.length;w++){const S=v.charCodeAt(w);S===35||S===63?(C===void 0&&(C=v.substr(0,w)),C+=g[S]):C!==void 0&&(C+=v[w])}return C!==void 0?C:v}function a(v,C){let w;return v.authority&&v.path.length>1&&v.scheme==="file"?w=`//${v.authority}${v.path}`:v.path.charCodeAt(0)===47&&(v.path.charCodeAt(1)>=65&&v.path.charCodeAt(1)<=90||v.path.charCodeAt(1)>=97&&v.path.charCodeAt(1)<=122)&&v.path.charCodeAt(2)===58?C?w=v.path.substr(1):w=v.path[1].toLowerCase()+v.path.substr(2):w=v.path,k.isWindows&&(w=w.replace(/\//g,"\\")),w}function r(v,C){const w=C?l:u;let S="",{scheme:D,authority:I,path:T,query:M,fragment:A}=v;if(D&&(S+=D,S+=":"),(I||D==="file")&&(S+=n,S+=n),I){let R=I.indexOf("@");if(R!==-1){const N=I.substr(0,R);I=I.substr(R+1),R=N.lastIndexOf(":"),R===-1?S+=w(N,!1,!1):(S+=w(N.substr(0,R),!1,!1),S+=":",S+=w(N.substr(R+1),!1,!0)),S+="@"}I=I.toLowerCase(),R=I.lastIndexOf(":"),R===-1?S+=w(I,!1,!0):(S+=w(I.substr(0,R),!1,!0),S+=I.substr(R))}if(T){if(T.length>=3&&T.charCodeAt(0)===47&&T.charCodeAt(2)===58){const R=T.charCodeAt(1);R>=65&&R<=90&&(T=`/${String.fromCharCode(R+32)}:${T.substr(3)}`)}else if(T.length>=2&&T.charCodeAt(1)===58){const R=T.charCodeAt(0);R>=65&&R<=90&&(T=`${String.fromCharCode(R+32)}:${T.substr(2)}`)}S+=w(T,!0,!1)}return M&&(S+="?",S+=w(M,!1,!1)),A&&(S+="#",S+=C?A:u(A,!1,!1)),S}function d(v){try{return decodeURIComponent(v)}catch{return v.length>3?v.substr(0,3)+d(v.substr(3)):v}}const m=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function h(v){return v.match(m)?v.replace(m,C=>d(C)):v}}),define(oe[228],re([1,0,158,22]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=E,e.parse=L,e.revive=f;function E(_){return JSON.stringify(_,y)}function L(_){let b=JSON.parse(_);return b=f(b),b}function y(_,b){return b instanceof RegExp?{$mid:2,source:b.source,flags:b.flags}:b}function f(_,b=0){if(!_||b>200)return _;if(typeof _=="object"){switch(_.$mid){case 1:return k.URI.revive(_);case 2:return new RegExp(_.source,_.flags);case 17:return new Date(_.source)}if(_ instanceof c.VSBuffer||_ instanceof Uint8Array)return _;if(Array.isArray(_))for(let p=0;p<_.length;++p)_[p]=f(_[p],b+1);else for(const p in _)Object.hasOwnProperty.call(_,p)&&(_[p]=f(_[p],b+1))}return _}}),define(oe[47],re([1,0,8,16,11,22,99]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.VSCODE_AUTHORITY=e.RemoteAuthorities=e.connectionTokenQueryName=e.Schemas=void 0,e.matchesScheme=_,e.matchesSomeScheme=b;var f;(function(t){t.inMemory="inmemory",t.vscode="vscode",t.internal="private",t.walkThrough="walkThrough",t.walkThroughSnippet="walkThroughSnippet",t.http="http",t.https="https",t.file="file",t.mailto="mailto",t.untitled="untitled",t.data="data",t.command="command",t.vscodeRemote="vscode-remote",t.vscodeRemoteResource="vscode-remote-resource",t.vscodeManagedRemoteResource="vscode-managed-remote-resource",t.vscodeUserData="vscode-userdata",t.vscodeCustomEditor="vscode-custom-editor",t.vscodeNotebookCell="vscode-notebook-cell",t.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",t.vscodeNotebookCellOutput="vscode-notebook-cell-output",t.vscodeInteractiveInput="vscode-interactive-input",t.vscodeSettings="vscode-settings",t.vscodeWorkspaceTrust="vscode-workspace-trust",t.vscodeTerminal="vscode-terminal",t.vscodeChatCodeBlock="vscode-chat-code-block",t.vscodeCopilotBackingChatCodeBlock="vscode-copilot-chat-code-block",t.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",t.vscodeChatSesssion="vscode-chat-editor",t.webviewPanel="webview-panel",t.vscodeWebview="vscode-webview",t.extension="extension",t.vscodeFileResource="vscode-file",t.tmp="tmp",t.vsls="vsls",t.vscodeSourceControl="vscode-scm",t.commentsInput="comment",t.codeSetting="code-setting"})(f||(e.Schemas=f={}));function _(t,i){return L.URI.isUri(t)?(0,E.equalsIgnoreCase)(t.scheme,i):(0,E.startsWithIgnoreCase)(t,i+":")}function b(t,...i){return i.some(o=>_(t,o))}e.connectionTokenQueryName="tkn";class p{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(i){this._preferredWebSchema=i}get _remoteResourcesPath(){return y.posix.join(this._serverRootPath,f.vscodeRemoteResource)}rewrite(i){if(this._delegate)try{return this._delegate(i)}catch(r){return c.onUnexpectedError(r),i}const o=i.authority;let g=this._hosts[o];g&&g.indexOf(":")!==-1&&g.indexOf("[")===-1&&(g=`[${g}]`);const u=this._ports[o],l=this._connectionTokens[o];let a=`path=${encodeURIComponent(i.path)}`;return typeof l=="string"&&(a+=`&${e.connectionTokenQueryName}=${encodeURIComponent(l)}`),L.URI.from({scheme:k.isWeb?this._preferredWebSchema:f.vscodeRemoteResource,authority:`${g}:${u}`,path:this._remoteResourcesPath,query:a})}}e.RemoteAuthorities=new p,e.VSCODE_AUTHORITY="vscode-app";class n{static{this.FALLBACK_AUTHORITY=e.VSCODE_AUTHORITY}uriToBrowserUri(i){return i.scheme===f.vscodeRemote?e.RemoteAuthorities.rewrite(i):i.scheme===f.file&&(k.isNative||k.webWorkerOrigin===`${f.vscodeFileResource}://${n.FALLBACK_AUTHORITY}`)?i.with({scheme:f.vscodeFileResource,authority:i.authority||n.FALLBACK_AUTHORITY,query:null,fragment:null}):i}}e.FileAccess=new n;var s;(function(t){const i=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);t.CoopAndCoep=Object.freeze(i.get("3"));const o="vscode-coi";function g(l){let a;typeof l=="string"?a=new URL(l).searchParams:l instanceof URL?a=l.searchParams:L.URI.isUri(l)&&(a=new URL(l.toString(!0)).searchParams);const r=a?.get(o);if(r)return i.get(r)}t.getHeadersFromQuery=g;function u(l,a,r){if(!globalThis.crossOriginIsolated)return;const d=a&&r?"3":r?"2":"1";l instanceof URLSearchParams?l.set(o,d):l[o]=d}t.addSearchParam=u})(s||(e.COI=s={}))}),define(oe[5],re([1,0,64,223,46,74,14,8,6,305,2,47,16,129,52]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.DragAndDropObserver=e.ModifierKeyEmitter=e.basicMarkupHtmlTags=e.Namespace=e.EventHelper=e.EventType=e.sharedMutationObserver=e.Dimension=e.WindowIntervalTimer=e.scheduleAtNextAnimationFrame=e.runAtThisOrScheduleAtNextAnimationFrame=e.WindowIdleValue=e.addStandardDisposableGenericMouseUpListener=e.addStandardDisposableGenericMouseDownListener=e.addStandardDisposableListener=e.onDidUnregisterWindow=e.onWillUnregisterWindow=e.onDidRegisterWindow=e.hasWindow=e.getWindowById=e.getWindowId=e.getWindowsCount=e.getWindows=e.getDocument=e.getWindow=e.registerWindow=void 0,e.clearNode=g,e.addDisposableListener=l,e.addDisposableGenericMouseDownListener=v,e.addDisposableGenericMouseUpListener=C,e.runWhenWindowIdle=w,e.getComputedStyle=T,e.getClientArea=M,e.getTopLeftOffset=N,e.size=O,e.getDomNodePagePosition=x,e.getDomNodeZoomLevel=F,e.getTotalWidth=W,e.getContentWidth=z,e.getContentHeight=q,e.getTotalHeight=H,e.isAncestor=K,e.findParentWithClass=U,e.hasParentWithClass=Y,e.isShadowRoot=Q,e.isInShadowDOM=X,e.getShadowRoot=G,e.getActiveElement=P,e.isActiveElement=te,e.isAncestorOfActiveElement=se,e.getActiveDocument=ue,e.getActiveWindow=ge,e.createStyleSheet2=ce,e.createStyleSheet=ne,e.createCSSRule=$,e.removeCSSRulesContainingSelector=Z,e.isHTMLElement=le,e.isHTMLAnchorElement=de,e.isSVGElement=me,e.isMouseEvent=be,e.isKeyboardEvent=ve,e.isEventLike=Le,e.saveParentsScrollTop=Se,e.restoreParentsScrollTop=ye,e.trackFocus=ke,e.after=Re,e.append=Pe,e.prepend=Fe,e.reset=je,e.$=we,e.setVisibility=Oe,e.show=Be,e.hide=Ue,e.computeScreenAwareSize=Ye,e.windowOpenNoOpener=Qe,e.animate=tt,e.asCSSUrl=it,e.asCSSPropertyValue=ut,e.asCssValueWithDefault=ct,e.hookDomPurifyHrefAndSrcSanitizer=nt,e.h=ht,e.svgElem=wt,o=function(){const Ce=new Map;(0,i.ensureCodeWindow)(i.mainWindow,1);const _e={window:i.mainWindow,disposables:new p.DisposableStore};Ce.set(i.mainWindow.vscodeWindowId,_e);const Ie=new _.Emitter,Ae=new _.Emitter,We=new _.Emitter;function Ke(He,$e){return(typeof He=="number"?Ce.get(He):void 0)??($e?_e:void 0)}return{onDidRegisterWindow:Ie.event,onWillUnregisterWindow:We.event,onDidUnregisterWindow:Ae.event,registerWindow(He){if(Ce.has(He.vscodeWindowId))return p.Disposable.None;const $e=new p.DisposableStore,Ve={window:He,disposables:$e.add(new p.DisposableStore)};return Ce.set(He.vscodeWindowId,Ve),$e.add((0,p.toDisposable)(()=>{Ce.delete(He.vscodeWindowId),Ae.fire(He)})),$e.add(l(He,e.EventType.BEFORE_UNLOAD,()=>{We.fire(He)})),Ie.fire(Ve),$e},getWindows(){return Ce.values()},getWindowsCount(){return Ce.size},getWindowId(He){return He.vscodeWindowId},hasWindow(He){return Ce.has(He)},getWindowById:Ke,getWindow(He){const $e=He;if($e?.ownerDocument?.defaultView)return $e.ownerDocument.defaultView.window;const Ve=He;return Ve?.view?Ve.view.window:i.mainWindow},getDocument(He){const $e=He;return(0,e.getWindow)($e).document}}}(),e.registerWindow=o.registerWindow,e.getWindow=o.getWindow,e.getDocument=o.getDocument,e.getWindows=o.getWindows,e.getWindowsCount=o.getWindowsCount,e.getWindowId=o.getWindowId,e.getWindowById=o.getWindowById,e.hasWindow=o.hasWindow,e.onDidRegisterWindow=o.onDidRegisterWindow,e.onWillUnregisterWindow=o.onWillUnregisterWindow,e.onDidUnregisterWindow=o.onDidUnregisterWindow;function g(Ce){for(;Ce.firstChild;)Ce.firstChild.remove()}class u{constructor(_e,Ie,Ae,We){this._node=_e,this._type=Ie,this._handler=Ae,this._options=We||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function l(Ce,_e,Ie,Ae){return new u(Ce,_e,Ie,Ae)}function a(Ce,_e){return function(Ie){return _e(new L.StandardMouseEvent(Ce,Ie))}}function r(Ce){return function(_e){return Ce(new E.StandardKeyboardEvent(_e))}}const d=function(_e,Ie,Ae,We){let Ke=Ae;return Ie==="click"||Ie==="mousedown"||Ie==="contextmenu"?Ke=a((0,e.getWindow)(_e),Ae):(Ie==="keydown"||Ie==="keypress"||Ie==="keyup")&&(Ke=r(Ae)),l(_e,Ie,Ke,We)};e.addStandardDisposableListener=d;const m=function(_e,Ie,Ae){const We=a((0,e.getWindow)(_e),Ie);return v(_e,We,Ae)};e.addStandardDisposableGenericMouseDownListener=m;const h=function(_e,Ie,Ae){const We=a((0,e.getWindow)(_e),Ie);return C(_e,We,Ae)};e.addStandardDisposableGenericMouseUpListener=h;function v(Ce,_e,Ie){return l(Ce,s.isIOS&&k.BrowserFeatures.pointerEvents?e.EventType.POINTER_DOWN:e.EventType.MOUSE_DOWN,_e,Ie)}function C(Ce,_e,Ie){return l(Ce,s.isIOS&&k.BrowserFeatures.pointerEvents?e.EventType.POINTER_UP:e.EventType.MOUSE_UP,_e,Ie)}function w(Ce,_e,Ie){return(0,y._runWhenIdle)(Ce,_e,Ie)}class S extends y.AbstractIdleValue{constructor(_e,Ie){super(_e,Ie)}}e.WindowIdleValue=S;class D extends y.IntervalTimer{constructor(_e){super(),this.defaultTarget=_e&&(0,e.getWindow)(_e)}cancelAndSet(_e,Ie,Ae){return super.cancelAndSet(_e,Ie,Ae??this.defaultTarget)}}e.WindowIntervalTimer=D;class I{constructor(_e,Ie=0){this._runner=_e,this.priority=Ie,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(_e){(0,f.onUnexpectedError)(_e)}}static sort(_e,Ie){return Ie.priority-_e.priority}}(function(){const Ce=new Map,_e=new Map,Ie=new Map,Ae=new Map,We=Ke=>{Ie.set(Ke,!1);const He=Ce.get(Ke)??[];for(_e.set(Ke,He),Ce.set(Ke,[]),Ae.set(Ke,!0);He.length>0;)He.sort(I.sort),He.shift().execute();Ae.set(Ke,!1)};e.scheduleAtNextAnimationFrame=(Ke,He,$e=0)=>{const Ve=(0,e.getWindowId)(Ke),Me=new I(He,$e);let xe=Ce.get(Ve);return xe||(xe=[],Ce.set(Ve,xe)),xe.push(Me),Ie.get(Ve)||(Ie.set(Ve,!0),Ke.requestAnimationFrame(()=>We(Ve))),Me},e.runAtThisOrScheduleAtNextAnimationFrame=(Ke,He,$e)=>{const Ve=(0,e.getWindowId)(Ke);if(Ae.get(Ve)){const Me=new I(He,$e);let xe=_e.get(Ve);return xe||(xe=[],_e.set(Ve,xe)),xe.push(Me),Me}else return(0,e.scheduleAtNextAnimationFrame)(Ke,He,$e)}})();function T(Ce){return(0,e.getWindow)(Ce).getComputedStyle(Ce,null)}function M(Ce,_e){const Ie=(0,e.getWindow)(Ce),Ae=Ie.document;if(Ce!==Ae.body)return new R(Ce.clientWidth,Ce.clientHeight);if(s.isIOS&&Ie?.visualViewport)return new R(Ie.visualViewport.width,Ie.visualViewport.height);if(Ie?.innerWidth&&Ie.innerHeight)return new R(Ie.innerWidth,Ie.innerHeight);if(Ae.body&&Ae.body.clientWidth&&Ae.body.clientHeight)return new R(Ae.body.clientWidth,Ae.body.clientHeight);if(Ae.documentElement&&Ae.documentElement.clientWidth&&Ae.documentElement.clientHeight)return new R(Ae.documentElement.clientWidth,Ae.documentElement.clientHeight);if(_e)return M(_e);throw new Error("Unable to figure out browser width and height")}class A{static convertToPixels(_e,Ie){return parseFloat(Ie)||0}static getDimension(_e,Ie,Ae){const We=T(_e),Ke=We?We.getPropertyValue(Ie):"0";return A.convertToPixels(_e,Ke)}static getBorderLeftWidth(_e){return A.getDimension(_e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(_e){return A.getDimension(_e,"border-right-width","borderRightWidth")}static getBorderTopWidth(_e){return A.getDimension(_e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(_e){return A.getDimension(_e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(_e){return A.getDimension(_e,"padding-left","paddingLeft")}static getPaddingRight(_e){return A.getDimension(_e,"padding-right","paddingRight")}static getPaddingTop(_e){return A.getDimension(_e,"padding-top","paddingTop")}static getPaddingBottom(_e){return A.getDimension(_e,"padding-bottom","paddingBottom")}static getMarginLeft(_e){return A.getDimension(_e,"margin-left","marginLeft")}static getMarginTop(_e){return A.getDimension(_e,"margin-top","marginTop")}static getMarginRight(_e){return A.getDimension(_e,"margin-right","marginRight")}static getMarginBottom(_e){return A.getDimension(_e,"margin-bottom","marginBottom")}}class R{static{this.None=new R(0,0)}constructor(_e,Ie){this.width=_e,this.height=Ie}with(_e=this.width,Ie=this.height){return _e!==this.width||Ie!==this.height?new R(_e,Ie):this}static is(_e){return typeof _e=="object"&&typeof _e.height=="number"&&typeof _e.width=="number"}static lift(_e){return _e instanceof R?_e:new R(_e.width,_e.height)}static equals(_e,Ie){return _e===Ie?!0:!_e||!Ie?!1:_e.width===Ie.width&&_e.height===Ie.height}}e.Dimension=R;function N(Ce){let _e=Ce.offsetParent,Ie=Ce.offsetTop,Ae=Ce.offsetLeft;for(;(Ce=Ce.parentNode)!==null&&Ce!==Ce.ownerDocument.body&&Ce!==Ce.ownerDocument.documentElement;){Ie-=Ce.scrollTop;const We=Q(Ce)?null:T(Ce);We&&(Ae-=We.direction!=="rtl"?Ce.scrollLeft:-Ce.scrollLeft),Ce===_e&&(Ae+=A.getBorderLeftWidth(Ce),Ie+=A.getBorderTopWidth(Ce),Ie+=Ce.offsetTop,Ae+=Ce.offsetLeft,_e=Ce.offsetParent)}return{left:Ae,top:Ie}}function O(Ce,_e,Ie){typeof _e=="number"&&(Ce.style.width=`${_e}px`),typeof Ie=="number"&&(Ce.style.height=`${Ie}px`)}function x(Ce){const _e=Ce.getBoundingClientRect(),Ie=(0,e.getWindow)(Ce);return{left:_e.left+Ie.scrollX,top:_e.top+Ie.scrollY,width:_e.width,height:_e.height}}function F(Ce){let _e=Ce,Ie=1;do{const Ae=T(_e).zoom;Ae!=null&&Ae!=="1"&&(Ie*=Ae),_e=_e.parentElement}while(_e!==null&&_e!==_e.ownerDocument.documentElement);return Ie}function W(Ce){const _e=A.getMarginLeft(Ce)+A.getMarginRight(Ce);return Ce.offsetWidth+_e}function z(Ce){const _e=A.getBorderLeftWidth(Ce)+A.getBorderRightWidth(Ce),Ie=A.getPaddingLeft(Ce)+A.getPaddingRight(Ce);return Ce.offsetWidth-_e-Ie}function q(Ce){const _e=A.getBorderTopWidth(Ce)+A.getBorderBottomWidth(Ce),Ie=A.getPaddingTop(Ce)+A.getPaddingBottom(Ce);return Ce.offsetHeight-_e-Ie}function H(Ce){const _e=A.getMarginTop(Ce)+A.getMarginBottom(Ce);return Ce.offsetHeight+_e}function K(Ce,_e){return!!_e?.contains(Ce)}function U(Ce,_e,Ie){for(;Ce&&Ce.nodeType===Ce.ELEMENT_NODE;){if(Ce.classList.contains(_e))return Ce;if(Ie){if(typeof Ie=="string"){if(Ce.classList.contains(Ie))return null}else if(Ce===Ie)return null}Ce=Ce.parentNode}return null}function Y(Ce,_e,Ie){return!!U(Ce,_e,Ie)}function Q(Ce){return Ce&&!!Ce.host&&!!Ce.mode}function X(Ce){return!!G(Ce)}function G(Ce){for(;Ce.parentNode;){if(Ce===Ce.ownerDocument?.body)return null;Ce=Ce.parentNode}return Q(Ce)?Ce:null}function P(){let Ce=ue().activeElement;for(;Ce?.shadowRoot;)Ce=Ce.shadowRoot.activeElement;return Ce}function te(Ce){return P()===Ce}function se(Ce){return K(P(),Ce)}function ue(){return(0,e.getWindowsCount)()<=1?i.mainWindow.document:Array.from((0,e.getWindows)()).map(({window:_e})=>_e.document).find(_e=>_e.hasFocus())??i.mainWindow.document}function ge(){return ue().defaultView?.window??i.mainWindow}const pe=new Map;function ce(){return new ie}class ie{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(_e){_e!==this._currentCssStyle&&(this._currentCssStyle=_e,this._styleSheet?this._styleSheet.innerText=_e:this._styleSheet=ne(i.mainWindow.document.head,Ie=>Ie.innerText=_e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}function ne(Ce=i.mainWindow.document.head,_e,Ie){const Ae=document.createElement("style");if(Ae.type="text/css",Ae.media="screen",_e?.(Ae),Ce.appendChild(Ae),Ie&&Ie.add((0,p.toDisposable)(()=>Ae.remove())),Ce===i.mainWindow.document.head){const We=new Set;pe.set(Ae,We);for(const{window:Ke,disposables:He}of(0,e.getWindows)()){if(Ke===i.mainWindow)continue;const $e=He.add(J(Ae,We,Ke));Ie?.add($e)}}return Ae}function J(Ce,_e,Ie){const Ae=new p.DisposableStore,We=Ce.cloneNode(!0);Ie.document.head.appendChild(We),Ae.add((0,p.toDisposable)(()=>We.remove()));for(const Ke of V(Ce))We.sheet?.insertRule(Ke.cssText,We.sheet?.cssRules.length);return Ae.add(e.sharedMutationObserver.observe(Ce,Ae,{childList:!0})(()=>{We.textContent=Ce.textContent})),_e.add(We),Ae.add((0,p.toDisposable)(()=>_e.delete(We))),Ae}e.sharedMutationObserver=new class{constructor(){this.mutationObservers=new Map}observe(Ce,_e,Ie){let Ae=this.mutationObservers.get(Ce);Ae||(Ae=new Map,this.mutationObservers.set(Ce,Ae));const We=(0,t.hash)(Ie);let Ke=Ae.get(We);if(Ke)Ke.users+=1;else{const He=new _.Emitter,$e=new MutationObserver(Me=>He.fire(Me));$e.observe(Ce,Ie);const Ve=Ke={users:1,observer:$e,onDidMutate:He.event};_e.add((0,p.toDisposable)(()=>{Ve.users-=1,Ve.users===0&&(He.dispose(),$e.disconnect(),Ae?.delete(We),Ae?.size===0&&this.mutationObservers.delete(Ce))})),Ae.set(We,Ke)}return Ke.onDidMutate}};let B=null;function j(){return B||(B=ne()),B}function V(Ce){return Ce?.sheet?.rules?Ce.sheet.rules:Ce?.sheet?.cssRules?Ce.sheet.cssRules:[]}function $(Ce,_e,Ie=j()){if(!(!Ie||!_e)){Ie.sheet?.insertRule(`${Ce} {${_e}}`,0);for(const Ae of pe.get(Ie)??[])$(Ce,_e,Ae)}}function Z(Ce,_e=j()){if(!_e)return;const Ie=V(_e),Ae=[];for(let We=0;We<Ie.length;We++){const Ke=Ie[We];ee(Ke)&&Ke.selectorText.indexOf(Ce)!==-1&&Ae.push(We)}for(let We=Ae.length-1;We>=0;We--)_e.sheet?.deleteRule(Ae[We]);for(const We of pe.get(_e)??[])Z(Ce,We)}function ee(Ce){return typeof Ce.selectorText=="string"}function le(Ce){return Ce instanceof HTMLElement||Ce instanceof(0,e.getWindow)(Ce).HTMLElement}function de(Ce){return Ce instanceof HTMLAnchorElement||Ce instanceof(0,e.getWindow)(Ce).HTMLAnchorElement}function me(Ce){return Ce instanceof SVGElement||Ce instanceof(0,e.getWindow)(Ce).SVGElement}function be(Ce){return Ce instanceof MouseEvent||Ce instanceof(0,e.getWindow)(Ce).MouseEvent}function ve(Ce){return Ce instanceof KeyboardEvent||Ce instanceof(0,e.getWindow)(Ce).KeyboardEvent}e.EventType={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:c.isWebKit?"webkitAnimationStart":"animationstart",ANIMATION_END:c.isWebKit?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:c.isWebKit?"webkitAnimationIteration":"animationiteration"};function Le(Ce){const _e=Ce;return!!(_e&&typeof _e.preventDefault=="function"&&typeof _e.stopPropagation=="function")}e.EventHelper={stop:(Ce,_e)=>(Ce.preventDefault(),_e&&Ce.stopPropagation(),Ce)};function Se(Ce){const _e=[];for(let Ie=0;Ce&&Ce.nodeType===Ce.ELEMENT_NODE;Ie++)_e[Ie]=Ce.scrollTop,Ce=Ce.parentNode;return _e}function ye(Ce,_e){for(let Ie=0;Ce&&Ce.nodeType===Ce.ELEMENT_NODE;Ie++)Ce.scrollTop!==_e[Ie]&&(Ce.scrollTop=_e[Ie]),Ce=Ce.parentNode}class Ee extends p.Disposable{static hasFocusWithin(_e){if(le(_e)){const Ie=G(_e),Ae=Ie?Ie.activeElement:_e.ownerDocument.activeElement;return K(Ae,_e)}else{const Ie=_e;return K(Ie.document.activeElement,Ie.document)}}constructor(_e){super(),this._onDidFocus=this._register(new _.Emitter),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new _.Emitter),this.onDidBlur=this._onDidBlur.event;let Ie=Ee.hasFocusWithin(_e),Ae=!1;const We=()=>{Ae=!1,Ie||(Ie=!0,this._onDidFocus.fire())},Ke=()=>{Ie&&(Ae=!0,(le(_e)?(0,e.getWindow)(_e):_e).setTimeout(()=>{Ae&&(Ae=!1,Ie=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{Ee.hasFocusWithin(_e)!==Ie&&(Ie?Ke():We())},this._register(l(_e,e.EventType.FOCUS,We,!0)),this._register(l(_e,e.EventType.BLUR,Ke,!0)),le(_e)&&(this._register(l(_e,e.EventType.FOCUS_IN,()=>this._refreshStateHandler())),this._register(l(_e,e.EventType.FOCUS_OUT,()=>this._refreshStateHandler())))}}function ke(Ce){return new Ee(Ce)}function Re(Ce,_e){return Ce.after(_e),_e}function Pe(Ce,..._e){if(Ce.append(..._e),_e.length===1&&typeof _e[0]!="string")return _e[0]}function Fe(Ce,_e){return Ce.insertBefore(_e,Ce.firstChild),_e}function je(Ce,..._e){Ce.innerText="",Pe(Ce,..._e)}const Te=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Ne;(function(Ce){Ce.HTML="http://www.w3.org/1999/xhtml",Ce.SVG="http://www.w3.org/2000/svg"})(Ne||(e.Namespace=Ne={}));function fe(Ce,_e,Ie,...Ae){const We=Te.exec(_e);if(!We)throw new Error("Bad use of emmet");const Ke=We[1]||"div";let He;return Ce!==Ne.HTML?He=document.createElementNS(Ce,Ke):He=document.createElement(Ke),We[3]&&(He.id=We[3]),We[4]&&(He.className=We[4].replace(/\./g," ").trim()),Ie&&Object.entries(Ie).forEach(([$e,Ve])=>{typeof Ve>"u"||(/^on\w+$/.test($e)?He[$e]=Ve:$e==="selected"?Ve&&He.setAttribute($e,"true"):He.setAttribute($e,Ve))}),He.append(...Ae),He}function we(Ce,_e,...Ie){return fe(Ne.HTML,Ce,_e,...Ie)}we.SVG=function(Ce,_e,...Ie){return fe(Ne.SVG,Ce,_e,...Ie)};function Oe(Ce,..._e){Ce?Be(..._e):Ue(..._e)}function Be(...Ce){for(const _e of Ce)_e.style.display="",_e.removeAttribute("aria-hidden")}function Ue(...Ce){for(const _e of Ce)_e.style.display="none",_e.setAttribute("aria-hidden","true")}function Ye(Ce,_e){const Ie=Ce.devicePixelRatio*_e;return Math.max(1,Math.floor(Ie))/Ce.devicePixelRatio}function Qe(Ce){i.mainWindow.open(Ce,"_blank","noopener")}function tt(Ce,_e){const Ie=()=>{_e(),Ae=(0,e.scheduleAtNextAnimationFrame)(Ce,Ie)};let Ae=(0,e.scheduleAtNextAnimationFrame)(Ce,Ie);return(0,p.toDisposable)(()=>Ae.dispose())}n.RemoteAuthorities.setPreferredWebSchema(/^https:/.test(i.mainWindow.location.href)?"https":"http");function it(Ce){return Ce?`url('${n.FileAccess.uriToBrowserUri(Ce).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function ut(Ce){return`'${Ce.replace(/'/g,"%27")}'`}function ct(Ce,_e){if(Ce!==void 0){const Ie=Ce.match(/^\s*var\((.+)\)$/);if(Ie){const Ae=Ie[1].split(",",2);return Ae.length===2&&(_e=ct(Ae[1].trim(),_e)),`var(${Ae[0]}, ${_e})`}return Ce}return _e}function nt(Ce,_e=!1){const Ie=document.createElement("a");return b.addHook("afterSanitizeAttributes",Ae=>{for(const We of["href","src"])if(Ae.hasAttribute(We)){const Ke=Ae.getAttribute(We);if(We==="href"&&Ke.startsWith("#"))continue;if(Ie.href=Ke,!Ce.includes(Ie.protocol.replace(/:$/,""))){if(_e&&We==="src"&&Ie.href.startsWith("data:"))continue;Ae.removeAttribute(We)}}}),(0,p.toDisposable)(()=>{b.removeHook("afterSanitizeAttributes")})}e.basicMarkupHtmlTags=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);const st=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});class dt extends _.Emitter{constructor(){super(),this._subscriptions=new p.DisposableStore,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(_.Event.runAndSubscribe(e.onDidRegisterWindow,({window:_e,disposables:Ie})=>this.registerListeners(_e,Ie),{window:i.mainWindow,disposables:this._subscriptions}))}registerListeners(_e,Ie){Ie.add(l(_e,"keydown",Ae=>{if(Ae.defaultPrevented)return;const We=new E.StandardKeyboardEvent(Ae);if(!(We.keyCode===6&&Ae.repeat)){if(Ae.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(Ae.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(Ae.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(Ae.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(We.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=Ae.altKey,this._keyStatus.ctrlKey=Ae.ctrlKey,this._keyStatus.metaKey=Ae.metaKey,this._keyStatus.shiftKey=Ae.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=Ae,this.fire(this._keyStatus))}},!0)),Ie.add(l(_e,"keyup",Ae=>{Ae.defaultPrevented||(!Ae.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!Ae.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!Ae.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!Ae.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=Ae.altKey,this._keyStatus.ctrlKey=Ae.ctrlKey,this._keyStatus.metaKey=Ae.metaKey,this._keyStatus.shiftKey=Ae.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=Ae,this.fire(this._keyStatus)))},!0)),Ie.add(l(_e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),Ie.add(l(_e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),Ie.add(l(_e.document.body,"mousemove",Ae=>{Ae.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),Ie.add(l(_e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return dt.instance||(dt.instance=new dt),dt.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}e.ModifierKeyEmitter=dt;class St extends p.Disposable{constructor(_e,Ie){super(),this.element=_e,this.callbacks=Ie,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(l(this.element,e.EventType.DRAG_START,_e=>{this.callbacks.onDragStart?.(_e)})),this.callbacks.onDrag&&this._register(l(this.element,e.EventType.DRAG,_e=>{this.callbacks.onDrag?.(_e)})),this._register(l(this.element,e.EventType.DRAG_ENTER,_e=>{this.counter++,this.dragStartTime=_e.timeStamp,this.callbacks.onDragEnter?.(_e)})),this._register(l(this.element,e.EventType.DRAG_OVER,_e=>{_e.preventDefault(),this.callbacks.onDragOver?.(_e,_e.timeStamp-this.dragStartTime)})),this._register(l(this.element,e.EventType.DRAG_LEAVE,_e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(_e))})),this._register(l(this.element,e.EventType.DRAG_END,_e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(_e)})),this._register(l(this.element,e.EventType.DROP,_e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(_e)}))}}e.DragAndDropObserver=St;const _t=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function ht(Ce,..._e){let Ie,Ae;Array.isArray(_e[0])?(Ie={},Ae=_e[0]):(Ie=_e[0]||{},Ae=_e[1]);const We=_t.exec(Ce);if(!We||!We.groups)throw new Error("Bad use of h");const Ke=We.groups.tag||"div",He=document.createElement(Ke);We.groups.id&&(He.id=We.groups.id);const $e=[];if(We.groups.class)for(const Me of We.groups.class.split("."))Me!==""&&$e.push(Me);if(Ie.className!==void 0)for(const Me of Ie.className.split("."))Me!==""&&$e.push(Me);$e.length>0&&(He.className=$e.join(" "));const Ve={};if(We.groups.name&&(Ve[We.groups.name]=He),Ae)for(const Me of Ae)le(Me)?He.appendChild(Me):typeof Me=="string"?He.append(Me):"root"in Me&&(Object.assign(Ve,Me),He.appendChild(Me.root));for(const[Me,xe]of Object.entries(Ie))if(Me!=="className")if(Me==="style")for(const[ze,Ge]of Object.entries(xe))He.style.setProperty(qe(ze),typeof Ge=="number"?Ge+"px":""+Ge);else Me==="tabIndex"?He.tabIndex=xe:He.setAttribute(qe(Me),xe.toString());return Ve.root=He,Ve}function wt(Ce,..._e){let Ie,Ae;Array.isArray(_e[0])?(Ie={},Ae=_e[0]):(Ie=_e[0]||{},Ae=_e[1]);const We=_t.exec(Ce);if(!We||!We.groups)throw new Error("Bad use of h");const Ke=We.groups.tag||"div",He=document.createElementNS("http://www.w3.org/2000/svg",Ke);We.groups.id&&(He.id=We.groups.id);const $e=[];if(We.groups.class)for(const Me of We.groups.class.split("."))Me!==""&&$e.push(Me);if(Ie.className!==void 0)for(const Me of Ie.className.split("."))Me!==""&&$e.push(Me);$e.length>0&&(He.className=$e.join(" "));const Ve={};if(We.groups.name&&(Ve[We.groups.name]=He),Ae)for(const Me of Ae)le(Me)?He.appendChild(Me):typeof Me=="string"?He.append(Me):"root"in Me&&(Object.assign(Ve,Me),He.appendChild(Me.root));for(const[Me,xe]of Object.entries(Ie))if(Me!=="className")if(Me==="style")for(const[ze,Ge]of Object.entries(xe))He.style.setProperty(qe(ze),typeof Ge=="number"?Ge+"px":""+Ge);else Me==="tabIndex"?He.tabIndex=xe:He.setAttribute(qe(Me),xe.toString());return Ve.root=He,Ve}function qe(Ce){return Ce.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}),define(oe[457],re([1,0,5,2,21]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createStyleSheetFromObservable=L;function L(y){const f=new k.DisposableStore,_=f.add((0,c.createStyleSheet2)());return f.add((0,E.autorun)(b=>{_.setStyle(y.read(b))})),f}}),define(oe[306],re([1,0,5]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderText=k,e.renderFormattedText=E,e.createElement=L;function k(n,s={}){const t=L(s);return t.textContent=n,t}function E(n,s={}){const t=L(s);return f(t,_(n,!!s.renderCodeSegments),s.actionHandler,s.renderCodeSegments),t}function L(n){const s=n.inline?"span":"div",t=document.createElement(s);return n.className&&(t.className=n.className),t}class y{constructor(s){this.source=s,this.index=0}eos(){return this.index>=this.source.length}next(){const s=this.peek();return this.advance(),s}peek(){return this.source[this.index]}advance(){this.index++}}function f(n,s,t,i){let o;if(s.type===2)o=document.createTextNode(s.content||"");else if(s.type===3)o=document.createElement("b");else if(s.type===4)o=document.createElement("i");else if(s.type===7&&i)o=document.createElement("code");else if(s.type===5&&t){const g=document.createElement("a");t.disposables.add(c.addStandardDisposableListener(g,"click",u=>{t.callback(String(s.index),u)})),o=g}else s.type===8?o=document.createElement("br"):s.type===1&&(o=n);o&&n!==o&&n.appendChild(o),o&&Array.isArray(s.children)&&s.children.forEach(g=>{f(o,g,t,i)})}function _(n,s){const t={type:1,children:[]};let i=0,o=t;const g=[],u=new y(n);for(;!u.eos();){let l=u.next();const a=l==="\\"&&p(u.peek(),s)!==0;if(a&&(l=u.next()),!a&&b(l,s)&&l===u.peek()){u.advance(),o.type===2&&(o=g.pop());const r=p(l,s);if(o.type===r||o.type===5&&r===6)o=g.pop();else{const d={type:r,children:[]};r===5&&(d.index=i,i++),o.children.push(d),g.push(o),o=d}}else if(l===`
`)o.type===2&&(o=g.pop()),o.children.push({type:8});else if(o.type!==2){const r={type:2,content:l};o.children.push(r),g.push(o),o=r}else o.content+=l}return o.type===2&&(o=g.pop()),g.length,t}function b(n,s){return p(n,s)!==0}function p(n,s){switch(n){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return s?7:0;default:return 0}}}),define(oe[163],re([1,0,5,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalPointerMoveMonitor=void 0;class E{constructor(){this._hooks=new k.DisposableStore,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(y,f){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const _=this._onStopCallback;this._onStopCallback=null,y&&_&&_(f)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(y,f,_,b,p){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=b,this._onStopCallback=p;let n=y;try{y.setPointerCapture(f),this._hooks.add((0,k.toDisposable)(()=>{try{y.releasePointerCapture(f)}catch{}}))}catch{n=c.getWindow(y)}this._hooks.add(c.addDisposableListener(n,c.EventType.POINTER_MOVE,s=>{if(s.buttons!==_){this.stopMonitoring(!0);return}s.preventDefault(),this._pointerMoveCallback(s)})),this._hooks.add(c.addDisposableListener(n,c.EventType.POINTER_UP,s=>this.stopMonitoring(!0)))}}e.GlobalPointerMoveMonitor=E}),define(oe[229],re([1,0,5,6,2]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PixelRatio=void 0;class L extends E.Disposable{constructor(b){super(),this._onDidChange=this._register(new k.Emitter),this.onDidChange=this._onDidChange.event,this._listener=()=>this._handleChange(b,!0),this._mediaQueryList=null,this._handleChange(b,!1)}_handleChange(b,p){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=b.matchMedia(`(resolution: ${b.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),p&&this._onDidChange.fire()}}class y extends E.Disposable{get value(){return this._value}constructor(b){super(),this._onDidChange=this._register(new k.Emitter),this.onDidChange=this._onDidChange.event,this._value=this._getPixelRatio(b);const p=this._register(new L(b));this._register(p.onDidChange(()=>{this._value=this._getPixelRatio(b),this._onDidChange.fire(this._value)}))}_getPixelRatio(b){const p=document.createElement("canvas").getContext("2d"),n=b.devicePixelRatio||1,s=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return n/s}}class f{constructor(){this.mapWindowIdToPixelRatioMonitor=new Map}_getOrCreatePixelRatioMonitor(b){const p=(0,c.getWindowId)(b);let n=this.mapWindowIdToPixelRatioMonitor.get(p);return n||(n=(0,E.markAsSingleton)(new y(b)),this.mapWindowIdToPixelRatioMonitor.set(p,n),(0,E.markAsSingleton)(k.Event.once(c.onDidUnregisterWindow)(({vscodeWindowId:s})=>{s===p&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(p))}))),n}getInstance(b){return this._getOrCreatePixelRatioMonitor(b)}}e.PixelRatio=new f}),define(oe[68],re([1,0,5,52,13,126,6,2,73]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Gesture=e.EventType=void 0;var b;(function(n){n.Tap="-monaco-gesturetap",n.Change="-monaco-gesturechange",n.Start="-monaco-gesturestart",n.End="-monaco-gesturesend",n.Contextmenu="-monaco-gesturecontextmenu"})(b||(e.EventType=b={}));class p extends f.Disposable{static{this.SCROLL_FRICTION=-.005}static{this.HOLD_DELAY=700}static{this.CLEAR_TAP_COUNT_TIME=400}constructor(){super(),this.dispatched=!1,this.targets=new _.LinkedList,this.ignoreTargets=new _.LinkedList,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(y.Event.runAndSubscribe(c.onDidRegisterWindow,({window:s,disposables:t})=>{t.add(c.addDisposableListener(s.document,"touchstart",i=>this.onTouchStart(i),{passive:!1})),t.add(c.addDisposableListener(s.document,"touchend",i=>this.onTouchEnd(s,i))),t.add(c.addDisposableListener(s.document,"touchmove",i=>this.onTouchMove(i),{passive:!1}))},{window:k.mainWindow,disposables:this._store}))}static addTarget(s){if(!p.isTouchDevice())return f.Disposable.None;p.INSTANCE||(p.INSTANCE=(0,f.markAsSingleton)(new p));const t=p.INSTANCE.targets.push(s);return(0,f.toDisposable)(t)}static ignoreTarget(s){if(!p.isTouchDevice())return f.Disposable.None;p.INSTANCE||(p.INSTANCE=(0,f.markAsSingleton)(new p));const t=p.INSTANCE.ignoreTargets.push(s);return(0,f.toDisposable)(t)}static isTouchDevice(){return"ontouchstart"in k.mainWindow||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(s){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let i=0,o=s.targetTouches.length;i<o;i++){const g=s.targetTouches.item(i);this.activeTouches[g.identifier]={id:g.identifier,initialTarget:g.target,initialTimeStamp:t,initialPageX:g.pageX,initialPageY:g.pageY,rollingTimestamps:[t],rollingPageX:[g.pageX],rollingPageY:[g.pageY]};const u=this.newGestureEvent(b.Start,g.target);u.pageX=g.pageX,u.pageY=g.pageY,this.dispatchEvent(u)}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}onTouchEnd(s,t){const i=Date.now(),o=Object.keys(this.activeTouches).length;for(let g=0,u=t.changedTouches.length;g<u;g++){const l=t.changedTouches.item(g);if(!this.activeTouches.hasOwnProperty(String(l.identifier))){console.warn("move of an UNKNOWN touch",l);continue}const a=this.activeTouches[l.identifier],r=Date.now()-a.initialTimeStamp;if(r<p.HOLD_DELAY&&Math.abs(a.initialPageX-E.tail(a.rollingPageX))<30&&Math.abs(a.initialPageY-E.tail(a.rollingPageY))<30){const d=this.newGestureEvent(b.Tap,a.initialTarget);d.pageX=E.tail(a.rollingPageX),d.pageY=E.tail(a.rollingPageY),this.dispatchEvent(d)}else if(r>=p.HOLD_DELAY&&Math.abs(a.initialPageX-E.tail(a.rollingPageX))<30&&Math.abs(a.initialPageY-E.tail(a.rollingPageY))<30){const d=this.newGestureEvent(b.Contextmenu,a.initialTarget);d.pageX=E.tail(a.rollingPageX),d.pageY=E.tail(a.rollingPageY),this.dispatchEvent(d)}else if(o===1){const d=E.tail(a.rollingPageX),m=E.tail(a.rollingPageY),h=E.tail(a.rollingTimestamps)-a.rollingTimestamps[0],v=d-a.rollingPageX[0],C=m-a.rollingPageY[0],w=[...this.targets].filter(S=>a.initialTarget instanceof Node&&S.contains(a.initialTarget));this.inertia(s,w,i,Math.abs(v)/h,v>0?1:-1,d,Math.abs(C)/h,C>0?1:-1,m)}this.dispatchEvent(this.newGestureEvent(b.End,a.initialTarget)),delete this.activeTouches[l.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(s,t){const i=document.createEvent("CustomEvent");return i.initEvent(s,!1,!0),i.initialTarget=t,i.tapCount=0,i}dispatchEvent(s){if(s.type===b.Tap){const t=new Date().getTime();let i=0;t-this._lastSetTapCountTime>p.CLEAR_TAP_COUNT_TIME?i=1:i=2,this._lastSetTapCountTime=t,s.tapCount=i}else(s.type===b.Change||s.type===b.Contextmenu)&&(this._lastSetTapCountTime=0);if(s.initialTarget instanceof Node){for(const i of this.ignoreTargets)if(i.contains(s.initialTarget))return;const t=[];for(const i of this.targets)if(i.contains(s.initialTarget)){let o=0,g=s.initialTarget;for(;g&&g!==i;)o++,g=g.parentElement;t.push([o,i])}t.sort((i,o)=>i[0]-o[0]);for(const[i,o]of t)o.dispatchEvent(s),this.dispatched=!0}}inertia(s,t,i,o,g,u,l,a,r){this.handle=c.scheduleAtNextAnimationFrame(s,()=>{const d=Date.now(),m=d-i;let h=0,v=0,C=!0;o+=p.SCROLL_FRICTION*m,l+=p.SCROLL_FRICTION*m,o>0&&(C=!1,h=g*o*m),l>0&&(C=!1,v=a*l*m);const w=this.newGestureEvent(b.Change);w.translationX=h,w.translationY=v,t.forEach(S=>S.dispatchEvent(w)),C||this.inertia(s,t,d,o,g,u+h,l,a,r+v)})}onTouchMove(s){const t=Date.now();for(let i=0,o=s.changedTouches.length;i<o;i++){const g=s.changedTouches.item(i);if(!this.activeTouches.hasOwnProperty(String(g.identifier))){console.warn("end of an UNKNOWN touch",g);continue}const u=this.activeTouches[g.identifier],l=this.newGestureEvent(b.Change,u.initialTarget);l.translationX=g.pageX-E.tail(u.rollingPageX),l.translationY=g.pageY-E.tail(u.rollingPageY),l.pageX=g.pageX,l.pageY=g.pageY,this.dispatchEvent(l),u.rollingPageX.length>3&&(u.rollingPageX.shift(),u.rollingPageY.shift(),u.rollingTimestamps.shift()),u.rollingPageX.push(g.pageX),u.rollingPageY.push(g.pageY),u.rollingTimestamps.push(t)}this.dispatched&&(s.preventDefault(),s.stopPropagation(),this.dispatched=!1)}}e.Gesture=p,De([L.memoize],p,"isTouchDevice",null)}),define(oe[111],re([1,0,5,30]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderLabelWithIcons=L,e.renderIcon=y;const E=new RegExp(`(\\\\)?\\$\\((${k.ThemeIcon.iconNameExpression}(?:${k.ThemeIcon.iconModifierExpression})?)\\)`,"g");function L(f){const _=new Array;let b,p=0,n=0;for(;(b=E.exec(f))!==null;){n=b.index||0,p<n&&_.push(f.substring(p,n)),p=(b.index||0)+b[0].length;const[,s,t]=b;_.push(s?`$(${t})`:y({id:t}))}return p<f.length&&_.push(f.substring(p)),_}function y(f){const _=c.$("span");return _.classList.add(...k.ThemeIcon.asClassNameArray(f)),_}}),define(oe[307],re([1,0,5,81,43,111,2,54]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HighlightedLabel=void 0;class _ extends y.Disposable{constructor(p,n){super(),this.options=n,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=n?.supportIcons??!1,this.domNode=c.append(p,c.$("span.monaco-highlighted-label"))}get element(){return this.domNode}set(p,n=[],s="",t){p||(p=""),t&&(p=_.escapeNewLines(p,n)),!(this.didEverRender&&this.text===p&&this.title===s&&f.equals(this.highlights,n))&&(this.text=p,this.title=s,this.highlights=n,this.render())}render(){const p=[];let n=0;for(const s of this.highlights){if(s.end===s.start)continue;if(n<s.start){const o=this.text.substring(n,s.start);this.supportIcons?p.push(...(0,L.renderLabelWithIcons)(o)):p.push(o),n=s.start}const t=this.text.substring(n,s.end),i=c.$("span.highlight",void 0,...this.supportIcons?(0,L.renderLabelWithIcons)(t):[t]);s.extraClasses&&i.classList.add(...s.extraClasses),p.push(i),n=s.end}if(n<this.text.length){const s=this.text.substring(n);this.supportIcons?p.push(...(0,L.renderLabelWithIcons)(s)):p.push(s)}if(c.reset(this.domNode,...p),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const s=this.options?.hoverDelegate??(0,E.getDefaultHoverDelegate)("mouse");this.customHover=this._register((0,k.getBaseLayerHoverDelegate)().setupManagedHover(s,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(p,n){let s=0,t=0;return p.replace(/\r\n|\r|\n/g,(i,o)=>{t=i===`\r
`?-1:0,o+=s;for(const g of n)g.end<=o||(g.start>=o&&(g.start+=t),g.end>=o&&(g.end+=t));return s+=t,"\u23CE"})}}e.HighlightedLabel=_}),define(oe[458],re([1,0,5]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RowCache=void 0;class k{constructor(L){this.renderers=L,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(L){let y=this.getTemplateCache(L).pop(),f=!1;if(y)f=this.transactionNodesPendingRemoval.has(y.domNode),f&&this.transactionNodesPendingRemoval.delete(y.domNode);else{const _=(0,c.$)(".monaco-list-row"),p=this.getRenderer(L).renderTemplate(_);y={domNode:_,templateId:L,templateData:p}}return{row:y,isReusingConnectedDomNode:f}}release(L){L&&this.releaseRow(L)}transact(L){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{L()}finally{for(const y of this.transactionNodesPendingRemoval)this.doRemoveNode(y);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(L){const{domNode:y,templateId:f}=L;y&&(this.inTransaction?this.transactionNodesPendingRemoval.add(y):this.doRemoveNode(y)),this.getTemplateCache(f).push(L)}doRemoveNode(L){L.classList.remove("scrolling"),L.remove()}getTemplateCache(L){let y=this.cache.get(L);return y||(y=[],this.cache.set(L,y)),y}dispose(){this.cache.forEach((L,y)=>{for(const f of L)this.getRenderer(y).disposeTemplate(f.templateData),f.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(L){const y=this.renderers.get(L);if(!y)throw new Error(`No renderer found for ${L}`);return y}}e.RowCache=k}),define(oe[459],re([1,0,5,68,13,6,2,16]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectBoxNative=void 0;class _ extends y.Disposable{constructor(p,n,s,t){super(),this.selected=0,this.selectBoxOptions=t||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new L.Emitter),this.styles=s,this.registerListeners(),this.setOptions(p,n)}registerListeners(){this._register(k.Gesture.addTarget(this.selectElement)),[k.EventType.Tap].forEach(p=>{this._register(c.addDisposableListener(this.selectElement,p,n=>{this.selectElement.focus()}))}),this._register(c.addStandardDisposableListener(this.selectElement,"click",p=>{c.EventHelper.stop(p,!0)})),this._register(c.addStandardDisposableListener(this.selectElement,"change",p=>{this.selectElement.title=p.target.value,this._onDidSelect.fire({index:p.target.selectedIndex,selected:p.target.value})})),this._register(c.addStandardDisposableListener(this.selectElement,"keydown",p=>{let n=!1;f.isMacintosh?(p.keyCode===18||p.keyCode===16||p.keyCode===10)&&(n=!0):(p.keyCode===18&&p.altKey||p.keyCode===10||p.keyCode===3)&&(n=!0),n&&p.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(p,n){(!this.options||!E.equals(this.options,p))&&(this.options=p,this.selectElement.options.length=0,this.options.forEach((s,t)=>{this.selectElement.add(this.createOption(s.text,t,s.isDisabled))})),n!==void 0&&this.select(n)}select(p){this.options.length===0?this.selected=0:p>=0&&p<this.options.length?this.selected=p:p>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(p){this.selectElement.tabIndex=p?0:-1}render(p){p.classList.add("select-container"),p.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(p,n,s){const t=document.createElement("option");return t.value=p,t.text=p,t.disabled=!!s,t}}e.SelectBoxNative=_}),define(oe[83],re([1,0,5,46,74,68,2]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Widget=void 0;class f extends y.Disposable{onclick(b,p){this._register(c.addDisposableListener(b,c.EventType.CLICK,n=>p(new E.StandardMouseEvent(c.getWindow(b),n))))}onmousedown(b,p){this._register(c.addDisposableListener(b,c.EventType.MOUSE_DOWN,n=>p(new E.StandardMouseEvent(c.getWindow(b),n))))}onmouseover(b,p){this._register(c.addDisposableListener(b,c.EventType.MOUSE_OVER,n=>p(new E.StandardMouseEvent(c.getWindow(b),n))))}onmouseleave(b,p){this._register(c.addDisposableListener(b,c.EventType.MOUSE_LEAVE,n=>p(new E.StandardMouseEvent(c.getWindow(b),n))))}onkeydown(b,p){this._register(c.addDisposableListener(b,c.EventType.KEY_DOWN,n=>p(new k.StandardKeyboardEvent(n))))}onkeyup(b,p){this._register(c.addDisposableListener(b,c.EventType.KEY_UP,n=>p(new k.StandardKeyboardEvent(n))))}oninput(b,p){this._register(c.addDisposableListener(b,c.EventType.INPUT,p))}onblur(b,p){this._register(c.addDisposableListener(b,c.EventType.BLUR,p))}onfocus(b,p){this._register(c.addDisposableListener(b,c.EventType.FOCUS,p))}ignoreGesture(b){return L.Gesture.ignoreTarget(b)}}e.Widget=f}),define(oe[230],re([1,0,163,83,14,30,5]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollbarArrow=e.ARROW_IMG_SIZE=void 0,e.ARROW_IMG_SIZE=11;class f extends k.Widget{constructor(b){super(),this._onActivate=b.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=b.bgWidth+"px",this.bgDomNode.style.height=b.bgHeight+"px",typeof b.top<"u"&&(this.bgDomNode.style.top="0px"),typeof b.left<"u"&&(this.bgDomNode.style.left="0px"),typeof b.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof b.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=b.className,this.domNode.classList.add(...L.ThemeIcon.asClassNameArray(b.icon)),this.domNode.style.position="absolute",this.domNode.style.width=e.ARROW_IMG_SIZE+"px",this.domNode.style.height=e.ARROW_IMG_SIZE+"px",typeof b.top<"u"&&(this.domNode.style.top=b.top+"px"),typeof b.left<"u"&&(this.domNode.style.left=b.left+"px"),typeof b.bottom<"u"&&(this.domNode.style.bottom=b.bottom+"px"),typeof b.right<"u"&&(this.domNode.style.right=b.right+"px"),this._pointerMoveMonitor=this._register(new c.GlobalPointerMoveMonitor),this._register(y.addStandardDisposableListener(this.bgDomNode,y.EventType.POINTER_DOWN,p=>this._arrowPointerDown(p))),this._register(y.addStandardDisposableListener(this.domNode,y.EventType.POINTER_DOWN,p=>this._arrowPointerDown(p))),this._pointerdownRepeatTimer=this._register(new y.WindowIntervalTimer),this._pointerdownScheduleRepeatTimer=this._register(new E.TimeoutTimer)}_arrowPointerDown(b){if(!b.target||!(b.target instanceof Element))return;const p=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,y.getWindow(b))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(p,200),this._pointerMoveMonitor.startMonitoring(b.target,b.pointerId,b.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),b.preventDefault()}}e.ScrollbarArrow=f}),define(oe[308],re([1,0,5,39,163,230,453,83,16]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractScrollbar=void 0;const b=140;class p extends f.Widget{constructor(s){super(),this._lazyRender=s.lazyRender,this._host=s.host,this._scrollable=s.scrollable,this._scrollByPage=s.scrollByPage,this._scrollbarState=s.scrollbarState,this._visibilityController=this._register(new y.ScrollbarVisibilityController(s.visibility,"visible scrollbar "+s.extraScrollbarClassName,"invisible scrollbar "+s.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new E.GlobalPointerMoveMonitor),this._shouldRender=!0,this.domNode=(0,k.createFastDomNode)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(c.addDisposableListener(this.domNode.domNode,c.EventType.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(s){const t=this._register(new L.ScrollbarArrow(s));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(s,t,i,o){this.slider=(0,k.createFastDomNode)(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(s),this.slider.setLeft(t),typeof i=="number"&&this.slider.setWidth(i),typeof o=="number"&&this.slider.setHeight(o),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(c.addDisposableListener(this.slider.domNode,c.EventType.POINTER_DOWN,g=>{g.button===0&&(g.preventDefault(),this._sliderPointerDown(g))})),this.onclick(this.slider.domNode,g=>{g.leftButton&&g.stopPropagation()})}_onElementSize(s){return this._scrollbarState.setVisibleSize(s)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(s){return this._scrollbarState.setScrollSize(s)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(s){return this._scrollbarState.setScrollPosition(s)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(s){s.target===this.domNode.domNode&&this._onPointerDown(s)}delegatePointerDown(s){const t=this.domNode.domNode.getClientRects()[0].top,i=t+this._scrollbarState.getSliderPosition(),o=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),g=this._sliderPointerPosition(s);i<=g&&g<=o?s.button===0&&(s.preventDefault(),this._sliderPointerDown(s)):this._onPointerDown(s)}_onPointerDown(s){let t,i;if(s.target===this.domNode.domNode&&typeof s.offsetX=="number"&&typeof s.offsetY=="number")t=s.offsetX,i=s.offsetY;else{const g=c.getDomNodePagePosition(this.domNode.domNode);t=s.pageX-g.left,i=s.pageY-g.top}const o=this._pointerDownRelativePosition(t,i);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(o):this._scrollbarState.getDesiredScrollPositionFromOffset(o)),s.button===0&&(s.preventDefault(),this._sliderPointerDown(s))}_sliderPointerDown(s){if(!s.target||!(s.target instanceof Element))return;const t=this._sliderPointerPosition(s),i=this._sliderOrthogonalPointerPosition(s),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(s.target,s.pointerId,s.buttons,g=>{const u=this._sliderOrthogonalPointerPosition(g),l=Math.abs(u-i);if(_.isWindows&&l>b){this._setDesiredScrollPositionNow(o.getScrollPosition());return}const r=this._sliderPointerPosition(g)-t;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(r))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(s){const t={};this.writeScrollPosition(t,s),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(s){this._updateScrollbarSize(s),this._scrollbarState.setScrollbarSize(s),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}e.AbstractScrollbar=p}),define(oe[460],re([1,0,74,308,230,221,26]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HorizontalScrollbar=void 0;class f extends k.AbstractScrollbar{constructor(b,p,n){const s=b.getScrollDimensions(),t=b.getCurrentScrollPosition();if(super({lazyRender:p.lazyRender,host:n,scrollbarState:new L.ScrollbarState(p.horizontalHasArrows?p.arrowSize:0,p.horizontal===2?0:p.horizontalScrollbarSize,p.vertical===2?0:p.verticalScrollbarSize,s.width,s.scrollWidth,t.scrollLeft),visibility:p.horizontal,extraScrollbarClassName:"horizontal",scrollable:b,scrollByPage:p.scrollByPage}),p.horizontalHasArrows){const i=(p.arrowSize-E.ARROW_IMG_SIZE)/2,o=(p.horizontalScrollbarSize-E.ARROW_IMG_SIZE)/2;this._createArrow({className:"scra",icon:y.Codicon.scrollbarButtonLeft,top:o,left:i,bottom:void 0,right:void 0,bgWidth:p.arrowSize,bgHeight:p.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new c.StandardWheelEvent(null,1,0))}),this._createArrow({className:"scra",icon:y.Codicon.scrollbarButtonRight,top:o,left:void 0,bottom:void 0,right:i,bgWidth:p.arrowSize,bgHeight:p.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new c.StandardWheelEvent(null,-1,0))})}this._createSlider(Math.floor((p.horizontalScrollbarSize-p.horizontalSliderSize)/2),0,void 0,p.horizontalSliderSize)}_updateSlider(b,p){this.slider.setWidth(b),this.slider.setLeft(p)}_renderDomNode(b,p){this.domNode.setWidth(b),this.domNode.setHeight(p),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(b){return this._shouldRender=this._onElementScrollSize(b.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(b.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(b.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(b,p){return b}_sliderPointerPosition(b){return b.pageX}_sliderOrthogonalPointerPosition(b){return b.pageY}_updateScrollbarSize(b){this.slider.setHeight(b)}writeScrollPosition(b,p){b.scrollLeft=p}updateOptions(b){this.updateScrollbarSize(b.horizontal===2?0:b.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(b.vertical===2?0:b.verticalScrollbarSize),this._visibilityController.setVisibility(b.horizontal),this._scrollByPage=b.scrollByPage}}e.HorizontalScrollbar=f}),define(oe[461],re([1,0,74,308,230,221,26]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VerticalScrollbar=void 0;class f extends k.AbstractScrollbar{constructor(b,p,n){const s=b.getScrollDimensions(),t=b.getCurrentScrollPosition();if(super({lazyRender:p.lazyRender,host:n,scrollbarState:new L.ScrollbarState(p.verticalHasArrows?p.arrowSize:0,p.vertical===2?0:p.verticalScrollbarSize,0,s.height,s.scrollHeight,t.scrollTop),visibility:p.vertical,extraScrollbarClassName:"vertical",scrollable:b,scrollByPage:p.scrollByPage}),p.verticalHasArrows){const i=(p.arrowSize-E.ARROW_IMG_SIZE)/2,o=(p.verticalScrollbarSize-E.ARROW_IMG_SIZE)/2;this._createArrow({className:"scra",icon:y.Codicon.scrollbarButtonUp,top:i,left:o,bottom:void 0,right:void 0,bgWidth:p.verticalScrollbarSize,bgHeight:p.arrowSize,onActivate:()=>this._host.onMouseWheel(new c.StandardWheelEvent(null,0,1))}),this._createArrow({className:"scra",icon:y.Codicon.scrollbarButtonDown,top:void 0,left:o,bottom:i,right:void 0,bgWidth:p.verticalScrollbarSize,bgHeight:p.arrowSize,onActivate:()=>this._host.onMouseWheel(new c.StandardWheelEvent(null,0,-1))})}this._createSlider(0,Math.floor((p.verticalScrollbarSize-p.verticalSliderSize)/2),p.verticalSliderSize,void 0)}_updateSlider(b,p){this.slider.setHeight(b),this.slider.setTop(p)}_renderDomNode(b,p){this.domNode.setWidth(p),this.domNode.setHeight(b),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(b){return this._shouldRender=this._onElementScrollSize(b.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(b.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(b.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(b,p){return p}_sliderPointerPosition(b){return b.pageY}_sliderOrthogonalPointerPosition(b){return b.pageX}_updateScrollbarSize(b){this.slider.setWidth(b)}writeScrollPosition(b,p){b.scrollTop=p}updateOptions(b){this.updateScrollbarSize(b.vertical===2?0:b.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(b.vertical),this._scrollByPage=b.scrollByPage}}e.VerticalScrollbar=f}),define(oe[51],re([1,0,224,47,99,16,11,22]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataUri=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=void 0,e.originalFSPath=_;function _(n){return(0,f.uriToFsPath)(n,!0)}class b{constructor(s){this._ignorePathCasing=s}compare(s,t,i=!1){return s===t?0:(0,y.compare)(this.getComparisonKey(s,i),this.getComparisonKey(t,i))}isEqual(s,t,i=!1){return s===t?!0:!s||!t?!1:this.getComparisonKey(s,i)===this.getComparisonKey(t,i)}getComparisonKey(s,t=!1){return s.with({path:this._ignorePathCasing(s)?s.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}isEqualOrParent(s,t,i=!1){if(s.scheme===t.scheme){if(s.scheme===k.Schemas.file)return c.isEqualOrParent(_(s),_(t),this._ignorePathCasing(s))&&s.query===t.query&&(i||s.fragment===t.fragment);if((0,e.isEqualAuthority)(s.authority,t.authority))return c.isEqualOrParent(s.path,t.path,this._ignorePathCasing(s),"/")&&s.query===t.query&&(i||s.fragment===t.fragment)}return!1}joinPath(s,...t){return f.URI.joinPath(s,...t)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return E.posix.basename(s.path)}extname(s){return E.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let t;return s.scheme===k.Schemas.file?t=f.URI.file(E.dirname(_(s))).path:(t=E.posix.dirname(s.path),s.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),t="/")),s.with({path:t})}normalizePath(s){if(!s.path.length)return s;let t;return s.scheme===k.Schemas.file?t=f.URI.file(E.normalize(_(s))).path:t=E.posix.normalize(s.path),s.with({path:t})}relativePath(s,t){if(s.scheme!==t.scheme||!(0,e.isEqualAuthority)(s.authority,t.authority))return;if(s.scheme===k.Schemas.file){const g=E.relative(_(s),_(t));return L.isWindows?c.toSlashes(g):g}let i=s.path||"/";const o=t.path||"/";if(this._ignorePathCasing(s)){let g=0;for(const u=Math.min(i.length,o.length);g<u&&!(i.charCodeAt(g)!==o.charCodeAt(g)&&i.charAt(g).toLowerCase()!==o.charAt(g).toLowerCase());g++);i=o.substr(0,g)+i.substr(g)}return E.posix.relative(i,o)}resolvePath(s,t){if(s.scheme===k.Schemas.file){const i=f.URI.file(E.resolve(_(s),t));return s.with({authority:i.authority,path:i.path})}return t=c.toPosixPath(t),s.with({path:E.posix.resolve(s.path,t)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,t){return s===t||s!==void 0&&t!==void 0&&(0,y.equalsIgnoreCase)(s,t)}hasTrailingPathSeparator(s,t=E.sep){if(s.scheme===k.Schemas.file){const i=_(s);return i.length>c.getRoot(i).length&&i[i.length-1]===t}else{const i=s.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,t=E.sep){return(0,e.hasTrailingPathSeparator)(s,t)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,t=E.sep){let i=!1;if(s.scheme===k.Schemas.file){const o=_(s);i=o!==void 0&&o.length===c.getRoot(o).length&&o[o.length-1]===t}else{t="/";const o=s.path;i=o.length===1&&o.charCodeAt(o.length-1)===47}return!i&&!(0,e.hasTrailingPathSeparator)(s,t)?s.with({path:s.path+"/"}):s}}e.ExtUri=b,e.extUri=new b(()=>!1),e.extUriBiasedIgnorePathCase=new b(n=>n.scheme===k.Schemas.file?!L.isLinux:!0),e.extUriIgnorePathCase=new b(n=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);var p;(function(n){n.META_DATA_LABEL="label",n.META_DATA_DESCRIPTION="description",n.META_DATA_SIZE="size",n.META_DATA_MIME="mime";function s(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(u=>{const[l,a]=u.split(":");l&&a&&i.set(l,a)});const g=t.path.substring(0,t.path.indexOf(";"));return g&&i.set(n.META_DATA_MIME,g),i}n.parseMetaData=s})(p||(e.DataUri=p={}))}),define(oe[55],re([1,0,8,141,51,11,22]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkdownString=void 0,e.isEmptyMarkdownString=_,e.isMarkdownString=b,e.markdownStringEqual=p,e.escapeMarkdownSyntaxTokens=n,e.appendEscapedMarkdownCodeBlockFence=s,e.escapeDoubleQuotes=t,e.removeMarkdownEscapes=i,e.parseHrefAndDimensions=o;class f{constructor(u="",l=!1){if(this.value=u,typeof this.value!="string")throw(0,c.illegalArgument)("value");typeof l=="boolean"?(this.isTrusted=l,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=l.isTrusted??void 0,this.supportThemeIcons=l.supportThemeIcons??!1,this.supportHtml=l.supportHtml??!1)}appendText(u,l=0){return this.value+=n(this.supportThemeIcons?(0,k.escapeIcons)(u):u).replace(/([ \t]+)/g,(a,r)=>"&nbsp;".repeat(r.length)).replace(/\>/gm,"\\>").replace(/\n/g,l===1?`\\
`:`

`),this}appendMarkdown(u){return this.value+=u,this}appendCodeblock(u,l){return this.value+=`
${s(l,u)}
`,this}appendLink(u,l,a){return this.value+="[",this.value+=this._escape(l,"]"),this.value+="](",this.value+=this._escape(String(u),")"),a&&(this.value+=` "${this._escape(this._escape(a,'"'),")")}"`),this.value+=")",this}_escape(u,l){const a=new RegExp((0,L.escapeRegExpCharacters)(l),"g");return u.replace(a,(r,d)=>u.charAt(d-1)!=="\\"?`\\${r}`:r)}}e.MarkdownString=f;function _(g){return b(g)?!g.value:Array.isArray(g)?g.every(_):!0}function b(g){return g instanceof f?!0:g&&typeof g=="object"?typeof g.value=="string"&&(typeof g.isTrusted=="boolean"||typeof g.isTrusted=="object"||g.isTrusted===void 0)&&(typeof g.supportThemeIcons=="boolean"||g.supportThemeIcons===void 0):!1}function p(g,u){return g===u?!0:!g||!u?!1:g.value===u.value&&g.isTrusted===u.isTrusted&&g.supportThemeIcons===u.supportThemeIcons&&g.supportHtml===u.supportHtml&&(g.baseUri===u.baseUri||!!g.baseUri&&!!u.baseUri&&(0,E.isEqual)(y.URI.from(g.baseUri),y.URI.from(u.baseUri)))}function n(g){return g.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function s(g,u){const l=g.match(/^`+/gm)?.reduce((r,d)=>r.length>d.length?r:d).length??0,a=l>=3?l+1:3;return[`${"`".repeat(a)}${u}`,g,`${"`".repeat(a)}`].join(`
`)}function t(g){return g.replace(/"/g,"&quot;")}function i(g){return g&&g.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function o(g){const u=[],l=g.split("|").map(r=>r.trim());g=l[0];const a=l[1];if(a){const r=/height=(\d+)/.exec(a),d=/width=(\d+)/.exec(a),m=r?r[1]:"",h=d?d[1]:"",v=isFinite(parseInt(h)),C=isFinite(parseInt(m));v&&u.push(`width="${h}"`),C&&u.push(`height="${m}"`)}return{href:g,dimensions:u}}}),define(oe[193],re([1,0,5,305,92,306,46,74,111,8,6,55,141,187,98,2,442,228,47,54,51,11,22]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allowedMarkdownAttr=void 0,e.renderMarkdown=v,e.renderStringAsPlaintext=T,e.renderMarkdownAsPlaintext=M,e.fillInIncompleteTokens=K;const h=Object.freeze({image:(ne,J,B)=>{let j=[],V=[];return ne&&({href:ne,dimensions:j}=(0,n.parseHrefAndDimensions)(ne),V.push(`src="${(0,n.escapeDoubleQuotes)(ne)}"`)),B&&V.push(`alt="${(0,n.escapeDoubleQuotes)(B)}"`),J&&V.push(`title="${(0,n.escapeDoubleQuotes)(J)}"`),j.length&&(V=V.concat(j)),"<img "+V.join(" ")+">"},paragraph:ne=>`<p>${ne}</p>`,link:(ne,J,B)=>typeof ne!="string"?"":(ne===B&&(B=(0,n.removeMarkdownEscapes)(B)),J=typeof J=="string"?(0,n.escapeDoubleQuotes)((0,n.removeMarkdownEscapes)(J)):"",ne=(0,n.removeMarkdownEscapes)(ne),ne=ne.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${ne}" title="${J||ne}" draggable="false">${B}</a>`)});function v(ne,J={},B={}){const j=new o.DisposableStore;let V=!1;const $=(0,L.createElement)(J),Z=function(ye){let Ee;try{Ee=(0,u.parse)(decodeURIComponent(ye))}catch{}return Ee?(Ee=(0,a.cloneAndChange)(Ee,ke=>{if(ne.uris&&ne.uris[ke])return m.URI.revive(ne.uris[ke])}),encodeURIComponent(JSON.stringify(Ee))):ye},ee=function(ye,Ee){const ke=ne.uris&&ne.uris[ye];let Re=m.URI.revive(ke);return Ee?ye.startsWith(l.Schemas.data+":")?ye:(Re||(Re=m.URI.parse(ye)),l.FileAccess.uriToBrowserUri(Re).toString(!0)):!Re||m.URI.parse(ye).toString()===Re.toString()?ye:(Re.query&&(Re=Re.with({query:Z(Re.query)})),Re.toString())},le=new g.marked.Renderer;le.image=h.image,le.link=h.link,le.paragraph=h.paragraph;const de=[],me=[];if(J.codeBlockRendererSync?le.code=(ye,Ee)=>{const ke=t.defaultGenerator.nextId(),Re=J.codeBlockRendererSync(C(Ee),ye);return me.push([ke,Re]),`<div class="code" data-code="${ke}">${(0,d.escape)(ye)}</div>`}:J.codeBlockRenderer&&(le.code=(ye,Ee)=>{const ke=t.defaultGenerator.nextId(),Re=J.codeBlockRenderer(C(Ee),ye);return de.push(Re.then(Pe=>[ke,Pe])),`<div class="code" data-code="${ke}">${(0,d.escape)(ye)}</div>`}),J.actionHandler){const ye=function(Re){let Pe=Re.target;if(!(Pe.tagName!=="A"&&(Pe=Pe.parentElement,!Pe||Pe.tagName!=="A")))try{let Fe=Pe.dataset.href;Fe&&(ne.baseUri&&(Fe=w(m.URI.from(ne.baseUri),Fe)),J.actionHandler.callback(Fe,Re))}catch(Fe){(0,b.onUnexpectedError)(Fe)}finally{Re.preventDefault()}},Ee=J.actionHandler.disposables.add(new E.DomEmitter($,"click")),ke=J.actionHandler.disposables.add(new E.DomEmitter($,"auxclick"));J.actionHandler.disposables.add(p.Event.any(Ee.event,ke.event)(Re=>{const Pe=new f.StandardMouseEvent(c.getWindow($),Re);!Pe.leftButton&&!Pe.middleButton||ye(Pe)})),J.actionHandler.disposables.add(c.addDisposableListener($,"keydown",Re=>{const Pe=new y.StandardKeyboardEvent(Re);!Pe.equals(10)&&!Pe.equals(3)||ye(Pe)}))}ne.supportHtml||(B.sanitizer=ye=>J.sanitizerOptions?.replaceWithPlaintext?(0,d.escape)(ye):(ne.isTrusted?ye.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?ye:"",B.sanitize=!0,B.silent=!0),B.renderer=le;let be=ne.value??"";be.length>1e5&&(be=`${be.substr(0,1e5)}\u2026`),ne.supportThemeIcons&&(be=(0,s.markdownEscapeEscapedIcons)(be));let ve;if(J.fillInIncompleteTokens){const ye={...g.marked.defaults,...B},Ee=g.marked.lexer(be,ye),ke=K(Ee);ve=g.marked.parser(ke,ye)}else ve=g.marked.parse(be,B);ne.supportThemeIcons&&(ve=(0,_.renderLabelWithIcons)(ve).map(Ee=>typeof Ee=="string"?Ee:Ee.outerHTML).join(""));const Se=new DOMParser().parseFromString(D({isTrusted:ne.isTrusted,...J.sanitizerOptions},ve),"text/html");if(Se.body.querySelectorAll("img, audio, video, source").forEach(ye=>{const Ee=ye.getAttribute("src");if(Ee){let ke=Ee;try{ne.baseUri&&(ke=w(m.URI.from(ne.baseUri),ke))}catch{}if(ye.setAttribute("src",ee(ke,!0)),J.remoteImageIsAllowed){const Re=m.URI.parse(ke);Re.scheme!==l.Schemas.file&&Re.scheme!==l.Schemas.data&&!J.remoteImageIsAllowed(Re)&&ye.replaceWith(c.$("",void 0,ye.outerHTML))}}}),Se.body.querySelectorAll("a").forEach(ye=>{const Ee=ye.getAttribute("href");if(ye.setAttribute("href",""),!Ee||/^data:|javascript:/i.test(Ee)||/^command:/i.test(Ee)&&!ne.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(Ee))ye.replaceWith(...ye.childNodes);else{let ke=ee(Ee,!1);ne.baseUri&&(ke=w(m.URI.from(ne.baseUri),Ee)),ye.dataset.href=ke}}),$.innerHTML=D({isTrusted:ne.isTrusted,...J.sanitizerOptions},Se.body.innerHTML),de.length>0)Promise.all(de).then(ye=>{if(V)return;const Ee=new Map(ye),ke=$.querySelectorAll("div[data-code]");for(const Re of ke){const Pe=Ee.get(Re.dataset.code??"");Pe&&c.reset(Re,Pe)}J.asyncRenderCallback?.()});else if(me.length>0){const ye=new Map(me),Ee=$.querySelectorAll("div[data-code]");for(const ke of Ee){const Re=ye.get(ke.dataset.code??"");Re&&c.reset(ke,Re)}}if(J.asyncRenderCallback)for(const ye of $.getElementsByTagName("img")){const Ee=j.add(c.addDisposableListener(ye,"load",()=>{Ee.dispose(),J.asyncRenderCallback()}))}return{element:$,dispose:()=>{V=!0,j.dispose()}}}function C(ne){if(!ne)return"";const J=ne.split(/[\s+|:|,|\{|\?]/,1);return J.length?J[0]:ne}function w(ne,J){return/^\w[\w\d+.-]*:/.test(J)?J:ne.path.endsWith("/")?(0,r.resolvePath)(ne,J).toString():(0,r.resolvePath)((0,r.dirname)(ne),J).toString()}const S=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function D(ne,J){const{config:B,allowedSchemes:j}=I(ne),V=new o.DisposableStore;V.add(ie("uponSanitizeAttribute",($,Z)=>{if(Z.attrName==="style"||Z.attrName==="class"){if($.tagName==="SPAN"){if(Z.attrName==="style"){Z.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z]+)+\));)?(border-radius:[0-9]+px;)?$/.test(Z.attrValue);return}else if(Z.attrName==="class"){Z.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(Z.attrValue);return}}Z.keepAttr=!1;return}else if($.tagName==="INPUT"&&$.attributes.getNamedItem("type")?.value==="checkbox"){if(Z.attrName==="type"&&Z.attrValue==="checkbox"||Z.attrName==="disabled"||Z.attrName==="checked"){Z.keepAttr=!0;return}Z.keepAttr=!1}})),V.add(ie("uponSanitizeElement",($,Z)=>{if(Z.tagName==="input"&&($.attributes.getNamedItem("type")?.value==="checkbox"?$.setAttribute("disabled",""):ne.replaceWithPlaintext||$.remove()),ne.replaceWithPlaintext&&!Z.allowedTags[Z.tagName]&&Z.tagName!=="body"&&$.parentElement){let ee,le;if(Z.tagName==="#comment")ee=`<!--${$.textContent}-->`;else{const ve=S.includes(Z.tagName),Le=$.attributes.length?" "+Array.from($.attributes).map(Se=>`${Se.name}="${Se.value}"`).join(" "):"";ee=`<${Z.tagName}${Le}>`,ve||(le=`</${Z.tagName}>`)}const de=document.createDocumentFragment(),me=$.parentElement.ownerDocument.createTextNode(ee);de.appendChild(me);const be=le?$.parentElement.ownerDocument.createTextNode(le):void 0;for(;$.firstChild;)de.appendChild($.firstChild);be&&de.appendChild(be),$.parentElement.replaceChild(de,$)}})),V.add(c.hookDomPurifyHrefAndSrcSanitizer(j));try{return k.sanitize(J,{...B,RETURN_TRUSTED_TYPE:!0})}finally{V.dispose()}}e.allowedMarkdownAttr=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function I(ne){const J=[l.Schemas.http,l.Schemas.https,l.Schemas.mailto,l.Schemas.data,l.Schemas.file,l.Schemas.vscodeFileResource,l.Schemas.vscodeRemote,l.Schemas.vscodeRemoteResource];return ne.isTrusted&&J.push(l.Schemas.command),{config:{ALLOWED_TAGS:ne.allowedTags??[...c.basicMarkupHtmlTags],ALLOWED_ATTR:e.allowedMarkdownAttr,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:J}}function T(ne){return typeof ne=="string"?ne:M(ne)}function M(ne,J){let B=ne.value??"";B.length>1e5&&(B=`${B.substr(0,1e5)}\u2026`);const j=g.marked.parse(B,{renderer:J?O.value:N.value}).replace(/&(#\d+|[a-zA-Z]+);/g,V=>A.get(V)??V);return D({isTrusted:!1},j).toString()}const A=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function R(){const ne=new g.marked.Renderer;return ne.code=J=>J,ne.blockquote=J=>J,ne.html=J=>"",ne.heading=(J,B,j)=>J+`
`,ne.hr=()=>"",ne.list=(J,B)=>J,ne.listitem=J=>J+`
`,ne.paragraph=J=>J+`
`,ne.table=(J,B)=>J+B+`
`,ne.tablerow=J=>J,ne.tablecell=(J,B)=>J+" ",ne.strong=J=>J,ne.em=J=>J,ne.codespan=J=>J,ne.br=()=>`
`,ne.del=J=>J,ne.image=(J,B,j)=>"",ne.text=J=>J,ne.link=(J,B,j)=>j,ne}const N=new i.Lazy(ne=>R()),O=new i.Lazy(()=>{const ne=R();return ne.code=J=>`
\`\`\`
${J}
\`\`\`
`,ne});function x(ne){let J="";return ne.forEach(B=>{J+=B.raw}),J}function F(ne){if(ne.tokens)for(let J=ne.tokens.length-1;J>=0;J--){const B=ne.tokens[J];if(B.type==="text"){const j=B.raw.split(`
`),V=j[j.length-1];if(V.includes("`"))return Q(ne);if(V.includes("**"))return ue(ne);if(V.match(/\*\w/))return X(ne);if(V.match(/(^|\s)__\w/))return ge(ne);if(V.match(/(^|\s)_\w/))return G(ne);if(W(V)||z(V)&&ne.tokens.slice(0,J).some($=>$.type==="text"&&$.raw.match(/\[[^\]]*$/))){const $=ne.tokens.slice(J+1);return $[0]?.type==="link"&&$[1]?.type==="text"&&$[1].raw.match(/^ *"[^"]*$/)||V.match(/^[^"]* +"[^"]*$/)?te(ne):P(ne)}else if(V.match(/(^|\s)\[\w*/))return se(ne)}}}function W(ne){return!!ne.match(/(^|\s)\[.*\]\(\w*/)}function z(ne){return!!ne.match(/^[^\[]*\]\([^\)]*$/)}function q(ne){const J=ne.items[ne.items.length-1],B=J.tokens?J.tokens[J.tokens.length-1]:void 0;let j;if(B?.type==="text"&&!("inRawBlock"in J)&&(j=F(B)),!j||j.type!=="paragraph")return;const V=x(ne.items.slice(0,-1)),$=J.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!$)return;const Z=$+x(J.tokens.slice(0,-1))+j.raw,ee=g.marked.lexer(V+Z)[0];if(ee.type==="list")return ee}const H=3;function K(ne){for(let J=0;J<H;J++){const B=U(ne);if(B)ne=B;else break}return ne}function U(ne){let J,B;for(J=0;J<ne.length;J++){const j=ne[J];let V;if(j.type==="paragraph"&&(V=j.raw.match(/(\n|^)(````*)/))){const $=V[2];B=Y(ne.slice(J),$);break}if(j.type==="paragraph"&&j.raw.match(/(\n|^)\|/)){B=ce(ne.slice(J));break}if(J===ne.length-1&&j.type==="list"){const $=q(j);if($){B=[$];break}}if(J===ne.length-1&&j.type==="paragraph"){const $=F(j);if($){B=[$];break}}}if(B){const j=[...ne.slice(0,J),...B];return j.links=ne.links,j}return null}function Y(ne,J){const B=x(ne);return g.marked.lexer(B+`
${J}`)}function Q(ne){return pe(ne,"`")}function X(ne){return pe(ne,"*")}function G(ne){return pe(ne,"_")}function P(ne){return pe(ne,")")}function te(ne){return pe(ne,'")')}function se(ne){return pe(ne,"](https://microsoft.com)")}function ue(ne){return pe(ne,"**")}function ge(ne){return pe(ne,"__")}function pe(ne,J){const B=x(Array.isArray(ne)?ne:[ne]);return g.marked.lexer(B+J)[0]}function ce(ne){const J=x(ne),B=J.split(`
`);let j,V=!1;for(let $=0;$<B.length;$++){const Z=B[$].trim();if(typeof j>"u"&&Z.match(/^\s*\|/)){const ee=Z.match(/(\|[^\|]+)(?=\||$)/g);ee&&(j=ee.length)}else if(typeof j=="number")if(Z.match(/^\s*\|/)){if($!==B.length-1)return;V=!0}else return}if(typeof j=="number"&&j>0){const $=V?B.slice(0,-1).join(`
`):J,Z=!!$.match(/\|\s*$/),ee=$+(Z?"":"|")+`
|${" --- |".repeat(j)}`;return g.marked.lexer(ee)}}function ie(ne,J){return k.addHook(ne,J),(0,o.toDisposable)(()=>k.removeHook(ne))}}),define(oe[194],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateUuid=void 0,e.generateUuid=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let c;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?c=crypto.getRandomValues.bind(crypto):c=function(L){for(let y=0;y<L.length;y++)L[y]=Math.floor(Math.random()*256);return L};const k=new Uint8Array(16),E=[];for(let L=0;L<256;L++)E.push(L.toString(16).padStart(2,"0"));return function(){c(k),k[6]=k[6]&15|64,k[8]=k[8]&63|128;let y=0,f="";return f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f+="-",f+=E[k[y++]],f+=E[k[y++]],f+="-",f+=E[k[y++]],f+=E[k[y++]],f+="-",f+=E[k[y++]],f+=E[k[y++]],f+="-",f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f+=E[k[y++]],f}}()}),define(oe[195],re([1,0,13,53,194]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UriList=e.VSDataTransfer=void 0,e.createStringDataTransferItem=L,e.createFileDataTransferItem=y,e.matchesMimeType=b;function L(n){return{asString:async()=>n,asFile:()=>{},value:typeof n=="string"?n:void 0}}function y(n,s,t){const i={id:(0,E.generateUuid)(),name:n,uri:s,data:t};return{asString:async()=>"",asFile:()=>i,value:void 0}}class f{constructor(){this._entries=new Map}get size(){let s=0;for(const t of this._entries)s++;return s}has(s){return this._entries.has(this.toKey(s))}matches(s){const t=[...this._entries.keys()];return k.Iterable.some(this,([i,o])=>o.asFile())&&t.push("files"),p(_(s),t)}get(s){return this._entries.get(this.toKey(s))?.[0]}append(s,t){const i=this._entries.get(s);i?i.push(t):this._entries.set(this.toKey(s),[t])}replace(s,t){this._entries.set(this.toKey(s),[t])}delete(s){this._entries.delete(this.toKey(s))}*[Symbol.iterator](){for(const[s,t]of this._entries)for(const i of t)yield[s,i]}toKey(s){return _(s)}}e.VSDataTransfer=f;function _(n){return n.toLowerCase()}function b(n,s){return p(_(n),s.map(_))}function p(n,s){if(n==="*/*")return s.length>0;if(s.includes(n))return!0;const t=n.match(/^([a-z]+)\/([a-z]+|\*)$/i);if(!t)return!1;const[i,o,g]=t;return g==="*"?s.some(u=>u.startsWith(o+"/")):!1}e.UriList=Object.freeze({create:n=>(0,c.distinct)(n.map(s=>s.toString())).join(`\r
`),split:n=>n.split(`\r
`),parse:n=>e.UriList.split(n).filter(s=>!s.startsWith("#"))})}),define(oe[309],re([1,0,8,6,2,54,16,11]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleWorkerServer=e.SimpleWorkerClient=void 0,e.logOnceWebWorkerWarning=p,e.create=m;const _="$initialize";let b=!1;function p(h){y.isWeb&&(b||(b=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(h.message))}class n{constructor(v,C,w,S){this.vsWorker=v,this.req=C,this.method=w,this.args=S,this.type=0}}class s{constructor(v,C,w,S){this.vsWorker=v,this.seq=C,this.res=w,this.err=S,this.type=1}}class t{constructor(v,C,w,S){this.vsWorker=v,this.req=C,this.eventName=w,this.arg=S,this.type=2}}class i{constructor(v,C,w){this.vsWorker=v,this.req=C,this.event=w,this.type=3}}class o{constructor(v,C){this.vsWorker=v,this.req=C,this.type=4}}class g{constructor(v){this._workerId=-1,this._handler=v,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(v){this._workerId=v}sendMessage(v,C){const w=String(++this._lastSentReq);return new Promise((S,D)=>{this._pendingReplies[w]={resolve:S,reject:D},this._send(new n(this._workerId,w,v,C))})}listen(v,C){let w=null;const S=new k.Emitter({onWillAddFirstListener:()=>{w=String(++this._lastSentReq),this._pendingEmitters.set(w,S),this._send(new t(this._workerId,w,v,C))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(w),this._send(new o(this._workerId,w)),w=null}});return S.event}handleMessage(v){!v||!v.vsWorker||this._workerId!==-1&&v.vsWorker!==this._workerId||this._handleMessage(v)}_handleMessage(v){switch(v.type){case 1:return this._handleReplyMessage(v);case 0:return this._handleRequestMessage(v);case 2:return this._handleSubscribeEventMessage(v);case 3:return this._handleEventMessage(v);case 4:return this._handleUnsubscribeEventMessage(v)}}_handleReplyMessage(v){if(!this._pendingReplies[v.seq]){console.warn("Got reply to unknown seq");return}const C=this._pendingReplies[v.seq];if(delete this._pendingReplies[v.seq],v.err){let w=v.err;v.err.$isError&&(w=new Error,w.name=v.err.name,w.message=v.err.message,w.stack=v.err.stack),C.reject(w);return}C.resolve(v.res)}_handleRequestMessage(v){const C=v.req;this._handler.handleMessage(v.method,v.args).then(S=>{this._send(new s(this._workerId,C,S,void 0))},S=>{S.detail instanceof Error&&(S.detail=(0,c.transformErrorForSerialization)(S.detail)),this._send(new s(this._workerId,C,void 0,(0,c.transformErrorForSerialization)(S)))})}_handleSubscribeEventMessage(v){const C=v.req,w=this._handler.handleEvent(v.eventName,v.arg)(S=>{this._send(new i(this._workerId,C,S))});this._pendingEvents.set(C,w)}_handleEventMessage(v){if(!this._pendingEmitters.has(v.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(v.req).fire(v.event)}_handleUnsubscribeEventMessage(v){if(!this._pendingEvents.has(v.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(v.req).dispose(),this._pendingEvents.delete(v.req)}_send(v){const C=[];if(v.type===0)for(let w=0;w<v.args.length;w++)v.args[w]instanceof ArrayBuffer&&C.push(v.args[w]);else v.type===1&&v.res instanceof ArrayBuffer&&C.push(v.res);this._handler.sendMessage(v,C)}}class u extends E.Disposable{constructor(v,C,w){super();let S=null;this._worker=this._register(v.create("vs/base/common/worker/simpleWorker",R=>{this._protocol.handleMessage(R)},R=>{S?.(R)})),this._protocol=new g({sendMessage:(R,N)=>{this._worker.postMessage(R,N)},handleMessage:(R,N)=>{if(typeof w[R]!="function")return Promise.reject(new Error("Missing method "+R+" on main thread host."));try{return Promise.resolve(w[R].apply(w,N))}catch(O){return Promise.reject(O)}},handleEvent:(R,N)=>{if(a(R)){const O=w[R].call(w,N);if(typeof O!="function")throw new Error(`Missing dynamic event ${R} on main thread host.`);return O}if(l(R)){const O=w[R];if(typeof O!="function")throw new Error(`Missing event ${R} on main thread host.`);return O}throw new Error(`Malformed event name ${R}`)}}),this._protocol.setWorkerId(this._worker.getId());let D=null;const I=globalThis.require;typeof I<"u"&&typeof I.getConfig=="function"?D=I.getConfig():typeof globalThis.requirejs<"u"&&(D=globalThis.requirejs.s.contexts._.config);const T=(0,L.getAllMethodNames)(w);this._onModuleLoaded=this._protocol.sendMessage(_,[this._worker.getId(),JSON.parse(JSON.stringify(D)),C,T]);const M=(R,N)=>this._request(R,N),A=(R,N)=>this._protocol.listen(R,N);this._lazyProxy=new Promise((R,N)=>{S=N,this._onModuleLoaded.then(O=>{R(r(O,M,A))},O=>{N(O),this._onError("Worker failed to load "+C,O)})})}getProxyObject(){return this._lazyProxy}_request(v,C){return new Promise((w,S)=>{this._onModuleLoaded.then(()=>{this._protocol.sendMessage(v,C).then(w,S)},S)})}_onError(v,C){console.error(v),console.info(C)}}e.SimpleWorkerClient=u;function l(h){return h[0]==="o"&&h[1]==="n"&&f.isUpperAsciiLetter(h.charCodeAt(2))}function a(h){return/^onDynamic/.test(h)&&f.isUpperAsciiLetter(h.charCodeAt(9))}function r(h,v,C){const w=I=>function(){const T=Array.prototype.slice.call(arguments,0);return v(I,T)},S=I=>function(T){return C(I,T)},D={};for(const I of h){if(a(I)){D[I]=S(I);continue}if(l(I)){D[I]=C(I,void 0);continue}D[I]=w(I)}return D}class d{constructor(v,C){this._requestHandlerFactory=C,this._requestHandler=null,this._protocol=new g({sendMessage:(w,S)=>{v(w,S)},handleMessage:(w,S)=>this._handleMessage(w,S),handleEvent:(w,S)=>this._handleEvent(w,S)})}onmessage(v){this._protocol.handleMessage(v)}_handleMessage(v,C){if(v===_)return this.initialize(C[0],C[1],C[2],C[3]);if(!this._requestHandler||typeof this._requestHandler[v]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+v));try{return Promise.resolve(this._requestHandler[v].apply(this._requestHandler,C))}catch(w){return Promise.reject(w)}}_handleEvent(v,C){if(!this._requestHandler)throw new Error("Missing requestHandler");if(a(v)){const w=this._requestHandler[v].call(this._requestHandler,C);if(typeof w!="function")throw new Error(`Missing dynamic event ${v} on request handler.`);return w}if(l(v)){const w=this._requestHandler[v];if(typeof w!="function")throw new Error(`Missing event ${v} on request handler.`);return w}throw new Error(`Malformed event name ${v}`)}initialize(v,C,w,S){this._protocol.setWorkerId(v);const T=r(S,(M,A)=>this._protocol.sendMessage(M,A),(M,A)=>this._protocol.listen(M,A));return this._requestHandlerFactory?(this._requestHandler=this._requestHandlerFactory(T),Promise.resolve((0,L.getAllMethodNames)(this._requestHandler))):(C&&(typeof C.baseUrl<"u"&&delete C.baseUrl,typeof C.paths<"u"&&typeof C.paths.vs<"u"&&delete C.paths.vs,typeof C.trustedTypesPolicy<"u"&&delete C.trustedTypesPolicy,C.catchError=!0,globalThis.require.config(C)),new Promise((M,A)=>{(globalThis.require||ae)([w],N=>{if(this._requestHandler=N.create(T),!this._requestHandler){A(new Error("No RequestHandler!"));return}M((0,L.getAllMethodNames)(this._requestHandler))},A)}))}}e.SimpleWorkerServer=d;function m(h){return new d(h,null)}}),define(oe[462],re([1,0,102,8,47,309,2]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultWorkerFactory=void 0,e.getWorkerBootstrapUrl=b;let f;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?f=globalThis.workerttPolicy:f=(0,c.createTrustedTypesPolicy)("defaultWorkerFactory",{createScriptURL:t=>t});function _(t){const i=globalThis.MonacoEnvironment;if(i){if(typeof i.getWorker=="function")return i.getWorker("workerMain.js",t);if(typeof i.getWorkerUrl=="function"){const o=i.getWorkerUrl("workerMain.js",t);return new Worker(f?f.createScriptURL(o):o,{name:t})}}if(typeof ae=="function"){const o=ae.toUrl("vs/base/worker/workerMain.js"),g=b(o,t);return new Worker(f?f.createScriptURL(g):g,{name:t})}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function b(t,i){if(!(/^((http:)|(https:)|(file:))/.test(t)&&t.substring(0,globalThis.origin.length)!==globalThis.origin)){const l=t.lastIndexOf("?"),a=t.lastIndexOf("#",l),r=l>0?new URLSearchParams(t.substring(l+1,~a?a:void 0)):new URLSearchParams;E.COI.addSearchParam(r,!0,!0),r.toString()?t=`${t}?${r.toString()}#${i}`:t=`${t}#${i}`}const o="vs/base/worker/defaultWorkerFactory.js",g=ae.toUrl(o).slice(0,-o.length),u=new Blob([[`/*${i}*/`,`globalThis.MonacoEnvironment = { baseUrl: '${g}' };`,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(globalThis._VSCODE_NLS_MESSAGES)};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(globalThis._VSCODE_NLS_LANGUAGE)};`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`importScripts(ttPolicy?.createScriptURL('${t}') ?? '${t}');`,`/*${i}*/`].join("")],{type:"application/javascript"});return URL.createObjectURL(u)}function p(t){return typeof t.then=="function"}class n extends y.Disposable{constructor(i,o,g,u,l){super(),this.id=o,this.label=g;const a=_(g);p(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(i,[]),this.worker.then(r=>{r.onmessage=function(d){u(d.data)},r.onmessageerror=l,typeof r.addEventListener=="function"&&r.addEventListener("error",l)}),this._register((0,y.toDisposable)(()=>{this.worker?.then(r=>{r.onmessage=null,r.onmessageerror=null,r.removeEventListener("error",l),r.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(i,o){this.worker?.then(g=>{try{g.postMessage(i,o)}catch(u){(0,k.onUnexpectedError)(u),(0,k.onUnexpectedError)(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:u}))}})}}class s{static{this.LAST_WORKER_ID=0}constructor(i){this._label=i,this._webWorkerFailedBeforeError=!1}create(i,o,g){const u=++s.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new n(i,u,this._label||"anonymous"+u,o,l=>{(0,L.logOnceWebWorkerWarning)(l),this._webWorkerFailedBeforeError=l,g(l)})}}e.DefaultWorkerFactory=s}),define(oe[463],re([1,0,14,6,2,228,19]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorageDatabase=e.Storage=e.StorageState=e.StorageHint=void 0;var f;(function(n){n[n.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",n[n.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(f||(e.StorageHint=f={}));var _;(function(n){n[n.None=0]="None",n[n.Initialized=1]="Initialized",n[n.Closed=2]="Closed"})(_||(e.StorageState=_={}));class b extends E.Disposable{static{this.DEFAULT_FLUSH_DELAY=100}constructor(s,t=Object.create(null)){super(),this.database=s,this.options=t,this._onDidChangeStorage=this._register(new k.PauseableEmitter),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=_.None,this.cache=new Map,this.flushDelayer=this._register(new c.ThrottledDelayer(b.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(s=>this.onDidChangeItemsExternal(s)))}onDidChangeItemsExternal(s){this._onDidChangeStorage.pause();try{s.changed?.forEach((t,i)=>this.acceptExternal(i,t)),s.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(s,t){if(this.state===_.Closed)return;let i=!1;(0,y.isUndefinedOrNull)(t)?i=this.cache.delete(s):this.cache.get(s)!==t&&(this.cache.set(s,t),i=!0),i&&this._onDidChangeStorage.fire({key:s,external:!0})}get(s,t){const i=this.cache.get(s);return(0,y.isUndefinedOrNull)(i)?t:i}getBoolean(s,t){const i=this.get(s);return(0,y.isUndefinedOrNull)(i)?t:i==="true"}getNumber(s,t){const i=this.get(s);return(0,y.isUndefinedOrNull)(i)?t:parseInt(i,10)}async set(s,t,i=!1){if(this.state===_.Closed)return;if((0,y.isUndefinedOrNull)(t))return this.delete(s,i);const o=(0,y.isObject)(t)||Array.isArray(t)?(0,L.stringify)(t):String(t);if(this.cache.get(s)!==o)return this.cache.set(s,o),this.pendingInserts.set(s,o),this.pendingDeletes.delete(s),this._onDidChangeStorage.fire({key:s,external:i}),this.doFlush()}async delete(s,t=!1){if(!(this.state===_.Closed||!this.cache.delete(s)))return this.pendingDeletes.has(s)||this.pendingDeletes.add(s),this.pendingInserts.delete(s),this._onDidChangeStorage.fire({key:s,external:t}),this.doFlush()}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const s={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(s).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async doFlush(s){return this.options.hint===f.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),s)}}e.Storage=b;class p{constructor(){this.onDidChangeItemsExternal=k.Event.None,this.items=new Map}async updateItems(s){s.insert?.forEach((t,i)=>this.items.set(i,t)),s.delete?.forEach(t=>this.items.delete(t))}}e.InMemoryStorageDatabase=p}),define(oe[310],re([10]),{}),define(oe[464],re([10]),{}),define(oe[48],re([1,0,5,464]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setARIAContainer=b,e.alert=p,e.status=n;const k=2e4;let E,L,y,f,_;function b(t){E=document.createElement("div"),E.className="monaco-aria-container";const i=()=>{const g=document.createElement("div");return g.className="monaco-alert",g.setAttribute("role","alert"),g.setAttribute("aria-atomic","true"),E.appendChild(g),g};L=i(),y=i();const o=()=>{const g=document.createElement("div");return g.className="monaco-status",g.setAttribute("aria-live","polite"),g.setAttribute("aria-atomic","true"),E.appendChild(g),g};f=o(),_=o(),t.appendChild(E)}function p(t){E&&(L.textContent!==t?(c.clearNode(y),s(L,t)):(c.clearNode(L),s(y,t)))}function n(t){E&&(f.textContent!==t?(c.clearNode(_),s(f,t)):(c.clearNode(f),s(_,t)))}function s(t,i){c.clearNode(t),i.length>k&&(i=i.substr(0,k)),t.textContent=i,t.style.visibility="hidden",t.style.visibility="visible"}}),define(oe[465],re([10]),{}),define(oe[231],re([1,0,5,305,46,193,68,43,111,33,6,55,2,30,81,465]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Button=e.unthemedButtonStyles=void 0,e.unthemedButtonStyles={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:b.Color.white.toString(),buttonForeground:b.Color.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0};class o extends s.Disposable{get onDidClick(){return this._onDidClick.event}constructor(u,l){super(),this._label="",this._onDidClick=this._register(new p.Emitter),this._onDidEscape=this._register(new p.Emitter),this.options=l,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!l.secondary);const a=l.secondary?l.buttonSecondaryBackground:l.buttonBackground,r=l.secondary?l.buttonSecondaryForeground:l.buttonForeground;this._element.style.color=r||"",this._element.style.backgroundColor=a||"",l.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof l.title=="string"&&this.setTitle(l.title),typeof l.ariaLabel=="string"&&this._element.setAttribute("aria-label",l.ariaLabel),u.appendChild(this._element),this._register(y.Gesture.addTarget(this._element)),[c.EventType.CLICK,y.EventType.Tap].forEach(d=>{this._register((0,c.addDisposableListener)(this._element,d,m=>{if(!this.enabled){c.EventHelper.stop(m);return}this._onDidClick.fire(m)}))}),this._register((0,c.addDisposableListener)(this._element,c.EventType.KEY_DOWN,d=>{const m=new E.StandardKeyboardEvent(d);let h=!1;this.enabled&&(m.equals(3)||m.equals(10))?(this._onDidClick.fire(d),h=!0):m.equals(9)&&(this._onDidEscape.fire(d),this._element.blur(),h=!0),h&&c.EventHelper.stop(m,!0)})),this._register((0,c.addDisposableListener)(this._element,c.EventType.MOUSE_OVER,d=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register((0,c.addDisposableListener)(this._element,c.EventType.MOUSE_OUT,d=>{this.updateBackground(!1)})),this.focusTracker=this._register((0,c.trackFocus)(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(u){const l=[];for(let a of(0,_.renderLabelWithIcons)(u))if(typeof a=="string"){if(a=a.trim(),a==="")continue;const r=document.createElement("span");r.textContent=a,l.push(r)}else l.push(a);return l}updateBackground(u){let l;this.options.secondary?l=u?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:l=u?this.options.buttonHoverBackground:this.options.buttonBackground,l&&(this._element.style.backgroundColor=l)}get element(){return this._element}set label(u){if(this._label===u||(0,n.isMarkdownString)(this._label)&&(0,n.isMarkdownString)(u)&&(0,n.markdownStringEqual)(this._label,u))return;this._element.classList.add("monaco-text-button");const l=this.options.supportShortLabel?this._labelElement:this._element;if((0,n.isMarkdownString)(u)){const r=(0,L.renderMarkdown)(u,{inline:!0});r.dispose();const d=r.element.querySelector("p")?.innerHTML;if(d){const m=(0,k.sanitize)(d,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});l.innerHTML=m}else(0,c.reset)(l)}else this.options.supportIcons?(0,c.reset)(l,...this.getContentElements(u)):l.textContent=u;let a="";typeof this.options.title=="string"?a=this.options.title:this.options.title&&(a=(0,L.renderStringAsPlaintext)(u)),this.setTitle(a),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",a),this._label=u}get label(){return this._label}set icon(u){this._element.classList.add(...t.ThemeIcon.asClassNameArray(u))}set enabled(u){u?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}setTitle(u){!this._hover&&u!==""?this._hover=this._register((0,i.getBaseLayerHoverDelegate)().setupManagedHover(this.options.hoverDelegate??(0,f.getDefaultHoverDelegate)("mouse"),this._element,u)):this._hover&&this._hover.update(u)}}e.Button=o}),define(oe[466],re([10]),{}),define(oe[467],re([10]),{}),define(oe[196],re([1,0,466,467]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),define(oe[468],re([10]),{}),define(oe[311],re([1,0,223,5,2,16,188,468]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextView=e.LayoutAnchorMode=void 0,e.isAnchor=f,e.layout=b;function f(s){const t=s;return!!t&&typeof t.x=="number"&&typeof t.y=="number"}var _;(function(s){s[s.AVOID=0]="AVOID",s[s.ALIGN=1]="ALIGN"})(_||(e.LayoutAnchorMode=_={}));function b(s,t,i){const o=i.mode===_.ALIGN?i.offset:i.offset+i.size,g=i.mode===_.ALIGN?i.offset+i.size:i.offset;return i.position===0?t<=s-o?o:t<=g?g-t:Math.max(s-t,0):t<=g?g-t:t<=s-o?o:0}class p extends E.Disposable{static{this.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"]}static{this.BUBBLE_DOWN_EVENTS=["click"]}constructor(t,i){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=E.Disposable.None,this.toDisposeOnSetContainer=E.Disposable.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=k.$(".context-view"),k.hide(this.view),this.setContainer(t,i),this._register((0,E.toDisposable)(()=>this.setContainer(null,1)))}setContainer(t,i){this.useFixedPosition=i!==1;const o=this.useShadowDOM;if(this.useShadowDOM=i===3,!(t===this.container&&o===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),t)){if(this.container=t,this.useShadowDOM){this.shadowRootHostElement=k.$(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const u=document.createElement("style");u.textContent=n,this.shadowRoot.appendChild(u),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(k.$("slot"))}else this.container.appendChild(this.view);const g=new E.DisposableStore;p.BUBBLE_UP_EVENTS.forEach(u=>{g.add(k.addStandardDisposableListener(this.container,u,l=>{this.onDOMEvent(l,!1)}))}),p.BUBBLE_DOWN_EVENTS.forEach(u=>{g.add(k.addStandardDisposableListener(this.container,u,l=>{this.onDOMEvent(l,!0)},!0))}),this.toDisposeOnSetContainer=g}}show(t){this.isVisible()&&this.hide(),k.clearNode(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(t.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",k.show(this.view),this.toDisposeOnClean=t.render(this.view)||E.Disposable.None,this.delegate=t,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(L.isIOS&&c.BrowserFeatures.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const t=this.delegate.getAnchor();let i;if(k.isHTMLElement(t)){const v=k.getDomNodePagePosition(t),C=k.getDomNodeZoomLevel(t);i={top:v.top*C,left:v.left*C,width:v.width*C,height:v.height*C}}else f(t)?i={top:t.y,left:t.x,width:t.width||1,height:t.height||2}:i={top:t.posy,left:t.posx,width:2,height:2};const o=k.getTotalWidth(this.view),g=k.getTotalHeight(this.view),u=this.delegate.anchorPosition||0,l=this.delegate.anchorAlignment||0,a=this.delegate.anchorAxisAlignment||0;let r,d;const m=k.getActiveWindow();if(a===0){const v={offset:i.top-m.pageYOffset,size:i.height,position:u===0?0:1},C={offset:i.left,size:i.width,position:l===0?0:1,mode:_.ALIGN};r=b(m.innerHeight,g,v)+m.pageYOffset,y.Range.intersects({start:r,end:r+g},{start:v.offset,end:v.offset+v.size})&&(C.mode=_.AVOID),d=b(m.innerWidth,o,C)}else{const v={offset:i.left,size:i.width,position:l===0?0:1},C={offset:i.top,size:i.height,position:u===0?0:1,mode:_.ALIGN};d=b(m.innerWidth,o,v),y.Range.intersects({start:d,end:d+o},{start:v.offset,end:v.offset+v.size})&&(C.mode=_.AVOID),r=b(m.innerHeight,g,C)+m.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(u===0?"bottom":"top"),this.view.classList.add(l===0?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const h=k.getDomNodePagePosition(this.container);this.view.style.top=`${r-(this.useFixedPosition?k.getDomNodePagePosition(this.view).top:h.top)}px`,this.view.style.left=`${d-(this.useFixedPosition?k.getDomNodePagePosition(this.view).left:h.left)}px`,this.view.style.width="initial"}hide(t){const i=this.delegate;this.delegate=null,i?.onHide&&i.onHide(t),this.toDisposeOnClean.dispose(),k.hide(this.view)}isVisible(){return!!this.delegate}onDOMEvent(t,i){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(t,k.getWindow(t).document.activeElement):i&&!k.isAncestor(t.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}e.ContextView=p;const n=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Nanum Gothic", "Apple SD Gothic Neo", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`}),define(oe[469],re([10]),{}),define(oe[312],re([1,0,5,11,469]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CountBadge=void 0;class E{constructor(y,f,_){this.options=f,this.styles=_,this.count=0,this.element=(0,c.append)(y,(0,c.$)(".monaco-count-badge")),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0)}setCount(y){this.count=y,this.render()}setTitleFormat(y){this.titleFormat=y,this.render()}render(){this.element.textContent=(0,k.format)(this.countFormat,this.count),this.element.title=(0,k.format)(this.titleFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}e.CountBadge=E}),define(oe[313],re([10]),{}),define(oe[314],re([10]),{}),define(oe[470],re([10]),{}),define(oe[471],re([10]),{}),define(oe[232],re([1,0,5,307,2,54,188,43,81,19,141,471]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IconLabel=void 0;class n{constructor(u){this._element=u}get element(){return this._element}set textContent(u){this.disposed||u===this._textContent||(this._textContent=u,this._element.textContent=u)}set className(u){this.disposed||u===this._className||(this._className=u,this._element.className=u)}set empty(u){this.disposed||u===this._empty||(this._empty=u,this._element.style.marginLeft=u?"0":"")}dispose(){this.disposed=!0}}class s extends E.Disposable{constructor(u,l){super(),this.customHovers=new Map,this.creationOptions=l,this.domNode=this._register(new n(c.append(u,c.$(".monaco-icon-label")))),this.labelContainer=c.append(this.domNode.element,c.$(".monaco-icon-label-container")),this.nameContainer=c.append(this.labelContainer,c.$("span.monaco-icon-name-container")),l?.supportHighlights||l?.supportIcons?this.nameNode=this._register(new o(this.nameContainer,!!l.supportIcons)):this.nameNode=new t(this.nameContainer),this.hoverDelegate=l?.hoverDelegate??(0,f.getDefaultHoverDelegate)("mouse")}get element(){return this.domNode.element}setLabel(u,l,a){const r=["monaco-icon-label"],d=["monaco-icon-label-container"];let m="";a&&(a.extraClasses&&r.push(...a.extraClasses),a.italic&&r.push("italic"),a.strikethrough&&r.push("strikethrough"),a.disabledCommand&&d.push("disabled"),a.title&&(typeof a.title=="string"?m+=a.title:m+=u));const h=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(a?.iconPath){let v;!h||!c.isHTMLElement(h)?(v=c.$(".monaco-icon-label-iconpath"),this.domNode.element.prepend(v)):v=h,v.style.backgroundImage=c.asCSSUrl(a?.iconPath)}else h&&h.remove();if(this.domNode.className=r.join(" "),this.domNode.element.setAttribute("aria-label",m),this.labelContainer.className=d.join(" "),this.setupHover(a?.descriptionTitle?this.labelContainer:this.element,a?.title),this.nameNode.setLabel(u,a),l||this.descriptionNode){const v=this.getOrCreateDescriptionNode();v instanceof k.HighlightedLabel?(v.set(l||"",a?a.descriptionMatches:void 0,void 0,a?.labelEscapeNewLines),this.setupHover(v.element,a?.descriptionTitle)):(v.textContent=l&&a?.labelEscapeNewLines?k.HighlightedLabel.escapeNewLines(l,[]):l||"",this.setupHover(v.element,a?.descriptionTitle||""),v.empty=!l)}if(a?.suffix||this.suffixNode){const v=this.getOrCreateSuffixNode();v.textContent=a?.suffix??""}}setupHover(u,l){const a=this.customHovers.get(u);if(a&&(a.dispose(),this.customHovers.delete(u)),!l){u.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover)(function(d,m){(0,b.isString)(m)?d.title=(0,p.stripIcons)(m):m?.markdownNotSupportedFallback?d.title=m.markdownNotSupportedFallback:d.removeAttribute("title")})(u,l);else{const r=(0,_.getBaseLayerHoverDelegate)().setupManagedHover(this.hoverDelegate,u,l);r&&this.customHovers.set(u,r)}}dispose(){super.dispose();for(const u of this.customHovers.values())u.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const u=this._register(new n(c.after(this.nameContainer,c.$("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new n(c.append(u.element,c.$("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const u=this._register(new n(c.append(this.labelContainer,c.$("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new k.HighlightedLabel(c.append(u.element,c.$("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new n(c.append(u.element,c.$("span.label-description"))))}return this.descriptionNode}}e.IconLabel=s;class t{constructor(u){this.container=u,this.label=void 0,this.singleLabel=void 0}setLabel(u,l){if(!(this.label===u&&(0,L.equals)(this.options,l)))if(this.label=u,this.options=l,typeof u=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=c.append(this.container,c.$("a.label-name",{id:l?.domId}))),this.singleLabel.textContent=u;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let a=0;a<u.length;a++){const r=u[a],d=l?.domId&&`${l?.domId}_${a}`;c.append(this.container,c.$("a.label-name",{id:d,"data-icon-label-count":u.length,"data-icon-label-index":a,role:"treeitem"},r)),a<u.length-1&&c.append(this.container,c.$("span.label-separator",void 0,l?.separator||"/"))}}}}function i(g,u,l){if(!l)return;let a=0;return g.map(r=>{const d={start:a,end:a+r.length},m=l.map(h=>y.Range.intersect(d,h)).filter(h=>!y.Range.isEmpty(h)).map(({start:h,end:v})=>({start:h-a,end:v-a}));return a=d.end+u.length,m})}class o extends E.Disposable{constructor(u,l){super(),this.container=u,this.supportIcons=l,this.label=void 0,this.singleLabel=void 0}setLabel(u,l){if(!(this.label===u&&(0,L.equals)(this.options,l)))if(this.label=u,this.options=l,typeof u=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new k.HighlightedLabel(c.append(this.container,c.$("a.label-name",{id:l?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(u,l?.matches,void 0,l?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const a=l?.separator||"/",r=i(u,a,l?.matches);for(let d=0;d<u.length;d++){const m=u[d],h=r?r[d]:void 0,v=l?.domId&&`${l?.domId}_${d}`,C=c.$("a.label-name",{id:v,"data-icon-label-count":u.length,"data-icon-label-index":d,role:"treeitem"});this._register(new k.HighlightedLabel(c.append(this.container,C),{supportIcons:this.supportIcons})).set(m,h,void 0,l?.labelEscapeNewLines),d<u.length-1&&c.append(C,c.$("span.label-separator",void 0,a))}}}}}),define(oe[472],re([10]),{}),define(oe[473],re([10]),{}),define(oe[315],re([10]),{}),define(oe[474],re([10]),{}),define(oe[233],re([1,0,474]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME=void 0,e.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME="monaco-mouse-cursor-text"}),define(oe[475],re([10]),{}),define(oe[476],re([1,0,5,14,2,475]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressBar=void 0;const L="done",y="active",f="infinite",_="infinite-long-running",b="discrete";class p extends E.Disposable{static{this.LONG_RUNNING_INFINITE_THRESHOLD=1e4}constructor(s,t){super(),this.progressSignal=this._register(new E.MutableDisposable),this.workedVal=0,this.showDelayedScheduler=this._register(new k.RunOnceScheduler(()=>(0,c.show)(this.element),0)),this.longRunningScheduler=this._register(new k.RunOnceScheduler(()=>this.infiniteLongRunning(),p.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(s,t)}create(s,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),s.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(y,f,_,b),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}stop(){return this.doDone(!1)}doDone(s){return this.element.classList.add(L),this.element.classList.contains(f)?(this.bit.style.opacity="0",s?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",s?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(b,L,_),this.element.classList.add(y,f),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(_)}getContainer(){return this.element}}e.ProgressBar=p}),define(oe[477],re([10]),{}),define(oe[164],re([1,0,5,92,68,14,126,6,2,16,477]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sash=e.OrthogonalEdge=void 0;const p=!1;var n;(function(d){d.North="north",d.South="south",d.East="east",d.West="west"})(n||(e.OrthogonalEdge=n={}));let s=4;const t=new f.Emitter;let i=300;const o=new f.Emitter;class g{constructor(m){this.el=m,this.disposables=new _.DisposableStore}get onPointerMove(){return this.disposables.add(new k.DomEmitter((0,c.getWindow)(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new k.DomEmitter((0,c.getWindow)(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}De([y.memoize],g.prototype,"onPointerMove",null),De([y.memoize],g.prototype,"onPointerUp",null);class u{get onPointerMove(){return this.disposables.add(new k.DomEmitter(this.el,E.EventType.Change)).event}get onPointerUp(){return this.disposables.add(new k.DomEmitter(this.el,E.EventType.End)).event}constructor(m){this.el=m,this.disposables=new _.DisposableStore}dispose(){this.disposables.dispose()}}De([y.memoize],u.prototype,"onPointerMove",null),De([y.memoize],u.prototype,"onPointerUp",null);class l{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(m){this.factory=m}dispose(){}}De([y.memoize],l.prototype,"onPointerMove",null),De([y.memoize],l.prototype,"onPointerUp",null);const a="pointer-events-disabled";class r extends _.Disposable{get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(m){this._state!==m&&(this.el.classList.toggle("disabled",m===0),this.el.classList.toggle("minimum",m===1),this.el.classList.toggle("maximum",m===2),this._state=m,this.onDidEnablementChange.fire(m))}set orthogonalStartSash(m){if(this._orthogonalStartSash!==m){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),m){const h=v=>{this.orthogonalStartDragHandleDisposables.clear(),v!==0&&(this._orthogonalStartDragHandle=(0,c.append)(this.el,(0,c.$)(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add((0,_.toDisposable)(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new k.DomEmitter(this._orthogonalStartDragHandle,"mouseenter")).event(()=>r.onMouseEnter(m),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new k.DomEmitter(this._orthogonalStartDragHandle,"mouseleave")).event(()=>r.onMouseLeave(m),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(m.onDidEnablementChange.event(h,this)),h(m.state)}this._orthogonalStartSash=m}}set orthogonalEndSash(m){if(this._orthogonalEndSash!==m){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),m){const h=v=>{this.orthogonalEndDragHandleDisposables.clear(),v!==0&&(this._orthogonalEndDragHandle=(0,c.append)(this.el,(0,c.$)(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add((0,_.toDisposable)(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new k.DomEmitter(this._orthogonalEndDragHandle,"mouseenter")).event(()=>r.onMouseEnter(m),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new k.DomEmitter(this._orthogonalEndDragHandle,"mouseleave")).event(()=>r.onMouseLeave(m),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(m.onDidEnablementChange.event(h,this)),h(m.state)}this._orthogonalEndSash=m}}constructor(m,h,v){super(),this.hoverDelay=i,this.hoverDelayer=this._register(new L.Delayer(this.hoverDelay)),this._state=3,this.onDidEnablementChange=this._register(new f.Emitter),this._onDidStart=this._register(new f.Emitter),this._onDidChange=this._register(new f.Emitter),this._onDidReset=this._register(new f.Emitter),this._onDidEnd=this._register(new f.Emitter),this.orthogonalStartSashDisposables=this._register(new _.DisposableStore),this.orthogonalStartDragHandleDisposables=this._register(new _.DisposableStore),this.orthogonalEndSashDisposables=this._register(new _.DisposableStore),this.orthogonalEndDragHandleDisposables=this._register(new _.DisposableStore),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=(0,c.append)(m,(0,c.$)(".monaco-sash")),v.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${v.orthogonalEdge}`),b.isMacintosh&&this.el.classList.add("mac");const C=this._register(new k.DomEmitter(this.el,"mousedown")).event;this._register(C(A=>this.onPointerStart(A,new g(m)),this));const w=this._register(new k.DomEmitter(this.el,"dblclick")).event;this._register(w(this.onPointerDoublePress,this));const S=this._register(new k.DomEmitter(this.el,"mouseenter")).event;this._register(S(()=>r.onMouseEnter(this)));const D=this._register(new k.DomEmitter(this.el,"mouseleave")).event;this._register(D(()=>r.onMouseLeave(this))),this._register(E.Gesture.addTarget(this.el));const I=this._register(new k.DomEmitter(this.el,E.EventType.Start)).event;this._register(I(A=>this.onPointerStart(A,new u(this.el)),this));const T=this._register(new k.DomEmitter(this.el,E.EventType.Tap)).event;let M;this._register(T(A=>{if(M){clearTimeout(M),M=void 0,this.onPointerDoublePress(A);return}clearTimeout(M),M=setTimeout(()=>M=void 0,250)},this)),typeof v.size=="number"?(this.size=v.size,v.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=s,this._register(t.event(A=>{this.size=A,this.layout()}))),this._register(o.event(A=>this.hoverDelay=A)),this.layoutProvider=h,this.orthogonalStartSash=v.orthogonalStartSash,this.orthogonalEndSash=v.orthogonalEndSash,this.orientation=v.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",p),this.layout()}onPointerStart(m,h){c.EventHelper.stop(m);let v=!1;if(!m.__orthogonalSashEvent){const O=this.getOrthogonalSash(m);O&&(v=!0,m.__orthogonalSashEvent=!0,O.onPointerStart(m,new l(h)))}if(this.linkedSash&&!m.__linkedSashEvent&&(m.__linkedSashEvent=!0,this.linkedSash.onPointerStart(m,new l(h))),!this.state)return;const C=this.el.ownerDocument.getElementsByTagName("iframe");for(const O of C)O.classList.add(a);const w=m.pageX,S=m.pageY,D=m.altKey,I={startX:w,currentX:w,startY:S,currentY:S,altKey:D};this.el.classList.add("active"),this._onDidStart.fire(I);const T=(0,c.createStyleSheet)(this.el),M=()=>{let O="";v?O="all-scroll":this.orientation===1?this.state===1?O="s-resize":this.state===2?O="n-resize":O=b.isMacintosh?"row-resize":"ns-resize":this.state===1?O="e-resize":this.state===2?O="w-resize":O=b.isMacintosh?"col-resize":"ew-resize",T.textContent=`* { cursor: ${O} !important; }`},A=new _.DisposableStore;M(),v||this.onDidEnablementChange.event(M,null,A);const R=O=>{c.EventHelper.stop(O,!1);const x={startX:w,currentX:O.pageX,startY:S,currentY:O.pageY,altKey:D};this._onDidChange.fire(x)},N=O=>{c.EventHelper.stop(O,!1),T.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),A.dispose();for(const x of C)x.classList.remove(a)};h.onPointerMove(R,null,A),h.onPointerUp(N,null,A),A.add(h)}onPointerDoublePress(m){const h=this.getOrthogonalSash(m);h&&h._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(m,h=!1){m.el.classList.contains("active")?(m.hoverDelayer.cancel(),m.el.classList.add("hover")):m.hoverDelayer.trigger(()=>m.el.classList.add("hover"),m.hoverDelay).then(void 0,()=>{}),!h&&m.linkedSash&&r.onMouseEnter(m.linkedSash,!0)}static onMouseLeave(m,h=!1){m.hoverDelayer.cancel(),m.el.classList.remove("hover"),!h&&m.linkedSash&&r.onMouseLeave(m.linkedSash,!0)}clearSashHoverState(){r.onMouseLeave(this)}layout(){if(this.orientation===0){const m=this.layoutProvider;this.el.style.left=m.getVerticalSashLeft(this)-this.size/2+"px",m.getVerticalSashTop&&(this.el.style.top=m.getVerticalSashTop(this)+"px"),m.getVerticalSashHeight&&(this.el.style.height=m.getVerticalSashHeight(this)+"px")}else{const m=this.layoutProvider;this.el.style.top=m.getHorizontalSashTop(this)-this.size/2+"px",m.getHorizontalSashLeft&&(this.el.style.left=m.getHorizontalSashLeft(this)+"px"),m.getHorizontalSashWidth&&(this.el.style.width=m.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(m){const h=m.initialTarget??m.target;if(!(!h||!(0,c.isHTMLElement)(h))&&h.classList.contains("orthogonal-drag-handle"))return h.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}e.Sash=r}),define(oe[234],re([1,0,5,164,6,2]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizableHTMLElement=void 0;class y{constructor(){this._onDidWillResize=new E.Emitter,this.onDidWillResize=this._onDidWillResize.event,this._onDidResize=new E.Emitter,this.onDidResize=this._onDidResize.event,this._sashListener=new L.DisposableStore,this._size=new c.Dimension(0,0),this._minSize=new c.Dimension(0,0),this._maxSize=new c.Dimension(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),this.domNode=document.createElement("div"),this._eastSash=new k.Sash(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new k.Sash(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new k.Sash(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:k.OrthogonalEdge.North}),this._southSash=new k.Sash(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:k.OrthogonalEdge.South}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let _,b=0,p=0;this._sashListener.add(E.Event.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{_===void 0&&(this._onDidWillResize.fire(),_=this._size,b=0,p=0)})),this._sashListener.add(E.Event.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{_!==void 0&&(_=void 0,b=0,p=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(n=>{_&&(p=n.currentX-n.startX,this.layout(_.height+b,_.width+p),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(n=>{_&&(p=-(n.currentX-n.startX),this.layout(_.height+b,_.width+p),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(n=>{_&&(b=-(n.currentY-n.startY),this.layout(_.height+b,_.width+p),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(n=>{_&&(b=n.currentY-n.startY,this.layout(_.height+b,_.width+p),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(E.Event.any(this._eastSash.onDidReset,this._westSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(E.Event.any(this._northSash.onDidReset,this._southSash.onDidReset)(n=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(_,b,p,n){this._northSash.state=_?3:0,this._eastSash.state=b?3:0,this._southSash.state=p?3:0,this._westSash.state=n?3:0}layout(_=this.size.height,b=this.size.width){const{height:p,width:n}=this._minSize,{height:s,width:t}=this._maxSize;_=Math.max(p,Math.min(s,_)),b=Math.max(n,Math.min(t,b));const i=new c.Dimension(b,_);c.Dimension.equals(i,this._size)||(this.domNode.style.height=_+"px",this.domNode.style.width=b+"px",this._size=i,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(_){this._maxSize=_}get maxSize(){return this._maxSize}set minSize(_){this._minSize=_}get minSize(){return this._minSize}set preferredSize(_){this._preferredSize=_}get preferredSize(){return this._preferredSize}}e.ResizableHTMLElement=y}),define(oe[478],re([10]),{}),define(oe[84],re([1,0,64,5,39,74,460,461,83,14,6,2,16,162,478]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomScrollableElement=e.SmoothScrollableElement=e.ScrollableElement=e.AbstractScrollableElement=e.MouseWheelClassifier=void 0;const i=500,o=50,g=!0;class u{constructor(C,w,S){this.timestamp=C,this.deltaX=w,this.deltaY=S,this.score=0}}class l{static{this.INSTANCE=new l}constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let C=1,w=0,S=1,D=this._rear;do{const I=D===this._front?C:Math.pow(2,-S);if(C-=I,w+=this._memory[D].score*I,D===this._front)break;D=(this._capacity+D-1)%this._capacity,S++}while(!0);return w<=.5}acceptStandardWheelEvent(C){if(c.isChrome){const w=k.getWindow(C.browserEvent),S=(0,c.getZoomFactor)(w);this.accept(Date.now(),C.deltaX*S,C.deltaY*S)}else this.accept(Date.now(),C.deltaX,C.deltaY)}accept(C,w,S){let D=null;const I=new u(C,w,S);this._front===-1&&this._rear===-1?(this._memory[0]=I,this._front=0,this._rear=0):(D=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=I),I.score=this._computeScore(I,D)}_computeScore(C,w){if(Math.abs(C.deltaX)>0&&Math.abs(C.deltaY)>0)return 1;let S=.5;if((!this._isAlmostInt(C.deltaX)||!this._isAlmostInt(C.deltaY))&&(S+=.25),w){const D=Math.abs(C.deltaX),I=Math.abs(C.deltaY),T=Math.abs(w.deltaX),M=Math.abs(w.deltaY),A=Math.max(Math.min(D,T),1),R=Math.max(Math.min(I,M),1),N=Math.max(D,T),O=Math.max(I,M);N%A===0&&O%R===0&&(S-=.5)}return Math.min(Math.max(S,0),1)}_isAlmostInt(C){return Math.abs(Math.round(C)-C)<.01}}e.MouseWheelClassifier=l;class a extends _.Widget{get options(){return this._options}constructor(C,w,S){super(),this._onScroll=this._register(new p.Emitter),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new p.Emitter),C.style.overflow="hidden",this._options=h(w),this._scrollable=S,this._register(this._scrollable.onScroll(I=>{this._onWillScroll.fire(I),this._onDidScroll(I),this._onScroll.fire(I)}));const D={onMouseWheel:I=>this._onMouseWheel(I),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new f.VerticalScrollbar(this._scrollable,this._options,D)),this._horizontalScrollbar=this._register(new y.HorizontalScrollbar(this._scrollable,this._options,D)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(C),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=(0,E.createFastDomNode)(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=(0,E.createFastDomNode)(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=(0,E.createFastDomNode)(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,I=>this._onMouseOver(I)),this.onmouseleave(this._listenOnDomNode,I=>this._onMouseLeave(I)),this._hideTimeout=this._register(new b.TimeoutTimer),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=(0,n.dispose)(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(C){this._verticalScrollbar.delegatePointerDown(C)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(C){this._scrollable.setScrollDimensions(C,!1)}updateClassName(C){this._options.className=C,s.isMacintosh&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(C){typeof C.handleMouseWheel<"u"&&(this._options.handleMouseWheel=C.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof C.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=C.mouseWheelScrollSensitivity),typeof C.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=C.fastScrollSensitivity),typeof C.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=C.scrollPredominantAxis),typeof C.horizontal<"u"&&(this._options.horizontal=C.horizontal),typeof C.vertical<"u"&&(this._options.vertical=C.vertical),typeof C.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=C.horizontalScrollbarSize),typeof C.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=C.verticalScrollbarSize),typeof C.scrollByPage<"u"&&(this._options.scrollByPage=C.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}delegateScrollFromMouseWheelEvent(C){this._onMouseWheel(new L.StandardWheelEvent(C))}_setListeningToMouseWheel(C){if(this._mouseWheelToDispose.length>0!==C&&(this._mouseWheelToDispose=(0,n.dispose)(this._mouseWheelToDispose),C)){const S=D=>{this._onMouseWheel(new L.StandardWheelEvent(D))};this._mouseWheelToDispose.push(k.addDisposableListener(this._listenOnDomNode,k.EventType.MOUSE_WHEEL,S,{passive:!1}))}}_onMouseWheel(C){if(C.browserEvent?.defaultPrevented)return;const w=l.INSTANCE;g&&w.acceptStandardWheelEvent(C);let S=!1;if(C.deltaY||C.deltaX){let I=C.deltaY*this._options.mouseWheelScrollSensitivity,T=C.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&T+I===0?T=I=0:Math.abs(I)>=Math.abs(T)?T=0:I=0),this._options.flipAxes&&([I,T]=[T,I]);const M=!s.isMacintosh&&C.browserEvent&&C.browserEvent.shiftKey;(this._options.scrollYToX||M)&&!T&&(T=I,I=0),C.browserEvent&&C.browserEvent.altKey&&(T=T*this._options.fastScrollSensitivity,I=I*this._options.fastScrollSensitivity);const A=this._scrollable.getFutureScrollPosition();let R={};if(I){const N=o*I,O=A.scrollTop-(N<0?Math.floor(N):Math.ceil(N));this._verticalScrollbar.writeScrollPosition(R,O)}if(T){const N=o*T,O=A.scrollLeft-(N<0?Math.floor(N):Math.ceil(N));this._horizontalScrollbar.writeScrollPosition(R,O)}R=this._scrollable.validateScrollPosition(R),(A.scrollLeft!==R.scrollLeft||A.scrollTop!==R.scrollTop)&&(g&&this._options.mouseWheelSmoothScroll&&w.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(R):this._scrollable.setScrollPositionNow(R),S=!0)}let D=S;!D&&this._options.alwaysConsumeMouseWheel&&(D=!0),!D&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(D=!0),D&&(C.preventDefault(),C.stopPropagation())}_onDidScroll(C){this._shouldRender=this._horizontalScrollbar.onDidScroll(C)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(C)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const C=this._scrollable.getCurrentScrollPosition(),w=C.scrollTop>0,S=C.scrollLeft>0,D=S?" left":"",I=w?" top":"",T=S||w?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${D}`),this._topShadowDomNode.setClassName(`shadow${I}`),this._topLeftShadowDomNode.setClassName(`shadow${T}${I}${D}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(C){this._mouseIsOver=!1,this._hide()}_onMouseOver(C){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),i)}}e.AbstractScrollableElement=a;class r extends a{constructor(C,w){w=w||{},w.mouseWheelSmoothScroll=!1;const S=new t.Scrollable({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:D=>k.scheduleAtNextAnimationFrame(k.getWindow(C),D)});super(C,w,S),this._register(S)}setScrollPosition(C){this._scrollable.setScrollPositionNow(C)}}e.ScrollableElement=r;class d extends a{constructor(C,w,S){super(C,w,S)}setScrollPosition(C){C.reuseAnimation?this._scrollable.setScrollPositionSmooth(C,C.reuseAnimation):this._scrollable.setScrollPositionNow(C)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}e.SmoothScrollableElement=d;class m extends a{constructor(C,w){w=w||{},w.mouseWheelSmoothScroll=!1;const S=new t.Scrollable({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:D=>k.scheduleAtNextAnimationFrame(k.getWindow(C),D)});super(C,w,S),this._register(S),this._element=C,this._register(this.onScroll(D=>{D.scrollTopChanged&&(this._element.scrollTop=D.scrollTop),D.scrollLeftChanged&&(this._element.scrollLeft=D.scrollLeft)})),this.scanDomNode()}setScrollPosition(C){this._scrollable.setScrollPositionNow(C)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}e.DomScrollableElement=m;function h(v){const C={lazyRender:typeof v.lazyRender<"u"?v.lazyRender:!1,className:typeof v.className<"u"?v.className:"",useShadows:typeof v.useShadows<"u"?v.useShadows:!0,handleMouseWheel:typeof v.handleMouseWheel<"u"?v.handleMouseWheel:!0,flipAxes:typeof v.flipAxes<"u"?v.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof v.consumeMouseWheelIfScrollbarIsNeeded<"u"?v.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof v.alwaysConsumeMouseWheel<"u"?v.alwaysConsumeMouseWheel:!1,scrollYToX:typeof v.scrollYToX<"u"?v.scrollYToX:!1,mouseWheelScrollSensitivity:typeof v.mouseWheelScrollSensitivity<"u"?v.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof v.fastScrollSensitivity<"u"?v.fastScrollSensitivity:5,scrollPredominantAxis:typeof v.scrollPredominantAxis<"u"?v.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof v.mouseWheelSmoothScroll<"u"?v.mouseWheelSmoothScroll:!0,arrowSize:typeof v.arrowSize<"u"?v.arrowSize:11,listenOnDomNode:typeof v.listenOnDomNode<"u"?v.listenOnDomNode:null,horizontal:typeof v.horizontal<"u"?v.horizontal:1,horizontalScrollbarSize:typeof v.horizontalScrollbarSize<"u"?v.horizontalScrollbarSize:10,horizontalSliderSize:typeof v.horizontalSliderSize<"u"?v.horizontalSliderSize:0,horizontalHasArrows:typeof v.horizontalHasArrows<"u"?v.horizontalHasArrows:!1,vertical:typeof v.vertical<"u"?v.vertical:1,verticalScrollbarSize:typeof v.verticalScrollbarSize<"u"?v.verticalScrollbarSize:10,verticalHasArrows:typeof v.verticalHasArrows<"u"?v.verticalHasArrows:!1,verticalSliderSize:typeof v.verticalSliderSize<"u"?v.verticalSliderSize:0,scrollByPage:typeof v.scrollByPage<"u"?v.scrollByPage:!1};return C.horizontalSliderSize=typeof v.horizontalSliderSize<"u"?v.horizontalSliderSize:C.horizontalScrollbarSize,C.verticalSliderSize=typeof v.verticalSliderSize<"u"?v.verticalSliderSize:C.verticalScrollbarSize,s.isMacintosh&&(C.className+=" mac"),C}}),define(oe[235],re([1,0,222,5,92,68,84,13,14,126,6,2,188,162,449,458,8,140]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListView=e.NativeDragAndDropData=e.ExternalElementsDragAndDropData=e.ElementsDragAndDropData=void 0;const l={CurrentDragAndDropData:void 0},a={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(w){return[w]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class r{constructor(S){this.elements=S}update(){}getData(){return this.elements}}e.ElementsDragAndDropData=r;class d{constructor(S){this.elements=S}update(){}getData(){return this.elements}}e.ExternalElementsDragAndDropData=d;class m{constructor(){this.types=[],this.files=[]}update(S){if(S.types&&this.types.splice(0,this.types.length,...S.types),S.files){this.files.splice(0,this.files.length);for(let D=0;D<S.files.length;D++){const I=S.files.item(D);I&&(I.size||I.type)&&this.files.push(I)}}}getData(){return{types:this.types,files:this.files}}}e.NativeDragAndDropData=m;function h(w,S){return Array.isArray(w)&&Array.isArray(S)?(0,f.equals)(w,S):w===S}class v{constructor(S){S?.getSetSize?this.getSetSize=S.getSetSize.bind(S):this.getSetSize=(D,I,T)=>T,S?.getPosInSet?this.getPosInSet=S.getPosInSet.bind(S):this.getPosInSet=(D,I)=>I+1,S?.getRole?this.getRole=S.getRole.bind(S):this.getRole=D=>"listitem",S?.isChecked?this.isChecked=S.isChecked.bind(S):this.isChecked=D=>{}}}class C{static{this.InstanceCount=0}get contentHeight(){return this.rangeMap.size}get onDidScroll(){return this.scrollableElement.onScroll}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(S){if(S!==this._horizontalScrolling){if(S&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=S,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const D of this.items)this.measureItemWidth(D);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,k.getContentWidth)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(S,D,I,T=a){if(this.virtualDelegate=D,this.domId=`list_id_${++C.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new _.Delayer(50),this.splicing=!1,this.dragOverAnimationStopDisposable=n.Disposable.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=n.Disposable.None,this.onDragLeaveTimeout=n.Disposable.None,this.disposables=new n.DisposableStore,this._onDidChangeContentHeight=new p.Emitter,this._onDidChangeContentWidth=new p.Emitter,this.onDidChangeContentHeight=p.Event.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this._horizontalScrolling=!1,T.horizontalScrolling&&T.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(T.paddingTop??0);for(const A of I)this.renderers.set(A.templateId,A);this.cache=this.disposables.add(new o.RowCache(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof T.mouseSupport=="boolean"?T.mouseSupport:!0),this._horizontalScrolling=T.horizontalScrolling??a.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof T.paddingBottom>"u"?0:T.paddingBottom,this.accessibilityProvider=new v(T.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(T.transformOptimization??a.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(L.Gesture.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new t.Scrollable({forceIntegerValues:!0,smoothScrollDuration:T.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:A=>(0,k.scheduleAtNextAnimationFrame)((0,k.getWindow)(this.domNode),A)})),this.scrollableElement=this.disposables.add(new y.SmoothScrollableElement(this.rowsContainer,{alwaysConsumeMouseWheel:T.alwaysConsumeMouseWheel??a.alwaysConsumeMouseWheel,horizontal:1,vertical:T.verticalScrollMode??a.verticalScrollMode,useShadows:T.useShadows??a.useShadows,mouseWheelScrollSensitivity:T.mouseWheelScrollSensitivity,fastScrollSensitivity:T.fastScrollSensitivity,scrollByPage:T.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),S.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,k.addDisposableListener)(this.rowsContainer,L.EventType.Change,A=>this.onTouchChange(A))),this.disposables.add((0,k.addDisposableListener)(this.scrollableElement.getDomNode(),"scroll",A=>A.target.scrollTop=0)),this.disposables.add((0,k.addDisposableListener)(this.domNode,"dragover",A=>this.onDragOver(this.toDragEvent(A)))),this.disposables.add((0,k.addDisposableListener)(this.domNode,"drop",A=>this.onDrop(this.toDragEvent(A)))),this.disposables.add((0,k.addDisposableListener)(this.domNode,"dragleave",A=>this.onDragLeave(this.toDragEvent(A)))),this.disposables.add((0,k.addDisposableListener)(this.domNode,"dragend",A=>this.onDragEnd(A))),this.setRowLineHeight=T.setRowLineHeight??a.setRowLineHeight,this.setRowHeight=T.setRowHeight??a.setRowHeight,this.supportDynamicHeights=T.supportDynamicHeights??a.supportDynamicHeights,this.dnd=T.dnd??this.disposables.add(a.dnd),this.layout(T.initialSize?.height,T.initialSize?.width)}updateOptions(S){S.paddingBottom!==void 0&&(this.paddingBottom=S.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),S.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(S.smoothScrolling?125:0),S.horizontalScrolling!==void 0&&(this.horizontalScrolling=S.horizontalScrolling);let D;if(S.scrollByPage!==void 0&&(D={...D??{},scrollByPage:S.scrollByPage}),S.mouseWheelScrollSensitivity!==void 0&&(D={...D??{},mouseWheelScrollSensitivity:S.mouseWheelScrollSensitivity}),S.fastScrollSensitivity!==void 0&&(D={...D??{},fastScrollSensitivity:S.fastScrollSensitivity}),D&&this.scrollableElement.updateOptions(D),S.paddingTop!==void 0&&S.paddingTop!==this.rangeMap.paddingTop){const I=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),T=S.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=S.paddingTop,this.render(I,Math.max(0,this.lastRenderTop+T),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}createRangeMap(S){return new i.RangeMap(S)}splice(S,D,I=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(S,D,I)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(S,D,I=[]){const T=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),M={start:S,end:S+D},A=s.Range.intersect(T,M),R=new Map;for(let G=A.end-1;G>=A.start;G--){const P=this.items[G];if(P.dragStartDisposable.dispose(),P.checkedDisposable.dispose(),P.row){let te=R.get(P.templateId);te||(te=[],R.set(P.templateId,te));const se=this.renderers.get(P.templateId);se&&se.disposeElement&&se.disposeElement(P.element,G,P.row.templateData,P.size),te.unshift(P.row)}P.row=null,P.stale=!0}const N={start:S+D,end:this.items.length},O=s.Range.intersect(N,T),x=s.Range.relativeComplement(N,T),F=I.map(G=>({id:String(this.itemId++),element:G,templateId:this.virtualDelegate.getTemplateId(G),size:this.virtualDelegate.getHeight(G),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(G),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:n.Disposable.None,checkedDisposable:n.Disposable.None,stale:!1}));let W;S===0&&D>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,F),W=this.items,this.items=F):(this.rangeMap.splice(S,D,F),W=this.items.splice(S,D,...F));const z=I.length-D,q=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),H=(0,i.shift)(O,z),K=s.Range.intersect(q,H);for(let G=K.start;G<K.end;G++)this.updateItemInDOM(this.items[G],G);const U=s.Range.relativeComplement(H,q);for(const G of U)for(let P=G.start;P<G.end;P++)this.removeItemFromDOM(P);const Y=x.map(G=>(0,i.shift)(G,z)),X=[{start:S,end:S+I.length},...Y].map(G=>s.Range.intersect(q,G)).reverse();for(const G of X)for(let P=G.end-1;P>=G.start;P--){const te=this.items[P],ue=R.get(te.templateId)?.pop();this.insertItemInDOM(P,ue)}for(const G of R.values())for(const P of G)this.cache.release(P);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),W.map(G=>G.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,k.scheduleAtNextAnimationFrame)((0,k.getWindow)(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let S=0;for(const D of this.items)typeof D.width<"u"&&(S=Math.max(S,D.width));this.scrollWidth=S,this.scrollableElement.setScrollDimensions({scrollWidth:S===0?0:S+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}rerender(){if(this.supportDynamicHeights){for(const S of this.items)S.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}element(S){return this.items[S].element}indexOf(S){return this.items.findIndex(D=>D.element===S)}domElement(S){const D=this.items[S].row;return D&&D.domNode}elementHeight(S){return this.items[S].size}elementTop(S){return this.rangeMap.positionAt(S)}indexAt(S){return this.rangeMap.indexAt(S)}indexAfter(S){return this.rangeMap.indexAfter(S)}layout(S,D){const I={height:typeof S=="number"?S:(0,k.getContentHeight)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,I.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(I),typeof D<"u"&&(this.renderWidth=D,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof D=="number"?D:(0,k.getContentWidth)(this.domNode)})}render(S,D,I,T,M,A=!1){const R=this.getRenderRange(D,I),N=s.Range.relativeComplement(R,S).reverse(),O=s.Range.relativeComplement(S,R);if(A){const x=s.Range.intersect(S,R);for(let F=x.start;F<x.end;F++)this.updateItemInDOM(this.items[F],F)}this.cache.transact(()=>{for(const x of O)for(let F=x.start;F<x.end;F++)this.removeItemFromDOM(F);for(const x of N)for(let F=x.end-1;F>=x.start;F--)this.insertItemInDOM(F)}),T!==void 0&&(this.rowsContainer.style.left=`-${T}px`),this.rowsContainer.style.top=`-${D}px`,this.horizontalScrolling&&M!==void 0&&(this.rowsContainer.style.width=`${Math.max(M,this.renderWidth)}px`),this.lastRenderTop=D,this.lastRenderHeight=I}insertItemInDOM(S,D){const I=this.items[S];if(!I.row)if(D)I.row=D,I.stale=!0;else{const N=this.cache.alloc(I.templateId);I.row=N.row,I.stale||=N.isReusingConnectedDomNode}const T=this.accessibilityProvider.getRole(I.element)||"listitem";I.row.domNode.setAttribute("role",T);const M=this.accessibilityProvider.isChecked(I.element);if(typeof M=="boolean")I.row.domNode.setAttribute("aria-checked",String(!!M));else if(M){const N=O=>I.row.domNode.setAttribute("aria-checked",String(!!O));N(M.value),I.checkedDisposable=M.onDidChange(()=>N(M.value))}if(I.stale||!I.row.domNode.parentElement){const N=this.items.at(S+1)?.row?.domNode??null;(I.row.domNode.parentElement!==this.rowsContainer||I.row.domNode.nextElementSibling!==N)&&this.rowsContainer.insertBefore(I.row.domNode,N),I.stale=!1}this.updateItemInDOM(I,S);const A=this.renderers.get(I.templateId);if(!A)throw new Error(`No renderer found for template id ${I.templateId}`);A?.renderElement(I.element,S,I.row.templateData,I.size);const R=this.dnd.getDragURI(I.element);I.dragStartDisposable.dispose(),I.row.domNode.draggable=!!R,R&&(I.dragStartDisposable=(0,k.addDisposableListener)(I.row.domNode,"dragstart",N=>this.onDragStart(I.element,R,N))),this.horizontalScrolling&&(this.measureItemWidth(I),this.eventuallyUpdateScrollWidth())}measureItemWidth(S){if(!S.row||!S.row.domNode)return;S.row.domNode.style.width="fit-content",S.width=(0,k.getContentWidth)(S.row.domNode);const D=(0,k.getWindow)(S.row.domNode).getComputedStyle(S.row.domNode);D.paddingLeft&&(S.width+=parseFloat(D.paddingLeft)),D.paddingRight&&(S.width+=parseFloat(D.paddingRight)),S.row.domNode.style.width=""}updateItemInDOM(S,D){S.row.domNode.style.top=`${this.elementTop(D)}px`,this.setRowHeight&&(S.row.domNode.style.height=`${S.size}px`),this.setRowLineHeight&&(S.row.domNode.style.lineHeight=`${S.size}px`),S.row.domNode.setAttribute("data-index",`${D}`),S.row.domNode.setAttribute("data-last-element",D===this.length-1?"true":"false"),S.row.domNode.setAttribute("data-parity",D%2===0?"even":"odd"),S.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(S.element,D,this.length))),S.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(S.element,D))),S.row.domNode.setAttribute("id",this.getElementDomId(D)),S.row.domNode.classList.toggle("drop-target",S.dropTarget)}removeItemFromDOM(S){const D=this.items[S];if(D.dragStartDisposable.dispose(),D.checkedDisposable.dispose(),D.row){const I=this.renderers.get(D.templateId);I&&I.disposeElement&&I.disposeElement(D.element,S,D.row.templateData,D.size),this.cache.release(D.row),D.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(S,D){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:S,reuseAnimation:D})}get scrollTop(){return this.getScrollTop()}set scrollTop(S){this.setScrollTop(S)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"click")).event,S=>this.toMouseEvent(S),this.disposables)}get onMouseDblClick(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"dblclick")).event,S=>this.toMouseEvent(S),this.disposables)}get onMouseMiddleClick(){return p.Event.filter(p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"auxclick")).event,S=>this.toMouseEvent(S),this.disposables),S=>S.browserEvent.button===1,this.disposables)}get onMouseDown(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"mousedown")).event,S=>this.toMouseEvent(S),this.disposables)}get onMouseOver(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"mouseover")).event,S=>this.toMouseEvent(S),this.disposables)}get onMouseOut(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"mouseout")).event,S=>this.toMouseEvent(S),this.disposables)}get onContextMenu(){return p.Event.any(p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"contextmenu")).event,S=>this.toMouseEvent(S),this.disposables),p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,L.EventType.Contextmenu)).event,S=>this.toGestureEvent(S),this.disposables))}get onTouchStart(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.domNode,"touchstart")).event,S=>this.toTouchEvent(S),this.disposables)}get onTap(){return p.Event.map(this.disposables.add(new E.DomEmitter(this.rowsContainer,L.EventType.Tap)).event,S=>this.toGestureEvent(S),this.disposables)}toMouseEvent(S){const D=this.getItemIndexFromEventTarget(S.target||null),I=typeof D>"u"?void 0:this.items[D],T=I&&I.element;return{browserEvent:S,index:D,element:T}}toTouchEvent(S){const D=this.getItemIndexFromEventTarget(S.target||null),I=typeof D>"u"?void 0:this.items[D],T=I&&I.element;return{browserEvent:S,index:D,element:T}}toGestureEvent(S){const D=this.getItemIndexFromEventTarget(S.initialTarget||null),I=typeof D>"u"?void 0:this.items[D],T=I&&I.element;return{browserEvent:S,index:D,element:T}}toDragEvent(S){const D=this.getItemIndexFromEventTarget(S.target||null),I=typeof D>"u"?void 0:this.items[D],T=I&&I.element,M=this.getTargetSector(S,D);return{browserEvent:S,index:D,element:T,sector:M}}onScroll(S){try{const D=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(D,S.scrollTop,S.height,S.scrollLeft,S.scrollWidth),this.supportDynamicHeights&&this._rerender(S.scrollTop,S.height,S.inSmoothScrolling)}catch(D){throw console.error("Got bad scroll event:",S),D}}onTouchChange(S){S.preventDefault(),S.stopPropagation(),this.scrollTop-=S.translationY}onDragStart(S,D,I){if(!I.dataTransfer)return;const T=this.dnd.getDragElements(S);if(I.dataTransfer.effectAllowed="copyMove",I.dataTransfer.setData(c.DataTransfers.TEXT,D),I.dataTransfer.setDragImage){let M;this.dnd.getDragLabel&&(M=this.dnd.getDragLabel(T,I)),typeof M>"u"&&(M=String(T.length));const A=(0,k.$)(".monaco-drag-image");A.textContent=M,(O=>{for(;O&&!O.classList.contains("monaco-workbench");)O=O.parentElement;return O||this.domNode.ownerDocument})(this.domNode).appendChild(A),I.dataTransfer.setDragImage(A,-10,-10),setTimeout(()=>A.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new r(T),l.CurrentDragAndDropData=new d(T),this.dnd.onDragStart?.(this.currentDragData,I)}onDragOver(S){if(S.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),l.CurrentDragAndDropData&&l.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(S.browserEvent),!S.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(l.CurrentDragAndDropData)this.currentDragData=l.CurrentDragAndDropData;else{if(!S.browserEvent.dataTransfer.types)return!1;this.currentDragData=new m}const D=this.dnd.onDragOver(this.currentDragData,S.element,S.index,S.sector,S.browserEvent);if(this.canDrop=typeof D=="boolean"?D:D.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;S.browserEvent.dataTransfer.dropEffect=typeof D!="boolean"&&D.effect?.type===0?"copy":"move";let I;typeof D!="boolean"&&D.feedback?I=D.feedback:typeof S.index>"u"?I=[-1]:I=[S.index],I=(0,f.distinct)(I).filter(M=>M>=-1&&M<this.length).sort((M,A)=>M-A),I=I[0]===-1?[-1]:I;let T=typeof D!="boolean"&&D.effect&&D.effect.position?D.effect.position:"drop-target";if(h(this.currentDragFeedback,I)&&this.currentDragFeedbackPosition===T)return!0;if(this.currentDragFeedback=I,this.currentDragFeedbackPosition=T,this.currentDragFeedbackDisposable.dispose(),I[0]===-1)this.domNode.classList.add(T),this.rowsContainer.classList.add(T),this.currentDragFeedbackDisposable=(0,n.toDisposable)(()=>{this.domNode.classList.remove(T),this.rowsContainer.classList.remove(T)});else{if(I.length>1&&T!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");T==="drop-target-after"&&I[0]<this.length-1&&(I[0]+=1,T="drop-target-before");for(const M of I){const A=this.items[M];A.dropTarget=!0,A.row?.domNode.classList.add(T)}this.currentDragFeedbackDisposable=(0,n.toDisposable)(()=>{for(const M of I){const A=this.items[M];A.dropTarget=!1,A.row?.domNode.classList.remove(T)}})}return!0}onDragLeave(S){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,_.disposableTimeout)(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,S.element,S.index,S.browserEvent)}onDrop(S){if(!this.canDrop)return;const D=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,l.CurrentDragAndDropData=void 0,!(!D||!S.browserEvent.dataTransfer)&&(S.browserEvent.preventDefault(),D.update(S.browserEvent.dataTransfer),this.dnd.drop(D,S.element,S.index,S.sector,S.browserEvent))}onDragEnd(S){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,l.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(S)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=n.Disposable.None}setupDragAndDropScrollTopAnimation(S){if(!this.dragOverAnimationDisposable){const D=(0,k.getTopLeftOffset)(this.domNode).top;this.dragOverAnimationDisposable=(0,k.animate)((0,k.getWindow)(this.domNode),this.animateDragAndDropScrollTop.bind(this,D))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,_.disposableTimeout)(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=S.pageY}animateDragAndDropScrollTop(S){if(this.dragOverMouseY===void 0)return;const D=this.dragOverMouseY-S,I=this.renderHeight-35;D<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(D-35))):D>I&&(this.scrollTop+=Math.min(14,Math.floor(.3*(D-I))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(S,D){if(D===void 0)return;const I=S.offsetY/this.items[D].size,T=Math.floor(I/.25);return(0,u.clamp)(T,0,3)}getItemIndexFromEventTarget(S){const D=this.scrollableElement.getDomNode();let I=S;for(;((0,k.isHTMLElement)(I)||(0,k.isSVGElement)(I))&&I!==this.rowsContainer&&D.contains(I);){const T=I.getAttribute("data-index");if(T){const M=Number(T);if(!isNaN(M))return M}I=I.parentElement}}getRenderRange(S,D){return{start:this.rangeMap.indexAt(S),end:this.rangeMap.indexAfter(S+D-1)}}_rerender(S,D,I){const T=this.getRenderRange(S,D);let M,A;S===this.elementTop(T.start)?(M=T.start,A=0):T.end-T.start>1&&(M=T.start+1,A=this.elementTop(M)-S);let R=0;for(;;){const N=this.getRenderRange(S,D);let O=!1;for(let x=N.start;x<N.end;x++){const F=this.probeDynamicHeight(x);F!==0&&this.rangeMap.splice(x,1,[this.items[x]]),R+=F,O=O||F!==0}if(!O){R!==0&&this.eventuallyUpdateScrollDimensions();const x=s.Range.relativeComplement(T,N);for(const W of x)for(let z=W.start;z<W.end;z++)this.items[z].row&&this.removeItemFromDOM(z);const F=s.Range.relativeComplement(N,T).reverse();for(const W of F)for(let z=W.end-1;z>=W.start;z--)this.insertItemInDOM(z);for(let W=N.start;W<N.end;W++)this.items[W].row&&this.updateItemInDOM(this.items[W],W);if(typeof M=="number"){const W=this.scrollable.getFutureScrollPosition().scrollTop-S,z=this.elementTop(M)-A+W;this.setScrollTop(z,I)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(S){const D=this.items[S];if(this.virtualDelegate.getDynamicHeight){const A=this.virtualDelegate.getDynamicHeight(D.element);if(A!==null){const R=D.size;return D.size=A,D.lastDynamicHeightWidth=this.renderWidth,A-R}}if(!D.hasDynamicHeight||D.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(D.element))return 0;const I=D.size;if(D.row)return D.row.domNode.style.height="",D.size=D.row.domNode.offsetHeight,D.size===0&&!(0,k.isAncestor)(D.row.domNode,(0,k.getWindow)(D.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!"),D.lastDynamicHeightWidth=this.renderWidth,D.size-I;const{row:T}=this.cache.alloc(D.templateId);T.domNode.style.height="",this.rowsContainer.appendChild(T.domNode);const M=this.renderers.get(D.templateId);if(!M)throw new g.BugIndicatingError("Missing renderer for templateId: "+D.templateId);return M.renderElement(D.element,S,T.templateData,void 0),D.size=T.domNode.offsetHeight,M.disposeElement?.(D.element,S,T.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(D.element,D.size),D.lastDynamicHeightWidth=this.renderWidth,T.domNode.remove(),this.cache.release(T),D.size-I}getElementDomId(S){return`${this.domId}_${S}`}dispose(){for(const S of this.items)if(S.dragStartDisposable.dispose(),S.checkedDisposable.dispose(),S.row){const D=this.renderers.get(S.row.templateId);D&&(D.disposeElement?.(S.element,-1,S.row.templateData,void 0),D.disposeTemplate(S.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}e.ListView=C,De([b.memoize],C.prototype,"onMouseClick",null),De([b.memoize],C.prototype,"onMouseDblClick",null),De([b.memoize],C.prototype,"onMouseMiddleClick",null),De([b.memoize],C.prototype,"onMouseDown",null),De([b.memoize],C.prototype,"onMouseOver",null),De([b.memoize],C.prototype,"onMouseOut",null),De([b.memoize],C.prototype,"onContextMenu",null),De([b.memoize],C.prototype,"onTouchStart",null),De([b.memoize],C.prototype,"onTap",null)}),define(oe[112],re([1,0,5,92,46,68,48,438,13,14,33,126,6,82,2,140,16,19,437,235,74,21,315]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.List=e.unthemedListStyles=e.DefaultStyleController=e.MouseController=e.DefaultKeyboardNavigationDelegate=e.TypeNavigationMode=void 0,e.isInputElement=w,e.isMonacoEditor=D,e.isMonacoCustomToggle=I,e.isActionItem=T,e.isStickyScrollElement=M,e.isStickyScrollContainer=A,e.isButton=R,e.isSelectionSingleChangeEvent=z,e.isSelectionRangeChangeEvent=q;class m{constructor(ie){this.trait=ie,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(ie){return ie}renderElement(ie,ne,J){const B=this.renderedElements.findIndex(j=>j.templateData===J);if(B>=0){const j=this.renderedElements[B];this.trait.unrender(J),j.index=ne}else{const j={index:ne,templateData:J};this.renderedElements.push(j)}this.trait.renderIndex(ne,J)}splice(ie,ne,J){const B=[];for(const j of this.renderedElements)j.index<ie?B.push(j):j.index>=ie+ne&&B.push({index:j.index+J-ne,templateData:j.templateData});this.renderedElements=B}renderIndexes(ie){for(const{index:ne,templateData:J}of this.renderedElements)ie.indexOf(ne)>-1&&this.trait.renderIndex(ne,J)}disposeTemplate(ie){const ne=this.renderedElements.findIndex(J=>J.templateData===ie);ne<0||this.renderedElements.splice(ne,1)}}class h{get name(){return this._trait}get renderer(){return new m(this)}constructor(ie){this._trait=ie,this.indexes=[],this.sortedIndexes=[],this._onChange=new s.Emitter,this.onChange=this._onChange.event}splice(ie,ne,J){const B=J.length-ne,j=ie+ne,V=[];let $=0;for(;$<this.sortedIndexes.length&&this.sortedIndexes[$]<ie;)V.push(this.sortedIndexes[$++]);for(let Z=0;Z<J.length;Z++)J[Z]&&V.push(Z+ie);for(;$<this.sortedIndexes.length&&this.sortedIndexes[$]>=j;)V.push(this.sortedIndexes[$++]+B);this.renderer.splice(ie,ne,J.length),this._set(V,V)}renderIndex(ie,ne){ne.classList.toggle(this._trait,this.contains(ie))}unrender(ie){ie.classList.remove(this._trait)}set(ie,ne){return this._set(ie,[...ie].sort(te),ne)}_set(ie,ne,J){const B=this.indexes,j=this.sortedIndexes;this.indexes=ie,this.sortedIndexes=ne;const V=G(j,ie);return this.renderer.renderIndexes(V),this._onChange.fire({indexes:ie,browserEvent:J}),B}get(){return this.indexes}contains(ie){return(0,_.binarySearch)(this.sortedIndexes,ie,te)>=0}dispose(){(0,i.dispose)(this._onChange)}}De([n.memoize],h.prototype,"renderer",null);class v extends h{constructor(ie){super("selected"),this.setAriaSelected=ie}renderIndex(ie,ne){super.renderIndex(ie,ne),this.setAriaSelected&&(this.contains(ie)?ne.setAttribute("aria-selected","true"):ne.setAttribute("aria-selected","false"))}}class C{constructor(ie,ne,J){this.trait=ie,this.view=ne,this.identityProvider=J}splice(ie,ne,J){if(!this.identityProvider)return this.trait.splice(ie,ne,new Array(J.length).fill(!1));const B=this.trait.get().map($=>this.identityProvider.getId(this.view.element($)).toString());if(B.length===0)return this.trait.splice(ie,ne,new Array(J.length).fill(!1));const j=new Set(B),V=J.map($=>j.has(this.identityProvider.getId($).toString()));this.trait.splice(ie,ne,V)}}function w(ce){return ce.tagName==="INPUT"||ce.tagName==="TEXTAREA"}function S(ce,ie){return ce.classList.contains(ie)?!0:ce.classList.contains("monaco-list")||!ce.parentElement?!1:S(ce.parentElement,ie)}function D(ce){return S(ce,"monaco-editor")}function I(ce){return S(ce,"monaco-custom-toggle")}function T(ce){return S(ce,"action-item")}function M(ce){return S(ce,"monaco-tree-sticky-row")}function A(ce){return ce.classList.contains("monaco-tree-sticky-container")}function R(ce){return ce.tagName==="A"&&ce.classList.contains("monaco-button")||ce.tagName==="DIV"&&ce.classList.contains("monaco-button-dropdown")?!0:ce.classList.contains("monaco-list")||!ce.parentElement?!1:R(ce.parentElement)}class N{get onKeyDown(){return s.Event.chain(this.disposables.add(new k.DomEmitter(this.view.domNode,"keydown")).event,ie=>ie.filter(ne=>!w(ne.target)).map(ne=>new E.StandardKeyboardEvent(ne)))}constructor(ie,ne,J){this.list=ie,this.view=ne,this.disposables=new i.DisposableStore,this.multipleSelectionDisposables=new i.DisposableStore,this.multipleSelectionSupport=J.multipleSelectionSupport,this.disposables.add(this.onKeyDown(B=>{switch(B.keyCode){case 3:return this.onEnter(B);case 16:return this.onUpArrow(B);case 18:return this.onDownArrow(B);case 11:return this.onPageUpArrow(B);case 12:return this.onPageDownArrow(B);case 9:return this.onEscape(B);case 31:this.multipleSelectionSupport&&(g.isMacintosh?B.metaKey:B.ctrlKey)&&this.onCtrlA(B)}}))}updateOptions(ie){ie.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=ie.multipleSelectionSupport)}onEnter(ie){ie.preventDefault(),ie.stopPropagation(),this.list.setSelection(this.list.getFocus(),ie.browserEvent)}onUpArrow(ie){ie.preventDefault(),ie.stopPropagation(),this.list.focusPrevious(1,!1,ie.browserEvent);const ne=this.list.getFocus()[0];this.list.setAnchor(ne),this.list.reveal(ne),this.view.domNode.focus()}onDownArrow(ie){ie.preventDefault(),ie.stopPropagation(),this.list.focusNext(1,!1,ie.browserEvent);const ne=this.list.getFocus()[0];this.list.setAnchor(ne),this.list.reveal(ne),this.view.domNode.focus()}onPageUpArrow(ie){ie.preventDefault(),ie.stopPropagation(),this.list.focusPreviousPage(ie.browserEvent);const ne=this.list.getFocus()[0];this.list.setAnchor(ne),this.list.reveal(ne),this.view.domNode.focus()}onPageDownArrow(ie){ie.preventDefault(),ie.stopPropagation(),this.list.focusNextPage(ie.browserEvent);const ne=this.list.getFocus()[0];this.list.setAnchor(ne),this.list.reveal(ne),this.view.domNode.focus()}onCtrlA(ie){ie.preventDefault(),ie.stopPropagation(),this.list.setSelection((0,_.range)(this.list.length),ie.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(ie){this.list.getSelection().length&&(ie.preventDefault(),ie.stopPropagation(),this.list.setSelection([],ie.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}De([n.memoize],N.prototype,"onKeyDown",null);var O;(function(ce){ce[ce.Automatic=0]="Automatic",ce[ce.Trigger=1]="Trigger"})(O||(e.TypeNavigationMode=O={}));var x;(function(ce){ce[ce.Idle=0]="Idle",ce[ce.Typing=1]="Typing"})(x||(x={})),e.DefaultKeyboardNavigationDelegate=new class{mightProducePrintableCharacter(ce){return ce.ctrlKey||ce.metaKey||ce.altKey?!1:ce.keyCode>=31&&ce.keyCode<=56||ce.keyCode>=21&&ce.keyCode<=30||ce.keyCode>=98&&ce.keyCode<=107||ce.keyCode>=85&&ce.keyCode<=95}};class F{constructor(ie,ne,J,B,j){this.list=ie,this.view=ne,this.keyboardNavigationLabelProvider=J,this.keyboardNavigationEventFilter=B,this.delegate=j,this.enabled=!1,this.state=x.Idle,this.mode=O.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new i.DisposableStore,this.disposables=new i.DisposableStore,this.updateOptions(ie.options)}updateOptions(ie){ie.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=ie.typeNavigationMode??O.Automatic}enable(){if(this.enabled)return;let ie=!1;const ne=s.Event.chain(this.enabledDisposables.add(new k.DomEmitter(this.view.domNode,"keydown")).event,j=>j.filter(V=>!w(V.target)).filter(()=>this.mode===O.Automatic||this.triggered).map(V=>new E.StandardKeyboardEvent(V)).filter(V=>ie||this.keyboardNavigationEventFilter(V)).filter(V=>this.delegate.mightProducePrintableCharacter(V)).forEach(V=>c.EventHelper.stop(V,!0)).map(V=>V.browserEvent.key)),J=s.Event.debounce(ne,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);s.Event.reduce(s.Event.any(ne,J),(j,V)=>V===null?null:(j||"")+V,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),J(this.onClear,this,this.enabledDisposables),ne(()=>ie=!0,void 0,this.enabledDisposables),J(()=>ie=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const ie=this.list.getFocus();if(ie.length>0&&ie[0]===this.previouslyFocused){const ne=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(ie[0]));typeof ne=="string"?(0,y.alert)(ne):ne&&(0,y.alert)(ne.get())}this.previouslyFocused=-1}onInput(ie){if(!ie){this.state=x.Idle,this.triggered=!1;return}const ne=this.list.getFocus(),J=ne.length>0?ne[0]:0,B=this.state===x.Idle?1:0;this.state=x.Typing;for(let j=0;j<this.list.length;j++){const V=(J+j+B)%this.list.length,$=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(V)),Z=$&&$.toString();if(this.list.options.typeNavigationEnabled){if(typeof Z<"u"){if((0,t.matchesPrefix)(ie,Z)){this.previouslyFocused=J,this.list.setFocus([V]),this.list.reveal(V);return}const ee=(0,t.matchesFuzzy2)(ie,Z);if(ee&&ee[0].end-ee[0].start>1&&ee.length===1){this.previouslyFocused=J,this.list.setFocus([V]),this.list.reveal(V);return}}}else if(typeof Z>"u"||(0,t.matchesPrefix)(ie,Z)){this.previouslyFocused=J,this.list.setFocus([V]),this.list.reveal(V);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class W{constructor(ie,ne){this.list=ie,this.view=ne,this.disposables=new i.DisposableStore;const J=s.Event.chain(this.disposables.add(new k.DomEmitter(ne.domNode,"keydown")).event,j=>j.filter(V=>!w(V.target)).map(V=>new E.StandardKeyboardEvent(V)));s.Event.chain(J,j=>j.filter(V=>V.keyCode===2&&!V.ctrlKey&&!V.metaKey&&!V.shiftKey&&!V.altKey))(this.onTab,this,this.disposables)}onTab(ie){if(ie.target!==this.view.domNode)return;const ne=this.list.getFocus();if(ne.length===0)return;const J=this.view.domElement(ne[0]);if(!J)return;const B=J.querySelector("[tabIndex]");if(!B||!(0,c.isHTMLElement)(B)||B.tabIndex===-1)return;const j=(0,c.getWindow)(B).getComputedStyle(B);j.visibility==="hidden"||j.display==="none"||(ie.preventDefault(),ie.stopPropagation(),B.focus())}dispose(){this.disposables.dispose()}}function z(ce){return g.isMacintosh?ce.browserEvent.metaKey:ce.browserEvent.ctrlKey}function q(ce){return ce.browserEvent.shiftKey}function H(ce){return(0,c.isMouseEvent)(ce)&&ce.button===2}const K={isSelectionSingleChangeEvent:z,isSelectionRangeChangeEvent:q};class U{constructor(ie){this.list=ie,this.disposables=new i.DisposableStore,this._onPointer=new s.Emitter,this.onPointer=this._onPointer.event,ie.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||K),this.mouseSupport=typeof ie.options.mouseSupport>"u"||!!ie.options.mouseSupport,this.mouseSupport&&(ie.onMouseDown(this.onMouseDown,this,this.disposables),ie.onContextMenu(this.onContextMenu,this,this.disposables),ie.onMouseDblClick(this.onDoubleClick,this,this.disposables),ie.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(L.Gesture.addTarget(ie.getHTMLElement()))),s.Event.any(ie.onMouseClick,ie.onMouseMiddleClick,ie.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(ie){ie.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,ie.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||K))}isSelectionSingleChangeEvent(ie){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(ie):!1}isSelectionRangeChangeEvent(ie){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(ie):!1}isSelectionChangeEvent(ie){return this.isSelectionSingleChangeEvent(ie)||this.isSelectionRangeChangeEvent(ie)}onMouseDown(ie){D(ie.browserEvent.target)||(0,c.getActiveElement)()!==ie.browserEvent.target&&this.list.domFocus()}onContextMenu(ie){if(w(ie.browserEvent.target)||D(ie.browserEvent.target))return;const ne=typeof ie.index>"u"?[]:[ie.index];this.list.setFocus(ne,ie.browserEvent)}onViewPointer(ie){if(!this.mouseSupport||w(ie.browserEvent.target)||D(ie.browserEvent.target)||ie.browserEvent.isHandledByList)return;ie.browserEvent.isHandledByList=!0;const ne=ie.index;if(typeof ne>"u"){this.list.setFocus([],ie.browserEvent),this.list.setSelection([],ie.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(ie))return this.changeSelection(ie);this.list.setFocus([ne],ie.browserEvent),this.list.setAnchor(ne),H(ie.browserEvent)||this.list.setSelection([ne],ie.browserEvent),this._onPointer.fire(ie)}onDoubleClick(ie){if(w(ie.browserEvent.target)||D(ie.browserEvent.target)||this.isSelectionChangeEvent(ie)||ie.browserEvent.isHandledByList)return;ie.browserEvent.isHandledByList=!0;const ne=this.list.getFocus();this.list.setSelection(ne,ie.browserEvent)}changeSelection(ie){const ne=ie.index;let J=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(ie)){typeof J>"u"&&(J=this.list.getFocus()[0]??ne,this.list.setAnchor(J));const B=Math.min(J,ne),j=Math.max(J,ne),V=(0,_.range)(B,j+1),$=this.list.getSelection(),Z=X(G($,[J]),J);if(Z.length===0)return;const ee=G(V,P($,Z));this.list.setSelection(ee,ie.browserEvent),this.list.setFocus([ne],ie.browserEvent)}else if(this.isSelectionSingleChangeEvent(ie)){const B=this.list.getSelection(),j=B.filter(V=>V!==ne);this.list.setFocus([ne]),this.list.setAnchor(ne),B.length===j.length?this.list.setSelection([...j,ne],ie.browserEvent):this.list.setSelection(j,ie.browserEvent)}}dispose(){this.disposables.dispose()}}e.MouseController=U;class Y{constructor(ie,ne){this.styleElement=ie,this.selectorSuffix=ne}style(ie){const ne=this.selectorSuffix&&`.${this.selectorSuffix}`,J=[];ie.listBackground&&J.push(`.monaco-list${ne} .monaco-list-rows { background: ${ie.listBackground}; }`),ie.listFocusBackground&&(J.push(`.monaco-list${ne}:focus .monaco-list-row.focused { background-color: ${ie.listFocusBackground}; }`),J.push(`.monaco-list${ne}:focus .monaco-list-row.focused:hover { background-color: ${ie.listFocusBackground}; }`)),ie.listFocusForeground&&J.push(`.monaco-list${ne}:focus .monaco-list-row.focused { color: ${ie.listFocusForeground}; }`),ie.listActiveSelectionBackground&&(J.push(`.monaco-list${ne}:focus .monaco-list-row.selected { background-color: ${ie.listActiveSelectionBackground}; }`),J.push(`.monaco-list${ne}:focus .monaco-list-row.selected:hover { background-color: ${ie.listActiveSelectionBackground}; }`)),ie.listActiveSelectionForeground&&J.push(`.monaco-list${ne}:focus .monaco-list-row.selected { color: ${ie.listActiveSelectionForeground}; }`),ie.listActiveSelectionIconForeground&&J.push(`.monaco-list${ne}:focus .monaco-list-row.selected .codicon { color: ${ie.listActiveSelectionIconForeground}; }`),ie.listFocusAndSelectionBackground&&J.push(`
				.monaco-drag-image,
				.monaco-list${ne}:focus .monaco-list-row.selected.focused { background-color: ${ie.listFocusAndSelectionBackground}; }
			`),ie.listFocusAndSelectionForeground&&J.push(`
				.monaco-drag-image,
				.monaco-list${ne}:focus .monaco-list-row.selected.focused { color: ${ie.listFocusAndSelectionForeground}; }
			`),ie.listInactiveFocusForeground&&(J.push(`.monaco-list${ne} .monaco-list-row.focused { color:  ${ie.listInactiveFocusForeground}; }`),J.push(`.monaco-list${ne} .monaco-list-row.focused:hover { color:  ${ie.listInactiveFocusForeground}; }`)),ie.listInactiveSelectionIconForeground&&J.push(`.monaco-list${ne} .monaco-list-row.focused .codicon { color:  ${ie.listInactiveSelectionIconForeground}; }`),ie.listInactiveFocusBackground&&(J.push(`.monaco-list${ne} .monaco-list-row.focused { background-color:  ${ie.listInactiveFocusBackground}; }`),J.push(`.monaco-list${ne} .monaco-list-row.focused:hover { background-color:  ${ie.listInactiveFocusBackground}; }`)),ie.listInactiveSelectionBackground&&(J.push(`.monaco-list${ne} .monaco-list-row.selected { background-color:  ${ie.listInactiveSelectionBackground}; }`),J.push(`.monaco-list${ne} .monaco-list-row.selected:hover { background-color:  ${ie.listInactiveSelectionBackground}; }`)),ie.listInactiveSelectionForeground&&J.push(`.monaco-list${ne} .monaco-list-row.selected { color: ${ie.listInactiveSelectionForeground}; }`),ie.listHoverBackground&&J.push(`.monaco-list${ne}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${ie.listHoverBackground}; }`),ie.listHoverForeground&&J.push(`.monaco-list${ne}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${ie.listHoverForeground}; }`);const B=(0,c.asCssValueWithDefault)(ie.listFocusAndSelectionOutline,(0,c.asCssValueWithDefault)(ie.listSelectionOutline,ie.listFocusOutline??""));B&&J.push(`.monaco-list${ne}:focus .monaco-list-row.focused.selected { outline: 1px solid ${B}; outline-offset: -1px;}`),ie.listFocusOutline&&J.push(`
				.monaco-drag-image,
				.monaco-list${ne}:focus .monaco-list-row.focused { outline: 1px solid ${ie.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${ne}.last-focused .monaco-list-row.focused { outline: 1px solid ${ie.listFocusOutline}; outline-offset: -1px; }
			`);const j=(0,c.asCssValueWithDefault)(ie.listSelectionOutline,ie.listInactiveFocusOutline??"");j&&J.push(`.monaco-list${ne} .monaco-list-row.focused.selected { outline: 1px dotted ${j}; outline-offset: -1px; }`),ie.listSelectionOutline&&J.push(`.monaco-list${ne} .monaco-list-row.selected { outline: 1px dotted ${ie.listSelectionOutline}; outline-offset: -1px; }`),ie.listInactiveFocusOutline&&J.push(`.monaco-list${ne} .monaco-list-row.focused { outline: 1px dotted ${ie.listInactiveFocusOutline}; outline-offset: -1px; }`),ie.listHoverOutline&&J.push(`.monaco-list${ne} .monaco-list-row:hover { outline: 1px dashed ${ie.listHoverOutline}; outline-offset: -1px; }`),ie.listDropOverBackground&&J.push(`
				.monaco-list${ne}.drop-target,
				.monaco-list${ne} .monaco-list-rows.drop-target,
				.monaco-list${ne} .monaco-list-row.drop-target { background-color: ${ie.listDropOverBackground} !important; color: inherit !important; }
			`),ie.listDropBetweenBackground&&(J.push(`
			.monaco-list${ne} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${ne} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${ie.listDropBetweenBackground};
			}`),J.push(`
			.monaco-list${ne} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${ne} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${ie.listDropBetweenBackground};
			}`)),ie.tableColumnsBorder&&J.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${ie.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),ie.tableOddRowsBackgroundColor&&J.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${ie.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=J.join(`
`)}}e.DefaultStyleController=Y,e.unthemedListStyles={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:p.Color.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:p.Color.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:p.Color.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};const Q={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function X(ce,ie){const ne=ce.indexOf(ie);if(ne===-1)return[];const J=[];let B=ne-1;for(;B>=0&&ce[B]===ie-(ne-B);)J.push(ce[B--]);for(J.reverse(),B=ne;B<ce.length&&ce[B]===ie+(B-ne);)J.push(ce[B++]);return J}function G(ce,ie){const ne=[];let J=0,B=0;for(;J<ce.length||B<ie.length;)if(J>=ce.length)ne.push(ie[B++]);else if(B>=ie.length)ne.push(ce[J++]);else if(ce[J]===ie[B]){ne.push(ce[J]),J++,B++;continue}else ce[J]<ie[B]?ne.push(ce[J++]):ne.push(ie[B++]);return ne}function P(ce,ie){const ne=[];let J=0,B=0;for(;J<ce.length||B<ie.length;)if(J>=ce.length)ne.push(ie[B++]);else if(B>=ie.length)ne.push(ce[J++]);else if(ce[J]===ie[B]){J++,B++;continue}else ce[J]<ie[B]?ne.push(ce[J++]):B++;return ne}const te=(ce,ie)=>ce-ie;class se{constructor(ie,ne){this._templateId=ie,this.renderers=ne}get templateId(){return this._templateId}renderTemplate(ie){return this.renderers.map(ne=>ne.renderTemplate(ie))}renderElement(ie,ne,J,B){let j=0;for(const V of this.renderers)V.renderElement(ie,ne,J[j++],B)}disposeElement(ie,ne,J,B){let j=0;for(const V of this.renderers)V.disposeElement?.(ie,ne,J[j],B),j+=1}disposeTemplate(ie){let ne=0;for(const J of this.renderers)J.disposeTemplate(ie[ne++])}}class ue{constructor(ie){this.accessibilityProvider=ie,this.templateId="a18n"}renderTemplate(ie){return{container:ie,disposables:new i.DisposableStore}}renderElement(ie,ne,J){const B=this.accessibilityProvider.getAriaLabel(ie),j=B&&typeof B!="string"?B:(0,d.constObservable)(B);J.disposables.add((0,d.autorun)($=>{this.setAriaLabel($.readObservable(j),J.container)}));const V=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(ie);typeof V=="number"?J.container.setAttribute("aria-level",`${V}`):J.container.removeAttribute("aria-level")}setAriaLabel(ie,ne){ie?ne.setAttribute("aria-label",ie):ne.removeAttribute("aria-label")}disposeElement(ie,ne,J,B){J.disposables.clear()}disposeTemplate(ie){ie.disposables.dispose()}}class ge{constructor(ie,ne){this.list=ie,this.dnd=ne}getDragElements(ie){const ne=this.list.getSelectedElements();return ne.indexOf(ie)>-1?ne:[ie]}getDragURI(ie){return this.dnd.getDragURI(ie)}getDragLabel(ie,ne){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(ie,ne)}onDragStart(ie,ne){this.dnd.onDragStart?.(ie,ne)}onDragOver(ie,ne,J,B,j){return this.dnd.onDragOver(ie,ne,J,B,j)}onDragLeave(ie,ne,J,B){this.dnd.onDragLeave?.(ie,ne,J,B)}onDragEnd(ie){this.dnd.onDragEnd?.(ie)}drop(ie,ne,J,B,j){this.dnd.drop(ie,ne,J,B,j)}dispose(){this.dnd.dispose()}}class pe{get onDidChangeFocus(){return s.Event.map(this.eventBufferer.wrapEvent(this.focus.onChange),ie=>this.toListEvent(ie),this.disposables)}get onDidChangeSelection(){return s.Event.map(this.eventBufferer.wrapEvent(this.selection.onChange),ie=>this.toListEvent(ie),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let ie=!1;const ne=s.Event.chain(this.disposables.add(new k.DomEmitter(this.view.domNode,"keydown")).event,j=>j.map(V=>new E.StandardKeyboardEvent(V)).filter(V=>ie=V.keyCode===58||V.shiftKey&&V.keyCode===68).map(V=>c.EventHelper.stop(V,!0)).filter(()=>!1)),J=s.Event.chain(this.disposables.add(new k.DomEmitter(this.view.domNode,"keyup")).event,j=>j.forEach(()=>ie=!1).map(V=>new E.StandardKeyboardEvent(V)).filter(V=>V.keyCode===58||V.shiftKey&&V.keyCode===68).map(V=>c.EventHelper.stop(V,!0)).map(({browserEvent:V})=>{const $=this.getFocus(),Z=$.length?$[0]:void 0,ee=typeof Z<"u"?this.view.element(Z):void 0,le=typeof Z<"u"?this.view.domElement(Z):this.view.domNode;return{index:Z,element:ee,anchor:le,browserEvent:V}})),B=s.Event.chain(this.view.onContextMenu,j=>j.filter(V=>!ie).map(({element:V,index:$,browserEvent:Z})=>({element:V,index:$,anchor:new r.StandardMouseEvent((0,c.getWindow)(this.view.domNode),Z),browserEvent:Z})));return s.Event.any(ne,J,B)}get onKeyDown(){return this.disposables.add(new k.DomEmitter(this.view.domNode,"keydown")).event}get onDidFocus(){return s.Event.signal(this.disposables.add(new k.DomEmitter(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return s.Event.signal(this.disposables.add(new k.DomEmitter(this.view.domNode,"blur",!0)).event)}constructor(ie,ne,J,B,j=Q){this.user=ie,this._options=j,this.focus=new h("focused"),this.anchor=new h("anchor"),this.eventBufferer=new s.EventBufferer,this._ariaLabel="",this.disposables=new i.DisposableStore,this._onDidDispose=new s.Emitter,this.onDidDispose=this._onDidDispose.event;const V=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new v(V!=="listbox");const $=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=j.accessibilityProvider,this.accessibilityProvider&&($.push(new ue(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),B=B.map(ee=>new se(ee.templateId,[...$,ee]));const Z={...j,dnd:j.dnd&&new ge(this,j.dnd)};if(this.view=this.createListView(ne,J,B,Z),this.view.domNode.setAttribute("role",V),j.styleController)this.styleController=j.styleController(this.view.domId);else{const ee=(0,c.createStyleSheet)(this.view.domNode);this.styleController=new Y(ee,this.view.domId)}if(this.spliceable=new f.CombinedSpliceable([new C(this.focus,this.view,j.identityProvider),new C(this.selection,this.view,j.identityProvider),new C(this.anchor,this.view,j.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new W(this,this.view)),(typeof j.keyboardSupport!="boolean"||j.keyboardSupport)&&(this.keyboardController=new N(this,this.view,j),this.disposables.add(this.keyboardController)),j.keyboardNavigationLabelProvider){const ee=j.keyboardNavigationDelegate||e.DefaultKeyboardNavigationDelegate;this.typeNavigationController=new F(this,this.view,j.keyboardNavigationLabelProvider,j.keyboardNavigationEventFilter??(()=>!0),ee),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(j),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(ie,ne,J,B){return new a.ListView(ie,ne,J,B)}createMouseController(ie){return new U(this)}updateOptions(ie={}){this._options={...this._options,...ie},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(ie),this.keyboardController?.updateOptions(ie),this.view.updateOptions(ie)}get options(){return this._options}splice(ie,ne,J=[]){if(ie<0||ie>this.view.length)throw new l.ListError(this.user,`Invalid start index: ${ie}`);if(ne<0)throw new l.ListError(this.user,`Invalid delete count: ${ne}`);ne===0&&J.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(ie,ne,J))}rerender(){this.view.rerender()}element(ie){return this.view.element(ie)}indexOf(ie){return this.view.indexOf(ie)}indexAt(ie){return this.view.indexAt(ie)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(ie){this.view.setScrollTop(ie)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(ie){this._ariaLabel=ie,this.view.domNode.setAttribute("aria-label",ie)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(ie,ne){this.view.layout(ie,ne)}setSelection(ie,ne){for(const J of ie)if(J<0||J>=this.length)throw new l.ListError(this.user,`Invalid index ${J}`);this.selection.set(ie,ne)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(ie=>this.view.element(ie))}setAnchor(ie){if(typeof ie>"u"){this.anchor.set([]);return}if(ie<0||ie>=this.length)throw new l.ListError(this.user,`Invalid index ${ie}`);this.anchor.set([ie])}getAnchor(){return(0,_.firstOrDefault)(this.anchor.get(),void 0)}getAnchorElement(){const ie=this.getAnchor();return typeof ie>"u"?void 0:this.element(ie)}setFocus(ie,ne){for(const J of ie)if(J<0||J>=this.length)throw new l.ListError(this.user,`Invalid index ${J}`);this.focus.set(ie,ne)}focusNext(ie=1,ne=!1,J,B){if(this.length===0)return;const j=this.focus.get(),V=this.findNextIndex(j.length>0?j[0]+ie:0,ne,B);V>-1&&this.setFocus([V],J)}focusPrevious(ie=1,ne=!1,J,B){if(this.length===0)return;const j=this.focus.get(),V=this.findPreviousIndex(j.length>0?j[0]-ie:0,ne,B);V>-1&&this.setFocus([V],J)}async focusNextPage(ie,ne){let J=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);J=J===0?0:J-1;const B=this.getFocus()[0];if(B!==J&&(B===void 0||J>B)){const j=this.findPreviousIndex(J,!1,ne);j>-1&&B!==j?this.setFocus([j],ie):this.setFocus([J],ie)}else{const j=this.view.getScrollTop();let V=j+this.view.renderHeight;J>B&&(V-=this.view.elementHeight(J)),this.view.setScrollTop(V),this.view.getScrollTop()!==j&&(this.setFocus([]),await(0,b.timeout)(0),await this.focusNextPage(ie,ne))}}async focusPreviousPage(ie,ne,J=()=>0){let B;const j=J(),V=this.view.getScrollTop()+j;V===0?B=this.view.indexAt(V):B=this.view.indexAfter(V-1);const $=this.getFocus()[0];if($!==B&&($===void 0||$>=B)){const Z=this.findNextIndex(B,!1,ne);Z>-1&&$!==Z?this.setFocus([Z],ie):this.setFocus([B],ie)}else{const Z=V;this.view.setScrollTop(V-this.view.renderHeight-j),this.view.getScrollTop()+J()!==Z&&(this.setFocus([]),await(0,b.timeout)(0),await this.focusPreviousPage(ie,ne,J))}}focusLast(ie,ne){if(this.length===0)return;const J=this.findPreviousIndex(this.length-1,!1,ne);J>-1&&this.setFocus([J],ie)}focusFirst(ie,ne){this.focusNth(0,ie,ne)}focusNth(ie,ne,J){if(this.length===0)return;const B=this.findNextIndex(ie,!1,J);B>-1&&this.setFocus([B],ne)}findNextIndex(ie,ne=!1,J){for(let B=0;B<this.length;B++){if(ie>=this.length&&!ne)return-1;if(ie=ie%this.length,!J||J(this.element(ie)))return ie;ie++}return-1}findPreviousIndex(ie,ne=!1,J){for(let B=0;B<this.length;B++){if(ie<0&&!ne)return-1;if(ie=(this.length+ie%this.length)%this.length,!J||J(this.element(ie)))return ie;ie--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(ie=>this.view.element(ie))}reveal(ie,ne,J=0){if(ie<0||ie>=this.length)throw new l.ListError(this.user,`Invalid index ${ie}`);const B=this.view.getScrollTop(),j=this.view.elementTop(ie),V=this.view.elementHeight(ie);if((0,u.isNumber)(ne)){const $=V-this.view.renderHeight+J;this.view.setScrollTop($*(0,o.clamp)(ne,0,1)+j-J)}else{const $=j+V,Z=B+this.view.renderHeight;j<B+J&&$>=Z||(j<B+J||$>=Z&&V>=this.view.renderHeight?this.view.setScrollTop(j-J):$>=Z&&this.view.setScrollTop($-this.view.renderHeight))}}getRelativeTop(ie,ne=0){if(ie<0||ie>=this.length)throw new l.ListError(this.user,`Invalid index ${ie}`);const J=this.view.getScrollTop(),B=this.view.elementTop(ie),j=this.view.elementHeight(ie);if(B<J+ne||B+j>J+this.view.renderHeight)return null;const V=j-this.view.renderHeight+ne;return Math.abs((J+ne-B)/V)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(ie){return this.view.getElementDomId(ie)}getElementTop(ie){return this.view.elementTop(ie)}style(ie){this.styleController.style(ie)}toListEvent({indexes:ie,browserEvent:ne}){return{indexes:ie,elements:ie.map(J=>this.view.element(J)),browserEvent:ne}}_onFocusChange(){const ie=this.focus.get();this.view.domNode.classList.toggle("element-focused",ie.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const ie=this.focus.get();if(ie.length>0){let ne;this.accessibilityProvider?.getActiveDescendantId&&(ne=this.accessibilityProvider.getActiveDescendantId(this.view.element(ie[0]))),this.view.domNode.setAttribute("aria-activedescendant",ne||this.view.getElementDomId(ie[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const ie=this.selection.get();this.view.domNode.classList.toggle("selection-none",ie.length===0),this.view.domNode.classList.toggle("selection-single",ie.length===1),this.view.domNode.classList.toggle("selection-multiple",ie.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}e.List=pe,De([n.memoize],pe.prototype,"onDidChangeFocus",null),De([n.memoize],pe.prototype,"onDidChangeSelection",null),De([n.memoize],pe.prototype,"onContextMenu",null),De([n.memoize],pe.prototype,"onKeyDown",null),De([n.memoize],pe.prototype,"onDidFocus",null),De([n.memoize],pe.prototype,"onDidBlur",null)}),define(oe[479],re([1,0,13,18,6,2,112,315]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PagedList=void 0;class f{get templateId(){return this.renderer.templateId}constructor(s,t){this.renderer=s,this.modelProvider=t}renderTemplate(s){return{data:this.renderer.renderTemplate(s),disposable:L.Disposable.None}}renderElement(s,t,i,o){if(i.disposable?.dispose(),!i.data)return;const g=this.modelProvider();if(g.isResolved(s))return this.renderer.renderElement(g.get(s),s,i.data,o);const u=new k.CancellationTokenSource,l=g.resolve(s,u.token);i.disposable={dispose:()=>u.cancel()},this.renderer.renderPlaceholder(s,i.data),l.then(a=>this.renderer.renderElement(a,s,i.data,o))}disposeTemplate(s){s.disposable&&(s.disposable.dispose(),s.disposable=void 0),s.data&&(this.renderer.disposeTemplate(s.data),s.data=void 0)}}class _{constructor(s,t){this.modelProvider=s,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(s){const t=this.modelProvider();return t.isResolved(s)?this.accessibilityProvider.getAriaLabel(t.get(s)):null}}function b(n,s){return{...s,accessibilityProvider:s.accessibilityProvider&&new _(n,s.accessibilityProvider)}}class p{constructor(s,t,i,o,g={}){const u=()=>this.model,l=o.map(a=>new f(a,u));this.list=new y.List(s,t,i,l,b(u,g))}updateOptions(s){this.list.updateOptions(s)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return E.Event.map(this.list.onMouseDblClick,({element:s,index:t,browserEvent:i})=>({element:s===void 0?void 0:this._model.get(s),index:t,browserEvent:i}))}get onPointer(){return E.Event.map(this.list.onPointer,({element:s,index:t,browserEvent:i})=>({element:s===void 0?void 0:this._model.get(s),index:t,browserEvent:i}))}get onDidChangeSelection(){return E.Event.map(this.list.onDidChangeSelection,({elements:s,indexes:t,browserEvent:i})=>({elements:s.map(o=>this._model.get(o)),indexes:t,browserEvent:i}))}get model(){return this._model}set model(s){this._model=s,this.list.splice(0,this.list.length,(0,c.range)(s.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(s=>this.model.get(s))}style(s){this.list.style(s)}dispose(){this.list.dispose()}}e.PagedList=p}),define(oe[480],re([10]),{}),define(oe[481],re([10]),{}),define(oe[482],re([10]),{}),define(oe[316],re([1,0,5,92,164,84,13,33,6,2,140,162,19,482]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitView=e.Sizing=void 0;const t={separatorBorder:f.Color.transparent};class i{set size(d){this._size=d}get size(){return this._size}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(d,m){if(d!==this.visible){d?(this.size=(0,p.clamp)(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof m=="number"?m:this.size,this.size=0),this.container.classList.toggle("visible",d);try{this.view.setVisible?.(d)}catch(h){console.error("Splitview: Failed to set visible view"),console.error(h)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(d){this.container.style.pointerEvents=d?"":"none"}constructor(d,m,h,v){this.container=d,this.view=m,this.disposable=v,this._cachedVisibleSize=void 0,typeof h=="number"?(this._size=h,this._cachedVisibleSize=void 0,d.classList.add("visible")):(this._size=0,this._cachedVisibleSize=h.cachedVisibleSize)}layout(d,m){this.layoutContainer(d);try{this.view.layout(this.size,d,m)}catch(h){console.error("Splitview: Failed to layout view"),console.error(h)}}dispose(){this.disposable.dispose()}}class o extends i{layoutContainer(d){this.container.style.top=`${d}px`,this.container.style.height=`${this.size}px`}}class g extends i{layoutContainer(d){this.container.style.left=`${d}px`,this.container.style.width=`${this.size}px`}}var u;(function(r){r[r.Idle=0]="Idle",r[r.Busy=1]="Busy"})(u||(u={}));var l;(function(r){r.Distribute={type:"distribute"};function d(v){return{type:"split",index:v}}r.Split=d;function m(v){return{type:"auto",index:v}}r.Auto=m;function h(v){return{type:"invisible",cachedVisibleSize:v}}r.Invisible=h})(l||(e.Sizing=l={}));class a extends b.Disposable{get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(d){for(const m of this.sashItems)m.sash.orthogonalStartSash=d;this._orthogonalStartSash=d}set orthogonalEndSash(d){for(const m of this.sashItems)m.sash.orthogonalEndSash=d;this._orthogonalEndSash=d}set startSnappingEnabled(d){this._startSnappingEnabled!==d&&(this._startSnappingEnabled=d,this.updateSashEnablement())}set endSnappingEnabled(d){this._endSnappingEnabled!==d&&(this._endSnappingEnabled=d,this.updateSashEnablement())}constructor(d,m={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=u.Idle,this._onDidSashChange=this._register(new _.Emitter),this._onDidSashReset=this._register(new _.Emitter),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=m.orientation??0,this.inverseAltBehavior=m.inverseAltBehavior??!1,this.proportionalLayout=m.proportionalLayout??!0,this.getSashOrthogonalSize=m.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),d.appendChild(this.el),this.sashContainer=(0,c.append)(this.el,(0,c.$)(".sash-container")),this.viewContainer=(0,c.$)(".split-view-container"),this.scrollable=this._register(new n.Scrollable({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:v=>(0,c.scheduleAtNextAnimationFrame)((0,c.getWindow)(this.el),v)})),this.scrollableElement=this._register(new L.SmoothScrollableElement(this.viewContainer,{vertical:this.orientation===0?m.scrollbarVisibility??1:2,horizontal:this.orientation===1?m.scrollbarVisibility??1:2},this.scrollable));const h=this._register(new k.DomEmitter(this.viewContainer,"scroll")).event;this._register(h(v=>{const C=this.scrollableElement.getScrollPosition(),w=Math.abs(this.viewContainer.scrollLeft-C.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,S=Math.abs(this.viewContainer.scrollTop-C.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(w!==void 0||S!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:w,scrollTop:S})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(v=>{v.scrollTopChanged&&(this.viewContainer.scrollTop=v.scrollTop),v.scrollLeftChanged&&(this.viewContainer.scrollLeft=v.scrollLeft)})),(0,c.append)(this.el,this.scrollableElement.getDomNode()),this.style(m.styles||t),m.descriptor&&(this.size=m.descriptor.size,m.descriptor.views.forEach((v,C)=>{const w=s.isUndefined(v.visible)||v.visible?v.size:{type:"invisible",cachedVisibleSize:v.size},S=v.view;this.doAddView(S,w,C,!0)}),this._contentSize=this.viewItems.reduce((v,C)=>v+C.size,0),this.saveProportions())}style(d){d.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",d.separatorBorder.toString()))}addView(d,m,h=this.viewItems.length,v){this.doAddView(d,m,h,v)}layout(d,m){const h=Math.max(this.size,this._contentSize);if(this.size=d,this.layoutContext=m,this.proportions){let v=0;for(let C=0;C<this.viewItems.length;C++){const w=this.viewItems[C],S=this.proportions[C];typeof S=="number"?v+=S:d-=w.size}for(let C=0;C<this.viewItems.length;C++){const w=this.viewItems[C],S=this.proportions[C];typeof S=="number"&&v>0&&(w.size=(0,p.clamp)(Math.round(S*d/v),w.minimumSize,w.maximumSize))}}else{const v=(0,y.range)(this.viewItems.length),C=v.filter(S=>this.viewItems[S].priority===1),w=v.filter(S=>this.viewItems[S].priority===2);this.resize(this.viewItems.length-1,d-h,void 0,C,w)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(d=>d.proportionalLayout&&d.visible?d.size/this._contentSize:void 0))}onSashStart({sash:d,start:m,alt:h}){for(const S of this.viewItems)S.enabled=!1;const v=this.sashItems.findIndex(S=>S.sash===d),C=(0,b.combinedDisposable)((0,c.addDisposableListener)(this.el.ownerDocument.body,"keydown",S=>w(this.sashDragState.current,S.altKey)),(0,c.addDisposableListener)(this.el.ownerDocument.body,"keyup",()=>w(this.sashDragState.current,!1))),w=(S,D)=>{const I=this.viewItems.map(N=>N.size);let T=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(D=!D),D)if(v===this.sashItems.length-1){const O=this.viewItems[v];T=(O.minimumSize-O.size)/2,M=(O.maximumSize-O.size)/2}else{const O=this.viewItems[v+1];T=(O.size-O.maximumSize)/2,M=(O.size-O.minimumSize)/2}let A,R;if(!D){const N=(0,y.range)(v,-1),O=(0,y.range)(v+1,this.viewItems.length),x=N.reduce((Y,Q)=>Y+(this.viewItems[Q].minimumSize-I[Q]),0),F=N.reduce((Y,Q)=>Y+(this.viewItems[Q].viewMaximumSize-I[Q]),0),W=O.length===0?Number.POSITIVE_INFINITY:O.reduce((Y,Q)=>Y+(I[Q]-this.viewItems[Q].minimumSize),0),z=O.length===0?Number.NEGATIVE_INFINITY:O.reduce((Y,Q)=>Y+(I[Q]-this.viewItems[Q].viewMaximumSize),0),q=Math.max(x,z),H=Math.min(W,F),K=this.findFirstSnapIndex(N),U=this.findFirstSnapIndex(O);if(typeof K=="number"){const Y=this.viewItems[K],Q=Math.floor(Y.viewMinimumSize/2);A={index:K,limitDelta:Y.visible?q-Q:q+Q,size:Y.size}}if(typeof U=="number"){const Y=this.viewItems[U],Q=Math.floor(Y.viewMinimumSize/2);R={index:U,limitDelta:Y.visible?H+Q:H-Q,size:Y.size}}}this.sashDragState={start:S,current:S,index:v,sizes:I,minDelta:T,maxDelta:M,alt:D,snapBefore:A,snapAfter:R,disposable:C}};w(m,h)}onSashChange({current:d}){const{index:m,start:h,sizes:v,alt:C,minDelta:w,maxDelta:S,snapBefore:D,snapAfter:I}=this.sashDragState;this.sashDragState.current=d;const T=d-h,M=this.resize(m,T,v,void 0,void 0,w,S,D,I);if(C){const A=m===this.sashItems.length-1,R=this.viewItems.map(z=>z.size),N=A?m:m+1,O=this.viewItems[N],x=O.size-O.maximumSize,F=O.size-O.minimumSize,W=A?m-1:m+1;this.resize(W,-M,R,void 0,void 0,x,F)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(d){this._onDidSashChange.fire(d),this.sashDragState.disposable.dispose(),this.saveProportions();for(const m of this.viewItems)m.enabled=!0}onViewChange(d,m){const h=this.viewItems.indexOf(d);h<0||h>=this.viewItems.length||(m=typeof m=="number"?m:d.size,m=(0,p.clamp)(m,d.minimumSize,d.maximumSize),this.inverseAltBehavior&&h>0?(this.resize(h-1,Math.floor((d.size-m)/2)),this.distributeEmptySpace(),this.layoutViews()):(d.size=m,this.relayout([h],void 0)))}resizeView(d,m){if(!(d<0||d>=this.viewItems.length)){if(this.state!==u.Idle)throw new Error("Cant modify splitview");this.state=u.Busy;try{const h=(0,y.range)(this.viewItems.length).filter(S=>S!==d),v=[...h.filter(S=>this.viewItems[S].priority===1),d],C=h.filter(S=>this.viewItems[S].priority===2),w=this.viewItems[d];m=Math.round(m),m=(0,p.clamp)(m,w.minimumSize,Math.min(w.maximumSize,this.size)),w.size=m,this.relayout(v,C)}finally{this.state=u.Idle}}}distributeViewSizes(){const d=[];let m=0;for(const S of this.viewItems)S.maximumSize-S.minimumSize>0&&(d.push(S),m+=S.size);const h=Math.floor(m/d.length);for(const S of d)S.size=(0,p.clamp)(h,S.minimumSize,S.maximumSize);const v=(0,y.range)(this.viewItems.length),C=v.filter(S=>this.viewItems[S].priority===1),w=v.filter(S=>this.viewItems[S].priority===2);this.relayout(C,w)}getViewSize(d){return d<0||d>=this.viewItems.length?-1:this.viewItems[d].size}doAddView(d,m,h=this.viewItems.length,v){if(this.state!==u.Idle)throw new Error("Cant modify splitview");this.state=u.Busy;try{const C=(0,c.$)(".split-view-view");h===this.viewItems.length?this.viewContainer.appendChild(C):this.viewContainer.insertBefore(C,this.viewContainer.children.item(h));const w=d.onDidChange(A=>this.onViewChange(T,A)),S=(0,b.toDisposable)(()=>C.remove()),D=(0,b.combinedDisposable)(w,S);let I;typeof m=="number"?I=m:(m.type==="auto"&&(this.areViewsDistributed()?m={type:"distribute"}:m={type:"split",index:m.index}),m.type==="split"?I=this.getViewSize(m.index)/2:m.type==="invisible"?I={cachedVisibleSize:m.cachedVisibleSize}:I=d.minimumSize);const T=this.orientation===0?new o(C,d,I,D):new g(C,d,I,D);if(this.viewItems.splice(h,0,T),this.viewItems.length>1){const A={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},R=this.orientation===0?new E.Sash(this.sashContainer,{getHorizontalSashTop:Y=>this.getSashPosition(Y),getHorizontalSashWidth:this.getSashOrthogonalSize},{...A,orientation:1}):new E.Sash(this.sashContainer,{getVerticalSashLeft:Y=>this.getSashPosition(Y),getVerticalSashHeight:this.getSashOrthogonalSize},{...A,orientation:0}),N=this.orientation===0?Y=>({sash:R,start:Y.startY,current:Y.currentY,alt:Y.altKey}):Y=>({sash:R,start:Y.startX,current:Y.currentX,alt:Y.altKey}),x=_.Event.map(R.onDidStart,N)(this.onSashStart,this),W=_.Event.map(R.onDidChange,N)(this.onSashChange,this),q=_.Event.map(R.onDidEnd,()=>this.sashItems.findIndex(Y=>Y.sash===R))(this.onSashEnd,this),H=R.onDidReset(()=>{const Y=this.sashItems.findIndex(te=>te.sash===R),Q=(0,y.range)(Y,-1),X=(0,y.range)(Y+1,this.viewItems.length),G=this.findFirstSnapIndex(Q),P=this.findFirstSnapIndex(X);typeof G=="number"&&!this.viewItems[G].visible||typeof P=="number"&&!this.viewItems[P].visible||this._onDidSashReset.fire(Y)}),K=(0,b.combinedDisposable)(x,W,q,H,R),U={sash:R,disposable:K};this.sashItems.splice(h-1,0,U)}C.appendChild(d.element);let M;typeof m!="number"&&m.type==="split"&&(M=[m.index]),v||this.relayout([h],M),!v&&typeof m!="number"&&m.type==="distribute"&&this.distributeViewSizes()}finally{this.state=u.Idle}}relayout(d,m){const h=this.viewItems.reduce((v,C)=>v+C.size,0);this.resize(this.viewItems.length-1,this.size-h,void 0,d,m),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(d,m,h=this.viewItems.map(T=>T.size),v,C,w=Number.NEGATIVE_INFINITY,S=Number.POSITIVE_INFINITY,D,I){if(d<0||d>=this.viewItems.length)return 0;const T=(0,y.range)(d,-1),M=(0,y.range)(d+1,this.viewItems.length);if(C)for(const U of C)(0,y.pushToStart)(T,U),(0,y.pushToStart)(M,U);if(v)for(const U of v)(0,y.pushToEnd)(T,U),(0,y.pushToEnd)(M,U);const A=T.map(U=>this.viewItems[U]),R=T.map(U=>h[U]),N=M.map(U=>this.viewItems[U]),O=M.map(U=>h[U]),x=T.reduce((U,Y)=>U+(this.viewItems[Y].minimumSize-h[Y]),0),F=T.reduce((U,Y)=>U+(this.viewItems[Y].maximumSize-h[Y]),0),W=M.length===0?Number.POSITIVE_INFINITY:M.reduce((U,Y)=>U+(h[Y]-this.viewItems[Y].minimumSize),0),z=M.length===0?Number.NEGATIVE_INFINITY:M.reduce((U,Y)=>U+(h[Y]-this.viewItems[Y].maximumSize),0),q=Math.max(x,z,w),H=Math.min(W,F,S);let K=!1;if(D){const U=this.viewItems[D.index],Y=m>=D.limitDelta;K=Y!==U.visible,U.setVisible(Y,D.size)}if(!K&&I){const U=this.viewItems[I.index],Y=m<I.limitDelta;K=Y!==U.visible,U.setVisible(Y,I.size)}if(K)return this.resize(d,m,h,v,C,w,S);m=(0,p.clamp)(m,q,H);for(let U=0,Y=m;U<A.length;U++){const Q=A[U],X=(0,p.clamp)(R[U]+Y,Q.minimumSize,Q.maximumSize),G=X-R[U];Y-=G,Q.size=X}for(let U=0,Y=m;U<N.length;U++){const Q=N[U],X=(0,p.clamp)(O[U]-Y,Q.minimumSize,Q.maximumSize),G=X-O[U];Y+=G,Q.size=X}return m}distributeEmptySpace(d){const m=this.viewItems.reduce((S,D)=>S+D.size,0);let h=this.size-m;const v=(0,y.range)(this.viewItems.length-1,-1),C=v.filter(S=>this.viewItems[S].priority===1),w=v.filter(S=>this.viewItems[S].priority===2);for(const S of w)(0,y.pushToStart)(v,S);for(const S of C)(0,y.pushToEnd)(v,S);typeof d=="number"&&(0,y.pushToEnd)(v,d);for(let S=0;h!==0&&S<v.length;S++){const D=this.viewItems[v[S]],I=(0,p.clamp)(D.size+h,D.minimumSize,D.maximumSize),T=I-D.size;h-=T,D.size=I}}layoutViews(){this._contentSize=this.viewItems.reduce((m,h)=>m+h.size,0);let d=0;for(const m of this.viewItems)m.layout(d,this.layoutContext),d+=m.size;this.sashItems.forEach(m=>m.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let d=!1;const m=this.viewItems.map(D=>d=D.size-D.minimumSize>0||d);d=!1;const h=this.viewItems.map(D=>d=D.maximumSize-D.size>0||d),v=[...this.viewItems].reverse();d=!1;const C=v.map(D=>d=D.size-D.minimumSize>0||d).reverse();d=!1;const w=v.map(D=>d=D.maximumSize-D.size>0||d).reverse();let S=0;for(let D=0;D<this.sashItems.length;D++){const{sash:I}=this.sashItems[D],T=this.viewItems[D];S+=T.size;const M=!(m[D]&&w[D+1]),A=!(h[D]&&C[D+1]);if(M&&A){const R=(0,y.range)(D,-1),N=(0,y.range)(D+1,this.viewItems.length),O=this.findFirstSnapIndex(R),x=this.findFirstSnapIndex(N),F=typeof O=="number"&&!this.viewItems[O].visible,W=typeof x=="number"&&!this.viewItems[x].visible;F&&C[D]&&(S>0||this.startSnappingEnabled)?I.state=1:W&&m[D]&&(S<this._contentSize||this.endSnappingEnabled)?I.state=2:I.state=0}else M&&!A?I.state=1:!M&&A?I.state=2:I.state=3}}getSashPosition(d){let m=0;for(let h=0;h<this.sashItems.length;h++)if(m+=this.viewItems[h].size,this.sashItems[h].sash===d)return m;return 0}findFirstSnapIndex(d){for(const m of d){const h=this.viewItems[m];if(h.visible&&h.snap)return m}for(const m of d){const h=this.viewItems[m];if(h.visible&&h.maximumSize-h.minimumSize>0)return;if(!h.visible&&h.snap)return m}}areViewsDistributed(){let d,m;for(const h of this.viewItems)if(d=d===void 0?h.size:Math.min(d,h.size),m=m===void 0?h.size:Math.max(m,h.size),m-d>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),(0,b.dispose)(this.viewItems),this.viewItems=[],this.sashItems.forEach(d=>d.disposable.dispose()),this.sashItems=[],super.dispose()}}e.SplitView=a}),define(oe[483],re([10]),{}),define(oe[484],re([1,0,5,81,43,112,316,6,2,483]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Table=void 0;class b{static{this.TemplateId="row"}constructor(i,o,g){this.columns=i,this.getColumnSize=g,this.templateId=b.TemplateId,this.renderedTemplates=new Set;const u=new Map(o.map(l=>[l.templateId,l]));this.renderers=[];for(const l of i){const a=u.get(l.templateId);if(!a)throw new Error(`Table cell renderer for template id ${l.templateId} not found.`);this.renderers.push(a)}}renderTemplate(i){const o=(0,c.append)(i,(0,c.$)(".monaco-table-tr")),g=[],u=[];for(let a=0;a<this.columns.length;a++){const r=this.renderers[a],d=(0,c.append)(o,(0,c.$)(".monaco-table-td",{"data-col-index":a}));d.style.width=`${this.getColumnSize(a)}px`,g.push(d),u.push(r.renderTemplate(d))}const l={container:i,cellContainers:g,cellTemplateData:u};return this.renderedTemplates.add(l),l}renderElement(i,o,g,u){for(let l=0;l<this.columns.length;l++){const r=this.columns[l].project(i);this.renderers[l].renderElement(r,o,g.cellTemplateData[l],u)}}disposeElement(i,o,g,u){for(let l=0;l<this.columns.length;l++){const a=this.renderers[l];if(a.disposeElement){const d=this.columns[l].project(i);a.disposeElement(d,o,g.cellTemplateData[l],u)}}}disposeTemplate(i){for(let o=0;o<this.columns.length;o++)this.renderers[o].disposeTemplate(i.cellTemplateData[o]);(0,c.clearNode)(i.container),this.renderedTemplates.delete(i)}layoutColumn(i,o){for(const{cellContainers:g}of this.renderedTemplates)g[i].style.width=`${o}px`}}function p(t){return{getHeight(i){return t.getHeight(i)},getTemplateId(){return b.TemplateId}}}class n extends _.Disposable{get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??f.Event.None}constructor(i,o){super(),this.column=i,this.index=o,this._onDidLayout=new f.Emitter,this.onDidLayout=this._onDidLayout.event,this.element=(0,c.$)(".monaco-table-th",{"data-col-index":o},i.label),i.tooltip&&this._register((0,k.getBaseLayerHoverDelegate)().setupManagedHover((0,E.getDefaultHoverDelegate)("mouse"),this.element,i.tooltip))}layout(i){this._onDidLayout.fire([this.index,i])}}class s{static{this.InstanceCount=0}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get scrollTop(){return this.list.scrollTop}set scrollTop(i){this.list.scrollTop=i}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(i,o,g,u,l,a){this.virtualDelegate=g,this.domId=`table_id_${++s.InstanceCount}`,this.disposables=new _.DisposableStore,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,c.append)(o,(0,c.$)(`.monaco-table.${this.domId}`));const r=u.map((h,v)=>this.disposables.add(new n(h,v))),d={size:r.reduce((h,v)=>h+v.column.weight,0),views:r.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new y.SplitView(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:d})),this.splitview.el.style.height=`${g.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${g.headerRowHeight}px`;const m=new b(u,l,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new L.List(i,this.domNode,p(g),[m],a)),f.Event.any(...r.map(h=>h.onDidLayout))(([h,v])=>m.layoutColumn(h,v),null,this.disposables),this.splitview.onDidSashReset(h=>{const v=u.reduce((w,S)=>w+S.weight,0),C=u[h].weight/v*this.cachedWidth;this.splitview.resizeView(h,C)},null,this.disposables),this.styleElement=(0,c.createStyleSheet)(this.domNode),this.style(L.unthemedListStyles)}updateOptions(i){this.list.updateOptions(i)}splice(i,o,g=[]){this.list.splice(i,o,g)}getHTMLElement(){return this.domNode}style(i){const o=[];o.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=o.join(`
`),this.list.style(i)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}e.Table=s}),define(oe[485],re([10]),{}),define(oe[165],re([1,0,83,30,6,43,81,485]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Toggle=e.unthemedToggleStyles=void 0,e.unthemedToggleStyles={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class f extends c.Widget{constructor(b){super(),this._onChange=this._register(new E.Emitter),this.onChange=this._onChange.event,this._onKeyDown=this._register(new E.Emitter),this.onKeyDown=this._onKeyDown.event,this._opts=b,this._checked=this._opts.isChecked;const p=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,p.push(...k.ThemeIcon.asClassNameArray(this._icon))),this._opts.actionClassName&&p.push(...this._opts.actionClassName.split(" ")),this._checked&&p.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register((0,y.getBaseLayerHoverDelegate)().setupManagedHover(b.hoverDelegate??(0,L.getDefaultHoverDelegate)("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...p),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(b){this._checked=b,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}e.Toggle=f}),define(oe[486],re([10]),{}),define(oe[487],re([10]),{}),define(oe[488],re([10]),{}),define(oe[489],re([10]),{}),define(oe[490],re([10]),{}),define(oe[491],re([10]),{}),define(oe[492],re([10]),{}),define(oe[493],re([10]),{}),define(oe[494],re([10]),{}),define(oe[495],re([10]),{}),define(oe[496],re([10]),{}),define(oe[497],re([10]),{}),define(oe[498],re([10]),{}),define(oe[499],re([10]),{}),define(oe[500],re([10]),{}),define(oe[501],re([10]),{}),define(oe[502],re([10]),{}),define(oe[503],re([10]),{}),define(oe[504],re([10]),{}),define(oe[505],re([10]),{}),define(oe[506],re([10]),{}),define(oe[507],re([10]),{}),define(oe[508],re([10]),{}),define(oe[509],re([10]),{}),define(oe[510],re([10]),{}),define(oe[511],re([10]),{}),define(oe[512],re([10]),{}),define(oe[513],re([10]),{}),define(oe[514],re([10]),{}),define(oe[515],re([10]),{}),define(oe[236],re([10]),{}),define(oe[516],re([10]),{}),define(oe[517],re([10]),{}),define(oe[518],re([10]),{}),define(oe[519],re([10]),{}),define(oe[520],re([10]),{}),define(oe[521],re([10]),{}),define(oe[522],re([10]),{}),define(oe[523],re([10]),{}),define(oe[237],re([10]),{}),define(oe[524],re([10]),{}),define(oe[525],re([10]),{}),define(oe[526],re([10]),{}),define(oe[527],re([10]),{}),define(oe[528],re([10]),{}),define(oe[529],re([10]),{}),define(oe[530],re([10]),{}),define(oe[531],re([10]),{}),define(oe[532],re([10]),{}),define(oe[533],re([10]),{}),define(oe[534],re([10]),{}),define(oe[535],re([10]),{}),define(oe[536],re([10]),{}),define(oe[537],re([10]),{}),define(oe[538],re([10]),{}),define(oe[539],re([10]),{}),define(oe[540],re([10]),{}),define(oe[541],re([10]),{}),define(oe[542],re([10]),{}),define(oe[543],re([10]),{}),define(oe[544],re([10]),{}),define(oe[545],re([10]),{}),define(oe[546],re([10]),{}),define(oe[547],re([10]),{}),define(oe[548],re([10]),{}),define(oe[549],re([10]),{}),define(oe[550],re([10]),{}),define(oe[317],re([10]),{}),define(oe[551],re([10]),{}),define(oe[552],re([10]),{}),define(oe[238],re([10]),{}),define(oe[553],re([10]),{}),define(oe[75],re([1,0,39]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyFontInfo=k;function k(E,L){E instanceof c.FastDomNode?(E.setFontFamily(L.getMassagedFontFamily()),E.setFontWeight(L.fontWeight),E.setFontSize(L.fontSize),E.setFontFeatureSettings(L.fontFeatureSettings),E.setFontVariationSettings(L.fontVariationSettings),E.setLineHeight(L.lineHeight),E.setLetterSpacing(L.letterSpacing)):(E.style.fontFamily=L.getMassagedFontFamily(),E.style.fontWeight=L.fontWeight,E.style.fontSize=L.fontSize+"px",E.style.fontFeatureSettings=L.fontFeatureSettings,E.style.fontVariationSettings=L.fontVariationSettings,E.style.lineHeight=L.lineHeight+"px",E.style.letterSpacing=L.letterSpacing+"px")}}),define(oe[554],re([1,0,75]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharWidthRequest=void 0,e.readCharWidths=L;class k{constructor(f,_){this.chr=f,this.type=_,this.width=0}fulfill(f){this.width=f}}e.CharWidthRequest=k;class E{constructor(f,_){this._bareFontInfo=f,this._requests=_,this._container=null,this._testElements=null}read(f){this._createDomElements(),f.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){const f=document.createElement("div");f.style.position="absolute",f.style.top="-50000px",f.style.width="50000px";const _=document.createElement("div");(0,c.applyFontInfo)(_,this._bareFontInfo),f.appendChild(_);const b=document.createElement("div");(0,c.applyFontInfo)(b,this._bareFontInfo),b.style.fontWeight="bold",f.appendChild(b);const p=document.createElement("div");(0,c.applyFontInfo)(p,this._bareFontInfo),p.style.fontStyle="italic",f.appendChild(p);const n=[];for(const s of this._requests){let t;s.type===0&&(t=_),s.type===2&&(t=b),s.type===1&&(t=p),t.appendChild(document.createElement("br"));const i=document.createElement("span");E._render(i,s),t.appendChild(i),n.push(i)}this._container=f,this._testElements=n}static _render(f,_){if(_.chr===" "){let b="\xA0";for(let p=0;p<8;p++)b+=b;f.innerText=b}else{let b=_.chr;for(let p=0;p<8;p++)b+=b;f.textContent=b}}_readFromDomElements(){for(let f=0,_=this._requests.length;f<_;f++){const b=this._requests[f],p=this._testElements[f];b.fulfill(p.offsetWidth/256)}}}function L(y,f,_){new E(f,_).read(y)}}),define(oe[318],re([1,0,2,6,5]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ElementSizeObserver=void 0;class L extends c.Disposable{constructor(f,_){super(),this._onDidChange=this._register(new k.Emitter),this.onDidChange=this._onDidChange.event,this._referenceDomElement=f,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,_)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let f=null;const _=()=>{f?this.observe({width:f.width,height:f.height}):this.observe()};let b=!1,p=!1;const n=()=>{if(b&&!p)try{b=!1,p=!0,_()}finally{(0,E.scheduleAtNextAnimationFrame)((0,E.getWindow)(this._referenceDomElement),()=>{p=!1,n()})}};this._resizeObserver=new ResizeObserver(s=>{s&&s[0]&&s[0].contentRect?f={width:s[0].contentRect.width,height:s[0].contentRect.height}:f=null,b=!0,n()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(f){this.measureReferenceDomElement(!0,f)}measureReferenceDomElement(f,_){let b=0,p=0;_?(b=_.width,p=_.height):this._referenceDomElement&&(b=this._referenceDomElement.clientWidth,p=this._referenceDomElement.clientHeight),b=Math.max(5,b),p=Math.max(5,p),(this._width!==b||this._height!==p)&&(this._width=b,this._height=p,f&&this._onDidChange.fire())}}e.ElementSizeObserver=L}),define(oe[555],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorSettingMigration=void 0,e.migrateOptions=L;class c{static{this.items=[]}constructor(_,b){this.key=_,this.migrate=b}apply(_){const b=c._read(_,this.key),p=s=>c._read(_,s),n=(s,t)=>c._write(_,s,t);this.migrate(b,p,n)}static _read(_,b){if(typeof _>"u")return;const p=b.indexOf(".");if(p>=0){const n=b.substring(0,p);return this._read(_[n],b.substring(p+1))}return _[b]}static _write(_,b,p){const n=b.indexOf(".");if(n>=0){const s=b.substring(0,n);_[s]=_[s]||{},this._write(_[s],b.substring(n+1),p);return}_[b]=p}}e.EditorSettingMigration=c;function k(f,_){c.items.push(new c(f,_))}function E(f,_){k(f,(b,p,n)=>{if(typeof b<"u"){for(const[s,t]of _)if(b===s){n(f,t);return}}})}function L(f){c.items.forEach(_=>_.apply(f))}E("wordWrap",[[!0,"on"],[!1,"off"]]),E("lineNumbers",[[!0,"on"],[!1,"off"]]),E("cursorBlinking",[["visible","solid"]]),E("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),E("renderLineHighlight",[[!0,"line"],[!1,"none"]]),E("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),E("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),E("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),E("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),E("autoIndent",[[!1,"advanced"],[!0,"full"]]),E("matchBrackets",[[!0,"always"],[!1,"never"]]),E("renderFinalNewline",[[!0,"on"],[!1,"off"]]),E("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),E("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]),E("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]),k("autoClosingBrackets",(f,_,b)=>{f===!1&&(b("autoClosingBrackets","never"),typeof _("autoClosingQuotes")>"u"&&b("autoClosingQuotes","never"),typeof _("autoSurround")>"u"&&b("autoSurround","never"))}),k("renderIndentGuides",(f,_,b)=>{typeof f<"u"&&(b("renderIndentGuides",void 0),typeof _("guides.indentation")>"u"&&b("guides.indentation",!!f))}),k("highlightActiveIndentGuide",(f,_,b)=>{typeof f<"u"&&(b("highlightActiveIndentGuide",void 0),typeof _("guides.highlightActiveIndentation")>"u"&&b("guides.highlightActiveIndentation",!!f))});const y={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};k("suggest.filteredTypes",(f,_,b)=>{if(f&&typeof f=="object"){for(const p of Object.entries(y))f[p[0]]===!1&&typeof _(`suggest.${p[1]}`)>"u"&&b(`suggest.${p[1]}`,!1);b("suggest.filteredTypes",void 0)}}),k("quickSuggestions",(f,_,b)=>{if(typeof f=="boolean"){const p=f?"on":"off";b("quickSuggestions",{comments:p,strings:p,other:p})}}),k("experimental.stickyScroll.enabled",(f,_,b)=>{typeof f=="boolean"&&(b("experimental.stickyScroll.enabled",void 0),typeof _("stickyScroll.enabled")>"u"&&b("stickyScroll.enabled",f))}),k("experimental.stickyScroll.maxLineCount",(f,_,b)=>{typeof f=="number"&&(b("experimental.stickyScroll.maxLineCount",void 0),typeof _("stickyScroll.maxLineCount")>"u"&&b("stickyScroll.maxLineCount",f))}),k("codeActionsOnSave",(f,_,b)=>{if(f&&typeof f=="object"){let p=!1;const n={};for(const s of Object.entries(f))typeof s[1]=="boolean"?(p=!0,n[s[0]]=s[1]?"explicit":"never"):n[s[0]]=s[1];p&&b("codeActionsOnSave",n)}}),k("codeActionWidget.includeNearbyQuickfixes",(f,_,b)=>{typeof f=="boolean"&&(b("codeActionWidget.includeNearbyQuickfixes",void 0),typeof _("codeActionWidget.includeNearbyQuickFixes")>"u"&&b("codeActionWidget.includeNearbyQuickFixes",f))}),k("lightbulb.enabled",(f,_,b)=>{typeof f=="boolean"&&b("lightbulb.enabled",f?void 0:"off")})}),define(oe[239],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabFocus=void 0;class k{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new c.Emitter,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(L){this._tabFocus=L,this._onDidChangeTabFocus.fire(this._tabFocus)}}e.TabFocus=new k}),define(oe[142],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StableEditorScrollState=void 0;class c{static capture(E){if(E.getScrollTop()===0||E.hasPendingScrollAnimation())return new c(E.getScrollTop(),E.getContentHeight(),null,0,null);let L=null,y=0;const f=E.getVisibleRanges();if(f.length>0){L=f[0].getStartPosition();const _=E.getPosition();_&&f.some(n=>n.containsPosition(_))&&(L=_);const b=E.getTopForPosition(L.lineNumber,L.column);y=E.getScrollTop()-b}return new c(E.getScrollTop(),E.getContentHeight(),L,y,E.getPosition())}constructor(E,L,y,f,_){this._initialScrollTop=E,this._initialContentHeight=L,this._visiblePosition=y,this._visiblePositionScrollDelta=f,this._cursorPosition=_}restore(E){if(!(this._initialContentHeight===E.getContentHeight()&&this._initialScrollTop===E.getScrollTop())&&this._visiblePosition){const L=E.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);E.setScrollTop(L+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(E){if(this._initialContentHeight===E.getContentHeight()&&this._initialScrollTop===E.getScrollTop())return;const L=E.getPosition();if(!this._cursorPosition||!L)return;const y=E.getTopForLineNumber(L.lineNumber)-E.getTopForLineNumber(this._cursorPosition.lineNumber);E.setScrollTop(E.getScrollTop()+y,1)}}e.StableEditorScrollState=c}),define(oe[166],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VisibleRanges=e.HorizontalPosition=e.FloatHorizontalRange=e.HorizontalRange=e.LineVisibleRanges=e.RenderingContext=e.RestrictedRenderingContext=void 0;class c{constructor(p,n){this._restrictedRenderingContextBrand=void 0,this._viewLayout=p,this.viewportData=n,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const s=this._viewLayout.getCurrentViewport();this.scrollTop=s.top,this.scrollLeft=s.left,this.viewportWidth=s.width,this.viewportHeight=s.height}getScrolledTopFromAbsoluteTop(p){return p-this.scrollTop}getVerticalOffsetForLineNumber(p,n){return this._viewLayout.getVerticalOffsetForLineNumber(p,n)}getVerticalOffsetAfterLineNumber(p,n){return this._viewLayout.getVerticalOffsetAfterLineNumber(p,n)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}e.RestrictedRenderingContext=c;class k extends c{constructor(p,n,s){super(p,n),this._renderingContextBrand=void 0,this._viewLines=s}linesVisibleRangesForRange(p,n){return this._viewLines.linesVisibleRangesForRange(p,n)}visibleRangeForPosition(p){return this._viewLines.visibleRangeForPosition(p)}}e.RenderingContext=k;class E{constructor(p,n,s,t){this.outsideRenderedLine=p,this.lineNumber=n,this.ranges=s,this.continuesOnNextLine=t}}e.LineVisibleRanges=E;class L{static from(p){const n=new Array(p.length);for(let s=0,t=p.length;s<t;s++){const i=p[s];n[s]=new L(i.left,i.width)}return n}constructor(p,n){this._horizontalRangeBrand=void 0,this.left=Math.round(p),this.width=Math.round(n)}toString(){return`[${this.left},${this.width}]`}}e.HorizontalRange=L;class y{constructor(p,n){this._floatHorizontalRangeBrand=void 0,this.left=p,this.width=n}toString(){return`[${this.left},${this.width}]`}static compare(p,n){return p.left-n.left}}e.FloatHorizontalRange=y;class f{constructor(p,n){this.outsideRenderedLine=p,this.originalLeft=n,this.left=Math.round(this.originalLeft)}}e.HorizontalPosition=f;class _{constructor(p,n){this.outsideRenderedLine=p,this.ranges=n}}e.VisibleRanges=_}),define(oe[556],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomReadingContext=void 0;class c{get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;const E=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=E.left,this._clientRectScale=E.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}constructor(E,L){this._domNode=E,this.endNode=L,this._didDomLayout=!1,this._clientRectDeltaLeft=0,this._clientRectScale=1,this._clientRectRead=!1}markDidDomLayout(){this._didDomLayout=!0}}e.DomReadingContext=c}),define(oe[557],re([1,0,166]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeUtil=void 0;class k{static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(L,y){L.selectNodeContents(y)}static _readClientRects(L,y,f,_,b){const p=this._createRange();try{return p.setStart(L,y),p.setEnd(f,_),p.getClientRects()}catch{return null}finally{this._detachRange(p,b)}}static _mergeAdjacentRanges(L){if(L.length===1)return L;L.sort(c.FloatHorizontalRange.compare);const y=[];let f=0,_=L[0];for(let b=1,p=L.length;b<p;b++){const n=L[b];_.left+_.width+.9>=n.left?_.width=Math.max(_.width,n.left+n.width-_.left):(y[f++]=_,_=n)}return y[f++]=_,y}static _createHorizontalRangesFromClientRects(L,y,f){if(!L||L.length===0)return null;const _=[];for(let b=0,p=L.length;b<p;b++){const n=L[b];_[b]=new c.FloatHorizontalRange(Math.max(0,(n.left-y)/f),n.width/f)}return this._mergeAdjacentRanges(_)}static readHorizontalRanges(L,y,f,_,b,p){const s=L.children.length-1;if(0>s)return null;if(y=Math.min(s,Math.max(0,y)),_=Math.min(s,Math.max(0,_)),y===_&&f===b&&f===0&&!L.children[y].firstChild){const g=L.children[y].getClientRects();return p.markDidDomLayout(),this._createHorizontalRangesFromClientRects(g,p.clientRectDeltaLeft,p.clientRectScale)}y!==_&&_>0&&b===0&&(_--,b=1073741824);let t=L.children[y].firstChild,i=L.children[_].firstChild;if((!t||!i)&&(!t&&f===0&&y>0&&(t=L.children[y-1].firstChild,f=1073741824),!i&&b===0&&_>0&&(i=L.children[_-1].firstChild,b=1073741824)),!t||!i)return null;f=Math.min(t.textContent.length,Math.max(0,f)),b=Math.min(i.textContent.length,Math.max(0,b));const o=this._readClientRects(t,f,i,b,p.endNode);return p.markDidDomLayout(),this._createHorizontalRangesFromClientRects(o,p.clientRectDeltaLeft,p.clientRectScale)}}e.RangeUtil=k}),define(oe[319],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCharIndex=e.allCharCodes=void 0,e.allCharCodes=(()=>{const k=[];for(let E=32;E<=126;E++)k.push(E);return k.push(65533),k})();const c=(k,E)=>(k-=32,k<0||k>96?E<=2?(k+96)%96:95:k);e.getCharIndex=c}),define(oe[558],re([1,0,319,192]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MinimapCharRenderer=void 0;class E{constructor(y,f){this.scale=f,this._minimapCharRendererBrand=void 0,this.charDataNormal=E.soften(y,12/15),this.charDataLight=E.soften(y,50/60)}static soften(y,f){const _=new Uint8ClampedArray(y.length);for(let b=0,p=y.length;b<p;b++)_[b]=(0,k.toUint8)(y[b]*f);return _}renderChar(y,f,_,b,p,n,s,t,i,o,g){const u=1*this.scale,l=2*this.scale,a=g?1:l;if(f+u>y.width||_+a>y.height){console.warn("bad render request outside image data");return}const r=o?this.charDataLight:this.charDataNormal,d=(0,c.getCharIndex)(b,i),m=y.width*4,h=s.r,v=s.g,C=s.b,w=p.r-h,S=p.g-v,D=p.b-C,I=Math.max(n,t),T=y.data;let M=d*u*l,A=_*m+f*4;for(let R=0;R<a;R++){let N=A;for(let O=0;O<u;O++){const x=r[M++]/255*(n/255);T[N++]=h+w*x,T[N++]=v+S*x,T[N++]=C+D*x,T[N++]=I}A+=m}}blockRenderChar(y,f,_,b,p,n,s,t){const i=1*this.scale,o=2*this.scale,g=t?1:o;if(f+i>y.width||_+g>y.height){console.warn("bad render request outside image data");return}const u=y.width*4,l=.5*(p/255),a=n.r,r=n.g,d=n.b,m=b.r-a,h=b.g-r,v=b.b-d,C=a+m*l,w=r+h*l,S=d+v*l,D=Math.max(p,s),I=y.data;let T=_*u+f*4;for(let M=0;M<g;M++){let A=T;for(let R=0;R<i;R++)I[A++]=C,I[A++]=w,I[A++]=S,I[A++]=D;T+=u}}}e.MinimapCharRenderer=E}),define(oe[559],re([1,0,127]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prebakedMiniMaps=void 0;const k={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},E=L=>{const y=new Uint8ClampedArray(L.length/2);for(let f=0;f<L.length;f+=2)y[f>>1]=k[L[f]]<<4|k[L[f+1]]&15;return y};e.prebakedMiniMaps={1:(0,c.createSingleCallFunction)(()=>E("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:(0,c.createSingleCallFunction)(()=>E("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))}}),define(oe[560],re([1,0,558,319,559,192]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MinimapCharRendererFactory=void 0;class y{static create(_,b){if(this.lastCreated&&_===this.lastCreated.scale&&b===this.lastFontFamily)return this.lastCreated;let p;return E.prebakedMiniMaps[_]?p=new c.MinimapCharRenderer(E.prebakedMiniMaps[_](),_):p=y.createFromSampleData(y.createSampleData(b).data,_),this.lastFontFamily=b,this.lastCreated=p,p}static createSampleData(_){const b=document.createElement("canvas"),p=b.getContext("2d");b.style.height="16px",b.height=16,b.width=96*10,b.style.width=96*10+"px",p.fillStyle="#ffffff",p.font=`bold 16px ${_}`,p.textBaseline="middle";let n=0;for(const s of k.allCharCodes)p.fillText(String.fromCharCode(s),n,16/2),n+=10;return p.getImageData(0,0,96*10,16)}static createFromSampleData(_,b){if(_.length!==61440)throw new Error("Unexpected source in MinimapCharRenderer");const n=y._downsample(_,b);return new c.MinimapCharRenderer(n,b)}static _downsampleChar(_,b,p,n,s){const t=1*s,i=2*s;let o=n,g=0;for(let u=0;u<i;u++){const l=u/i*16,a=(u+1)/i*16;for(let r=0;r<t;r++){const d=r/t*10,m=(r+1)/t*10;let h=0,v=0;for(let w=l;w<a;w++){const S=b+Math.floor(w)*3840,D=1-(w-Math.floor(w));for(let I=d;I<m;I++){const T=1-(I-Math.floor(I)),M=S+Math.floor(I)*4,A=T*D;v+=A,h+=_[M]*_[M+3]/255*A}}const C=h/v;g=Math.max(g,C),p[o++]=(0,L.toUint8)(C)}}return g}static _downsample(_,b){const p=2*b*1*b,n=p*96,s=new Uint8ClampedArray(n);let t=0,i=0,o=0;for(let g=0;g<96;g++)o=Math.max(o,this._downsampleChar(_,i,s,t,b)),t+=p,i+=10*4;if(o>0){const g=255/o;for(let u=0;u<n;u++)s[u]*=g}return s}}e.MinimapCharRendererFactory=y}),define(oe[561],re([1,0,5,8,2]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeEditorContributions=void 0;class L extends E.Disposable{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new E.DisposableMap),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(f,_,b){this._editor=f,this._instantiationService=b;for(const p of _){if(this._pending.has(p.id)){(0,k.onUnexpectedError)(new Error(`Cannot have two contributions with the same id ${p.id}`));continue}this._pending.set(p.id,p)}this._instantiateSome(0),this._register((0,c.runWhenWindowIdle)((0,c.getWindow)(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register((0,c.runWhenWindowIdle)((0,c.getWindow)(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register((0,c.runWhenWindowIdle)((0,c.getWindow)(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){const f={};for(const[_,b]of this._instances)typeof b.saveViewState=="function"&&(f[_]=b.saveViewState());return f}restoreViewState(f){for(const[_,b]of this._instances)typeof b.restoreViewState=="function"&&b.restoreViewState(f[_])}get(f){return this._instantiateById(f),this._instances.get(f)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return(0,c.runWhenWindowIdle)((0,c.getWindow)(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(f){if(this._finishedInstantiation[f])return;this._finishedInstantiation[f]=!0;const _=this._findPendingContributionsByInstantiation(f);for(const b of _)this._instantiateById(b.id)}_findPendingContributionsByInstantiation(f){const _=[];for(const[,b]of this._pending)b.instantiation===f&&_.push(b);return _}_instantiateById(f){const _=this._pending.get(f);if(_){if(this._pending.delete(f),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const b=this._instantiationService.createInstance(_.ctor,this._editor);this._instances.set(_.id,b),typeof b.restoreViewState=="function"&&_.instantiation!==0&&console.warn(`Editor contribution '${_.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(b){(0,k.onUnexpectedError)(b)}}}}e.CodeEditorContributions=L}),define(oe[320],re([1,0,164,2,21,65]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorSash=e.SashLayout=void 0;class y{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(b,p){this._options=b,this.dimensions=p,this.sashLeft=(0,L.derivedWithSetter)(this,n=>{const s=this._sashRatio.read(n)??this._options.splitViewDefaultRatio.read(n);return this._computeSashLeft(s,n)},(n,s)=>{const t=this.dimensions.width.get();this._sashRatio.set(n/t,s)}),this._sashRatio=(0,E.observableValue)(this,void 0)}_computeSashLeft(b,p){const n=this.dimensions.width.read(p),s=Math.floor(this._options.splitViewDefaultRatio.read(p)*n),t=this._options.enableSplitViewResizing.read(p)?Math.floor(b*n):s,i=100;return n<=i*2?s:t<i?i:t>n-i?n-i:t}}e.SashLayout=y;class f extends k.Disposable{constructor(b,p,n,s,t,i){super(),this._domNode=b,this._dimensions=p,this._enabled=n,this._boundarySashes=s,this.sashLeft=t,this._resetSash=i,this._sash=this._register(new c.Sash(this._domNode,{getVerticalSashTop:o=>0,getVerticalSashLeft:o=>this.sashLeft.get(),getVerticalSashHeight:o=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart(()=>{this._startSashPosition=this.sashLeft.get()})),this._register(this._sash.onDidChange(o=>{this.sashLeft.set(this._startSashPosition+(o.currentX-o.startX),void 0)})),this._register(this._sash.onDidEnd(()=>this._sash.layout())),this._register(this._sash.onDidReset(()=>this._resetSash())),this._register((0,E.autorun)(o=>{const g=this._boundarySashes.read(o);g&&(this._sash.orthogonalEndSash=g.bottom)})),this._register((0,E.autorun)(o=>{const g=this._enabled.read(o);this._sash.state=g?3:0,this.sashLeft.read(o),this._dimensions.height.read(o),this._sash.layout()}))}}e.DiffEditorSash=f}),define(oe[562],re([1,0,6,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DelegatingEditor=void 0;class E extends k.Disposable{constructor(){super(...arguments),this._id=++E.idCounter,this._onDidDispose=this._register(new c.Emitter),this.onDidDispose=this._onDidDispose.event}static{this.idCounter=0}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(y){return this._targetEditor.getVisibleColumnFromPosition(y)}getPosition(){return this._targetEditor.getPosition()}setPosition(y,f="api"){this._targetEditor.setPosition(y,f)}revealLine(y,f=0){this._targetEditor.revealLine(y,f)}revealLineInCenter(y,f=0){this._targetEditor.revealLineInCenter(y,f)}revealLineInCenterIfOutsideViewport(y,f=0){this._targetEditor.revealLineInCenterIfOutsideViewport(y,f)}revealLineNearTop(y,f=0){this._targetEditor.revealLineNearTop(y,f)}revealPosition(y,f=0){this._targetEditor.revealPosition(y,f)}revealPositionInCenter(y,f=0){this._targetEditor.revealPositionInCenter(y,f)}revealPositionInCenterIfOutsideViewport(y,f=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(y,f)}revealPositionNearTop(y,f=0){this._targetEditor.revealPositionNearTop(y,f)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(y,f="api"){this._targetEditor.setSelection(y,f)}setSelections(y,f="api"){this._targetEditor.setSelections(y,f)}revealLines(y,f,_=0){this._targetEditor.revealLines(y,f,_)}revealLinesInCenter(y,f,_=0){this._targetEditor.revealLinesInCenter(y,f,_)}revealLinesInCenterIfOutsideViewport(y,f,_=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(y,f,_)}revealLinesNearTop(y,f,_=0){this._targetEditor.revealLinesNearTop(y,f,_)}revealRange(y,f=0,_=!1,b=!0){this._targetEditor.revealRange(y,f,_,b)}revealRangeInCenter(y,f=0){this._targetEditor.revealRangeInCenter(y,f)}revealRangeInCenterIfOutsideViewport(y,f=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(y,f)}revealRangeNearTop(y,f=0){this._targetEditor.revealRangeNearTop(y,f)}revealRangeNearTopIfOutsideViewport(y,f=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(y,f)}revealRangeAtTop(y,f=0){this._targetEditor.revealRangeAtTop(y,f)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(y,f,_){this._targetEditor.trigger(y,f,_)}createDecorationsCollection(y){return this._targetEditor.createDecorationsCollection(y)}changeDecorations(y){return this._targetEditor.changeDecorations(y)}}e.DelegatingEditor=E}),define(oe[563],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectPool=void 0;class c{constructor(E){this._create=E,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(E){let L;if(this._unused.size===0)L=this._create(E),this._itemData.set(L,E);else{const y=[...this._unused.values()];L=y.find(f=>this._itemData.get(f).getId()===E.getId())??y[0],this._unused.delete(L),this._itemData.set(L,E),L.setData(E)}return this._used.add(L),{object:L,dispose:()=>{this._used.delete(L),this._unused.size>5?L.dispose():this._unused.add(L)}}}dispose(){for(const E of this._used)E.dispose();for(const E of this._unused)E.dispose();this._used.clear(),this._unused.clear()}}e.ObjectPool=c}),define(oe[321],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diffEditorDefaultOptions=void 0,e.diffEditorDefaultOptions={enableSplitViewResizing:!0,splitViewDefaultRatio:.5,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1}}),define(oe[167],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorZoom=void 0,e.EditorZoom=new class{constructor(){this._zoomLevel=0,this._onDidChangeZoomLevel=new c.Emitter,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event}getZoomLevel(){return this._zoomLevel}setZoomLevel(k){k=Math.min(Math.max(-5,k),20),this._zoomLevel!==k&&(this._zoomLevel=k,this._onDidChangeZoomLevel.fire(this._zoomLevel))}}}),define(oe[143],re([1,0,192]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterSet=e.CharacterClassifier=void 0;class k{constructor(y){const f=(0,c.toUint8)(y);this._defaultValue=f,this._asciiMap=k._createAsciiMap(f),this._map=new Map}static _createAsciiMap(y){const f=new Uint8Array(256);return f.fill(y),f}set(y,f){const _=(0,c.toUint8)(f);y>=0&&y<256?this._asciiMap[y]=_:this._map.set(y,_)}get(y){return y>=0&&y<256?this._asciiMap[y]:this._map.get(y)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}e.CharacterClassifier=k;class E{constructor(){this._actual=new k(0)}add(y){this._actual.set(y,1)}has(y){return this._actual.get(y)===1}clear(){return this._actual.clear()}}e.CharacterSet=E}),define(oe[93],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorColumns=void 0;class k{static _nextVisibleColumn(L,y,f){return L===9?k.nextRenderTabStop(y,f):c.isFullWidthCharacter(L)||c.isEmojiImprecise(L)?y+2:y+1}static visibleColumnFromColumn(L,y,f){const _=Math.min(y-1,L.length),b=L.substring(0,_),p=new c.GraphemeIterator(b);let n=0;for(;!p.eol();){const s=c.getNextCodePoint(b,_,p.offset);p.nextGraphemeLength(),n=this._nextVisibleColumn(s,n,f)}return n}static columnFromVisibleColumn(L,y,f){if(y<=0)return 1;const _=L.length,b=new c.GraphemeIterator(L);let p=0,n=1;for(;!b.eol();){const s=c.getNextCodePoint(L,_,b.offset);b.nextGraphemeLength();const t=this._nextVisibleColumn(s,p,f),i=b.offset+1;if(t>=y){const o=y-p;return t-y<o?i:n}p=t,n=i}return _+1}static nextRenderTabStop(L,y){return L+y-L%y}static nextIndentTabStop(L,y){return L+y-L%y}static prevRenderTabStop(L,y){return Math.max(0,L-1-(L-1)%y)}static prevIndentTabStop(L,y){return Math.max(0,L-1-(L-1)%y)}}e.CursorColumns=k}),define(oe[144],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=c;function c(k){let E=0,L=0,y=0,f=0;for(let _=0,b=k.length;_<b;_++){const p=k.charCodeAt(_);p===13?(E===0&&(L=_),E++,_+1<b&&k.charCodeAt(_+1)===10?(f|=2,_++):f|=3,y=_+1):p===10&&(f|=1,E===0&&(L=_),E++,y=_+1)}return E===0&&(L=k.length),[E,L,k.length-y,f]}}),define(oe[240],re([1,0,11,93]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeIndentation=L;function E(y,f,_){let b=0;for(let n=0;n<y.length;n++)y.charAt(n)==="	"?b=k.CursorColumns.nextIndentTabStop(b,f):b++;let p="";if(!_){const n=Math.floor(b/f);b=b%f;for(let s=0;s<n;s++)p+="	"}for(let n=0;n<b;n++)p+=" ";return p}function L(y,f,_){let b=c.firstNonWhitespaceIndex(y);return b===-1&&(b=y.length),E(y.substring(0,b),f,_)+y.substring(b)}}),define(oe[69],re([1,0,8]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OffsetRangeSet=e.OffsetRange=void 0;class k{static addRange(y,f){let _=0;for(;_<f.length&&f[_].endExclusive<y.start;)_++;let b=_;for(;b<f.length&&f[b].start<=y.endExclusive;)b++;if(_===b)f.splice(_,0,y);else{const p=Math.min(y.start,f[_].start),n=Math.max(y.endExclusive,f[b-1].endExclusive);f.splice(_,b-_,new k(p,n))}}static tryCreate(y,f){if(!(y>f))return new k(y,f)}static ofLength(y){return new k(0,y)}static ofStartAndLength(y,f){return new k(y,y+f)}constructor(y,f){if(this.start=y,this.endExclusive=f,y>f)throw new c.BugIndicatingError(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(y){return new k(this.start+y,this.endExclusive+y)}deltaStart(y){return new k(this.start+y,this.endExclusive)}deltaEnd(y){return new k(this.start,this.endExclusive+y)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}contains(y){return this.start<=y&&y<this.endExclusive}join(y){return new k(Math.min(this.start,y.start),Math.max(this.endExclusive,y.endExclusive))}intersect(y){const f=Math.max(this.start,y.start),_=Math.min(this.endExclusive,y.endExclusive);if(f<=_)return new k(f,_)}intersects(y){const f=Math.max(this.start,y.start),_=Math.min(this.endExclusive,y.endExclusive);return f<_}isBefore(y){return this.endExclusive<=y.start}isAfter(y){return this.start>=y.endExclusive}slice(y){return y.slice(this.start,this.endExclusive)}substring(y){return y.substring(this.start,this.endExclusive)}clip(y){if(this.isEmpty)throw new c.BugIndicatingError(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,y))}clipCyclic(y){if(this.isEmpty)throw new c.BugIndicatingError(`Invalid clipping range: ${this.toString()}`);return y<this.start?this.endExclusive-(this.start-y)%this.length:y>=this.endExclusive?this.start+(y-this.start)%this.length:y}forEach(y){for(let f=this.start;f<this.endExclusive;f++)y(f)}}e.OffsetRange=k;class E{constructor(){this._sortedRanges=[]}addRange(y){let f=0;for(;f<this._sortedRanges.length&&this._sortedRanges[f].endExclusive<y.start;)f++;let _=f;for(;_<this._sortedRanges.length&&this._sortedRanges[_].start<=y.endExclusive;)_++;if(f===_)this._sortedRanges.splice(f,0,y);else{const b=Math.min(y.start,this._sortedRanges[f].start),p=Math.max(y.endExclusive,this._sortedRanges[_-1].endExclusive);this._sortedRanges.splice(f,_-f,new k(b,p))}}toString(){return this._sortedRanges.map(y=>y.toString()).join(", ")}intersectsStrict(y){let f=0;for(;f<this._sortedRanges.length&&this._sortedRanges[f].endExclusive<=y.start;)f++;return f<this._sortedRanges.length&&this._sortedRanges[f].start<y.endExclusive}intersectWithRange(y){const f=new E;for(const _ of this._sortedRanges){const b=_.intersect(y);b&&f.addRange(b)}return f}intersectWithRangeLength(y){return this.intersectWithRange(y).length}get length(){return this._sortedRanges.reduce((y,f)=>y+f.length,0)}}e.OffsetRangeSet=E}),define(oe[9],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Position=void 0;class c{constructor(E,L){this.lineNumber=E,this.column=L}with(E=this.lineNumber,L=this.column){return E===this.lineNumber&&L===this.column?this:new c(E,L)}delta(E=0,L=0){return this.with(this.lineNumber+E,this.column+L)}equals(E){return c.equals(this,E)}static equals(E,L){return!E&&!L?!0:!!E&&!!L&&E.lineNumber===L.lineNumber&&E.column===L.column}isBefore(E){return c.isBefore(this,E)}static isBefore(E,L){return E.lineNumber<L.lineNumber?!0:L.lineNumber<E.lineNumber?!1:E.column<L.column}isBeforeOrEqual(E){return c.isBeforeOrEqual(this,E)}static isBeforeOrEqual(E,L){return E.lineNumber<L.lineNumber?!0:L.lineNumber<E.lineNumber?!1:E.column<=L.column}static compare(E,L){const y=E.lineNumber|0,f=L.lineNumber|0;if(y===f){const _=E.column|0,b=L.column|0;return _-b}return y-f}clone(){return new c(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(E){return new c(E.lineNumber,E.column)}static isIPosition(E){return E&&typeof E.lineNumber=="number"&&typeof E.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}e.Position=c}),define(oe[322],re([1,0,9]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewUserInputEvents=void 0;class k{constructor(L){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=L}emitKeyDown(L){this.onKeyDown?.(L)}emitKeyUp(L){this.onKeyUp?.(L)}emitContextMenu(L){this.onContextMenu?.(this._convertViewToModelMouseEvent(L))}emitMouseMove(L){this.onMouseMove?.(this._convertViewToModelMouseEvent(L))}emitMouseLeave(L){this.onMouseLeave?.(this._convertViewToModelMouseEvent(L))}emitMouseDown(L){this.onMouseDown?.(this._convertViewToModelMouseEvent(L))}emitMouseUp(L){this.onMouseUp?.(this._convertViewToModelMouseEvent(L))}emitMouseDrag(L){this.onMouseDrag?.(this._convertViewToModelMouseEvent(L))}emitMouseDrop(L){this.onMouseDrop?.(this._convertViewToModelMouseEvent(L))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(L){this.onMouseWheel?.(L)}_convertViewToModelMouseEvent(L){return L.target?{event:L.event,target:this._convertViewToModelMouseTarget(L.target)}:L}_convertViewToModelMouseTarget(L){return k.convertViewToModelMouseTarget(L,this._coordinatesConverter)}static convertViewToModelMouseTarget(L,y){const f={...L};return f.position&&(f.position=y.convertViewPositionToModelPosition(f.position)),f.range&&(f.range=y.convertViewRangeToModelRange(f.range)),(f.type===5||f.type===8)&&(f.detail=this.convertViewToModelViewZoneData(f.detail,y)),f}static convertViewToModelViewZoneData(L,y){return{viewZoneId:L.viewZoneId,positionBefore:L.positionBefore?y.convertViewPositionToModelPosition(L.positionBefore):L.positionBefore,positionAfter:L.positionAfter?y.convertViewPositionToModelPosition(L.positionAfter):L.positionAfter,position:y.convertViewPositionToModelPosition(L.position),afterLineNumber:y.convertViewPositionToModelPosition(new c.Position(L.afterLineNumber,1)).lineNumber}}}e.ViewUserInputEvents=k}),define(oe[4],re([1,0,9]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Range=void 0;class k{constructor(L,y,f,_){L>f||L===f&&y>_?(this.startLineNumber=f,this.startColumn=_,this.endLineNumber=L,this.endColumn=y):(this.startLineNumber=L,this.startColumn=y,this.endLineNumber=f,this.endColumn=_)}isEmpty(){return k.isEmpty(this)}static isEmpty(L){return L.startLineNumber===L.endLineNumber&&L.startColumn===L.endColumn}containsPosition(L){return k.containsPosition(this,L)}static containsPosition(L,y){return!(y.lineNumber<L.startLineNumber||y.lineNumber>L.endLineNumber||y.lineNumber===L.startLineNumber&&y.column<L.startColumn||y.lineNumber===L.endLineNumber&&y.column>L.endColumn)}static strictContainsPosition(L,y){return!(y.lineNumber<L.startLineNumber||y.lineNumber>L.endLineNumber||y.lineNumber===L.startLineNumber&&y.column<=L.startColumn||y.lineNumber===L.endLineNumber&&y.column>=L.endColumn)}containsRange(L){return k.containsRange(this,L)}static containsRange(L,y){return!(y.startLineNumber<L.startLineNumber||y.endLineNumber<L.startLineNumber||y.startLineNumber>L.endLineNumber||y.endLineNumber>L.endLineNumber||y.startLineNumber===L.startLineNumber&&y.startColumn<L.startColumn||y.endLineNumber===L.endLineNumber&&y.endColumn>L.endColumn)}strictContainsRange(L){return k.strictContainsRange(this,L)}static strictContainsRange(L,y){return!(y.startLineNumber<L.startLineNumber||y.endLineNumber<L.startLineNumber||y.startLineNumber>L.endLineNumber||y.endLineNumber>L.endLineNumber||y.startLineNumber===L.startLineNumber&&y.startColumn<=L.startColumn||y.endLineNumber===L.endLineNumber&&y.endColumn>=L.endColumn)}plusRange(L){return k.plusRange(this,L)}static plusRange(L,y){let f,_,b,p;return y.startLineNumber<L.startLineNumber?(f=y.startLineNumber,_=y.startColumn):y.startLineNumber===L.startLineNumber?(f=y.startLineNumber,_=Math.min(y.startColumn,L.startColumn)):(f=L.startLineNumber,_=L.startColumn),y.endLineNumber>L.endLineNumber?(b=y.endLineNumber,p=y.endColumn):y.endLineNumber===L.endLineNumber?(b=y.endLineNumber,p=Math.max(y.endColumn,L.endColumn)):(b=L.endLineNumber,p=L.endColumn),new k(f,_,b,p)}intersectRanges(L){return k.intersectRanges(this,L)}static intersectRanges(L,y){let f=L.startLineNumber,_=L.startColumn,b=L.endLineNumber,p=L.endColumn;const n=y.startLineNumber,s=y.startColumn,t=y.endLineNumber,i=y.endColumn;return f<n?(f=n,_=s):f===n&&(_=Math.max(_,s)),b>t?(b=t,p=i):b===t&&(p=Math.min(p,i)),f>b||f===b&&_>p?null:new k(f,_,b,p)}equalsRange(L){return k.equalsRange(this,L)}static equalsRange(L,y){return!L&&!y?!0:!!L&&!!y&&L.startLineNumber===y.startLineNumber&&L.startColumn===y.startColumn&&L.endLineNumber===y.endLineNumber&&L.endColumn===y.endColumn}getEndPosition(){return k.getEndPosition(this)}static getEndPosition(L){return new c.Position(L.endLineNumber,L.endColumn)}getStartPosition(){return k.getStartPosition(this)}static getStartPosition(L){return new c.Position(L.startLineNumber,L.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(L,y){return new k(this.startLineNumber,this.startColumn,L,y)}setStartPosition(L,y){return new k(L,y,this.endLineNumber,this.endColumn)}collapseToStart(){return k.collapseToStart(this)}static collapseToStart(L){return new k(L.startLineNumber,L.startColumn,L.startLineNumber,L.startColumn)}collapseToEnd(){return k.collapseToEnd(this)}static collapseToEnd(L){return new k(L.endLineNumber,L.endColumn,L.endLineNumber,L.endColumn)}delta(L){return new k(this.startLineNumber+L,this.startColumn,this.endLineNumber+L,this.endColumn)}static fromPositions(L,y=L){return new k(L.lineNumber,L.column,y.lineNumber,y.column)}static lift(L){return L?new k(L.startLineNumber,L.startColumn,L.endLineNumber,L.endColumn):null}static isIRange(L){return L&&typeof L.startLineNumber=="number"&&typeof L.startColumn=="number"&&typeof L.endLineNumber=="number"&&typeof L.endColumn=="number"}static areIntersectingOrTouching(L,y){return!(L.endLineNumber<y.startLineNumber||L.endLineNumber===y.startLineNumber&&L.endColumn<y.startColumn||y.endLineNumber<L.startLineNumber||y.endLineNumber===L.startLineNumber&&y.endColumn<L.startColumn)}static areIntersecting(L,y){return!(L.endLineNumber<y.startLineNumber||L.endLineNumber===y.startLineNumber&&L.endColumn<=y.startColumn||y.endLineNumber<L.startLineNumber||y.endLineNumber===L.startLineNumber&&y.endColumn<=L.startColumn)}static compareRangesUsingStarts(L,y){if(L&&y){const b=L.startLineNumber|0,p=y.startLineNumber|0;if(b===p){const n=L.startColumn|0,s=y.startColumn|0;if(n===s){const t=L.endLineNumber|0,i=y.endLineNumber|0;if(t===i){const o=L.endColumn|0,g=y.endColumn|0;return o-g}return t-i}return n-s}return b-p}return(L?1:0)-(y?1:0)}static compareRangesUsingEnds(L,y){return L.endLineNumber===y.endLineNumber?L.endColumn===y.endColumn?L.startLineNumber===y.startLineNumber?L.startColumn-y.startColumn:L.startLineNumber-y.startLineNumber:L.endColumn-y.endColumn:L.endLineNumber-y.endLineNumber}static spansMultipleLines(L){return L.endLineNumber>L.startLineNumber}toJSON(){return this}}e.Range=k}),define(oe[323],re([1,0,11,4]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PagedScreenReaderStrategy=e.TextAreaState=e._debugComposition=void 0,e._debugComposition=!1;class E{static{this.EMPTY=new E("",0,0,null,void 0)}constructor(f,_,b,p,n){this.value=f,this.selectionStart=_,this.selectionEnd=b,this.selection=p,this.newlineCountBeforeSelection=n}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(f,_){const b=f.getValue(),p=f.getSelectionStart(),n=f.getSelectionEnd();let s;if(_){const t=b.substring(0,p),i=_.value.substring(0,_.selectionStart);t===i&&(s=_.newlineCountBeforeSelection)}return new E(b,p,n,null,s)}collapseSelection(){return this.selectionStart===this.value.length?this:new E(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(f,_,b){e._debugComposition&&console.log(`writeToTextArea ${f}: ${this.toString()}`),_.setValue(f,this.value),b&&_.setSelectionRange(f,this.selectionStart,this.selectionEnd)}deduceEditorPosition(f){if(f<=this.selectionStart){const p=this.value.substring(f,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,p,-1)}if(f>=this.selectionEnd){const p=this.value.substring(this.selectionEnd,f);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,p,1)}const _=this.value.substring(this.selectionStart,f);if(_.indexOf("\u2026")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,_,1);const b=this.value.substring(f,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,b,-1)}_finishDeduceEditorPosition(f,_,b){let p=0,n=-1;for(;(n=_.indexOf(`
`,n+1))!==-1;)p++;return[f,b*_.length,p]}static deduceInput(f,_,b){if(!f)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};e._debugComposition&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${f.toString()}`),console.log(`CURRENT STATE: ${_.toString()}`));const p=Math.min(c.commonPrefixLength(f.value,_.value),f.selectionStart,_.selectionStart),n=Math.min(c.commonSuffixLength(f.value,_.value),f.value.length-f.selectionEnd,_.value.length-_.selectionEnd),s=f.value.substring(p,f.value.length-n),t=_.value.substring(p,_.value.length-n),i=f.selectionStart-p,o=f.selectionEnd-p,g=_.selectionStart-p,u=_.selectionEnd-p;if(e._debugComposition&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${s}>, selectionStart: ${i}, selectionEnd: ${o}`),console.log(`AFTER DIFFING CURRENT STATE: <${t}>, selectionStart: ${g}, selectionEnd: ${u}`)),g===u){const a=f.selectionStart-p;return e._debugComposition&&console.log(`REMOVE PREVIOUS: ${a} chars`),{text:t,replacePrevCharCnt:a,replaceNextCharCnt:0,positionDelta:0}}const l=o-i;return{text:t,replacePrevCharCnt:l,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(f,_){if(!f)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(e._debugComposition&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${f.toString()}`),console.log(`CURRENT STATE: ${_.toString()}`)),f.value===_.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:_.selectionEnd-f.selectionEnd};const b=Math.min(c.commonPrefixLength(f.value,_.value),f.selectionEnd),p=Math.min(c.commonSuffixLength(f.value,_.value),f.value.length-f.selectionEnd),n=f.value.substring(b,f.value.length-p),s=_.value.substring(b,_.value.length-p),t=f.selectionStart-b,i=f.selectionEnd-b,o=_.selectionStart-b,g=_.selectionEnd-b;return e._debugComposition&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${n}>, selectionStart: ${t}, selectionEnd: ${i}`),console.log(`AFTER DIFFING CURRENT STATE: <${s}>, selectionStart: ${o}, selectionEnd: ${g}`)),{text:s,replacePrevCharCnt:i,replaceNextCharCnt:n.length-i,positionDelta:g-s.length}}}e.TextAreaState=E;class L{static _getPageOfLine(f,_){return Math.floor((f-1)/_)}static _getRangeForPage(f,_){const b=f*_,p=b+1,n=b+_;return new k.Range(p,1,n+1,1)}static fromEditorSelection(f,_,b,p){const s=L._getPageOfLine(_.startLineNumber,b),t=L._getRangeForPage(s,b),i=L._getPageOfLine(_.endLineNumber,b),o=L._getRangeForPage(i,b);let g=t.intersectRanges(new k.Range(1,1,_.startLineNumber,_.startColumn));if(p&&f.getValueLengthInRange(g,1)>500){const h=f.modifyPosition(g.getEndPosition(),-500);g=k.Range.fromPositions(h,g.getEndPosition())}const u=f.getValueInRange(g,1),l=f.getLineCount(),a=f.getLineMaxColumn(l);let r=o.intersectRanges(new k.Range(_.endLineNumber,_.endColumn,l,a));if(p&&f.getValueLengthInRange(r,1)>500){const h=f.modifyPosition(r.getStartPosition(),500);r=k.Range.fromPositions(r.getStartPosition(),h)}const d=f.getValueInRange(r,1);let m;if(s===i||s+1===i)m=f.getValueInRange(_,1);else{const h=t.intersectRanges(_),v=o.intersectRanges(_);m=f.getValueInRange(h,1)+"\u2026"+f.getValueInRange(v,1)}return p&&m.length>2*500&&(m=m.substring(0,500)+"\u2026"+m.substring(m.length-500,m.length)),new E(u+m+d,u.length,u.length+m.length,_,g.endLineNumber-g.startLineNumber)}}e.PagedScreenReaderStrategy=L}),define(oe[76],re([1,0,4]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditOperation=void 0;class k{static insert(L,y){return{range:new c.Range(L.lineNumber,L.column,L.lineNumber,L.column),text:y,forceMoveMarkers:!0}}static delete(L){return{range:L,text:null}}static replace(L,y){return{range:L,text:y}}static replaceMove(L,y){return{range:L,text:y,forceMoveMarkers:!0}}}e.EditOperation=k}),define(oe[564],re([1,0,11,76,4]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TrimTrailingWhitespaceCommand=void 0,e.trimTrailingWhitespace=y;class L{constructor(_,b,p){this._selection=_,this._cursors=b,this._selectionId=null,this._trimInRegexesAndStrings=p}getEditOperations(_,b){const p=y(_,this._cursors,this._trimInRegexesAndStrings);for(let n=0,s=p.length;n<s;n++){const t=p[n];b.addEditOperation(t.range,t.text)}this._selectionId=b.trackSelection(this._selection)}computeCursorState(_,b){return b.getTrackedSelection(this._selectionId)}}e.TrimTrailingWhitespaceCommand=L;function y(f,_,b){_.sort((i,o)=>i.lineNumber===o.lineNumber?i.column-o.column:i.lineNumber-o.lineNumber);for(let i=_.length-2;i>=0;i--)_[i].lineNumber===_[i+1].lineNumber&&_.splice(i,1);const p=[];let n=0,s=0;const t=_.length;for(let i=1,o=f.getLineCount();i<=o;i++){const g=f.getLineContent(i),u=g.length+1;let l=0;if(s<t&&_[s].lineNumber===i&&(l=_[s].column,s++,l===u)||g.length===0)continue;const a=c.lastNonWhitespaceIndex(g);let r=0;if(a===-1)r=1;else if(a!==g.length-1)r=a+2;else continue;if(!b){if(!f.tokenization.hasAccurateTokensForLine(i))continue;const d=f.tokenization.getLineTokens(i),m=d.getStandardTokenType(d.findTokenIndexAtOffset(r));if(m===2||m===3)continue}r=Math.max(l,r),p[n++]=k.EditOperation.delete(new E.Range(i,r,i,u))}return p}}),define(oe[56],re([1,0,8,69,4,67]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineRangeSet=e.LineRange=void 0;class y{static fromRangeInclusive(b){return new y(b.startLineNumber,b.endLineNumber+1)}static joinMany(b){if(b.length===0)return[];let p=new f(b[0].slice());for(let n=1;n<b.length;n++)p=p.getUnion(new f(b[n].slice()));return p.ranges}static join(b){if(b.length===0)throw new c.BugIndicatingError("lineRanges cannot be empty");let p=b[0].startLineNumber,n=b[0].endLineNumberExclusive;for(let s=1;s<b.length;s++)p=Math.min(p,b[s].startLineNumber),n=Math.max(n,b[s].endLineNumberExclusive);return new y(p,n)}static ofLength(b,p){return new y(b,b+p)}static deserialize(b){return new y(b[0],b[1])}constructor(b,p){if(b>p)throw new c.BugIndicatingError(`startLineNumber ${b} cannot be after endLineNumberExclusive ${p}`);this.startLineNumber=b,this.endLineNumberExclusive=p}contains(b){return this.startLineNumber<=b&&b<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(b){return new y(this.startLineNumber+b,this.endLineNumberExclusive+b)}deltaLength(b){return new y(this.startLineNumber,this.endLineNumberExclusive+b)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(b){return new y(Math.min(this.startLineNumber,b.startLineNumber),Math.max(this.endLineNumberExclusive,b.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(b){const p=Math.max(this.startLineNumber,b.startLineNumber),n=Math.min(this.endLineNumberExclusive,b.endLineNumberExclusive);if(p<=n)return new y(p,n)}intersectsStrict(b){return this.startLineNumber<b.endLineNumberExclusive&&b.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(b){return this.startLineNumber<=b.endLineNumberExclusive&&b.startLineNumber<=this.endLineNumberExclusive}equals(b){return this.startLineNumber===b.startLineNumber&&this.endLineNumberExclusive===b.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new E.Range(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new E.Range(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(b){const p=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)p.push(b(n));return p}forEach(b){for(let p=this.startLineNumber;p<this.endLineNumberExclusive;p++)b(p)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(b){return this.startLineNumber<=b&&b<this.endLineNumberExclusive}toOffsetRange(){return new k.OffsetRange(this.startLineNumber-1,this.endLineNumberExclusive-1)}}e.LineRange=y;class f{constructor(b=[]){this._normalizedRanges=b}get ranges(){return this._normalizedRanges}addRange(b){if(b.length===0)return;const p=(0,L.findFirstIdxMonotonousOrArrLen)(this._normalizedRanges,s=>s.endLineNumberExclusive>=b.startLineNumber),n=(0,L.findLastIdxMonotonous)(this._normalizedRanges,s=>s.startLineNumber<=b.endLineNumberExclusive)+1;if(p===n)this._normalizedRanges.splice(p,0,b);else if(p===n-1){const s=this._normalizedRanges[p];this._normalizedRanges[p]=s.join(b)}else{const s=this._normalizedRanges[p].join(this._normalizedRanges[n-1]).join(b);this._normalizedRanges.splice(p,n-p,s)}}contains(b){const p=(0,L.findLastMonotonous)(this._normalizedRanges,n=>n.startLineNumber<=b);return!!p&&p.endLineNumberExclusive>b}intersects(b){const p=(0,L.findLastMonotonous)(this._normalizedRanges,n=>n.startLineNumber<b.endLineNumberExclusive);return!!p&&p.endLineNumberExclusive>b.startLineNumber}getUnion(b){if(this._normalizedRanges.length===0)return b;if(b._normalizedRanges.length===0)return this;const p=[];let n=0,s=0,t=null;for(;n<this._normalizedRanges.length||s<b._normalizedRanges.length;){let i=null;if(n<this._normalizedRanges.length&&s<b._normalizedRanges.length){const o=this._normalizedRanges[n],g=b._normalizedRanges[s];o.startLineNumber<g.startLineNumber?(i=o,n++):(i=g,s++)}else n<this._normalizedRanges.length?(i=this._normalizedRanges[n],n++):(i=b._normalizedRanges[s],s++);t===null?t=i:t.endLineNumberExclusive>=i.startLineNumber?t=new y(t.startLineNumber,Math.max(t.endLineNumberExclusive,i.endLineNumberExclusive)):(p.push(t),t=i)}return t!==null&&p.push(t),new f(p)}subtractFrom(b){const p=(0,L.findFirstIdxMonotonousOrArrLen)(this._normalizedRanges,i=>i.endLineNumberExclusive>=b.startLineNumber),n=(0,L.findLastIdxMonotonous)(this._normalizedRanges,i=>i.startLineNumber<=b.endLineNumberExclusive)+1;if(p===n)return new f([b]);const s=[];let t=b.startLineNumber;for(let i=p;i<n;i++){const o=this._normalizedRanges[i];o.startLineNumber>t&&s.push(new y(t,o.startLineNumber)),t=o.endLineNumberExclusive}return t<b.endLineNumberExclusive&&s.push(new y(t,b.endLineNumberExclusive)),new f(s)}toString(){return this._normalizedRanges.map(b=>b.toString()).join(", ")}getIntersection(b){const p=[];let n=0,s=0;for(;n<this._normalizedRanges.length&&s<b._normalizedRanges.length;){const t=this._normalizedRanges[n],i=b._normalizedRanges[s],o=t.intersect(i);o&&!o.isEmpty&&p.push(o),t.endLineNumberExclusive<i.endLineNumberExclusive?n++:s++}return new f(p)}getWithDelta(b){return new f(this._normalizedRanges.map(p=>p.delta(b)))}}e.LineRangeSet=f}),define(oe[565],re([1,0,5,2,21,56,69]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorGutter=void 0;class f extends k.Disposable{constructor(p,n,s){super(),this._editor=p,this._domNode=n,this.itemProvider=s,this.scrollTop=(0,E.observableFromEvent)(this,this._editor.onDidScrollChange,o=>this._editor.getScrollTop()),this.isScrollTopZero=this.scrollTop.map(o=>o===0),this.modelAttached=(0,E.observableFromEvent)(this,this._editor.onDidChangeModel,o=>this._editor.hasModel()),this.editorOnDidChangeViewZones=(0,E.observableSignalFromEvent)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,E.observableSignalFromEvent)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,E.observableSignal)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const t=this._domNode.appendChild((0,c.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),i=new ResizeObserver(()=>{(0,E.transaction)(o=>{this.domNodeSizeChanged.trigger(o)})});i.observe(this._domNode),this._register((0,k.toDisposable)(()=>i.disconnect())),this._register((0,E.autorun)(o=>{t.className=this.isScrollTopZero.read(o)?"":"scroll-decoration"})),this._register((0,E.autorun)(o=>this.render(o)))}dispose(){super.dispose(),(0,c.reset)(this._domNode)}render(p){if(!this.modelAttached.read(p))return;this.domNodeSizeChanged.read(p),this.editorOnDidChangeViewZones.read(p),this.editorOnDidContentSizeChange.read(p);const n=this.scrollTop.read(p),s=this._editor.getVisibleRanges(),t=new Set(this.views.keys()),i=y.OffsetRange.ofStartAndLength(0,this._domNode.clientHeight);if(!i.isEmpty)for(const o of s){const g=new L.LineRange(o.startLineNumber,o.endLineNumber+1),u=this.itemProvider.getIntersectingGutterItems(g,p);(0,E.transaction)(l=>{for(const a of u){if(!a.range.intersect(g))continue;t.delete(a.id);let r=this.views.get(a.id);if(r)r.item.set(a,l);else{const v=document.createElement("div");this._domNode.appendChild(v);const C=(0,E.observableValue)("item",a),w=this.itemProvider.createView(C,v);r=new _(C,w,v),this.views.set(a.id,r)}const d=a.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(a.range.startLineNumber,!0)-n:this._editor.getBottomForLineNumber(a.range.startLineNumber-1,!1)-n,h=(a.range.isEmpty?d:this._editor.getBottomForLineNumber(a.range.endLineNumberExclusive-1,!0)-n)-d;r.domNode.style.top=`${d}px`,r.domNode.style.height=`${h}px`,r.gutterItemView.layout(y.OffsetRange.ofStartAndLength(d,h),i)}})}for(const o of t){const g=this.views.get(o);g.gutterItemView.dispose(),g.domNode.remove(),this.views.delete(o)}}}e.EditorGutter=f;class _{constructor(p,n,s){this.item=p,this.gutterItemView=n,this.domNode=s}}}),define(oe[324],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RGBA8=void 0;class c{static{this.Empty=new c(0,0,0,0)}constructor(E,L,y,f){this._rgba8Brand=void 0,this.r=c._clamp(E),this.g=c._clamp(L),this.b=c._clamp(y),this.a=c._clamp(f)}equals(E){return this.r===E.r&&this.g===E.g&&this.b===E.b&&this.a===E.a}static _clamp(E){return E<0?0:E>255?255:E|0}}e.RGBA8=c}),define(oe[23],re([1,0,9,4]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Selection=void 0;class E extends k.Range{constructor(y,f,_,b){super(y,f,_,b),this.selectionStartLineNumber=y,this.selectionStartColumn=f,this.positionLineNumber=_,this.positionColumn=b}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(y){return E.selectionsEqual(this,y)}static selectionsEqual(y,f){return y.selectionStartLineNumber===f.selectionStartLineNumber&&y.selectionStartColumn===f.selectionStartColumn&&y.positionLineNumber===f.positionLineNumber&&y.positionColumn===f.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(y,f){return this.getDirection()===0?new E(this.startLineNumber,this.startColumn,y,f):new E(y,f,this.startLineNumber,this.startColumn)}getPosition(){return new c.Position(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new c.Position(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(y,f){return this.getDirection()===0?new E(y,f,this.endLineNumber,this.endColumn):new E(this.endLineNumber,this.endColumn,y,f)}static fromPositions(y,f=y){return new E(y.lineNumber,y.column,f.lineNumber,f.column)}static fromRange(y,f){return f===0?new E(y.startLineNumber,y.startColumn,y.endLineNumber,y.endColumn):new E(y.endLineNumber,y.endColumn,y.startLineNumber,y.startColumn)}static liftSelection(y){return new E(y.selectionStartLineNumber,y.selectionStartColumn,y.positionLineNumber,y.positionColumn)}static selectionsArrEqual(y,f){if(y&&!f||!y&&f)return!1;if(!y&&!f)return!0;if(y.length!==f.length)return!1;for(let _=0,b=y.length;_<b;_++)if(!this.selectionsEqual(y[_],f[_]))return!1;return!0}static isISelection(y){return y&&typeof y.selectionStartLineNumber=="number"&&typeof y.selectionStartColumn=="number"&&typeof y.positionLineNumber=="number"&&typeof y.positionColumn=="number"}static createWithDirection(y,f,_,b,p){return p===0?new E(y,f,_,b):new E(_,b,y,f)}}e.Selection=E}),define(oe[113],re([1,0,101,2,21,91,65,23]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ObservableCodeEditor=void 0,e.observableCodeEditor=_,e.reactToChange=p,e.reactToChangeWithStore=n;function _(s){return b.get(s)}class b extends k.Disposable{static{this._map=new Map}static get(t){let i=b._map.get(t);if(!i){i=new b(t),b._map.set(t,i);const o=t.onDidDispose(()=>{const g=b._map.get(t);g&&(b._map.delete(t),g.dispose(),o.dispose())})}return i}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&(this._currentTransaction=new L.TransactionImpl(()=>{}))}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){const t=this._currentTransaction;this._currentTransaction=void 0,t.finish()}}constructor(t){super(),this.editor=t,this._updateCounter=0,this._currentTransaction=void 0,this._model=(0,E.observableValue)(this,this.editor.getModel()),this.model=this._model,this.isReadonly=(0,E.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(92)),this._versionId=(0,E.observableValueOpts)({owner:this,lazy:!0},this.editor.getModel()?.getVersionId()??null),this.versionId=this._versionId,this._selections=(0,E.observableValueOpts)({owner:this,equalsFn:(0,c.equalsIfDefined)((0,c.itemsEquals)(f.Selection.selectionsEqual)),lazy:!0},this.editor.getSelections()??null),this.selections=this._selections,this.isFocused=(0,E.observableFromEvent)(this,i=>{const o=this.editor.onDidFocusEditorWidget(i),g=this.editor.onDidBlurEditorWidget(i);return{dispose(){o.dispose(),g.dispose()}}},()=>this.editor.hasWidgetFocus()),this.value=(0,y.derivedWithSetter)(this,i=>(this.versionId.read(i),this.model.read(i)?.getValue()??""),(i,o)=>{const g=this.model.get();g!==null&&i!==g.getValue()&&g.setValue(i)}),this.valueIsEmpty=(0,E.derived)(this,i=>(this.versionId.read(i),this.editor.getModel()?.getValueLength()===0)),this.cursorSelection=(0,E.derivedOpts)({owner:this,equalsFn:(0,c.equalsIfDefined)(f.Selection.selectionsEqual)},i=>this.selections.read(i)?.[0]??null),this.onDidType=(0,E.observableSignal)(this),this.scrollTop=(0,E.observableFromEvent)(this.editor.onDidScrollChange,()=>this.editor.getScrollTop()),this.scrollLeft=(0,E.observableFromEvent)(this.editor.onDidScrollChange,()=>this.editor.getScrollLeft()),this.layoutInfo=(0,E.observableFromEvent)(this.editor.onDidLayoutChange,()=>this.editor.getLayoutInfo()),this.layoutInfoContentLeft=this.layoutInfo.map(i=>i.contentLeft),this.layoutInfoDecorationsLeft=this.layoutInfo.map(i=>i.decorationsLeft),this.contentWidth=(0,E.observableFromEvent)(this.editor.onDidContentSizeChange,()=>this.editor.getContentWidth()),this._overlayWidgetCounter=0,this._register(this.editor.onBeginUpdate(()=>this._beginUpdate())),this._register(this.editor.onEndUpdate(()=>this._endUpdate())),this._register(this.editor.onDidChangeModel(()=>{this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidType(i=>{this._beginUpdate();try{this._forceUpdate(),this.onDidType.trigger(this._currentTransaction,i)}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeModelContent(i=>{this._beginUpdate();try{this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}})),this._register(this.editor.onDidChangeCursorSelection(i=>{this._beginUpdate();try{this._selections.set(this.editor.getSelections(),this._currentTransaction,i),this._forceUpdate()}finally{this._endUpdate()}}))}forceUpdate(t){this._beginUpdate();try{return this._forceUpdate(),t?t(this._currentTransaction):void 0}finally{this._endUpdate()}}_forceUpdate(){this._beginUpdate();try{this._model.set(this.editor.getModel(),this._currentTransaction),this._versionId.set(this.editor.getModel()?.getVersionId()??null,this._currentTransaction,void 0),this._selections.set(this.editor.getSelections(),this._currentTransaction,void 0)}finally{this._endUpdate()}}getOption(t){return(0,E.observableFromEvent)(this,i=>this.editor.onDidChangeConfiguration(o=>{o.hasChanged(t)&&i(void 0)}),()=>this.editor.getOption(t))}setDecorations(t){const i=new k.DisposableStore,o=this.editor.createDecorationsCollection();return i.add((0,E.autorunOpts)({owner:this,debugName:()=>`Apply decorations from ${t.debugName}`},g=>{const u=t.read(g);o.set(u)})),i.add({dispose:()=>{o.clear()}}),i}createOverlayWidget(t){const i="observableOverlayWidget"+this._overlayWidgetCounter++,o={getDomNode:()=>t.domNode,getPosition:()=>t.position.get(),getId:()=>i,allowEditorOverflow:t.allowEditorOverflow,getMinContentWidthInPx:()=>t.minContentWidthInPx.get()};this.editor.addOverlayWidget(o);const g=(0,E.autorun)(u=>{t.position.read(u),t.minContentWidthInPx.read(u),this.editor.layoutOverlayWidget(o)});return(0,k.toDisposable)(()=>{g.dispose(),this.editor.removeOverlayWidget(o)})}}e.ObservableCodeEditor=b;function p(s,t){return(0,E.autorunWithStoreHandleChanges)({createEmptyChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(i,o)=>{if(i.didChange(s)){const g=i.change;g!==void 0&&o.deltas.push(g),o.didChange=!0}return!0}},(i,o)=>{const g=s.read(i);o.didChange&&t(g,o.deltas)})}function n(s,t){const i=new k.DisposableStore,o=p(s,(g,u)=>{i.clear(),t(g,u,i)});return{dispose(){o.dispose(),i.dispose()}}}}),define(oe[145],re([1,0,23]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaceCommandThatPreservesSelection=e.ReplaceCommandWithOffsetCursorState=e.ReplaceCommandWithoutChangingPosition=e.ReplaceCommandThatSelectsText=e.ReplaceCommand=void 0;class k{constructor(b,p,n=!1){this._range=b,this._text=p,this.insertsAutoWhitespace=n}getEditOperations(b,p){p.addTrackedEditOperation(this._range,this._text)}computeCursorState(b,p){const s=p.getInverseEditOperations()[0].range;return c.Selection.fromPositions(s.getEndPosition())}}e.ReplaceCommand=k;class E{constructor(b,p){this._range=b,this._text=p}getEditOperations(b,p){p.addTrackedEditOperation(this._range,this._text)}computeCursorState(b,p){const s=p.getInverseEditOperations()[0].range;return c.Selection.fromRange(s,0)}}e.ReplaceCommandThatSelectsText=E;class L{constructor(b,p,n=!1){this._range=b,this._text=p,this.insertsAutoWhitespace=n}getEditOperations(b,p){p.addTrackedEditOperation(this._range,this._text)}computeCursorState(b,p){const s=p.getInverseEditOperations()[0].range;return c.Selection.fromPositions(s.getStartPosition())}}e.ReplaceCommandWithoutChangingPosition=L;class y{constructor(b,p,n,s,t=!1){this._range=b,this._text=p,this._columnDeltaOffset=s,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=t}getEditOperations(b,p){p.addTrackedEditOperation(this._range,this._text)}computeCursorState(b,p){const s=p.getInverseEditOperations()[0].range;return c.Selection.fromPositions(s.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}}e.ReplaceCommandWithOffsetCursorState=y;class f{constructor(b,p,n,s=!1){this._range=b,this._text=p,this._initialSelection=n,this._forceMoveMarkers=s,this._selectionId=null}getEditOperations(b,p){p.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=p.trackSelection(this._initialSelection)}computeCursorState(b,p){return p.getTrackedSelection(this._selectionId)}}e.ReplaceCommandThatPreservesSelection=f}),define(oe[325],re([1,0,4,23]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionSurroundSelectionCommand=e.SurroundSelectionCommand=void 0;class E{constructor(f,_,b){this._range=f,this._charBeforeSelection=_,this._charAfterSelection=b}getEditOperations(f,_){_.addTrackedEditOperation(new c.Range(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),_.addTrackedEditOperation(new c.Range(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(f,_){const b=_.getInverseEditOperations(),p=b[0].range,n=b[1].range;return new k.Selection(p.endLineNumber,p.endColumn,n.endLineNumber,n.endColumn-this._charAfterSelection.length)}}e.SurroundSelectionCommand=E;class L{constructor(f,_,b){this._position=f,this._text=_,this._charAfter=b}getEditOperations(f,_){_.addTrackedEditOperation(new c.Range(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(f,_){const p=_.getInverseEditOperations()[0].range;return new k.Selection(p.endLineNumber,p.startColumn,p.endLineNumber,p.endColumn-this._charAfter.length)}}e.CompositionSurroundSelectionCommand=L}),define(oe[114],re([1,0,11,16,158]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=void 0,e.getPlatformTextDecoder=p,e.decodeUTF16LE=n;let L;function y(){return L||(L=new TextDecoder("UTF-16LE")),L}let f;function _(){return f||(f=new TextDecoder("UTF-16BE")),f}let b;function p(){return b||(b=k.isLittleEndian()?y():_()),b}function n(i,o,g){const u=new Uint16Array(i.buffer,o,g);return g>0&&(u[0]===65279||u[0]===65534)?s(i,o,g):y().decode(u)}function s(i,o,g){const u=[];let l=0;for(let a=0;a<g;a++){const r=E.readUInt16LE(i,o);o+=2,u[l++]=String.fromCharCode(r)}return u.join("")}class t{constructor(o){this._capacity=o|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const o=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return p().decode(o)}_flushBuffer(){const o=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[o]:this._completedStrings[this._completedStrings.length]=o}appendCharCode(o){const g=this._capacity-this._bufferLength;g<=1&&(g===0||c.isHighSurrogate(o))&&this._flushBuffer(),this._buffer[this._bufferLength++]=o}appendASCIICharCode(o){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=o}appendString(o){const g=o.length;if(this._bufferLength+g>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=o;return}for(let u=0;u<g;u++)this._buffer[this._bufferLength++]=o.charCodeAt(u)}}e.StringBuilder=t}),define(oe[241],re([1,0,39,102,8,114]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VisibleLinesCollection=e.RenderedLinesCollection=void 0;class y{constructor(p){this._createLine=p,this._set(1,[])}flush(){this._set(1,[])}_set(p,n){this._lines=n,this._rendLineNumberStart=p}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(p){const n=p-this._rendLineNumberStart;if(n<0||n>=this._lines.length)throw new E.BugIndicatingError("Illegal value for lineNumber");return this._lines[n]}onLinesDeleted(p,n){if(this.getCount()===0)return null;const s=this.getStartLineNumber(),t=this.getEndLineNumber();if(n<s){const u=n-p+1;return this._rendLineNumberStart-=u,null}if(p>t)return null;let i=0,o=0;for(let u=s;u<=t;u++){const l=u-this._rendLineNumberStart;p<=u&&u<=n&&(o===0?(i=l,o=1):o++)}if(p<s){let u=0;n<s?u=n-p+1:u=s-p,this._rendLineNumberStart-=u}return this._lines.splice(i,o)}onLinesChanged(p,n){const s=p+n-1;if(this.getCount()===0)return!1;const t=this.getStartLineNumber(),i=this.getEndLineNumber();let o=!1;for(let g=p;g<=s;g++)g>=t&&g<=i&&(this._lines[g-this._rendLineNumberStart].onContentChanged(),o=!0);return o}onLinesInserted(p,n){if(this.getCount()===0)return null;const s=n-p+1,t=this.getStartLineNumber(),i=this.getEndLineNumber();if(p<=t)return this._rendLineNumberStart+=s,null;if(p>i)return null;if(s+p>i)return this._lines.splice(p-this._rendLineNumberStart,i-p+1);const o=[];for(let r=0;r<s;r++)o[r]=this._createLine();const g=p-this._rendLineNumberStart,u=this._lines.slice(0,g),l=this._lines.slice(g,this._lines.length-s),a=this._lines.slice(this._lines.length-s,this._lines.length);return this._lines=u.concat(o).concat(l),a}onTokensChanged(p){if(this.getCount()===0)return!1;const n=this.getStartLineNumber(),s=this.getEndLineNumber();let t=!1;for(let i=0,o=p.length;i<o;i++){const g=p[i];if(g.toLineNumber<n||g.fromLineNumber>s)continue;const u=Math.max(n,g.fromLineNumber),l=Math.min(s,g.toLineNumber);for(let a=u;a<=l;a++){const r=a-this._rendLineNumberStart;this._lines[r].onTokensChanged(),t=!0}}return t}}e.RenderedLinesCollection=y;class f{constructor(p){this._host=p,this.domNode=this._createDomNode(),this._linesCollection=new y(()=>this._host.createVisibleLine())}_createDomNode(){const p=(0,c.createFastDomNode)(document.createElement("div"));return p.setClassName("view-layer"),p.setPosition("absolute"),p.domNode.setAttribute("role","presentation"),p.domNode.setAttribute("aria-hidden","true"),p}onConfigurationChanged(p){return!!p.hasChanged(146)}onFlushed(p){return this._linesCollection.flush(),!0}onLinesChanged(p){return this._linesCollection.onLinesChanged(p.fromLineNumber,p.count)}onLinesDeleted(p){const n=this._linesCollection.onLinesDeleted(p.fromLineNumber,p.toLineNumber);if(n)for(let s=0,t=n.length;s<t;s++)n[s].getDomNode()?.remove();return!0}onLinesInserted(p){const n=this._linesCollection.onLinesInserted(p.fromLineNumber,p.toLineNumber);if(n)for(let s=0,t=n.length;s<t;s++)n[s].getDomNode()?.remove();return!0}onScrollChanged(p){return p.scrollTopChanged}onTokensChanged(p){return this._linesCollection.onTokensChanged(p.ranges)}onZonesChanged(p){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(p){return this._linesCollection.getLine(p)}renderLines(p){const n=this._linesCollection._get(),s=new _(this.domNode.domNode,this._host,p),t={rendLineNumberStart:n.rendLineNumberStart,lines:n.lines,linesLength:n.lines.length},i=s.render(t,p.startLineNumber,p.endLineNumber,p.relativeVerticalOffset);this._linesCollection._set(i.rendLineNumberStart,i.lines)}}e.VisibleLinesCollection=f;class _{static{this._ttPolicy=(0,k.createTrustedTypesPolicy)("editorViewLayer",{createHTML:p=>p})}constructor(p,n,s){this.domNode=p,this.host=n,this.viewportData=s}render(p,n,s,t){const i={rendLineNumberStart:p.rendLineNumberStart,lines:p.lines.slice(0),linesLength:p.linesLength};if(i.rendLineNumberStart+i.linesLength-1<n||s<i.rendLineNumberStart){i.rendLineNumberStart=n,i.linesLength=s-n+1,i.lines=[];for(let o=n;o<=s;o++)i.lines[o-n]=this.host.createVisibleLine();return this._finishRendering(i,!0,t),i}if(this._renderUntouchedLines(i,Math.max(n-i.rendLineNumberStart,0),Math.min(s-i.rendLineNumberStart,i.linesLength-1),t,n),i.rendLineNumberStart>n){const o=n,g=Math.min(s,i.rendLineNumberStart-1);o<=g&&(this._insertLinesBefore(i,o,g,t,n),i.linesLength+=g-o+1)}else if(i.rendLineNumberStart<n){const o=Math.min(i.linesLength,n-i.rendLineNumberStart);o>0&&(this._removeLinesBefore(i,o),i.linesLength-=o)}if(i.rendLineNumberStart=n,i.rendLineNumberStart+i.linesLength-1<s){const o=i.rendLineNumberStart+i.linesLength,g=s;o<=g&&(this._insertLinesAfter(i,o,g,t,n),i.linesLength+=g-o+1)}else if(i.rendLineNumberStart+i.linesLength-1>s){const o=Math.max(0,s-i.rendLineNumberStart+1),u=i.linesLength-1-o+1;u>0&&(this._removeLinesAfter(i,u),i.linesLength-=u)}return this._finishRendering(i,!1,t),i}_renderUntouchedLines(p,n,s,t,i){const o=p.rendLineNumberStart,g=p.lines;for(let u=n;u<=s;u++){const l=o+u;g[u].layoutLine(l,t[l-i],this.viewportData.lineHeight)}}_insertLinesBefore(p,n,s,t,i){const o=[];let g=0;for(let u=n;u<=s;u++)o[g++]=this.host.createVisibleLine();p.lines=o.concat(p.lines)}_removeLinesBefore(p,n){for(let s=0;s<n;s++)p.lines[s].getDomNode()?.remove();p.lines.splice(0,n)}_insertLinesAfter(p,n,s,t,i){const o=[];let g=0;for(let u=n;u<=s;u++)o[g++]=this.host.createVisibleLine();p.lines=p.lines.concat(o)}_removeLinesAfter(p,n){const s=p.linesLength-n;for(let t=0;t<n;t++)p.lines[s+t].getDomNode()?.remove();p.lines.splice(s,n)}_finishRenderingNewLines(p,n,s,t){_._ttPolicy&&(s=_._ttPolicy.createHTML(s));const i=this.domNode.lastChild;n||!i?this.domNode.innerHTML=s:i.insertAdjacentHTML("afterend",s);let o=this.domNode.lastChild;for(let g=p.linesLength-1;g>=0;g--){const u=p.lines[g];t[g]&&(u.setDomNode(o),o=o.previousSibling)}}_finishRenderingInvalidLines(p,n,s){const t=document.createElement("div");_._ttPolicy&&(n=_._ttPolicy.createHTML(n)),t.innerHTML=n;for(let i=0;i<p.linesLength;i++){const o=p.lines[i];if(s[i]){const g=t.firstChild,u=o.getDomNode();u.parentNode.replaceChild(g,u),o.setDomNode(g)}}}static{this._sb=new L.StringBuilder(1e5)}_finishRendering(p,n,s){const t=_._sb,i=p.linesLength,o=p.lines,g=p.rendLineNumberStart,u=[];{t.reset();let l=!1;for(let a=0;a<i;a++){const r=o[a];u[a]=!1,!(r.getDomNode()||!r.renderLine(a+g,s[a],this.viewportData.lineHeight,this.viewportData,t))&&(u[a]=!0,l=!0)}l&&this._finishRenderingNewLines(p,n,t.build(),u)}{t.reset();let l=!1;const a=[];for(let r=0;r<i;r++){const d=o[r];a[r]=!1,!(u[r]||!d.renderLine(r+g,s[r],this.viewportData.lineHeight,this.viewportData,t))&&(a[r]=!0,l=!0)}l&&this._finishRenderingInvalidLines(p,t.build(),a)}}}}),define(oe[326],re([1,0,158,114]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextChange=void 0,e.compressConsecutiveTextChanges=y;function E(_){return _.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class L{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(b,p,n,s){this.oldPosition=b,this.oldText=p,this.newPosition=n,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${E(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${E(this.oldText)}")`:`(replace@${this.oldPosition} "${E(this.oldText)}" with "${E(this.newText)}")`}static _writeStringSize(b){return 4+2*b.length}static _writeString(b,p,n){const s=p.length;c.writeUInt32BE(b,s,n),n+=4;for(let t=0;t<s;t++)c.writeUInt16LE(b,p.charCodeAt(t),n),n+=2;return n}static _readString(b,p){const n=c.readUInt32BE(b,p);return p+=4,(0,k.decodeUTF16LE)(b,p,n)}writeSize(){return 8+L._writeStringSize(this.oldText)+L._writeStringSize(this.newText)}write(b,p){return c.writeUInt32BE(b,this.oldPosition,p),p+=4,c.writeUInt32BE(b,this.newPosition,p),p+=4,p=L._writeString(b,this.oldText,p),p=L._writeString(b,this.newText,p),p}static read(b,p,n){const s=c.readUInt32BE(b,p);p+=4;const t=c.readUInt32BE(b,p);p+=4;const i=L._readString(b,p);p+=L._writeStringSize(i);const o=L._readString(b,p);return p+=L._writeStringSize(o),n.push(new L(s,i,t,o)),p}}e.TextChange=L;function y(_,b){return _===null||_.length===0?b:new f(_,b).compress()}class f{constructor(b,p){this._prevEdits=b,this._currEdits=p,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let b=0,p=0,n=this._getPrev(b),s=this._getCurr(p);for(;b<this._prevLen||p<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++p);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++b);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++p);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++b);continue}if(s.oldPosition<n.newPosition){const[u,l]=f._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(u),s=l;continue}if(n.newPosition<s.oldPosition){const[u,l]=f._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(u),n=l;continue}let o,g;if(s.oldEnd===n.newEnd)o=n,g=s,n=this._getPrev(++b),s=this._getCurr(++p);else if(s.oldEnd<n.newEnd){const[u,l]=f._splitPrev(n,s.oldLength);o=u,g=s,n=l,s=this._getCurr(++p)}else{const[u,l]=f._splitCurr(s,n.newLength);o=n,g=u,n=this._getPrev(++b),s=l}this._result[this._resultLen++]=new L(o.oldPosition,o.oldText,g.newPosition,g.newText),this._prevDeltaOffset+=o.newLength-o.oldLength,this._currDeltaOffset+=g.newLength-g.oldLength}const t=f._merge(this._result);return f._removeNoOps(t)}_acceptCurr(b){this._result[this._resultLen++]=f._rebaseCurr(this._prevDeltaOffset,b),this._currDeltaOffset+=b.newLength-b.oldLength}_getCurr(b){return b<this._currLen?this._currEdits[b]:null}_acceptPrev(b){this._result[this._resultLen++]=f._rebasePrev(this._currDeltaOffset,b),this._prevDeltaOffset+=b.newLength-b.oldLength}_getPrev(b){return b<this._prevLen?this._prevEdits[b]:null}static _rebaseCurr(b,p){return new L(p.oldPosition-b,p.oldText,p.newPosition,p.newText)}static _rebasePrev(b,p){return new L(p.oldPosition,p.oldText,p.newPosition+b,p.newText)}static _splitPrev(b,p){const n=b.newText.substr(0,p),s=b.newText.substr(p);return[new L(b.oldPosition,b.oldText,b.newPosition,n),new L(b.oldEnd,"",b.newPosition+p,s)]}static _splitCurr(b,p){const n=b.oldText.substr(0,p),s=b.oldText.substr(p);return[new L(b.oldPosition,n,b.newPosition,b.newText),new L(b.oldPosition+p,s,b.newEnd,"")]}static _merge(b){if(b.length===0)return b;const p=[];let n=0,s=b[0];for(let t=1;t<b.length;t++){const i=b[t];s.oldEnd===i.oldPosition?s=new L(s.oldPosition,s.oldText+i.oldText,s.newPosition,s.newText+i.newText):(p[n++]=s,s=i)}return p[n++]=s,p}static _removeNoOps(b){if(b.length===0)return b;const p=[];let n=0;for(let s=0;s<b.length;s++){const t=b[s];t.oldText!==t.newText&&(p[n++]=t)}return p}}}),define(oe[115],re([1,0,9,4]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextLength=void 0;class E{static{this.zero=new E(0,0)}static betweenPositions(y,f){return y.lineNumber===f.lineNumber?new E(0,f.column-y.column):new E(f.lineNumber-y.lineNumber,f.column-1)}static ofRange(y){return E.betweenPositions(y.getStartPosition(),y.getEndPosition())}static ofText(y){let f=0,_=0;for(const b of y)b===`
`?(f++,_=0):_++;return new E(f,_)}constructor(y,f){this.lineCount=y,this.columnCount=f}isGreaterThanOrEqualTo(y){return this.lineCount!==y.lineCount?this.lineCount>y.lineCount:this.columnCount>=y.columnCount}createRange(y){return this.lineCount===0?new k.Range(y.lineNumber,y.column,y.lineNumber,y.column+this.columnCount):new k.Range(y.lineNumber,y.column,y.lineNumber+this.lineCount,this.columnCount+1)}addToPosition(y){return this.lineCount===0?new c.Position(y.lineNumber,y.column+this.columnCount):new c.Position(y.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}}e.TextLength=E}),define(oe[85],re([1,0,67,18,2,21,318,9,4,115]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RefCounted=e.DisposableCancellationTokenSource=e.ManagedOverlayWidget=e.PlaceholderViewZone=e.ViewZoneOverlayWidget=e.ObservableElementSizeObserver=void 0,e.joinCombine=p,e.applyObservableDecorations=n,e.appendRemoveOnDispose=s,e.prependRemoveOnDispose=t,e.animatedObservable=o,e.applyStyle=r,e.applyViewZones=d,e.translatePosition=h,e.filterWithPrevious=C;function p(I,T,M,A){if(I.length===0)return T;if(T.length===0)return I;const R=[];let N=0,O=0;for(;N<I.length&&O<T.length;){const x=I[N],F=T[O],W=M(x),z=M(F);W<z?(R.push(x),N++):W>z?(R.push(F),O++):(R.push(A(x,F)),N++,O++)}for(;N<I.length;)R.push(I[N]),N++;for(;O<T.length;)R.push(T[O]),O++;return R}function n(I,T){const M=new E.DisposableStore,A=I.createDecorationsCollection();return M.add((0,L.autorunOpts)({debugName:()=>`Apply decorations from ${T.debugName}`},R=>{const N=T.read(R);A.set(N)})),M.add({dispose:()=>{A.clear()}}),M}function s(I,T){return I.appendChild(T),(0,E.toDisposable)(()=>{T.remove()})}function t(I,T){return I.prepend(T),(0,E.toDisposable)(()=>{T.remove()})}class i extends E.Disposable{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(T,M){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new y.ElementSizeObserver(T,M)),this._width=(0,L.observableValue)(this,this.elementSizeObserver.getWidth()),this._height=(0,L.observableValue)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange(A=>(0,L.transaction)(R=>{this._width.set(this.elementSizeObserver.getWidth(),R),this._height.set(this.elementSizeObserver.getHeight(),R)})))}observe(T){this.elementSizeObserver.observe(T)}setAutomaticLayout(T){this._automaticLayout=T,T?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}e.ObservableElementSizeObserver=i;function o(I,T,M){let A=T.get(),R=A,N=A;const O=(0,L.observableValue)("animatedValue",A);let x=-1;const F=300;let W;M.add((0,L.autorunHandleChanges)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(q,H)=>(q.didChange(T)&&(H.animate=H.animate||q.change),!0)},(q,H)=>{W!==void 0&&(I.cancelAnimationFrame(W),W=void 0),R=N,A=T.read(q),x=Date.now()-(H.animate?0:F),z()}));function z(){const q=Date.now()-x;N=Math.floor(g(q,R,A-R,F)),q<F?W=I.requestAnimationFrame(z):N=A,O.set(N,void 0)}return O}function g(I,T,M,A){return I===A?T+M:M*(-Math.pow(2,-10*I/A)+1)+T}class u extends E.Disposable{constructor(T,M,A){super(),this._register(new a(T,A)),this._register(r(A,{height:M.actualHeight,top:M.actualTop}))}}e.ViewZoneOverlayWidget=u;class l{get afterLineNumber(){return this._afterLineNumber.get()}constructor(T,M){this._afterLineNumber=T,this.heightInPx=M,this.domNode=document.createElement("div"),this._actualTop=(0,L.observableValue)(this,void 0),this._actualHeight=(0,L.observableValue)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=A=>{this._actualTop.set(A,void 0)},this.onComputedHeight=A=>{this._actualHeight.set(A,void 0)}}}e.PlaceholderViewZone=l;class a{static{this._counter=0}constructor(T,M){this._editor=T,this._domElement=M,this._overlayWidgetId=`managedOverlayWidget-${a._counter++}`,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}e.ManagedOverlayWidget=a;function r(I,T){return(0,L.autorun)(M=>{for(let[A,R]of Object.entries(T))R&&typeof R=="object"&&"read"in R&&(R=R.read(M)),typeof R=="number"&&(R=`${R}px`),A=A.replace(/[A-Z]/g,N=>"-"+N.toLowerCase()),I.style[A]=R})}function d(I,T,M,A){const R=new E.DisposableStore,N=[];return R.add((0,L.autorunWithStore)((O,x)=>{const F=T.read(O),W=new Map,z=new Map;M&&M(!0),I.changeViewZones(q=>{for(const H of N)q.removeZone(H),A?.delete(H);N.length=0;for(const H of F){const K=q.addZone(H);H.setZoneId&&H.setZoneId(K),N.push(K),A?.add(K),W.set(H,K)}}),M&&M(!1),x.add((0,L.autorunHandleChanges)({createEmptyChangeSummary(){return{zoneIds:[]}},handleChange(q,H){const K=z.get(q.changedObservable);return K!==void 0&&H.zoneIds.push(K),!0}},(q,H)=>{for(const K of F)K.onChange&&(z.set(K.onChange,W.get(K)),K.onChange.read(q));M&&M(!0),I.changeViewZones(K=>{for(const U of H.zoneIds)K.layoutZone(U)}),M&&M(!1)}))})),R.add({dispose(){M&&M(!0),I.changeViewZones(O=>{for(const x of N)O.removeZone(x)}),A?.clear(),M&&M(!1)}}),R}class m extends k.CancellationTokenSource{dispose(){super.dispose(!0)}}e.DisposableCancellationTokenSource=m;function h(I,T){const M=(0,c.findLast)(T,R=>R.original.startLineNumber<=I.lineNumber);if(!M)return _.Range.fromPositions(I);if(M.original.endLineNumberExclusive<=I.lineNumber){const R=I.lineNumber-M.original.endLineNumberExclusive+M.modified.endLineNumberExclusive;return _.Range.fromPositions(new f.Position(R,I.column))}if(!M.innerChanges)return _.Range.fromPositions(new f.Position(M.modified.startLineNumber,1));const A=(0,c.findLast)(M.innerChanges,R=>R.originalRange.getStartPosition().isBeforeOrEqual(I));if(!A){const R=I.lineNumber-M.original.startLineNumber+M.modified.startLineNumber;return _.Range.fromPositions(new f.Position(R,I.column))}if(A.originalRange.containsPosition(I))return A.modifiedRange;{const R=v(A.originalRange.getEndPosition(),I);return _.Range.fromPositions(R.addToPosition(A.modifiedRange.getEndPosition()))}}function v(I,T){return I.lineNumber===T.lineNumber?new b.TextLength(0,T.column-I.column):new b.TextLength(T.lineNumber-I.lineNumber,T.column-1)}function C(I,T){let M;return I.filter(A=>{const R=T(A,M);return M=A,R})}class w{static create(T,M=void 0){return new S(T,T,M)}static createWithDisposable(T,M,A=void 0){const R=new E.DisposableStore;return R.add(M),R.add(T),new S(T,R,A)}}e.RefCounted=w;class S extends w{constructor(T,M,A){super(),this.object=T,this._disposable=M,this._debugOwner=A,this._refCount=1,this._isDisposed=!1,this._owners=[],A&&this._addOwner(A)}_addOwner(T){T&&this._owners.push(T)}createNewRef(T){return this._refCount++,T&&this._addOwner(T),new D(this,T)}dispose(){this._isDisposed||(this._isDisposed=!0,this._decreaseRefCount(this._debugOwner))}_decreaseRefCount(T){if(this._refCount--,this._refCount===0&&this._disposable.dispose(),T){const M=this._owners.indexOf(T);M!==-1&&this._owners.splice(M,1)}}}class D extends w{constructor(T,M){super(),this._base=T,this._debugOwner=M,this._isDisposed=!1}get object(){return this._base.object}createNewRef(T){return this._base.createNewRef(T)}dispose(){this._isDisposed||(this._isDisposed=!0,this._base._decreaseRefCount(this._debugOwner))}}}),define(oe[566],re([1,0,69,115]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PositionOffsetTransformer=void 0;class E{constructor(y){this.text=y,this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let f=0;f<y.length;f++)y.charAt(f)===`
`&&this.lineStartOffsetByLineIdx.push(f+1)}getOffset(y){return this.lineStartOffsetByLineIdx[y.lineNumber-1]+y.column-1}getOffsetRange(y){return new c.OffsetRange(this.getOffset(y.getStartPosition()),this.getOffset(y.getEndPosition()))}get textLength(){const y=this.lineStartOffsetByLineIdx.length-1;return new k.TextLength(y,this.text.length-this.lineStartOffsetByLineIdx[y])}}e.PositionOffsetTransformer=E}),define(oe[103],re([1,0,89,8,9,566,4,115]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringText=e.AbstractText=e.SingleTextEdit=e.TextEdit=void 0;class _{constructor(i){this.edits=i,(0,c.assertFn)(()=>(0,c.checkAdjacentItems)(i,(o,g)=>o.range.getEndPosition().isBeforeOrEqual(g.range.getStartPosition())))}apply(i){let o="",g=new E.Position(1,1);for(const l of this.edits){const a=l.range,r=a.getStartPosition(),d=a.getEndPosition(),m=p(g,r);m.isEmpty()||(o+=i.getValueOfRange(m)),o+=l.text,g=d}const u=p(g,i.endPositionExclusive);return u.isEmpty()||(o+=i.getValueOfRange(u)),o}applyToString(i){const o=new s(i);return this.apply(o)}getNewRanges(){const i=[];let o=0,g=0,u=0;for(const l of this.edits){const a=f.TextLength.ofText(l.text),r=E.Position.lift({lineNumber:l.range.startLineNumber+g,column:l.range.startColumn+(l.range.startLineNumber===o?u:0)}),d=a.createRange(r);i.push(d),g=d.endLineNumber-l.range.endLineNumber,u=d.endColumn-l.range.endColumn,o=l.range.endLineNumber}return i}}e.TextEdit=_;class b{constructor(i,o){this.range=i,this.text=o}toSingleEditOperation(){return{range:this.range,text:this.text}}}e.SingleTextEdit=b;function p(t,i){if(t.lineNumber===i.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return y.Range.fromPositions(i,i);if(!t.isBeforeOrEqual(i))throw new k.BugIndicatingError("start must be before end");return new y.Range(t.lineNumber,t.column,i.lineNumber,i.column)}class n{get endPositionExclusive(){return this.length.addToPosition(new E.Position(1,1))}}e.AbstractText=n;class s extends n{constructor(i){super(),this.value=i,this._t=new L.PositionOffsetTransformer(this.value)}getValueOfRange(i){return this._t.getOffsetRange(i).substring(this.value)}get length(){return this._t.textLength}}e.StringText=s}),define(oe[197],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EDITOR_MODEL_DEFAULTS=void 0,e.EDITOR_MODEL_DEFAULTS={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}}}),define(oe[168],re([1,0,45,143]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WordCharacterClassifier=void 0,e.getMapForWordSeparators=y;class E extends k.CharacterClassifier{constructor(_,b){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=b,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let p=0,n=_.length;p<n;p++)this.set(_.charCodeAt(p),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(_,b){let p=null;for(const n of this._getIntlSegmenterWordsOnLine(_)){if(n.index>b)break;p=n}return p}findNextIntlWordAtOrAfterOffset(_,b){for(const p of this._getIntlSegmenterWordsOnLine(_))if(!(p.index<b))return p;return null}_getIntlSegmenterWordsOnLine(_){return this._segmenter?this._cachedLine===_?this._cachedSegments:(this._cachedLine=_,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(_)),this._cachedSegments):[]}_filterWordSegments(_){const b=[];for(const p of _)this._isWordLike(p)&&b.push(p);return b}_isWordLike(_){return!!_.isWordLike}}e.WordCharacterClassifier=E;const L=new c.LRUCache(10);function y(f,_){const b=`${f}/${_.join(",")}`;let p=L.get(b);return p||(p=new E(f,_),L.set(b,p)),p}}),define(oe[169],re([1,0,53,73]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_WORD_REGEXP=e.USUAL_WORD_SEPARATORS=void 0,e.ensureValidWordDefinition=L,e.getWordAtText=f,e.USUAL_WORD_SEPARATORS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function E(b=""){let p="(-?\\d*\\.\\d\\w*)|([^";for(const n of e.USUAL_WORD_SEPARATORS)b.indexOf(n)>=0||(p+="\\"+n);return p+="\\s]+)",new RegExp(p,"g")}e.DEFAULT_WORD_REGEXP=E();function L(b){let p=e.DEFAULT_WORD_REGEXP;if(b&&b instanceof RegExp)if(b.global)p=b;else{let n="g";b.ignoreCase&&(n+="i"),b.multiline&&(n+="m"),b.unicode&&(n+="u"),p=new RegExp(b.source,n)}return p.lastIndex=0,p}const y=new k.LinkedList;y.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function f(b,p,n,s,t){if(p=L(p),t||(t=c.Iterable.first(y)),n.length>t.maxLen){let l=b-t.maxLen/2;return l<0?l=0:s+=l,n=n.substring(l,b+t.maxLen/2),f(b,p,n,s,t)}const i=Date.now(),o=b-1-s;let g=-1,u=null;for(let l=1;!(Date.now()-i>=t.timeBudget);l++){const a=o-t.windowSize*l;p.lastIndex=Math.max(0,a);const r=_(p,n,o,g);if(!r&&u||(u=r,a<=0))break;g=a}if(u){const l={word:u[0],startColumn:s+1+u.index,endColumn:s+1+u.index+u[0].length};return p.lastIndex=0,l}return null}function _(b,p,n,s){let t;for(;t=b.exec(p);){const i=t.index||0;if(i<=n&&b.lastIndex>=n)return t;if(s>0&&i>s)return null}return null}}),define(oe[327],re([1,0,93]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AtomicTabMoveOperations=void 0;class k{static whitespaceVisibleColumn(L,y,f){const _=L.length;let b=0,p=-1,n=-1;for(let s=0;s<_;s++){if(s===y)return[p,n,b];switch(b%f===0&&(p=s,n=b),L.charCodeAt(s)){case 32:b+=1;break;case 9:b=c.CursorColumns.nextRenderTabStop(b,f);break;default:return[-1,-1,-1]}}return y===_?[p,n,b]:[-1,-1,-1]}static atomicPosition(L,y,f,_){const b=L.length,[p,n,s]=k.whitespaceVisibleColumn(L,y,f);if(s===-1)return-1;let t;switch(_){case 0:t=!0;break;case 1:t=!1;break;case 2:if(s%f===0)return y;t=s%f<=f/2;break}if(t){if(p===-1)return-1;let g=n;for(let u=p;u<b;++u){if(g===n+f)return p;switch(L.charCodeAt(u)){case 32:g+=1;break;case 9:g=c.CursorColumns.nextRenderTabStop(g,f);break;default:return-1}}return g===n+f?p:-1}const i=c.CursorColumns.nextRenderTabStop(s,f);let o=s;for(let g=y;g<b;g++){if(o===i)return g;switch(L.charCodeAt(g)){case 32:o+=1;break;case 9:o=c.CursorColumns.nextRenderTabStop(o,f);break;default:return-1}}return o===i?b:-1}}e.AtomicTabMoveOperations=k}),define(oe[567],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorContext=void 0;class c{constructor(E,L,y,f){this._cursorContextBrand=void 0,this.model=E,this.viewModel=L,this.coordinatesConverter=y,this.cursorConfig=f}}e.CursorContext=c}),define(oe[170],re([1,0,13,8,69]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimeout=e.InfiniteTimeout=e.OffsetPair=e.SequenceDiff=e.DiffAlgorithmResult=void 0;class L{static trivial(n,s){return new L([new y(E.OffsetRange.ofLength(n.length),E.OffsetRange.ofLength(s.length))],!1)}static trivialTimedOut(n,s){return new L([new y(E.OffsetRange.ofLength(n.length),E.OffsetRange.ofLength(s.length))],!0)}constructor(n,s){this.diffs=n,this.hitTimeout=s}}e.DiffAlgorithmResult=L;class y{static invert(n,s){const t=[];return(0,c.forEachAdjacent)(n,(i,o)=>{t.push(y.fromOffsetPairs(i?i.getEndExclusives():f.zero,o?o.getStarts():new f(s,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+s)))}),t}static fromOffsetPairs(n,s){return new y(new E.OffsetRange(n.offset1,s.offset1),new E.OffsetRange(n.offset2,s.offset2))}static assertSorted(n){let s;for(const t of n){if(s&&!(s.seq1Range.endExclusive<=t.seq1Range.start&&s.seq2Range.endExclusive<=t.seq2Range.start))throw new k.BugIndicatingError("Sequence diffs must be sorted");s=t}}constructor(n,s){this.seq1Range=n,this.seq2Range=s}swap(){return new y(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(n){return new y(this.seq1Range.join(n.seq1Range),this.seq2Range.join(n.seq2Range))}delta(n){return n===0?this:new y(this.seq1Range.delta(n),this.seq2Range.delta(n))}deltaStart(n){return n===0?this:new y(this.seq1Range.deltaStart(n),this.seq2Range.deltaStart(n))}deltaEnd(n){return n===0?this:new y(this.seq1Range.deltaEnd(n),this.seq2Range.deltaEnd(n))}intersect(n){const s=this.seq1Range.intersect(n.seq1Range),t=this.seq2Range.intersect(n.seq2Range);if(!(!s||!t))return new y(s,t)}getStarts(){return new f(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new f(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}e.SequenceDiff=y;class f{static{this.zero=new f(0,0)}static{this.max=new f(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}constructor(n,s){this.offset1=n,this.offset2=s}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(n){return n===0?this:new f(this.offset1+n,this.offset2+n)}equals(n){return this.offset1===n.offset1&&this.offset2===n.offset2}}e.OffsetPair=f;class _{static{this.instance=new _}isValid(){return!0}}e.InfiniteTimeout=_;class b{constructor(n){if(this.timeout=n,this.startTime=Date.now(),this.valid=!0,n<=0)throw new k.BugIndicatingError("timeout must be positive")}isValid(){if(!(Date.now()-this.startTime<this.timeout)&&this.valid){this.valid=!1;debugger}return this.valid}}e.DateTimeout=b}),define(oe[328],re([1,0,69,170]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MyersDiffAlgorithm=void 0;class E{compute(b,p,n=k.InfiniteTimeout.instance){if(b.length===0||p.length===0)return k.DiffAlgorithmResult.trivial(b,p);const s=b,t=p;function i(h,v){for(;h<s.length&&v<t.length&&s.getElement(h)===t.getElement(v);)h++,v++;return h}let o=0;const g=new y;g.set(0,i(0,0));const u=new f;u.set(0,g.get(0)===0?null:new L(null,0,0,g.get(0)));let l=0;e:for(;;){if(o++,!n.isValid())return k.DiffAlgorithmResult.trivialTimedOut(s,t);const h=-Math.min(o,t.length+o%2),v=Math.min(o,s.length+o%2);for(l=h;l<=v;l+=2){let C=0;const w=l===v?-1:g.get(l+1),S=l===h?-1:g.get(l-1)+1;C++;const D=Math.min(Math.max(w,S),s.length),I=D-l;if(C++,D>s.length||I>t.length)continue;const T=i(D,I);g.set(l,T);const M=D===w?u.get(l+1):u.get(l-1);if(u.set(l,T!==D?new L(M,D,I,T-D):M),g.get(l)===s.length&&g.get(l)-l===t.length)break e}}let a=u.get(l);const r=[];let d=s.length,m=t.length;for(;;){const h=a?a.x+a.length:0,v=a?a.y+a.length:0;if((h!==d||v!==m)&&r.push(new k.SequenceDiff(new c.OffsetRange(h,d),new c.OffsetRange(v,m))),!a)break;d=a.x,m=a.y,a=a.prev}return r.reverse(),new k.DiffAlgorithmResult(r,!1)}}e.MyersDiffAlgorithm=E;class L{constructor(b,p,n,s){this.prev=b,this.x=p,this.y=n,this.length=s}}class y{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(b){return b<0?(b=-b-1,this.negativeArr[b]):this.positiveArr[b]}set(b,p){if(b<0){if(b=-b-1,b>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[b]=p}else{if(b>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[b]=p}}}class f{constructor(){this.positiveArr=[],this.negativeArr=[]}get(b){return b<0?(b=-b-1,this.negativeArr[b]):this.positiveArr[b]}set(b,p){b<0?(b=-b-1,this.negativeArr[b]=p):this.positiveArr[b]=p}}}),define(oe[329],re([1,0,13,69,170]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optimizeSequenceDiffs=L,e.removeShortMatches=b,e.extendDiffsToEntireWordIfAppropriate=p,e.removeVeryShortMatchingLinesBetweenDiffs=s,e.removeVeryShortMatchingTextBetweenLongDiffs=t;function L(i,o,g){let u=g;return u=y(i,o,u),u=y(i,o,u),u=f(i,o,u),u}function y(i,o,g){if(g.length===0)return g;const u=[];u.push(g[0]);for(let a=1;a<g.length;a++){const r=u[u.length-1];let d=g[a];if(d.seq1Range.isEmpty||d.seq2Range.isEmpty){const m=d.seq1Range.start-r.seq1Range.endExclusive;let h;for(h=1;h<=m&&!(i.getElement(d.seq1Range.start-h)!==i.getElement(d.seq1Range.endExclusive-h)||o.getElement(d.seq2Range.start-h)!==o.getElement(d.seq2Range.endExclusive-h));h++);if(h--,h===m){u[u.length-1]=new E.SequenceDiff(new k.OffsetRange(r.seq1Range.start,d.seq1Range.endExclusive-m),new k.OffsetRange(r.seq2Range.start,d.seq2Range.endExclusive-m));continue}d=d.delta(-h)}u.push(d)}const l=[];for(let a=0;a<u.length-1;a++){const r=u[a+1];let d=u[a];if(d.seq1Range.isEmpty||d.seq2Range.isEmpty){const m=r.seq1Range.start-d.seq1Range.endExclusive;let h;for(h=0;h<m&&!(!i.isStronglyEqual(d.seq1Range.start+h,d.seq1Range.endExclusive+h)||!o.isStronglyEqual(d.seq2Range.start+h,d.seq2Range.endExclusive+h));h++);if(h===m){u[a+1]=new E.SequenceDiff(new k.OffsetRange(d.seq1Range.start+m,r.seq1Range.endExclusive),new k.OffsetRange(d.seq2Range.start+m,r.seq2Range.endExclusive));continue}h>0&&(d=d.delta(h))}l.push(d)}return u.length>0&&l.push(u[u.length-1]),l}function f(i,o,g){if(!i.getBoundaryScore||!o.getBoundaryScore)return g;for(let u=0;u<g.length;u++){const l=u>0?g[u-1]:void 0,a=g[u],r=u+1<g.length?g[u+1]:void 0,d=new k.OffsetRange(l?l.seq1Range.endExclusive+1:0,r?r.seq1Range.start-1:i.length),m=new k.OffsetRange(l?l.seq2Range.endExclusive+1:0,r?r.seq2Range.start-1:o.length);a.seq1Range.isEmpty?g[u]=_(a,i,o,d,m):a.seq2Range.isEmpty&&(g[u]=_(a.swap(),o,i,m,d).swap())}return g}function _(i,o,g,u,l){let r=1;for(;i.seq1Range.start-r>=u.start&&i.seq2Range.start-r>=l.start&&g.isStronglyEqual(i.seq2Range.start-r,i.seq2Range.endExclusive-r)&&r<100;)r++;r--;let d=0;for(;i.seq1Range.start+d<u.endExclusive&&i.seq2Range.endExclusive+d<l.endExclusive&&g.isStronglyEqual(i.seq2Range.start+d,i.seq2Range.endExclusive+d)&&d<100;)d++;if(r===0&&d===0)return i;let m=0,h=-1;for(let v=-r;v<=d;v++){const C=i.seq2Range.start+v,w=i.seq2Range.endExclusive+v,S=i.seq1Range.start+v,D=o.getBoundaryScore(S)+g.getBoundaryScore(C)+g.getBoundaryScore(w);D>h&&(h=D,m=v)}return i.delta(m)}function b(i,o,g){const u=[];for(const l of g){const a=u[u.length-1];if(!a){u.push(l);continue}l.seq1Range.start-a.seq1Range.endExclusive<=2||l.seq2Range.start-a.seq2Range.endExclusive<=2?u[u.length-1]=new E.SequenceDiff(a.seq1Range.join(l.seq1Range),a.seq2Range.join(l.seq2Range)):u.push(l)}return u}function p(i,o,g){const u=E.SequenceDiff.invert(g,i.length),l=[];let a=new E.OffsetPair(0,0);function r(m,h){if(m.offset1<a.offset1||m.offset2<a.offset2)return;const v=i.findWordContaining(m.offset1),C=o.findWordContaining(m.offset2);if(!v||!C)return;let w=new E.SequenceDiff(v,C);const S=w.intersect(h);let D=S.seq1Range.length,I=S.seq2Range.length;for(;u.length>0;){const T=u[0];if(!(T.seq1Range.intersects(w.seq1Range)||T.seq2Range.intersects(w.seq2Range)))break;const A=i.findWordContaining(T.seq1Range.start),R=o.findWordContaining(T.seq2Range.start),N=new E.SequenceDiff(A,R),O=N.intersect(T);if(D+=O.seq1Range.length,I+=O.seq2Range.length,w=w.join(N),w.seq1Range.endExclusive>=T.seq1Range.endExclusive)u.shift();else break}D+I<(w.seq1Range.length+w.seq2Range.length)*2/3&&l.push(w),a=w.getEndExclusives()}for(;u.length>0;){const m=u.shift();m.seq1Range.isEmpty||(r(m.getStarts(),m),r(m.getEndExclusives().delta(-1),m))}return n(g,l)}function n(i,o){const g=[];for(;i.length>0||o.length>0;){const u=i[0],l=o[0];let a;u&&(!l||u.seq1Range.start<l.seq1Range.start)?a=i.shift():a=o.shift(),g.length>0&&g[g.length-1].seq1Range.endExclusive>=a.seq1Range.start?g[g.length-1]=g[g.length-1].join(a):g.push(a)}return g}function s(i,o,g){let u=g;if(u.length===0)return u;let l=0,a;do{a=!1;const r=[u[0]];for(let d=1;d<u.length;d++){let v=function(w,S){const D=new k.OffsetRange(h.seq1Range.endExclusive,m.seq1Range.start);return i.getText(D).replace(/\s/g,"").length<=4&&(w.seq1Range.length+w.seq2Range.length>5||S.seq1Range.length+S.seq2Range.length>5)};const m=u[d],h=r[r.length-1];v(h,m)?(a=!0,r[r.length-1]=r[r.length-1].join(m)):r.push(m)}u=r}while(l++<10&&a);return u}function t(i,o,g){let u=g;if(u.length===0)return u;let l=0,a;do{a=!1;const d=[u[0]];for(let m=1;m<u.length;m++){let C=function(S,D){const I=new k.OffsetRange(v.seq1Range.endExclusive,h.seq1Range.start);if(i.countLinesIn(I)>5||I.length>500)return!1;const M=i.getText(I).trim();if(M.length>20||M.split(/\r\n|\r|\n/).length>1)return!1;const A=i.countLinesIn(S.seq1Range),R=S.seq1Range.length,N=o.countLinesIn(S.seq2Range),O=S.seq2Range.length,x=i.countLinesIn(D.seq1Range),F=D.seq1Range.length,W=o.countLinesIn(D.seq2Range),z=D.seq2Range.length,q=2*40+50;function H(K){return Math.min(K,q)}return Math.pow(Math.pow(H(A*40+R),1.5)+Math.pow(H(N*40+O),1.5),1.5)+Math.pow(Math.pow(H(x*40+F),1.5)+Math.pow(H(W*40+z),1.5),1.5)>(q**1.5)**1.5*1.3};const h=u[m],v=d[d.length-1];C(v,h)?(a=!0,d[d.length-1]=d[d.length-1].join(h)):d.push(h)}u=d}while(l++<10&&a);const r=[];return(0,c.forEachWithNeighbors)(u,(d,m,h)=>{let v=m;function C(M){return M.length>0&&M.trim().length<=3&&m.seq1Range.length+m.seq2Range.length>100}const w=i.extendToFullLines(m.seq1Range),S=i.getText(new k.OffsetRange(w.start,m.seq1Range.start));C(S)&&(v=v.deltaStart(-S.length));const D=i.getText(new k.OffsetRange(m.seq1Range.endExclusive,w.endExclusive));C(D)&&(v=v.deltaEnd(D.length));const I=E.SequenceDiff.fromOffsetPairs(d?d.getEndExclusives():E.OffsetPair.zero,h?h.getStarts():E.OffsetPair.max),T=v.intersect(I);r.length>0&&T.getStarts().equals(r[r.length-1].getEndExclusives())?r[r.length-1]=r[r.length-1].join(T):r.push(T)}),r}}),define(oe[568],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineSequence=void 0;class c{constructor(L,y){this.trimmedHash=L,this.lines=y}getElement(L){return this.trimmedHash[L]}get length(){return this.trimmedHash.length}getBoundaryScore(L){const y=L===0?0:k(this.lines[L-1]),f=L===this.lines.length?0:k(this.lines[L]);return 1e3-(y+f)}getText(L){return this.lines.slice(L.start,L.endExclusive).join(`
`)}isStronglyEqual(L,y){return this.lines[L]===this.lines[y]}}e.LineSequence=c;function k(E){let L=0;for(;L<E.length&&(E.charCodeAt(L)===32||E.charCodeAt(L)===9);)L++;return L}}),define(oe[242],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineRangeFragment=e.Array2D=void 0,e.isSpace=k;class c{constructor(y,f){this.width=y,this.height=f,this.array=[],this.array=new Array(y*f)}get(y,f){return this.array[y+f*this.width]}set(y,f,_){this.array[y+f*this.width]=_}}e.Array2D=c;function k(L){return L===32||L===9}class E{static{this.chrKeys=new Map}static getKey(y){let f=this.chrKeys.get(y);return f===void 0&&(f=this.chrKeys.size,this.chrKeys.set(y,f)),f}constructor(y,f,_){this.range=y,this.lines=f,this.source=_,this.histogram=[];let b=0;for(let p=y.startLineNumber-1;p<y.endLineNumberExclusive-1;p++){const n=f[p];for(let t=0;t<n.length;t++){b++;const i=n[t],o=E.getKey(i);this.histogram[o]=(this.histogram[o]||0)+1}b++;const s=E.getKey(`
`);this.histogram[s]=(this.histogram[s]||0)+1}this.totalCount=b}computeSimilarity(y){let f=0;const _=Math.max(this.histogram.length,y.histogram.length);for(let b=0;b<_;b++)f+=Math.abs((this.histogram[b]??0)-(y.histogram[b]??0));return 1-f/(this.totalCount+y.totalCount)}}e.LineRangeFragment=E}),define(oe[569],re([1,0,69,170,242]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicProgrammingDiffing=void 0;class L{compute(f,_,b=k.InfiniteTimeout.instance,p){if(f.length===0||_.length===0)return k.DiffAlgorithmResult.trivial(f,_);const n=new E.Array2D(f.length,_.length),s=new E.Array2D(f.length,_.length),t=new E.Array2D(f.length,_.length);for(let r=0;r<f.length;r++)for(let d=0;d<_.length;d++){if(!b.isValid())return k.DiffAlgorithmResult.trivialTimedOut(f,_);const m=r===0?0:n.get(r-1,d),h=d===0?0:n.get(r,d-1);let v;f.getElement(r)===_.getElement(d)?(r===0||d===0?v=0:v=n.get(r-1,d-1),r>0&&d>0&&s.get(r-1,d-1)===3&&(v+=t.get(r-1,d-1)),v+=p?p(r,d):1):v=-1;const C=Math.max(m,h,v);if(C===v){const w=r>0&&d>0?t.get(r-1,d-1):0;t.set(r,d,w+1),s.set(r,d,3)}else C===m?(t.set(r,d,0),s.set(r,d,1)):C===h&&(t.set(r,d,0),s.set(r,d,2));n.set(r,d,C)}const i=[];let o=f.length,g=_.length;function u(r,d){(r+1!==o||d+1!==g)&&i.push(new k.SequenceDiff(new c.OffsetRange(r+1,o),new c.OffsetRange(d+1,g))),o=r,g=d}let l=f.length-1,a=_.length-1;for(;l>=0&&a>=0;)s.get(l,a)===3?(u(l,a),l--,a--):s.get(l,a)===1?l--:a--;return u(-1,-1),i.reverse(),new k.DiffAlgorithmResult(i,!1)}}e.DynamicProgrammingDiffing=L}),define(oe[330],re([1,0,67,69,9,4,242]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinesSliceCharSequence=void 0;class f{constructor(t,i,o){this.lines=t,this.range=i,this.considerWhitespaceChanges=o,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let g=this.range.startLineNumber;g<=this.range.endLineNumber;g++){let u=t[g-1],l=0;g===this.range.startLineNumber&&this.range.startColumn>1&&(l=this.range.startColumn-1,u=u.substring(l)),this.lineStartOffsets.push(l);let a=0;if(!o){const d=u.trimStart();a=u.length-d.length,u=d.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const r=g===this.range.endLineNumber?Math.min(this.range.endColumn-1-l-a,u.length):u.length;for(let d=0;d<r;d++)this.elements.push(u.charCodeAt(d));g<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new k.OffsetRange(0,this.length))}getText(t){return this.elements.slice(t.start,t.endExclusive).map(i=>String.fromCharCode(i)).join("")}getElement(t){return this.elements[t]}get length(){return this.elements.length}getBoundaryScore(t){const i=n(t>0?this.elements[t-1]:-1),o=n(t<this.elements.length?this.elements[t]:-1);if(i===7&&o===8)return 0;if(i===8)return 150;let g=0;return i!==o&&(g+=10,i===0&&o===1&&(g+=1)),g+=p(i),g+=p(o),g}translateOffset(t,i="right"){const o=(0,c.findLastIdxMonotonous)(this.firstElementOffsetByLineIdx,u=>u<=t),g=t-this.firstElementOffsetByLineIdx[o];return new E.Position(this.range.startLineNumber+o,1+this.lineStartOffsets[o]+g+(g===0&&i==="left"?0:this.trimmedWsLengthsByLineIdx[o]))}translateRange(t){const i=this.translateOffset(t.start,"right"),o=this.translateOffset(t.endExclusive,"left");return o.isBefore(i)?L.Range.fromPositions(o,o):L.Range.fromPositions(i,o)}findWordContaining(t){if(t<0||t>=this.elements.length||!_(this.elements[t]))return;let i=t;for(;i>0&&_(this.elements[i-1]);)i--;let o=t;for(;o<this.elements.length&&_(this.elements[o]);)o++;return new k.OffsetRange(i,o)}countLinesIn(t){return this.translateOffset(t.endExclusive).lineNumber-this.translateOffset(t.start).lineNumber}isStronglyEqual(t,i){return this.elements[t]===this.elements[i]}extendToFullLines(t){const i=(0,c.findLastMonotonous)(this.firstElementOffsetByLineIdx,g=>g<=t.start)??0,o=(0,c.findFirstMonotonous)(this.firstElementOffsetByLineIdx,g=>t.endExclusive<=g)??this.elements.length;return new k.OffsetRange(i,o)}}e.LinesSliceCharSequence=f;function _(s){return s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57}const b={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function p(s){return b[s]}function n(s){return s===10?8:s===13?7:(0,y.isSpace)(s)?6:s>=97&&s<=122?0:s>=65&&s<=90?1:s>=48&&s<=57?2:s===-1?3:s===44||s===59?5:4}}),define(oe[243],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovedText=e.LinesDiff=void 0;class c{constructor(L,y,f){this.changes=L,this.moves=y,this.hitTimeout=f}}e.LinesDiff=c;class k{constructor(L,y){this.lineRangeMapping=L,this.changes=y}}e.MovedText=k}),define(oe[104],re([1,0,8,56,9,4,103]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeMapping=e.DetailedLineRangeMapping=e.LineRangeMapping=void 0;class f{static inverse(t,i,o){const g=[];let u=1,l=1;for(const r of t){const d=new f(new k.LineRange(u,r.original.startLineNumber),new k.LineRange(l,r.modified.startLineNumber));d.modified.isEmpty||g.push(d),u=r.original.endLineNumberExclusive,l=r.modified.endLineNumberExclusive}const a=new f(new k.LineRange(u,i+1),new k.LineRange(l,o+1));return a.modified.isEmpty||g.push(a),g}static clip(t,i,o){const g=[];for(const u of t){const l=u.original.intersect(i),a=u.modified.intersect(o);l&&!l.isEmpty&&a&&!a.isEmpty&&g.push(new f(l,a))}return g}constructor(t,i){this.original=t,this.modified=i}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new f(this.modified,this.original)}join(t){return new f(this.original.join(t.original),this.modified.join(t.modified))}toRangeMapping(){const t=this.original.toInclusiveRange(),i=this.modified.toInclusiveRange();if(t&&i)return new n(t,i);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new c.BugIndicatingError("not a valid diff");return new n(new L.Range(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new L.Range(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new n(new L.Range(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new L.Range(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(t,i){if(b(this.original.endLineNumberExclusive,t)&&b(this.modified.endLineNumberExclusive,i))return new n(new L.Range(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new L.Range(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new n(L.Range.fromPositions(new E.Position(this.original.startLineNumber,1),_(new E.Position(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)),L.Range.fromPositions(new E.Position(this.modified.startLineNumber,1),_(new E.Position(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),i)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new n(L.Range.fromPositions(_(new E.Position(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),_(new E.Position(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)),L.Range.fromPositions(_(new E.Position(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),i),_(new E.Position(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),i)));throw new c.BugIndicatingError}}e.LineRangeMapping=f;function _(s,t){if(s.lineNumber<1)return new E.Position(1,1);if(s.lineNumber>t.length)return new E.Position(t.length,t[t.length-1].length+1);const i=t[s.lineNumber-1];return s.column>i.length+1?new E.Position(s.lineNumber,i.length+1):s}function b(s,t){return s>=1&&s<=t.length}class p extends f{static fromRangeMappings(t){const i=k.LineRange.join(t.map(g=>k.LineRange.fromRangeInclusive(g.originalRange))),o=k.LineRange.join(t.map(g=>k.LineRange.fromRangeInclusive(g.modifiedRange)));return new p(i,o,t)}constructor(t,i,o){super(t,i),this.innerChanges=o}flip(){return new p(this.modified,this.original,this.innerChanges?.map(t=>t.flip()))}withInnerChangesFromLineRanges(){return new p(this.original,this.modified,[this.toRangeMapping()])}}e.DetailedLineRangeMapping=p;class n{static assertSorted(t){for(let i=1;i<t.length;i++){const o=t[i-1],g=t[i];if(!(o.originalRange.getEndPosition().isBeforeOrEqual(g.originalRange.getStartPosition())&&o.modifiedRange.getEndPosition().isBeforeOrEqual(g.modifiedRange.getStartPosition())))throw new c.BugIndicatingError("Range mappings must be sorted")}}constructor(t,i){this.originalRange=t,this.modifiedRange=i}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new n(this.modifiedRange,this.originalRange)}toTextEdit(t){const i=t.getValueOfRange(this.modifiedRange);return new y.SingleTextEdit(this.originalRange,i)}}e.RangeMapping=n}),define(oe[570],re([1,0,170,104,13,67,45,56,330,242,328,4]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeMovedLines=s;function s(a,r,d,m,h,v){let{moves:C,excludedChanges:w}=i(a,r,d,v);if(!v.isValid())return[];const S=a.filter(I=>!w.has(I)),D=o(S,m,h,r,d,v);return(0,E.pushMany)(C,D),C=u(C),C=C.filter(I=>{const T=I.original.toOffsetRange().slice(r).map(A=>A.trim());return T.join(`
`).length>=15&&t(T,A=>A.length>=2)>=2}),C=l(a,C),C}function t(a,r){let d=0;for(const m of a)r(m)&&d++;return d}function i(a,r,d,m){const h=[],v=a.filter(S=>S.modified.isEmpty&&S.original.length>=3).map(S=>new b.LineRangeFragment(S.original,r,S)),C=new Set(a.filter(S=>S.original.isEmpty&&S.modified.length>=3).map(S=>new b.LineRangeFragment(S.modified,d,S))),w=new Set;for(const S of v){let D=-1,I;for(const T of C){const M=S.computeSimilarity(T);M>D&&(D=M,I=T)}if(D>.9&&I&&(C.delete(I),h.push(new k.LineRangeMapping(S.range,I.range)),w.add(S.source),w.add(I.source)),!m.isValid())return{moves:h,excludedChanges:w}}return{moves:h,excludedChanges:w}}function o(a,r,d,m,h,v){const C=[],w=new y.SetMap;for(const M of a)for(let A=M.original.startLineNumber;A<M.original.endLineNumberExclusive-2;A++){const R=`${r[A-1]}:${r[A+1-1]}:${r[A+2-1]}`;w.add(R,{range:new f.LineRange(A,A+3)})}const S=[];a.sort((0,E.compareBy)(M=>M.modified.startLineNumber,E.numberComparator));for(const M of a){let A=[];for(let R=M.modified.startLineNumber;R<M.modified.endLineNumberExclusive-2;R++){const N=`${d[R-1]}:${d[R+1-1]}:${d[R+2-1]}`,O=new f.LineRange(R,R+3),x=[];w.forEach(N,({range:F})=>{for(const z of A)if(z.originalLineRange.endLineNumberExclusive+1===F.endLineNumberExclusive&&z.modifiedLineRange.endLineNumberExclusive+1===O.endLineNumberExclusive){z.originalLineRange=new f.LineRange(z.originalLineRange.startLineNumber,F.endLineNumberExclusive),z.modifiedLineRange=new f.LineRange(z.modifiedLineRange.startLineNumber,O.endLineNumberExclusive),x.push(z);return}const W={modifiedLineRange:O,originalLineRange:F};S.push(W),x.push(W)}),A=x}if(!v.isValid())return[]}S.sort((0,E.reverseOrder)((0,E.compareBy)(M=>M.modifiedLineRange.length,E.numberComparator)));const D=new f.LineRangeSet,I=new f.LineRangeSet;for(const M of S){const A=M.modifiedLineRange.startLineNumber-M.originalLineRange.startLineNumber,R=D.subtractFrom(M.modifiedLineRange),N=I.subtractFrom(M.originalLineRange).getWithDelta(A),O=R.getIntersection(N);for(const x of O.ranges){if(x.length<3)continue;const F=x,W=x.delta(-A);C.push(new k.LineRangeMapping(W,F)),D.addRange(F),I.addRange(W)}}C.sort((0,E.compareBy)(M=>M.original.startLineNumber,E.numberComparator));const T=new L.MonotonousArray(a);for(let M=0;M<C.length;M++){const A=C[M],R=T.findLastMonotonous(H=>H.original.startLineNumber<=A.original.startLineNumber),N=(0,L.findLastMonotonous)(a,H=>H.modified.startLineNumber<=A.modified.startLineNumber),O=Math.max(A.original.startLineNumber-R.original.startLineNumber,A.modified.startLineNumber-N.modified.startLineNumber),x=T.findLastMonotonous(H=>H.original.startLineNumber<A.original.endLineNumberExclusive),F=(0,L.findLastMonotonous)(a,H=>H.modified.startLineNumber<A.modified.endLineNumberExclusive),W=Math.max(x.original.endLineNumberExclusive-A.original.endLineNumberExclusive,F.modified.endLineNumberExclusive-A.modified.endLineNumberExclusive);let z;for(z=0;z<O;z++){const H=A.original.startLineNumber-z-1,K=A.modified.startLineNumber-z-1;if(H>m.length||K>h.length||D.contains(K)||I.contains(H)||!g(m[H-1],h[K-1],v))break}z>0&&(I.addRange(new f.LineRange(A.original.startLineNumber-z,A.original.startLineNumber)),D.addRange(new f.LineRange(A.modified.startLineNumber-z,A.modified.startLineNumber)));let q;for(q=0;q<W;q++){const H=A.original.endLineNumberExclusive+q,K=A.modified.endLineNumberExclusive+q;if(H>m.length||K>h.length||D.contains(K)||I.contains(H)||!g(m[H-1],h[K-1],v))break}q>0&&(I.addRange(new f.LineRange(A.original.endLineNumberExclusive,A.original.endLineNumberExclusive+q)),D.addRange(new f.LineRange(A.modified.endLineNumberExclusive,A.modified.endLineNumberExclusive+q))),(z>0||q>0)&&(C[M]=new k.LineRangeMapping(new f.LineRange(A.original.startLineNumber-z,A.original.endLineNumberExclusive+q),new f.LineRange(A.modified.startLineNumber-z,A.modified.endLineNumberExclusive+q)))}return C}function g(a,r,d){if(a.trim()===r.trim())return!0;if(a.length>300&&r.length>300)return!1;const h=new p.MyersDiffAlgorithm().compute(new _.LinesSliceCharSequence([a],new n.Range(1,1,1,a.length),!1),new _.LinesSliceCharSequence([r],new n.Range(1,1,1,r.length),!1),d);let v=0;const C=c.SequenceDiff.invert(h.diffs,a.length);for(const I of C)I.seq1Range.forEach(T=>{(0,b.isSpace)(a.charCodeAt(T))||v++});function w(I){let T=0;for(let M=0;M<a.length;M++)(0,b.isSpace)(I.charCodeAt(M))||T++;return T}const S=w(a.length>r.length?a:r);return v/S>.6&&S>10}function u(a){if(a.length===0)return a;a.sort((0,E.compareBy)(d=>d.original.startLineNumber,E.numberComparator));const r=[a[0]];for(let d=1;d<a.length;d++){const m=r[r.length-1],h=a[d],v=h.original.startLineNumber-m.original.endLineNumberExclusive,C=h.modified.startLineNumber-m.modified.endLineNumberExclusive;if(v>=0&&C>=0&&v+C<=2){r[r.length-1]=m.join(h);continue}r.push(h)}return r}function l(a,r){const d=new L.MonotonousArray(a);return r=r.filter(m=>{const h=d.findLastMonotonous(w=>w.original.startLineNumber<m.original.endLineNumberExclusive)||new k.LineRangeMapping(new f.LineRange(1,1),new f.LineRange(1,1)),v=(0,L.findLastMonotonous)(a,w=>w.modified.startLineNumber<m.modified.endLineNumberExclusive);return h!==v}),r}}),define(oe[331],re([1,0,13,89,56,69,4,170,569,328,570,329,568,330,243,104]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultLinesDiffComputer=void 0,e.lineRangeMappingFromRangeMappings=u,e.getLineRangeMapping=l;class g{constructor(){this.dynamicProgrammingDiffing=new _.DynamicProgrammingDiffing,this.myersDiffingAlgorithm=new b.MyersDiffAlgorithm}computeDiff(d,m,h){if(d.length<=1&&(0,c.equals)(d,m,(H,K)=>H===K))return new i.LinesDiff([],[],!1);if(d.length===1&&d[0].length===0||m.length===1&&m[0].length===0)return new i.LinesDiff([new o.DetailedLineRangeMapping(new E.LineRange(1,d.length+1),new E.LineRange(1,m.length+1),[new o.RangeMapping(new y.Range(1,1,d.length,d[d.length-1].length+1),new y.Range(1,1,m.length,m[m.length-1].length+1))])],[],!1);const v=h.maxComputationTimeMs===0?f.InfiniteTimeout.instance:new f.DateTimeout(h.maxComputationTimeMs),C=!h.ignoreTrimWhitespace,w=new Map;function S(H){let K=w.get(H);return K===void 0&&(K=w.size,w.set(H,K)),K}const D=d.map(H=>S(H.trim())),I=m.map(H=>S(H.trim())),T=new s.LineSequence(D,d),M=new s.LineSequence(I,m),A=T.length+M.length<1700?this.dynamicProgrammingDiffing.compute(T,M,v,(H,K)=>d[H]===m[K]?m[K].length===0?.1:1+Math.log(1+m[K].length):.99):this.myersDiffingAlgorithm.compute(T,M,v);let R=A.diffs,N=A.hitTimeout;R=(0,n.optimizeSequenceDiffs)(T,M,R),R=(0,n.removeVeryShortMatchingLinesBetweenDiffs)(T,M,R);const O=[],x=H=>{if(C)for(let K=0;K<H;K++){const U=F+K,Y=W+K;if(d[U]!==m[Y]){const Q=this.refineDiff(d,m,new f.SequenceDiff(new L.OffsetRange(U,U+1),new L.OffsetRange(Y,Y+1)),v,C);for(const X of Q.mappings)O.push(X);Q.hitTimeout&&(N=!0)}}};let F=0,W=0;for(const H of R){(0,k.assertFn)(()=>H.seq1Range.start-F===H.seq2Range.start-W);const K=H.seq1Range.start-F;x(K),F=H.seq1Range.endExclusive,W=H.seq2Range.endExclusive;const U=this.refineDiff(d,m,H,v,C);U.hitTimeout&&(N=!0);for(const Y of U.mappings)O.push(Y)}x(d.length-F);const z=u(O,d,m);let q=[];return h.computeMoves&&(q=this.computeMoves(z,d,m,D,I,v,C)),(0,k.assertFn)(()=>{function H(U,Y){if(U.lineNumber<1||U.lineNumber>Y.length)return!1;const Q=Y[U.lineNumber-1];return!(U.column<1||U.column>Q.length+1)}function K(U,Y){return!(U.startLineNumber<1||U.startLineNumber>Y.length+1||U.endLineNumberExclusive<1||U.endLineNumberExclusive>Y.length+1)}for(const U of z){if(!U.innerChanges)return!1;for(const Y of U.innerChanges)if(!(H(Y.modifiedRange.getStartPosition(),m)&&H(Y.modifiedRange.getEndPosition(),m)&&H(Y.originalRange.getStartPosition(),d)&&H(Y.originalRange.getEndPosition(),d)))return!1;if(!K(U.modified,m)||!K(U.original,d))return!1}return!0}),new i.LinesDiff(z,q,N)}computeMoves(d,m,h,v,C,w,S){return(0,p.computeMovedLines)(d,m,h,v,C,w).map(T=>{const M=this.refineDiff(m,h,new f.SequenceDiff(T.original.toOffsetRange(),T.modified.toOffsetRange()),w,S),A=u(M.mappings,m,h,!0);return new i.MovedText(T,A)})}refineDiff(d,m,h,v,C){const S=a(h).toRangeMapping2(d,m),D=new t.LinesSliceCharSequence(d,S.originalRange,C),I=new t.LinesSliceCharSequence(m,S.modifiedRange,C),T=D.length+I.length<500?this.dynamicProgrammingDiffing.compute(D,I,v):this.myersDiffingAlgorithm.compute(D,I,v),M=!1;let A=T.diffs;M&&f.SequenceDiff.assertSorted(A),A=(0,n.optimizeSequenceDiffs)(D,I,A),M&&f.SequenceDiff.assertSorted(A),A=(0,n.extendDiffsToEntireWordIfAppropriate)(D,I,A),M&&f.SequenceDiff.assertSorted(A),A=(0,n.removeShortMatches)(D,I,A),M&&f.SequenceDiff.assertSorted(A),A=(0,n.removeVeryShortMatchingTextBetweenLongDiffs)(D,I,A),M&&f.SequenceDiff.assertSorted(A);const R=A.map(N=>new o.RangeMapping(D.translateRange(N.seq1Range),I.translateRange(N.seq2Range)));return M&&o.RangeMapping.assertSorted(R),{mappings:R,hitTimeout:T.hitTimeout}}}e.DefaultLinesDiffComputer=g;function u(r,d,m,h=!1){const v=[];for(const C of(0,c.groupAdjacentBy)(r.map(w=>l(w,d,m)),(w,S)=>w.original.overlapOrTouch(S.original)||w.modified.overlapOrTouch(S.modified))){const w=C[0],S=C[C.length-1];v.push(new o.DetailedLineRangeMapping(w.original.join(S.original),w.modified.join(S.modified),C.map(D=>D.innerChanges[0])))}return(0,k.assertFn)(()=>!h&&v.length>0&&(v[0].modified.startLineNumber!==v[0].original.startLineNumber||m.length-v[v.length-1].modified.endLineNumberExclusive!==d.length-v[v.length-1].original.endLineNumberExclusive)?!1:(0,k.checkAdjacentItems)(v,(C,w)=>w.original.startLineNumber-C.original.endLineNumberExclusive===w.modified.startLineNumber-C.modified.endLineNumberExclusive&&C.original.endLineNumberExclusive<w.original.startLineNumber&&C.modified.endLineNumberExclusive<w.modified.startLineNumber)),v}function l(r,d,m){let h=0,v=0;r.modifiedRange.endColumn===1&&r.originalRange.endColumn===1&&r.originalRange.startLineNumber+h<=r.originalRange.endLineNumber&&r.modifiedRange.startLineNumber+h<=r.modifiedRange.endLineNumber&&(v=-1),r.modifiedRange.startColumn-1>=m[r.modifiedRange.startLineNumber-1].length&&r.originalRange.startColumn-1>=d[r.originalRange.startLineNumber-1].length&&r.originalRange.startLineNumber<=r.originalRange.endLineNumber+v&&r.modifiedRange.startLineNumber<=r.modifiedRange.endLineNumber+v&&(h=1);const C=new E.LineRange(r.originalRange.startLineNumber+h,r.originalRange.endLineNumber+1+v),w=new E.LineRange(r.modifiedRange.startLineNumber+h,r.modifiedRange.endLineNumber+1+v);return new o.DetailedLineRangeMapping(C,w,[r])}function a(r){return new o.LineRangeMapping(new E.LineRange(r.seq1Range.start+1,r.seq1Range.endExclusive+1),new E.LineRange(r.seq2Range.start+1,r.seq2Range.endExclusive+1))}}),define(oe[571],re([1,0,190,243,104,11,4,89,56]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffComputer=e.LegacyLinesDiffComputer=void 0;const b=3;class p{computeDiff(m,h,v){const w=new u(m,h,{maxComputationTime:v.maxComputationTimeMs,shouldIgnoreTrimWhitespace:v.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),S=[];let D=null;for(const I of w.changes){let T;I.originalEndLineNumber===0?T=new _.LineRange(I.originalStartLineNumber+1,I.originalStartLineNumber+1):T=new _.LineRange(I.originalStartLineNumber,I.originalEndLineNumber+1);let M;I.modifiedEndLineNumber===0?M=new _.LineRange(I.modifiedStartLineNumber+1,I.modifiedStartLineNumber+1):M=new _.LineRange(I.modifiedStartLineNumber,I.modifiedEndLineNumber+1);let A=new E.DetailedLineRangeMapping(T,M,I.charChanges?.map(R=>new E.RangeMapping(new y.Range(R.originalStartLineNumber,R.originalStartColumn,R.originalEndLineNumber,R.originalEndColumn),new y.Range(R.modifiedStartLineNumber,R.modifiedStartColumn,R.modifiedEndLineNumber,R.modifiedEndColumn))));D&&(D.modified.endLineNumberExclusive===A.modified.startLineNumber||D.original.endLineNumberExclusive===A.original.startLineNumber)&&(A=new E.DetailedLineRangeMapping(D.original.join(A.original),D.modified.join(A.modified),D.innerChanges&&A.innerChanges?D.innerChanges.concat(A.innerChanges):void 0),S.pop()),S.push(A),D=A}return(0,f.assertFn)(()=>(0,f.checkAdjacentItems)(S,(I,T)=>T.original.startLineNumber-I.original.endLineNumberExclusive===T.modified.startLineNumber-I.modified.endLineNumberExclusive&&I.original.endLineNumberExclusive<T.original.startLineNumber&&I.modified.endLineNumberExclusive<T.modified.startLineNumber)),new k.LinesDiff(S,[],w.quitEarly)}}e.LegacyLinesDiffComputer=p;function n(d,m,h,v){return new c.LcsDiff(d,m,h).ComputeDiff(v)}class s{constructor(m){const h=[],v=[];for(let C=0,w=m.length;C<w;C++)h[C]=l(m[C],1),v[C]=a(m[C],1);this.lines=m,this._startColumns=h,this._endColumns=v}getElements(){const m=[];for(let h=0,v=this.lines.length;h<v;h++)m[h]=this.lines[h].substring(this._startColumns[h]-1,this._endColumns[h]-1);return m}getStrictElement(m){return this.lines[m]}getStartLineNumber(m){return m+1}getEndLineNumber(m){return m+1}createCharSequence(m,h,v){const C=[],w=[],S=[];let D=0;for(let I=h;I<=v;I++){const T=this.lines[I],M=m?this._startColumns[I]:1,A=m?this._endColumns[I]:T.length+1;for(let R=M;R<A;R++)C[D]=T.charCodeAt(R-1),w[D]=I+1,S[D]=R,D++;!m&&I<v&&(C[D]=10,w[D]=I+1,S[D]=T.length+1,D++)}return new t(C,w,S)}}class t{constructor(m,h,v){this._charCodes=m,this._lineNumbers=h,this._columns=v}toString(){return"["+this._charCodes.map((m,h)=>(m===10?"\\n":String.fromCharCode(m))+`-(${this._lineNumbers[h]},${this._columns[h]})`).join(", ")+"]"}_assertIndex(m,h){if(m<0||m>=h.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(m){return m>0&&m===this._lineNumbers.length?this.getEndLineNumber(m-1):(this._assertIndex(m,this._lineNumbers),this._lineNumbers[m])}getEndLineNumber(m){return m===-1?this.getStartLineNumber(m+1):(this._assertIndex(m,this._lineNumbers),this._charCodes[m]===10?this._lineNumbers[m]+1:this._lineNumbers[m])}getStartColumn(m){return m>0&&m===this._columns.length?this.getEndColumn(m-1):(this._assertIndex(m,this._columns),this._columns[m])}getEndColumn(m){return m===-1?this.getStartColumn(m+1):(this._assertIndex(m,this._columns),this._charCodes[m]===10?1:this._columns[m]+1)}}class i{constructor(m,h,v,C,w,S,D,I){this.originalStartLineNumber=m,this.originalStartColumn=h,this.originalEndLineNumber=v,this.originalEndColumn=C,this.modifiedStartLineNumber=w,this.modifiedStartColumn=S,this.modifiedEndLineNumber=D,this.modifiedEndColumn=I}static createFromDiffChange(m,h,v){const C=h.getStartLineNumber(m.originalStart),w=h.getStartColumn(m.originalStart),S=h.getEndLineNumber(m.originalStart+m.originalLength-1),D=h.getEndColumn(m.originalStart+m.originalLength-1),I=v.getStartLineNumber(m.modifiedStart),T=v.getStartColumn(m.modifiedStart),M=v.getEndLineNumber(m.modifiedStart+m.modifiedLength-1),A=v.getEndColumn(m.modifiedStart+m.modifiedLength-1);return new i(C,w,S,D,I,T,M,A)}}function o(d){if(d.length<=1)return d;const m=[d[0]];let h=m[0];for(let v=1,C=d.length;v<C;v++){const w=d[v],S=w.originalStart-(h.originalStart+h.originalLength),D=w.modifiedStart-(h.modifiedStart+h.modifiedLength);Math.min(S,D)<b?(h.originalLength=w.originalStart+w.originalLength-h.originalStart,h.modifiedLength=w.modifiedStart+w.modifiedLength-h.modifiedStart):(m.push(w),h=w)}return m}class g{constructor(m,h,v,C,w){this.originalStartLineNumber=m,this.originalEndLineNumber=h,this.modifiedStartLineNumber=v,this.modifiedEndLineNumber=C,this.charChanges=w}static createFromDiffResult(m,h,v,C,w,S,D){let I,T,M,A,R;if(h.originalLength===0?(I=v.getStartLineNumber(h.originalStart)-1,T=0):(I=v.getStartLineNumber(h.originalStart),T=v.getEndLineNumber(h.originalStart+h.originalLength-1)),h.modifiedLength===0?(M=C.getStartLineNumber(h.modifiedStart)-1,A=0):(M=C.getStartLineNumber(h.modifiedStart),A=C.getEndLineNumber(h.modifiedStart+h.modifiedLength-1)),S&&h.originalLength>0&&h.originalLength<20&&h.modifiedLength>0&&h.modifiedLength<20&&w()){const N=v.createCharSequence(m,h.originalStart,h.originalStart+h.originalLength-1),O=C.createCharSequence(m,h.modifiedStart,h.modifiedStart+h.modifiedLength-1);if(N.getElements().length>0&&O.getElements().length>0){let x=n(N,O,w,!0).changes;D&&(x=o(x)),R=[];for(let F=0,W=x.length;F<W;F++)R.push(i.createFromDiffChange(x[F],N,O))}}return new g(I,T,M,A,R)}}class u{constructor(m,h,v){this.shouldComputeCharChanges=v.shouldComputeCharChanges,this.shouldPostProcessCharChanges=v.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=v.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=v.shouldMakePrettyDiff,this.originalLines=m,this.modifiedLines=h,this.original=new s(m),this.modified=new s(h),this.continueLineDiff=r(v.maxComputationTime),this.continueCharDiff=r(v.maxComputationTime===0?0:Math.min(v.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const m=n(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),h=m.changes,v=m.quitEarly;if(this.shouldIgnoreTrimWhitespace){const D=[];for(let I=0,T=h.length;I<T;I++)D.push(g.createFromDiffResult(this.shouldIgnoreTrimWhitespace,h[I],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:v,changes:D}}const C=[];let w=0,S=0;for(let D=-1,I=h.length;D<I;D++){const T=D+1<I?h[D+1]:null,M=T?T.originalStart:this.originalLines.length,A=T?T.modifiedStart:this.modifiedLines.length;for(;w<M&&S<A;){const R=this.originalLines[w],N=this.modifiedLines[S];if(R!==N){{let O=l(R,1),x=l(N,1);for(;O>1&&x>1;){const F=R.charCodeAt(O-2),W=N.charCodeAt(x-2);if(F!==W)break;O--,x--}(O>1||x>1)&&this._pushTrimWhitespaceCharChange(C,w+1,1,O,S+1,1,x)}{let O=a(R,1),x=a(N,1);const F=R.length+1,W=N.length+1;for(;O<F&&x<W;){const z=R.charCodeAt(O-1),q=R.charCodeAt(x-1);if(z!==q)break;O++,x++}(O<F||x<W)&&this._pushTrimWhitespaceCharChange(C,w+1,O,F,S+1,x,W)}}w++,S++}T&&(C.push(g.createFromDiffResult(this.shouldIgnoreTrimWhitespace,T,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),w+=T.originalLength,S+=T.modifiedLength)}return{quitEarly:v,changes:C}}_pushTrimWhitespaceCharChange(m,h,v,C,w,S,D){if(this._mergeTrimWhitespaceCharChange(m,h,v,C,w,S,D))return;let I;this.shouldComputeCharChanges&&(I=[new i(h,v,h,C,w,S,w,D)]),m.push(new g(h,h,w,w,I))}_mergeTrimWhitespaceCharChange(m,h,v,C,w,S,D){const I=m.length;if(I===0)return!1;const T=m[I-1];return T.originalEndLineNumber===0||T.modifiedEndLineNumber===0?!1:T.originalEndLineNumber===h&&T.modifiedEndLineNumber===w?(this.shouldComputeCharChanges&&T.charChanges&&T.charChanges.push(new i(h,v,h,C,w,S,w,D)),!0):T.originalEndLineNumber+1===h&&T.modifiedEndLineNumber+1===w?(T.originalEndLineNumber=h,T.modifiedEndLineNumber=w,this.shouldComputeCharChanges&&T.charChanges&&T.charChanges.push(new i(h,v,h,C,w,S,w,D)),!0):!1}}e.DiffComputer=u;function l(d,m){const h=L.firstNonWhitespaceIndex(d);return h===-1?m:h+1}function a(d,m){const h=L.lastNonWhitespaceIndex(d);return h===-1?m:h+2}function r(d){if(d===0)return()=>!0;const m=Date.now();return()=>Date.now()-m<d}}),define(oe[572],re([1,0,571,331]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linesDiffComputers=void 0,e.linesDiffComputers={getLegacy:()=>new c.LegacyLinesDiffComputer,getDefault:()=>new k.DefaultLinesDiffComputer}}),define(oe[332],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InternalEditorAction=void 0;class c{constructor(E,L,y,f,_,b,p){this.id=E,this.label=L,this.alias=y,this.metadata=f,this._precondition=_,this._run=b,this._contextKeyService=p}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(E){return this.isSupported()?this._run(E):Promise.resolve(void 0)}}e.InternalEditorAction=c}),define(oe[198],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorType=void 0,e.EditorType={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"}}),define(oe[171],re([1,0,198]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isCodeEditor=k,e.isDiffEditor=E,e.isCompositeEditor=L,e.getCodeEditor=y;function k(f){return f&&typeof f.getEditorType=="function"?f.getEditorType()===c.EditorType.ICodeEditor:!1}function E(f){return f&&typeof f.getEditorType=="function"?f.getEditorType()===c.EditorType.IDiffEditor:!1}function L(f){return!!f&&typeof f=="object"&&typeof f.onDidChangeActiveEditor=="function"}function y(f){return k(f)?f:E(f)?f.getModifiedEditor():L(f)&&k(f.activeCodeEditor)?f.activeCodeEditor:null}}),define(oe[146],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerEditorFeature=k,e.getEditorFeatures=E;const c=[];function k(L){c.push(L)}function E(){return c.slice(0)}}),define(oe[573],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorTheme=void 0;class c{get type(){return this._theme.type}get value(){return this._theme}constructor(E){this._theme=E}update(E){this._theme=E}getColor(E){return this._theme.getColor(E)}}e.EditorTheme=c}),define(oe[147],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenMetadata=void 0;class c{static getLanguageId(E){return(E&255)>>>0}static getTokenType(E){return(E&768)>>>8}static containsBalancedBrackets(E){return(E&1024)!==0}static getFontStyle(E){return(E&30720)>>>11}static getForeground(E){return(E&16744448)>>>15}static getBackground(E){return(E&4278190080)>>>24}static getClassNameFromMetadata(E){let y="mtk"+this.getForeground(E);const f=this.getFontStyle(E);return f&1&&(y+=" mtki"),f&2&&(y+=" mtkb"),f&4&&(y+=" mtku"),f&8&&(y+=" mtks"),y}static getInlineStyleFromMetadata(E,L){const y=this.getForeground(E),f=this.getFontStyle(E);let _=`color: ${L[y]};`;f&1&&(_+="font-style: italic;"),f&2&&(_+="font-weight: bold;");let b="";return f&4&&(b+=" underline"),f&8&&(b+=" line-through"),b&&(_+=`text-decoration:${b};`),_}static getPresentationFromMetadata(E){const L=this.getForeground(E),y=this.getFontStyle(E);return{foreground:L,italic:!!(y&1),bold:!!(y&2),underline:!!(y&4),strikethrough:!!(y&8)}}}e.TokenMetadata=c}),define(oe[333],re([1,0,304,99]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.score=E;function E(L,y,f,_,b,p){if(Array.isArray(L)){let n=0;for(const s of L){const t=E(s,y,f,_,b,p);if(t===10)return t;t>n&&(n=t)}return n}else{if(typeof L=="string")return _?L==="*"?5:L===f?10:0:0;if(L){const{language:n,pattern:s,scheme:t,hasAccessToAllModels:i,notebookType:o}=L;if(!_&&!i)return 0;o&&b&&(y=b);let g=0;if(t)if(t===y.scheme)g=10;else if(t==="*")g=5;else return 0;if(n)if(n===f)g=10;else if(n==="*")g=Math.max(g,5);else return 0;if(o)if(o===p)g=10;else if(o==="*"&&p!==void 0)g=Math.max(g,5);else return 0;if(s){let u;if(typeof s=="string"?u=s:u={...s,base:(0,k.normalize)(s.base)},u===y.fsPath||(0,c.match)(u,y.fsPath))g=10;else return 0}return g}else return 0}}}),define(oe[574],re([1,0,33]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeDefaultDocumentColors=n;function k(s){const t=[];for(const i of s){const o=Number(i);(o||o===0&&i.replace(/\s/g,"")!=="")&&t.push(o)}return t}function E(s,t,i,o){return{red:s/255,blue:i/255,green:t/255,alpha:o}}function L(s,t){const i=t.index,o=t[0].length;if(!i)return;const g=s.positionAt(i);return{startLineNumber:g.lineNumber,startColumn:g.column,endLineNumber:g.lineNumber,endColumn:g.column+o}}function y(s,t){if(!s)return;const i=c.Color.Format.CSS.parseHex(t);if(i)return{range:s,color:E(i.rgba.r,i.rgba.g,i.rgba.b,i.rgba.a)}}function f(s,t,i){if(!s||t.length!==1)return;const g=t[0].values(),u=k(g);return{range:s,color:E(u[0],u[1],u[2],i?u[3]:1)}}function _(s,t,i){if(!s||t.length!==1)return;const g=t[0].values(),u=k(g),l=new c.Color(new c.HSLA(u[0],u[1]/100,u[2]/100,i?u[3]:1));return{range:s,color:E(l.rgba.r,l.rgba.g,l.rgba.b,l.rgba.a)}}function b(s,t){return typeof s=="string"?[...s.matchAll(t)]:s.findMatches(t)}function p(s){const t=[],o=b(s,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|(#)([A-Fa-f0-9]{3})\b|(#)([A-Fa-f0-9]{4})\b|(#)([A-Fa-f0-9]{6})\b|(#)([A-Fa-f0-9]{8})\b/gm);if(o.length>0)for(const g of o){const u=g.filter(d=>d!==void 0),l=u[1],a=u[2];if(!a)continue;let r;if(l==="rgb"){const d=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;r=f(L(s,g),b(a,d),!1)}else if(l==="rgba"){const d=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=f(L(s,g),b(a,d),!0)}else if(l==="hsl"){const d=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;r=_(L(s,g),b(a,d),!1)}else if(l==="hsla"){const d=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;r=_(L(s,g),b(a,d),!0)}else l==="#"&&(r=y(L(s,g),l+a));r&&t.push(r)}return t}function n(s){return!s||typeof s.getValue!="function"||typeof s.positionAt!="function"?[]:p(s)}}),define(oe[130],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoClosingPairs=e.StandardAutoClosingPairConditional=e.IndentAction=void 0;var c;(function(y){y[y.None=0]="None",y[y.Indent=1]="Indent",y[y.IndentOutdent=2]="IndentOutdent",y[y.Outdent=3]="Outdent"})(c||(e.IndentAction=c={}));class k{constructor(f){if(this._neutralCharacter=null,this._neutralCharacterSearched=!1,this.open=f.open,this.close=f.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(f.notIn))for(let _=0,b=f.notIn.length;_<b;_++)switch(f.notIn[_]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(f){switch(f){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(f,_){if(f.getTokenCount()===0)return!0;const b=f.findTokenIndexAtOffset(_-2),p=f.getStandardTokenType(b);return this.isOK(p)}_findNeutralCharacterInRange(f,_){for(let b=f;b<=_;b++){const p=String.fromCharCode(b);if(!this.open.includes(p)&&!this.close.includes(p))return p}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}}e.StandardAutoClosingPairConditional=k;class E{constructor(f){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(const _ of f)L(this.autoClosingPairsOpenByStart,_.open.charAt(0),_),L(this.autoClosingPairsOpenByEnd,_.open.charAt(_.open.length-1),_),L(this.autoClosingPairsCloseByStart,_.close.charAt(0),_),L(this.autoClosingPairsCloseByEnd,_.close.charAt(_.close.length-1),_),_.close.length===1&&_.open.length===1&&L(this.autoClosingPairsCloseSingleChar,_.close,_)}}e.AutoClosingPairs=E;function L(y,f,_){y.has(f)?y.get(f).push(_):y.set(f,[_])}}),define(oe[575],re([1,0,143]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinkComputer=e.StateMachine=void 0,e.computeLinks=p;class k{constructor(s,t,i){const o=new Uint8Array(s*t);for(let g=0,u=s*t;g<u;g++)o[g]=i;this._data=o,this.rows=s,this.cols=t}get(s,t){return this._data[s*this.cols+t]}set(s,t,i){this._data[s*this.cols+t]=i}}class E{constructor(s){let t=0,i=0;for(let g=0,u=s.length;g<u;g++){const[l,a,r]=s[g];a>t&&(t=a),l>i&&(i=l),r>i&&(i=r)}t++,i++;const o=new k(i,t,0);for(let g=0,u=s.length;g<u;g++){const[l,a,r]=s[g];o.set(l,a,r)}this._states=o,this._maxCharCode=t}nextState(s,t){return t<0||t>=this._maxCharCode?0:this._states.get(s,t)}}e.StateMachine=E;let L=null;function y(){return L===null&&(L=new E([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),L}let f=null;function _(){if(f===null){f=new c.CharacterClassifier(0);const n=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let t=0;t<n.length;t++)f.set(n.charCodeAt(t),1);const s=".,;:";for(let t=0;t<s.length;t++)f.set(s.charCodeAt(t),2)}return f}class b{static _createLink(s,t,i,o,g){let u=g-1;do{const l=t.charCodeAt(u);if(s.get(l)!==2)break;u--}while(u>o);if(o>0){const l=t.charCodeAt(o-1),a=t.charCodeAt(u);(l===40&&a===41||l===91&&a===93||l===123&&a===125)&&u--}return{range:{startLineNumber:i,startColumn:o+1,endLineNumber:i,endColumn:u+2},url:t.substring(o,u+1)}}static computeLinks(s,t=y()){const i=_(),o=[];for(let g=1,u=s.getLineCount();g<=u;g++){const l=s.getLineContent(g),a=l.length;let r=0,d=0,m=0,h=1,v=!1,C=!1,w=!1,S=!1;for(;r<a;){let D=!1;const I=l.charCodeAt(r);if(h===13){let T;switch(I){case 40:v=!0,T=0;break;case 41:T=v?0:1;break;case 91:w=!0,C=!0,T=0;break;case 93:w=!1,T=C?0:1;break;case 123:S=!0,T=0;break;case 125:T=S?0:1;break;case 39:case 34:case 96:m===I?T=1:m===39||m===34||m===96?T=0:T=1;break;case 42:T=m===42?1:0;break;case 124:T=m===124?1:0;break;case 32:T=w?0:1;break;default:T=i.get(I)}T===1&&(o.push(b._createLink(i,l,g,d,r)),D=!0)}else if(h===12){let T;I===91?(C=!0,T=0):T=i.get(I),T===1?D=!0:h=13}else h=t.nextState(h,I),h===0&&(D=!0);D&&(h=1,v=!1,C=!1,S=!1,d=r+1,m=I),r++}h===13&&o.push(b._createLink(i,l,g,d,a))}return o}}e.LinkComputer=b;function p(n){return!n||typeof n.getLineCount!="function"||typeof n.getLineContent!="function"?[]:b.computeLinks(n)}}),define(oe[172],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScopedLineTokens=void 0,e.createScopedLineTokens=c,e.ignoreBracketsInToken=E;function c(L,y){const f=L.getCount(),_=L.findTokenIndexAtOffset(y),b=L.getLanguageId(_);let p=_;for(;p+1<f&&L.getLanguageId(p+1)===b;)p++;let n=_;for(;n>0&&L.getLanguageId(n-1)===b;)n--;return new k(L,b,n,p+1,L.getStartOffset(n),L.getEndOffset(p))}class k{constructor(y,f,_,b,p,n){this._scopedLineTokensBrand=void 0,this._actual=y,this.languageId=f,this._firstTokenIndex=_,this._lastTokenIndex=b,this.firstCharOffset=p,this._lastCharOffset=n,this.languageIdCodec=y.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(y){return this._actual.getLineContent().substring(0,this.firstCharOffset+y)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(y){return this._actual.findTokenIndexAtOffset(y+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(y){return this._actual.getStandardTokenType(y+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}e.ScopedLineTokens=k;function E(L){return(L&3)!==0}}),define(oe[77],re([1,0,9,4,23,172,93,240]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditOperationResult=e.SingleCursorState=e.PartialViewCursorState=e.PartialModelCursorState=e.CursorState=e.CursorConfiguration=void 0,e.isQuote=u;const _=()=>!0,b=()=>!1,p=l=>l===" "||l==="	";class n{static shouldRecreate(a){return a.hasChanged(146)||a.hasChanged(132)||a.hasChanged(37)||a.hasChanged(77)||a.hasChanged(79)||a.hasChanged(80)||a.hasChanged(6)||a.hasChanged(7)||a.hasChanged(11)||a.hasChanged(9)||a.hasChanged(10)||a.hasChanged(14)||a.hasChanged(129)||a.hasChanged(50)||a.hasChanged(92)||a.hasChanged(131)}constructor(a,r,d,m){this.languageConfigurationService=m,this._cursorMoveConfigurationBrand=void 0,this._languageId=a;const h=d.options,v=h.get(146),C=h.get(50);this.readOnly=h.get(92),this.tabSize=r.tabSize,this.indentSize=r.indentSize,this.insertSpaces=r.insertSpaces,this.stickyTabStops=h.get(117),this.lineHeight=C.lineHeight,this.typicalHalfwidthCharacterWidth=C.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(v.height/this.lineHeight)-2),this.useTabStops=h.get(129),this.wordSeparators=h.get(132),this.emptySelectionClipboard=h.get(37),this.copyWithSyntaxHighlighting=h.get(25),this.multiCursorMergeOverlapping=h.get(77),this.multiCursorPaste=h.get(79),this.multiCursorLimit=h.get(80),this.autoClosingBrackets=h.get(6),this.autoClosingComments=h.get(7),this.autoClosingQuotes=h.get(11),this.autoClosingDelete=h.get(9),this.autoClosingOvertype=h.get(10),this.autoSurround=h.get(14),this.autoIndent=h.get(12),this.wordSegmenterLocales=h.get(131),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(a,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(a,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(a,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(a).getAutoClosingPairs();const w=this.languageConfigurationService.getLanguageConfiguration(a).getSurroundingPairs();if(w)for(const D of w)this.surroundingPairs[D.open]=D.close;const S=this.languageConfigurationService.getLanguageConfiguration(a).comments;this.blockCommentStartToken=S?.blockCommentStartToken??null}get electricChars(){if(!this._electricChars){this._electricChars={};const a=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(a)for(const r of a)this._electricChars[r]=!0}return this._electricChars}onElectricCharacter(a,r,d){const m=(0,L.createScopedLineTokens)(r,d-1),h=this.languageConfigurationService.getLanguageConfiguration(m.languageId).electricCharacter;return h?h.onElectricCharacter(a,m,d-m.firstCharOffset):null}normalizeIndentation(a){return(0,f.normalizeIndentation)(a,this.indentSize,this.insertSpaces)}_getShouldAutoClose(a,r,d){switch(r){case"beforeWhitespace":return p;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(a,d);case"always":return _;case"never":return b}}_getLanguageDefinedShouldAutoClose(a,r){const d=this.languageConfigurationService.getLanguageConfiguration(a).getAutoCloseBeforeSet(r);return m=>d.indexOf(m)!==-1}visibleColumnFromColumn(a,r){return y.CursorColumns.visibleColumnFromColumn(a.getLineContent(r.lineNumber),r.column,this.tabSize)}columnFromVisibleColumn(a,r,d){const m=y.CursorColumns.columnFromVisibleColumn(a.getLineContent(r),d,this.tabSize),h=a.getLineMinColumn(r);if(m<h)return h;const v=a.getLineMaxColumn(r);return m>v?v:m}}e.CursorConfiguration=n;class s{static fromModelState(a){return new t(a)}static fromViewState(a){return new i(a)}static fromModelSelection(a){const r=E.Selection.liftSelection(a),d=new o(k.Range.fromPositions(r.getSelectionStart()),0,0,r.getPosition(),0);return s.fromModelState(d)}static fromModelSelections(a){const r=[];for(let d=0,m=a.length;d<m;d++)r[d]=this.fromModelSelection(a[d]);return r}constructor(a,r){this._cursorStateBrand=void 0,this.modelState=a,this.viewState=r}equals(a){return this.viewState.equals(a.viewState)&&this.modelState.equals(a.modelState)}}e.CursorState=s;class t{constructor(a){this.modelState=a,this.viewState=null}}e.PartialModelCursorState=t;class i{constructor(a){this.modelState=null,this.viewState=a}}e.PartialViewCursorState=i;class o{constructor(a,r,d,m,h){this.selectionStart=a,this.selectionStartKind=r,this.selectionStartLeftoverVisibleColumns=d,this.position=m,this.leftoverVisibleColumns=h,this._singleCursorStateBrand=void 0,this.selection=o._computeSelection(this.selectionStart,this.position)}equals(a){return this.selectionStartLeftoverVisibleColumns===a.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===a.leftoverVisibleColumns&&this.selectionStartKind===a.selectionStartKind&&this.position.equals(a.position)&&this.selectionStart.equalsRange(a.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(a,r,d,m){return a?new o(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new c.Position(r,d),m):new o(new k.Range(r,d,r,d),0,m,new c.Position(r,d),m)}static _computeSelection(a,r){return a.isEmpty()||!r.isBeforeOrEqual(a.getStartPosition())?E.Selection.fromPositions(a.getStartPosition(),r):E.Selection.fromPositions(a.getEndPosition(),r)}}e.SingleCursorState=o;class g{constructor(a,r,d){this._editOperationResultBrand=void 0,this.type=a,this.commands=r,this.shouldPushStackElementBefore=d.shouldPushStackElementBefore,this.shouldPushStackElementAfter=d.shouldPushStackElementAfter}}e.EditOperationResult=g;function u(l){return l==="'"||l==='"'||l==="`"}}),define(oe[576],re([1,0,77,9,4]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnSelection=void 0;class L{static columnSelect(f,_,b,p,n,s){const t=Math.abs(n-b)+1,i=b>n,o=p>s,g=p<s,u=[];for(let l=0;l<t;l++){const a=b+(i?-l:l),r=f.columnFromVisibleColumn(_,a,p),d=f.columnFromVisibleColumn(_,a,s),m=f.visibleColumnFromColumn(_,new k.Position(a,r)),h=f.visibleColumnFromColumn(_,new k.Position(a,d));g&&(m>s||h<p)||o&&(h>p||m<s)||u.push(new c.SingleCursorState(new E.Range(a,r,a,r),0,0,new k.Position(a,d),0))}if(u.length===0)for(let l=0;l<t;l++){const a=b+(i?-l:l),r=_.getLineMaxColumn(a);u.push(new c.SingleCursorState(new E.Range(a,r,a,r),0,0,new k.Position(a,r),0))}return{viewStates:u,reversed:i,fromLineNumber:b,fromVisualColumn:p,toLineNumber:n,toVisualColumn:s}}static columnSelectLeft(f,_,b){let p=b.toViewVisualColumn;return p>0&&p--,L.columnSelect(f,_,b.fromViewLineNumber,b.fromViewVisualColumn,b.toViewLineNumber,p)}static columnSelectRight(f,_,b){let p=0;const n=Math.min(b.fromViewLineNumber,b.toViewLineNumber),s=Math.max(b.fromViewLineNumber,b.toViewLineNumber);for(let i=n;i<=s;i++){const o=_.getLineMaxColumn(i),g=f.visibleColumnFromColumn(_,new k.Position(i,o));p=Math.max(p,g)}let t=b.toViewVisualColumn;return t<p&&t++,this.columnSelect(f,_,b.fromViewLineNumber,b.fromViewVisualColumn,b.toViewLineNumber,t)}static columnSelectUp(f,_,b,p){const n=p?f.pageSize:1,s=Math.max(1,b.toViewLineNumber-n);return this.columnSelect(f,_,b.fromViewLineNumber,b.fromViewVisualColumn,s,b.toViewVisualColumn)}static columnSelectDown(f,_,b,p){const n=p?f.pageSize:1,s=Math.min(_.getLineCount(),b.toViewLineNumber+n);return this.columnSelect(f,_,b.fromViewLineNumber,b.fromViewVisualColumn,s,b.toViewVisualColumn)}}e.ColumnSelection=L}),define(oe[244],re([1,0,11,93,9,4,327,77]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoveOperations=e.CursorPosition=void 0;class _{constructor(n,s,t){this._cursorPositionBrand=void 0,this.lineNumber=n,this.column=s,this.leftoverVisibleColumns=t}}e.CursorPosition=_;class b{static leftPosition(n,s){if(s.column>n.getLineMinColumn(s.lineNumber))return s.delta(void 0,-c.prevCharLength(n.getLineContent(s.lineNumber),s.column-1));if(s.lineNumber>1){const t=s.lineNumber-1;return new E.Position(t,n.getLineMaxColumn(t))}else return s}static leftPositionAtomicSoftTabs(n,s,t){if(s.column<=n.getLineIndentColumn(s.lineNumber)){const i=n.getLineMinColumn(s.lineNumber),o=n.getLineContent(s.lineNumber),g=y.AtomicTabMoveOperations.atomicPosition(o,s.column-1,t,0);if(g!==-1&&g+1>=i)return new E.Position(s.lineNumber,g+1)}return this.leftPosition(n,s)}static left(n,s,t){const i=n.stickyTabStops?b.leftPositionAtomicSoftTabs(s,t,n.tabSize):b.leftPosition(s,t);return new _(i.lineNumber,i.column,0)}static moveLeft(n,s,t,i,o){let g,u;if(t.hasSelection()&&!i)g=t.selection.startLineNumber,u=t.selection.startColumn;else{const l=t.position.delta(void 0,-(o-1)),a=s.normalizePosition(b.clipPositionColumn(l,s),0),r=b.left(n,s,a);g=r.lineNumber,u=r.column}return t.move(i,g,u,0)}static clipPositionColumn(n,s){return new E.Position(n.lineNumber,b.clipRange(n.column,s.getLineMinColumn(n.lineNumber),s.getLineMaxColumn(n.lineNumber)))}static clipRange(n,s,t){return n<s?s:n>t?t:n}static rightPosition(n,s,t){return t<n.getLineMaxColumn(s)?t=t+c.nextCharLength(n.getLineContent(s),t-1):s<n.getLineCount()&&(s=s+1,t=n.getLineMinColumn(s)),new E.Position(s,t)}static rightPositionAtomicSoftTabs(n,s,t,i,o){if(t<n.getLineIndentColumn(s)){const g=n.getLineContent(s),u=y.AtomicTabMoveOperations.atomicPosition(g,t-1,i,1);if(u!==-1)return new E.Position(s,u+1)}return this.rightPosition(n,s,t)}static right(n,s,t){const i=n.stickyTabStops?b.rightPositionAtomicSoftTabs(s,t.lineNumber,t.column,n.tabSize,n.indentSize):b.rightPosition(s,t.lineNumber,t.column);return new _(i.lineNumber,i.column,0)}static moveRight(n,s,t,i,o){let g,u;if(t.hasSelection()&&!i)g=t.selection.endLineNumber,u=t.selection.endColumn;else{const l=t.position.delta(void 0,o-1),a=s.normalizePosition(b.clipPositionColumn(l,s),1),r=b.right(n,s,a);g=r.lineNumber,u=r.column}return t.move(i,g,u,0)}static vertical(n,s,t,i,o,g,u,l){const a=k.CursorColumns.visibleColumnFromColumn(s.getLineContent(t),i,n.tabSize)+o,r=s.getLineCount(),d=t===1&&i===1,m=t===r&&i===s.getLineMaxColumn(t),h=g<t?d:m;if(t=g,t<1?(t=1,u?i=s.getLineMinColumn(t):i=Math.min(s.getLineMaxColumn(t),i)):t>r?(t=r,u?i=s.getLineMaxColumn(t):i=Math.min(s.getLineMaxColumn(t),i)):i=n.columnFromVisibleColumn(s,t,a),h?o=0:o=a-k.CursorColumns.visibleColumnFromColumn(s.getLineContent(t),i,n.tabSize),l!==void 0){const v=new E.Position(t,i),C=s.normalizePosition(v,l);o=o+(i-C.column),t=C.lineNumber,i=C.column}return new _(t,i,o)}static down(n,s,t,i,o,g,u){return this.vertical(n,s,t,i,o,t+g,u,4)}static moveDown(n,s,t,i,o){let g,u;t.hasSelection()&&!i?(g=t.selection.endLineNumber,u=t.selection.endColumn):(g=t.position.lineNumber,u=t.position.column);let l=0,a;do if(a=b.down(n,s,g+l,u,t.leftoverVisibleColumns,o,!0),s.normalizePosition(new E.Position(a.lineNumber,a.column),2).lineNumber>g)break;while(l++<10&&g+l<s.getLineCount());return t.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns)}static translateDown(n,s,t){const i=t.selection,o=b.down(n,s,i.selectionStartLineNumber,i.selectionStartColumn,t.selectionStartLeftoverVisibleColumns,1,!1),g=b.down(n,s,i.positionLineNumber,i.positionColumn,t.leftoverVisibleColumns,1,!1);return new f.SingleCursorState(new L.Range(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new E.Position(g.lineNumber,g.column),g.leftoverVisibleColumns)}static up(n,s,t,i,o,g,u){return this.vertical(n,s,t,i,o,t-g,u,3)}static moveUp(n,s,t,i,o){let g,u;t.hasSelection()&&!i?(g=t.selection.startLineNumber,u=t.selection.startColumn):(g=t.position.lineNumber,u=t.position.column);const l=b.up(n,s,g,u,t.leftoverVisibleColumns,o,!0);return t.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(n,s,t){const i=t.selection,o=b.up(n,s,i.selectionStartLineNumber,i.selectionStartColumn,t.selectionStartLeftoverVisibleColumns,1,!1),g=b.up(n,s,i.positionLineNumber,i.positionColumn,t.leftoverVisibleColumns,1,!1);return new f.SingleCursorState(new L.Range(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new E.Position(g.lineNumber,g.column),g.leftoverVisibleColumns)}static _isBlankLine(n,s){return n.getLineFirstNonWhitespaceColumn(s)===0}static moveToPrevBlankLine(n,s,t,i){let o=t.position.lineNumber;for(;o>1&&this._isBlankLine(s,o);)o--;for(;o>1&&!this._isBlankLine(s,o);)o--;return t.move(i,o,s.getLineMinColumn(o),0)}static moveToNextBlankLine(n,s,t,i){const o=s.getLineCount();let g=t.position.lineNumber;for(;g<o&&this._isBlankLine(s,g);)g++;for(;g<o&&!this._isBlankLine(s,g);)g++;return t.move(i,g,s.getLineMinColumn(g),0)}static moveToBeginningOfLine(n,s,t,i){const o=t.position.lineNumber,g=s.getLineMinColumn(o),u=s.getLineFirstNonWhitespaceColumn(o)||g;let l;return t.position.column===u?l=g:l=u,t.move(i,o,l,0)}static moveToEndOfLine(n,s,t,i,o){const g=t.position.lineNumber,u=s.getLineMaxColumn(g);return t.move(i,g,u,o?1073741824-u:0)}static moveToBeginningOfBuffer(n,s,t,i){return t.move(i,1,1,0)}static moveToEndOfBuffer(n,s,t,i){const o=s.getLineCount(),g=s.getLineMaxColumn(o);return t.move(i,o,g,0)}}e.MoveOperations=b}),define(oe[245],re([1,0,11,145,77,93,244,4,9]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteOperations=void 0;class b{static deleteRight(n,s,t,i){const o=[];let g=n!==3;for(let u=0,l=i.length;u<l;u++){const a=i[u];let r=a;if(r.isEmpty()){const d=a.getPosition(),m=y.MoveOperations.right(s,t,d);r=new f.Range(m.lineNumber,m.column,d.lineNumber,d.column)}if(r.isEmpty()){o[u]=null;continue}r.startLineNumber!==r.endLineNumber&&(g=!0),o[u]=new k.ReplaceCommand(r,"")}return[g,o]}static isAutoClosingPairDelete(n,s,t,i,o,g,u){if(s==="never"&&t==="never"||n==="never")return!1;for(let l=0,a=g.length;l<a;l++){const r=g[l],d=r.getPosition();if(!r.isEmpty())return!1;const m=o.getLineContent(d.lineNumber);if(d.column<2||d.column>=m.length+1)return!1;const h=m.charAt(d.column-2),v=i.get(h);if(!v)return!1;if((0,E.isQuote)(h)){if(t==="never")return!1}else if(s==="never")return!1;const C=m.charAt(d.column-1);let w=!1;for(const S of v)S.open===h&&S.close===C&&(w=!0);if(!w)return!1;if(n==="auto"){let S=!1;for(let D=0,I=u.length;D<I;D++){const T=u[D];if(d.lineNumber===T.startLineNumber&&d.column===T.startColumn){S=!0;break}}if(!S)return!1}}return!0}static _runAutoClosingPairDelete(n,s,t){const i=[];for(let o=0,g=t.length;o<g;o++){const u=t[o].getPosition(),l=new f.Range(u.lineNumber,u.column-1,u.lineNumber,u.column+1);i[o]=new k.ReplaceCommand(l,"")}return[!0,i]}static deleteLeft(n,s,t,i,o){if(this.isAutoClosingPairDelete(s.autoClosingDelete,s.autoClosingBrackets,s.autoClosingQuotes,s.autoClosingPairs.autoClosingPairsOpenByEnd,t,i,o))return this._runAutoClosingPairDelete(s,t,i);const g=[];let u=n!==2;for(let l=0,a=i.length;l<a;l++){const r=b.getDeleteRange(i[l],t,s);if(r.isEmpty()){g[l]=null;continue}r.startLineNumber!==r.endLineNumber&&(u=!0),g[l]=new k.ReplaceCommand(r,"")}return[u,g]}static getDeleteRange(n,s,t){if(!n.isEmpty())return n;const i=n.getPosition();if(t.useTabStops&&i.column>1){const o=s.getLineContent(i.lineNumber),g=c.firstNonWhitespaceIndex(o),u=g===-1?o.length+1:g+1;if(i.column<=u){const l=t.visibleColumnFromColumn(s,i),a=L.CursorColumns.prevIndentTabStop(l,t.indentSize),r=t.columnFromVisibleColumn(s,i.lineNumber,a);return new f.Range(i.lineNumber,r,i.lineNumber,i.column)}}return f.Range.fromPositions(b.getPositionAfterDeleteLeft(i,s),i)}static getPositionAfterDeleteLeft(n,s){if(n.column>1){const t=c.getLeftDeleteOffset(n.column-1,s.getLineContent(n.lineNumber));return n.with(void 0,t+1)}else if(n.lineNumber>1){const t=n.lineNumber-1;return new _.Position(t,s.getLineMaxColumn(t))}else return n}static cut(n,s,t){const i=[];let o=null;t.sort((g,u)=>_.Position.compare(g.getStartPosition(),u.getEndPosition()));for(let g=0,u=t.length;g<u;g++){const l=t[g];if(l.isEmpty())if(n.emptySelectionClipboard){const a=l.getPosition();let r,d,m,h;a.lineNumber<s.getLineCount()?(r=a.lineNumber,d=1,m=a.lineNumber+1,h=1):a.lineNumber>1&&o?.endLineNumber!==a.lineNumber?(r=a.lineNumber-1,d=s.getLineMaxColumn(a.lineNumber-1),m=a.lineNumber,h=s.getLineMaxColumn(a.lineNumber)):(r=a.lineNumber,d=1,m=a.lineNumber,h=s.getLineMaxColumn(a.lineNumber));const v=new f.Range(r,d,m,h);o=v,v.isEmpty()?i[g]=null:i[g]=new k.ReplaceCommand(v,"")}else i[g]=null;else i[g]=new k.ReplaceCommand(l,"")}return new E.EditOperationResult(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}e.DeleteOperations=b}),define(oe[199],re([1,0,11,77,245,168,9,4]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WordPartOperations=e.WordOperations=void 0;class _{static _createWord(s,t,i,o,g){return{start:o,end:g,wordType:t,nextCharClass:i}}static _createIntlWord(s,t){return{start:s.index,end:s.index+s.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(s,t,i){const o=t.getLineContent(i.lineNumber);return this._doFindPreviousWordOnLine(o,s,i)}static _doFindPreviousWordOnLine(s,t,i){let o=0;const g=t.findPrevIntlWordBeforeOrAtOffset(s,i.column-2);for(let u=i.column-2;u>=0;u--){const l=s.charCodeAt(u),a=t.get(l);if(g&&u===g.index)return this._createIntlWord(g,a);if(a===0){if(o===2)return this._createWord(s,o,a,u+1,this._findEndOfWord(s,t,o,u+1));o=1}else if(a===2){if(o===1)return this._createWord(s,o,a,u+1,this._findEndOfWord(s,t,o,u+1));o=2}else if(a===1&&o!==0)return this._createWord(s,o,a,u+1,this._findEndOfWord(s,t,o,u+1))}return o!==0?this._createWord(s,o,1,0,this._findEndOfWord(s,t,o,0)):null}static _findEndOfWord(s,t,i,o){const g=t.findNextIntlWordAtOrAfterOffset(s,o),u=s.length;for(let l=o;l<u;l++){const a=s.charCodeAt(l),r=t.get(a);if(g&&l===g.index+g.segment.length||r===1||i===1&&r===2||i===2&&r===0)return l}return u}static _findNextWordOnLine(s,t,i){const o=t.getLineContent(i.lineNumber);return this._doFindNextWordOnLine(o,s,i)}static _doFindNextWordOnLine(s,t,i){let o=0;const g=s.length,u=t.findNextIntlWordAtOrAfterOffset(s,i.column-1);for(let l=i.column-1;l<g;l++){const a=s.charCodeAt(l),r=t.get(a);if(u&&l===u.index)return this._createIntlWord(u,r);if(r===0){if(o===2)return this._createWord(s,o,r,this._findStartOfWord(s,t,o,l-1),l);o=1}else if(r===2){if(o===1)return this._createWord(s,o,r,this._findStartOfWord(s,t,o,l-1),l);o=2}else if(r===1&&o!==0)return this._createWord(s,o,r,this._findStartOfWord(s,t,o,l-1),l)}return o!==0?this._createWord(s,o,1,this._findStartOfWord(s,t,o,g-1),g):null}static _findStartOfWord(s,t,i,o){const g=t.findPrevIntlWordBeforeOrAtOffset(s,o);for(let u=o;u>=0;u--){const l=s.charCodeAt(u),a=t.get(l);if(g&&u===g.index)return u;if(a===1||i===1&&a===2||i===2&&a===0)return u+1}return 0}static moveWordLeft(s,t,i,o,g){let u=i.lineNumber,l=i.column;l===1&&u>1&&(u=u-1,l=t.getLineMaxColumn(u));let a=_._findPreviousWordOnLine(s,t,new y.Position(u,l));if(o===0)return new y.Position(u,a?a.start+1:1);if(o===1)return!g&&a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=_._findPreviousWordOnLine(s,t,new y.Position(u,a.start+1))),new y.Position(u,a?a.start+1:1);if(o===3){for(;a&&a.wordType===2;)a=_._findPreviousWordOnLine(s,t,new y.Position(u,a.start+1));return new y.Position(u,a?a.start+1:1)}return a&&l<=a.end+1&&(a=_._findPreviousWordOnLine(s,t,new y.Position(u,a.start+1))),new y.Position(u,a?a.end+1:1)}static _moveWordPartLeft(s,t){const i=t.lineNumber,o=s.getLineMaxColumn(i);if(t.column===1)return i>1?new y.Position(i-1,s.getLineMaxColumn(i-1)):t;const g=s.getLineContent(i);for(let u=t.column-1;u>1;u--){const l=g.charCodeAt(u-2),a=g.charCodeAt(u-1);if(l===95&&a!==95)return new y.Position(i,u);if(l===45&&a!==45)return new y.Position(i,u);if((c.isLowerAsciiLetter(l)||c.isAsciiDigit(l))&&c.isUpperAsciiLetter(a))return new y.Position(i,u);if(c.isUpperAsciiLetter(l)&&c.isUpperAsciiLetter(a)&&u+1<o){const r=g.charCodeAt(u);if(c.isLowerAsciiLetter(r)||c.isAsciiDigit(r))return new y.Position(i,u)}}return new y.Position(i,1)}static moveWordRight(s,t,i,o){let g=i.lineNumber,u=i.column,l=!1;u===t.getLineMaxColumn(g)&&g<t.getLineCount()&&(l=!0,g=g+1,u=1);let a=_._findNextWordOnLine(s,t,new y.Position(g,u));if(o===2)a&&a.wordType===2&&a.end-a.start===1&&a.nextCharClass===0&&(a=_._findNextWordOnLine(s,t,new y.Position(g,a.end+1))),a?u=a.end+1:u=t.getLineMaxColumn(g);else if(o===3){for(l&&(u=0);a&&(a.wordType===2||a.start+1<=u);)a=_._findNextWordOnLine(s,t,new y.Position(g,a.end+1));a?u=a.start+1:u=t.getLineMaxColumn(g)}else a&&!l&&u>=a.start+1&&(a=_._findNextWordOnLine(s,t,new y.Position(g,a.end+1))),a?u=a.start+1:u=t.getLineMaxColumn(g);return new y.Position(g,u)}static _moveWordPartRight(s,t){const i=t.lineNumber,o=s.getLineMaxColumn(i);if(t.column===o)return i<s.getLineCount()?new y.Position(i+1,1):t;const g=s.getLineContent(i);for(let u=t.column+1;u<o;u++){const l=g.charCodeAt(u-2),a=g.charCodeAt(u-1);if(l!==95&&a===95)return new y.Position(i,u);if(l!==45&&a===45)return new y.Position(i,u);if((c.isLowerAsciiLetter(l)||c.isAsciiDigit(l))&&c.isUpperAsciiLetter(a))return new y.Position(i,u);if(c.isUpperAsciiLetter(l)&&c.isUpperAsciiLetter(a)&&u+1<o){const r=g.charCodeAt(u);if(c.isLowerAsciiLetter(r)||c.isAsciiDigit(r))return new y.Position(i,u)}}return new y.Position(i,o)}static _deleteWordLeftWhitespace(s,t){const i=s.getLineContent(t.lineNumber),o=t.column-2,g=c.lastNonWhitespaceIndex(i,o);return g+1<o?new f.Range(t.lineNumber,g+2,t.lineNumber,t.column):null}static deleteWordLeft(s,t){const i=s.wordSeparators,o=s.model,g=s.selection,u=s.whitespaceHeuristics;if(!g.isEmpty())return g;if(E.DeleteOperations.isAutoClosingPairDelete(s.autoClosingDelete,s.autoClosingBrackets,s.autoClosingQuotes,s.autoClosingPairs.autoClosingPairsOpenByEnd,s.model,[s.selection],s.autoClosedCharacters)){const m=s.selection.getPosition();return new f.Range(m.lineNumber,m.column-1,m.lineNumber,m.column+1)}const l=new y.Position(g.positionLineNumber,g.positionColumn);let a=l.lineNumber,r=l.column;if(a===1&&r===1)return null;if(u){const m=this._deleteWordLeftWhitespace(o,l);if(m)return m}let d=_._findPreviousWordOnLine(i,o,l);return t===0?d?r=d.start+1:r>1?r=1:(a--,r=o.getLineMaxColumn(a)):(d&&r<=d.end+1&&(d=_._findPreviousWordOnLine(i,o,new y.Position(a,d.start+1))),d?r=d.end+1:r>1?r=1:(a--,r=o.getLineMaxColumn(a))),new f.Range(a,r,l.lineNumber,l.column)}static deleteInsideWord(s,t,i){if(!i.isEmpty())return i;const o=new y.Position(i.positionLineNumber,i.positionColumn),g=this._deleteInsideWordWhitespace(t,o);return g||this._deleteInsideWordDetermineDeleteRange(s,t,o)}static _charAtIsWhitespace(s,t){const i=s.charCodeAt(t);return i===32||i===9}static _deleteInsideWordWhitespace(s,t){const i=s.getLineContent(t.lineNumber),o=i.length;if(o===0)return null;let g=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(i,g))return null;let u=Math.min(t.column-1,o-1);if(!this._charAtIsWhitespace(i,u))return null;for(;g>0&&this._charAtIsWhitespace(i,g-1);)g--;for(;u+1<o&&this._charAtIsWhitespace(i,u+1);)u++;return new f.Range(t.lineNumber,g+1,t.lineNumber,u+2)}static _deleteInsideWordDetermineDeleteRange(s,t,i){const o=t.getLineContent(i.lineNumber),g=o.length;if(g===0)return i.lineNumber>1?new f.Range(i.lineNumber-1,t.getLineMaxColumn(i.lineNumber-1),i.lineNumber,1):i.lineNumber<t.getLineCount()?new f.Range(i.lineNumber,1,i.lineNumber+1,1):new f.Range(i.lineNumber,1,i.lineNumber,1);const u=m=>m.start+1<=i.column&&i.column<=m.end+1,l=(m,h)=>(m=Math.min(m,i.column),h=Math.max(h,i.column),new f.Range(i.lineNumber,m,i.lineNumber,h)),a=m=>{let h=m.start+1,v=m.end+1,C=!1;for(;v-1<g&&this._charAtIsWhitespace(o,v-1);)C=!0,v++;if(!C)for(;h>1&&this._charAtIsWhitespace(o,h-2);)h--;return l(h,v)},r=_._findPreviousWordOnLine(s,t,i);if(r&&u(r))return a(r);const d=_._findNextWordOnLine(s,t,i);return d&&u(d)?a(d):r&&d?l(r.end+1,d.start+1):r?l(r.start+1,r.end+1):d?l(d.start+1,d.end+1):l(1,g+1)}static _deleteWordPartLeft(s,t){if(!t.isEmpty())return t;const i=t.getPosition(),o=_._moveWordPartLeft(s,i);return new f.Range(i.lineNumber,i.column,o.lineNumber,o.column)}static _findFirstNonWhitespaceChar(s,t){const i=s.length;for(let o=t;o<i;o++){const g=s.charAt(o);if(g!==" "&&g!=="	")return o}return i}static _deleteWordRightWhitespace(s,t){const i=s.getLineContent(t.lineNumber),o=t.column-1,g=this._findFirstNonWhitespaceChar(i,o);return o+1<g?new f.Range(t.lineNumber,t.column,t.lineNumber,g+1):null}static deleteWordRight(s,t){const i=s.wordSeparators,o=s.model,g=s.selection,u=s.whitespaceHeuristics;if(!g.isEmpty())return g;const l=new y.Position(g.positionLineNumber,g.positionColumn);let a=l.lineNumber,r=l.column;const d=o.getLineCount(),m=o.getLineMaxColumn(a);if(a===d&&r===m)return null;if(u){const v=this._deleteWordRightWhitespace(o,l);if(v)return v}let h=_._findNextWordOnLine(i,o,l);return t===2?h?r=h.end+1:r<m||a===d?r=m:(a++,h=_._findNextWordOnLine(i,o,new y.Position(a,1)),h?r=h.start+1:r=o.getLineMaxColumn(a)):(h&&r>=h.start+1&&(h=_._findNextWordOnLine(i,o,new y.Position(a,h.end+1))),h?r=h.start+1:r<m||a===d?r=m:(a++,h=_._findNextWordOnLine(i,o,new y.Position(a,1)),h?r=h.start+1:r=o.getLineMaxColumn(a))),new f.Range(a,r,l.lineNumber,l.column)}static _deleteWordPartRight(s,t){if(!t.isEmpty())return t;const i=t.getPosition(),o=_._moveWordPartRight(s,i);return new f.Range(i.lineNumber,i.column,o.lineNumber,o.column)}static _createWordAtPosition(s,t,i){const o=new f.Range(t,i.start+1,t,i.end+1);return{word:s.getValueInRange(o),startColumn:o.startColumn,endColumn:o.endColumn}}static getWordAtPosition(s,t,i,o){const g=(0,L.getMapForWordSeparators)(t,i),u=_._findPreviousWordOnLine(g,s,o);if(u&&u.wordType===1&&u.start<=o.column-1&&o.column-1<=u.end)return _._createWordAtPosition(s,o.lineNumber,u);const l=_._findNextWordOnLine(g,s,o);return l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?_._createWordAtPosition(s,o.lineNumber,l):null}static word(s,t,i,o,g){const u=(0,L.getMapForWordSeparators)(s.wordSeparators,s.wordSegmenterLocales),l=_._findPreviousWordOnLine(u,t,g),a=_._findNextWordOnLine(u,t,g);if(!o){let v,C;return l&&l.wordType===1&&l.start<=g.column-1&&g.column-1<=l.end?(v=l.start+1,C=l.end+1):a&&a.wordType===1&&a.start<=g.column-1&&g.column-1<=a.end?(v=a.start+1,C=a.end+1):(l?v=l.end+1:v=1,a?C=a.start+1:C=t.getLineMaxColumn(g.lineNumber)),new k.SingleCursorState(new f.Range(g.lineNumber,v,g.lineNumber,C),1,0,new y.Position(g.lineNumber,C),0)}let r,d;l&&l.wordType===1&&l.start<g.column-1&&g.column-1<l.end?(r=l.start+1,d=l.end+1):a&&a.wordType===1&&a.start<g.column-1&&g.column-1<a.end?(r=a.start+1,d=a.end+1):(r=g.column,d=g.column);const m=g.lineNumber;let h;if(i.selectionStart.containsPosition(g))h=i.selectionStart.endColumn;else if(g.isBeforeOrEqual(i.selectionStart.getStartPosition())){h=r;const v=new y.Position(m,h);i.selectionStart.containsPosition(v)&&(h=i.selectionStart.endColumn)}else{h=d;const v=new y.Position(m,h);i.selectionStart.containsPosition(v)&&(h=i.selectionStart.startColumn)}return i.move(!0,m,h,0)}}e.WordOperations=_;class b extends _{static deleteWordPartLeft(s){const t=p([_.deleteWordLeft(s,0),_.deleteWordLeft(s,2),_._deleteWordPartLeft(s.model,s.selection)]);return t.sort(f.Range.compareRangesUsingEnds),t[2]}static deleteWordPartRight(s){const t=p([_.deleteWordRight(s,0),_.deleteWordRight(s,2),_._deleteWordPartRight(s.model,s.selection)]);return t.sort(f.Range.compareRangesUsingStarts),t[0]}static moveWordPartLeft(s,t,i,o){const g=p([_.moveWordLeft(s,t,i,0,o),_.moveWordLeft(s,t,i,2,o),_._moveWordPartLeft(t,i)]);return g.sort(y.Position.compare),g[2]}static moveWordPartRight(s,t,i){const o=p([_.moveWordRight(s,t,i,0),_.moveWordRight(s,t,i,2),_._moveWordPartRight(t,i)]);return o.sort(y.Position.compare),o[0]}}e.WordPartOperations=b;function p(n){return n.filter(s=>!!s)}}),define(oe[246],re([1,0,19,77,244,199,9,4]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorMove=e.CursorMoveCommands=void 0;class _{static addCursorDown(n,s,t){const i=[];let o=0;for(let g=0,u=s.length;g<u;g++){const l=s[g];i[o++]=new k.CursorState(l.modelState,l.viewState),t?i[o++]=k.CursorState.fromModelState(E.MoveOperations.translateDown(n.cursorConfig,n.model,l.modelState)):i[o++]=k.CursorState.fromViewState(E.MoveOperations.translateDown(n.cursorConfig,n,l.viewState))}return i}static addCursorUp(n,s,t){const i=[];let o=0;for(let g=0,u=s.length;g<u;g++){const l=s[g];i[o++]=new k.CursorState(l.modelState,l.viewState),t?i[o++]=k.CursorState.fromModelState(E.MoveOperations.translateUp(n.cursorConfig,n.model,l.modelState)):i[o++]=k.CursorState.fromViewState(E.MoveOperations.translateUp(n.cursorConfig,n,l.viewState))}return i}static moveToBeginningOfLine(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o];i[o]=this._moveToLineStart(n,u,t)}return i}static _moveToLineStart(n,s,t){const i=s.viewState.position.column,o=s.modelState.position.column,g=i===o,u=s.viewState.position.lineNumber,l=n.getLineFirstNonWhitespaceColumn(u);return!g&&!(i===l)?this._moveToLineStartByView(n,s,t):this._moveToLineStartByModel(n,s,t)}static _moveToLineStartByView(n,s,t){return k.CursorState.fromViewState(E.MoveOperations.moveToBeginningOfLine(n.cursorConfig,n,s.viewState,t))}static _moveToLineStartByModel(n,s,t){return k.CursorState.fromModelState(E.MoveOperations.moveToBeginningOfLine(n.cursorConfig,n.model,s.modelState,t))}static moveToEndOfLine(n,s,t,i){const o=[];for(let g=0,u=s.length;g<u;g++){const l=s[g];o[g]=this._moveToLineEnd(n,l,t,i)}return o}static _moveToLineEnd(n,s,t,i){const o=s.viewState.position,g=n.getLineMaxColumn(o.lineNumber),u=o.column===g,l=s.modelState.position,a=n.model.getLineMaxColumn(l.lineNumber),r=g-o.column===a-l.column;return u||r?this._moveToLineEndByModel(n,s,t,i):this._moveToLineEndByView(n,s,t,i)}static _moveToLineEndByView(n,s,t,i){return k.CursorState.fromViewState(E.MoveOperations.moveToEndOfLine(n.cursorConfig,n,s.viewState,t,i))}static _moveToLineEndByModel(n,s,t,i){return k.CursorState.fromModelState(E.MoveOperations.moveToEndOfLine(n.cursorConfig,n.model,s.modelState,t,i))}static expandLineSelection(n,s){const t=[];for(let i=0,o=s.length;i<o;i++){const g=s[i],u=g.modelState.selection.startLineNumber,l=n.model.getLineCount();let a=g.modelState.selection.endLineNumber,r;a===l?r=n.model.getLineMaxColumn(l):(a++,r=1),t[i]=k.CursorState.fromModelState(new k.SingleCursorState(new f.Range(u,1,u,1),0,0,new y.Position(a,r),0))}return t}static moveToBeginningOfBuffer(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o];i[o]=k.CursorState.fromModelState(E.MoveOperations.moveToBeginningOfBuffer(n.cursorConfig,n.model,u.modelState,t))}return i}static moveToEndOfBuffer(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o];i[o]=k.CursorState.fromModelState(E.MoveOperations.moveToEndOfBuffer(n.cursorConfig,n.model,u.modelState,t))}return i}static selectAll(n,s){const t=n.model.getLineCount(),i=n.model.getLineMaxColumn(t);return k.CursorState.fromModelState(new k.SingleCursorState(new f.Range(1,1,1,1),0,0,new y.Position(t,i),0))}static line(n,s,t,i,o){const g=n.model.validatePosition(i),u=o?n.coordinatesConverter.validateViewPosition(new y.Position(o.lineNumber,o.column),g):n.coordinatesConverter.convertModelPositionToViewPosition(g);if(!t){const a=n.model.getLineCount();let r=g.lineNumber+1,d=1;return r>a&&(r=a,d=n.model.getLineMaxColumn(r)),k.CursorState.fromModelState(new k.SingleCursorState(new f.Range(g.lineNumber,1,r,d),2,0,new y.Position(r,d),0))}const l=s.modelState.selectionStart.getStartPosition().lineNumber;if(g.lineNumber<l)return k.CursorState.fromViewState(s.viewState.move(!0,u.lineNumber,1,0));if(g.lineNumber>l){const a=n.getLineCount();let r=u.lineNumber+1,d=1;return r>a&&(r=a,d=n.getLineMaxColumn(r)),k.CursorState.fromViewState(s.viewState.move(!0,r,d,0))}else{const a=s.modelState.selectionStart.getEndPosition();return k.CursorState.fromModelState(s.modelState.move(!0,a.lineNumber,a.column,0))}}static word(n,s,t,i){const o=n.model.validatePosition(i);return k.CursorState.fromModelState(L.WordOperations.word(n.cursorConfig,n.model,s.modelState,t,o))}static cancelSelection(n,s){if(!s.modelState.hasSelection())return new k.CursorState(s.modelState,s.viewState);const t=s.viewState.position.lineNumber,i=s.viewState.position.column;return k.CursorState.fromViewState(new k.SingleCursorState(new f.Range(t,i,t,i),0,0,new y.Position(t,i),0))}static moveTo(n,s,t,i,o){if(t){if(s.modelState.selectionStartKind===1)return this.word(n,s,t,i);if(s.modelState.selectionStartKind===2)return this.line(n,s,t,i,o)}const g=n.model.validatePosition(i),u=o?n.coordinatesConverter.validateViewPosition(new y.Position(o.lineNumber,o.column),g):n.coordinatesConverter.convertModelPositionToViewPosition(g);return k.CursorState.fromViewState(s.viewState.move(t,u.lineNumber,u.column,0))}static simpleMove(n,s,t,i,o,g){switch(t){case 0:return g===4?this._moveHalfLineLeft(n,s,i):this._moveLeft(n,s,i,o);case 1:return g===4?this._moveHalfLineRight(n,s,i):this._moveRight(n,s,i,o);case 2:return g===2?this._moveUpByViewLines(n,s,i,o):this._moveUpByModelLines(n,s,i,o);case 3:return g===2?this._moveDownByViewLines(n,s,i,o):this._moveDownByModelLines(n,s,i,o);case 4:return g===2?s.map(u=>k.CursorState.fromViewState(E.MoveOperations.moveToPrevBlankLine(n.cursorConfig,n,u.viewState,i))):s.map(u=>k.CursorState.fromModelState(E.MoveOperations.moveToPrevBlankLine(n.cursorConfig,n.model,u.modelState,i)));case 5:return g===2?s.map(u=>k.CursorState.fromViewState(E.MoveOperations.moveToNextBlankLine(n.cursorConfig,n,u.viewState,i))):s.map(u=>k.CursorState.fromModelState(E.MoveOperations.moveToNextBlankLine(n.cursorConfig,n.model,u.modelState,i)));case 6:return this._moveToViewMinColumn(n,s,i);case 7:return this._moveToViewFirstNonWhitespaceColumn(n,s,i);case 8:return this._moveToViewCenterColumn(n,s,i);case 9:return this._moveToViewMaxColumn(n,s,i);case 10:return this._moveToViewLastNonWhitespaceColumn(n,s,i);default:return null}}static viewportMove(n,s,t,i,o){const g=n.getCompletelyVisibleViewRange(),u=n.coordinatesConverter.convertViewRangeToModelRange(g);switch(t){case 11:{const l=this._firstLineNumberInRange(n.model,u,o),a=n.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(n,s[0],i,l,a)]}case 13:{const l=this._lastLineNumberInRange(n.model,u,o),a=n.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(n,s[0],i,l,a)]}case 12:{const l=Math.round((u.startLineNumber+u.endLineNumber)/2),a=n.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(n,s[0],i,l,a)]}case 14:{const l=[];for(let a=0,r=s.length;a<r;a++){const d=s[a];l[a]=this.findPositionInViewportIfOutside(n,d,g,i)}return l}default:return null}}static findPositionInViewportIfOutside(n,s,t,i){const o=s.viewState.position.lineNumber;if(t.startLineNumber<=o&&o<=t.endLineNumber-1)return new k.CursorState(s.modelState,s.viewState);{let g;o>t.endLineNumber-1?g=t.endLineNumber-1:o<t.startLineNumber?g=t.startLineNumber:g=o;const u=E.MoveOperations.vertical(n.cursorConfig,n,o,s.viewState.position.column,s.viewState.leftoverVisibleColumns,g,!1);return k.CursorState.fromViewState(s.viewState.move(i,u.lineNumber,u.column,u.leftoverVisibleColumns))}}static _firstLineNumberInRange(n,s,t){let i=s.startLineNumber;return s.startColumn!==n.getLineMinColumn(i)&&i++,Math.min(s.endLineNumber,i+t-1)}static _lastLineNumberInRange(n,s,t){let i=s.startLineNumber;return s.startColumn!==n.getLineMinColumn(i)&&i++,Math.max(i,s.endLineNumber-t+1)}static _moveLeft(n,s,t,i){return s.map(o=>k.CursorState.fromViewState(E.MoveOperations.moveLeft(n.cursorConfig,n,o.viewState,t,i)))}static _moveHalfLineLeft(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=Math.round(n.getLineLength(l)/2);i[o]=k.CursorState.fromViewState(E.MoveOperations.moveLeft(n.cursorConfig,n,u.viewState,t,a))}return i}static _moveRight(n,s,t,i){return s.map(o=>k.CursorState.fromViewState(E.MoveOperations.moveRight(n.cursorConfig,n,o.viewState,t,i)))}static _moveHalfLineRight(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=Math.round(n.getLineLength(l)/2);i[o]=k.CursorState.fromViewState(E.MoveOperations.moveRight(n.cursorConfig,n,u.viewState,t,a))}return i}static _moveDownByViewLines(n,s,t,i){const o=[];for(let g=0,u=s.length;g<u;g++){const l=s[g];o[g]=k.CursorState.fromViewState(E.MoveOperations.moveDown(n.cursorConfig,n,l.viewState,t,i))}return o}static _moveDownByModelLines(n,s,t,i){const o=[];for(let g=0,u=s.length;g<u;g++){const l=s[g];o[g]=k.CursorState.fromModelState(E.MoveOperations.moveDown(n.cursorConfig,n.model,l.modelState,t,i))}return o}static _moveUpByViewLines(n,s,t,i){const o=[];for(let g=0,u=s.length;g<u;g++){const l=s[g];o[g]=k.CursorState.fromViewState(E.MoveOperations.moveUp(n.cursorConfig,n,l.viewState,t,i))}return o}static _moveUpByModelLines(n,s,t,i){const o=[];for(let g=0,u=s.length;g<u;g++){const l=s[g];o[g]=k.CursorState.fromModelState(E.MoveOperations.moveUp(n.cursorConfig,n.model,l.modelState,t,i))}return o}static _moveToViewPosition(n,s,t,i,o){return k.CursorState.fromViewState(s.viewState.move(t,i,o,0))}static _moveToModelPosition(n,s,t,i,o){return k.CursorState.fromModelState(s.modelState.move(t,i,o,0))}static _moveToViewMinColumn(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=n.getLineMinColumn(l);i[o]=this._moveToViewPosition(n,u,t,l,a)}return i}static _moveToViewFirstNonWhitespaceColumn(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=n.getLineFirstNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(n,u,t,l,a)}return i}static _moveToViewCenterColumn(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=Math.round((n.getLineMaxColumn(l)+n.getLineMinColumn(l))/2);i[o]=this._moveToViewPosition(n,u,t,l,a)}return i}static _moveToViewMaxColumn(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=n.getLineMaxColumn(l);i[o]=this._moveToViewPosition(n,u,t,l,a)}return i}static _moveToViewLastNonWhitespaceColumn(n,s,t){const i=[];for(let o=0,g=s.length;o<g;o++){const u=s[o],l=u.viewState.position.lineNumber,a=n.getLineLastNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(n,u,t,l,a)}return i}}e.CursorMoveCommands=_;var b;(function(p){const n=function(t){if(!c.isObject(t))return!1;const i=t;return!(!c.isString(i.to)||!c.isUndefined(i.select)&&!c.isBoolean(i.select)||!c.isUndefined(i.by)&&!c.isString(i.by)||!c.isUndefined(i.value)&&!c.isNumber(i.value))};p.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:n,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},p.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},p.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function s(t){if(!t.to)return null;let i;switch(t.to){case p.RawDirection.Left:i=0;break;case p.RawDirection.Right:i=1;break;case p.RawDirection.Up:i=2;break;case p.RawDirection.Down:i=3;break;case p.RawDirection.PrevBlankLine:i=4;break;case p.RawDirection.NextBlankLine:i=5;break;case p.RawDirection.WrappedLineStart:i=6;break;case p.RawDirection.WrappedLineFirstNonWhitespaceCharacter:i=7;break;case p.RawDirection.WrappedLineColumnCenter:i=8;break;case p.RawDirection.WrappedLineEnd:i=9;break;case p.RawDirection.WrappedLineLastNonWhitespaceCharacter:i=10;break;case p.RawDirection.ViewPortTop:i=11;break;case p.RawDirection.ViewPortBottom:i=13;break;case p.RawDirection.ViewPortCenter:i=12;break;case p.RawDirection.ViewPortIfOutside:i=14;break;default:return null}let o=0;switch(t.by){case p.RawUnit.Line:o=1;break;case p.RawUnit.WrappedLine:o=2;break;case p.RawUnit.Character:o=3;break;case p.RawUnit.HalfLine:o=4;break}return{direction:i,unit:o,select:!!t.select,value:t.value||1}}p.parse=s})(b||(e.CursorMove=b={}))}),define(oe[577],re([1,0,77,9,4,23]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cursor=void 0;class y{constructor(_){this._selTrackedRange=null,this._trackSelection=!0,this._setState(_,new c.SingleCursorState(new E.Range(1,1,1,1),0,0,new k.Position(1,1),0),new c.SingleCursorState(new E.Range(1,1,1,1),0,0,new k.Position(1,1),0))}dispose(_){this._removeTrackedRange(_)}startTrackingSelection(_){this._trackSelection=!0,this._updateTrackedRange(_)}stopTrackingSelection(_){this._trackSelection=!1,this._removeTrackedRange(_)}_updateTrackedRange(_){this._trackSelection&&(this._selTrackedRange=_.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(_){this._selTrackedRange=_.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new c.CursorState(this.modelState,this.viewState)}readSelectionFromMarkers(_){const b=_.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!b.isEmpty()?L.Selection.fromRange(b.collapseToEnd(),this.modelState.selection.getDirection()):L.Selection.fromRange(b,this.modelState.selection.getDirection())}ensureValidState(_){this._setState(_,this.modelState,this.viewState)}setState(_,b,p){this._setState(_,b,p)}static _validatePositionWithCache(_,b,p,n){return b.equals(p)?n:_.normalizePosition(b,2)}static _validateViewState(_,b){const p=b.position,n=b.selectionStart.getStartPosition(),s=b.selectionStart.getEndPosition(),t=_.normalizePosition(p,2),i=this._validatePositionWithCache(_,n,p,t),o=this._validatePositionWithCache(_,s,n,i);return p.equals(t)&&n.equals(i)&&s.equals(o)?b:new c.SingleCursorState(E.Range.fromPositions(i,o),b.selectionStartKind,b.selectionStartLeftoverVisibleColumns+n.column-i.column,t,b.leftoverVisibleColumns+p.column-t.column)}_setState(_,b,p){if(p&&(p=y._validateViewState(_.viewModel,p)),b){const n=_.model.validateRange(b.selectionStart),s=b.selectionStart.equalsRange(n)?b.selectionStartLeftoverVisibleColumns:0,t=_.model.validatePosition(b.position),i=b.position.equals(t)?b.leftoverVisibleColumns:0;b=new c.SingleCursorState(n,b.selectionStartKind,s,t,i)}else{if(!p)return;const n=_.model.validateRange(_.coordinatesConverter.convertViewRangeToModelRange(p.selectionStart)),s=_.model.validatePosition(_.coordinatesConverter.convertViewPositionToModelPosition(p.position));b=new c.SingleCursorState(n,p.selectionStartKind,p.selectionStartLeftoverVisibleColumns,s,p.leftoverVisibleColumns)}if(p){const n=_.coordinatesConverter.validateViewRange(p.selectionStart,b.selectionStart),s=_.coordinatesConverter.validateViewPosition(p.position,b.position);p=new c.SingleCursorState(n,b.selectionStartKind,b.selectionStartLeftoverVisibleColumns,s,b.leftoverVisibleColumns)}else{const n=_.coordinatesConverter.convertModelPositionToViewPosition(new k.Position(b.selectionStart.startLineNumber,b.selectionStart.startColumn)),s=_.coordinatesConverter.convertModelPositionToViewPosition(new k.Position(b.selectionStart.endLineNumber,b.selectionStart.endColumn)),t=new E.Range(n.lineNumber,n.column,s.lineNumber,s.column),i=_.coordinatesConverter.convertModelPositionToViewPosition(b.position);p=new c.SingleCursorState(t,b.selectionStartKind,b.selectionStartLeftoverVisibleColumns,i,b.leftoverVisibleColumns)}this.modelState=b,this.viewState=p,this._updateTrackedRange(_)}}e.Cursor=y}),define(oe[578],re([1,0,13,67,77,577,9,4,23]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorCollection=void 0;class b{constructor(n){this.context=n,this.cursors=[new L.Cursor(n)],this.lastAddedCursorIndex=0}dispose(){for(const n of this.cursors)n.dispose(this.context)}startTrackingSelections(){for(const n of this.cursors)n.startTrackingSelection(this.context)}stopTrackingSelections(){for(const n of this.cursors)n.stopTrackingSelection(this.context)}updateContext(n){this.context=n}ensureValidState(){for(const n of this.cursors)n.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(n=>n.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(n=>n.asCursorState())}getViewPositions(){return this.cursors.map(n=>n.viewState.position)}getTopMostViewPosition(){return(0,k.findFirstMin)(this.cursors,(0,c.compareBy)(n=>n.viewState.position,y.Position.compare)).viewState.position}getBottomMostViewPosition(){return(0,k.findLastMax)(this.cursors,(0,c.compareBy)(n=>n.viewState.position,y.Position.compare)).viewState.position}getSelections(){return this.cursors.map(n=>n.modelState.selection)}getViewSelections(){return this.cursors.map(n=>n.viewState.selection)}setSelections(n){this.setStates(E.CursorState.fromModelSelections(n))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(n){n!==null&&(this.cursors[0].setState(this.context,n[0].modelState,n[0].viewState),this._setSecondaryStates(n.slice(1)))}_setSecondaryStates(n){const s=this.cursors.length-1,t=n.length;if(s<t){const i=t-s;for(let o=0;o<i;o++)this._addSecondaryCursor()}else if(s>t){const i=s-t;for(let o=0;o<i;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<t;i++)this.cursors[i+1].setState(this.context,n[i].modelState,n[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new L.Cursor(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(n){this.lastAddedCursorIndex>=n+1&&this.lastAddedCursorIndex--,this.cursors[n+1].dispose(this.context),this.cursors.splice(n+1,1)}normalize(){if(this.cursors.length===1)return;const n=this.cursors.slice(0),s=[];for(let t=0,i=n.length;t<i;t++)s.push({index:t,selection:n[t].modelState.selection});s.sort((0,c.compareBy)(t=>t.selection,f.Range.compareRangesUsingStarts));for(let t=0;t<s.length-1;t++){const i=s[t],o=s[t+1],g=i.selection,u=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(u.isEmpty()||g.isEmpty()?l=u.getStartPosition().isBeforeOrEqual(g.getEndPosition()):l=u.getStartPosition().isBefore(g.getEndPosition()),l){const a=i.index<o.index?t:t+1,r=i.index<o.index?t+1:t,d=s[r].index,m=s[a].index,h=s[r].selection,v=s[a].selection;if(!h.equalsSelection(v)){const C=h.plusRange(v),w=h.selectionStartLineNumber===h.startLineNumber&&h.selectionStartColumn===h.startColumn,S=v.selectionStartLineNumber===v.startLineNumber&&v.selectionStartColumn===v.startColumn;let D;d===this.lastAddedCursorIndex?(D=w,this.lastAddedCursorIndex=m):D=S;let I;D?I=new _.Selection(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn):I=new _.Selection(C.endLineNumber,C.endColumn,C.startLineNumber,C.startColumn),s[a].selection=I;const T=E.CursorState.fromModelSelection(I);n[m].setState(this.context,T.modelState,T.viewState)}for(const C of s)C.index>d&&C.index--;n.splice(d,1),s.splice(r,1),this._removeSecondaryCursor(d-1),t--}}}}e.CursorCollection=b}),define(oe[579],re([1,0,130]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterPairSupport=void 0;class k{static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`}static{this.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`}constructor(L){if(L.autoClosingPairs?this._autoClosingPairs=L.autoClosingPairs.map(y=>new c.StandardAutoClosingPairConditional(y)):L.brackets?this._autoClosingPairs=L.brackets.map(y=>new c.StandardAutoClosingPairConditional({open:y[0],close:y[1]})):this._autoClosingPairs=[],L.__electricCharacterSupport&&L.__electricCharacterSupport.docComment){const y=L.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new c.StandardAutoClosingPairConditional({open:y.open,close:y.close||""}))}this._autoCloseBeforeForQuotes=typeof L.autoCloseBefore=="string"?L.autoCloseBefore:k.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof L.autoCloseBefore=="string"?L.autoCloseBefore:k.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=L.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(L){return L?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}}e.CharacterPairSupport=k}),define(oe[580],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentRulesSupport=void 0;function c(E){return E.global&&(E.lastIndex=0),!0}class k{constructor(L){this._indentationRules=L}shouldIncrease(L){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&c(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(L))}shouldDecrease(L){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&c(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(L))}shouldIndentNextLine(L){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&c(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(L))}shouldIgnore(L){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&c(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(L))}getIndentMetadata(L){let y=0;return this.shouldIncrease(L)&&(y+=1),this.shouldDecrease(L)&&(y+=2),this.shouldIndentNextLine(L)&&(y+=4),this.shouldIgnore(L)&&(y+=8),y}}e.IndentRulesSupport=k}),define(oe[581],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicInplaceReplace=void 0;class c{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}static{this.INSTANCE=new c}navigateValueSet(E,L,y,f,_){if(E&&L){const b=this.doNavigateValueSet(L,_);if(b)return{range:E,value:b}}if(y&&f){const b=this.doNavigateValueSet(f,_);if(b)return{range:y,value:b}}return null}doNavigateValueSet(E,L){const y=this.numberReplace(E,L);return y!==null?y:this.textReplace(E,L)}numberReplace(E,L){const y=Math.pow(10,E.length-(E.lastIndexOf(".")+1));let f=Number(E);const _=parseFloat(E);return!isNaN(f)&&!isNaN(_)&&f===_?f===0&&!L?null:(f=Math.floor(f*y),f+=L?y:-y,String(f/y)):null}textReplace(E,L){return this.valueSetsReplace(this._defaultValueSet,E,L)}valueSetsReplace(E,L,y){let f=null;for(let _=0,b=E.length;f===null&&_<b;_++)f=this.valueSetReplace(E[_],L,y);return f}valueSetReplace(E,L,y){let f=E.indexOf(L);return f>=0?(f+=y?1:-1,f<0?f=E.length-1:f%=E.length,E[f]):null}}e.BasicInplaceReplace=c}),define(oe[582],re([1,0,8,11,130]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OnEnterSupport=void 0;class L{constructor(f){f=f||{},f.brackets=f.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],f.brackets.forEach(_=>{const b=L._createOpenBracketRegExp(_[0]),p=L._createCloseBracketRegExp(_[1]);b&&p&&this._brackets.push({open:_[0],openRegExp:b,close:_[1],closeRegExp:p})}),this._regExpRules=f.onEnterRules||[]}onEnter(f,_,b,p){if(f>=3)for(let n=0,s=this._regExpRules.length;n<s;n++){const t=this._regExpRules[n];if([{reg:t.beforeText,text:b},{reg:t.afterText,text:p},{reg:t.previousLineText,text:_}].every(o=>o.reg?(o.reg.lastIndex=0,o.reg.test(o.text)):!0))return t.action}if(f>=2&&b.length>0&&p.length>0)for(let n=0,s=this._brackets.length;n<s;n++){const t=this._brackets[n];if(t.openRegExp.test(b)&&t.closeRegExp.test(p))return{indentAction:E.IndentAction.IndentOutdent}}if(f>=2&&b.length>0){for(let n=0,s=this._brackets.length;n<s;n++)if(this._brackets[n].openRegExp.test(b))return{indentAction:E.IndentAction.Indent}}return null}static _createOpenBracketRegExp(f){let _=k.escapeRegExpCharacters(f);return/\B/.test(_.charAt(0))||(_="\\b"+_),_+="\\s*$",L._safeRegExp(_)}static _createCloseBracketRegExp(f){let _=k.escapeRegExpCharacters(f);return/\B/.test(_.charAt(_.length-1))||(_=_+"\\b"),_="^\\s*"+_,L._safeRegExp(_)}static _safeRegExp(f){try{return new RegExp(f)}catch(_){return(0,c.onUnexpectedError)(_),null}}}e.OnEnterSupport=L}),define(oe[200],re([1,0,11,114,4]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketsUtils=e.RichEditBrackets=e.RichEditBracket=void 0,e.createBracketOrRegExp=g;class L{constructor(r,d,m,h,v,C){this._richEditBracketBrand=void 0,this.languageId=r,this.index=d,this.open=m,this.close=h,this.forwardRegex=v,this.reversedRegex=C,this._openSet=L._toSet(this.open),this._closeSet=L._toSet(this.close)}isOpen(r){return this._openSet.has(r)}isClose(r){return this._closeSet.has(r)}static _toSet(r){const d=new Set;for(const m of r)d.add(m);return d}}e.RichEditBracket=L;function y(a){const r=a.length;a=a.map(C=>[C[0].toLowerCase(),C[1].toLowerCase()]);const d=[];for(let C=0;C<r;C++)d[C]=C;const m=(C,w)=>{const[S,D]=C,[I,T]=w;return S===I||S===T||D===I||D===T},h=(C,w)=>{const S=Math.min(C,w),D=Math.max(C,w);for(let I=0;I<r;I++)d[I]===D&&(d[I]=S)};for(let C=0;C<r;C++){const w=a[C];for(let S=C+1;S<r;S++){const D=a[S];m(w,D)&&h(d[C],d[S])}}const v=[];for(let C=0;C<r;C++){const w=[],S=[];for(let D=0;D<r;D++)if(d[D]===C){const[I,T]=a[D];w.push(I),S.push(T)}w.length>0&&v.push({open:w,close:S})}return v}class f{constructor(r,d){this._richEditBracketsBrand=void 0;const m=y(d);this.brackets=m.map((h,v)=>new L(r,v,h.open,h.close,n(h.open,h.close,m,v),s(h.open,h.close,m,v))),this.forwardRegex=t(this.brackets),this.reversedRegex=i(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const h of this.brackets){for(const v of h.open)this.textIsBracket[v]=h,this.textIsOpenBracket[v]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,v.length);for(const v of h.close)this.textIsBracket[v]=h,this.textIsOpenBracket[v]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,v.length)}}}e.RichEditBrackets=f;function _(a,r,d,m){for(let h=0,v=r.length;h<v;h++){if(h===d)continue;const C=r[h];for(const w of C.open)w.indexOf(a)>=0&&m.push(w);for(const w of C.close)w.indexOf(a)>=0&&m.push(w)}}function b(a,r){return a.length-r.length}function p(a){if(a.length<=1)return a;const r=[],d=new Set;for(const m of a)d.has(m)||(r.push(m),d.add(m));return r}function n(a,r,d,m){let h=[];h=h.concat(a),h=h.concat(r);for(let v=0,C=h.length;v<C;v++)_(h[v],d,m,h);return h=p(h),h.sort(b),h.reverse(),g(h)}function s(a,r,d,m){let h=[];h=h.concat(a),h=h.concat(r);for(let v=0,C=h.length;v<C;v++)_(h[v],d,m,h);return h=p(h),h.sort(b),h.reverse(),g(h.map(u))}function t(a){let r=[];for(const d of a){for(const m of d.open)r.push(m);for(const m of d.close)r.push(m)}return r=p(r),g(r)}function i(a){let r=[];for(const d of a){for(const m of d.open)r.push(m);for(const m of d.close)r.push(m)}return r=p(r),g(r.map(u))}function o(a){const r=/^[\w ]+$/.test(a);return a=c.escapeRegExpCharacters(a),r?`\\b${a}\\b`:a}function g(a,r){const d=`(${a.map(o).join(")|(")})`;return c.createRegExp(d,!0,r)}const u=function(){function a(m){const h=new Uint16Array(m.length);let v=0;for(let C=m.length-1;C>=0;C--)h[v++]=m.charCodeAt(C);return k.getPlatformTextDecoder().decode(h)}let r=null,d=null;return function(h){return r!==h&&(r=h,d=a(r)),d}}();class l{static _findPrevBracketInText(r,d,m,h){const v=m.match(r);if(!v)return null;const C=m.length-(v.index||0),w=v[0].length,S=h+C;return new E.Range(d,S-w+1,d,S+1)}static findPrevBracketInRange(r,d,m,h,v){const w=u(m).substring(m.length-v,m.length-h);return this._findPrevBracketInText(r,d,w,h)}static findNextBracketInText(r,d,m,h){const v=m.match(r);if(!v)return null;const C=v.index||0,w=v[0].length;if(w===0)return null;const S=h+C;return new E.Range(d,S+1,d,S+1+w)}static findNextBracketInRange(r,d,m,h,v){const C=m.substring(h,v);return this.findNextBracketInText(r,d,C,h)}}e.BracketsUtils=l}),define(oe[583],re([1,0,13,172,200]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketElectricCharacterSupport=void 0;class L{constructor(f){this._richEditBrackets=f}getElectricCharacters(){const f=[];if(this._richEditBrackets)for(const _ of this._richEditBrackets.brackets)for(const b of _.close){const p=b.charAt(b.length-1);f.push(p)}return(0,c.distinct)(f)}onElectricCharacter(f,_,b){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;const p=_.findTokenIndexAtOffset(b-1);if((0,k.ignoreBracketsInToken)(_.getStandardTokenType(p)))return null;const n=this._richEditBrackets.reversedRegex,s=_.getLineContent().substring(0,b-1)+f,t=E.BracketsUtils.findPrevBracketInRange(n,1,s,0,s.length);if(!t)return null;const i=s.substring(t.startColumn-1,t.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[i])return null;const g=_.getActualLineContentBefore(t.startColumn-1);return/^\s*$/.test(g)?{matchOpenBracket:i}:null}}e.BracketElectricCharacterSupport=L}),define(oe[584],re([1,0,296,200]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClosingBracketKind=e.OpeningBracketKind=e.BracketKindBase=e.LanguageBracketsConfiguration=void 0;class E{constructor(p,n){this.languageId=p;const s=n.brackets?L(n.brackets):[],t=new c.CachedFunction(g=>{const u=new Set;return{info:new f(this,g,u),closing:u}}),i=new c.CachedFunction(g=>{const u=new Set,l=new Set;return{info:new _(this,g,u,l),opening:u,openingColorized:l}});for(const[g,u]of s){const l=t.get(g),a=i.get(u);l.closing.add(a.info),a.opening.add(l.info)}const o=n.colorizedBracketPairs?L(n.colorizedBracketPairs):s.filter(g=>!(g[0]==="<"&&g[1]===">"));for(const[g,u]of o){const l=t.get(g),a=i.get(u);l.closing.add(a.info),a.openingColorized.add(l.info),a.opening.add(l.info)}this._openingBrackets=new Map([...t.cachedValues].map(([g,u])=>[g,u.info])),this._closingBrackets=new Map([...i.cachedValues].map(([g,u])=>[g,u.info]))}get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(p){return this._openingBrackets.get(p)}getClosingBracketInfo(p){return this._closingBrackets.get(p)}getBracketInfo(p){return this.getOpeningBracketInfo(p)||this.getClosingBracketInfo(p)}getBracketRegExp(p){const n=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return(0,k.createBracketOrRegExp)(n,p)}}e.LanguageBracketsConfiguration=E;function L(b){return b.filter(([p,n])=>p!==""&&n!=="")}class y{constructor(p,n){this.config=p,this.bracketText=n}get languageId(){return this.config.languageId}}e.BracketKindBase=y;class f extends y{constructor(p,n,s){super(p,n),this.openedBrackets=s,this.isOpeningBracket=!0}}e.OpeningBracketKind=f;class _ extends y{constructor(p,n,s,t){super(p,n),this.openingBrackets=s,this.openingColorizedBrackets=t,this.isOpeningBracket=!1}closes(p){return p.config!==this.config?!1:this.openingBrackets.has(p)}closesColorized(p){return p.config!==this.config?!1:this.openingColorizedBrackets.has(p)}getOpeningBrackets(){return[...this.openingBrackets]}}e.ClosingBracketKind=_}),define(oe[585],re([1,0,33]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeTrieElement=e.ThemeTrieElementRule=e.TokenTheme=e.ColorMap=e.ParsedTokenThemeRule=void 0,e.parseTokenTheme=E,e.toStandardTokenType=p,e.strcmp=n,e.generateTokensCSSForColorMap=i;class k{constructor(g,u,l,a,r){this._parsedThemeRuleBrand=void 0,this.token=g,this.index=u,this.fontStyle=l,this.foreground=a,this.background=r}}e.ParsedTokenThemeRule=k;function E(o){if(!o||!Array.isArray(o))return[];const g=[];let u=0;for(let l=0,a=o.length;l<a;l++){const r=o[l];let d=-1;if(typeof r.fontStyle=="string"){d=0;const v=r.fontStyle.split(" ");for(let C=0,w=v.length;C<w;C++)switch(v[C]){case"italic":d=d|1;break;case"bold":d=d|2;break;case"underline":d=d|4;break;case"strikethrough":d=d|8;break}}let m=null;typeof r.foreground=="string"&&(m=r.foreground);let h=null;typeof r.background=="string"&&(h=r.background),g[u++]=new k(r.token||"",l,d,m,h)}return g}function L(o,g){o.sort((C,w)=>{const S=n(C.token,w.token);return S!==0?S:C.index-w.index});let u=0,l="000000",a="ffffff";for(;o.length>=1&&o[0].token==="";){const C=o.shift();C.fontStyle!==-1&&(u=C.fontStyle),C.foreground!==null&&(l=C.foreground),C.background!==null&&(a=C.background)}const r=new f;for(const C of g)r.getId(C);const d=r.getId(l),m=r.getId(a),h=new s(u,d,m),v=new t(h);for(let C=0,w=o.length;C<w;C++){const S=o[C];v.insert(S.token,S.fontStyle,r.getId(S.foreground),r.getId(S.background))}return new _(r,v)}const y=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class f{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(g){if(g===null)return 0;const u=g.match(y);if(!u)throw new Error("Illegal value for token color: "+g);g=u[1].toUpperCase();let l=this._color2id.get(g);return l||(l=++this._lastColorId,this._color2id.set(g,l),this._id2color[l]=c.Color.fromHex("#"+g),l)}getColorMap(){return this._id2color.slice(0)}}e.ColorMap=f;class _{static createFromRawTokenTheme(g,u){return this.createFromParsedTokenTheme(E(g),u)}static createFromParsedTokenTheme(g,u){return L(g,u)}constructor(g,u){this._colorMap=g,this._root=u,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}_match(g){return this._root.match(g)}match(g,u){let l=this._cache.get(u);if(typeof l>"u"){const a=this._match(u),r=p(u);l=(a.metadata|r<<8)>>>0,this._cache.set(u,l)}return(l|g<<0)>>>0}}e.TokenTheme=_;const b=/\b(comment|string|regex|regexp)\b/;function p(o){const g=o.match(b);if(!g)return 0;switch(g[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"regexp":return 3}throw new Error("Unexpected match for standard token type!")}function n(o,g){return o<g?-1:o>g?1:0}class s{constructor(g,u,l){this._themeTrieElementRuleBrand=void 0,this._fontStyle=g,this._foreground=u,this._background=l,this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}clone(){return new s(this._fontStyle,this._foreground,this._background)}acceptOverwrite(g,u,l){g!==-1&&(this._fontStyle=g),u!==0&&(this._foreground=u),l!==0&&(this._background=l),this.metadata=(this._fontStyle<<11|this._foreground<<15|this._background<<24)>>>0}}e.ThemeTrieElementRule=s;class t{constructor(g){this._themeTrieElementBrand=void 0,this._mainRule=g,this._children=new Map}match(g){if(g==="")return this._mainRule;const u=g.indexOf(".");let l,a;u===-1?(l=g,a=""):(l=g.substring(0,u),a=g.substring(u+1));const r=this._children.get(l);return typeof r<"u"?r.match(a):this._mainRule}insert(g,u,l,a){if(g===""){this._mainRule.acceptOverwrite(u,l,a);return}const r=g.indexOf(".");let d,m;r===-1?(d=g,m=""):(d=g.substring(0,r),m=g.substring(r+1));let h=this._children.get(d);typeof h>"u"&&(h=new t(this._mainRule.clone()),this._children.set(d,h)),h.insert(m,u,l,a)}}e.ThemeTrieElement=t;function i(o){const g=[];for(let u=1,l=o.length;u<l;u++){const a=o[u];g[u]=`.mtk${u} { color: ${a}; }`}return g.push(".mtki { font-style: italic; }"),g.push(".mtkb { font-weight: bold; }"),g.push(".mtku { text-decoration: underline; text-underline-position: under; }"),g.push(".mtks { text-decoration: line-through; }"),g.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),g.join(`
`)}}),define(oe[40],re([1,0,54]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApplyEditsResult=e.SearchData=e.ValidAnnotatedEditOperation=e.FindMatch=e.TextModelResolvedOptions=e.InjectedTextCursorStops=e.GlyphMarginLane=e.OverviewRulerLane=void 0,e.isITextSnapshot=_,e.shouldSynchronizeModel=s;var k;(function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=4]="Right",t[t.Full=7]="Full"})(k||(e.OverviewRulerLane=k={}));var E;(function(t){t[t.Left=1]="Left",t[t.Center=2]="Center",t[t.Right=3]="Right"})(E||(e.GlyphMarginLane=E={}));var L;(function(t){t[t.Both=0]="Both",t[t.Right=1]="Right",t[t.Left=2]="Left",t[t.None=3]="None"})(L||(e.InjectedTextCursorStops=L={}));class y{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(i){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,i.tabSize|0),i.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,i.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!i.insertSpaces,this.defaultEOL=i.defaultEOL|0,this.trimAutoWhitespace=!!i.trimAutoWhitespace,this.bracketPairColorizationOptions=i.bracketPairColorizationOptions}equals(i){return this.tabSize===i.tabSize&&this._indentSizeIsTabSize===i._indentSizeIsTabSize&&this.indentSize===i.indentSize&&this.insertSpaces===i.insertSpaces&&this.defaultEOL===i.defaultEOL&&this.trimAutoWhitespace===i.trimAutoWhitespace&&(0,c.equals)(this.bracketPairColorizationOptions,i.bracketPairColorizationOptions)}createChangeEvent(i){return{tabSize:this.tabSize!==i.tabSize,indentSize:this.indentSize!==i.indentSize,insertSpaces:this.insertSpaces!==i.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==i.trimAutoWhitespace}}}e.TextModelResolvedOptions=y;class f{constructor(i,o){this._findMatchBrand=void 0,this.range=i,this.matches=o}}e.FindMatch=f;function _(t){return t&&typeof t.read=="function"}class b{constructor(i,o,g,u,l,a){this.identifier=i,this.range=o,this.text=g,this.forceMoveMarkers=u,this.isAutoWhitespaceEdit=l,this._isTracked=a}}e.ValidAnnotatedEditOperation=b;class p{constructor(i,o,g){this.regex=i,this.wordSeparators=o,this.simpleSearch=g}}e.SearchData=p;class n{constructor(i,o,g){this.reverseEdits=i,this.changes=o,this.trimAutoWhitespaceLineNumbers=g}}e.ApplyEditsResult=n;function s(t){return!t.isTooLargeForSyncing()&&!t.isForSimpleWidget}}),define(oe[586],re([1,0,6,2,40,333]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageFeatureRegistry=void 0;function y(p){return typeof p=="string"?!1:Array.isArray(p)?p.every(y):!!p.exclusive}class f{constructor(n,s,t,i,o){this.uri=n,this.languageId=s,this.notebookUri=t,this.notebookType=i,this.recursive=o}equals(n){return this.notebookType===n.notebookType&&this.languageId===n.languageId&&this.uri.toString()===n.uri.toString()&&this.notebookUri?.toString()===n.notebookUri?.toString()&&this.recursive===n.recursive}}class _{constructor(n){this._notebookInfoResolver=n,this._clock=0,this._entries=[],this._onDidChange=new c.Emitter,this.onDidChange=this._onDidChange.event}register(n,s){let t={selector:n,provider:s,_score:-1,_time:this._clock++};return this._entries.push(t),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),(0,k.toDisposable)(()=>{if(t){const i=this._entries.indexOf(t);i>=0&&(this._entries.splice(i,1),this._lastCandidate=void 0,this._onDidChange.fire(this._entries.length),t=void 0)}})}has(n){return this.all(n).length>0}all(n){if(!n)return[];this._updateScores(n,!1);const s=[];for(const t of this._entries)t._score>0&&s.push(t.provider);return s}ordered(n,s=!1){const t=[];return this._orderedForEach(n,s,i=>t.push(i.provider)),t}orderedGroups(n){const s=[];let t,i;return this._orderedForEach(n,!1,o=>{t&&i===o._score?t.push(o.provider):(i=o._score,t=[o.provider],s.push(t))}),s}_orderedForEach(n,s,t){this._updateScores(n,s);for(const i of this._entries)i._score>0&&t(i)}_updateScores(n,s){const t=this._notebookInfoResolver?.(n.uri),i=t?new f(n.uri,n.getLanguageId(),t.uri,t.type,s):new f(n.uri,n.getLanguageId(),void 0,void 0,s);if(!this._lastCandidate?.equals(i)){this._lastCandidate=i;for(const o of this._entries)if(o._score=(0,L.score)(o.selector,i.uri,i.languageId,(0,E.shouldSynchronizeModel)(n),i.notebookUri,i.notebookType),y(o.selector)&&o._score>0)if(s)o._score=0;else{for(const g of this._entries)g._score=0;o._score=1e3;break}this._entries.sort(_._compareByScoreAndTime)}}static _compareByScoreAndTime(n,s){return n._score<s._score?1:n._score>s._score?-1:b(n.selector)&&!b(s.selector)?1:!b(n.selector)&&b(s.selector)?-1:n._time<s._time?1:n._time>s._time?-1:0}}e.LanguageFeatureRegistry=_;function b(p){return typeof p=="string"?!1:Array.isArray(p)?p.some(b):!!p.isBuiltin}}),define(oe[105],re([1,0,11,4,115]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.lengthZero=void 0,e.lengthDiff=L,e.lengthIsZero=y,e.toLength=_,e.lengthToObj=b,e.lengthGetLineCount=p,e.lengthGetColumnCountIfZeroLineCount=n,e.lengthAdd=s,e.sumLengths=t,e.lengthEquals=i,e.lengthDiffNonNegative=o,e.lengthLessThan=g,e.lengthLessThanEqual=u,e.lengthGreaterThanEqual=l,e.positionToLength=a,e.lengthsToRange=r,e.lengthOfString=d;function L(m,h,v,C){return m!==v?_(v-m,C):_(0,C-h)}e.lengthZero=0;function y(m){return m===0}const f=2**26;function _(m,h){return m*f+h}function b(m){const h=m,v=Math.floor(h/f),C=h-v*f;return new E.TextLength(v,C)}function p(m){return Math.floor(m/f)}function n(m){return m}function s(m,h){let v=m+h;return h>=f&&(v=v-m%f),v}function t(m,h){return m.reduce((v,C)=>s(v,h(C)),e.lengthZero)}function i(m,h){return m===h}function o(m,h){const v=m,C=h;if(C-v<=0)return e.lengthZero;const S=Math.floor(v/f),D=Math.floor(C/f),I=C-D*f;if(S===D){const T=v-S*f;return _(0,I-T)}else return _(D-S,I)}function g(m,h){return m<h}function u(m,h){return m<=h}function l(m,h){return m>=h}function a(m){return _(m.lineNumber-1,m.column-1)}function r(m,h){const v=m,C=Math.floor(v/f),w=v-C*f,S=h,D=Math.floor(S/f),I=S-D*f;return new k.Range(C+1,w+1,D+1,I+1)}function d(m){const h=(0,c.splitLines)(m);return _(h.length-1,h[h.length-1].length)}}),define(oe[201],re([1,0,4,105]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BeforeEditPositionMapper=e.TextEditInfo=void 0;class E{static fromModelContentChanges(_){return _.map(p=>{const n=c.Range.lift(p.range);return new E((0,k.positionToLength)(n.getStartPosition()),(0,k.positionToLength)(n.getEndPosition()),(0,k.lengthOfString)(p.text))}).reverse()}constructor(_,b,p){this.startOffset=_,this.endOffset=b,this.newLength=p}toString(){return`[${(0,k.lengthToObj)(this.startOffset)}...${(0,k.lengthToObj)(this.endOffset)}) -> ${(0,k.lengthToObj)(this.newLength)}`}}e.TextEditInfo=E;class L{constructor(_){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=_.map(b=>y.from(b))}getOffsetBeforeChange(_){return this.adjustNextEdit(_),this.translateCurToOld(_)}getDistanceToNextChange(_){this.adjustNextEdit(_);const b=this.edits[this.nextEditIdx],p=b?this.translateOldToCur(b.offsetObj):null;return p===null?null:(0,k.lengthDiffNonNegative)(_,p)}translateOldToCur(_){return _.lineCount===this.deltaLineIdxInOld?(0,k.toLength)(_.lineCount+this.deltaOldToNewLineCount,_.columnCount+this.deltaOldToNewColumnCount):(0,k.toLength)(_.lineCount+this.deltaOldToNewLineCount,_.columnCount)}translateCurToOld(_){const b=(0,k.lengthToObj)(_);return b.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?(0,k.toLength)(b.lineCount-this.deltaOldToNewLineCount,b.columnCount-this.deltaOldToNewColumnCount):(0,k.toLength)(b.lineCount-this.deltaOldToNewLineCount,b.columnCount)}adjustNextEdit(_){for(;this.nextEditIdx<this.edits.length;){const b=this.edits[this.nextEditIdx],p=this.translateOldToCur(b.endOffsetAfterObj);if((0,k.lengthLessThanEqual)(p,_)){this.nextEditIdx++;const n=(0,k.lengthToObj)(p),s=(0,k.lengthToObj)(this.translateOldToCur(b.endOffsetBeforeObj)),t=n.lineCount-s.lineCount;this.deltaOldToNewLineCount+=t;const i=this.deltaLineIdxInOld===b.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,o=n.columnCount-s.columnCount;this.deltaOldToNewColumnCount=i+o,this.deltaLineIdxInOld=b.endOffsetBeforeObj.lineCount}else break}}}e.BeforeEditPositionMapper=L;class y{static from(_){return new y(_.startOffset,_.endOffset,_.newLength)}constructor(_,b,p){this.endOffsetBeforeObj=(0,k.lengthToObj)(b),this.endOffsetAfterObj=(0,k.lengthToObj)((0,k.lengthAdd)(_,p)),this.offsetObj=(0,k.lengthToObj)(_)}}}),define(oe[334],re([1,0,13,201,105]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.combineTextEditInfos=L;function L(_,b){if(_.length===0)return b;if(b.length===0)return _;const p=new c.ArrayQueue(f(_)),n=f(b);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=p.dequeue();function t(u){if(u===void 0){const a=p.takeWhile(r=>!0)||[];return s&&a.unshift(s),a}const l=[];for(;s&&!(0,E.lengthIsZero)(u);){const[a,r]=s.splitAt(u);l.push(a),u=(0,E.lengthDiffNonNegative)(a.lengthAfter,u),s=r??p.dequeue()}return(0,E.lengthIsZero)(u)||l.push(new y(!1,u,u)),l}const i=[];function o(u,l,a){if(i.length>0&&(0,E.lengthEquals)(i[i.length-1].endOffset,u)){const r=i[i.length-1];i[i.length-1]=new k.TextEditInfo(r.startOffset,l,(0,E.lengthAdd)(r.newLength,a))}else i.push({startOffset:u,endOffset:l,newLength:a})}let g=E.lengthZero;for(const u of n){const l=t(u.lengthBefore);if(u.modified){const a=(0,E.sumLengths)(l,d=>d.lengthBefore),r=(0,E.lengthAdd)(g,a);o(g,r,u.lengthAfter),g=r}else for(const a of l){const r=g;g=(0,E.lengthAdd)(g,a.lengthBefore),a.modified&&o(r,g,a.lengthAfter)}}return i}class y{constructor(b,p,n){this.modified=b,this.lengthBefore=p,this.lengthAfter=n}splitAt(b){const p=(0,E.lengthDiffNonNegative)(b,this.lengthAfter);return(0,E.lengthEquals)(p,E.lengthZero)?[this,void 0]:this.modified?[new y(this.modified,this.lengthBefore,b),new y(this.modified,E.lengthZero,p)]:[new y(this.modified,b,b),new y(this.modified,p,p)]}toString(){return`${this.modified?"M":"U"}:${(0,E.lengthToObj)(this.lengthBefore)} -> ${(0,E.lengthToObj)(this.lengthAfter)}`}}function f(_){const b=[];let p=E.lengthZero;for(const n of _){const s=(0,E.lengthDiffNonNegative)(p,n.startOffset);(0,E.lengthIsZero)(s)||b.push(new y(!1,s,s));const t=(0,E.lengthDiffNonNegative)(n.startOffset,n.endOffset);b.push(new y(!0,t,n.newLength)),p=n.endOffset}return b}}),define(oe[587],re([1,0,105]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeReader=void 0;class k{constructor(f){this.lastOffset=c.lengthZero,this.nextNodes=[f],this.offsets=[c.lengthZero],this.idxs=[]}readLongestNodeAt(f,_){if((0,c.lengthLessThan)(f,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=f;;){const b=L(this.nextNodes);if(!b)return;const p=L(this.offsets);if((0,c.lengthLessThan)(f,p))return;if((0,c.lengthLessThan)(p,f))if((0,c.lengthAdd)(p,b.length)<=f)this.nextNodeAfterCurrent();else{const n=E(b);n!==-1?(this.nextNodes.push(b.getChild(n)),this.offsets.push(p),this.idxs.push(n)):this.nextNodeAfterCurrent()}else{if(_(b))return this.nextNodeAfterCurrent(),b;{const n=E(b);if(n===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(b.getChild(n)),this.offsets.push(p),this.idxs.push(n)}}}}nextNodeAfterCurrent(){for(;;){const f=L(this.offsets),_=L(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const b=L(this.nextNodes),p=E(b,this.idxs[this.idxs.length-1]);if(p!==-1){this.nextNodes.push(b.getChild(p)),this.offsets.push((0,c.lengthAdd)(f,_.length)),this.idxs[this.idxs.length-1]=p;break}else this.idxs.pop()}}}e.NodeReader=k;function E(y,f=-1){for(;;){if(f++,f>=y.childrenLength)return-1;if(y.getChild(f))return f}}function L(y){return y.length>0?y[y.length-1]:void 0}}),define(oe[148],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DenseKeyProvider=e.identityKeyProvider=e.SmallImmutableSet=void 0;const c=[];class k{static{this.cache=new Array(129)}static create(y,f){if(y<=128&&f.length===0){let _=k.cache[y];return _||(_=new k(y,f),k.cache[y]=_),_}return new k(y,f)}static{this.empty=k.create(0,c)}static getEmpty(){return this.empty}constructor(y,f){this.items=y,this.additionalItems=f}add(y,f){const _=f.getKey(y);let b=_>>5;if(b===0){const n=1<<_|this.items;return n===this.items?this:k.create(n,this.additionalItems)}b--;const p=this.additionalItems.slice(0);for(;p.length<b;)p.push(0);return p[b]|=1<<(_&31),k.create(this.items,p)}merge(y){const f=this.items|y.items;if(this.additionalItems===c&&y.additionalItems===c)return f===this.items?this:f===y.items?y:k.create(f,c);const _=[];for(let b=0;b<Math.max(this.additionalItems.length,y.additionalItems.length);b++){const p=this.additionalItems[b]||0,n=y.additionalItems[b]||0;_.push(p|n)}return k.create(f,_)}intersects(y){if(this.items&y.items)return!0;for(let f=0;f<Math.min(this.additionalItems.length,y.additionalItems.length);f++)if(this.additionalItems[f]&y.additionalItems[f])return!0;return!1}}e.SmallImmutableSet=k,e.identityKeyProvider={getKey(L){return L}};class E{constructor(){this.items=new Map}getKey(y){let f=this.items.get(y);return f===void 0&&(f=this.items.size,this.items.set(y,f)),f}}e.DenseKeyProvider=E}),define(oe[202],re([1,0,8,93,105,148]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InvalidBracketAstNode=e.BracketAstNode=e.TextAstNode=e.ListAstNode=e.PairAstNode=void 0;class y{get length(){return this._length}constructor(a){this._length=a}}class f extends y{static create(a,r,d){let m=a.length;return r&&(m=(0,E.lengthAdd)(m,r.length)),d&&(m=(0,E.lengthAdd)(m,d.length)),new f(m,a,r,d,r?r.missingOpeningBracketIds:L.SmallImmutableSet.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(a){switch(a){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const a=[];return a.push(this.openingBracket),this.child&&a.push(this.child),this.closingBracket&&a.push(this.closingBracket),a}constructor(a,r,d,m,h){super(a),this.openingBracket=r,this.child=d,this.closingBracket=m,this.missingOpeningBracketIds=h}canBeReused(a){return!(this.closingBracket===null||a.intersects(this.missingOpeningBracketIds))}deepClone(){return new f(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(a,r){return this.child?this.child.computeMinIndentation((0,E.lengthAdd)(a,this.openingBracket.length),r):Number.MAX_SAFE_INTEGER}}e.PairAstNode=f;class _ extends y{static create23(a,r,d,m=!1){let h=a.length,v=a.missingOpeningBracketIds;if(a.listHeight!==r.listHeight)throw new Error("Invalid list heights");if(h=(0,E.lengthAdd)(h,r.length),v=v.merge(r.missingOpeningBracketIds),d){if(a.listHeight!==d.listHeight)throw new Error("Invalid list heights");h=(0,E.lengthAdd)(h,d.length),v=v.merge(d.missingOpeningBracketIds)}return m?new p(h,a.listHeight+1,a,r,d,v):new b(h,a.listHeight+1,a,r,d,v)}static getEmpty(){return new s(E.lengthZero,0,[],L.SmallImmutableSet.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(a,r,d){super(a),this.listHeight=r,this._missingOpeningBracketIds=d,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const a=this.childrenLength;if(a===0)return;const r=this.getChild(a-1),d=r.kind===4?r.toMutable():r;return r!==d&&this.setChild(a-1,d),d}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const r=this.getChild(0),d=r.kind===4?r.toMutable():r;return r!==d&&this.setChild(0,d),d}canBeReused(a){if(a.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let r=this;for(;r.kind===4;){const d=r.childrenLength;if(d===0)throw new c.BugIndicatingError;r=r.getChild(d-1)}return r.canBeReused(a)}handleChildrenChanged(){this.throwIfImmutable();const a=this.childrenLength;let r=this.getChild(0).length,d=this.getChild(0).missingOpeningBracketIds;for(let m=1;m<a;m++){const h=this.getChild(m);r=(0,E.lengthAdd)(r,h.length),d=d.merge(h.missingOpeningBracketIds)}this._length=r,this._missingOpeningBracketIds=d,this.cachedMinIndentation=-1}computeMinIndentation(a,r){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let d=Number.MAX_SAFE_INTEGER,m=a;for(let h=0;h<this.childrenLength;h++){const v=this.getChild(h);v&&(d=Math.min(d,v.computeMinIndentation(m,r)),m=(0,E.lengthAdd)(m,v.length))}return this.cachedMinIndentation=d,d}}e.ListAstNode=_;class b extends _{get childrenLength(){return this._item3!==null?3:2}getChild(a){switch(a){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(a,r){switch(a){case 0:this._item1=r;return;case 1:this._item2=r;return;case 2:this._item3=r;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(a,r,d,m,h,v){super(a,r,v),this._item1=d,this._item2=m,this._item3=h}deepClone(){return new b(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(a){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=a,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const a=this._item3;return this._item3=null,this.handleChildrenChanged(),a}prependChildOfSameHeight(a){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=a,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const a=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),a}toMutable(){return this}}class p extends b{toMutable(){return new b(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class n extends _{get childrenLength(){return this._children.length}getChild(a){return this._children[a]}setChild(a,r){this._children[a]=r}get children(){return this._children}constructor(a,r,d,m){super(a,r,m),this._children=d}deepClone(){const a=new Array(this._children.length);for(let r=0;r<this._children.length;r++)a[r]=this._children[r].deepClone();return new n(this.length,this.listHeight,a,this.missingOpeningBracketIds)}appendChildOfSameHeight(a){this.throwIfImmutable(),this._children.push(a),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const a=this._children.pop();return this.handleChildrenChanged(),a}prependChildOfSameHeight(a){this.throwIfImmutable(),this._children.unshift(a),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const a=this._children.shift();return this.handleChildrenChanged(),a}toMutable(){return this}}class s extends n{toMutable(){return new n(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const t=[];class i extends y{get listHeight(){return 0}get childrenLength(){return 0}getChild(a){return null}get children(){return t}deepClone(){return this}}class o extends i{get kind(){return 0}get missingOpeningBracketIds(){return L.SmallImmutableSet.getEmpty()}canBeReused(a){return!0}computeMinIndentation(a,r){const d=(0,E.lengthToObj)(a),m=(d.columnCount===0?d.lineCount:d.lineCount+1)+1,h=(0,E.lengthGetLineCount)((0,E.lengthAdd)(a,this.length))+1;let v=Number.MAX_SAFE_INTEGER;for(let C=m;C<=h;C++){const w=r.getLineFirstNonWhitespaceColumn(C),S=r.getLineContent(C);if(w===0)continue;const D=k.CursorColumns.visibleColumnFromColumn(S,w,r.getOptions().tabSize);v=Math.min(v,D)}return v}}e.TextAstNode=o;class g extends i{static create(a,r,d){return new g(a,r,d)}get kind(){return 1}get missingOpeningBracketIds(){return L.SmallImmutableSet.getEmpty()}constructor(a,r,d){super(a),this.bracketInfo=r,this.bracketIds=d}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(a){return!1}computeMinIndentation(a,r){return Number.MAX_SAFE_INTEGER}}e.BracketAstNode=g;class u extends i{get kind(){return 3}constructor(a,r){super(r),this.missingOpeningBracketIds=a}canBeReused(a){return!a.intersects(this.missingOpeningBracketIds)}computeMinIndentation(a,r){return Number.MAX_SAFE_INTEGER}}e.InvalidBracketAstNode=u}),define(oe[588],re([1,0,202]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.concat23Trees=k,e.concat23TreesOfSameHeight=E;function k(b){if(b.length===0)return null;if(b.length===1)return b[0];let p=0;function n(){if(p>=b.length)return null;const o=p,g=b[o].listHeight;for(p++;p<b.length&&b[p].listHeight===g;)p++;return p-o>=2?E(o===0&&p===b.length?b:b.slice(o,p),!1):b[o]}let s=n(),t=n();if(!t)return s;for(let o=n();o;o=n())L(s,t)<=L(t,o)?(s=y(s,t),t=o):t=y(t,o);return y(s,t)}function E(b,p=!1){if(b.length===0)return null;if(b.length===1)return b[0];let n=b.length;for(;n>3;){const s=n>>1;for(let t=0;t<s;t++){const i=t<<1;b[t]=c.ListAstNode.create23(b[i],b[i+1],i+3===n?b[i+2]:null,p)}n=s}return c.ListAstNode.create23(b[0],b[1],n>=3?b[2]:null,p)}function L(b,p){return Math.abs(b.listHeight-p.listHeight)}function y(b,p){return b.listHeight===p.listHeight?c.ListAstNode.create23(b,p,null,!1):b.listHeight>p.listHeight?f(b,p):_(p,b)}function f(b,p){b=b.toMutable();let n=b;const s=[];let t;for(;;){if(p.listHeight===n.listHeight){t=p;break}if(n.kind!==4)throw new Error("unexpected");s.push(n),n=n.makeLastElementMutable()}for(let i=s.length-1;i>=0;i--){const o=s[i];t?o.childrenLength>=3?t=c.ListAstNode.create23(o.unappendChild(),t,null,!1):(o.appendChildOfSameHeight(t),t=void 0):o.handleChildrenChanged()}return t?c.ListAstNode.create23(b,t,null,!1):b}function _(b,p){b=b.toMutable();let n=b;const s=[];for(;p.listHeight!==n.listHeight;){if(n.kind!==4)throw new Error("unexpected");s.push(n),n=n.makeFirstElementMutable()}let t=p;for(let i=s.length-1;i>=0;i--){const o=s[i];t?o.childrenLength>=3?t=c.ListAstNode.create23(t,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(t),t=void 0):o.handleChildrenChanged()}return t?c.ListAstNode.create23(t,b,null,!1):b}}),define(oe[335],re([1,0,202,201,148,105,588,587]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseDocument=_;function _(p,n,s,t){return new b(p,n,s,t).parseDocument()}class b{constructor(n,s,t,i){if(this.tokenizer=n,this.createImmutableLists=i,this._itemsConstructed=0,this._itemsFromCache=0,t&&i)throw new Error("Not supported");this.oldNodeReader=t?new f.NodeReader(t):void 0,this.positionMapper=new k.BeforeEditPositionMapper(s)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let n=this.parseList(E.SmallImmutableSet.getEmpty(),0);return n||(n=c.ListAstNode.getEmpty()),n}parseList(n,s){const t=[];for(;;){let o=this.tryReadChildFromCache(n);if(!o){const g=this.tokenizer.peek();if(!g||g.kind===2&&g.bracketIds.intersects(n))break;o=this.parseChild(n,s+1)}o.kind===4&&o.childrenLength===0||t.push(o)}return this.oldNodeReader?(0,y.concat23Trees)(t):(0,y.concat23TreesOfSameHeight)(t,this.createImmutableLists)}tryReadChildFromCache(n){if(this.oldNodeReader){const s=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(s===null||!(0,L.lengthIsZero)(s)){const t=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>s!==null&&!(0,L.lengthLessThan)(i.length,s)?!1:i.canBeReused(n));if(t)return this._itemsFromCache++,this.tokenizer.skip(t.length),t}}}parseChild(n,s){this._itemsConstructed++;const t=this.tokenizer.read();switch(t.kind){case 2:return new c.InvalidBracketAstNode(t.bracketIds,t.length);case 0:return t.astNode;case 1:{if(s>300)return new c.TextAstNode(t.length);const i=n.merge(t.bracketIds),o=this.parseList(i,s+1),g=this.tokenizer.peek();return g&&g.kind===2&&(g.bracketId===t.bracketId||g.bracketIds.intersects(t.bracketIds))?(this.tokenizer.read(),c.PairAstNode.create(t.astNode,o,g.astNode)):c.PairAstNode.create(t.astNode,o,null)}default:throw new Error("unexpected")}}}}),define(oe[247],re([1,0,8,147,202,105,148]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FastTokenizer=e.TextBufferTokenizer=e.Token=void 0;class f{constructor(s,t,i,o,g){this.length=s,this.kind=t,this.bracketId=i,this.bracketIds=o,this.astNode=g}}e.Token=f;class _{constructor(s,t){this.textModel=s,this.bracketTokens=t,this.reader=new b(this.textModel,this.bracketTokens),this._offset=L.lengthZero,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=s.getLineCount(),this.textBufferLastLineLength=s.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return(0,L.toLength)(this.textBufferLineCount-1,this.textBufferLastLineLength)}skip(s){this.didPeek=!1,this._offset=(0,L.lengthAdd)(this._offset,s);const t=(0,L.lengthToObj)(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let s;return this.peeked?(this.didPeek=!1,s=this.peeked):s=this.reader.read(),s&&(this._offset=(0,L.lengthAdd)(this._offset,s.length)),s}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}e.TextBufferTokenizer=_;class b{constructor(s,t){this.textModel=s,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=s.getLineCount(),this.textBufferLastLineLength=s.getLineLength(this.textBufferLineCount)}setPosition(s,t){s===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=s,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const g=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=(0,L.lengthGetColumnCountIfZeroLineCount)(g.length),g}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const s=this.lineIdx,t=this.lineCharOffset;let i=0;for(;;){const g=this.lineTokens,u=g.getCount();let l=null;if(this.lineTokenOffset<u){const a=g.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<u&&a===g.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const r=k.TokenMetadata.getTokenType(a)===0,d=k.TokenMetadata.containsBalancedBrackets(a),m=g.getEndOffset(this.lineTokenOffset);if(d&&r&&this.lineCharOffset<m){const h=g.getLanguageId(this.lineTokenOffset),v=this.line.substring(this.lineCharOffset,m),C=this.bracketTokens.getSingleLanguageBracketTokens(h),w=C.regExpGlobal;if(w){w.lastIndex=0;const S=w.exec(v);S&&(l=C.getToken(S[0]),l&&(this.lineCharOffset+=S.index))}}if(i+=m-this.lineCharOffset,l)if(s!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=l;break}else return this.lineCharOffset+=(0,L.lengthGetColumnCountIfZeroLineCount)(l.length),l;else this.lineTokenOffset++,this.lineCharOffset=m}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,i+=33,i>1e3))break;if(i>1500)break}const o=(0,L.lengthDiff)(s,t,this.lineIdx,this.lineCharOffset);return new f(o,0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode(o))}}class p{constructor(s,t){this.text=s,this._offset=L.lengthZero,this.idx=0;const i=t.getRegExpStr(),o=i?new RegExp(i+`|
`,"gi"):null,g=[];let u,l=0,a=0,r=0,d=0;const m=[];for(let C=0;C<60;C++)m.push(new f((0,L.toLength)(0,C),0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode((0,L.toLength)(0,C))));const h=[];for(let C=0;C<60;C++)h.push(new f((0,L.toLength)(1,C),0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode((0,L.toLength)(1,C))));if(o)for(o.lastIndex=0;(u=o.exec(s))!==null;){const C=u.index,w=u[0];if(w===`
`)l++,a=C+1;else{if(r!==C){let S;if(d===l){const D=C-r;if(D<m.length)S=m[D];else{const I=(0,L.toLength)(0,D);S=new f(I,0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode(I))}}else{const D=l-d,I=C-a;if(D===1&&I<h.length)S=h[I];else{const T=(0,L.toLength)(D,I);S=new f(T,0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode(T))}}g.push(S)}g.push(t.getToken(w)),r=C+w.length,d=l}}const v=s.length;if(r!==v){const C=d===l?(0,L.toLength)(0,v-r):(0,L.toLength)(l-d,v-a);g.push(new f(C,0,-1,y.SmallImmutableSet.getEmpty(),new E.TextAstNode(C)))}this.length=(0,L.toLength)(l,v-a),this.tokens=g}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(s){throw new c.NotSupportedError}}e.FastTokenizer=p}),define(oe[336],re([1,0,11,202,105,148,247]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageAgnosticBracketTokens=e.BracketTokens=void 0;class f{static createFromLanguage(n,s){function t(o){return s.getKey(`${o.languageId}:::${o.bracketText}`)}const i=new Map;for(const o of n.bracketsNew.openingBrackets){const g=(0,E.toLength)(0,o.bracketText.length),u=t(o),l=L.SmallImmutableSet.getEmpty().add(u,L.identityKeyProvider);i.set(o.bracketText,new y.Token(g,1,u,l,k.BracketAstNode.create(g,o,l)))}for(const o of n.bracketsNew.closingBrackets){const g=(0,E.toLength)(0,o.bracketText.length);let u=L.SmallImmutableSet.getEmpty();const l=o.getOpeningBrackets();for(const a of l)u=u.add(t(a),L.identityKeyProvider);i.set(o.bracketText,new y.Token(g,2,t(l[0]),u,k.BracketAstNode.create(g,o,u)))}return new f(i)}constructor(n){this.map=n,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const n=[...this.map.keys()];return n.sort(),n.reverse(),n.map(s=>_(s)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const n=this.getRegExpStr();this._regExpGlobal=n?new RegExp(n,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(n){return this.map.get(n.toLowerCase())}findClosingTokenText(n){for(const[s,t]of this.map)if(t.kind===2&&t.bracketIds.intersects(n))return s}get isEmpty(){return this.map.size===0}}e.BracketTokens=f;function _(p){let n=(0,c.escapeRegExpCharacters)(p);return/^[\w ]+/.test(p)&&(n=`\\b${n}`),/[\w ]+$/.test(p)&&(n=`${n}\\b`),n}class b{constructor(n,s){this.denseKeyProvider=n,this.getLanguageConfiguration=s,this.languageIdToBracketTokens=new Map}didLanguageChange(n){return this.languageIdToBracketTokens.has(n)}getSingleLanguageBracketTokens(n){let s=this.languageIdToBracketTokens.get(n);return s||(s=f.createFromLanguage(this.getLanguageConfiguration(n),this.denseKeyProvider),this.languageIdToBracketTokens.set(n,s)),s}}e.LanguageAgnosticBracketTokens=b}),define(oe[589],re([1,0,336,105,335,148,247]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fixBracketsInLine=f;function f(b,p){const n=new L.DenseKeyProvider,s=new c.LanguageAgnosticBracketTokens(n,l=>p.getLanguageConfiguration(l)),t=new y.TextBufferTokenizer(new _([b]),s),i=(0,E.parseDocument)(t,[],void 0,!0);let o="";const g=b.getLineContent();function u(l,a){if(l.kind===2)if(u(l.openingBracket,a),a=(0,k.lengthAdd)(a,l.openingBracket.length),l.child&&(u(l.child,a),a=(0,k.lengthAdd)(a,l.child.length)),l.closingBracket)u(l.closingBracket,a),a=(0,k.lengthAdd)(a,l.closingBracket.length);else{const d=s.getSingleLanguageBracketTokens(l.openingBracket.languageId).findClosingTokenText(l.openingBracket.bracketIds);o+=d}else if(l.kind!==3){if(l.kind===0||l.kind===1)o+=g.substring((0,k.lengthGetColumnCountIfZeroLineCount)(a),(0,k.lengthGetColumnCountIfZeroLineCount)((0,k.lengthAdd)(a,l.length)));else if(l.kind===4)for(const r of l.children)u(r,a),a=(0,k.lengthAdd)(a,r.length)}}return u(i,k.lengthZero),o}class _{constructor(p){this.lines=p,this.tokenization={getLineTokens:n=>this.lines[n-1]}}getLineCount(){return this.lines.length}getLineLength(p){return this.lines[p-1].getLineContent().length}}}),define(oe[590],re([1,0,13]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FixedArray=void 0;class k{constructor(y){this._default=y,this._store=[]}get(y){return y<this._store.length?this._store[y]:this._default}set(y,f){for(;y>=this._store.length;)this._store[this._store.length]=this._default;this._store[y]=f}replace(y,f,_){if(y>=this._store.length)return;if(f===0){this.insert(y,_);return}else if(_===0){this.delete(y,f);return}const b=this._store.slice(0,y),p=this._store.slice(y+f),n=E(_,this._default);this._store=b.concat(n,p)}delete(y,f){f===0||y>=this._store.length||this._store.splice(y,f)}insert(y,f){if(f===0||y>=this._store.length)return;const _=[];for(let b=0;b<f;b++)_[b]=this._default;this._store=(0,c.arrayInsert)(this._store,y,_)}}e.FixedArray=k;function E(L,y){const f=[];for(let _=0;_<L;_++)f[_]=y;return f}}),define(oe[591],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guessIndentation=E;class c{constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function k(L,y,f,_,b){b.spacesDiff=0,b.looksLikeAlignment=!1;let p;for(p=0;p<y&&p<_;p++){const u=L.charCodeAt(p),l=f.charCodeAt(p);if(u!==l)break}let n=0,s=0;for(let u=p;u<y;u++)L.charCodeAt(u)===32?n++:s++;let t=0,i=0;for(let u=p;u<_;u++)f.charCodeAt(u)===32?t++:i++;if(n>0&&s>0||t>0&&i>0)return;const o=Math.abs(s-i),g=Math.abs(n-t);if(o===0){b.spacesDiff=g,g>0&&0<=t-1&&t-1<L.length&&t<f.length&&f.charCodeAt(t)!==32&&L.charCodeAt(t-1)===32&&L.charCodeAt(L.length-1)===44&&(b.looksLikeAlignment=!0);return}if(g%o===0){b.spacesDiff=g/o;return}}function E(L,y,f){const _=Math.min(L.getLineCount(),1e4);let b=0,p=0,n="",s=0;const t=[2,4,6,8,3,5,7],i=8,o=[0,0,0,0,0,0,0,0,0],g=new c;for(let a=1;a<=_;a++){const r=L.getLineLength(a),d=L.getLineContent(a),m=r<=65536;let h=!1,v=0,C=0,w=0;for(let D=0,I=r;D<I;D++){const T=m?d.charCodeAt(D):L.getLineCharCode(a,D);if(T===9)w++;else if(T===32)C++;else{h=!0,v=D;break}}if(!h||(w>0?b++:C>1&&p++,k(n,s,d,v,g),g.looksLikeAlignment&&!(f&&y===g.spacesDiff)))continue;const S=g.spacesDiff;S<=i&&o[S]++,n=d,s=v}let u=f;b!==p&&(u=b<p);let l=y;if(u){let a=u?0:.1*_;t.forEach(r=>{const d=o[r];d>a&&(a=d,l=r)}),l===4&&o[4]>0&&o[2]>0&&o[2]>=o[4]/2&&(l=2)}return{insertSpaces:u,tabSize:l}}}),define(oe[592],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IntervalTree=e.SENTINEL=e.IntervalNode=void 0,e.getNodeColor=c,e.nodeAcceptEdit=l,e.recomputeMaxEnd=R,e.intervalCompare=O;function c(x){return(x.metadata&1)>>>0}function k(x,F){x.metadata=x.metadata&254|F<<0}function E(x){return(x.metadata&2)>>>1===1}function L(x,F){x.metadata=x.metadata&253|(F?1:0)<<1}function y(x){return(x.metadata&4)>>>2===1}function f(x,F){x.metadata=x.metadata&251|(F?1:0)<<2}function _(x){return(x.metadata&64)>>>6===1}function b(x,F){x.metadata=x.metadata&191|(F?1:0)<<6}function p(x){return(x.metadata&24)>>>3}function n(x,F){x.metadata=x.metadata&231|F<<3}function s(x){return(x.metadata&32)>>>5===1}function t(x,F){x.metadata=x.metadata&223|(F?1:0)<<5}class i{constructor(F,W,z){this.metadata=0,this.parent=this,this.left=this,this.right=this,k(this,1),this.start=W,this.end=z,this.delta=0,this.maxEnd=z,this.id=F,this.ownerId=0,this.options=null,f(this,!1),b(this,!1),n(this,1),t(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=W,this.cachedAbsoluteEnd=z,this.range=null,L(this,!1)}reset(F,W,z,q){this.start=W,this.end=z,this.maxEnd=z,this.cachedVersionId=F,this.cachedAbsoluteStart=W,this.cachedAbsoluteEnd=z,this.range=q}setOptions(F){this.options=F;const W=this.options.className;f(this,W==="squiggly-error"||W==="squiggly-warning"||W==="squiggly-info"),b(this,this.options.glyphMarginClassName!==null),n(this,this.options.stickiness),t(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(F,W,z){this.cachedVersionId!==z&&(this.range=null),this.cachedVersionId=z,this.cachedAbsoluteStart=F,this.cachedAbsoluteEnd=W}detach(){this.parent=null,this.left=null,this.right=null}}e.IntervalNode=i,e.SENTINEL=new i(null,0,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,k(e.SENTINEL,0);class o{constructor(){this.root=e.SENTINEL,this.requestNormalizeDelta=!1}intervalSearch(F,W,z,q,H,K){return this.root===e.SENTINEL?[]:v(this,F,W,z,q,H,K)}search(F,W,z,q){return this.root===e.SENTINEL?[]:h(this,F,W,z,q)}collectNodesFromOwner(F){return d(this,F)}collectNodesPostOrder(){return m(this)}insert(F){C(this,F),this._normalizeDeltaIfNecessary()}delete(F){S(this,F),this._normalizeDeltaIfNecessary()}resolveNode(F,W){const z=F;let q=0;for(;F!==this.root;)F===F.parent.right&&(q+=F.parent.delta),F=F.parent;const H=z.start+q,K=z.end+q;z.setCachedOffsets(H,K,W)}acceptReplace(F,W,z,q){const H=a(this,F,F+W);for(let K=0,U=H.length;K<U;K++){const Y=H[K];S(this,Y)}this._normalizeDeltaIfNecessary(),r(this,F,F+W,z),this._normalizeDeltaIfNecessary();for(let K=0,U=H.length;K<U;K++){const Y=H[K];Y.start=Y.cachedAbsoluteStart,Y.end=Y.cachedAbsoluteEnd,l(Y,F,F+W,z,q),Y.maxEnd=Y.end,C(this,Y)}this._normalizeDeltaIfNecessary()}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,g(this))}}e.IntervalTree=o;function g(x){let F=x.root,W=0;for(;F!==e.SENTINEL;){if(F.left!==e.SENTINEL&&!E(F.left)){F=F.left;continue}if(F.right!==e.SENTINEL&&!E(F.right)){W+=F.delta,F=F.right;continue}F.start=W+F.start,F.end=W+F.end,F.delta=0,R(F),L(F,!0),L(F.left,!1),L(F.right,!1),F===F.parent.right&&(W-=F.parent.delta),F=F.parent}L(x.root,!1)}function u(x,F,W,z){return x<W?!0:x>W||z===1?!1:z===2?!0:F}function l(x,F,W,z,q){const H=p(x),K=H===0||H===2,U=H===1||H===2,Y=W-F,Q=z,X=Math.min(Y,Q),G=x.start;let P=!1;const te=x.end;let se=!1;F<=G&&te<=W&&s(x)&&(x.start=F,P=!0,x.end=F,se=!0);{const ge=q?1:Y>0?2:0;!P&&u(G,K,F,ge)&&(P=!0),!se&&u(te,U,F,ge)&&(se=!0)}if(X>0&&!q){const ge=Y>Q?2:0;!P&&u(G,K,F+X,ge)&&(P=!0),!se&&u(te,U,F+X,ge)&&(se=!0)}{const ge=q?1:0;!P&&u(G,K,W,ge)&&(x.start=F+Q,P=!0),!se&&u(te,U,W,ge)&&(x.end=F+Q,se=!0)}const ue=Q-Y;P||(x.start=Math.max(0,G+ue)),se||(x.end=Math.max(0,te+ue)),x.start>x.end&&(x.end=x.start)}function a(x,F,W){let z=x.root,q=0,H=0,K=0,U=0;const Y=[];let Q=0;for(;z!==e.SENTINEL;){if(E(z)){L(z.left,!1),L(z.right,!1),z===z.parent.right&&(q-=z.parent.delta),z=z.parent;continue}if(!E(z.left)){if(H=q+z.maxEnd,H<F){L(z,!0);continue}if(z.left!==e.SENTINEL){z=z.left;continue}}if(K=q+z.start,K>W){L(z,!0);continue}if(U=q+z.end,U>=F&&(z.setCachedOffsets(K,U,0),Y[Q++]=z),L(z,!0),z.right!==e.SENTINEL&&!E(z.right)){q+=z.delta,z=z.right;continue}}return L(x.root,!1),Y}function r(x,F,W,z){let q=x.root,H=0,K=0,U=0;const Y=z-(W-F);for(;q!==e.SENTINEL;){if(E(q)){L(q.left,!1),L(q.right,!1),q===q.parent.right&&(H-=q.parent.delta),R(q),q=q.parent;continue}if(!E(q.left)){if(K=H+q.maxEnd,K<F){L(q,!0);continue}if(q.left!==e.SENTINEL){q=q.left;continue}}if(U=H+q.start,U>W){q.start+=Y,q.end+=Y,q.delta+=Y,(q.delta<-1073741824||q.delta>1073741824)&&(x.requestNormalizeDelta=!0),L(q,!0);continue}if(L(q,!0),q.right!==e.SENTINEL&&!E(q.right)){H+=q.delta,q=q.right;continue}}L(x.root,!1)}function d(x,F){let W=x.root;const z=[];let q=0;for(;W!==e.SENTINEL;){if(E(W)){L(W.left,!1),L(W.right,!1),W=W.parent;continue}if(W.left!==e.SENTINEL&&!E(W.left)){W=W.left;continue}if(W.ownerId===F&&(z[q++]=W),L(W,!0),W.right!==e.SENTINEL&&!E(W.right)){W=W.right;continue}}return L(x.root,!1),z}function m(x){let F=x.root;const W=[];let z=0;for(;F!==e.SENTINEL;){if(E(F)){L(F.left,!1),L(F.right,!1),F=F.parent;continue}if(F.left!==e.SENTINEL&&!E(F.left)){F=F.left;continue}if(F.right!==e.SENTINEL&&!E(F.right)){F=F.right;continue}W[z++]=F,L(F,!0)}return L(x.root,!1),W}function h(x,F,W,z,q){let H=x.root,K=0,U=0,Y=0;const Q=[];let X=0;for(;H!==e.SENTINEL;){if(E(H)){L(H.left,!1),L(H.right,!1),H===H.parent.right&&(K-=H.parent.delta),H=H.parent;continue}if(H.left!==e.SENTINEL&&!E(H.left)){H=H.left;continue}U=K+H.start,Y=K+H.end,H.setCachedOffsets(U,Y,z);let G=!0;if(F&&H.ownerId&&H.ownerId!==F&&(G=!1),W&&y(H)&&(G=!1),q&&!_(H)&&(G=!1),G&&(Q[X++]=H),L(H,!0),H.right!==e.SENTINEL&&!E(H.right)){K+=H.delta,H=H.right;continue}}return L(x.root,!1),Q}function v(x,F,W,z,q,H,K){let U=x.root,Y=0,Q=0,X=0,G=0;const P=[];let te=0;for(;U!==e.SENTINEL;){if(E(U)){L(U.left,!1),L(U.right,!1),U===U.parent.right&&(Y-=U.parent.delta),U=U.parent;continue}if(!E(U.left)){if(Q=Y+U.maxEnd,Q<F){L(U,!0);continue}if(U.left!==e.SENTINEL){U=U.left;continue}}if(X=Y+U.start,X>W){L(U,!0);continue}if(G=Y+U.end,G>=F){U.setCachedOffsets(X,G,H);let se=!0;z&&U.ownerId&&U.ownerId!==z&&(se=!1),q&&y(U)&&(se=!1),K&&!_(U)&&(se=!1),se&&(P[te++]=U)}if(L(U,!0),U.right!==e.SENTINEL&&!E(U.right)){Y+=U.delta,U=U.right;continue}}return L(x.root,!1),P}function C(x,F){if(x.root===e.SENTINEL)return F.parent=e.SENTINEL,F.left=e.SENTINEL,F.right=e.SENTINEL,k(F,0),x.root=F,x.root;w(x,F),N(F.parent);let W=F;for(;W!==x.root&&c(W.parent)===1;)if(W.parent===W.parent.parent.left){const z=W.parent.parent.right;c(z)===1?(k(W.parent,0),k(z,0),k(W.parent.parent,1),W=W.parent.parent):(W===W.parent.right&&(W=W.parent,T(x,W)),k(W.parent,0),k(W.parent.parent,1),M(x,W.parent.parent))}else{const z=W.parent.parent.left;c(z)===1?(k(W.parent,0),k(z,0),k(W.parent.parent,1),W=W.parent.parent):(W===W.parent.left&&(W=W.parent,M(x,W)),k(W.parent,0),k(W.parent.parent,1),T(x,W.parent.parent))}return k(x.root,0),F}function w(x,F){let W=0,z=x.root;const q=F.start,H=F.end;for(;;)if(O(q,H,z.start+W,z.end+W)<0)if(z.left===e.SENTINEL){F.start-=W,F.end-=W,F.maxEnd-=W,z.left=F;break}else z=z.left;else if(z.right===e.SENTINEL){F.start-=W+z.delta,F.end-=W+z.delta,F.maxEnd-=W+z.delta,z.right=F;break}else W+=z.delta,z=z.right;F.parent=z,F.left=e.SENTINEL,F.right=e.SENTINEL,k(F,1)}function S(x,F){let W,z;if(F.left===e.SENTINEL?(W=F.right,z=F,W.delta+=F.delta,(W.delta<-1073741824||W.delta>1073741824)&&(x.requestNormalizeDelta=!0),W.start+=F.delta,W.end+=F.delta):F.right===e.SENTINEL?(W=F.left,z=F):(z=D(F.right),W=z.right,W.start+=z.delta,W.end+=z.delta,W.delta+=z.delta,(W.delta<-1073741824||W.delta>1073741824)&&(x.requestNormalizeDelta=!0),z.start+=F.delta,z.end+=F.delta,z.delta=F.delta,(z.delta<-1073741824||z.delta>1073741824)&&(x.requestNormalizeDelta=!0)),z===x.root){x.root=W,k(W,0),F.detach(),I(),R(W),x.root.parent=e.SENTINEL;return}const q=c(z)===1;if(z===z.parent.left?z.parent.left=W:z.parent.right=W,z===F?W.parent=z.parent:(z.parent===F?W.parent=z:W.parent=z.parent,z.left=F.left,z.right=F.right,z.parent=F.parent,k(z,c(F)),F===x.root?x.root=z:F===F.parent.left?F.parent.left=z:F.parent.right=z,z.left!==e.SENTINEL&&(z.left.parent=z),z.right!==e.SENTINEL&&(z.right.parent=z)),F.detach(),q){N(W.parent),z!==F&&(N(z),N(z.parent)),I();return}N(W),N(W.parent),z!==F&&(N(z),N(z.parent));let H;for(;W!==x.root&&c(W)===0;)W===W.parent.left?(H=W.parent.right,c(H)===1&&(k(H,0),k(W.parent,1),T(x,W.parent),H=W.parent.right),c(H.left)===0&&c(H.right)===0?(k(H,1),W=W.parent):(c(H.right)===0&&(k(H.left,0),k(H,1),M(x,H),H=W.parent.right),k(H,c(W.parent)),k(W.parent,0),k(H.right,0),T(x,W.parent),W=x.root)):(H=W.parent.left,c(H)===1&&(k(H,0),k(W.parent,1),M(x,W.parent),H=W.parent.left),c(H.left)===0&&c(H.right)===0?(k(H,1),W=W.parent):(c(H.left)===0&&(k(H.right,0),k(H,1),T(x,H),H=W.parent.left),k(H,c(W.parent)),k(W.parent,0),k(H.left,0),M(x,W.parent),W=x.root));k(W,0),I()}function D(x){for(;x.left!==e.SENTINEL;)x=x.left;return x}function I(){e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.delta=0,e.SENTINEL.start=0,e.SENTINEL.end=0}function T(x,F){const W=F.right;W.delta+=F.delta,(W.delta<-1073741824||W.delta>1073741824)&&(x.requestNormalizeDelta=!0),W.start+=F.delta,W.end+=F.delta,F.right=W.left,W.left!==e.SENTINEL&&(W.left.parent=F),W.parent=F.parent,F.parent===e.SENTINEL?x.root=W:F===F.parent.left?F.parent.left=W:F.parent.right=W,W.left=F,F.parent=W,R(F),R(W)}function M(x,F){const W=F.left;F.delta-=W.delta,(F.delta<-1073741824||F.delta>1073741824)&&(x.requestNormalizeDelta=!0),F.start-=W.delta,F.end-=W.delta,F.left=W.right,W.right!==e.SENTINEL&&(W.right.parent=F),W.parent=F.parent,F.parent===e.SENTINEL?x.root=W:F===F.parent.right?F.parent.right=W:F.parent.left=W,W.right=F,F.parent=W,R(F),R(W)}function A(x){let F=x.end;if(x.left!==e.SENTINEL){const W=x.left.maxEnd;W>F&&(F=W)}if(x.right!==e.SENTINEL){const W=x.right.maxEnd+x.delta;W>F&&(F=W)}return F}function R(x){x.maxEnd=A(x)}function N(x){for(;x!==e.SENTINEL;){const F=A(x);if(x.maxEnd===F)return;x.maxEnd=F,x=x.parent}}function O(x,F,W,z){return x===W?F-z:x-W}}),define(oe[593],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SENTINEL=e.TreeNode=void 0,e.leftest=k,e.righttest=E,e.leftRotate=_,e.rightRotate=b,e.rbDelete=p,e.fixInsert=n,e.updateTreeMetadata=s,e.recomputeTreeMetadata=t;class c{constructor(o,g){this.piece=o,this.color=g,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return k(this.right);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.left!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}prev(){if(this.left!==e.SENTINEL)return E(this.left);let o=this;for(;o.parent!==e.SENTINEL&&o.parent.right!==o;)o=o.parent;return o.parent===e.SENTINEL?e.SENTINEL:o.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=c,e.SENTINEL=new c(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function k(i){for(;i.left!==e.SENTINEL;)i=i.left;return i}function E(i){for(;i.right!==e.SENTINEL;)i=i.right;return i}function L(i){return i===e.SENTINEL?0:i.size_left+i.piece.length+L(i.right)}function y(i){return i===e.SENTINEL?0:i.lf_left+i.piece.lineFeedCnt+y(i.right)}function f(){e.SENTINEL.parent=e.SENTINEL}function _(i,o){const g=o.right;g.size_left+=o.size_left+(o.piece?o.piece.length:0),g.lf_left+=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),o.right=g.left,g.left!==e.SENTINEL&&(g.left.parent=o),g.parent=o.parent,o.parent===e.SENTINEL?i.root=g:o.parent.left===o?o.parent.left=g:o.parent.right=g,g.left=o,o.parent=g}function b(i,o){const g=o.left;o.left=g.right,g.right!==e.SENTINEL&&(g.right.parent=o),g.parent=o.parent,o.size_left-=g.size_left+(g.piece?g.piece.length:0),o.lf_left-=g.lf_left+(g.piece?g.piece.lineFeedCnt:0),o.parent===e.SENTINEL?i.root=g:o===o.parent.right?o.parent.right=g:o.parent.left=g,g.right=o,o.parent=g}function p(i,o){let g,u;if(o.left===e.SENTINEL?(u=o,g=u.right):o.right===e.SENTINEL?(u=o,g=u.left):(u=k(o.right),g=u.right),u===i.root){i.root=g,g.color=0,o.detach(),f(),i.root.parent=e.SENTINEL;return}const l=u.color===1;if(u===u.parent.left?u.parent.left=g:u.parent.right=g,u===o?(g.parent=u.parent,t(i,g)):(u.parent===o?g.parent=u:g.parent=u.parent,t(i,g),u.left=o.left,u.right=o.right,u.parent=o.parent,u.color=o.color,o===i.root?i.root=u:o===o.parent.left?o.parent.left=u:o.parent.right=u,u.left!==e.SENTINEL&&(u.left.parent=u),u.right!==e.SENTINEL&&(u.right.parent=u),u.size_left=o.size_left,u.lf_left=o.lf_left,t(i,u)),o.detach(),g.parent.left===g){const r=L(g),d=y(g);if(r!==g.parent.size_left||d!==g.parent.lf_left){const m=r-g.parent.size_left,h=d-g.parent.lf_left;g.parent.size_left=r,g.parent.lf_left=d,s(i,g.parent,m,h)}}if(t(i,g.parent),l){f();return}let a;for(;g!==i.root&&g.color===0;)g===g.parent.left?(a=g.parent.right,a.color===1&&(a.color=0,g.parent.color=1,_(i,g.parent),a=g.parent.right),a.left.color===0&&a.right.color===0?(a.color=1,g=g.parent):(a.right.color===0&&(a.left.color=0,a.color=1,b(i,a),a=g.parent.right),a.color=g.parent.color,g.parent.color=0,a.right.color=0,_(i,g.parent),g=i.root)):(a=g.parent.left,a.color===1&&(a.color=0,g.parent.color=1,b(i,g.parent),a=g.parent.left),a.left.color===0&&a.right.color===0?(a.color=1,g=g.parent):(a.left.color===0&&(a.right.color=0,a.color=1,_(i,a),a=g.parent.left),a.color=g.parent.color,g.parent.color=0,a.left.color=0,b(i,g.parent),g=i.root));g.color=0,f()}function n(i,o){for(t(i,o);o!==i.root&&o.parent.color===1;)if(o.parent===o.parent.parent.left){const g=o.parent.parent.right;g.color===1?(o.parent.color=0,g.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.right&&(o=o.parent,_(i,o)),o.parent.color=0,o.parent.parent.color=1,b(i,o.parent.parent))}else{const g=o.parent.parent.left;g.color===1?(o.parent.color=0,g.color=0,o.parent.parent.color=1,o=o.parent.parent):(o===o.parent.left&&(o=o.parent,b(i,o)),o.parent.color=0,o.parent.parent.color=1,_(i,o.parent.parent))}i.root.color=0}function s(i,o,g,u){for(;o!==i.root&&o!==e.SENTINEL;)o.parent.left===o&&(o.parent.size_left+=g,o.parent.lf_left+=u),o=o.parent}function t(i,o){let g=0,u=0;if(o!==i.root){for(;o!==i.root&&o===o.parent.right;)o=o.parent;if(o!==i.root)for(o=o.parent,g=L(o.left)-o.size_left,u=y(o.left)-o.lf_left,o.size_left+=g,o.lf_left+=u;o!==i.root&&(g!==0||u!==0);)o.parent.left===o&&(o.parent.size_left+=g,o.parent.lf_left+=u),o=o.parent}}}),define(oe[337],re([1,0,13,192]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PrefixSumIndexOfResult=e.ConstantTimePrefixSumComputer=e.PrefixSumComputer=void 0;class E{constructor(_){this.values=_,this.prefixSum=new Uint32Array(_.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(_,b){_=(0,k.toUint32)(_);const p=this.values,n=this.prefixSum,s=b.length;return s===0?!1:(this.values=new Uint32Array(p.length+s),this.values.set(p.subarray(0,_),0),this.values.set(p.subarray(_),_+s),this.values.set(b,_),_-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=_-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(_,b){return _=(0,k.toUint32)(_),b=(0,k.toUint32)(b),this.values[_]===b?!1:(this.values[_]=b,_-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=_-1),!0)}removeValues(_,b){_=(0,k.toUint32)(_),b=(0,k.toUint32)(b);const p=this.values,n=this.prefixSum;if(_>=p.length)return!1;const s=p.length-_;return b>=s&&(b=s),b===0?!1:(this.values=new Uint32Array(p.length-b),this.values.set(p.subarray(0,_),0),this.values.set(p.subarray(_+b),_),this.prefixSum=new Uint32Array(this.values.length),_-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=_-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(_){return _<0?0:(_=(0,k.toUint32)(_),this._getPrefixSum(_))}_getPrefixSum(_){if(_<=this.prefixSumValidIndex[0])return this.prefixSum[_];let b=this.prefixSumValidIndex[0]+1;b===0&&(this.prefixSum[0]=this.values[0],b++),_>=this.values.length&&(_=this.values.length-1);for(let p=b;p<=_;p++)this.prefixSum[p]=this.prefixSum[p-1]+this.values[p];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],_),this.prefixSum[_]}getIndexOf(_){_=Math.floor(_),this.getTotalSum();let b=0,p=this.values.length-1,n=0,s=0,t=0;for(;b<=p;)if(n=b+(p-b)/2|0,s=this.prefixSum[n],t=s-this.values[n],_<t)p=n-1;else if(_>=s)b=n+1;else break;return new y(n,_-t)}}e.PrefixSumComputer=E;class L{constructor(_){this._values=_,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(_){return this._ensureValid(),_===0?0:this._prefixSum[_-1]}getIndexOf(_){this._ensureValid();const b=this._indexBySum[_],p=b>0?this._prefixSum[b-1]:0;return new y(b,_-p)}removeValues(_,b){this._values.splice(_,b),this._invalidate(_)}insertValues(_,b){this._values=(0,c.arrayInsert)(this._values,_,b),this._invalidate(_)}_invalidate(_){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,_-1)}_ensureValid(){if(!this._isValid){for(let _=this._validEndIndex+1,b=this._values.length;_<b;_++){const p=this._values[_],n=_>0?this._prefixSum[_-1]:0;this._prefixSum[_]=n+p;for(let s=0;s<p;s++)this._indexBySum[n+s]=_}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(_,b){this._values[_]!==b&&(this._values[_]=b,this._invalidate(_))}}e.ConstantTimePrefixSumComputer=L;class y{constructor(_,b){this.index=_,this.remainder=b,this._prefixSumIndexOfResultBrand=void 0,this.index=_,this.remainder=b}}e.PrefixSumIndexOfResult=y}),define(oe[594],re([1,0,11,9,337]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MirrorTextModel=void 0;class L{constructor(f,_,b,p){this._uri=f,this._lines=_,this._eol=b,this._versionId=p,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(f){f.eol&&f.eol!==this._eol&&(this._eol=f.eol,this._lineStarts=null);const _=f.changes;for(const b of _)this._acceptDeleteRange(b.range),this._acceptInsertText(new k.Position(b.range.startLineNumber,b.range.startColumn),b.text);this._versionId=f.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const f=this._eol.length,_=this._lines.length,b=new Uint32Array(_);for(let p=0;p<_;p++)b[p]=this._lines[p].length+f;this._lineStarts=new E.PrefixSumComputer(b)}}_setLineText(f,_){this._lines[f]=_,this._lineStarts&&this._lineStarts.setValue(f,this._lines[f].length+this._eol.length)}_acceptDeleteRange(f){if(f.startLineNumber===f.endLineNumber){if(f.startColumn===f.endColumn)return;this._setLineText(f.startLineNumber-1,this._lines[f.startLineNumber-1].substring(0,f.startColumn-1)+this._lines[f.startLineNumber-1].substring(f.endColumn-1));return}this._setLineText(f.startLineNumber-1,this._lines[f.startLineNumber-1].substring(0,f.startColumn-1)+this._lines[f.endLineNumber-1].substring(f.endColumn-1)),this._lines.splice(f.startLineNumber,f.endLineNumber-f.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(f.startLineNumber,f.endLineNumber-f.startLineNumber)}_acceptInsertText(f,_){if(_.length===0)return;const b=(0,c.splitLines)(_);if(b.length===1){this._setLineText(f.lineNumber-1,this._lines[f.lineNumber-1].substring(0,f.column-1)+b[0]+this._lines[f.lineNumber-1].substring(f.column-1));return}b[b.length-1]+=this._lines[f.lineNumber-1].substring(f.column-1),this._setLineText(f.lineNumber-1,this._lines[f.lineNumber-1].substring(0,f.column-1)+b[0]);const p=new Uint32Array(b.length-1);for(let n=1;n<b.length;n++)this._lines.splice(f.lineNumber+n-1,0,b[n]),p[n-1]=b[n].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(f.lineNumber,p)}}e.MirrorTextModel=L}),define(oe[338],re([1,0,2]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextModelPart=void 0;class k extends c.Disposable{constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}e.TextModelPart=k}),define(oe[203],re([1,0,11,168,9,4,40]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Searcher=e.TextModelSearch=e.SearchParams=void 0,e.isMultilineRegexSource=b,e.createFindMatch=p,e.isValidMatch=o;const f=999;class _{constructor(l,a,r,d){this.searchString=l,this.isRegex=a,this.matchCase=r,this.wordSeparators=d}parseSearchRequest(){if(this.searchString==="")return null;let l;this.isRegex?l=b(this.searchString):l=this.searchString.indexOf(`
`)>=0;let a=null;try{a=c.createRegExp(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:l,global:!0,unicode:!0})}catch{return null}if(!a)return null;let r=!this.isRegex&&!l;return r&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(r=this.matchCase),new y.SearchData(a,this.wordSeparators?(0,k.getMapForWordSeparators)(this.wordSeparators,[]):null,r?this.searchString:null)}}e.SearchParams=_;function b(u){if(!u||u.length===0)return!1;for(let l=0,a=u.length;l<a;l++){const r=u.charCodeAt(l);if(r===10)return!0;if(r===92){if(l++,l>=a)break;const d=u.charCodeAt(l);if(d===110||d===114||d===87)return!0}}return!1}function p(u,l,a){if(!a)return new y.FindMatch(u,null);const r=[];for(let d=0,m=l.length;d<m;d++)r[d]=l[d];return new y.FindMatch(u,r)}class n{constructor(l){const a=[];let r=0;for(let d=0,m=l.length;d<m;d++)l.charCodeAt(d)===10&&(a[r++]=d);this._lineFeedsOffsets=a}findLineFeedCountBeforeOffset(l){const a=this._lineFeedsOffsets;let r=0,d=a.length-1;if(d===-1||l<=a[0])return 0;for(;r<d;){const m=r+((d-r)/2>>0);a[m]>=l?d=m-1:a[m+1]>=l?(r=m,d=m):r=m+1}return r+1}}class s{static findMatches(l,a,r,d,m){const h=a.parseSearchRequest();return h?h.regex.multiline?this._doFindMatchesMultiline(l,r,new g(h.wordSeparators,h.regex),d,m):this._doFindMatchesLineByLine(l,r,h,d,m):[]}static _getMultilineMatchRange(l,a,r,d,m,h){let v,C=0;d?(C=d.findLineFeedCountBeforeOffset(m),v=a+m+C):v=a+m;let w;if(d){const T=d.findLineFeedCountBeforeOffset(m+h.length)-C;w=v+h.length+T}else w=v+h.length;const S=l.getPositionAt(v),D=l.getPositionAt(w);return new L.Range(S.lineNumber,S.column,D.lineNumber,D.column)}static _doFindMatchesMultiline(l,a,r,d,m){const h=l.getOffsetAt(a.getStartPosition()),v=l.getValueInRange(a,1),C=l.getEOL()===`\r
`?new n(v):null,w=[];let S=0,D;for(r.reset(0);D=r.next(v);)if(w[S++]=p(this._getMultilineMatchRange(l,h,v,C,D.index,D[0]),D,d),S>=m)return w;return w}static _doFindMatchesLineByLine(l,a,r,d,m){const h=[];let v=0;if(a.startLineNumber===a.endLineNumber){const w=l.getLineContent(a.startLineNumber).substring(a.startColumn-1,a.endColumn-1);return v=this._findMatchesInLine(r,w,a.startLineNumber,a.startColumn-1,v,h,d,m),h}const C=l.getLineContent(a.startLineNumber).substring(a.startColumn-1);v=this._findMatchesInLine(r,C,a.startLineNumber,a.startColumn-1,v,h,d,m);for(let w=a.startLineNumber+1;w<a.endLineNumber&&v<m;w++)v=this._findMatchesInLine(r,l.getLineContent(w),w,0,v,h,d,m);if(v<m){const w=l.getLineContent(a.endLineNumber).substring(0,a.endColumn-1);v=this._findMatchesInLine(r,w,a.endLineNumber,0,v,h,d,m)}return h}static _findMatchesInLine(l,a,r,d,m,h,v,C){const w=l.wordSeparators;if(!v&&l.simpleSearch){const I=l.simpleSearch,T=I.length,M=a.length;let A=-T;for(;(A=a.indexOf(I,A+T))!==-1;)if((!w||o(w,a,M,A,T))&&(h[m++]=new y.FindMatch(new L.Range(r,A+1+d,r,A+1+T+d),null),m>=C))return m;return m}const S=new g(l.wordSeparators,l.regex);let D;S.reset(0);do if(D=S.next(a),D&&(h[m++]=p(new L.Range(r,D.index+1+d,r,D.index+1+D[0].length+d),D,v),m>=C))return m;while(D);return m}static findNextMatch(l,a,r,d){const m=a.parseSearchRequest();if(!m)return null;const h=new g(m.wordSeparators,m.regex);return m.regex.multiline?this._doFindNextMatchMultiline(l,r,h,d):this._doFindNextMatchLineByLine(l,r,h,d)}static _doFindNextMatchMultiline(l,a,r,d){const m=new E.Position(a.lineNumber,1),h=l.getOffsetAt(m),v=l.getLineCount(),C=l.getValueInRange(new L.Range(m.lineNumber,m.column,v,l.getLineMaxColumn(v)),1),w=l.getEOL()===`\r
`?new n(C):null;r.reset(a.column-1);const S=r.next(C);return S?p(this._getMultilineMatchRange(l,h,C,w,S.index,S[0]),S,d):a.lineNumber!==1||a.column!==1?this._doFindNextMatchMultiline(l,new E.Position(1,1),r,d):null}static _doFindNextMatchLineByLine(l,a,r,d){const m=l.getLineCount(),h=a.lineNumber,v=l.getLineContent(h),C=this._findFirstMatchInLine(r,v,h,a.column,d);if(C)return C;for(let w=1;w<=m;w++){const S=(h+w-1)%m,D=l.getLineContent(S+1),I=this._findFirstMatchInLine(r,D,S+1,1,d);if(I)return I}return null}static _findFirstMatchInLine(l,a,r,d,m){l.reset(d-1);const h=l.next(a);return h?p(new L.Range(r,h.index+1,r,h.index+1+h[0].length),h,m):null}static findPreviousMatch(l,a,r,d){const m=a.parseSearchRequest();if(!m)return null;const h=new g(m.wordSeparators,m.regex);return m.regex.multiline?this._doFindPreviousMatchMultiline(l,r,h,d):this._doFindPreviousMatchLineByLine(l,r,h,d)}static _doFindPreviousMatchMultiline(l,a,r,d){const m=this._doFindMatchesMultiline(l,new L.Range(1,1,a.lineNumber,a.column),r,d,10*f);if(m.length>0)return m[m.length-1];const h=l.getLineCount();return a.lineNumber!==h||a.column!==l.getLineMaxColumn(h)?this._doFindPreviousMatchMultiline(l,new E.Position(h,l.getLineMaxColumn(h)),r,d):null}static _doFindPreviousMatchLineByLine(l,a,r,d){const m=l.getLineCount(),h=a.lineNumber,v=l.getLineContent(h).substring(0,a.column-1),C=this._findLastMatchInLine(r,v,h,d);if(C)return C;for(let w=1;w<=m;w++){const S=(m+h-w-1)%m,D=l.getLineContent(S+1),I=this._findLastMatchInLine(r,D,S+1,d);if(I)return I}return null}static _findLastMatchInLine(l,a,r,d){let m=null,h;for(l.reset(0);h=l.next(a);)m=p(new L.Range(r,h.index+1,r,h.index+1+h[0].length),h,d);return m}}e.TextModelSearch=s;function t(u,l,a,r,d){if(r===0)return!0;const m=l.charCodeAt(r-1);if(u.get(m)!==0||m===13||m===10)return!0;if(d>0){const h=l.charCodeAt(r);if(u.get(h)!==0)return!0}return!1}function i(u,l,a,r,d){if(r+d===a)return!0;const m=l.charCodeAt(r+d);if(u.get(m)!==0||m===13||m===10)return!0;if(d>0){const h=l.charCodeAt(r+d-1);if(u.get(h)!==0)return!0}return!1}function o(u,l,a,r,d){return t(u,l,a,r,d)&&i(u,l,a,r,d)}class g{constructor(l,a){this._wordSeparators=l,this._searchRegex=a,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(l){this._searchRegex.lastIndex=l,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(l){const a=l.length;let r;do{if(this._prevMatchStartIndex+this._prevMatchLength===a||(r=this._searchRegex.exec(l),!r))return null;const d=r.index,m=r[0].length;if(d===this._prevMatchStartIndex&&m===this._prevMatchLength){if(m===0){c.getNextCodePoint(l,a,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=d,this._prevMatchLength=m,!this._wordSeparators||o(this._wordSeparators,l,a,d,m))return r}while(r);return null}}e.Searcher=g}),define(oe[339],re([1,0,9,4,40,593,203]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=void 0,e.createLineStartsFast=p,e.createLineStarts=n;const f=65535;function _(u){let l;return u[u.length-1]<65536?l=new Uint16Array(u.length):l=new Uint32Array(u.length),l.set(u,0),l}class b{constructor(l,a,r,d,m){this.lineStarts=l,this.cr=a,this.lf=r,this.crlf=d,this.isBasicASCII=m}}function p(u,l=!0){const a=[0];let r=1;for(let d=0,m=u.length;d<m;d++){const h=u.charCodeAt(d);h===13?d+1<m&&u.charCodeAt(d+1)===10?(a[r++]=d+2,d++):a[r++]=d+1:h===10&&(a[r++]=d+1)}return l?_(a):a}function n(u,l){u.length=0,u[0]=0;let a=1,r=0,d=0,m=0,h=!0;for(let C=0,w=l.length;C<w;C++){const S=l.charCodeAt(C);S===13?C+1<w&&l.charCodeAt(C+1)===10?(m++,u[a++]=C+2,C++):(r++,u[a++]=C+1):S===10?(d++,u[a++]=C+1):h&&S!==9&&(S<32||S>126)&&(h=!1)}const v=new b(_(u),r,d,m,h);return u.length=0,v}class s{constructor(l,a,r,d,m){this.bufferIndex=l,this.start=a,this.end=r,this.lineFeedCnt=d,this.length=m}}e.Piece=s;class t{constructor(l,a){this.buffer=l,this.lineStarts=a}}e.StringBuffer=t;class i{constructor(l,a){this._pieces=[],this._tree=l,this._BOM=a,this._index=0,l.root!==L.SENTINEL&&l.iterate(l.root,r=>(r!==L.SENTINEL&&this._pieces.push(r.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class o{constructor(l){this._limit=l,this._cache=[]}get(l){for(let a=this._cache.length-1;a>=0;a--){const r=this._cache[a];if(r.nodeStartOffset<=l&&r.nodeStartOffset+r.node.piece.length>=l)return r}return null}get2(l){for(let a=this._cache.length-1;a>=0;a--){const r=this._cache[a];if(r.nodeStartLineNumber&&r.nodeStartLineNumber<l&&r.nodeStartLineNumber+r.node.piece.lineFeedCnt>=l)return r}return null}set(l){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(l)}validate(l){let a=!1;const r=this._cache;for(let d=0;d<r.length;d++){const m=r[d];if(m.node.parent===null||m.nodeStartOffset>=l){r[d]=null,a=!0;continue}}if(a){const d=[];for(const m of r)m!==null&&d.push(m);this._cache=d}}}class g{constructor(l,a,r){this.create(l,a,r)}create(l,a,r){this._buffers=[new t("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=L.SENTINEL,this._lineCnt=1,this._length=0,this._EOL=a,this._EOLLength=a.length,this._EOLNormalized=r;let d=null;for(let m=0,h=l.length;m<h;m++)if(l[m].buffer.length>0){l[m].lineStarts||(l[m].lineStarts=p(l[m].buffer));const v=new s(m+1,{line:0,column:0},{line:l[m].lineStarts.length-1,column:l[m].buffer.length-l[m].lineStarts[l[m].lineStarts.length-1]},l[m].lineStarts.length-1,l[m].buffer.length);this._buffers.push(l[m]),d=this.rbInsertRight(d,v)}this._searchCache=new o(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(l){const a=f,r=a-Math.floor(a/3),d=r*2;let m="",h=0;const v=[];if(this.iterate(this.root,C=>{const w=this.getNodeContent(C),S=w.length;if(h<=r||h+S<d)return m+=w,h+=S,!0;const D=m.replace(/\r\n|\r|\n/g,l);return v.push(new t(D,p(D))),m=w,h=S,!0}),h>0){const C=m.replace(/\r\n|\r|\n/g,l);v.push(new t(C,p(C)))}this.create(v,l,!0)}getEOL(){return this._EOL}setEOL(l){this._EOL=l,this._EOLLength=this._EOL.length,this.normalizeEOL(l)}createSnapshot(l){return new i(this,l)}getOffsetAt(l,a){let r=0,d=this.root;for(;d!==L.SENTINEL;)if(d.left!==L.SENTINEL&&d.lf_left+1>=l)d=d.left;else if(d.lf_left+d.piece.lineFeedCnt+1>=l){r+=d.size_left;const m=this.getAccumulatedValue(d,l-d.lf_left-2);return r+=m+a-1}else l-=d.lf_left+d.piece.lineFeedCnt,r+=d.size_left+d.piece.length,d=d.right;return r}getPositionAt(l){l=Math.floor(l),l=Math.max(0,l);let a=this.root,r=0;const d=l;for(;a!==L.SENTINEL;)if(a.size_left!==0&&a.size_left>=l)a=a.left;else if(a.size_left+a.piece.length>=l){const m=this.getIndexOf(a,l-a.size_left);if(r+=a.lf_left+m.index,m.index===0){const h=this.getOffsetAt(r+1,1),v=d-h;return new c.Position(r+1,v+1)}return new c.Position(r+1,m.remainder+1)}else if(l-=a.size_left+a.piece.length,r+=a.lf_left+a.piece.lineFeedCnt,a.right===L.SENTINEL){const m=this.getOffsetAt(r+1,1),h=d-l-m;return new c.Position(r+1,h+1)}else a=a.right;return new c.Position(1,1)}getValueInRange(l,a){if(l.startLineNumber===l.endLineNumber&&l.startColumn===l.endColumn)return"";const r=this.nodeAt2(l.startLineNumber,l.startColumn),d=this.nodeAt2(l.endLineNumber,l.endColumn),m=this.getValueInRange2(r,d);return a?a!==this._EOL||!this._EOLNormalized?m.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this._EOLNormalized?m:m.replace(/\r\n|\r|\n/g,a):m}getValueInRange2(l,a){if(l.node===a.node){const v=l.node,C=this._buffers[v.piece.bufferIndex].buffer,w=this.offsetInBuffer(v.piece.bufferIndex,v.piece.start);return C.substring(w+l.remainder,w+a.remainder)}let r=l.node;const d=this._buffers[r.piece.bufferIndex].buffer,m=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);let h=d.substring(m+l.remainder,m+r.piece.length);for(r=r.next();r!==L.SENTINEL;){const v=this._buffers[r.piece.bufferIndex].buffer,C=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);if(r===a.node){h+=v.substring(C,C+a.remainder);break}else h+=v.substr(C,r.piece.length);r=r.next()}return h}getLinesContent(){const l=[];let a=0,r="",d=!1;return this.iterate(this.root,m=>{if(m===L.SENTINEL)return!0;const h=m.piece;let v=h.length;if(v===0)return!0;const C=this._buffers[h.bufferIndex].buffer,w=this._buffers[h.bufferIndex].lineStarts,S=h.start.line,D=h.end.line;let I=w[S]+h.start.column;if(d&&(C.charCodeAt(I)===10&&(I++,v--),l[a++]=r,r="",d=!1,v===0))return!0;if(S===D)return!this._EOLNormalized&&C.charCodeAt(I+v-1)===13?(d=!0,r+=C.substr(I,v-1)):r+=C.substr(I,v),!0;r+=this._EOLNormalized?C.substring(I,Math.max(I,w[S+1]-this._EOLLength)):C.substring(I,w[S+1]).replace(/(\r\n|\r|\n)$/,""),l[a++]=r;for(let T=S+1;T<D;T++)r=this._EOLNormalized?C.substring(w[T],w[T+1]-this._EOLLength):C.substring(w[T],w[T+1]).replace(/(\r\n|\r|\n)$/,""),l[a++]=r;return!this._EOLNormalized&&C.charCodeAt(w[D]+h.end.column-1)===13?(d=!0,h.end.column===0?a--:r=C.substr(w[D],h.end.column-1)):r=C.substr(w[D],h.end.column),!0}),d&&(l[a++]=r,r=""),l[a++]=r,l}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(l){return this._lastVisitedLine.lineNumber===l?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=l,l===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(l):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(l,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(l).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(l){if(l.remainder===l.node.piece.length){const a=l.node.next();if(!a)return 0;const r=this._buffers[a.piece.bufferIndex],d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return r.buffer.charCodeAt(d)}else{const a=this._buffers[l.node.piece.bufferIndex],d=this.offsetInBuffer(l.node.piece.bufferIndex,l.node.piece.start)+l.remainder;return a.buffer.charCodeAt(d)}}getLineCharCode(l,a){const r=this.nodeAt2(l,a+1);return this._getCharCode(r)}getLineLength(l){if(l===this.getLineCount()){const a=this.getOffsetAt(l,1);return this.getLength()-a}return this.getOffsetAt(l+1,1)-this.getOffsetAt(l,1)-this._EOLLength}findMatchesInNode(l,a,r,d,m,h,v,C,w,S,D){const I=this._buffers[l.piece.bufferIndex],T=this.offsetInBuffer(l.piece.bufferIndex,l.piece.start),M=this.offsetInBuffer(l.piece.bufferIndex,m),A=this.offsetInBuffer(l.piece.bufferIndex,h);let R;const N={line:0,column:0};let O,x;a._wordSeparators?(O=I.buffer.substring(M,A),x=F=>F+M,a.reset(0)):(O=I.buffer,x=F=>F,a.reset(M));do if(R=a.next(O),R){if(x(R.index)>=A)return S;this.positionInBuffer(l,x(R.index)-T,N);const F=this.getLineFeedCnt(l.piece.bufferIndex,m,N),W=N.line===m.line?N.column-m.column+d:N.column+1,z=W+R[0].length;if(D[S++]=(0,y.createFindMatch)(new k.Range(r+F,W,r+F,z),R,C),x(R.index)+R[0].length>=A||S>=w)return S}while(R);return S}findMatchesLineByLine(l,a,r,d){const m=[];let h=0;const v=new y.Searcher(a.wordSeparators,a.regex);let C=this.nodeAt2(l.startLineNumber,l.startColumn);if(C===null)return[];const w=this.nodeAt2(l.endLineNumber,l.endColumn);if(w===null)return[];let S=this.positionInBuffer(C.node,C.remainder);const D=this.positionInBuffer(w.node,w.remainder);if(C.node===w.node)return this.findMatchesInNode(C.node,v,l.startLineNumber,l.startColumn,S,D,a,r,d,h,m),m;let I=l.startLineNumber,T=C.node;for(;T!==w.node;){const A=this.getLineFeedCnt(T.piece.bufferIndex,S,T.piece.end);if(A>=1){const N=this._buffers[T.piece.bufferIndex].lineStarts,O=this.offsetInBuffer(T.piece.bufferIndex,T.piece.start),x=N[S.line+A],F=I===l.startLineNumber?l.startColumn:1;if(h=this.findMatchesInNode(T,v,I,F,S,this.positionInBuffer(T,x-O),a,r,d,h,m),h>=d)return m;I+=A}const R=I===l.startLineNumber?l.startColumn-1:0;if(I===l.endLineNumber){const N=this.getLineContent(I).substring(R,l.endColumn-1);return h=this._findMatchesInLine(a,v,N,l.endLineNumber,R,h,m,r,d),m}if(h=this._findMatchesInLine(a,v,this.getLineContent(I).substr(R),I,R,h,m,r,d),h>=d)return m;I++,C=this.nodeAt2(I,1),T=C.node,S=this.positionInBuffer(C.node,C.remainder)}if(I===l.endLineNumber){const A=I===l.startLineNumber?l.startColumn-1:0,R=this.getLineContent(I).substring(A,l.endColumn-1);return h=this._findMatchesInLine(a,v,R,l.endLineNumber,A,h,m,r,d),m}const M=I===l.startLineNumber?l.startColumn:1;return h=this.findMatchesInNode(w.node,v,I,M,S,D,a,r,d,h,m),m}_findMatchesInLine(l,a,r,d,m,h,v,C,w){const S=l.wordSeparators;if(!C&&l.simpleSearch){const I=l.simpleSearch,T=I.length,M=r.length;let A=-T;for(;(A=r.indexOf(I,A+T))!==-1;)if((!S||(0,y.isValidMatch)(S,r,M,A,T))&&(v[h++]=new E.FindMatch(new k.Range(d,A+1+m,d,A+1+T+m),null),h>=w))return h;return h}let D;a.reset(0);do if(D=a.next(r),D&&(v[h++]=(0,y.createFindMatch)(new k.Range(d,D.index+1+m,d,D.index+1+D[0].length+m),D,C),h>=w))return h;while(D);return h}insert(l,a,r=!1){if(this._EOLNormalized=this._EOLNormalized&&r,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==L.SENTINEL){const{node:d,remainder:m,nodeStartOffset:h}=this.nodeAt(l),v=d.piece,C=v.bufferIndex,w=this.positionInBuffer(d,m);if(d.piece.bufferIndex===0&&v.end.line===this._lastChangeBufferPos.line&&v.end.column===this._lastChangeBufferPos.column&&h+v.length===l&&a.length<f){this.appendToNode(d,a),this.computeBufferMetadata();return}if(h===l)this.insertContentToNodeLeft(a,d),this._searchCache.validate(l);else if(h+d.piece.length>l){const S=[];let D=new s(v.bufferIndex,w,v.end,this.getLineFeedCnt(v.bufferIndex,w,v.end),this.offsetInBuffer(C,v.end)-this.offsetInBuffer(C,w));if(this.shouldCheckCRLF()&&this.endWithCR(a)&&this.nodeCharCodeAt(d,m)===10){const A={line:D.start.line+1,column:0};D=new s(D.bufferIndex,A,D.end,this.getLineFeedCnt(D.bufferIndex,A,D.end),D.length-1),a+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(a))if(this.nodeCharCodeAt(d,m-1)===13){const A=this.positionInBuffer(d,m-1);this.deleteNodeTail(d,A),a="\r"+a,d.piece.length===0&&S.push(d)}else this.deleteNodeTail(d,w);else this.deleteNodeTail(d,w);const I=this.createNewPieces(a);D.length>0&&this.rbInsertRight(d,D);let T=d;for(let M=0;M<I.length;M++)T=this.rbInsertRight(T,I[M]);this.deleteNodes(S)}else this.insertContentToNodeRight(a,d)}else{const d=this.createNewPieces(a);let m=this.rbInsertLeft(null,d[0]);for(let h=1;h<d.length;h++)m=this.rbInsertRight(m,d[h])}this.computeBufferMetadata()}delete(l,a){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",a<=0||this.root===L.SENTINEL)return;const r=this.nodeAt(l),d=this.nodeAt(l+a),m=r.node,h=d.node;if(m===h){const I=this.positionInBuffer(m,r.remainder),T=this.positionInBuffer(m,d.remainder);if(r.nodeStartOffset===l){if(a===m.piece.length){const M=m.next();(0,L.rbDelete)(this,m),this.validateCRLFWithPrevNode(M),this.computeBufferMetadata();return}this.deleteNodeHead(m,T),this._searchCache.validate(l),this.validateCRLFWithPrevNode(m),this.computeBufferMetadata();return}if(r.nodeStartOffset+m.piece.length===l+a){this.deleteNodeTail(m,I),this.validateCRLFWithNextNode(m),this.computeBufferMetadata();return}this.shrinkNode(m,I,T),this.computeBufferMetadata();return}const v=[],C=this.positionInBuffer(m,r.remainder);this.deleteNodeTail(m,C),this._searchCache.validate(l),m.piece.length===0&&v.push(m);const w=this.positionInBuffer(h,d.remainder);this.deleteNodeHead(h,w),h.piece.length===0&&v.push(h);const S=m.next();for(let I=S;I!==L.SENTINEL&&I!==h;I=I.next())v.push(I);const D=m.piece.length===0?m.prev():m;this.deleteNodes(v),this.validateCRLFWithNextNode(D),this.computeBufferMetadata()}insertContentToNodeLeft(l,a){const r=[];if(this.shouldCheckCRLF()&&this.endWithCR(l)&&this.startWithLF(a)){const h=a.piece,v={line:h.start.line+1,column:0},C=new s(h.bufferIndex,v,h.end,this.getLineFeedCnt(h.bufferIndex,v,h.end),h.length-1);a.piece=C,l+=`
`,(0,L.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&r.push(a)}const d=this.createNewPieces(l);let m=this.rbInsertLeft(a,d[d.length-1]);for(let h=d.length-2;h>=0;h--)m=this.rbInsertLeft(m,d[h]);this.validateCRLFWithPrevNode(m),this.deleteNodes(r)}insertContentToNodeRight(l,a){this.adjustCarriageReturnFromNext(l,a)&&(l+=`
`);const r=this.createNewPieces(l),d=this.rbInsertRight(a,r[0]);let m=d;for(let h=1;h<r.length;h++)m=this.rbInsertRight(m,r[h]);this.validateCRLFWithPrevNode(d)}positionInBuffer(l,a,r){const d=l.piece,m=l.piece.bufferIndex,h=this._buffers[m].lineStarts,C=h[d.start.line]+d.start.column+a;let w=d.start.line,S=d.end.line,D=0,I=0,T=0;for(;w<=S&&(D=w+(S-w)/2|0,T=h[D],D!==S);)if(I=h[D+1],C<T)S=D-1;else if(C>=I)w=D+1;else break;return r?(r.line=D,r.column=C-T,null):{line:D,column:C-T}}getLineFeedCnt(l,a,r){if(r.column===0)return r.line-a.line;const d=this._buffers[l].lineStarts;if(r.line===d.length-1)return r.line-a.line;const m=d[r.line+1],h=d[r.line]+r.column;if(m>h+1)return r.line-a.line;const v=h-1;return this._buffers[l].buffer.charCodeAt(v)===13?r.line-a.line+1:r.line-a.line}offsetInBuffer(l,a){return this._buffers[l].lineStarts[a.line]+a.column}deleteNodes(l){for(let a=0;a<l.length;a++)(0,L.rbDelete)(this,l[a])}createNewPieces(l){if(l.length>f){const S=[];for(;l.length>f;){const I=l.charCodeAt(f-1);let T;I===13||I>=55296&&I<=56319?(T=l.substring(0,f-1),l=l.substring(f-1)):(T=l.substring(0,f),l=l.substring(f));const M=p(T);S.push(new s(this._buffers.length,{line:0,column:0},{line:M.length-1,column:T.length-M[M.length-1]},M.length-1,T.length)),this._buffers.push(new t(T,M))}const D=p(l);return S.push(new s(this._buffers.length,{line:0,column:0},{line:D.length-1,column:l.length-D[D.length-1]},D.length-1,l.length)),this._buffers.push(new t(l,D)),S}let a=this._buffers[0].buffer.length;const r=p(l,!1);let d=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===a&&a!==0&&this.startWithLF(l)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},d=this._lastChangeBufferPos;for(let S=0;S<r.length;S++)r[S]+=a+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+="_"+l,a+=1}else{if(a!==0)for(let S=0;S<r.length;S++)r[S]+=a;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1)),this._buffers[0].buffer+=l}const m=this._buffers[0].buffer.length,h=this._buffers[0].lineStarts.length-1,v=m-this._buffers[0].lineStarts[h],C={line:h,column:v},w=new s(0,d,C,this.getLineFeedCnt(0,d,C),m-a);return this._lastChangeBufferPos=C,[w]}getLineRawContent(l,a=0){let r=this.root,d="";const m=this._searchCache.get2(l);if(m){r=m.node;const h=this.getAccumulatedValue(r,l-m.nodeStartLineNumber-1),v=this._buffers[r.piece.bufferIndex].buffer,C=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);if(m.nodeStartLineNumber+r.piece.lineFeedCnt===l)d=v.substring(C+h,C+r.piece.length);else{const w=this.getAccumulatedValue(r,l-m.nodeStartLineNumber);return v.substring(C+h,C+w-a)}}else{let h=0;const v=l;for(;r!==L.SENTINEL;)if(r.left!==L.SENTINEL&&r.lf_left>=l-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>l-1){const C=this.getAccumulatedValue(r,l-r.lf_left-2),w=this.getAccumulatedValue(r,l-r.lf_left-1),S=this._buffers[r.piece.bufferIndex].buffer,D=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return h+=r.size_left,this._searchCache.set({node:r,nodeStartOffset:h,nodeStartLineNumber:v-(l-1-r.lf_left)}),S.substring(D+C,D+w-a)}else if(r.lf_left+r.piece.lineFeedCnt===l-1){const C=this.getAccumulatedValue(r,l-r.lf_left-2),w=this._buffers[r.piece.bufferIndex].buffer,S=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);d=w.substring(S+C,S+r.piece.length);break}else l-=r.lf_left+r.piece.lineFeedCnt,h+=r.size_left+r.piece.length,r=r.right}for(r=r.next();r!==L.SENTINEL;){const h=this._buffers[r.piece.bufferIndex].buffer;if(r.piece.lineFeedCnt>0){const v=this.getAccumulatedValue(r,0),C=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);return d+=h.substring(C,C+v-a),d}else{const v=this.offsetInBuffer(r.piece.bufferIndex,r.piece.start);d+=h.substr(v,r.piece.length)}r=r.next()}return d}computeBufferMetadata(){let l=this.root,a=1,r=0;for(;l!==L.SENTINEL;)a+=l.lf_left+l.piece.lineFeedCnt,r+=l.size_left+l.piece.length,l=l.right;this._lineCnt=a,this._length=r,this._searchCache.validate(this._length)}getIndexOf(l,a){const r=l.piece,d=this.positionInBuffer(l,a),m=d.line-r.start.line;if(this.offsetInBuffer(r.bufferIndex,r.end)-this.offsetInBuffer(r.bufferIndex,r.start)===a){const h=this.getLineFeedCnt(l.piece.bufferIndex,r.start,d);if(h!==m)return{index:h,remainder:0}}return{index:m,remainder:d.column}}getAccumulatedValue(l,a){if(a<0)return 0;const r=l.piece,d=this._buffers[r.bufferIndex].lineStarts,m=r.start.line+a+1;return m>r.end.line?d[r.end.line]+r.end.column-d[r.start.line]-r.start.column:d[m]-d[r.start.line]-r.start.column}deleteNodeTail(l,a){const r=l.piece,d=r.lineFeedCnt,m=this.offsetInBuffer(r.bufferIndex,r.end),h=a,v=this.offsetInBuffer(r.bufferIndex,h),C=this.getLineFeedCnt(r.bufferIndex,r.start,h),w=C-d,S=v-m,D=r.length+S;l.piece=new s(r.bufferIndex,r.start,h,C,D),(0,L.updateTreeMetadata)(this,l,S,w)}deleteNodeHead(l,a){const r=l.piece,d=r.lineFeedCnt,m=this.offsetInBuffer(r.bufferIndex,r.start),h=a,v=this.getLineFeedCnt(r.bufferIndex,h,r.end),C=this.offsetInBuffer(r.bufferIndex,h),w=v-d,S=m-C,D=r.length+S;l.piece=new s(r.bufferIndex,h,r.end,v,D),(0,L.updateTreeMetadata)(this,l,S,w)}shrinkNode(l,a,r){const d=l.piece,m=d.start,h=d.end,v=d.length,C=d.lineFeedCnt,w=a,S=this.getLineFeedCnt(d.bufferIndex,d.start,w),D=this.offsetInBuffer(d.bufferIndex,a)-this.offsetInBuffer(d.bufferIndex,m);l.piece=new s(d.bufferIndex,d.start,w,S,D),(0,L.updateTreeMetadata)(this,l,D-v,S-C);const I=new s(d.bufferIndex,r,h,this.getLineFeedCnt(d.bufferIndex,r,h),this.offsetInBuffer(d.bufferIndex,h)-this.offsetInBuffer(d.bufferIndex,r)),T=this.rbInsertRight(l,I);this.validateCRLFWithPrevNode(T)}appendToNode(l,a){this.adjustCarriageReturnFromNext(a,l)&&(a+=`
`);const r=this.shouldCheckCRLF()&&this.startWithLF(a)&&this.endWithCR(l),d=this._buffers[0].buffer.length;this._buffers[0].buffer+=a;const m=p(a,!1);for(let T=0;T<m.length;T++)m[T]+=d;if(r){const T=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:d-T}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(m.slice(1));const h=this._buffers[0].lineStarts.length-1,v=this._buffers[0].buffer.length-this._buffers[0].lineStarts[h],C={line:h,column:v},w=l.piece.length+a.length,S=l.piece.lineFeedCnt,D=this.getLineFeedCnt(0,l.piece.start,C),I=D-S;l.piece=new s(l.piece.bufferIndex,l.piece.start,C,D,w),this._lastChangeBufferPos=C,(0,L.updateTreeMetadata)(this,l,a.length,I)}nodeAt(l){let a=this.root;const r=this._searchCache.get(l);if(r)return{node:r.node,nodeStartOffset:r.nodeStartOffset,remainder:l-r.nodeStartOffset};let d=0;for(;a!==L.SENTINEL;)if(a.size_left>l)a=a.left;else if(a.size_left+a.piece.length>=l){d+=a.size_left;const m={node:a,remainder:l-a.size_left,nodeStartOffset:d};return this._searchCache.set(m),m}else l-=a.size_left+a.piece.length,d+=a.size_left+a.piece.length,a=a.right;return null}nodeAt2(l,a){let r=this.root,d=0;for(;r!==L.SENTINEL;)if(r.left!==L.SENTINEL&&r.lf_left>=l-1)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt>l-1){const m=this.getAccumulatedValue(r,l-r.lf_left-2),h=this.getAccumulatedValue(r,l-r.lf_left-1);return d+=r.size_left,{node:r,remainder:Math.min(m+a-1,h),nodeStartOffset:d}}else if(r.lf_left+r.piece.lineFeedCnt===l-1){const m=this.getAccumulatedValue(r,l-r.lf_left-2);if(m+a-1<=r.piece.length)return{node:r,remainder:m+a-1,nodeStartOffset:d};a-=r.piece.length-m;break}else l-=r.lf_left+r.piece.lineFeedCnt,d+=r.size_left+r.piece.length,r=r.right;for(r=r.next();r!==L.SENTINEL;){if(r.piece.lineFeedCnt>0){const m=this.getAccumulatedValue(r,0),h=this.offsetOfNode(r);return{node:r,remainder:Math.min(a-1,m),nodeStartOffset:h}}else if(r.piece.length>=a-1){const m=this.offsetOfNode(r);return{node:r,remainder:a-1,nodeStartOffset:m}}else a-=r.piece.length;r=r.next()}return null}nodeCharCodeAt(l,a){if(l.piece.lineFeedCnt<1)return-1;const r=this._buffers[l.piece.bufferIndex],d=this.offsetInBuffer(l.piece.bufferIndex,l.piece.start)+a;return r.buffer.charCodeAt(d)}offsetOfNode(l){if(!l)return 0;let a=l.size_left;for(;l!==this.root;)l.parent.right===l&&(a+=l.parent.size_left+l.parent.piece.length),l=l.parent;return a}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(l){if(typeof l=="string")return l.charCodeAt(0)===10;if(l===L.SENTINEL||l.piece.lineFeedCnt===0)return!1;const a=l.piece,r=this._buffers[a.bufferIndex].lineStarts,d=a.start.line,m=r[d]+a.start.column;return d===r.length-1||r[d+1]>m+1?!1:this._buffers[a.bufferIndex].buffer.charCodeAt(m)===10}endWithCR(l){return typeof l=="string"?l.charCodeAt(l.length-1)===13:l===L.SENTINEL||l.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(l,l.piece.length-1)===13}validateCRLFWithPrevNode(l){if(this.shouldCheckCRLF()&&this.startWithLF(l)){const a=l.prev();this.endWithCR(a)&&this.fixCRLF(a,l)}}validateCRLFWithNextNode(l){if(this.shouldCheckCRLF()&&this.endWithCR(l)){const a=l.next();this.startWithLF(a)&&this.fixCRLF(l,a)}}fixCRLF(l,a){const r=[],d=this._buffers[l.piece.bufferIndex].lineStarts;let m;l.piece.end.column===0?m={line:l.piece.end.line-1,column:d[l.piece.end.line]-d[l.piece.end.line-1]-1}:m={line:l.piece.end.line,column:l.piece.end.column-1};const h=l.piece.length-1,v=l.piece.lineFeedCnt-1;l.piece=new s(l.piece.bufferIndex,l.piece.start,m,v,h),(0,L.updateTreeMetadata)(this,l,-1,-1),l.piece.length===0&&r.push(l);const C={line:a.piece.start.line+1,column:0},w=a.piece.length-1,S=this.getLineFeedCnt(a.piece.bufferIndex,C,a.piece.end);a.piece=new s(a.piece.bufferIndex,C,a.piece.end,S,w),(0,L.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&r.push(a);const D=this.createNewPieces(`\r
`);this.rbInsertRight(l,D[0]);for(let I=0;I<r.length;I++)(0,L.rbDelete)(this,r[I])}adjustCarriageReturnFromNext(l,a){if(this.shouldCheckCRLF()&&this.endWithCR(l)){const r=a.next();if(this.startWithLF(r)){if(l+=`
`,r.piece.length===1)(0,L.rbDelete)(this,r);else{const d=r.piece,m={line:d.start.line+1,column:0},h=d.length-1,v=this.getLineFeedCnt(d.bufferIndex,m,d.end);r.piece=new s(d.bufferIndex,m,d.end,v,h),(0,L.updateTreeMetadata)(this,r,-1,-1)}return!0}}return!1}iterate(l,a){if(l===L.SENTINEL)return a(L.SENTINEL);const r=this.iterate(l.left,a);return r&&a(l)&&this.iterate(l.right,a)}getNodeContent(l){if(l===L.SENTINEL)return"";const a=this._buffers[l.piece.bufferIndex],r=l.piece,d=this.offsetInBuffer(r.bufferIndex,r.start),m=this.offsetInBuffer(r.bufferIndex,r.end);return a.buffer.substring(d,m)}getPieceContent(l){const a=this._buffers[l.bufferIndex],r=this.offsetInBuffer(l.bufferIndex,l.start),d=this.offsetInBuffer(l.bufferIndex,l.end);return a.buffer.substring(r,d)}rbInsertRight(l,a){const r=new L.TreeNode(a,1);if(r.left=L.SENTINEL,r.right=L.SENTINEL,r.parent=L.SENTINEL,r.size_left=0,r.lf_left=0,this.root===L.SENTINEL)this.root=r,r.color=0;else if(l.right===L.SENTINEL)l.right=r,r.parent=l;else{const m=(0,L.leftest)(l.right);m.left=r,r.parent=m}return(0,L.fixInsert)(this,r),r}rbInsertLeft(l,a){const r=new L.TreeNode(a,1);if(r.left=L.SENTINEL,r.right=L.SENTINEL,r.parent=L.SENTINEL,r.size_left=0,r.lf_left=0,this.root===L.SENTINEL)this.root=r,r.color=0;else if(l.left===L.SENTINEL)l.left=r,r.parent=l;else{const d=(0,L.righttest)(l.left);d.right=r,r.parent=d}return(0,L.fixInsert)(this,r),r}}e.PieceTreeBase=g}),define(oe[340],re([1,0,6,11,4,40,339,144,326,2]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class p extends b.Disposable{constructor(s,t,i,o,g,u,l){super(),this._onDidChangeContent=this._register(new c.Emitter),this._BOM=t,this._mightContainNonBasicASCII=!u,this._mightContainRTL=o,this._mightContainUnusualLineTerminators=g,this._pieceTree=new y.PieceTreeBase(s,i,l)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(s){return this._pieceTree.createSnapshot(s?this._BOM:"")}getOffsetAt(s,t){return this._pieceTree.getOffsetAt(s,t)}getPositionAt(s){return this._pieceTree.getPositionAt(s)}getRangeAt(s,t){const i=s+t,o=this.getPositionAt(s),g=this.getPositionAt(i);return new E.Range(o.lineNumber,o.column,g.lineNumber,g.column)}getValueInRange(s,t=0){if(s.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(s,i)}getValueLengthInRange(s,t=0){if(s.isEmpty())return 0;if(s.startLineNumber===s.endLineNumber)return s.endColumn-s.startColumn;const i=this.getOffsetAt(s.startLineNumber,s.startColumn),o=this.getOffsetAt(s.endLineNumber,s.endColumn);let g=0;const u=this._getEndOfLine(t),l=this.getEOL();if(u.length!==l.length){const a=u.length-l.length,r=s.endLineNumber-s.startLineNumber;g=a*r}return o-i+g}getCharacterCountInRange(s,t=0){if(this._mightContainNonBasicASCII){let i=0;const o=s.startLineNumber,g=s.endLineNumber;for(let u=o;u<=g;u++){const l=this.getLineContent(u),a=u===o?s.startColumn-1:0,r=u===g?s.endColumn-1:l.length;for(let d=a;d<r;d++)k.isHighSurrogate(l.charCodeAt(d))?(i=i+1,d=d+1):i=i+1}return i+=this._getEndOfLine(t).length*(g-o),i}return this.getValueLengthInRange(s,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(s){return this._pieceTree.getLineContent(s)}getLineCharCode(s,t){return this._pieceTree.getLineCharCode(s,t)}getLineLength(s){return this._pieceTree.getLineLength(s)}getLineFirstNonWhitespaceColumn(s){const t=k.firstNonWhitespaceIndex(this.getLineContent(s));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(s){const t=k.lastNonWhitespaceIndex(this.getLineContent(s));return t===-1?0:t+2}_getEndOfLine(s){switch(s){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(s){this._pieceTree.setEOL(s)}applyEdits(s,t,i){let o=this._mightContainRTL,g=this._mightContainUnusualLineTerminators,u=this._mightContainNonBasicASCII,l=!0,a=[];for(let w=0;w<s.length;w++){const S=s[w];l&&S._isTracked&&(l=!1);const D=S.range;if(S.text){let R=!0;u||(R=!k.isBasicASCII(S.text),u=R),!o&&R&&(o=k.containsRTL(S.text)),!g&&R&&(g=k.containsUnusualLineTerminators(S.text))}let I="",T=0,M=0,A=0;if(S.text){let R;[T,M,A,R]=(0,f.countEOL)(S.text);const N=this.getEOL();R===0||R===(N===`\r
`?2:1)?I=S.text:I=S.text.replace(/\r\n|\r|\n/g,N)}a[w]={sortIndex:w,identifier:S.identifier||null,range:D,rangeOffset:this.getOffsetAt(D.startLineNumber,D.startColumn),rangeLength:this.getValueLengthInRange(D),text:I,eolCount:T,firstLineLength:M,lastLineLength:A,forceMoveMarkers:!!S.forceMoveMarkers,isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}a.sort(p._sortOpsAscending);let r=!1;for(let w=0,S=a.length-1;w<S;w++){const D=a[w].range.getEndPosition(),I=a[w+1].range.getStartPosition();if(I.isBeforeOrEqual(D)){if(I.isBefore(D))throw new Error("Overlapping ranges are not allowed!");r=!0}}l&&(a=this._reduceOperations(a));const d=i||t?p._getInverseEditRanges(a):[],m=[];if(t)for(let w=0;w<a.length;w++){const S=a[w],D=d[w];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let I=D.startLineNumber;I<=D.endLineNumber;I++){let T="";I===D.startLineNumber&&(T=this.getLineContent(S.range.startLineNumber),k.firstNonWhitespaceIndex(T)!==-1)||m.push({lineNumber:I,oldContent:T})}}let h=null;if(i){let w=0;h=[];for(let S=0;S<a.length;S++){const D=a[S],I=d[S],T=this.getValueInRange(D.range),M=D.rangeOffset+w;w+=D.text.length-T.length,h[S]={sortIndex:D.sortIndex,identifier:D.identifier,range:I,text:T,textChange:new _.TextChange(D.rangeOffset,T,M,D.text)}}r||h.sort((S,D)=>S.sortIndex-D.sortIndex)}this._mightContainRTL=o,this._mightContainUnusualLineTerminators=g,this._mightContainNonBasicASCII=u;const v=this._doApplyEdits(a);let C=null;if(t&&m.length>0){m.sort((w,S)=>S.lineNumber-w.lineNumber),C=[];for(let w=0,S=m.length;w<S;w++){const D=m[w].lineNumber;if(w>0&&m[w-1].lineNumber===D)continue;const I=m[w].oldContent,T=this.getLineContent(D);T.length===0||T===I||k.firstNonWhitespaceIndex(T)!==-1||C.push(D)}}return this._onDidChangeContent.fire(),new L.ApplyEditsResult(h,v,C)}_reduceOperations(s){return s.length<1e3?s:[this._toSingleEditOperation(s)]}_toSingleEditOperation(s){let t=!1;const i=s[0].range,o=s[s.length-1].range,g=new E.Range(i.startLineNumber,i.startColumn,o.endLineNumber,o.endColumn);let u=i.startLineNumber,l=i.startColumn;const a=[];for(let v=0,C=s.length;v<C;v++){const w=s[v],S=w.range;t=t||w.forceMoveMarkers,a.push(this.getValueInRange(new E.Range(u,l,S.startLineNumber,S.startColumn))),w.text.length>0&&a.push(w.text),u=S.endLineNumber,l=S.endColumn}const r=a.join(""),[d,m,h]=(0,f.countEOL)(r);return{sortIndex:0,identifier:s[0].identifier,range:g,rangeOffset:this.getOffsetAt(g.startLineNumber,g.startColumn),rangeLength:this.getValueLengthInRange(g,0),text:r,eolCount:d,firstLineLength:m,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(s){s.sort(p._sortOpsDescending);const t=[];for(let i=0;i<s.length;i++){const o=s[i],g=o.range.startLineNumber,u=o.range.startColumn,l=o.range.endLineNumber,a=o.range.endColumn;if(g===l&&u===a&&o.text.length===0)continue;o.text?(this._pieceTree.delete(o.rangeOffset,o.rangeLength),this._pieceTree.insert(o.rangeOffset,o.text,!0)):this._pieceTree.delete(o.rangeOffset,o.rangeLength);const r=new E.Range(g,u,l,a);t.push({range:r,rangeLength:o.rangeLength,text:o.text,rangeOffset:o.rangeOffset,forceMoveMarkers:o.forceMoveMarkers})}return t}findMatchesLineByLine(s,t,i,o){return this._pieceTree.findMatchesLineByLine(s,t,i,o)}static _getInverseEditRanges(s){const t=[];let i=0,o=0,g=null;for(let u=0,l=s.length;u<l;u++){const a=s[u];let r,d;g?g.range.endLineNumber===a.range.startLineNumber?(r=i,d=o+(a.range.startColumn-g.range.endColumn)):(r=i+(a.range.startLineNumber-g.range.endLineNumber),d=a.range.startColumn):(r=a.range.startLineNumber,d=a.range.startColumn);let m;if(a.text.length>0){const h=a.eolCount+1;h===1?m=new E.Range(r,d,r,d+a.firstLineLength):m=new E.Range(r,d,r+h-1,a.lastLineLength+1)}else m=new E.Range(r,d,r,d);i=m.endLineNumber,o=m.endColumn,t.push(m),g=a}return t}static _sortOpsAscending(s,t){const i=E.Range.compareRangesUsingEnds(s.range,t.range);return i===0?s.sortIndex-t.sortIndex:i}static _sortOpsDescending(s,t){const i=E.Range.compareRangesUsingEnds(s.range,t.range);return i===0?t.sortIndex-s.sortIndex:-i}}e.PieceTreeTextBuffer=p}),define(oe[595],re([1,0,11,339,340]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=void 0;class L{constructor(_,b,p,n,s,t,i,o,g){this._chunks=_,this._bom=b,this._cr=p,this._lf=n,this._crlf=s,this._containsRTL=t,this._containsUnusualLineTerminators=i,this._isBasicASCII=o,this._normalizeEOL=g}_getEOL(_){const b=this._cr+this._lf+this._crlf,p=this._cr+this._crlf;return b===0?_===1?`
`:`\r
`:p>b/2?`\r
`:`
`}create(_){const b=this._getEOL(_),p=this._chunks;if(this._normalizeEOL&&(b===`\r
`&&(this._cr>0||this._lf>0)||b===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,t=p.length;s<t;s++){const i=p[s].buffer.replace(/\r\n|\r|\n/g,b),o=(0,k.createLineStartsFast)(i);p[s]=new k.StringBuffer(i,o)}const n=new E.PieceTreeTextBuffer(p,this._bom,b,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}}class y{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(_){if(_.length===0)return;this.chunks.length===0&&c.startsWithUTF8BOM(_)&&(this.BOM=c.UTF8_BOM_CHARACTER,_=_.substr(1));const b=_.charCodeAt(_.length-1);b===13||b>=55296&&b<=56319?(this._acceptChunk1(_.substr(0,_.length-1),!1),this._hasPreviousChar=!0,this._previousChar=b):(this._acceptChunk1(_,!1),this._hasPreviousChar=!1,this._previousChar=b)}_acceptChunk1(_,b){!b&&_.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+_):this._acceptChunk2(_))}_acceptChunk2(_){const b=(0,k.createLineStarts)(this._tmpLineStarts,_);this.chunks.push(new k.StringBuffer(_,b.lineStarts)),this.cr+=b.cr,this.lf+=b.lf,this.crlf+=b.crlf,b.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=c.containsRTL(_)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=c.containsUnusualLineTerminators(_)))}finish(_=!0){return this._finish(),new L(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,_)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const _=this.chunks[this.chunks.length-1];_.buffer+=String.fromCharCode(this._previousChar);const b=(0,k.createLineStartsFast)(_.buffer);_.lineStarts=b,this._previousChar===13&&this.cr++}}}e.PieceTreeTextBufferBuilder=y}),define(oe[596],re([1,0,103,115]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextModelText=void 0;class E extends c.AbstractText{constructor(y){super(),this._textModel=y}getValueOfRange(y){return this._textModel.getValueInRange(y)}get length(){const y=this._textModel.getLineCount(),f=this._textModel.getLineLength(y);return new k.TextLength(y-1,f)}}e.TextModelText=E}),define(oe[248],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.computeIndentLevel=c;function c(k,E){let L=0,y=0;const f=k.length;for(;y<f;){const _=k.charCodeAt(y);if(_===32)L++;else if(_===9)L=L-L%E+E;else break;y++}return y===f?-1:L}}),define(oe[341],re([1,0,89,9,40]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OutputPosition=e.InjectedText=e.ModelLineProjectionData=void 0;class L{constructor(n,s,t,i,o){this.injectionOffsets=n,this.injectionOptions=s,this.breakOffsets=t,this.breakOffsetsVisibleColumn=i,this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(n){return n>0?this.wrappedTextIndentLength:0}getLineLength(n){const s=n>0?this.breakOffsets[n-1]:0;let i=this.breakOffsets[n]-s;return n>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(n){return this.getLineLength(n)}translateToInputOffset(n,s){n>0&&(s=Math.max(0,s-this.wrappedTextIndentLength));let i=n===0?s:this.breakOffsets[n-1]+s;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&i>this.injectionOffsets[o];o++)i<this.injectionOffsets[o]+this.injectionOptions[o].content.length?i=this.injectionOffsets[o]:i-=this.injectionOptions[o].content.length;return i}translateToOutputPosition(n,s=2){let t=n;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(n<this.injectionOffsets[i]||s!==1&&n===this.injectionOffsets[i]);i++)t+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(t,s)}offsetInInputWithInjectionsToOutputPosition(n,s=2){let t=0,i=this.breakOffsets.length-1,o=0,g=0;for(;t<=i;){o=t+(i-t)/2|0;const l=this.breakOffsets[o];if(g=o>0?this.breakOffsets[o-1]:0,s===0)if(n<=g)i=o-1;else if(n>l)t=o+1;else break;else if(n<g)i=o-1;else if(n>=l)t=o+1;else break}let u=n-g;return o>0&&(u+=this.wrappedTextIndentLength),new b(o,u)}normalizeOutputPosition(n,s,t){if(this.injectionOffsets!==null){const i=this.outputPositionToOffsetInInputWithInjections(n,s),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,t);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,t)}if(t===0){if(n>0&&s===this.getMinOutputOffset(n))return new b(n-1,this.getMaxOutputOffset(n-1))}else if(t===1){const i=this.getOutputLineCount()-1;if(n<i&&s===this.getMaxOutputOffset(n))return new b(n+1,this.getMinOutputOffset(n+1))}return new b(n,s)}outputPositionToOffsetInInputWithInjections(n,s){return n>0&&(s=Math.max(0,s-this.wrappedTextIndentLength)),(n>0?this.breakOffsets[n-1]:0)+s}normalizeOffsetInInputWithInjectionsAroundInjections(n,s){const t=this.getInjectedTextAtOffset(n);if(!t)return n;if(s===2){if(n===t.offsetInInputWithInjections+t.length&&y(this.injectionOptions[t.injectedTextIndex].cursorStops))return t.offsetInInputWithInjections+t.length;{let i=t.offsetInInputWithInjections;if(f(this.injectionOptions[t.injectedTextIndex].cursorStops))return i;let o=t.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[t.injectedTextIndex]&&!(y(this.injectionOptions[o].cursorStops)||(i-=this.injectionOptions[o].content.length,f(this.injectionOptions[o].cursorStops)));)o--;return i}}else if(s===1||s===4){let i=t.offsetInInputWithInjections+t.length,o=t.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)i+=this.injectionOptions[o+1].content.length,o++;return i}else if(s===0||s===3){let i=t.offsetInInputWithInjections,o=t.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)i-=this.injectionOptions[o-1].content.length,o--;return i}(0,c.assertNever)(s)}getInjectedText(n,s){const t=this.outputPositionToOffsetInInputWithInjections(n,s),i=this.getInjectedTextAtOffset(t);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(n){const s=this.injectionOffsets,t=this.injectionOptions;if(s!==null){let i=0;for(let o=0;o<s.length;o++){const g=t[o].content.length,u=s[o]+i,l=s[o]+i+g;if(u>n)break;if(n<=l)return{injectedTextIndex:o,offsetInInputWithInjections:u,length:g};i+=g}}}}e.ModelLineProjectionData=L;function y(p){return p==null?!0:p===E.InjectedTextCursorStops.Right||p===E.InjectedTextCursorStops.Both}function f(p){return p==null?!0:p===E.InjectedTextCursorStops.Left||p===E.InjectedTextCursorStops.Both}class _{constructor(n){this.options=n}}e.InjectedText=_;class b{constructor(n,s){this.outputLineIndex=n,this.outputOffset=s}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(n){return new k.Position(n+this.outputLineIndex,this.outputOffset+1)}}e.OutputPosition=b}),define(oe[597],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findSectionHeaders=E;const c=new RegExp("\\bMARK:\\s*(.*)$","d"),k=/^-+|-+$/g;function E(b,p){let n=[];if(p.findRegionSectionHeaders&&p.foldingRules?.markers){const s=L(b,p);n=n.concat(s)}if(p.findMarkSectionHeaders){const s=y(b);n=n.concat(s)}return n}function L(b,p){const n=[],s=b.getLineCount();for(let t=1;t<=s;t++){const i=b.getLineContent(t),o=i.match(p.foldingRules.markers.start);if(o){const g={startLineNumber:t,startColumn:o[0].length+1,endLineNumber:t,endColumn:i.length+1};if(g.endColumn>g.startColumn){const u={range:g,..._(i.substring(o[0].length)),shouldBeInComments:!1};(u.text||u.hasSeparatorLine)&&n.push(u)}}}return n}function y(b){const p=[],n=b.getLineCount();for(let s=1;s<=n;s++){const t=b.getLineContent(s);f(t,s,p)}return p}function f(b,p,n){c.lastIndex=0;const s=c.exec(b);if(s){const t=s.indices[1][0]+1,i=s.indices[1][1]+1,o={startLineNumber:p,startColumn:t,endLineNumber:p,endColumn:i};if(o.endColumn>o.startColumn){const g={range:o,..._(s[1]),shouldBeInComments:!0};(g.text||g.hasSeparatorLine)&&n.push(g)}}}function _(b){b=b.trim();const p=b.startsWith("-");return b=b.replace(k,""),{text:b,hasSeparatorLine:p}}}),define(oe[598],re([1,0,158,16]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeSemanticTokensDto=y;function E(_){for(let b=0,p=_.length;b<p;b+=4){const n=_[b+0],s=_[b+1],t=_[b+2],i=_[b+3];_[b+0]=i,_[b+1]=t,_[b+2]=s,_[b+3]=n}}function L(_){const b=new Uint8Array(_.buffer,_.byteOffset,_.length*4);return k.isLittleEndian()||E(b),c.VSBuffer.wrap(b)}function y(_){const b=new Uint32Array(f(_));let p=0;if(b[p++]=_.id,_.type==="full")b[p++]=1,b[p++]=_.data.length,b.set(_.data,p),p+=_.data.length;else{b[p++]=2,b[p++]=_.deltas.length;for(const n of _.deltas)b[p++]=n.start,b[p++]=n.deleteCount,n.data?(b[p++]=n.data.length,b.set(n.data,p),p+=n.data.length):b[p++]=0}return L(b)}function f(_){let b=0;if(b+=2,_.type==="full")b+=1+_.data.length;else{b+=1,b+=3*_.deltas.length;for(const p of _.deltas)p.data&&(b+=p.data.length)}return b}}),define(oe[342],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DraggedTreeItemsIdentifier=e.TreeViewsDnDService=void 0;class c{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(L){if(L&&this._dragOperations.has(L)){const y=this._dragOperations.get(L);return this._dragOperations.delete(L),y}}}e.TreeViewsDnDService=c;class k{constructor(L){this.identifier=L}}e.DraggedTreeItemsIdentifier=k}),define(oe[343],re([1,0,4,203,11,89,169]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeTextModelHighlighter=void 0;class f{static computeUnicodeHighlights(s,t,i){const o=i?i.startLineNumber:1,g=i?i.endLineNumber:s.getLineCount(),u=new b(t),l=u.getCandidateCodePoints();let a;l==="allNonBasicAscii"?a=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):a=new RegExp(`${_(Array.from(l))}`,"g");const r=new k.Searcher(null,a),d=[];let m=!1,h,v=0,C=0,w=0;e:for(let S=o,D=g;S<=D;S++){const I=s.getLineContent(S),T=I.length;r.reset(0);do if(h=r.next(I),h){let M=h.index,A=h.index+h[0].length;if(M>0){const x=I.charCodeAt(M-1);E.isHighSurrogate(x)&&M--}if(A+1<T){const x=I.charCodeAt(A-1);E.isHighSurrogate(x)&&A++}const R=I.substring(M,A);let N=(0,y.getWordAtText)(M+1,y.DEFAULT_WORD_REGEXP,I,0);N&&N.endColumn<=M+1&&(N=null);const O=u.shouldHighlightNonBasicASCII(R,N?N.word:null);if(O!==0){if(O===3?v++:O===2?C++:O===1?w++:(0,L.assertNever)(O),d.length>=1e3){m=!0;break e}d.push(new c.Range(S,M+1,S,A+1))}}while(h)}return{ranges:d,hasMore:m,ambiguousCharacterCount:v,invisibleCharacterCount:C,nonBasicAsciiCharacterCount:w}}static computeUnicodeHighlightReason(s,t){const i=new b(t);switch(i.shouldHighlightNonBasicASCII(s,null)){case 0:return null;case 2:return{kind:1};case 3:{const g=s.codePointAt(0),u=i.ambiguousCharacters.getPrimaryConfusable(g),l=E.AmbiguousCharacters.getLocales().filter(a=>!E.AmbiguousCharacters.getInstance(new Set([...t.allowedLocales,a])).isAmbiguous(g));return{kind:0,confusableWith:String.fromCodePoint(u),notAmbiguousInLocales:l}}case 1:return{kind:2}}}}e.UnicodeTextModelHighlighter=f;function _(n,s){return`[${E.escapeRegExpCharacters(n.map(i=>String.fromCodePoint(i)).join(""))}]`}class b{constructor(s){this.options=s,this.allowedCodePoints=new Set(s.allowedCodePoints),this.ambiguousCharacters=E.AmbiguousCharacters.getInstance(new Set(s.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const s=new Set;if(this.options.invisibleCharacters)for(const t of E.InvisibleCharacters.codePoints)p(String.fromCodePoint(t))||s.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())s.add(t);for(const t of this.allowedCodePoints)s.delete(t);return s}shouldHighlightNonBasicASCII(s,t){const i=s.codePointAt(0);if(this.allowedCodePoints.has(i))return 0;if(this.options.nonBasicASCII)return 1;let o=!1,g=!1;if(t)for(const u of t){const l=u.codePointAt(0),a=E.isBasicASCII(u);o=o||a,!a&&!this.ambiguousCharacters.isAmbiguous(l)&&!E.InvisibleCharacters.isInvisibleCharacter(l)&&(g=!0)}return!o&&g?0:this.options.invisibleCharacters&&!p(s)&&E.InvisibleCharacters.isInvisibleCharacter(i)?2:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(i)?3:0}}function p(n){return n===" "||n===`
`||n==="	"}}),define(oe[249],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WrappingIndent=e.TrackedRangeStickiness=e.TextEditorCursorStyle=e.TextEditorCursorBlinkingStyle=e.SymbolTag=e.SymbolKind=e.SignatureHelpTriggerKind=e.ShowLightbulbIconMode=e.SelectionDirection=e.ScrollbarVisibility=e.ScrollType=e.RenderMinimap=e.RenderLineNumbersType=e.PositionAffinity=e.PartialAcceptTriggerKind=e.OverviewRulerLane=e.OverlayWidgetPositionPreference=e.NewSymbolNameTriggerKind=e.NewSymbolNameTag=e.MouseTargetType=e.MinimapSectionHeaderStyle=e.MinimapPosition=e.MarkerTag=e.MarkerSeverity=e.KeyCode=e.InlineEditTriggerKind=e.InlineCompletionTriggerKind=e.InlayHintKind=e.InjectedTextCursorStops=e.IndentAction=e.HoverVerbosityAction=e.GlyphMarginLane=e.EndOfLineSequence=e.EndOfLinePreference=e.EditorOption=e.EditorAutoIndentStrategy=e.DocumentHighlightKind=e.DefaultEndOfLine=e.CursorChangeReason=e.ContentWidgetPositionPreference=e.CompletionTriggerKind=e.CompletionItemTag=e.CompletionItemKind=e.CompletionItemInsertTextRule=e.CodeActionTriggerType=e.AccessibilitySupport=void 0;var c;(function(P){P[P.Unknown=0]="Unknown",P[P.Disabled=1]="Disabled",P[P.Enabled=2]="Enabled"})(c||(e.AccessibilitySupport=c={}));var k;(function(P){P[P.Invoke=1]="Invoke",P[P.Auto=2]="Auto"})(k||(e.CodeActionTriggerType=k={}));var E;(function(P){P[P.None=0]="None",P[P.KeepWhitespace=1]="KeepWhitespace",P[P.InsertAsSnippet=4]="InsertAsSnippet"})(E||(e.CompletionItemInsertTextRule=E={}));var L;(function(P){P[P.Method=0]="Method",P[P.Function=1]="Function",P[P.Constructor=2]="Constructor",P[P.Field=3]="Field",P[P.Variable=4]="Variable",P[P.Class=5]="Class",P[P.Struct=6]="Struct",P[P.Interface=7]="Interface",P[P.Module=8]="Module",P[P.Property=9]="Property",P[P.Event=10]="Event",P[P.Operator=11]="Operator",P[P.Unit=12]="Unit",P[P.Value=13]="Value",P[P.Constant=14]="Constant",P[P.Enum=15]="Enum",P[P.EnumMember=16]="EnumMember",P[P.Keyword=17]="Keyword",P[P.Text=18]="Text",P[P.Color=19]="Color",P[P.File=20]="File",P[P.Reference=21]="Reference",P[P.Customcolor=22]="Customcolor",P[P.Folder=23]="Folder",P[P.TypeParameter=24]="TypeParameter",P[P.User=25]="User",P[P.Issue=26]="Issue",P[P.Snippet=27]="Snippet"})(L||(e.CompletionItemKind=L={}));var y;(function(P){P[P.Deprecated=1]="Deprecated"})(y||(e.CompletionItemTag=y={}));var f;(function(P){P[P.Invoke=0]="Invoke",P[P.TriggerCharacter=1]="TriggerCharacter",P[P.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(f||(e.CompletionTriggerKind=f={}));var _;(function(P){P[P.EXACT=0]="EXACT",P[P.ABOVE=1]="ABOVE",P[P.BELOW=2]="BELOW"})(_||(e.ContentWidgetPositionPreference=_={}));var b;(function(P){P[P.NotSet=0]="NotSet",P[P.ContentFlush=1]="ContentFlush",P[P.RecoverFromMarkers=2]="RecoverFromMarkers",P[P.Explicit=3]="Explicit",P[P.Paste=4]="Paste",P[P.Undo=5]="Undo",P[P.Redo=6]="Redo"})(b||(e.CursorChangeReason=b={}));var p;(function(P){P[P.LF=1]="LF",P[P.CRLF=2]="CRLF"})(p||(e.DefaultEndOfLine=p={}));var n;(function(P){P[P.Text=0]="Text",P[P.Read=1]="Read",P[P.Write=2]="Write"})(n||(e.DocumentHighlightKind=n={}));var s;(function(P){P[P.None=0]="None",P[P.Keep=1]="Keep",P[P.Brackets=2]="Brackets",P[P.Advanced=3]="Advanced",P[P.Full=4]="Full"})(s||(e.EditorAutoIndentStrategy=s={}));var t;(function(P){P[P.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",P[P.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",P[P.accessibilitySupport=2]="accessibilitySupport",P[P.accessibilityPageSize=3]="accessibilityPageSize",P[P.ariaLabel=4]="ariaLabel",P[P.ariaRequired=5]="ariaRequired",P[P.autoClosingBrackets=6]="autoClosingBrackets",P[P.autoClosingComments=7]="autoClosingComments",P[P.screenReaderAnnounceInlineSuggestion=8]="screenReaderAnnounceInlineSuggestion",P[P.autoClosingDelete=9]="autoClosingDelete",P[P.autoClosingOvertype=10]="autoClosingOvertype",P[P.autoClosingQuotes=11]="autoClosingQuotes",P[P.autoIndent=12]="autoIndent",P[P.automaticLayout=13]="automaticLayout",P[P.autoSurround=14]="autoSurround",P[P.bracketPairColorization=15]="bracketPairColorization",P[P.guides=16]="guides",P[P.codeLens=17]="codeLens",P[P.codeLensFontFamily=18]="codeLensFontFamily",P[P.codeLensFontSize=19]="codeLensFontSize",P[P.colorDecorators=20]="colorDecorators",P[P.colorDecoratorsLimit=21]="colorDecoratorsLimit",P[P.columnSelection=22]="columnSelection",P[P.comments=23]="comments",P[P.contextmenu=24]="contextmenu",P[P.copyWithSyntaxHighlighting=25]="copyWithSyntaxHighlighting",P[P.cursorBlinking=26]="cursorBlinking",P[P.cursorSmoothCaretAnimation=27]="cursorSmoothCaretAnimation",P[P.cursorStyle=28]="cursorStyle",P[P.cursorSurroundingLines=29]="cursorSurroundingLines",P[P.cursorSurroundingLinesStyle=30]="cursorSurroundingLinesStyle",P[P.cursorWidth=31]="cursorWidth",P[P.disableLayerHinting=32]="disableLayerHinting",P[P.disableMonospaceOptimizations=33]="disableMonospaceOptimizations",P[P.domReadOnly=34]="domReadOnly",P[P.dragAndDrop=35]="dragAndDrop",P[P.dropIntoEditor=36]="dropIntoEditor",P[P.emptySelectionClipboard=37]="emptySelectionClipboard",P[P.experimentalWhitespaceRendering=38]="experimentalWhitespaceRendering",P[P.extraEditorClassName=39]="extraEditorClassName",P[P.fastScrollSensitivity=40]="fastScrollSensitivity",P[P.find=41]="find",P[P.fixedOverflowWidgets=42]="fixedOverflowWidgets",P[P.folding=43]="folding",P[P.foldingStrategy=44]="foldingStrategy",P[P.foldingHighlight=45]="foldingHighlight",P[P.foldingImportsByDefault=46]="foldingImportsByDefault",P[P.foldingMaximumRegions=47]="foldingMaximumRegions",P[P.unfoldOnClickAfterEndOfLine=48]="unfoldOnClickAfterEndOfLine",P[P.fontFamily=49]="fontFamily",P[P.fontInfo=50]="fontInfo",P[P.fontLigatures=51]="fontLigatures",P[P.fontSize=52]="fontSize",P[P.fontWeight=53]="fontWeight",P[P.fontVariations=54]="fontVariations",P[P.formatOnPaste=55]="formatOnPaste",P[P.formatOnType=56]="formatOnType",P[P.glyphMargin=57]="glyphMargin",P[P.gotoLocation=58]="gotoLocation",P[P.hideCursorInOverviewRuler=59]="hideCursorInOverviewRuler",P[P.hover=60]="hover",P[P.inDiffEditor=61]="inDiffEditor",P[P.inlineSuggest=62]="inlineSuggest",P[P.inlineEdit=63]="inlineEdit",P[P.letterSpacing=64]="letterSpacing",P[P.lightbulb=65]="lightbulb",P[P.lineDecorationsWidth=66]="lineDecorationsWidth",P[P.lineHeight=67]="lineHeight",P[P.lineNumbers=68]="lineNumbers",P[P.lineNumbersMinChars=69]="lineNumbersMinChars",P[P.linkedEditing=70]="linkedEditing",P[P.links=71]="links",P[P.matchBrackets=72]="matchBrackets",P[P.minimap=73]="minimap",P[P.mouseStyle=74]="mouseStyle",P[P.mouseWheelScrollSensitivity=75]="mouseWheelScrollSensitivity",P[P.mouseWheelZoom=76]="mouseWheelZoom",P[P.multiCursorMergeOverlapping=77]="multiCursorMergeOverlapping",P[P.multiCursorModifier=78]="multiCursorModifier",P[P.multiCursorPaste=79]="multiCursorPaste",P[P.multiCursorLimit=80]="multiCursorLimit",P[P.occurrencesHighlight=81]="occurrencesHighlight",P[P.overviewRulerBorder=82]="overviewRulerBorder",P[P.overviewRulerLanes=83]="overviewRulerLanes",P[P.padding=84]="padding",P[P.pasteAs=85]="pasteAs",P[P.parameterHints=86]="parameterHints",P[P.peekWidgetDefaultFocus=87]="peekWidgetDefaultFocus",P[P.placeholder=88]="placeholder",P[P.definitionLinkOpensInPeek=89]="definitionLinkOpensInPeek",P[P.quickSuggestions=90]="quickSuggestions",P[P.quickSuggestionsDelay=91]="quickSuggestionsDelay",P[P.readOnly=92]="readOnly",P[P.readOnlyMessage=93]="readOnlyMessage",P[P.renameOnType=94]="renameOnType",P[P.renderControlCharacters=95]="renderControlCharacters",P[P.renderFinalNewline=96]="renderFinalNewline",P[P.renderLineHighlight=97]="renderLineHighlight",P[P.renderLineHighlightOnlyWhenFocus=98]="renderLineHighlightOnlyWhenFocus",P[P.renderValidationDecorations=99]="renderValidationDecorations",P[P.renderWhitespace=100]="renderWhitespace",P[P.revealHorizontalRightPadding=101]="revealHorizontalRightPadding",P[P.roundedSelection=102]="roundedSelection",P[P.rulers=103]="rulers",P[P.scrollbar=104]="scrollbar",P[P.scrollBeyondLastColumn=105]="scrollBeyondLastColumn",P[P.scrollBeyondLastLine=106]="scrollBeyondLastLine",P[P.scrollPredominantAxis=107]="scrollPredominantAxis",P[P.selectionClipboard=108]="selectionClipboard",P[P.selectionHighlight=109]="selectionHighlight",P[P.selectOnLineNumbers=110]="selectOnLineNumbers",P[P.showFoldingControls=111]="showFoldingControls",P[P.showUnused=112]="showUnused",P[P.snippetSuggestions=113]="snippetSuggestions",P[P.smartSelect=114]="smartSelect",P[P.smoothScrolling=115]="smoothScrolling",P[P.stickyScroll=116]="stickyScroll",P[P.stickyTabStops=117]="stickyTabStops",P[P.stopRenderingLineAfter=118]="stopRenderingLineAfter",P[P.suggest=119]="suggest",P[P.suggestFontSize=120]="suggestFontSize",P[P.suggestLineHeight=121]="suggestLineHeight",P[P.suggestOnTriggerCharacters=122]="suggestOnTriggerCharacters",P[P.suggestSelection=123]="suggestSelection",P[P.tabCompletion=124]="tabCompletion",P[P.tabIndex=125]="tabIndex",P[P.unicodeHighlighting=126]="unicodeHighlighting",P[P.unusualLineTerminators=127]="unusualLineTerminators",P[P.useShadowDOM=128]="useShadowDOM",P[P.useTabStops=129]="useTabStops",P[P.wordBreak=130]="wordBreak",P[P.wordSegmenterLocales=131]="wordSegmenterLocales",P[P.wordSeparators=132]="wordSeparators",P[P.wordWrap=133]="wordWrap",P[P.wordWrapBreakAfterCharacters=134]="wordWrapBreakAfterCharacters",P[P.wordWrapBreakBeforeCharacters=135]="wordWrapBreakBeforeCharacters",P[P.wordWrapColumn=136]="wordWrapColumn",P[P.wordWrapOverride1=137]="wordWrapOverride1",P[P.wordWrapOverride2=138]="wordWrapOverride2",P[P.wrappingIndent=139]="wrappingIndent",P[P.wrappingStrategy=140]="wrappingStrategy",P[P.showDeprecated=141]="showDeprecated",P[P.inlayHints=142]="inlayHints",P[P.editorClassName=143]="editorClassName",P[P.pixelRatio=144]="pixelRatio",P[P.tabFocusMode=145]="tabFocusMode",P[P.layoutInfo=146]="layoutInfo",P[P.wrappingInfo=147]="wrappingInfo",P[P.defaultColorDecorators=148]="defaultColorDecorators",P[P.colorDecoratorsActivatedOn=149]="colorDecoratorsActivatedOn",P[P.inlineCompletionsAccessibilityVerbose=150]="inlineCompletionsAccessibilityVerbose"})(t||(e.EditorOption=t={}));var i;(function(P){P[P.TextDefined=0]="TextDefined",P[P.LF=1]="LF",P[P.CRLF=2]="CRLF"})(i||(e.EndOfLinePreference=i={}));var o;(function(P){P[P.LF=0]="LF",P[P.CRLF=1]="CRLF"})(o||(e.EndOfLineSequence=o={}));var g;(function(P){P[P.Left=1]="Left",P[P.Center=2]="Center",P[P.Right=3]="Right"})(g||(e.GlyphMarginLane=g={}));var u;(function(P){P[P.Increase=0]="Increase",P[P.Decrease=1]="Decrease"})(u||(e.HoverVerbosityAction=u={}));var l;(function(P){P[P.None=0]="None",P[P.Indent=1]="Indent",P[P.IndentOutdent=2]="IndentOutdent",P[P.Outdent=3]="Outdent"})(l||(e.IndentAction=l={}));var a;(function(P){P[P.Both=0]="Both",P[P.Right=1]="Right",P[P.Left=2]="Left",P[P.None=3]="None"})(a||(e.InjectedTextCursorStops=a={}));var r;(function(P){P[P.Type=1]="Type",P[P.Parameter=2]="Parameter"})(r||(e.InlayHintKind=r={}));var d;(function(P){P[P.Automatic=0]="Automatic",P[P.Explicit=1]="Explicit"})(d||(e.InlineCompletionTriggerKind=d={}));var m;(function(P){P[P.Invoke=0]="Invoke",P[P.Automatic=1]="Automatic"})(m||(e.InlineEditTriggerKind=m={}));var h;(function(P){P[P.DependsOnKbLayout=-1]="DependsOnKbLayout",P[P.Unknown=0]="Unknown",P[P.Backspace=1]="Backspace",P[P.Tab=2]="Tab",P[P.Enter=3]="Enter",P[P.Shift=4]="Shift",P[P.Ctrl=5]="Ctrl",P[P.Alt=6]="Alt",P[P.PauseBreak=7]="PauseBreak",P[P.CapsLock=8]="CapsLock",P[P.Escape=9]="Escape",P[P.Space=10]="Space",P[P.PageUp=11]="PageUp",P[P.PageDown=12]="PageDown",P[P.End=13]="End",P[P.Home=14]="Home",P[P.LeftArrow=15]="LeftArrow",P[P.UpArrow=16]="UpArrow",P[P.RightArrow=17]="RightArrow",P[P.DownArrow=18]="DownArrow",P[P.Insert=19]="Insert",P[P.Delete=20]="Delete",P[P.Digit0=21]="Digit0",P[P.Digit1=22]="Digit1",P[P.Digit2=23]="Digit2",P[P.Digit3=24]="Digit3",P[P.Digit4=25]="Digit4",P[P.Digit5=26]="Digit5",P[P.Digit6=27]="Digit6",P[P.Digit7=28]="Digit7",P[P.Digit8=29]="Digit8",P[P.Digit9=30]="Digit9",P[P.KeyA=31]="KeyA",P[P.KeyB=32]="KeyB",P[P.KeyC=33]="KeyC",P[P.KeyD=34]="KeyD",P[P.KeyE=35]="KeyE",P[P.KeyF=36]="KeyF",P[P.KeyG=37]="KeyG",P[P.KeyH=38]="KeyH",P[P.KeyI=39]="KeyI",P[P.KeyJ=40]="KeyJ",P[P.KeyK=41]="KeyK",P[P.KeyL=42]="KeyL",P[P.KeyM=43]="KeyM",P[P.KeyN=44]="KeyN",P[P.KeyO=45]="KeyO",P[P.KeyP=46]="KeyP",P[P.KeyQ=47]="KeyQ",P[P.KeyR=48]="KeyR",P[P.KeyS=49]="KeyS",P[P.KeyT=50]="KeyT",P[P.KeyU=51]="KeyU",P[P.KeyV=52]="KeyV",P[P.KeyW=53]="KeyW",P[P.KeyX=54]="KeyX",P[P.KeyY=55]="KeyY",P[P.KeyZ=56]="KeyZ",P[P.Meta=57]="Meta",P[P.ContextMenu=58]="ContextMenu",P[P.F1=59]="F1",P[P.F2=60]="F2",P[P.F3=61]="F3",P[P.F4=62]="F4",P[P.F5=63]="F5",P[P.F6=64]="F6",P[P.F7=65]="F7",P[P.F8=66]="F8",P[P.F9=67]="F9",P[P.F10=68]="F10",P[P.F11=69]="F11",P[P.F12=70]="F12",P[P.F13=71]="F13",P[P.F14=72]="F14",P[P.F15=73]="F15",P[P.F16=74]="F16",P[P.F17=75]="F17",P[P.F18=76]="F18",P[P.F19=77]="F19",P[P.F20=78]="F20",P[P.F21=79]="F21",P[P.F22=80]="F22",P[P.F23=81]="F23",P[P.F24=82]="F24",P[P.NumLock=83]="NumLock",P[P.ScrollLock=84]="ScrollLock",P[P.Semicolon=85]="Semicolon",P[P.Equal=86]="Equal",P[P.Comma=87]="Comma",P[P.Minus=88]="Minus",P[P.Period=89]="Period",P[P.Slash=90]="Slash",P[P.Backquote=91]="Backquote",P[P.BracketLeft=92]="BracketLeft",P[P.Backslash=93]="Backslash",P[P.BracketRight=94]="BracketRight",P[P.Quote=95]="Quote",P[P.OEM_8=96]="OEM_8",P[P.IntlBackslash=97]="IntlBackslash",P[P.Numpad0=98]="Numpad0",P[P.Numpad1=99]="Numpad1",P[P.Numpad2=100]="Numpad2",P[P.Numpad3=101]="Numpad3",P[P.Numpad4=102]="Numpad4",P[P.Numpad5=103]="Numpad5",P[P.Numpad6=104]="Numpad6",P[P.Numpad7=105]="Numpad7",P[P.Numpad8=106]="Numpad8",P[P.Numpad9=107]="Numpad9",P[P.NumpadMultiply=108]="NumpadMultiply",P[P.NumpadAdd=109]="NumpadAdd",P[P.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",P[P.NumpadSubtract=111]="NumpadSubtract",P[P.NumpadDecimal=112]="NumpadDecimal",P[P.NumpadDivide=113]="NumpadDivide",P[P.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",P[P.ABNT_C1=115]="ABNT_C1",P[P.ABNT_C2=116]="ABNT_C2",P[P.AudioVolumeMute=117]="AudioVolumeMute",P[P.AudioVolumeUp=118]="AudioVolumeUp",P[P.AudioVolumeDown=119]="AudioVolumeDown",P[P.BrowserSearch=120]="BrowserSearch",P[P.BrowserHome=121]="BrowserHome",P[P.BrowserBack=122]="BrowserBack",P[P.BrowserForward=123]="BrowserForward",P[P.MediaTrackNext=124]="MediaTrackNext",P[P.MediaTrackPrevious=125]="MediaTrackPrevious",P[P.MediaStop=126]="MediaStop",P[P.MediaPlayPause=127]="MediaPlayPause",P[P.LaunchMediaPlayer=128]="LaunchMediaPlayer",P[P.LaunchMail=129]="LaunchMail",P[P.LaunchApp2=130]="LaunchApp2",P[P.Clear=131]="Clear",P[P.MAX_VALUE=132]="MAX_VALUE"})(h||(e.KeyCode=h={}));var v;(function(P){P[P.Hint=1]="Hint",P[P.Info=2]="Info",P[P.Warning=4]="Warning",P[P.Error=8]="Error"})(v||(e.MarkerSeverity=v={}));var C;(function(P){P[P.Unnecessary=1]="Unnecessary",P[P.Deprecated=2]="Deprecated"})(C||(e.MarkerTag=C={}));var w;(function(P){P[P.Inline=1]="Inline",P[P.Gutter=2]="Gutter"})(w||(e.MinimapPosition=w={}));var S;(function(P){P[P.Normal=1]="Normal",P[P.Underlined=2]="Underlined"})(S||(e.MinimapSectionHeaderStyle=S={}));var D;(function(P){P[P.UNKNOWN=0]="UNKNOWN",P[P.TEXTAREA=1]="TEXTAREA",P[P.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",P[P.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",P[P.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",P[P.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",P[P.CONTENT_TEXT=6]="CONTENT_TEXT",P[P.CONTENT_EMPTY=7]="CONTENT_EMPTY",P[P.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",P[P.CONTENT_WIDGET=9]="CONTENT_WIDGET",P[P.OVERVIEW_RULER=10]="OVERVIEW_RULER",P[P.SCROLLBAR=11]="SCROLLBAR",P[P.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",P[P.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(D||(e.MouseTargetType=D={}));var I;(function(P){P[P.AIGenerated=1]="AIGenerated"})(I||(e.NewSymbolNameTag=I={}));var T;(function(P){P[P.Invoke=0]="Invoke",P[P.Automatic=1]="Automatic"})(T||(e.NewSymbolNameTriggerKind=T={}));var M;(function(P){P[P.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",P[P.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",P[P.TOP_CENTER=2]="TOP_CENTER"})(M||(e.OverlayWidgetPositionPreference=M={}));var A;(function(P){P[P.Left=1]="Left",P[P.Center=2]="Center",P[P.Right=4]="Right",P[P.Full=7]="Full"})(A||(e.OverviewRulerLane=A={}));var R;(function(P){P[P.Word=0]="Word",P[P.Line=1]="Line",P[P.Suggest=2]="Suggest"})(R||(e.PartialAcceptTriggerKind=R={}));var N;(function(P){P[P.Left=0]="Left",P[P.Right=1]="Right",P[P.None=2]="None",P[P.LeftOfInjectedText=3]="LeftOfInjectedText",P[P.RightOfInjectedText=4]="RightOfInjectedText"})(N||(e.PositionAffinity=N={}));var O;(function(P){P[P.Off=0]="Off",P[P.On=1]="On",P[P.Relative=2]="Relative",P[P.Interval=3]="Interval",P[P.Custom=4]="Custom"})(O||(e.RenderLineNumbersType=O={}));var x;(function(P){P[P.None=0]="None",P[P.Text=1]="Text",P[P.Blocks=2]="Blocks"})(x||(e.RenderMinimap=x={}));var F;(function(P){P[P.Smooth=0]="Smooth",P[P.Immediate=1]="Immediate"})(F||(e.ScrollType=F={}));var W;(function(P){P[P.Auto=1]="Auto",P[P.Hidden=2]="Hidden",P[P.Visible=3]="Visible"})(W||(e.ScrollbarVisibility=W={}));var z;(function(P){P[P.LTR=0]="LTR",P[P.RTL=1]="RTL"})(z||(e.SelectionDirection=z={}));var q;(function(P){P.Off="off",P.OnCode="onCode",P.On="on"})(q||(e.ShowLightbulbIconMode=q={}));var H;(function(P){P[P.Invoke=1]="Invoke",P[P.TriggerCharacter=2]="TriggerCharacter",P[P.ContentChange=3]="ContentChange"})(H||(e.SignatureHelpTriggerKind=H={}));var K;(function(P){P[P.File=0]="File",P[P.Module=1]="Module",P[P.Namespace=2]="Namespace",P[P.Package=3]="Package",P[P.Class=4]="Class",P[P.Method=5]="Method",P[P.Property=6]="Property",P[P.Field=7]="Field",P[P.Constructor=8]="Constructor",P[P.Enum=9]="Enum",P[P.Interface=10]="Interface",P[P.Function=11]="Function",P[P.Variable=12]="Variable",P[P.Constant=13]="Constant",P[P.String=14]="String",P[P.Number=15]="Number",P[P.Boolean=16]="Boolean",P[P.Array=17]="Array",P[P.Object=18]="Object",P[P.Key=19]="Key",P[P.Null=20]="Null",P[P.EnumMember=21]="EnumMember",P[P.Struct=22]="Struct",P[P.Event=23]="Event",P[P.Operator=24]="Operator",P[P.TypeParameter=25]="TypeParameter"})(K||(e.SymbolKind=K={}));var U;(function(P){P[P.Deprecated=1]="Deprecated"})(U||(e.SymbolTag=U={}));var Y;(function(P){P[P.Hidden=0]="Hidden",P[P.Blink=1]="Blink",P[P.Smooth=2]="Smooth",P[P.Phase=3]="Phase",P[P.Expand=4]="Expand",P[P.Solid=5]="Solid"})(Y||(e.TextEditorCursorBlinkingStyle=Y={}));var Q;(function(P){P[P.Line=1]="Line",P[P.Block=2]="Block",P[P.Underline=3]="Underline",P[P.LineThin=4]="LineThin",P[P.BlockOutline=5]="BlockOutline",P[P.UnderlineThin=6]="UnderlineThin"})(Q||(e.TextEditorCursorStyle=Q={}));var X;(function(P){P[P.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",P[P.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",P[P.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",P[P.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(X||(e.TrackedRangeStickiness=X={}));var G;(function(P){P[P.None=0]="None",P[P.Same=1]="Same",P[P.Indent=2]="Indent",P[P.DeepIndent=3]="DeepIndent"})(G||(e.WrappingIndent=G={}))}),define(oe[599],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketPairWithMinIndentationInfo=e.BracketPairInfo=e.BracketInfo=void 0;class c{constructor(y,f,_,b){this.range=y,this.nestingLevel=f,this.nestingLevelOfEqualBracketType=_,this.isInvalid=b}}e.BracketInfo=c;class k{constructor(y,f,_,b,p,n){this.range=y,this.openingBracketRange=f,this.closingBracketRange=_,this.nestingLevel=b,this.nestingLevelOfEqualBracketType=p,this.bracketPairNode=n}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}e.BracketPairInfo=k;class E extends k{constructor(y,f,_,b,p,n,s){super(y,f,_,b,p,n),this.minVisibleColumnIndentation=s}}e.BracketPairWithMinIndentationInfo=E}),define(oe[600],re([1,0,6,2,599,201,336,105,335,148,247,13,334]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketPairsTree=void 0;class t extends k.Disposable{didLanguageChange(r){return this.brackets.didLanguageChange(r)}constructor(r,d){if(super(),this.textModel=r,this.getLanguageConfiguration=d,this.didChangeEmitter=new c.Emitter,this.denseKeyProvider=new b.DenseKeyProvider,this.brackets=new y.LanguageAgnosticBracketTokens(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],r.tokenization.hasTokens)r.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const m=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),h=new p.FastTokenizer(this.textModel.getValue(),m);this.initialAstWithoutTokens=(0,_.parseDocument)(h,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){const r=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,r||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:r}){const d=r.map(m=>new L.TextEditInfo((0,f.toLength)(m.fromLineNumber-1,0),(0,f.toLength)(m.toLineNumber,0),(0,f.toLength)(m.toLineNumber-m.fromLineNumber+1,0)));this.handleEdits(d,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(r){const d=L.TextEditInfo.fromModelContentChanges(r.changes);this.handleEdits(d,!1)}handleEdits(r,d){const m=(0,s.combineTextEditInfos)(this.queuedTextEdits,r);this.queuedTextEdits=m,this.initialAstWithoutTokens&&!d&&(this.queuedTextEditsForInitialAstWithoutTokens=(0,s.combineTextEditInfos)(this.queuedTextEditsForInitialAstWithoutTokens,r))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(r,d,m){const v=d,C=new p.TextBufferTokenizer(this.textModel,this.brackets);return(0,_.parseDocument)(C,r,v,m)}getBracketsInRange(r,d){this.flushQueue();const m=(0,f.toLength)(r.startLineNumber-1,r.startColumn-1),h=(0,f.toLength)(r.endLineNumber-1,r.endColumn-1);return new n.CallbackIterable(v=>{const C=this.initialAstWithoutTokens||this.astWithTokens;g(C,f.lengthZero,C.length,m,h,v,0,0,new Map,d)})}getBracketPairsInRange(r,d){this.flushQueue();const m=(0,f.positionToLength)(r.getStartPosition()),h=(0,f.positionToLength)(r.getEndPosition());return new n.CallbackIterable(v=>{const C=this.initialAstWithoutTokens||this.astWithTokens,w=new u(v,d,this.textModel);l(C,f.lengthZero,C.length,m,h,w,0,new Map)})}getFirstBracketAfter(r){this.flushQueue();const d=this.initialAstWithoutTokens||this.astWithTokens;return o(d,f.lengthZero,d.length,(0,f.positionToLength)(r))}getFirstBracketBefore(r){this.flushQueue();const d=this.initialAstWithoutTokens||this.astWithTokens;return i(d,f.lengthZero,d.length,(0,f.positionToLength)(r))}}e.BracketPairsTree=t;function i(a,r,d,m){if(a.kind===4||a.kind===2){const h=[];for(const v of a.children)d=(0,f.lengthAdd)(r,v.length),h.push({nodeOffsetStart:r,nodeOffsetEnd:d}),r=d;for(let v=h.length-1;v>=0;v--){const{nodeOffsetStart:C,nodeOffsetEnd:w}=h[v];if((0,f.lengthLessThan)(C,m)){const S=i(a.children[v],C,w,m);if(S)return S}}return null}else{if(a.kind===3)return null;if(a.kind===1){const h=(0,f.lengthsToRange)(r,d);return{bracketInfo:a.bracketInfo,range:h}}}return null}function o(a,r,d,m){if(a.kind===4||a.kind===2){for(const h of a.children){if(d=(0,f.lengthAdd)(r,h.length),(0,f.lengthLessThan)(m,d)){const v=o(h,r,d,m);if(v)return v}r=d}return null}else{if(a.kind===3)return null;if(a.kind===1){const h=(0,f.lengthsToRange)(r,d);return{bracketInfo:a.bracketInfo,range:h}}}return null}function g(a,r,d,m,h,v,C,w,S,D,I=!1){if(C>200)return!0;e:for(;;)switch(a.kind){case 4:{const T=a.childrenLength;for(let M=0;M<T;M++){const A=a.getChild(M);if(A){if(d=(0,f.lengthAdd)(r,A.length),(0,f.lengthLessThanEqual)(r,h)&&(0,f.lengthGreaterThanEqual)(d,m)){if((0,f.lengthGreaterThanEqual)(d,h)){a=A;continue e}if(!g(A,r,d,m,h,v,C,0,S,D))return!1}r=d}}return!0}case 2:{const T=!D||!a.closingBracket||a.closingBracket.bracketInfo.closesColorized(a.openingBracket.bracketInfo);let M=0;if(S){let R=S.get(a.openingBracket.text);R===void 0&&(R=0),M=R,T&&(R++,S.set(a.openingBracket.text,R))}const A=a.childrenLength;for(let R=0;R<A;R++){const N=a.getChild(R);if(N){if(d=(0,f.lengthAdd)(r,N.length),(0,f.lengthLessThanEqual)(r,h)&&(0,f.lengthGreaterThanEqual)(d,m)){if((0,f.lengthGreaterThanEqual)(d,h)&&N.kind!==1){a=N,T?(C++,w=M+1):w=M;continue e}if((T||N.kind!==1||!a.closingBracket)&&!g(N,r,d,m,h,v,T?C+1:C,T?M+1:M,S,D,!a.closingBracket))return!1}r=d}}return S?.set(a.openingBracket.text,M),!0}case 3:{const T=(0,f.lengthsToRange)(r,d);return v(new E.BracketInfo(T,C-1,0,!0))}case 1:{const T=(0,f.lengthsToRange)(r,d);return v(new E.BracketInfo(T,C-1,w-1,I))}case 0:return!0}}class u{constructor(r,d,m){this.push=r,this.includeMinIndentation=d,this.textModel=m}}function l(a,r,d,m,h,v,C,w){if(C>200)return!0;let S=!0;if(a.kind===2){let D=0;if(w){let M=w.get(a.openingBracket.text);M===void 0&&(M=0),D=M,M++,w.set(a.openingBracket.text,M)}const I=(0,f.lengthAdd)(r,a.openingBracket.length);let T=-1;if(v.includeMinIndentation&&(T=a.computeMinIndentation(r,v.textModel)),S=v.push(new E.BracketPairWithMinIndentationInfo((0,f.lengthsToRange)(r,d),(0,f.lengthsToRange)(r,I),a.closingBracket?(0,f.lengthsToRange)((0,f.lengthAdd)(I,a.child?.length||f.lengthZero),d):void 0,C,D,a,T)),r=I,S&&a.child){const M=a.child;if(d=(0,f.lengthAdd)(r,M.length),(0,f.lengthLessThanEqual)(r,h)&&(0,f.lengthGreaterThanEqual)(d,m)&&(S=l(M,r,d,m,h,v,C+1,w),!S))return!1}w?.set(a.openingBracket.text,D)}else{let D=r;for(const I of a.children){const T=D;if(D=(0,f.lengthAdd)(D,I.length),(0,f.lengthLessThanEqual)(T,h)&&(0,f.lengthLessThanEqual)(m,D)&&(S=l(I,T,D,m,h,v,C,w),!S))return!1}}return S}}),define(oe[601],re([1,0,13,6,2,4,172,200,600]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketPairsTextModelPart=void 0;class b extends E.Disposable{get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(o,g){super(),this.textModel=o,this.languageConfigurationService=g,this.bracketPairsTree=this._register(new E.MutableDisposable),this.onDidChangeEmitter=new k.Emitter,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(o){(!o.languageId||this.bracketPairsTree.value?.object.didLanguageChange(o.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(o){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(o){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(o){this.bracketPairsTree.value?.object.handleContentChanged(o)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(o){this.bracketPairsTree.value?.object.handleDidChangeTokens(o)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const o=new E.DisposableStore;this.bracketPairsTree.value=p(o.add(new _.BracketPairsTree(this.textModel,g=>this.languageConfigurationService.getLanguageConfiguration(g))),o),o.add(this.bracketPairsTree.value.object.onDidChange(g=>this.onDidChangeEmitter.fire(g))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(o){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(o,!1)||c.CallbackIterable.empty}getBracketPairsInRangeWithMinIndentation(o){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(o,!0)||c.CallbackIterable.empty}getBracketsInRange(o,g=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(o,g)||c.CallbackIterable.empty}findMatchingBracketUp(o,g,u){const l=this.textModel.validatePosition(g),a=this.textModel.getLanguageIdAtPosition(l.lineNumber,l.column);if(this.canBuildAST){const r=this.languageConfigurationService.getLanguageConfiguration(a).bracketsNew.getClosingBracketInfo(o);if(!r)return null;const d=this.getBracketPairsInRange(L.Range.fromPositions(g,g)).findLast(m=>r.closes(m.openingBracketInfo));return d?d.openingBracketRange:null}else{const r=o.toLowerCase(),d=this.languageConfigurationService.getLanguageConfiguration(a).brackets;if(!d)return null;const m=d.textIsBracket[r];return m?t(this._findMatchingBracketUp(m,l,n(u))):null}}matchBracket(o,g){if(this.canBuildAST){const u=this.getBracketPairsInRange(L.Range.fromPositions(o,o)).filter(l=>l.closingBracketRange!==void 0&&(l.openingBracketRange.containsPosition(o)||l.closingBracketRange.containsPosition(o))).findLastMaxBy((0,c.compareBy)(l=>l.openingBracketRange.containsPosition(o)?l.openingBracketRange:l.closingBracketRange,L.Range.compareRangesUsingStarts));return u?[u.openingBracketRange,u.closingBracketRange]:null}else{const u=n(g);return this._matchBracket(this.textModel.validatePosition(o),u)}}_establishBracketSearchOffsets(o,g,u,l){const a=g.getCount(),r=g.getLanguageId(l);let d=Math.max(0,o.column-1-u.maxBracketLength);for(let h=l-1;h>=0;h--){const v=g.getEndOffset(h);if(v<=d)break;if((0,y.ignoreBracketsInToken)(g.getStandardTokenType(h))||g.getLanguageId(h)!==r){d=v;break}}let m=Math.min(g.getLineContent().length,o.column-1+u.maxBracketLength);for(let h=l+1;h<a;h++){const v=g.getStartOffset(h);if(v>=m)break;if((0,y.ignoreBracketsInToken)(g.getStandardTokenType(h))||g.getLanguageId(h)!==r){m=v;break}}return{searchStartOffset:d,searchEndOffset:m}}_matchBracket(o,g){const u=o.lineNumber,l=this.textModel.tokenization.getLineTokens(u),a=this.textModel.getLineContent(u),r=l.findTokenIndexAtOffset(o.column-1);if(r<0)return null;const d=this.languageConfigurationService.getLanguageConfiguration(l.getLanguageId(r)).brackets;if(d&&!(0,y.ignoreBracketsInToken)(l.getStandardTokenType(r))){let{searchStartOffset:m,searchEndOffset:h}=this._establishBracketSearchOffsets(o,l,d,r),v=null;for(;;){const C=f.BracketsUtils.findNextBracketInRange(d.forwardRegex,u,a,m,h);if(!C)break;if(C.startColumn<=o.column&&o.column<=C.endColumn){const w=a.substring(C.startColumn-1,C.endColumn-1).toLowerCase(),S=this._matchFoundBracket(C,d.textIsBracket[w],d.textIsOpenBracket[w],g);if(S){if(S instanceof s)return null;v=S}}m=C.endColumn-1}if(v)return v}if(r>0&&l.getStartOffset(r)===o.column-1){const m=r-1,h=this.languageConfigurationService.getLanguageConfiguration(l.getLanguageId(m)).brackets;if(h&&!(0,y.ignoreBracketsInToken)(l.getStandardTokenType(m))){const{searchStartOffset:v,searchEndOffset:C}=this._establishBracketSearchOffsets(o,l,h,m),w=f.BracketsUtils.findPrevBracketInRange(h.reversedRegex,u,a,v,C);if(w&&w.startColumn<=o.column&&o.column<=w.endColumn){const S=a.substring(w.startColumn-1,w.endColumn-1).toLowerCase(),D=this._matchFoundBracket(w,h.textIsBracket[S],h.textIsOpenBracket[S],g);if(D)return D instanceof s?null:D}}}return null}_matchFoundBracket(o,g,u,l){if(!g)return null;const a=u?this._findMatchingBracketDown(g,o.getEndPosition(),l):this._findMatchingBracketUp(g,o.getStartPosition(),l);return a?a instanceof s?a:[o,a]:null}_findMatchingBracketUp(o,g,u){const l=o.languageId,a=o.reversedRegex;let r=-1,d=0;const m=(h,v,C,w)=>{for(;;){if(u&&++d%100===0&&!u())return s.INSTANCE;const S=f.BracketsUtils.findPrevBracketInRange(a,h,v,C,w);if(!S)break;const D=v.substring(S.startColumn-1,S.endColumn-1).toLowerCase();if(o.isOpen(D)?r++:o.isClose(D)&&r--,r===0)return S;w=S.startColumn-1}return null};for(let h=g.lineNumber;h>=1;h--){const v=this.textModel.tokenization.getLineTokens(h),C=v.getCount(),w=this.textModel.getLineContent(h);let S=C-1,D=w.length,I=w.length;h===g.lineNumber&&(S=v.findTokenIndexAtOffset(g.column-1),D=g.column-1,I=g.column-1);let T=!0;for(;S>=0;S--){const M=v.getLanguageId(S)===l&&!(0,y.ignoreBracketsInToken)(v.getStandardTokenType(S));if(M)T?D=v.getStartOffset(S):(D=v.getStartOffset(S),I=v.getEndOffset(S));else if(T&&D!==I){const A=m(h,w,D,I);if(A)return A}T=M}if(T&&D!==I){const M=m(h,w,D,I);if(M)return M}}return null}_findMatchingBracketDown(o,g,u){const l=o.languageId,a=o.forwardRegex;let r=1,d=0;const m=(v,C,w,S)=>{for(;;){if(u&&++d%100===0&&!u())return s.INSTANCE;const D=f.BracketsUtils.findNextBracketInRange(a,v,C,w,S);if(!D)break;const I=C.substring(D.startColumn-1,D.endColumn-1).toLowerCase();if(o.isOpen(I)?r++:o.isClose(I)&&r--,r===0)return D;w=D.endColumn-1}return null},h=this.textModel.getLineCount();for(let v=g.lineNumber;v<=h;v++){const C=this.textModel.tokenization.getLineTokens(v),w=C.getCount(),S=this.textModel.getLineContent(v);let D=0,I=0,T=0;v===g.lineNumber&&(D=C.findTokenIndexAtOffset(g.column-1),I=g.column-1,T=g.column-1);let M=!0;for(;D<w;D++){const A=C.getLanguageId(D)===l&&!(0,y.ignoreBracketsInToken)(C.getStandardTokenType(D));if(A)M||(I=C.getStartOffset(D)),T=C.getEndOffset(D);else if(M&&I!==T){const R=m(v,S,I,T);if(R)return R}M=A}if(M&&I!==T){const A=m(v,S,I,T);if(A)return A}}return null}findPrevBracket(o){const g=this.textModel.validatePosition(o);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(g)||null;let u=null,l=null,a=null;for(let r=g.lineNumber;r>=1;r--){const d=this.textModel.tokenization.getLineTokens(r),m=d.getCount(),h=this.textModel.getLineContent(r);let v=m-1,C=h.length,w=h.length;if(r===g.lineNumber){v=d.findTokenIndexAtOffset(g.column-1),C=g.column-1,w=g.column-1;const D=d.getLanguageId(v);u!==D&&(u=D,l=this.languageConfigurationService.getLanguageConfiguration(u).brackets,a=this.languageConfigurationService.getLanguageConfiguration(u).bracketsNew)}let S=!0;for(;v>=0;v--){const D=d.getLanguageId(v);if(u!==D){if(l&&a&&S&&C!==w){const T=f.BracketsUtils.findPrevBracketInRange(l.reversedRegex,r,h,C,w);if(T)return this._toFoundBracket(a,T);S=!1}u=D,l=this.languageConfigurationService.getLanguageConfiguration(u).brackets,a=this.languageConfigurationService.getLanguageConfiguration(u).bracketsNew}const I=!!l&&!(0,y.ignoreBracketsInToken)(d.getStandardTokenType(v));if(I)S?C=d.getStartOffset(v):(C=d.getStartOffset(v),w=d.getEndOffset(v));else if(a&&l&&S&&C!==w){const T=f.BracketsUtils.findPrevBracketInRange(l.reversedRegex,r,h,C,w);if(T)return this._toFoundBracket(a,T)}S=I}if(a&&l&&S&&C!==w){const D=f.BracketsUtils.findPrevBracketInRange(l.reversedRegex,r,h,C,w);if(D)return this._toFoundBracket(a,D)}}return null}findNextBracket(o){const g=this.textModel.validatePosition(o);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(g)||null;const u=this.textModel.getLineCount();let l=null,a=null,r=null;for(let d=g.lineNumber;d<=u;d++){const m=this.textModel.tokenization.getLineTokens(d),h=m.getCount(),v=this.textModel.getLineContent(d);let C=0,w=0,S=0;if(d===g.lineNumber){C=m.findTokenIndexAtOffset(g.column-1),w=g.column-1,S=g.column-1;const I=m.getLanguageId(C);l!==I&&(l=I,a=this.languageConfigurationService.getLanguageConfiguration(l).brackets,r=this.languageConfigurationService.getLanguageConfiguration(l).bracketsNew)}let D=!0;for(;C<h;C++){const I=m.getLanguageId(C);if(l!==I){if(r&&a&&D&&w!==S){const M=f.BracketsUtils.findNextBracketInRange(a.forwardRegex,d,v,w,S);if(M)return this._toFoundBracket(r,M);D=!1}l=I,a=this.languageConfigurationService.getLanguageConfiguration(l).brackets,r=this.languageConfigurationService.getLanguageConfiguration(l).bracketsNew}const T=!!a&&!(0,y.ignoreBracketsInToken)(m.getStandardTokenType(C));if(T)D||(w=m.getStartOffset(C)),S=m.getEndOffset(C);else if(r&&a&&D&&w!==S){const M=f.BracketsUtils.findNextBracketInRange(a.forwardRegex,d,v,w,S);if(M)return this._toFoundBracket(r,M)}D=T}if(r&&a&&D&&w!==S){const I=f.BracketsUtils.findNextBracketInRange(a.forwardRegex,d,v,w,S);if(I)return this._toFoundBracket(r,I)}}return null}findEnclosingBrackets(o,g){const u=this.textModel.validatePosition(o);if(this.canBuildAST){const S=L.Range.fromPositions(u),D=this.getBracketPairsInRange(L.Range.fromPositions(u,u)).findLast(I=>I.closingBracketRange!==void 0&&I.range.strictContainsRange(S));return D?[D.openingBracketRange,D.closingBracketRange]:null}const l=n(g),a=this.textModel.getLineCount(),r=new Map;let d=[];const m=(S,D)=>{if(!r.has(S)){const I=[];for(let T=0,M=D?D.brackets.length:0;T<M;T++)I[T]=0;r.set(S,I)}d=r.get(S)};let h=0;const v=(S,D,I,T,M)=>{for(;;){if(l&&++h%100===0&&!l())return s.INSTANCE;const A=f.BracketsUtils.findNextBracketInRange(S.forwardRegex,D,I,T,M);if(!A)break;const R=I.substring(A.startColumn-1,A.endColumn-1).toLowerCase(),N=S.textIsBracket[R];if(N&&(N.isOpen(R)?d[N.index]++:N.isClose(R)&&d[N.index]--,d[N.index]===-1))return this._matchFoundBracket(A,N,!1,l);T=A.endColumn-1}return null};let C=null,w=null;for(let S=u.lineNumber;S<=a;S++){const D=this.textModel.tokenization.getLineTokens(S),I=D.getCount(),T=this.textModel.getLineContent(S);let M=0,A=0,R=0;if(S===u.lineNumber){M=D.findTokenIndexAtOffset(u.column-1),A=u.column-1,R=u.column-1;const O=D.getLanguageId(M);C!==O&&(C=O,w=this.languageConfigurationService.getLanguageConfiguration(C).brackets,m(C,w))}let N=!0;for(;M<I;M++){const O=D.getLanguageId(M);if(C!==O){if(w&&N&&A!==R){const F=v(w,S,T,A,R);if(F)return t(F);N=!1}C=O,w=this.languageConfigurationService.getLanguageConfiguration(C).brackets,m(C,w)}const x=!!w&&!(0,y.ignoreBracketsInToken)(D.getStandardTokenType(M));if(x)N||(A=D.getStartOffset(M)),R=D.getEndOffset(M);else if(w&&N&&A!==R){const F=v(w,S,T,A,R);if(F)return t(F)}N=x}if(w&&N&&A!==R){const O=v(w,S,T,A,R);if(O)return t(O)}}return null}_toFoundBracket(o,g){if(!g)return null;let u=this.textModel.getValueInRange(g);u=u.toLowerCase();const l=o.getBracketInfo(u);return l?{range:g,bracketInfo:l}:null}}e.BracketPairsTextModelPart=b;function p(i,o){return{object:i,dispose:()=>o?.dispose()}}function n(i){if(typeof i>"u")return()=>!0;{const o=Date.now();return()=>Date.now()-o<=i}}class s{static{this.INSTANCE=new s}constructor(){this._searchCanceledBrand=void 0}}function t(i){return i instanceof s?null:i}}),define(oe[131],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InternalModelContentChangeEvent=e.ModelInjectedTextChangedEvent=e.ModelRawContentChangedEvent=e.ModelRawEOLChanged=e.ModelRawLinesInserted=e.ModelRawLinesDeleted=e.ModelRawLineChanged=e.LineInjectedText=e.ModelRawFlush=void 0;class c{constructor(){this.changeType=1}}e.ModelRawFlush=c;class k{static applyInjectedText(s,t){if(!t||t.length===0)return s;let i="",o=0;for(const g of t)i+=s.substring(o,g.column-1),o=g.column-1,i+=g.options.content;return i+=s.substring(o),i}static fromDecorations(s){const t=[];for(const i of s)i.options.before&&i.options.before.content.length>0&&t.push(new k(i.ownerId,i.range.startLineNumber,i.range.startColumn,i.options.before,0)),i.options.after&&i.options.after.content.length>0&&t.push(new k(i.ownerId,i.range.endLineNumber,i.range.endColumn,i.options.after,1));return t.sort((i,o)=>i.lineNumber===o.lineNumber?i.column===o.column?i.order-o.order:i.column-o.column:i.lineNumber-o.lineNumber),t}constructor(s,t,i,o,g){this.ownerId=s,this.lineNumber=t,this.column=i,this.options=o,this.order=g}}e.LineInjectedText=k;class E{constructor(s,t,i){this.changeType=2,this.lineNumber=s,this.detail=t,this.injectedText=i}}e.ModelRawLineChanged=E;class L{constructor(s,t){this.changeType=3,this.fromLineNumber=s,this.toLineNumber=t}}e.ModelRawLinesDeleted=L;class y{constructor(s,t,i,o){this.changeType=4,this.injectedTexts=o,this.fromLineNumber=s,this.toLineNumber=t,this.detail=i}}e.ModelRawLinesInserted=y;class f{constructor(){this.changeType=5}}e.ModelRawEOLChanged=f;class _{constructor(s,t,i,o){this.changes=s,this.versionId=t,this.isUndoing=i,this.isRedoing=o,this.resultingSelection=null}containsEvent(s){for(let t=0,i=this.changes.length;t<i;t++)if(this.changes[t].changeType===s)return!0;return!1}static merge(s,t){const i=[].concat(s.changes).concat(t.changes),o=t.versionId,g=s.isUndoing||t.isUndoing,u=s.isRedoing||t.isRedoing;return new _(i,o,g,u)}}e.ModelRawContentChangedEvent=_;class b{constructor(s){this.changes=s}}e.ModelInjectedTextChangedEvent=b;class p{constructor(s,t){this.rawContentChangedEvent=s,this.contentChangedEvent=t}merge(s){const t=_.merge(this.rawContentChangedEvent,s.rawContentChangedEvent),i=p._mergeChangeEvents(this.contentChangedEvent,s.contentChangedEvent);return new p(t,i)}static _mergeChangeEvents(s,t){const i=[].concat(s.changes).concat(t.changes),o=t.eol,g=t.versionId,u=s.isUndoing||t.isUndoing,l=s.isRedoing||t.isRedoing,a=s.isFlush||t.isFlush,r=s.isEolChange&&t.isEolChange;return{changes:i,eol:o,isEolChange:r,versionId:g,isUndoing:u,isRedoing:l,isFlush:a}}}e.InternalModelContentChangeEvent=p}),define(oe[602],re([1,0,102,11,19,75,114,341,131]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DOMLineBreaksComputerFactory=void 0;const b=(0,c.createTrustedTypesPolicy)("domLineBreaksComputer",{createHTML:g=>g});class p{static create(u){return new p(new WeakRef(u))}constructor(u){this.targetWindow=u}createLineBreaksComputer(u,l,a,r,d){const m=[],h=[];return{addRequest:(v,C,w)=>{m.push(v),h.push(C)},finalize:()=>n((0,E.assertIsDefined)(this.targetWindow.deref()),m,u,l,a,r,d,h)}}}e.DOMLineBreaksComputerFactory=p;function n(g,u,l,a,r,d,m,h){function v(H){const K=h[H];if(K){const U=_.LineInjectedText.applyInjectedText(u[H],K),Y=K.map(X=>X.options),Q=K.map(X=>X.column-1);return new f.ModelLineProjectionData(Q,Y,[U.length],[],0)}else return null}if(r===-1){const H=[];for(let K=0,U=u.length;K<U;K++)H[K]=v(K);return H}const C=Math.round(r*l.typicalHalfwidthCharacterWidth),S=Math.round(a*(d===3?2:d===2?1:0)),D=Math.ceil(l.spaceWidth*S),I=document.createElement("div");(0,L.applyFontInfo)(I,l);const T=new y.StringBuilder(1e4),M=[],A=[],R=[],N=[],O=[];for(let H=0;H<u.length;H++){const K=_.LineInjectedText.applyInjectedText(u[H],h[H]);let U=0,Y=0,Q=C;if(d!==0)if(U=k.firstNonWhitespaceIndex(K),U===-1)U=0;else{for(let te=0;te<U;te++){const se=K.charCodeAt(te)===9?a-Y%a:1;Y+=se}const P=Math.ceil(l.spaceWidth*Y);P+l.typicalFullwidthCharacterWidth>C?(U=0,Y=0):Q=C-P}const X=K.substr(U),G=s(X,Y,a,Q,T,D);M[H]=U,A[H]=Y,R[H]=X,N[H]=G[0],O[H]=G[1]}const x=T.build(),F=b?.createHTML(x)??x;I.innerHTML=F,I.style.position="absolute",I.style.top="10000",m==="keepAll"?(I.style.wordBreak="keep-all",I.style.overflowWrap="anywhere"):(I.style.wordBreak="inherit",I.style.overflowWrap="break-word"),g.document.body.appendChild(I);const W=document.createRange(),z=Array.prototype.slice.call(I.children,0),q=[];for(let H=0;H<u.length;H++){const K=z[H],U=t(W,K,R[H],N[H]);if(U===null){q[H]=v(H);continue}const Y=M[H],Q=A[H]+S,X=O[H],G=[];for(let ue=0,ge=U.length;ue<ge;ue++)G[ue]=X[U[ue]];if(Y!==0)for(let ue=0,ge=U.length;ue<ge;ue++)U[ue]+=Y;let P,te;const se=h[H];se?(P=se.map(ue=>ue.options),te=se.map(ue=>ue.column-1)):(P=null,te=null),q[H]=new f.ModelLineProjectionData(te,P,U,G,Q)}return I.remove(),q}function s(g,u,l,a,r,d){if(d!==0){const D=String(d);r.appendString('<div style="text-indent: -'),r.appendString(D),r.appendString("px; padding-left: "),r.appendString(D),r.appendString("px; box-sizing: border-box; width:")}else r.appendString('<div style="width:');r.appendString(String(a)),r.appendString('px;">');const m=g.length;let h=u,v=0;const C=[],w=[];let S=0<m?g.charCodeAt(0):0;r.appendString("<span>");for(let D=0;D<m;D++){D!==0&&D%16384===0&&r.appendString("</span><span>"),C[D]=v,w[D]=h;const I=S;S=D+1<m?g.charCodeAt(D+1):0;let T=1,M=1;switch(I){case 9:T=l-h%l,M=T;for(let A=1;A<=T;A++)A<T?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 32:S===32?r.appendCharCode(160):r.appendASCIICharCode(32);break;case 60:r.appendString("&lt;");break;case 62:r.appendString("&gt;");break;case 38:r.appendString("&amp;");break;case 0:r.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:r.appendCharCode(65533);break;default:k.isFullWidthCharacter(I)&&M++,I<32?r.appendCharCode(9216+I):r.appendCharCode(I)}v+=T,h+=M}return r.appendString("</span>"),C[g.length]=v,w[g.length]=h,r.appendString("</div>"),[C,w]}function t(g,u,l,a){if(l.length<=1)return null;const r=Array.prototype.slice.call(u.children,0),d=[];try{i(g,r,a,0,null,l.length-1,null,d)}catch(m){return console.log(m),null}return d.length===0?null:(d.push(l.length),d)}function i(g,u,l,a,r,d,m,h){if(a===d||(r=r||o(g,u,l[a],l[a+1]),m=m||o(g,u,l[d],l[d+1]),Math.abs(r[0].top-m[0].top)<=.1))return;if(a+1===d){h.push(d);return}const v=a+(d-a)/2|0,C=o(g,u,l[v],l[v+1]);i(g,u,l,a,r,v,C,h),i(g,u,l,v,C,d,m,h)}function o(g,u,l,a){return g.setStart(u[l/16384|0].firstChild,l%16384),g.setEnd(u[a/16384|0].firstChild,a%16384),g.getClientRects()}}),define(oe[250],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentGuideHorizontalLine=e.IndentGuide=e.HorizontalGuidesState=void 0;var c;(function(L){L[L.Disabled=0]="Disabled",L[L.EnabledForActive=1]="EnabledForActive",L[L.Enabled=2]="Enabled"})(c||(e.HorizontalGuidesState=c={}));class k{constructor(y,f,_,b,p,n){if(this.visibleColumn=y,this.column=f,this.className=_,this.horizontalLine=b,this.forWrappedLinesAfterColumn=p,this.forWrappedLinesBeforeOrAtColumn=n,y!==-1==(f!==-1))throw new Error}}e.IndentGuide=k;class E{constructor(y,f){this.top=y,this.endColumn=f}}e.IndentGuideHorizontalLine=E}),define(oe[344],re([1,0,67,11,93,4,338,248,250,8]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketPairGuidesClassNames=e.GuidesTextModelPart=void 0;class p extends y.TextModelPart{constructor(t,i){super(),this.textModel=t,this.languageConfigurationService=i}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return(0,f.computeIndentLevel)(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,i,o){this.assertNotDisposed();const g=this.textModel.getLineCount();if(t<1||t>g)throw new b.BugIndicatingError("Illegal value for lineNumber");const u=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,l=!!(u&&u.offSide);let a=-2,r=-1,d=-2,m=-1;const h=O=>{if(a!==-1&&(a===-2||a>O-1)){a=-1,r=-1;for(let x=O-2;x>=0;x--){const F=this._computeIndentLevel(x);if(F>=0){a=x,r=F;break}}}if(d===-2){d=-1,m=-1;for(let x=O;x<g;x++){const F=this._computeIndentLevel(x);if(F>=0){d=x,m=F;break}}}};let v=-2,C=-1,w=-2,S=-1;const D=O=>{if(v===-2){v=-1,C=-1;for(let x=O-2;x>=0;x--){const F=this._computeIndentLevel(x);if(F>=0){v=x,C=F;break}}}if(w!==-1&&(w===-2||w<O-1)){w=-1,S=-1;for(let x=O;x<g;x++){const F=this._computeIndentLevel(x);if(F>=0){w=x,S=F;break}}}};let I=0,T=!0,M=0,A=!0,R=0,N=0;for(let O=0;T||A;O++){const x=t-O,F=t+O;O>1&&(x<1||x<i)&&(T=!1),O>1&&(F>g||F>o)&&(A=!1),O>5e4&&(T=!1,A=!1);let W=-1;if(T&&x>=1){const q=this._computeIndentLevel(x-1);q>=0?(d=x-1,m=q,W=Math.ceil(q/this.textModel.getOptions().indentSize)):(h(x),W=this._getIndentLevelForWhitespaceLine(l,r,m))}let z=-1;if(A&&F<=g){const q=this._computeIndentLevel(F-1);q>=0?(v=F-1,C=q,z=Math.ceil(q/this.textModel.getOptions().indentSize)):(D(F),z=this._getIndentLevelForWhitespaceLine(l,C,S))}if(O===0){N=W;continue}if(O===1){if(F<=g&&z>=0&&N+1===z){T=!1,I=F,M=F,R=z;continue}if(x>=1&&W>=0&&W-1===N){A=!1,I=x,M=x,R=W;continue}if(I=t,M=t,R=N,R===0)return{startLineNumber:I,endLineNumber:M,indent:R}}T&&(W>=R?I=x:T=!1),A&&(z>=R?M=F:A=!1)}return{startLineNumber:I,endLineNumber:M,indent:R}}getLinesBracketGuides(t,i,o,g){const u=[];for(let h=t;h<=i;h++)u.push([]);const l=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new L.Range(t,1,i,this.textModel.getLineMaxColumn(i))).toArray();let r;if(o&&a.length>0){const h=(t<=o.lineNumber&&o.lineNumber<=i?a:this.textModel.bracketPairs.getBracketPairsInRange(L.Range.fromPositions(o)).toArray()).filter(v=>L.Range.strictContainsPosition(v.range,o));r=(0,c.findLast)(h,v=>l||v.range.startLineNumber!==v.range.endLineNumber)?.range}const d=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,m=new n;for(const h of a){if(!h.closingBracketRange)continue;const v=r&&h.range.equalsRange(r);if(!v&&!g.includeInactive)continue;const C=m.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,d)+(g.highlightActive&&v?" "+m.activeClassName:""),w=h.openingBracketRange.getStartPosition(),S=h.closingBracketRange.getStartPosition(),D=g.horizontalGuides===_.HorizontalGuidesState.Enabled||g.horizontalGuides===_.HorizontalGuidesState.EnabledForActive&&v;if(h.range.startLineNumber===h.range.endLineNumber){l&&D&&u[h.range.startLineNumber-t].push(new _.IndentGuide(-1,h.openingBracketRange.getEndPosition().column,C,new _.IndentGuideHorizontalLine(!1,S.column),-1,-1));continue}const I=this.getVisibleColumnFromPosition(S),T=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),M=Math.min(T,I,h.minVisibleColumnIndentation+1);let A=!1;k.firstNonWhitespaceIndex(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(A=!0);const O=Math.max(w.lineNumber,t),x=Math.min(S.lineNumber,i),F=A?1:0;for(let W=O;W<x+F;W++)u[W-t].push(new _.IndentGuide(M,-1,C,null,W===w.lineNumber?w.column:-1,W===S.lineNumber?S.column:-1));D&&(w.lineNumber>=t&&T>M&&u[w.lineNumber-t].push(new _.IndentGuide(M,-1,C,new _.IndentGuideHorizontalLine(!1,w.column),-1,-1)),S.lineNumber<=i&&I>M&&u[S.lineNumber-t].push(new _.IndentGuide(M,-1,C,new _.IndentGuideHorizontalLine(!A,S.column),-1,-1)))}for(const h of u)h.sort((v,C)=>v.visibleColumn-C.visibleColumn);return u}getVisibleColumnFromPosition(t){return E.CursorColumns.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,i){this.assertNotDisposed();const o=this.textModel.getLineCount();if(t<1||t>o)throw new Error("Illegal value for startLineNumber");if(i<1||i>o)throw new Error("Illegal value for endLineNumber");const g=this.textModel.getOptions(),u=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,l=!!(u&&u.offSide),a=new Array(i-t+1);let r=-2,d=-1,m=-2,h=-1;for(let v=t;v<=i;v++){const C=v-t,w=this._computeIndentLevel(v-1);if(w>=0){r=v-1,d=w,a[C]=Math.ceil(w/g.indentSize);continue}if(r===-2){r=-1,d=-1;for(let S=v-2;S>=0;S--){const D=this._computeIndentLevel(S);if(D>=0){r=S,d=D;break}}}if(m!==-1&&(m===-2||m<v-1)){m=-1,h=-1;for(let S=v;S<o;S++){const D=this._computeIndentLevel(S);if(D>=0){m=S,h=D;break}}}a[C]=this._getIndentLevelForWhitespaceLine(l,d,h)}return a}_getIndentLevelForWhitespaceLine(t,i,o){const g=this.textModel.getOptions();return i===-1||o===-1?0:i<o?1+Math.floor(i/g.indentSize):i===o||t?Math.ceil(o/g.indentSize):1+Math.floor(o/g.indentSize)}}e.GuidesTextModelPart=p;class n{constructor(){this.activeClassName="indent-active"}getInlineClassName(t,i,o){return this.getInlineClassNameOfLevel(o?i:t)}getInlineClassNameOfLevel(t){return`bracket-indent-guide lvl-${t%30}`}}e.BracketPairGuidesClassNames=n}),define(oe[603],re([1,0,6,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenizationRegistry=void 0;class E{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new c.Emitter,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(f){this._onDidChange.fire({changedLanguages:f,changedColorMap:!1})}register(f,_){return this._tokenizationSupports.set(f,_),this.handleChange([f]),(0,k.toDisposable)(()=>{this._tokenizationSupports.get(f)===_&&(this._tokenizationSupports.delete(f),this.handleChange([f]))})}get(f){return this._tokenizationSupports.get(f)||null}registerFactory(f,_){this._factories.get(f)?.dispose();const b=new L(this,f,_);return this._factories.set(f,b),(0,k.toDisposable)(()=>{const p=this._factories.get(f);!p||p!==b||(this._factories.delete(f),p.dispose())})}async getOrCreate(f){const _=this.get(f);if(_)return _;const b=this._factories.get(f);return!b||b.isResolved?null:(await b.resolve(),this.get(f))}isResolved(f){if(this.get(f))return!0;const b=this._factories.get(f);return!!(!b||b.isResolved)}setColorMap(f){this._colorMap=f,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}e.TokenizationRegistry=E;class L extends k.Disposable{get isResolved(){return this._isResolved}constructor(f,_,b){super(),this._registry=f,this._languageId=_,this._factory=b,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const f=await this._factory.tokenizationSupport;this._isResolved=!0,f&&!this._isDisposed&&this._register(this._registry.register(this._languageId,f))}}}),define(oe[604],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokens=void 0;class c{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(E,L){this._startLineNumber=E,this._tokens=L}getLineTokens(E){return this._tokens[E-this._startLineNumber]}appendLineTokens(E){this._tokens.push(E)}}e.ContiguousMultilineTokens=c}),define(oe[345],re([1,0,604]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousMultilineTokensBuilder=void 0;class k{constructor(){this._tokens=[]}add(L,y){if(this._tokens.length>0){const f=this._tokens[this._tokens.length-1];if(f.endLineNumber+1===L){f.appendLineTokens(y);return}}this._tokens.push(new c.ContiguousMultilineTokens(L,[y]))}finalize(){return this._tokens}}e.ContiguousMultilineTokensBuilder=k}),define(oe[94],re([1,0,147]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineTokens=void 0,e.getStandardTokenTypeAtPosition=L;class k{static{this.defaultTokenMetadata=(32768|2<<24)>>>0}static createEmpty(f,_){const b=k.defaultTokenMetadata,p=new Uint32Array(2);return p[0]=f.length,p[1]=b,new k(p,f,_)}static createFromTextAndMetadata(f,_){let b=0,p="";const n=new Array;for(const{text:s,metadata:t}of f)n.push(b+s.length,t),b+=s.length,p+=s;return new k(new Uint32Array(n),p,_)}constructor(f,_,b){this._lineTokensBrand=void 0,this._tokens=f,this._tokensCount=this._tokens.length>>>1,this._text=_,this.languageIdCodec=b}equals(f){return f instanceof k?this.slicedEquals(f,0,this._tokensCount):!1}slicedEquals(f,_,b){if(this._text!==f._text||this._tokensCount!==f._tokensCount)return!1;const p=_<<1,n=p+(b<<1);for(let s=p;s<n;s++)if(this._tokens[s]!==f._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(f){return f>0?this._tokens[f-1<<1]:0}getMetadata(f){return this._tokens[(f<<1)+1]}getLanguageId(f){const _=this._tokens[(f<<1)+1],b=c.TokenMetadata.getLanguageId(_);return this.languageIdCodec.decodeLanguageId(b)}getStandardTokenType(f){const _=this._tokens[(f<<1)+1];return c.TokenMetadata.getTokenType(_)}getForeground(f){const _=this._tokens[(f<<1)+1];return c.TokenMetadata.getForeground(_)}getClassName(f){const _=this._tokens[(f<<1)+1];return c.TokenMetadata.getClassNameFromMetadata(_)}getInlineStyle(f,_){const b=this._tokens[(f<<1)+1];return c.TokenMetadata.getInlineStyleFromMetadata(b,_)}getPresentation(f){const _=this._tokens[(f<<1)+1];return c.TokenMetadata.getPresentationFromMetadata(_)}getEndOffset(f){return this._tokens[f<<1]}findTokenIndexAtOffset(f){return k.findIndexInTokensArray(this._tokens,f)}inflate(){return this}sliceAndInflate(f,_,b){return new E(this,f,_,b)}static convertToEndOffset(f,_){const p=(f.length>>>1)-1;for(let n=0;n<p;n++)f[n<<1]=f[n+1<<1];f[p<<1]=_}static findIndexInTokensArray(f,_){if(f.length<=2)return 0;let b=0,p=(f.length>>>1)-1;for(;b<p;){const n=b+Math.floor((p-b)/2),s=f[n<<1];if(s===_)return n+1;s<_?b=n+1:s>_&&(p=n)}return b}withInserted(f){if(f.length===0)return this;let _=0,b=0,p="";const n=new Array;let s=0;for(;;){const t=_<this._tokensCount?this._tokens[_<<1]:-1,i=b<f.length?f[b]:null;if(t!==-1&&(i===null||t<=i.offset)){p+=this._text.substring(s,t);const o=this._tokens[(_<<1)+1];n.push(p.length,o),_++,s=t}else if(i){if(i.offset>s){p+=this._text.substring(s,i.offset);const o=this._tokens[(_<<1)+1];n.push(p.length,o),s=i.offset}p+=i.text,n.push(p.length,i.tokenMetadata),b++}else break}return new k(new Uint32Array(n),p,this.languageIdCodec)}getTokenText(f){const _=this.getStartOffset(f),b=this.getEndOffset(f);return this._text.substring(_,b)}forEach(f){const _=this.getCount();for(let b=0;b<_;b++)f(b)}}e.LineTokens=k;class E{constructor(f,_,b,p){this._source=f,this._startOffset=_,this._endOffset=b,this._deltaOffset=p,this._firstTokenIndex=f.findTokenIndexAtOffset(_),this.languageIdCodec=f.languageIdCodec,this._tokensCount=0;for(let n=this._firstTokenIndex,s=f.getCount();n<s&&!(f.getStartOffset(n)>=b);n++)this._tokensCount++}getMetadata(f){return this._source.getMetadata(this._firstTokenIndex+f)}getLanguageId(f){return this._source.getLanguageId(this._firstTokenIndex+f)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(f){return f instanceof E?this._startOffset===f._startOffset&&this._endOffset===f._endOffset&&this._deltaOffset===f._deltaOffset&&this._source.slicedEquals(f._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(f){return this._source.getStandardTokenType(this._firstTokenIndex+f)}getForeground(f){return this._source.getForeground(this._firstTokenIndex+f)}getEndOffset(f){const _=this._source.getEndOffset(this._firstTokenIndex+f);return Math.min(this._endOffset,_)-this._startOffset+this._deltaOffset}getClassName(f){return this._source.getClassName(this._firstTokenIndex+f)}getInlineStyle(f,_){return this._source.getInlineStyle(this._firstTokenIndex+f,_)}getPresentation(f){return this._source.getPresentation(this._firstTokenIndex+f)}findTokenIndexAtOffset(f){return this._source.findTokenIndexAtOffset(f+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(f){const _=this._firstTokenIndex+f,b=this._source.getStartOffset(_),p=this._source.getEndOffset(_);let n=this._source.getTokenText(_);return b<this._startOffset&&(n=n.substring(this._startOffset-b)),p>this._endOffset&&(n=n.substring(0,n.length-(p-this._endOffset))),n}forEach(f){for(let _=0;_<this.getCount();_++)f(_)}}function L(y,f){const _=f.lineNumber;if(!y.tokenization.isCheapToTokenize(_))return;y.tokenization.forceTokenization(_);const b=y.tokenization.getLineTokens(_),p=b.findTokenIndexAtOffset(f.column-1);return b.getStandardTokenType(p)}}),define(oe[251],re([1,0,11,172,94]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentationContextProcessor=e.ProcessedIndentRulesSupport=void 0,e.isLanguageDifferentFromLineStart=_;class L{constructor(p,n,s){this._indentRulesSupport=n,this._indentationLineProcessor=new f(p,s)}shouldIncrease(p,n){const s=this._indentationLineProcessor.getProcessedLine(p,n);return this._indentRulesSupport.shouldIncrease(s)}shouldDecrease(p,n){const s=this._indentationLineProcessor.getProcessedLine(p,n);return this._indentRulesSupport.shouldDecrease(s)}shouldIgnore(p,n){const s=this._indentationLineProcessor.getProcessedLine(p,n);return this._indentRulesSupport.shouldIgnore(s)}shouldIndentNextLine(p,n){const s=this._indentationLineProcessor.getProcessedLine(p,n);return this._indentRulesSupport.shouldIndentNextLine(s)}}e.ProcessedIndentRulesSupport=L;class y{constructor(p,n){this.model=p,this.indentationLineProcessor=new f(p,n)}getProcessedTokenContextAroundRange(p){const n=this._getProcessedTokensBeforeRange(p),s=this._getProcessedTokensAfterRange(p),t=this._getProcessedPreviousLineTokens(p);return{beforeRangeProcessedTokens:n,afterRangeProcessedTokens:s,previousLineProcessedTokens:t}}_getProcessedTokensBeforeRange(p){this.model.tokenization.forceTokenization(p.startLineNumber);const n=this.model.tokenization.getLineTokens(p.startLineNumber),s=(0,k.createScopedLineTokens)(n,p.startColumn-1);let t;if(_(this.model,p.getStartPosition())){const o=p.startColumn-1-s.firstCharOffset,g=s.firstCharOffset,u=g+o;t=n.sliceAndInflate(g,u,0)}else{const o=p.startColumn-1;t=n.sliceAndInflate(0,o,0)}return this.indentationLineProcessor.getProcessedTokens(t)}_getProcessedTokensAfterRange(p){const n=p.isEmpty()?p.getStartPosition():p.getEndPosition();this.model.tokenization.forceTokenization(n.lineNumber);const s=this.model.tokenization.getLineTokens(n.lineNumber),t=(0,k.createScopedLineTokens)(s,n.column-1),i=n.column-1-t.firstCharOffset,o=t.firstCharOffset+i,g=t.firstCharOffset+t.getLineLength(),u=s.sliceAndInflate(o,g,0);return this.indentationLineProcessor.getProcessedTokens(u)}_getProcessedPreviousLineTokens(p){const n=m=>{this.model.tokenization.forceTokenization(m);const h=this.model.tokenization.getLineTokens(m),v=this.model.getLineMaxColumn(m)-1;return(0,k.createScopedLineTokens)(h,v)};this.model.tokenization.forceTokenization(p.startLineNumber);const s=this.model.tokenization.getLineTokens(p.startLineNumber),t=(0,k.createScopedLineTokens)(s,p.startColumn-1),i=E.LineTokens.createEmpty("",t.languageIdCodec),o=p.startLineNumber-1;if(o===0||!(t.firstCharOffset===0))return i;const l=n(o);if(!(t.languageId===l.languageId))return i;const r=l.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(r)}}e.IndentationContextProcessor=y;class f{constructor(p,n){this.model=p,this.languageConfigurationService=n}getProcessedLine(p,n){const s=(o,g)=>{const u=c.getLeadingWhitespace(o);return g+o.substring(u.length)};this.model.tokenization.forceTokenization?.(p);const t=this.model.tokenization.getLineTokens(p);let i=this.getProcessedTokens(t).getLineContent();return n!==void 0&&(i=s(i,n)),i}getProcessedTokens(p){const n=u=>u===2||u===3||u===1,s=p.getLanguageId(0),i=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getBracketRegExp({global:!0}),o=[];return p.forEach(u=>{const l=p.getStandardTokenType(u);let a=p.getTokenText(u);n(l)&&(a=a.replace(i,""));const r=p.getMetadata(u);o.push({text:a,metadata:r})}),E.LineTokens.createFromTextAndMetadata(o,p.languageIdCodec)}}function _(b,p){b.tokenization.forceTokenization(p.lineNumber);const n=b.tokenization.getLineTokens(p.lineNumber),s=(0,k.createScopedLineTokens)(n,p.column-1),t=s.firstCharOffset===0,i=n.getLanguageId(0)===s.languageId;return!t&&!i}}),define(oe[252],re([1,0,11,130,251]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInheritIndentForLine=y,e.getGoodIndentForLine=f,e.getIndentForEnter=_,e.getIndentActionForType=b,e.getIndentMetadata=p;function L(s,t,i){const o=s.tokenization.getLanguageIdAtPosition(t,0);if(t>1){let g,u=-1;for(g=t-1;g>=1;g--){if(s.tokenization.getLanguageIdAtPosition(g,0)!==o)return u;const l=s.getLineContent(g);if(i.shouldIgnore(g)||/^\s+$/.test(l)||l===""){u=g;continue}return g}}return-1}function y(s,t,i,o=!0,g){if(s<4)return null;const u=g.getLanguageConfiguration(t.tokenization.getLanguageId()).indentRulesSupport;if(!u)return null;const l=new E.ProcessedIndentRulesSupport(t,u,g);if(i<=1)return{indentation:"",action:null};for(let r=i-1;r>0&&t.getLineContent(r)==="";r--)if(r===1)return{indentation:"",action:null};const a=L(t,i,l);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(l.shouldIncrease(a)||l.shouldIndentNextLine(a)){const r=t.getLineContent(a);return{indentation:c.getLeadingWhitespace(r),action:k.IndentAction.Indent,line:a}}else if(l.shouldDecrease(a)){const r=t.getLineContent(a);return{indentation:c.getLeadingWhitespace(r),action:null,line:a}}else{if(a===1)return{indentation:c.getLeadingWhitespace(t.getLineContent(a)),action:null,line:a};const r=a-1,d=u.getIndentMetadata(t.getLineContent(r));if(!(d&3)&&d&4){let m=0;for(let h=r-1;h>0;h--)if(!l.shouldIndentNextLine(h)){m=h;break}return{indentation:c.getLeadingWhitespace(t.getLineContent(m+1)),action:null,line:m+1}}if(o)return{indentation:c.getLeadingWhitespace(t.getLineContent(a)),action:null,line:a};for(let m=a;m>0;m--){if(l.shouldIncrease(m))return{indentation:c.getLeadingWhitespace(t.getLineContent(m)),action:k.IndentAction.Indent,line:m};if(l.shouldIndentNextLine(m)){let h=0;for(let v=m-1;v>0;v--)if(!l.shouldIndentNextLine(m)){h=v;break}return{indentation:c.getLeadingWhitespace(t.getLineContent(h+1)),action:null,line:h+1}}else if(l.shouldDecrease(m))return{indentation:c.getLeadingWhitespace(t.getLineContent(m)),action:null,line:m}}return{indentation:c.getLeadingWhitespace(t.getLineContent(1)),action:null,line:1}}}function f(s,t,i,o,g,u){if(s<4)return null;const l=u.getLanguageConfiguration(i);if(!l)return null;const a=u.getLanguageConfiguration(i).indentRulesSupport;if(!a)return null;const r=new E.ProcessedIndentRulesSupport(t,a,u),d=y(s,t,o,void 0,u);if(d){const m=d.line;if(m!==void 0){let h=!0;for(let v=m;v<o-1;v++)if(!/^\s*$/.test(t.getLineContent(v))){h=!1;break}if(h){const v=l.onEnter(s,"",t.getLineContent(m),"");if(v){let C=c.getLeadingWhitespace(t.getLineContent(m));return v.removeText&&(C=C.substring(0,C.length-v.removeText)),v.indentAction===k.IndentAction.Indent||v.indentAction===k.IndentAction.IndentOutdent?C=g.shiftIndent(C):v.indentAction===k.IndentAction.Outdent&&(C=g.unshiftIndent(C)),r.shouldDecrease(o)&&(C=g.unshiftIndent(C)),v.appendText&&(C+=v.appendText),c.getLeadingWhitespace(C)}}}return r.shouldDecrease(o)?d.action===k.IndentAction.Indent?d.indentation:g.unshiftIndent(d.indentation):d.action===k.IndentAction.Indent?g.shiftIndent(d.indentation):d.indentation}return null}function _(s,t,i,o,g){if(s<4)return null;const u=t.getLanguageIdAtPosition(i.startLineNumber,i.startColumn),l=g.getLanguageConfiguration(u).indentRulesSupport;if(!l)return null;t.tokenization.forceTokenization(i.startLineNumber);const r=new E.IndentationContextProcessor(t,g).getProcessedTokenContextAroundRange(i),d=r.afterRangeProcessedTokens,m=r.beforeRangeProcessedTokens,h=c.getLeadingWhitespace(m.getLineContent()),v=n(t,i.startLineNumber,m),C=(0,E.isLanguageDifferentFromLineStart)(t,i.getStartPosition()),w=t.getLineContent(i.startLineNumber),S=c.getLeadingWhitespace(w),D=y(s,v,i.startLineNumber+1,void 0,g);if(!D){const T=C?S:h;return{beforeEnter:T,afterEnter:T}}let I=C?S:D.indentation;return D.action===k.IndentAction.Indent&&(I=o.shiftIndent(I)),l.shouldDecrease(d.getLineContent())&&(I=o.unshiftIndent(I)),{beforeEnter:C?S:h,afterEnter:I}}function b(s,t,i,o,g,u){const l=s.autoIndent;if(l<4||(0,E.isLanguageDifferentFromLineStart)(t,i.getStartPosition()))return null;const r=t.getLanguageIdAtPosition(i.startLineNumber,i.startColumn),d=u.getLanguageConfiguration(r).indentRulesSupport;if(!d)return null;const h=new E.IndentationContextProcessor(t,u).getProcessedTokenContextAroundRange(i),v=h.beforeRangeProcessedTokens.getLineContent(),C=h.afterRangeProcessedTokens.getLineContent(),w=v+C,S=v+o+C;if(!d.shouldDecrease(w)&&d.shouldDecrease(S)){const I=y(l,t,i.startLineNumber,!1,u);if(!I)return null;let T=I.indentation;return I.action!==k.IndentAction.Indent&&(T=g.unshiftIndent(T)),T}const D=i.startLineNumber-1;if(D>0){const I=t.getLineContent(D);if(d.shouldIndentNextLine(I)&&d.shouldIncrease(S)){const M=y(l,t,i.startLineNumber,!1,u)?.indentation;if(M!==void 0){const A=t.getLineContent(i.startLineNumber),R=c.getLeadingWhitespace(A),O=g.shiftIndent(M)===R,x=/^\s*$/.test(w),F=s.autoClosingPairs.autoClosingPairsOpenByEnd.get(o),z=F&&F.length>0&&x;if(O&&z)return M}}}return null}function p(s,t,i){const o=i.getLanguageConfiguration(s.getLanguageId()).indentRulesSupport;return!o||t<1||t>s.getLineCount()?null:o.getIndentMetadata(s.getLineContent(t))}function n(s,t,i){return{tokenization:{getLineTokens:g=>g===t?i:s.tokenization.getLineTokens(g),getLanguageId:()=>s.getLanguageId(),getLanguageIdAtPosition:(g,u)=>s.getLanguageIdAtPosition(g,u)},getLineContent:g=>g===t?i.getLineContent():s.getLineContent(g)}}}),define(oe[605],re([1,0,94]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousTokensEditing=e.EMPTY_LINE_TOKENS=void 0,e.toUint32Array=E,e.EMPTY_LINE_TOKENS=new Uint32Array(0).buffer;class k{static deleteBeginning(y,f){return y===null||y===e.EMPTY_LINE_TOKENS?y:k.delete(y,0,f)}static deleteEnding(y,f){if(y===null||y===e.EMPTY_LINE_TOKENS)return y;const _=E(y),b=_[_.length-2];return k.delete(y,f,b)}static delete(y,f,_){if(y===null||y===e.EMPTY_LINE_TOKENS||f===_)return y;const b=E(y),p=b.length>>>1;if(f===0&&b[b.length-2]===_)return e.EMPTY_LINE_TOKENS;const n=c.LineTokens.findIndexInTokensArray(b,f),s=n>0?b[n-1<<1]:0,t=b[n<<1];if(_<t){const l=_-f;for(let a=n;a<p;a++)b[a<<1]-=l;return y}let i,o;s!==f?(b[n<<1]=f,i=n+1<<1,o=f):(i=n<<1,o=s);const g=_-f;for(let l=n+1;l<p;l++){const a=b[l<<1]-g;a>o&&(b[i++]=a,b[i++]=b[(l<<1)+1],o=a)}if(i===b.length)return y;const u=new Uint32Array(i);return u.set(b.subarray(0,i),0),u.buffer}static append(y,f){if(f===e.EMPTY_LINE_TOKENS)return y;if(y===e.EMPTY_LINE_TOKENS)return f;if(y===null)return y;if(f===null)return null;const _=E(y),b=E(f),p=b.length>>>1,n=new Uint32Array(_.length+b.length);n.set(_,0);let s=_.length;const t=_[_.length-2];for(let i=0;i<p;i++)n[s++]=b[i<<1]+t,n[s++]=b[(i<<1)+1];return n.buffer}static insert(y,f,_){if(y===null||y===e.EMPTY_LINE_TOKENS)return y;const b=E(y),p=b.length>>>1;let n=c.LineTokens.findIndexInTokensArray(b,f);n>0&&b[n-1<<1]===f&&n--;for(let s=n;s<p;s++)b[s<<1]+=_;return y}}e.ContiguousTokensEditing=k;function E(L){return L instanceof Uint32Array?L:new Uint32Array(L)}}),define(oe[606],re([1,0,13,9,605,94,147]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContiguousTokensStore=void 0;class f{constructor(p){this._lineTokens=[],this._len=0,this._languageIdCodec=p}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(p,n,s){let t=null;if(n<this._len&&(t=this._lineTokens[n]),t!==null&&t!==E.EMPTY_LINE_TOKENS)return new L.LineTokens((0,E.toUint32Array)(t),s,this._languageIdCodec);const i=new Uint32Array(2);return i[0]=s.length,i[1]=_(this._languageIdCodec.encodeLanguageId(p)),new L.LineTokens(i,s,this._languageIdCodec)}static _massageTokens(p,n,s){const t=s?(0,E.toUint32Array)(s):null;if(n===0){let i=!1;if(t&&t.length>1&&(i=y.TokenMetadata.getLanguageId(t[1])!==p),!i)return E.EMPTY_LINE_TOKENS}if(!t||t.length===0){const i=new Uint32Array(2);return i[0]=n,i[1]=_(p),i.buffer}return t[t.length-2]=n,t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t}_ensureLine(p){for(;p>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(p,n){n!==0&&(p+n>this._len&&(n=this._len-p),this._lineTokens.splice(p,n),this._len-=n)}_insertLines(p,n){if(n===0)return;const s=[];for(let t=0;t<n;t++)s[t]=null;this._lineTokens=c.arrayInsert(this._lineTokens,p,s),this._len+=n}setTokens(p,n,s,t,i){const o=f._massageTokens(this._languageIdCodec.encodeLanguageId(p),s,t);this._ensureLine(n);const g=this._lineTokens[n];return this._lineTokens[n]=o,i?!f._equals(g,o):!1}static _equals(p,n){if(!p||!n)return!p&&!n;const s=(0,E.toUint32Array)(p),t=(0,E.toUint32Array)(n);if(s.length!==t.length)return!1;for(let i=0,o=s.length;i<o;i++)if(s[i]!==t[i])return!1;return!0}acceptEdit(p,n,s){this._acceptDeleteRange(p),this._acceptInsertText(new k.Position(p.startLineNumber,p.startColumn),n,s)}_acceptDeleteRange(p){const n=p.startLineNumber-1;if(n>=this._len)return;if(p.startLineNumber===p.endLineNumber){if(p.startColumn===p.endColumn)return;this._lineTokens[n]=E.ContiguousTokensEditing.delete(this._lineTokens[n],p.startColumn-1,p.endColumn-1);return}this._lineTokens[n]=E.ContiguousTokensEditing.deleteEnding(this._lineTokens[n],p.startColumn-1);const s=p.endLineNumber-1;let t=null;s<this._len&&(t=E.ContiguousTokensEditing.deleteBeginning(this._lineTokens[s],p.endColumn-1)),this._lineTokens[n]=E.ContiguousTokensEditing.append(this._lineTokens[n],t),this._deleteLines(p.startLineNumber,p.endLineNumber-p.startLineNumber)}_acceptInsertText(p,n,s){if(n===0&&s===0)return;const t=p.lineNumber-1;if(!(t>=this._len)){if(n===0){this._lineTokens[t]=E.ContiguousTokensEditing.insert(this._lineTokens[t],p.column-1,s);return}this._lineTokens[t]=E.ContiguousTokensEditing.deleteEnding(this._lineTokens[t],p.column-1),this._lineTokens[t]=E.ContiguousTokensEditing.insert(this._lineTokens[t],p.column-1,s),this._insertLines(p.lineNumber,n)}}setMultilineTokens(p,n){if(p.length===0)return{changes:[]};const s=[];for(let t=0,i=p.length;t<i;t++){const o=p[t];let g=0,u=0,l=!1;for(let a=o.startLineNumber;a<=o.endLineNumber;a++)l?(this.setTokens(n.getLanguageId(),a-1,n.getLineLength(a),o.getLineTokens(a),!1),u=a):this.setTokens(n.getLanguageId(),a-1,n.getLineLength(a),o.getLineTokens(a),!0)&&(l=!0,g=a,u=a);l&&s.push({fromLineNumber:g,toLineNumber:u})}return{changes:s}}}e.ContiguousTokensStore=f;function _(b){return(b<<0|0|0|32768|2<<24|1024)>>>0}}),define(oe[607],re([1,0,9,4,144]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SparseLineTokens=e.SparseMultilineTokens=void 0;class L{static create(b,p){return new L(b,new y(p))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(b,p){this._startLineNumber=b,this._tokens=p,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(b){return this._startLineNumber<=b&&b<=this._endLineNumber?this._tokens.getLineTokens(b-this._startLineNumber):null}getRange(){const b=this._tokens.getRange();return b&&new k.Range(this._startLineNumber+b.startLineNumber,b.startColumn,this._startLineNumber+b.endLineNumber,b.endColumn)}removeTokens(b){const p=b.startLineNumber-this._startLineNumber,n=b.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(p,b.startColumn-1,n,b.endColumn-1),this._updateEndLineNumber()}split(b){const p=b.startLineNumber-this._startLineNumber,n=b.endLineNumber-this._startLineNumber,[s,t,i]=this._tokens.split(p,b.startColumn-1,n,b.endColumn-1);return[new L(this._startLineNumber,s),new L(this._startLineNumber+i,t)]}applyEdit(b,p){const[n,s,t]=(0,E.countEOL)(p);this.acceptEdit(b,n,s,t,p.length>0?p.charCodeAt(0):0)}acceptEdit(b,p,n,s,t){this._acceptDeleteRange(b),this._acceptInsertText(new c.Position(b.startLineNumber,b.startColumn),p,n,s,t),this._updateEndLineNumber()}_acceptDeleteRange(b){if(b.startLineNumber===b.endLineNumber&&b.startColumn===b.endColumn)return;const p=b.startLineNumber-this._startLineNumber,n=b.endLineNumber-this._startLineNumber;if(n<0){const t=n-p;this._startLineNumber-=t;return}const s=this._tokens.getMaxDeltaLine();if(!(p>=s+1)){if(p<0&&n>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(p<0){const t=-p;this._startLineNumber-=t,this._tokens.acceptDeleteRange(b.startColumn-1,0,0,n,b.endColumn-1)}else this._tokens.acceptDeleteRange(0,p,b.startColumn-1,n,b.endColumn-1)}}_acceptInsertText(b,p,n,s,t){if(p===0&&n===0)return;const i=b.lineNumber-this._startLineNumber;if(i<0){this._startLineNumber+=p;return}const o=this._tokens.getMaxDeltaLine();i>=o+1||this._tokens.acceptInsertText(i,b.column-1,p,n,s,t)}}e.SparseMultilineTokens=L;class y{constructor(b){this._tokens=b,this._tokenCount=b.length/4}toString(b){const p=[];for(let n=0;n<this._tokenCount;n++)p.push(`(${this._getDeltaLine(n)+b},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${p.join(",")}]`}getMaxDeltaLine(){const b=this._getTokenCount();return b===0?-1:this._getDeltaLine(b-1)}getRange(){const b=this._getTokenCount();if(b===0)return null;const p=this._getStartCharacter(0),n=this._getDeltaLine(b-1),s=this._getEndCharacter(b-1);return new k.Range(0,p+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(b){return this._tokens[4*b]}_getStartCharacter(b){return this._tokens[4*b+1]}_getEndCharacter(b){return this._tokens[4*b+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(b){let p=0,n=this._getTokenCount()-1;for(;p<n;){const s=p+Math.floor((n-p)/2),t=this._getDeltaLine(s);if(t<b)p=s+1;else if(t>b)n=s-1;else{let i=s;for(;i>p&&this._getDeltaLine(i-1)===b;)i--;let o=s;for(;o<n&&this._getDeltaLine(o+1)===b;)o++;return new f(this._tokens.subarray(4*i,4*o+4))}}return this._getDeltaLine(p)===b?new f(this._tokens.subarray(4*p,4*p+4)):null}clear(){this._tokenCount=0}removeTokens(b,p,n,s){const t=this._tokens,i=this._tokenCount;let o=0,g=!1,u=0;for(let l=0;l<i;l++){const a=4*l,r=t[a],d=t[a+1],m=t[a+2],h=t[a+3];if((r>b||r===b&&m>=p)&&(r<n||r===n&&d<=s))g=!0;else{if(o===0&&(u=r),g){const v=4*o;t[v]=r-u,t[v+1]=d,t[v+2]=m,t[v+3]=h}o++}}return this._tokenCount=o,u}split(b,p,n,s){const t=this._tokens,i=this._tokenCount,o=[],g=[];let u=o,l=0,a=0;for(let r=0;r<i;r++){const d=4*r,m=t[d],h=t[d+1],v=t[d+2],C=t[d+3];if(m>b||m===b&&v>=p){if(m<n||m===n&&h<=s)continue;u!==g&&(u=g,l=0,a=m)}u[l++]=m-a,u[l++]=h,u[l++]=v,u[l++]=C}return[new y(new Uint32Array(o)),new y(new Uint32Array(g)),a]}acceptDeleteRange(b,p,n,s,t){const i=this._tokens,o=this._tokenCount,g=s-p;let u=0,l=!1;for(let a=0;a<o;a++){const r=4*a;let d=i[r],m=i[r+1],h=i[r+2];const v=i[r+3];if(d<p||d===p&&h<=n){u++;continue}else if(d===p&&m<n)d===s&&h>t?h-=t-n:h=n;else if(d===p&&m===n)if(d===s&&h>t)h-=t-n;else{l=!0;continue}else if(d<s||d===s&&m<t)if(d===s&&h>t)d=p,m=n,h=m+(h-t);else{l=!0;continue}else if(d>s){if(g===0&&!l){u=o;break}d-=g}else if(d===s&&m>=t)b&&d===0&&(m+=b,h+=b),d-=g,m-=t-n,h-=t-n;else throw new Error("Not possible!");const C=4*u;i[C]=d,i[C+1]=m,i[C+2]=h,i[C+3]=v,u++}this._tokenCount=u}acceptInsertText(b,p,n,s,t,i){const o=n===0&&s===1&&(i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122),g=this._tokens,u=this._tokenCount;for(let l=0;l<u;l++){const a=4*l;let r=g[a],d=g[a+1],m=g[a+2];if(!(r<b||r===b&&m<p)){if(r===b&&m===p)if(o)m+=1;else continue;else if(r===b&&d<p&&p<m)n===0?m+=s:m=p;else{if(r===b&&d===p&&o)continue;if(r===b)if(r+=n,n===0)d+=s,m+=s;else{const h=m-d;d=t+(d-p),m=d+h}else r+=n}g[a]=r,g[a+1]=d,g[a+2]=m}}}}class f{constructor(b){this._tokens=b}getCount(){return this._tokens.length/4}getStartCharacter(b){return this._tokens[4*b+1]}getEndCharacter(b){return this._tokens[4*b+2]}getMetadata(b){return this._tokens[4*b+3]}}e.SparseLineTokens=f}),define(oe[608],re([1,0,13,94]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SparseTokensStore=void 0;class E{constructor(y){this._pieces=[],this._isComplete=!1,this._languageIdCodec=y}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(y,f){this._pieces=y||[],this._isComplete=f}setPartial(y,f){let _=y;if(f.length>0){const p=f[0].getRange(),n=f[f.length-1].getRange();if(!p||!n)return y;_=y.plusRange(p).plusRange(n)}let b=null;for(let p=0,n=this._pieces.length;p<n;p++){const s=this._pieces[p];if(s.endLineNumber<_.startLineNumber)continue;if(s.startLineNumber>_.endLineNumber){b=b||{index:p};break}if(s.removeTokens(_),s.isEmpty()){this._pieces.splice(p,1),p--,n--;continue}if(s.endLineNumber<_.startLineNumber)continue;if(s.startLineNumber>_.endLineNumber){b=b||{index:p};continue}const[t,i]=s.split(_);if(t.isEmpty()){b=b||{index:p};continue}i.isEmpty()||(this._pieces.splice(p,1,t,i),p++,n++,b=b||{index:p})}return b=b||{index:this._pieces.length},f.length>0&&(this._pieces=c.arrayInsert(this._pieces,b.index,f)),_}isComplete(){return this._isComplete}addSparseTokens(y,f){if(f.getLineContent().length===0)return f;const _=this._pieces;if(_.length===0)return f;const b=E._findFirstPieceWithLine(_,y),p=_[b].getLineTokens(y);if(!p)return f;const n=f.getCount(),s=p.getCount();let t=0;const i=[];let o=0,g=0;const u=(l,a)=>{l!==g&&(g=l,i[o++]=l,i[o++]=a)};for(let l=0;l<s;l++){const a=p.getStartCharacter(l),r=p.getEndCharacter(l),d=p.getMetadata(l),m=((d&1?2048:0)|(d&2?4096:0)|(d&4?8192:0)|(d&8?16384:0)|(d&16?16744448:0)|(d&32?4278190080:0))>>>0,h=~m>>>0;for(;t<n&&f.getEndOffset(t)<=a;)u(f.getEndOffset(t),f.getMetadata(t)),t++;for(t<n&&f.getStartOffset(t)<a&&u(a,f.getMetadata(t));t<n&&f.getEndOffset(t)<r;)u(f.getEndOffset(t),f.getMetadata(t)&h|d&m),t++;if(t<n)u(r,f.getMetadata(t)&h|d&m),f.getEndOffset(t)===r&&t++;else{const v=Math.min(Math.max(0,t-1),n-1);u(r,f.getMetadata(v)&h|d&m)}}for(;t<n;)u(f.getEndOffset(t),f.getMetadata(t)),t++;return new k.LineTokens(new Uint32Array(i),f.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(y,f){let _=0,b=y.length-1;for(;_<b;){let p=_+Math.floor((b-_)/2);if(y[p].endLineNumber<f)_=p+1;else if(y[p].startLineNumber>f)b=p-1;else{for(;p>_&&y[p-1].startLineNumber<=f&&f<=y[p-1].endLineNumber;)p--;return p}}return _}acceptEdit(y,f,_,b,p){for(const n of this._pieces)n.acceptEdit(y,f,_,b,p)}}e.SparseTokensStore=E}),define(oe[173],re([1,0,2]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewEventHandler=void 0;class k extends c.Disposable{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(L){return!1}onCompositionEnd(L){return!1}onConfigurationChanged(L){return!1}onCursorStateChanged(L){return!1}onDecorationsChanged(L){return!1}onFlushed(L){return!1}onFocusChanged(L){return!1}onLanguageConfigurationChanged(L){return!1}onLineMappingChanged(L){return!1}onLinesChanged(L){return!1}onLinesDeleted(L){return!1}onLinesInserted(L){return!1}onRevealRangeRequest(L){return!1}onScrollChanged(L){return!1}onThemeChanged(L){return!1}onTokensChanged(L){return!1}onTokensColorsChanged(L){return!1}onZonesChanged(L){return!1}handleEvents(L){let y=!1;for(let f=0,_=L.length;f<_;f++){const b=L[f];switch(b.type){case 0:this.onCompositionStart(b)&&(y=!0);break;case 1:this.onCompositionEnd(b)&&(y=!0);break;case 2:this.onConfigurationChanged(b)&&(y=!0);break;case 3:this.onCursorStateChanged(b)&&(y=!0);break;case 4:this.onDecorationsChanged(b)&&(y=!0);break;case 5:this.onFlushed(b)&&(y=!0);break;case 6:this.onFocusChanged(b)&&(y=!0);break;case 7:this.onLanguageConfigurationChanged(b)&&(y=!0);break;case 8:this.onLineMappingChanged(b)&&(y=!0);break;case 9:this.onLinesChanged(b)&&(y=!0);break;case 10:this.onLinesDeleted(b)&&(y=!0);break;case 11:this.onLinesInserted(b)&&(y=!0);break;case 12:this.onRevealRangeRequest(b)&&(y=!0);break;case 13:this.onScrollChanged(b)&&(y=!0);break;case 15:this.onTokensChanged(b)&&(y=!0);break;case 14:this.onThemeChanged(b)&&(y=!0);break;case 16:this.onTokensColorsChanged(b)&&(y=!0);break;case 17:this.onZonesChanged(b)&&(y=!0);break;default:console.info("View received unknown event: "),console.info(b)}}y&&(this._shouldRender=!0)}}e.ViewEventHandler=k}),define(oe[132],re([1,0,173]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicViewOverlay=void 0;class k extends c.ViewEventHandler{}e.DynamicViewOverlay=k}),define(oe[57],re([1,0,173]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PartFingerprints=e.ViewPart=void 0;class k extends c.ViewEventHandler{constructor(y){super(),this._context=y,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}e.ViewPart=k;class E{static write(y,f){y.setAttribute("data-mprt",String(f))}static read(y){const f=y.getAttribute("data-mprt");return f===null?0:parseInt(f,10)}static collect(y,f){const _=[];let b=0;for(;y&&y!==y.ownerDocument.body&&y!==f;)y.nodeType===y.ELEMENT_NODE&&(_[b++]=this.read(y)),y=y.parentElement;const p=new Uint8Array(b);for(let n=0;n<b;n++)p[n]=_[b-n-1];return p}}e.PartFingerprints=E}),define(oe[609],re([1,0,39,75,241,57]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarginViewOverlays=e.ContentViewOverlays=e.ViewOverlayLine=e.ViewOverlays=void 0;class y extends L.ViewPart{constructor(n){super(n),this._visibleLines=new E.VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;const t=this._context.configuration.options.get(50);(0,k.applyFontInfo)(this.domNode,t),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let n=0,s=this._dynamicOverlays.length;n<s;n++)if(this._dynamicOverlays[n].shouldRender())return!0;return!1}dispose(){super.dispose();for(let n=0,s=this._dynamicOverlays.length;n<s;n++)this._dynamicOverlays[n].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new f(this._dynamicOverlays)}addDynamicOverlay(n){this._dynamicOverlays.push(n)}onConfigurationChanged(n){this._visibleLines.onConfigurationChanged(n);const t=this._context.configuration.options.get(50);return(0,k.applyFontInfo)(this.domNode,t),!0}onFlushed(n){return this._visibleLines.onFlushed(n)}onFocusChanged(n){return this._isFocused=n.isFocused,!0}onLinesChanged(n){return this._visibleLines.onLinesChanged(n)}onLinesDeleted(n){return this._visibleLines.onLinesDeleted(n)}onLinesInserted(n){return this._visibleLines.onLinesInserted(n)}onScrollChanged(n){return this._visibleLines.onScrollChanged(n)||!0}onTokensChanged(n){return this._visibleLines.onTokensChanged(n)}onZonesChanged(n){return this._visibleLines.onZonesChanged(n)}prepareRender(n){const s=this._dynamicOverlays.filter(t=>t.shouldRender());for(let t=0,i=s.length;t<i;t++){const o=s[t];o.prepareRender(n),o.onDidRender()}}render(n){this._viewOverlaysRender(n),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(n){this._visibleLines.renderLines(n.viewportData)}}e.ViewOverlays=y;class f{constructor(n){this._dynamicOverlays=n,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(n){this._domNode=(0,c.createFastDomNode)(n)}onContentChanged(){}onTokensChanged(){}renderLine(n,s,t,i,o){let g="";for(let u=0,l=this._dynamicOverlays.length;u<l;u++){const a=this._dynamicOverlays[u];g+=a.render(i.startLineNumber,n)}return this._renderedContent===g?!1:(this._renderedContent=g,o.appendString('<div style="top:'),o.appendString(String(s)),o.appendString("px;height:"),o.appendString(String(t)),o.appendString('px;">'),o.appendString(g),o.appendString("</div>"),!0)}layoutLine(n,s,t){this._domNode&&(this._domNode.setTop(s),this._domNode.setHeight(t))}}e.ViewOverlayLine=f;class _ extends y{constructor(n){super(n);const t=this._context.configuration.options.get(146);this._contentWidth=t.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(n){const t=this._context.configuration.options.get(146);return this._contentWidth=t.contentWidth,super.onConfigurationChanged(n)||!0}onScrollChanged(n){return super.onScrollChanged(n)||n.scrollWidthChanged}_viewOverlaysRender(n){super._viewOverlaysRender(n),this.domNode.setWidth(Math.max(n.scrollWidth,this._contentWidth))}}e.ContentViewOverlays=_;class b extends y{constructor(n){super(n);const s=this._context.configuration.options,t=s.get(146);this._contentLeft=t.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,k.applyFontInfo)(this.domNode,s.get(50))}onConfigurationChanged(n){const s=this._context.configuration.options;(0,k.applyFontInfo)(this.domNode,s.get(50));const t=s.get(146);return this._contentLeft=t.contentLeft,super.onConfigurationChanged(n)||!0}onScrollChanged(n){return super.onScrollChanged(n)||n.scrollHeightChanged}_viewOverlaysRender(n){super._viewOverlaysRender(n);const s=Math.min(n.scrollHeight,1e6);this.domNode.setHeight(s),this.domNode.setWidth(this._contentLeft)}}e.MarginViewOverlays=b}),define(oe[610],re([1,0,39,57,490]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockDecorations=void 0;class E extends k.ViewPart{constructor(y){super(y),this.blocks=[],this.contentWidth=-1,this.contentLeft=0,this.domNode=(0,c.createFastDomNode)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let y=!1;const _=this._context.configuration.options.get(146),b=_.contentWidth-_.verticalScrollbarWidth;this.contentWidth!==b&&(this.contentWidth=b,y=!0);const p=_.contentLeft;return this.contentLeft!==p&&(this.contentLeft=p,y=!0),y}dispose(){super.dispose()}onConfigurationChanged(y){return this.update()}onScrollChanged(y){return y.scrollTopChanged||y.scrollLeftChanged}onDecorationsChanged(y){return!0}onZonesChanged(y){return!0}prepareRender(y){}render(y){let f=0;const _=y.getDecorationsInViewport();for(const b of _){if(!b.options.blockClassName)continue;let p=this.blocks[f];p||(p=this.blocks[f]=(0,c.createFastDomNode)(document.createElement("div")),this.domNode.appendChild(p));let n,s;b.options.blockIsAfterEnd?(n=y.getVerticalOffsetAfterLineNumber(b.range.endLineNumber,!1),s=y.getVerticalOffsetAfterLineNumber(b.range.endLineNumber,!0)):(n=y.getVerticalOffsetForLineNumber(b.range.startLineNumber,!0),s=b.range.isEmpty()&&!b.options.blockDoesNotCollapse?y.getVerticalOffsetForLineNumber(b.range.startLineNumber,!1):y.getVerticalOffsetAfterLineNumber(b.range.endLineNumber,!0));const[t,i,o,g]=b.options.blockPadding??[0,0,0,0];p.setClassName("blockDecorations-block "+b.options.blockClassName),p.setLeft(this.contentLeft-g),p.setWidth(this.contentWidth+g+i),p.setTop(n-y.scrollTop-t),p.setHeight(s-n+t+o),f++}for(let b=f;b<this.blocks.length;b++)this.blocks[b].domNode.remove();this.blocks.length=f}}e.BlockDecorations=E}),define(oe[611],re([1,0,5,39,57]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewContentWidgets=void 0;class L extends E.ViewPart{constructor(s,t){super(s),this._viewDomNode=t,this._widgets={},this.domNode=(0,k.createFastDomNode)(document.createElement("div")),E.PartFingerprints.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=(0,k.createFastDomNode)(document.createElement("div")),E.PartFingerprints.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(s){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onConfigurationChanged(s);return!0}onDecorationsChanged(s){return!0}onFlushed(s){return!0}onLineMappingChanged(s){return this._updateAnchorsViewPositions(),!0}onLinesChanged(s){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(s){return this._updateAnchorsViewPositions(),!0}onLinesInserted(s){return this._updateAnchorsViewPositions(),!0}onScrollChanged(s){return!0}onZonesChanged(s){return!0}_updateAnchorsViewPositions(){const s=Object.keys(this._widgets);for(const t of s)this._widgets[t].updateAnchorViewPosition()}addWidget(s){const t=new y(this._context,this._viewDomNode,s);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(s,t,i,o,g){this._widgets[s.getId()].setPosition(t,i,o,g),this.setShouldRender()}removeWidget(s){const t=s.getId();if(this._widgets.hasOwnProperty(t)){const i=this._widgets[t];delete this._widgets[t];const o=i.domNode.domNode;o.remove(),o.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(s){return this._widgets.hasOwnProperty(s)?this._widgets[s].suppressMouseDown:!1}onBeforeRender(s){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].onBeforeRender(s)}prepareRender(s){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].prepareRender(s)}render(s){const t=Object.keys(this._widgets);for(const i of t)this._widgets[i].render(s)}}e.ViewContentWidgets=L;class y{constructor(s,t,i){this._primaryAnchor=new f(null,null),this._secondaryAnchor=new f(null,null),this._context=s,this._viewDomNode=t,this._actual=i,this.domNode=(0,k.createFastDomNode)(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;const o=this._context.configuration.options,g=o.get(146);this._fixedOverflowWidgets=o.get(42),this._contentWidth=g.contentWidth,this._contentLeft=g.contentLeft,this._lineHeight=o.get(67),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(s){const t=this._context.configuration.options;if(this._lineHeight=t.get(67),s.hasChanged(146)){const i=t.get(146);this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(s,t,i){this._affinity=s,this._primaryAnchor=o(t,this._context.viewModel,this._affinity),this._secondaryAnchor=o(i,this._context.viewModel,this._affinity);function o(g,u,l){if(!g)return new f(null,null);const a=u.model.validatePosition(g);if(u.coordinatesConverter.modelPositionIsVisible(a)){const r=u.coordinatesConverter.convertModelPositionToViewPosition(a,l??void 0);return new f(g,r)}return new f(g,null)}}_getMaxWidth(){const s=this.domNode.domNode.ownerDocument,t=s.defaultView;return this.allowEditorOverflow?t?.innerWidth||s.documentElement.offsetWidth||s.body.offsetWidth:this._contentWidth}setPosition(s,t,i,o){this._setPosition(o,s,t),this._preference=i,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(s,t,i,o){const g=s.top,u=g,l=s.top+s.height,a=o.viewportHeight-l,r=g-i,d=u>=i,m=l,h=a>=i;let v=s.left;return v+t>o.scrollLeft+o.viewportWidth&&(v=o.scrollLeft+o.viewportWidth-t),v<o.scrollLeft&&(v=o.scrollLeft),{fitsAbove:d,aboveTop:r,fitsBelow:h,belowTop:m,left:v}}_layoutHorizontalSegmentInPage(s,t,i,o){const l=Math.max(15,t.left-o),a=Math.min(t.left+t.width+o,s.width-15),d=this._viewDomNode.domNode.ownerDocument.defaultView;let m=t.left+i-(d?.scrollX??0);if(m+o>a){const h=m-(a-o);m-=h,i-=h}if(m<l){const h=m-l;m-=h,i-=h}return[i,m]}_layoutBoxInPage(s,t,i,o){const g=s.top-i,u=s.top+s.height,l=c.getDomNodePagePosition(this._viewDomNode.domNode),a=this._viewDomNode.domNode.ownerDocument,r=a.defaultView,d=l.top+g-(r?.scrollY??0),m=l.top+u-(r?.scrollY??0),h=c.getClientArea(a.body),[v,C]=this._layoutHorizontalSegmentInPage(h,l,s.left-o.scrollLeft+this._contentLeft,t),w=22,S=22,D=d>=w,I=m+i<=h.height-S;return this._fixedOverflowWidgets?{fitsAbove:D,aboveTop:Math.max(d,w),fitsBelow:I,belowTop:m,left:C}:{fitsAbove:D,aboveTop:g,fitsBelow:I,belowTop:u,left:v}}_prepareRenderWidgetAtExactPositionOverflowing(s){return new _(s.top,s.left+this._contentLeft)}_getAnchorsCoordinates(s){const t=g(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),i=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,o=g(i,this._affinity,this._lineHeight);return{primary:t,secondary:o};function g(u,l,a){if(!u)return null;const r=s.visibleRangeForPosition(u);if(!r)return null;const d=u.column===1&&l===3?0:r.left,m=s.getVerticalOffsetForLineNumber(u.lineNumber)-s.scrollTop;return new b(m,d,a)}}_reduceAnchorCoordinates(s,t,i){if(!t)return s;const o=this._context.configuration.options.get(50);let g=t.left;return g<s.left?g=Math.max(g,s.left-i+o.typicalFullwidthCharacterWidth):g=Math.min(g,s.left+i-o.typicalFullwidthCharacterWidth),new b(s.top,g,s.height)}_prepareRenderWidget(s){if(!this._preference||this._preference.length===0)return null;const{primary:t,secondary:i}=this._getAnchorsCoordinates(s);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let u=null;if(typeof this._actual.beforeRender=="function"&&(u=p(this._actual.beforeRender,this._actual)),u)this._cachedDomNodeOffsetWidth=u.width,this._cachedDomNodeOffsetHeight=u.height;else{const a=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(a.width),this._cachedDomNodeOffsetHeight=Math.round(a.height)}}const o=this._reduceAnchorCoordinates(t,i,this._cachedDomNodeOffsetWidth);let g;this.allowEditorOverflow?g=this._layoutBoxInPage(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,s):g=this._layoutBoxInViewport(o,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,s);for(let u=1;u<=2;u++)for(const l of this._preference)if(l===1){if(!g)return null;if(u===2||g.fitsAbove)return{kind:"inViewport",coordinate:new _(g.aboveTop,g.left),position:1}}else if(l===2){if(!g)return null;if(u===2||g.fitsBelow)return{kind:"inViewport",coordinate:new _(g.belowTop,g.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new _(o.top,o.left)),position:0}:{kind:"inViewport",coordinate:new _(o.top,o.left),position:0};return null}onBeforeRender(s){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<s.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>s.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(s){this._renderData=this._prepareRenderWidget(s)}render(s){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&p(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+s.scrollTop-s.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&p(this._actual.afterRender,this._actual,this._renderData.position)}}class f{constructor(s,t){this.modelPosition=s,this.viewPosition=t}}class _{constructor(s,t){this.top=s,this.left=t,this._coordinateBrand=void 0}}class b{constructor(s,t,i){this.top=s,this.left=t,this.height=i,this._anchorCoordinateBrand=void 0}}function p(n,s,...t){try{return n.call(s,...t)}catch{return null}}}),define(oe[612],re([1,0,132,166,4,492]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DecorationsOverlay=void 0;class L extends c.DynamicViewOverlay{constructor(f){super(),this._context=f;const _=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=_.get(50).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(f){const _=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=_.get(50).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(f){return!0}onFlushed(f){return!0}onLinesChanged(f){return!0}onLinesDeleted(f){return!0}onLinesInserted(f){return!0}onScrollChanged(f){return f.scrollTopChanged||f.scrollWidthChanged}onZonesChanged(f){return!0}prepareRender(f){const _=f.getDecorationsInViewport();let b=[],p=0;for(let i=0,o=_.length;i<o;i++){const g=_[i];g.options.className&&(b[p++]=g)}b=b.sort((i,o)=>{if(i.options.zIndex<o.options.zIndex)return-1;if(i.options.zIndex>o.options.zIndex)return 1;const g=i.options.className,u=o.options.className;return g<u?-1:g>u?1:E.Range.compareRangesUsingStarts(i.range,o.range)});const n=f.visibleRange.startLineNumber,s=f.visibleRange.endLineNumber,t=[];for(let i=n;i<=s;i++){const o=i-n;t[o]=""}this._renderWholeLineDecorations(f,b,t),this._renderNormalDecorations(f,b,t),this._renderResult=t}_renderWholeLineDecorations(f,_,b){const p=f.visibleRange.startLineNumber,n=f.visibleRange.endLineNumber;for(let s=0,t=_.length;s<t;s++){const i=_[s];if(!i.options.isWholeLine)continue;const o='<div class="cdr '+i.options.className+'" style="left:0;width:100%;"></div>',g=Math.max(i.range.startLineNumber,p),u=Math.min(i.range.endLineNumber,n);for(let l=g;l<=u;l++){const a=l-p;b[a]+=o}}}_renderNormalDecorations(f,_,b){const p=f.visibleRange.startLineNumber;let n=null,s=!1,t=null,i=!1;for(let o=0,g=_.length;o<g;o++){const u=_[o];if(u.options.isWholeLine)continue;const l=u.options.className,a=!!u.options.showIfCollapsed;let r=u.range;if(a&&r.endColumn===1&&r.endLineNumber!==r.startLineNumber&&(r=new E.Range(r.startLineNumber,r.startColumn,r.endLineNumber-1,this._context.viewModel.getLineMaxColumn(r.endLineNumber-1))),n===l&&s===a&&E.Range.areIntersectingOrTouching(t,r)){t=E.Range.plusRange(t,r);continue}n!==null&&this._renderNormalDecoration(f,t,n,i,s,p,b),n=l,s=a,t=r,i=u.options.shouldFillLineOnLineBreak??!1}n!==null&&this._renderNormalDecoration(f,t,n,i,s,p,b)}_renderNormalDecoration(f,_,b,p,n,s,t){const i=f.linesVisibleRangesForRange(_,b==="findMatch");if(i)for(let o=0,g=i.length;o<g;o++){const u=i[o];if(u.outsideRenderedLine)continue;const l=u.lineNumber-s;if(n&&u.ranges.length===1){const a=u.ranges[0];if(a.width<this._typicalHalfwidthCharacterWidth){const r=Math.round(a.left+a.width/2),d=Math.max(0,Math.round(r-this._typicalHalfwidthCharacterWidth/2));u.ranges[0]=new k.HorizontalRange(d,this._typicalHalfwidthCharacterWidth)}}for(let a=0,r=u.ranges.length;a<r;a++){const d=p&&u.continuesOnNextLine&&r===1,m=u.ranges[a],h='<div class="cdr '+b+'" style="left:'+String(m.left)+"px;width:"+(d?"100%;":String(m.width)+"px;")+'"></div>';t[l]+=h}}}render(f,_){if(!this._renderResult)return"";const b=_-f;return b<0||b>=this._renderResult.length?"":this._renderResult[b]}}e.DecorationsOverlay=L}),define(oe[253],re([1,0,39,13,132,57,9,4,40,493]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphMarginWidgets=e.DedupOverlay=e.VisibleLineDecorationsToRender=e.LineDecorationToRender=e.DecorationToRender=void 0;class b{constructor(l,a,r,d,m){this.startLineNumber=l,this.endLineNumber=a,this.className=r,this.tooltip=d,this._decorationToRenderBrand=void 0,this.zIndex=m??0}}e.DecorationToRender=b;class p{constructor(l,a,r){this.className=l,this.zIndex=a,this.tooltip=r}}e.LineDecorationToRender=p;class n{constructor(){this.decorations=[]}add(l){this.decorations.push(l)}getDecorations(){return this.decorations}}e.VisibleLineDecorationsToRender=n;class s extends E.DynamicViewOverlay{_render(l,a,r){const d=[];for(let v=l;v<=a;v++){const C=v-l;d[C]=new n}if(r.length===0)return d;r.sort((v,C)=>v.className===C.className?v.startLineNumber===C.startLineNumber?v.endLineNumber-C.endLineNumber:v.startLineNumber-C.startLineNumber:v.className<C.className?-1:1);let m=null,h=0;for(let v=0,C=r.length;v<C;v++){const w=r[v],S=w.className,D=w.zIndex;let I=Math.max(w.startLineNumber,l)-l;const T=Math.min(w.endLineNumber,a)-l;m===S?(I=Math.max(h+1,I),h=Math.max(h,T)):(m=S,h=T);for(let M=I;M<=h;M++)d[M].add(new p(S,D,w.tooltip))}return d}}e.DedupOverlay=s;class t extends L.ViewPart{constructor(l){super(l),this._widgets={},this._context=l;const a=this._context.configuration.options,r=a.get(146);this.domNode=(0,c.createFastDomNode)(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=a.get(67),this._glyphMargin=a.get(57),this._glyphMarginLeft=r.glyphMarginLeft,this._glyphMarginWidth=r.glyphMarginWidth,this._glyphMarginDecorationLaneCount=r.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(l){const a=this._context.configuration.options,r=a.get(146);return this._lineHeight=a.get(67),this._glyphMargin=a.get(57),this._glyphMarginLeft=r.glyphMarginLeft,this._glyphMarginWidth=r.glyphMarginWidth,this._glyphMarginDecorationLaneCount=r.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(l){return!0}onFlushed(l){return!0}onLinesChanged(l){return!0}onLinesDeleted(l){return!0}onLinesInserted(l){return!0}onScrollChanged(l){return l.scrollTopChanged}onZonesChanged(l){return!0}addWidget(l){const a=(0,c.createFastDomNode)(l.getDomNode());this._widgets[l.getId()]={widget:l,preference:l.getPosition(),domNode:a,renderInfo:null},a.setPosition("absolute"),a.setDisplay("none"),a.setAttribute("widgetId",l.getId()),this.domNode.appendChild(a),this.setShouldRender()}setWidgetPosition(l,a){const r=this._widgets[l.getId()];return r.preference.lane===a.lane&&r.preference.zIndex===a.zIndex&&f.Range.equalsRange(r.preference.range,a.range)?!1:(r.preference=a,this.setShouldRender(),!0)}removeWidget(l){const a=l.getId();if(this._widgets[a]){const d=this._widgets[a].domNode.domNode;delete this._widgets[a],d.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(l,a){const r=l.visibleRange.startLineNumber,d=l.visibleRange.endLineNumber,m=l.getDecorationsInViewport();for(const h of m){const v=h.options.glyphMarginClassName;if(!v)continue;const C=Math.max(h.range.startLineNumber,r),w=Math.min(h.range.endLineNumber,d),S=h.options.glyphMargin?.position??_.GlyphMarginLane.Center,D=h.options.zIndex??0;for(let I=C;I<=w;I++){const T=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new y.Position(I,0)),M=this._context.viewModel.glyphLanes.getLanesAtLine(T.lineNumber).indexOf(S);a.push(new i(I,M,D,v))}}}_collectWidgetBasedGlyphRenderRequest(l,a){const r=l.visibleRange.startLineNumber,d=l.visibleRange.endLineNumber;for(const m of Object.values(this._widgets)){const h=m.preference.range,{startLineNumber:v,endLineNumber:C}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(f.Range.lift(h));if(!v||!C||C<r||v>d)continue;const w=Math.max(v,r),S=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new y.Position(w,0)),D=this._context.viewModel.glyphLanes.getLanesAtLine(S.lineNumber).indexOf(m.preference.lane);a.push(new o(w,D,m.preference.zIndex,m))}}_collectSortedGlyphRenderRequests(l){const a=[];return this._collectDecorationBasedGlyphRenderRequest(l,a),this._collectWidgetBasedGlyphRenderRequest(l,a),a.sort((r,d)=>r.lineNumber===d.lineNumber?r.laneIndex===d.laneIndex?r.zIndex===d.zIndex?d.type===r.type?r.type===0&&d.type===0?r.className<d.className?-1:1:0:d.type-r.type:d.zIndex-r.zIndex:r.laneIndex-d.laneIndex:r.lineNumber-d.lineNumber),a}prepareRender(l){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(const d of Object.values(this._widgets))d.renderInfo=null;const a=new k.ArrayQueue(this._collectSortedGlyphRenderRequests(l)),r=[];for(;a.length>0;){const d=a.peek();if(!d)break;const m=a.takeWhile(v=>v.lineNumber===d.lineNumber&&v.laneIndex===d.laneIndex);if(!m||m.length===0)break;const h=m[0];if(h.type===0){const v=[];for(const C of m){if(C.zIndex!==h.zIndex||C.type!==h.type)break;(v.length===0||v[v.length-1]!==C.className)&&v.push(C.className)}r.push(h.accept(v.join(" ")))}else h.widget.renderInfo={lineNumber:h.lineNumber,laneIndex:h.laneIndex}}this._decorationGlyphsToRender=r}render(l){if(!this._glyphMargin){for(const r of Object.values(this._widgets))r.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}const a=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(const r of Object.values(this._widgets))if(!r.renderInfo)r.domNode.setDisplay("none");else{const d=l.viewportData.relativeVerticalOffset[r.renderInfo.lineNumber-l.viewportData.startLineNumber],m=this._glyphMarginLeft+r.renderInfo.laneIndex*this._lineHeight;r.domNode.setDisplay("block"),r.domNode.setTop(d),r.domNode.setLeft(m),r.domNode.setWidth(a),r.domNode.setHeight(this._lineHeight)}for(let r=0;r<this._decorationGlyphsToRender.length;r++){const d=this._decorationGlyphsToRender[r],m=l.viewportData.relativeVerticalOffset[d.lineNumber-l.viewportData.startLineNumber],h=this._glyphMarginLeft+d.laneIndex*this._lineHeight;let v;r<this._managedDomNodes.length?v=this._managedDomNodes[r]:(v=(0,c.createFastDomNode)(document.createElement("div")),this._managedDomNodes.push(v),this.domNode.appendChild(v)),v.setClassName("cgmr codicon "+d.combinedClassName),v.setPosition("absolute"),v.setTop(m),v.setLeft(h),v.setWidth(a),v.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}}e.GlyphMarginWidgets=t;class i{constructor(l,a,r,d){this.lineNumber=l,this.laneIndex=a,this.zIndex=r,this.className=d,this.type=0}accept(l){return new g(this.lineNumber,this.laneIndex,l)}}class o{constructor(l,a,r,d){this.lineNumber=l,this.laneIndex=a,this.zIndex=r,this.widget=d,this.type=1}}class g{constructor(l,a,r){this.lineNumber=l,this.laneIndex=a,this.combinedClassName=r}}}),define(oe[613],re([1,0,253,497]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinesDecorationsOverlay=void 0;class k extends c.DedupOverlay{constructor(L){super(),this._context=L;const f=this._context.configuration.options.get(146);this._decorationsLeft=f.decorationsLeft,this._decorationsWidth=f.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(L){const f=this._context.configuration.options.get(146);return this._decorationsLeft=f.decorationsLeft,this._decorationsWidth=f.decorationsWidth,!0}onDecorationsChanged(L){return!0}onFlushed(L){return!0}onLinesChanged(L){return!0}onLinesDeleted(L){return!0}onLinesInserted(L){return!0}onScrollChanged(L){return L.scrollTopChanged}onZonesChanged(L){return!0}_getDecorations(L){const y=L.getDecorationsInViewport(),f=[];let _=0;for(let b=0,p=y.length;b<p;b++){const n=y[b],s=n.options.linesDecorationsClassName,t=n.options.zIndex;s&&(f[_++]=new c.DecorationToRender(n.range.startLineNumber,n.range.endLineNumber,s,n.options.linesDecorationsTooltip??null,t));const i=n.options.firstLineDecorationClassName;i&&(f[_++]=new c.DecorationToRender(n.range.startLineNumber,n.range.startLineNumber,i,n.options.linesDecorationsTooltip??null,t))}return f}prepareRender(L){const y=L.visibleRange.startLineNumber,f=L.visibleRange.endLineNumber,_=this._render(y,f,this._getDecorations(L)),b=this._decorationsLeft.toString(),p=this._decorationsWidth.toString(),n='" style="left:'+b+"px;width:"+p+'px;"></div>',s=[];for(let t=y;t<=f;t++){const i=t-y,o=_[i].getDecorations();let g="";for(const u of o){let l='<div class="cldr '+u.className;u.tooltip!==null&&(l+='" title="'+u.tooltip),l+=n,g+=l}s[i]=g}this._renderResult=s}render(L,y){return this._renderResult?this._renderResult[y-L]:""}}e.LinesDecorationsOverlay=k}),define(oe[346],re([1,0,39,57,498]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Margin=void 0;class E extends k.ViewPart{static{this.CLASS_NAME="glyph-margin"}static{this.OUTER_CLASS_NAME="margin"}constructor(y){super(y);const f=this._context.configuration.options,_=f.get(146);this._canUseLayerHinting=!f.get(32),this._contentLeft=_.contentLeft,this._glyphMarginLeft=_.glyphMarginLeft,this._glyphMarginWidth=_.glyphMarginWidth,this._domNode=(0,c.createFastDomNode)(document.createElement("div")),this._domNode.setClassName(E.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=(0,c.createFastDomNode)(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(E.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(y){const f=this._context.configuration.options,_=f.get(146);return this._canUseLayerHinting=!f.get(32),this._contentLeft=_.contentLeft,this._glyphMarginLeft=_.glyphMarginLeft,this._glyphMarginWidth=_.glyphMarginWidth,!0}onScrollChanged(y){return super.onScrollChanged(y)||y.scrollTopChanged}prepareRender(y){}render(y){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");const f=y.scrollTop-y.bigNumbersDelta;this._domNode.setTop(-f);const _=Math.min(y.scrollHeight,1e6);this._domNode.setHeight(_),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(_)}}e.Margin=E}),define(oe[614],re([1,0,253,499]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarginViewLineDecorationsOverlay=void 0;class k extends c.DedupOverlay{constructor(L){super(),this._context=L,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(L){return!0}onDecorationsChanged(L){return!0}onFlushed(L){return!0}onLinesChanged(L){return!0}onLinesDeleted(L){return!0}onLinesInserted(L){return!0}onScrollChanged(L){return L.scrollTopChanged}onZonesChanged(L){return!0}_getDecorations(L){const y=L.getDecorationsInViewport(),f=[];let _=0;for(let b=0,p=y.length;b<p;b++){const n=y[b],s=n.options.marginClassName,t=n.options.zIndex;s&&(f[_++]=new c.DecorationToRender(n.range.startLineNumber,n.range.endLineNumber,s,null,t))}return f}prepareRender(L){const y=L.visibleRange.startLineNumber,f=L.visibleRange.endLineNumber,_=this._render(y,f,this._getDecorations(L)),b=[];for(let p=y;p<=f;p++){const n=p-y,s=_[n].getDecorations();let t="";for(const i of s)t+='<div class="cmdr '+i.className+'" style=""></div>';b[n]=t}this._renderResult=b}render(L,y){return this._renderResult?this._renderResult[y-L]:""}}e.MarginViewLineDecorationsOverlay=k}),define(oe[615],re([1,0,39,57,5,501]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewOverlayWidgets=void 0;class L extends k.ViewPart{constructor(f,_){super(f),this._viewDomNode=_;const p=this._context.configuration.options.get(146);this._widgets={},this._verticalScrollbarWidth=p.verticalScrollbarWidth,this._minimapWidth=p.minimap.minimapWidth,this._horizontalScrollbarHeight=p.horizontalScrollbarHeight,this._editorHeight=p.height,this._editorWidth=p.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=(0,c.createFastDomNode)(document.createElement("div")),k.PartFingerprints.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=(0,c.createFastDomNode)(document.createElement("div")),k.PartFingerprints.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(f){const b=this._context.configuration.options.get(146);return this._verticalScrollbarWidth=b.verticalScrollbarWidth,this._minimapWidth=b.minimap.minimapWidth,this._horizontalScrollbarHeight=b.horizontalScrollbarHeight,this._editorHeight=b.height,this._editorWidth=b.width,!0}addWidget(f){const _=(0,c.createFastDomNode)(f.getDomNode());this._widgets[f.getId()]={widget:f,preference:null,domNode:_},_.setPosition("absolute"),_.setAttribute("widgetId",f.getId()),f.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(_):this._domNode.appendChild(_),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(f,_){const b=this._widgets[f.getId()],p=_?_.preference:null,n=_?.stackOridinal;return b.preference===p&&b.stack===n?(this._updateMaxMinWidth(),!1):(b.preference=p,b.stack=n,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(f){const _=f.getId();if(this._widgets.hasOwnProperty(_)){const p=this._widgets[_].domNode.domNode;delete this._widgets[_],p.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let f=0;const _=Object.keys(this._widgets);for(let b=0,p=_.length;b<p;b++){const n=_[b],t=this._widgets[n].widget.getMinContentWidthInPx?.();typeof t<"u"&&(f=Math.max(f,t))}this._context.viewLayout.setOverlayWidgetsMinWidth(f)}_renderWidget(f,_){const b=f.domNode;if(f.preference===null){b.setTop("");return}const p=2*this._verticalScrollbarWidth+this._minimapWidth;if(f.preference===0||f.preference===1){if(f.preference===1){const n=b.domNode.clientHeight;b.setTop(this._editorHeight-n-2*this._horizontalScrollbarHeight)}else b.setTop(0);f.stack!==void 0?(b.setTop(_[f.preference]),_[f.preference]+=b.domNode.clientWidth):b.setRight(p)}else if(f.preference===2)b.domNode.style.right="50%",f.stack!==void 0?(b.setTop(_[2]),_[2]+=b.domNode.clientHeight):b.setTop(0);else{const{top:n,left:s}=f.preference;if(this._context.configuration.options.get(42)&&f.widget.allowEditorOverflow){const i=this._viewDomNodeRect;b.setTop(n+i.top),b.setLeft(s+i.left),b.setPosition("fixed")}else b.setTop(n),b.setLeft(s),b.setPosition("absolute")}}prepareRender(f){this._viewDomNodeRect=E.getDomNodePagePosition(this._viewDomNode.domNode)}render(f){this._domNode.setWidth(this._editorWidth);const _=Object.keys(this._widgets),b=Array.from({length:3},()=>0);_.sort((p,n)=>(this._widgets[p].stack||0)-(this._widgets[n].stack||0));for(let p=0,n=_.length;p<n;p++){const s=_[p];this._renderWidget(this._widgets[s],b)}}}e.ViewOverlayWidgets=L}),define(oe[616],re([1,0,39,57,502]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rulers=void 0;class E extends k.ViewPart{constructor(y){super(y),this.domNode=(0,c.createFastDomNode)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const f=this._context.configuration.options;this._rulers=f.get(103),this._typicalHalfwidthCharacterWidth=f.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(y){const f=this._context.configuration.options;return this._rulers=f.get(103),this._typicalHalfwidthCharacterWidth=f.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(y){return y.scrollHeightChanged}prepareRender(y){}_ensureRulersCount(){const y=this._renderedRulers.length,f=this._rulers.length;if(y===f)return;if(y<f){const{tabSize:b}=this._context.viewModel.model.getOptions(),p=b;let n=f-y;for(;n>0;){const s=(0,c.createFastDomNode)(document.createElement("div"));s.setClassName("view-ruler"),s.setWidth(p),this.domNode.appendChild(s),this._renderedRulers.push(s),n--}return}let _=y-f;for(;_>0;){const b=this._renderedRulers.pop();this.domNode.removeChild(b),_--}}render(y){this._ensureRulersCount();for(let f=0,_=this._rulers.length;f<_;f++){const b=this._renderedRulers[f],p=this._rulers[f];b.setBoxShadow(p.color?`1px 0 0 0 ${p.color} inset`:""),b.setHeight(Math.min(y.scrollHeight,1e6)),b.setLeft(p.column*this._typicalHalfwidthCharacterWidth)}}}e.Rulers=E}),define(oe[617],re([1,0,39,57,503]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollDecorationViewPart=void 0;class E extends k.ViewPart{constructor(y){super(y),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;const _=this._context.configuration.options.get(104);this._useShadows=_.useShadows,this._domNode=(0,c.createFastDomNode)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){const y=this._useShadows&&this._scrollTop>0;return this._shouldShow!==y?(this._shouldShow=y,!0):!1}getDomNode(){return this._domNode}_updateWidth(){const f=this._context.configuration.options.get(146);f.minimap.renderMinimap===0||f.minimap.minimapWidth>0&&f.minimap.minimapLeft===0?this._width=f.width:this._width=f.width-f.verticalScrollbarWidth}onConfigurationChanged(y){const _=this._context.configuration.options.get(104);return this._useShadows=_.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(y){return this._scrollTop=y.scrollTop,this._updateShouldShow()}prepareRender(y){}render(y){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}}e.ScrollDecorationViewPart=E}),define(oe[618],re([1,0,39,8,57,9]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewZones=void 0;const y=()=>{throw new Error("Invalid change accessor")};class f extends E.ViewPart{constructor(p){super(p);const n=this._context.configuration.options,s=n.get(146);this._lineHeight=n.get(67),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,this.domNode=(0,c.createFastDomNode)(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=(0,c.createFastDomNode)(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){const p=this._context.viewLayout.getWhitespaces(),n=new Map;for(const t of p)n.set(t.id,t);let s=!1;return this._context.viewModel.changeWhitespace(t=>{const i=Object.keys(this._zones);for(let o=0,g=i.length;o<g;o++){const u=i[o],l=this._zones[u],a=this._computeWhitespaceProps(l.delegate);l.isInHiddenArea=a.isInHiddenArea;const r=n.get(u);r&&(r.afterLineNumber!==a.afterViewLineNumber||r.height!==a.heightInPx)&&(t.changeOneWhitespace(u,a.afterViewLineNumber,a.heightInPx),this._safeCallOnComputedHeight(l.delegate,a.heightInPx),s=!0)}}),s}onConfigurationChanged(p){const n=this._context.configuration.options,s=n.get(146);return this._lineHeight=n.get(67),this._contentWidth=s.contentWidth,this._contentLeft=s.contentLeft,p.hasChanged(67)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(p){return this._recomputeWhitespacesProps()}onLinesDeleted(p){return!0}onScrollChanged(p){return p.scrollTopChanged||p.scrollWidthChanged}onZonesChanged(p){return!0}onLinesInserted(p){return!0}_getZoneOrdinal(p){return p.ordinal??p.afterColumn??1e4}_computeWhitespaceProps(p){if(p.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(p),minWidthInPx:this._minWidthInPixels(p)};let n;if(typeof p.afterColumn<"u")n=this._context.viewModel.model.validatePosition({lineNumber:p.afterLineNumber,column:p.afterColumn});else{const o=this._context.viewModel.model.validatePosition({lineNumber:p.afterLineNumber,column:1}).lineNumber;n=new L.Position(o,this._context.viewModel.model.getLineMaxColumn(o))}let s;n.column===this._context.viewModel.model.getLineMaxColumn(n.lineNumber)?s=this._context.viewModel.model.validatePosition({lineNumber:n.lineNumber+1,column:1}):s=this._context.viewModel.model.validatePosition({lineNumber:n.lineNumber,column:n.column+1});const t=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n,p.afterColumnAffinity,!0),i=p.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(s);return{isInHiddenArea:!i,afterViewLineNumber:t.lineNumber,heightInPx:i?this._heightInPixels(p):0,minWidthInPx:this._minWidthInPixels(p)}}changeViewZones(p){let n=!1;return this._context.viewModel.changeWhitespace(s=>{const t={addZone:i=>(n=!0,this._addZone(s,i)),removeZone:i=>{i&&(n=this._removeZone(s,i)||n)},layoutZone:i=>{i&&(n=this._layoutZone(s,i)||n)}};_(p,t),t.addZone=y,t.removeZone=y,t.layoutZone=y}),n}_addZone(p,n){const s=this._computeWhitespaceProps(n),i={whitespaceId:p.insertWhitespace(s.afterViewLineNumber,this._getZoneOrdinal(n),s.heightInPx,s.minWidthInPx),delegate:n,isInHiddenArea:s.isInHiddenArea,isVisible:!1,domNode:(0,c.createFastDomNode)(n.domNode),marginDomNode:n.marginDomNode?(0,c.createFastDomNode)(n.marginDomNode):null};return this._safeCallOnComputedHeight(i.delegate,s.heightInPx),i.domNode.setPosition("absolute"),i.domNode.domNode.style.width="100%",i.domNode.setDisplay("none"),i.domNode.setAttribute("monaco-view-zone",i.whitespaceId),this.domNode.appendChild(i.domNode),i.marginDomNode&&(i.marginDomNode.setPosition("absolute"),i.marginDomNode.domNode.style.width="100%",i.marginDomNode.setDisplay("none"),i.marginDomNode.setAttribute("monaco-view-zone",i.whitespaceId),this.marginDomNode.appendChild(i.marginDomNode)),this._zones[i.whitespaceId]=i,this.setShouldRender(),i.whitespaceId}_removeZone(p,n){if(this._zones.hasOwnProperty(n)){const s=this._zones[n];return delete this._zones[n],p.removeWhitespace(s.whitespaceId),s.domNode.removeAttribute("monaco-visible-view-zone"),s.domNode.removeAttribute("monaco-view-zone"),s.domNode.domNode.remove(),s.marginDomNode&&(s.marginDomNode.removeAttribute("monaco-visible-view-zone"),s.marginDomNode.removeAttribute("monaco-view-zone"),s.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(p,n){if(this._zones.hasOwnProperty(n)){const s=this._zones[n],t=this._computeWhitespaceProps(s.delegate);return s.isInHiddenArea=t.isInHiddenArea,p.changeOneWhitespace(s.whitespaceId,t.afterViewLineNumber,t.heightInPx),this._safeCallOnComputedHeight(s.delegate,t.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(p){return this._zones.hasOwnProperty(p)?!!this._zones[p].delegate.suppressMouseDown:!1}_heightInPixels(p){return typeof p.heightInPx=="number"?p.heightInPx:typeof p.heightInLines=="number"?this._lineHeight*p.heightInLines:this._lineHeight}_minWidthInPixels(p){return typeof p.minWidthInPx=="number"?p.minWidthInPx:0}_safeCallOnComputedHeight(p,n){if(typeof p.onComputedHeight=="function")try{p.onComputedHeight(n)}catch(s){(0,k.onUnexpectedError)(s)}}_safeCallOnDomNodeTop(p,n){if(typeof p.onDomNodeTop=="function")try{p.onDomNodeTop(n)}catch(s){(0,k.onUnexpectedError)(s)}}prepareRender(p){}render(p){const n=p.viewportData.whitespaceViewportData,s={};let t=!1;for(const o of n)this._zones[o.id].isInHiddenArea||(s[o.id]=o,t=!0);const i=Object.keys(this._zones);for(let o=0,g=i.length;o<g;o++){const u=i[o],l=this._zones[u];let a=0,r=0,d="none";s.hasOwnProperty(u)?(a=s[u].verticalOffset-p.bigNumbersDelta,r=s[u].height,d="block",l.isVisible||(l.domNode.setAttribute("monaco-visible-view-zone","true"),l.isVisible=!0),this._safeCallOnDomNodeTop(l.delegate,p.getScrolledTopFromAbsoluteTop(s[u].verticalOffset))):(l.isVisible&&(l.domNode.removeAttribute("monaco-visible-view-zone"),l.isVisible=!1),this._safeCallOnDomNodeTop(l.delegate,p.getScrolledTopFromAbsoluteTop(-1e6))),l.domNode.setTop(a),l.domNode.setHeight(r),l.domNode.setDisplay(d),l.marginDomNode&&(l.marginDomNode.setTop(a),l.marginDomNode.setHeight(r),l.marginDomNode.setDisplay(d))}t&&(this.domNode.setWidth(Math.max(p.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}}e.ViewZones=f;function _(b,p){try{return b(p)}catch(n){(0,k.onUnexpectedError)(n)}}}),define(oe[254],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewZonesChangedEvent=e.ViewTokensColorsChangedEvent=e.ViewTokensChangedEvent=e.ViewThemeChangedEvent=e.ViewScrollChangedEvent=e.ViewRevealRangeRequestEvent=e.ViewLinesInsertedEvent=e.ViewLinesDeletedEvent=e.ViewLinesChangedEvent=e.ViewLineMappingChangedEvent=e.ViewLanguageConfigurationEvent=e.ViewFocusChangedEvent=e.ViewFlushedEvent=e.ViewDecorationsChangedEvent=e.ViewCursorStateChangedEvent=e.ViewConfigurationChangedEvent=e.ViewCompositionEndEvent=e.ViewCompositionStartEvent=void 0;class c{constructor(){this.type=0}}e.ViewCompositionStartEvent=c;class k{constructor(){this.type=1}}e.ViewCompositionEndEvent=k;class E{constructor(d){this.type=2,this._source=d}hasChanged(d){return this._source.hasChanged(d)}}e.ViewConfigurationChangedEvent=E;class L{constructor(d,m,h){this.selections=d,this.modelSelections=m,this.reason=h,this.type=3}}e.ViewCursorStateChangedEvent=L;class y{constructor(d){this.type=4,d?(this.affectsMinimap=d.affectsMinimap,this.affectsOverviewRuler=d.affectsOverviewRuler,this.affectsGlyphMargin=d.affectsGlyphMargin,this.affectsLineNumber=d.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}e.ViewDecorationsChangedEvent=y;class f{constructor(){this.type=5}}e.ViewFlushedEvent=f;class _{constructor(d){this.type=6,this.isFocused=d}}e.ViewFocusChangedEvent=_;class b{constructor(){this.type=7}}e.ViewLanguageConfigurationEvent=b;class p{constructor(){this.type=8}}e.ViewLineMappingChangedEvent=p;class n{constructor(d,m){this.fromLineNumber=d,this.count=m,this.type=9}}e.ViewLinesChangedEvent=n;class s{constructor(d,m){this.type=10,this.fromLineNumber=d,this.toLineNumber=m}}e.ViewLinesDeletedEvent=s;class t{constructor(d,m){this.type=11,this.fromLineNumber=d,this.toLineNumber=m}}e.ViewLinesInsertedEvent=t;class i{constructor(d,m,h,v,C,w,S){this.source=d,this.minimalReveal=m,this.range=h,this.selections=v,this.verticalType=C,this.revealHorizontal=w,this.scrollType=S,this.type=12}}e.ViewRevealRangeRequestEvent=i;class o{constructor(d){this.type=13,this.scrollWidth=d.scrollWidth,this.scrollLeft=d.scrollLeft,this.scrollHeight=d.scrollHeight,this.scrollTop=d.scrollTop,this.scrollWidthChanged=d.scrollWidthChanged,this.scrollLeftChanged=d.scrollLeftChanged,this.scrollHeightChanged=d.scrollHeightChanged,this.scrollTopChanged=d.scrollTopChanged}}e.ViewScrollChangedEvent=o;class g{constructor(d){this.theme=d,this.type=14}}e.ViewThemeChangedEvent=g;class u{constructor(d){this.type=15,this.ranges=d}}e.ViewTokensChangedEvent=u;class l{constructor(){this.type=16}}e.ViewTokensColorsChangedEvent=l;class a{constructor(){this.type=17}}e.ViewZonesChangedEvent=a}),define(oe[149],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineDecorationsNormalizer=e.DecorationSegment=e.LineDecoration=void 0;class k{constructor(_,b,p,n){this.startColumn=_,this.endColumn=b,this.className=p,this.type=n,this._lineDecorationBrand=void 0}static _equals(_,b){return _.startColumn===b.startColumn&&_.endColumn===b.endColumn&&_.className===b.className&&_.type===b.type}static equalsArr(_,b){const p=_.length,n=b.length;if(p!==n)return!1;for(let s=0;s<p;s++)if(!k._equals(_[s],b[s]))return!1;return!0}static extractWrapped(_,b,p){if(_.length===0)return _;const n=b+1,s=p+1,t=p-b,i=[];let o=0;for(const g of _)g.endColumn<=n||g.startColumn>=s||(i[o++]=new k(Math.max(1,g.startColumn-n+1),Math.min(t+1,g.endColumn-n+1),g.className,g.type));return i}static filter(_,b,p,n){if(_.length===0)return[];const s=[];let t=0;for(let i=0,o=_.length;i<o;i++){const g=_[i],u=g.range;if(u.endLineNumber<b||u.startLineNumber>b||u.isEmpty()&&(g.type===0||g.type===3))continue;const l=u.startLineNumber===b?u.startColumn:p,a=u.endLineNumber===b?u.endColumn:n;s[t++]=new k(l,a,g.inlineClassName,g.type)}return s}static _typeCompare(_,b){const p=[2,0,1,3];return p[_]-p[b]}static compare(_,b){if(_.startColumn!==b.startColumn)return _.startColumn-b.startColumn;if(_.endColumn!==b.endColumn)return _.endColumn-b.endColumn;const p=k._typeCompare(_.type,b.type);return p!==0?p:_.className!==b.className?_.className<b.className?-1:1:0}}e.LineDecoration=k;class E{constructor(_,b,p,n){this.startOffset=_,this.endOffset=b,this.className=p,this.metadata=n}}e.DecorationSegment=E;class L{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(_){let b=0;for(let p=0,n=_.length;p<n;p++)b|=_[p];return b}consumeLowerThan(_,b,p){for(;this.count>0&&this.stopOffsets[0]<_;){let n=0;for(;n+1<this.count&&this.stopOffsets[n]===this.stopOffsets[n+1];)n++;p.push(new E(b,this.stopOffsets[n],this.classNames.join(" "),L._metadata(this.metadata))),b=this.stopOffsets[n]+1,this.stopOffsets.splice(0,n+1),this.classNames.splice(0,n+1),this.metadata.splice(0,n+1),this.count-=n+1}return this.count>0&&b<_&&(p.push(new E(b,_-1,this.classNames.join(" "),L._metadata(this.metadata))),b=_),b}insert(_,b,p){if(this.count===0||this.stopOffsets[this.count-1]<=_)this.stopOffsets.push(_),this.classNames.push(b),this.metadata.push(p);else for(let n=0;n<this.count;n++)if(this.stopOffsets[n]>=_){this.stopOffsets.splice(n,0,_),this.classNames.splice(n,0,b),this.metadata.splice(n,0,p);break}this.count++}}class y{static normalize(_,b){if(b.length===0)return[];const p=[],n=new L;let s=0;for(let t=0,i=b.length;t<i;t++){const o=b[t];let g=o.startColumn,u=o.endColumn;const l=o.className,a=o.type===1?2:o.type===2?4:0;if(g>1){const m=_.charCodeAt(g-2);c.isHighSurrogate(m)&&g--}if(u>1){const m=_.charCodeAt(u-2);c.isHighSurrogate(m)&&u--}const r=g-1,d=u-2;s=n.consumeLowerThan(r,s,p),n.count===0&&(s=r),n.insert(d,l,a)}return n.consumeLowerThan(1073741824,s,p),p}}e.LineDecorationsNormalizer=y}),define(oe[619],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinePart=void 0;class c{constructor(E,L,y,f){this.endIndex=E,this.type=L,this.metadata=y,this.containsRTL=f,this._linePartBrand=void 0}isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}}e.LinePart=c}),define(oe[620],re([1,0,11]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinesLayout=e.EditorWhitespace=void 0;class k{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(f){this._hasPending=!0,this._inserts.push(f)}change(f){this._hasPending=!0,this._changes.push(f)}remove(f){this._hasPending=!0,this._removes.push(f)}mustCommit(){return this._hasPending}commit(f){if(!this._hasPending)return;const _=this._inserts,b=this._changes,p=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],f._commitPendingChanges(_,b,p)}}class E{constructor(f,_,b,p,n){this.id=f,this.afterLineNumber=_,this.ordinal=b,this.height=p,this.minWidth=n,this.prefixSum=0}}e.EditorWhitespace=E;class L{static{this.INSTANCE_COUNT=0}constructor(f,_,b,p){this._instanceId=c.singleLetterHash(++L.INSTANCE_COUNT),this._pendingChanges=new k,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=f,this._lineHeight=_,this._paddingTop=b,this._paddingBottom=p}static findInsertionIndex(f,_,b){let p=0,n=f.length;for(;p<n;){const s=p+n>>>1;_===f[s].afterLineNumber?b<f[s].ordinal?n=s:p=s+1:_<f[s].afterLineNumber?n=s:p=s+1}return p}setLineHeight(f){this._checkPendingChanges(),this._lineHeight=f}setPadding(f,_){this._paddingTop=f,this._paddingBottom=_}onFlushed(f){this._checkPendingChanges(),this._lineCount=f}changeWhitespace(f){let _=!1;try{f({insertWhitespace:(p,n,s,t)=>{_=!0,p=p|0,n=n|0,s=s|0,t=t|0;const i=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new E(i,p,n,s,t)),i},changeOneWhitespace:(p,n,s)=>{_=!0,n=n|0,s=s|0,this._pendingChanges.change({id:p,newAfterLineNumber:n,newHeight:s})},removeWhitespace:p=>{_=!0,this._pendingChanges.remove({id:p})}})}finally{this._pendingChanges.commit(this)}return _}_commitPendingChanges(f,_,b){if((f.length>0||b.length>0)&&(this._minWidth=-1),f.length+_.length+b.length<=1){for(const i of f)this._insertWhitespace(i);for(const i of _)this._changeOneWhitespace(i.id,i.newAfterLineNumber,i.newHeight);for(const i of b){const o=this._findWhitespaceIndex(i.id);o!==-1&&this._removeWhitespace(o)}return}const p=new Set;for(const i of b)p.add(i.id);const n=new Map;for(const i of _)n.set(i.id,i);const s=i=>{const o=[];for(const g of i)if(!p.has(g.id)){if(n.has(g.id)){const u=n.get(g.id);g.afterLineNumber=u.newAfterLineNumber,g.height=u.newHeight}o.push(g)}return o},t=s(this._arr).concat(s(f));t.sort((i,o)=>i.afterLineNumber===o.afterLineNumber?i.ordinal-o.ordinal:i.afterLineNumber-o.afterLineNumber),this._arr=t,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(f){const _=L.findInsertionIndex(this._arr,f.afterLineNumber,f.ordinal);this._arr.splice(_,0,f),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,_-1)}_findWhitespaceIndex(f){const _=this._arr;for(let b=0,p=_.length;b<p;b++)if(_[b].id===f)return b;return-1}_changeOneWhitespace(f,_,b){const p=this._findWhitespaceIndex(f);if(p!==-1&&(this._arr[p].height!==b&&(this._arr[p].height=b,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,p-1)),this._arr[p].afterLineNumber!==_)){const n=this._arr[p];this._removeWhitespace(p),n.afterLineNumber=_,this._insertWhitespace(n)}}_removeWhitespace(f){this._arr.splice(f,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,f-1)}onLinesDeleted(f,_){this._checkPendingChanges(),f=f|0,_=_|0,this._lineCount-=_-f+1;for(let b=0,p=this._arr.length;b<p;b++){const n=this._arr[b].afterLineNumber;f<=n&&n<=_?this._arr[b].afterLineNumber=f-1:n>_&&(this._arr[b].afterLineNumber-=_-f+1)}}onLinesInserted(f,_){this._checkPendingChanges(),f=f|0,_=_|0,this._lineCount+=_-f+1;for(let b=0,p=this._arr.length;b<p;b++){const n=this._arr[b].afterLineNumber;f<=n&&(this._arr[b].afterLineNumber+=_-f+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(f){this._checkPendingChanges(),f=f|0;let _=Math.max(0,this._prefixSumValidIndex+1);_===0&&(this._arr[0].prefixSum=this._arr[0].height,_++);for(let b=_;b<=f;b++)this._arr[b].prefixSum=this._arr[b-1].prefixSum+this._arr[b].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,f),this._arr[f].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();const f=this._lineHeight*this._lineCount,_=this.getWhitespacesTotalHeight();return f+_+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(f){this._checkPendingChanges(),f=f|0;const _=this._findLastWhitespaceBeforeLineNumber(f);return _===-1?0:this.getWhitespacesAccumulatedHeight(_)}_findLastWhitespaceBeforeLineNumber(f){f=f|0;const _=this._arr;let b=0,p=_.length-1;for(;b<=p;){const s=(p-b|0)/2|0,t=b+s|0;if(_[t].afterLineNumber<f){if(t+1>=_.length||_[t+1].afterLineNumber>=f)return t;b=t+1|0}else p=t-1|0}return-1}_findFirstWhitespaceAfterLineNumber(f){f=f|0;const b=this._findLastWhitespaceBeforeLineNumber(f)+1;return b<this._arr.length?b:-1}getFirstWhitespaceIndexAfterLineNumber(f){return this._checkPendingChanges(),f=f|0,this._findFirstWhitespaceAfterLineNumber(f)}getVerticalOffsetForLineNumber(f,_=!1){this._checkPendingChanges(),f=f|0;let b;f>1?b=this._lineHeight*(f-1):b=0;const p=this.getWhitespaceAccumulatedHeightBeforeLineNumber(f-(_?1:0));return b+p+this._paddingTop}getVerticalOffsetAfterLineNumber(f,_=!1){this._checkPendingChanges(),f=f|0;const b=this._lineHeight*f,p=this.getWhitespaceAccumulatedHeightBeforeLineNumber(f+(_?1:0));return b+p+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let f=0;for(let _=0,b=this._arr.length;_<b;_++)f=Math.max(f,this._arr[_].minWidth);this._minWidth=f}return this._minWidth}isAfterLines(f){this._checkPendingChanges();const _=this.getLinesTotalHeight();return f>_}isInTopPadding(f){return this._paddingTop===0?!1:(this._checkPendingChanges(),f<this._paddingTop)}isInBottomPadding(f){if(this._paddingBottom===0)return!1;this._checkPendingChanges();const _=this.getLinesTotalHeight();return f>=_-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(f){if(this._checkPendingChanges(),f=f|0,f<0)return 1;const _=this._lineCount|0,b=this._lineHeight;let p=1,n=_;for(;p<n;){const s=(p+n)/2|0,t=this.getVerticalOffsetForLineNumber(s)|0;if(f>=t+b)p=s+1;else{if(f>=t)return s;n=s}}return p>_?_:p}getLinesViewportData(f,_){this._checkPendingChanges(),f=f|0,_=_|0;const b=this._lineHeight,p=this.getLineNumberAtOrAfterVerticalOffset(f)|0,n=this.getVerticalOffsetForLineNumber(p)|0;let s=this._lineCount|0,t=this.getFirstWhitespaceIndexAfterLineNumber(p)|0;const i=this.getWhitespacesCount()|0;let o,g;t===-1?(t=i,g=s+1,o=0):(g=this.getAfterLineNumberForWhitespaceIndex(t)|0,o=this.getHeightForWhitespaceIndex(t)|0);let u=n,l=u;const a=5e5;let r=0;n>=a&&(r=Math.floor(n/a)*a,r=Math.floor(r/b)*b,l-=r);const d=[],m=f+(_-f)/2;let h=-1;for(let S=p;S<=s;S++){if(h===-1){const D=u,I=u+b;(D<=m&&m<I||D>m)&&(h=S)}for(u+=b,d[S-p]=l,l+=b;g===S;)l+=o,u+=o,t++,t>=i?g=s+1:(g=this.getAfterLineNumberForWhitespaceIndex(t)|0,o=this.getHeightForWhitespaceIndex(t)|0);if(u>=_){s=S;break}}h===-1&&(h=s);const v=this.getVerticalOffsetForLineNumber(s)|0;let C=p,w=s;return C<w&&n<f&&C++,C<w&&v+b>_&&w--,{bigNumbersDelta:r,startLineNumber:p,endLineNumber:s,relativeVerticalOffset:d,centeredLineNumber:h,completelyVisibleStartLineNumber:C,completelyVisibleEndLineNumber:w,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(f){this._checkPendingChanges(),f=f|0;const _=this.getAfterLineNumberForWhitespaceIndex(f);let b;_>=1?b=this._lineHeight*_:b=0;let p;return f>0?p=this.getWhitespacesAccumulatedHeight(f-1):p=0,b+p+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(f){this._checkPendingChanges(),f=f|0;let _=0,b=this.getWhitespacesCount()-1;if(b<0)return-1;const p=this.getVerticalOffsetForWhitespaceIndex(b),n=this.getHeightForWhitespaceIndex(b);if(f>=p+n)return-1;for(;_<b;){const s=Math.floor((_+b)/2),t=this.getVerticalOffsetForWhitespaceIndex(s),i=this.getHeightForWhitespaceIndex(s);if(f>=t+i)_=s+1;else{if(f>=t)return s;b=s}}return _}getWhitespaceAtVerticalOffset(f){this._checkPendingChanges(),f=f|0;const _=this.getWhitespaceIndexAtOrAfterVerticallOffset(f);if(_<0||_>=this.getWhitespacesCount())return null;const b=this.getVerticalOffsetForWhitespaceIndex(_);if(b>f)return null;const p=this.getHeightForWhitespaceIndex(_),n=this.getIdForWhitespaceIndex(_),s=this.getAfterLineNumberForWhitespaceIndex(_);return{id:n,afterLineNumber:s,verticalOffset:b,height:p}}getWhitespaceViewportData(f,_){this._checkPendingChanges(),f=f|0,_=_|0;const b=this.getWhitespaceIndexAtOrAfterVerticallOffset(f),p=this.getWhitespacesCount()-1;if(b<0)return[];const n=[];for(let s=b;s<=p;s++){const t=this.getVerticalOffsetForWhitespaceIndex(s),i=this.getHeightForWhitespaceIndex(s);if(t>=_)break;n.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:t,height:i})}return n}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(f){return this._checkPendingChanges(),f=f|0,this._arr[f].id}getAfterLineNumberForWhitespaceIndex(f){return this._checkPendingChanges(),f=f|0,this._arr[f].afterLineNumber}getHeightForWhitespaceIndex(f){return this._checkPendingChanges(),f=f|0,this._arr[f].height}}e.LinesLayout=L}),define(oe[621],re([1,0,4]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportData=void 0;class k{constructor(L,y,f,_){this.selections=L,this.startLineNumber=y.startLineNumber|0,this.endLineNumber=y.endLineNumber|0,this.relativeVerticalOffset=y.relativeVerticalOffset,this.bigNumbersDelta=y.bigNumbersDelta|0,this.lineHeight=y.lineHeight|0,this.whitespaceViewportData=f,this._model=_,this.visibleRange=new c.Range(y.startLineNumber,this._model.getLineMinColumn(y.startLineNumber),y.endLineNumber,this._model.getLineMaxColumn(y.endLineNumber))}getViewLineRenderingData(L){return this._model.getViewportViewLineRenderingData(this.visibleRange,L)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}e.ViewportData=k}),define(oe[95],re([1,0,13,11,4]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRulerDecorationsGroup=e.ViewModelDecoration=e.SingleLineInlineDecoration=e.InlineDecoration=e.ViewLineRenderingData=e.ViewLineData=e.MinimapLinesRenderingData=e.Viewport=void 0;class L{constructor(i,o,g,u){this._viewportBrand=void 0,this.top=i|0,this.left=o|0,this.width=g|0,this.height=u|0}}e.Viewport=L;class y{constructor(i,o){this.tabSize=i,this.data=o}}e.MinimapLinesRenderingData=y;class f{constructor(i,o,g,u,l,a,r){this._viewLineDataBrand=void 0,this.content=i,this.continuesWithWrappedLine=o,this.minColumn=g,this.maxColumn=u,this.startVisibleColumn=l,this.tokens=a,this.inlineDecorations=r}}e.ViewLineData=f;class _{constructor(i,o,g,u,l,a,r,d,m,h){this.minColumn=i,this.maxColumn=o,this.content=g,this.continuesWithWrappedLine=u,this.isBasicASCII=_.isBasicASCII(g,a),this.containsRTL=_.containsRTL(g,this.isBasicASCII,l),this.tokens=r,this.inlineDecorations=d,this.tabSize=m,this.startVisibleColumn=h}static isBasicASCII(i,o){return o?k.isBasicASCII(i):!0}static containsRTL(i,o,g){return!o&&g?k.containsRTL(i):!1}}e.ViewLineRenderingData=_;class b{constructor(i,o,g){this.range=i,this.inlineClassName=o,this.type=g}}e.InlineDecoration=b;class p{constructor(i,o,g,u){this.startOffset=i,this.endOffset=o,this.inlineClassName=g,this.inlineClassNameAffectsLetterSpacing=u}toInlineDecoration(i){return new b(new E.Range(i,this.startOffset+1,i,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}e.SingleLineInlineDecoration=p;class n{constructor(i,o){this._viewModelDecorationBrand=void 0,this.range=i,this.options=o}}e.ViewModelDecoration=n;class s{constructor(i,o,g){this.color=i,this.zIndex=o,this.data=g}static compareByRenderingProps(i,o){return i.zIndex===o.zIndex?i.color<o.color?-1:i.color>o.color?1:0:i.zIndex-o.zIndex}static equals(i,o){return i.color===o.color&&i.zIndex===o.zIndex&&c.equals(i.data,o.data)}static equalsArr(i,o){return c.equals(i,o,s.equals)}}e.OverviewRulerDecorationsGroup=s}),define(oe[622],re([1,0,40]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphMarginLanesModel=void 0;const k=c.GlyphMarginLane.Right;class E{constructor(y){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((y+1)*k/8))}reset(y){const f=Math.ceil((y+1)*k/8);this.lanes.length<f?this.lanes=new Uint8Array(f):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(y,f,_){_&&(this.persist|=1<<y-1);for(let b=f.startLineNumber;b<=f.endLineNumber;b++){const p=k*b+(y-1);this.lanes[p>>>3]|=1<<p%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(b))}}getLanesAtLine(y){const f=[];let _=k*y;for(let b=0;b<k;b++)(this.persist&1<<b||this.lanes[_>>>3]&1<<_%8)&&f.push(b+1),_++;return f.length?f:[c.GlyphMarginLane.Center]}countAtLine(y){let f=k*y,_=0;for(let b=0;b<k;b++)(this.persist&1<<b||this.lanes[f>>>3]&1<<f%8)&&_++,f++;return _}}e.GlyphMarginLanesModel=E}),define(oe[623],re([1,0,94,9,131,95]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createModelLineProjection=y;function y(t,i){return t===null?i?_.INSTANCE:b.INSTANCE:new f(t,i)}class f{constructor(i,o){this._projectionData=i,this._isVisible=o}isVisible(){return this._isVisible}setVisible(i){return this._isVisible=i,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(i,o,g){this._assertVisible();const u=g>0?this._projectionData.breakOffsets[g-1]:0,l=this._projectionData.breakOffsets[g];let a;if(this._projectionData.injectionOffsets!==null){const r=this._projectionData.injectionOffsets.map((m,h)=>new E.LineInjectedText(0,0,m+1,this._projectionData.injectionOptions[h],0));a=E.LineInjectedText.applyInjectedText(i.getLineContent(o),r).substring(u,l)}else a=i.getValueInRange({startLineNumber:o,startColumn:u+1,endLineNumber:o,endColumn:l+1});return g>0&&(a=n(this._projectionData.wrappedTextIndentLength)+a),a}getViewLineLength(i,o,g){return this._assertVisible(),this._projectionData.getLineLength(g)}getViewLineMinColumn(i,o,g){return this._assertVisible(),this._projectionData.getMinOutputOffset(g)+1}getViewLineMaxColumn(i,o,g){return this._assertVisible(),this._projectionData.getMaxOutputOffset(g)+1}getViewLineData(i,o,g){const u=new Array;return this.getViewLinesData(i,o,g,1,0,[!0],u),u[0]}getViewLinesData(i,o,g,u,l,a,r){this._assertVisible();const d=this._projectionData,m=d.injectionOffsets,h=d.injectionOptions;let v=null;if(m){v=[];let w=0,S=0;for(let D=0;D<d.getOutputLineCount();D++){const I=new Array;v[D]=I;const T=D>0?d.breakOffsets[D-1]:0,M=d.breakOffsets[D];for(;S<m.length;){const A=h[S].content.length,R=m[S]+w,N=R+A;if(R>M)break;if(T<N){const O=h[S];if(O.inlineClassName){const x=D>0?d.wrappedTextIndentLength:0,F=x+Math.max(R-T,0),W=x+Math.min(N-T,M-T);F!==W&&I.push(new L.SingleLineInlineDecoration(F,W,O.inlineClassName,O.inlineClassNameAffectsLetterSpacing))}}if(N<=M)w+=A,S++;else break}}}let C;m?C=i.tokenization.getLineTokens(o).withInserted(m.map((w,S)=>({offset:w,text:h[S].content,tokenMetadata:c.LineTokens.defaultTokenMetadata}))):C=i.tokenization.getLineTokens(o);for(let w=g;w<g+u;w++){const S=l+w-g;if(!a[S]){r[S]=null;continue}r[S]=this._getViewLineData(C,v?v[w]:null,w)}}_getViewLineData(i,o,g){this._assertVisible();const u=this._projectionData,l=g>0?u.wrappedTextIndentLength:0,a=g>0?u.breakOffsets[g-1]:0,r=u.breakOffsets[g],d=i.sliceAndInflate(a,r,l);let m=d.getLineContent();g>0&&(m=n(u.wrappedTextIndentLength)+m);const h=this._projectionData.getMinOutputOffset(g)+1,v=m.length+1,C=g+1<this.getViewLineCount(),w=g===0?0:u.breakOffsetsVisibleColumn[g-1];return new L.ViewLineData(m,C,h,v,w,d,o)}getModelColumnOfViewPosition(i,o){return this._assertVisible(),this._projectionData.translateToInputOffset(i,o-1)+1}getViewPositionOfModelPosition(i,o,g=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(o-1,g).toPosition(i)}getViewLineNumberOfModelPosition(i,o){this._assertVisible();const g=this._projectionData.translateToOutputPosition(o-1);return i+g.outputLineIndex}normalizePosition(i,o,g){const u=o.lineNumber-i;return this._projectionData.normalizeOutputPosition(i,o.column-1,g).toPosition(u)}getInjectedTextAt(i,o){return this._projectionData.getInjectedText(i,o-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class _{static{this.INSTANCE=new _}constructor(){}isVisible(){return!0}setVisible(i){return i?this:b.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(i,o,g){return i.getLineContent(o)}getViewLineLength(i,o,g){return i.getLineLength(o)}getViewLineMinColumn(i,o,g){return i.getLineMinColumn(o)}getViewLineMaxColumn(i,o,g){return i.getLineMaxColumn(o)}getViewLineData(i,o,g){const u=i.tokenization.getLineTokens(o),l=u.getLineContent();return new L.ViewLineData(l,!1,1,l.length+1,0,u.inflate(),null)}getViewLinesData(i,o,g,u,l,a,r){if(!a[l]){r[l]=null;return}r[l]=this.getViewLineData(i,o,0)}getModelColumnOfViewPosition(i,o){return o}getViewPositionOfModelPosition(i,o){return new k.Position(i,o)}getViewLineNumberOfModelPosition(i,o){return i}normalizePosition(i,o,g){return o}getInjectedTextAt(i,o){return null}}class b{static{this.INSTANCE=new b}constructor(){}isVisible(){return!1}setVisible(i){return i?_.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(i,o,g){throw new Error("Not supported")}getViewLineLength(i,o,g){throw new Error("Not supported")}getViewLineMinColumn(i,o,g){throw new Error("Not supported")}getViewLineMaxColumn(i,o,g){throw new Error("Not supported")}getViewLineData(i,o,g){throw new Error("Not supported")}getViewLinesData(i,o,g,u,l,a,r){throw new Error("Not supported")}getModelColumnOfViewPosition(i,o){throw new Error("Not supported")}getViewPositionOfModelPosition(i,o){throw new Error("Not supported")}getViewLineNumberOfModelPosition(i,o){throw new Error("Not supported")}normalizePosition(i,o,g){throw new Error("Not supported")}getInjectedTextAt(i,o){throw new Error("Not supported")}}const p=[""];function n(t){if(t>=p.length)for(let i=1;i<=t;i++)p[i]=s(i);return p[t]}function s(t){return new Array(t+1).join(" ")}}),define(oe[624],re([1,0,11,143,131,341]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MonospaceLineBreaksComputerFactory=void 0;class y{static create(u){return new y(u.get(135),u.get(134))}constructor(u,l){this.classifier=new f(u,l)}createLineBreaksComputer(u,l,a,r,d){const m=[],h=[],v=[];return{addRequest:(C,w,S)=>{m.push(C),h.push(w),v.push(S)},finalize:()=>{const C=u.typicalFullwidthCharacterWidth/u.typicalHalfwidthCharacterWidth,w=[];for(let S=0,D=m.length;S<D;S++){const I=h[S],T=v[S];T&&!T.injectionOptions&&!I?w[S]=p(this.classifier,T,m[S],l,a,C,r,d):w[S]=n(this.classifier,m[S],I,l,a,C,r,d)}return _.length=0,b.length=0,w}}}}e.MonospaceLineBreaksComputerFactory=y;class f extends k.CharacterClassifier{constructor(u,l){super(0);for(let a=0;a<u.length;a++)this.set(u.charCodeAt(a),1);for(let a=0;a<l.length;a++)this.set(l.charCodeAt(a),2)}get(u){return u>=0&&u<256?this._asciiMap[u]:u>=12352&&u<=12543||u>=13312&&u<=19903||u>=19968&&u<=40959?3:this._map.get(u)||this._defaultValue}}let _=[],b=[];function p(g,u,l,a,r,d,m,h){if(r===-1)return null;const v=l.length;if(v<=1)return null;const C=h==="keepAll",w=u.breakOffsets,S=u.breakOffsetsVisibleColumn,D=o(l,a,r,d,m),I=r-D,T=_,M=b;let A=0,R=0,N=0,O=r;const x=w.length;let F=0;if(F>=0){let W=Math.abs(S[F]-O);for(;F+1<x;){const z=Math.abs(S[F+1]-O);if(z>=W)break;W=z,F++}}for(;F<x;){let W=F<0?0:w[F],z=F<0?0:S[F];R>W&&(W=R,z=N);let q=0,H=0,K=0,U=0;if(z<=O){let Q=z,X=W===0?0:l.charCodeAt(W-1),G=W===0?0:g.get(X),P=!0;for(let te=W;te<v;te++){const se=te,ue=l.charCodeAt(te);let ge,pe;if(c.isHighSurrogate(ue)?(te++,ge=0,pe=2):(ge=g.get(ue),pe=s(ue,Q,a,d)),se>R&&i(X,G,ue,ge,C)&&(q=se,H=Q),Q+=pe,Q>O){se>R?(K=se,U=Q-pe):(K=te+1,U=Q),Q-H>I&&(q=0),P=!1;break}X=ue,G=ge}if(P){A>0&&(T[A]=w[w.length-1],M[A]=S[w.length-1],A++);break}}if(q===0){let Q=z,X=l.charCodeAt(W),G=g.get(X),P=!1;for(let te=W-1;te>=R;te--){const se=te+1,ue=l.charCodeAt(te);if(ue===9){P=!0;break}let ge,pe;if(c.isLowSurrogate(ue)?(te--,ge=0,pe=2):(ge=g.get(ue),pe=c.isFullWidthCharacter(ue)?d:1),Q<=O){if(K===0&&(K=se,U=Q),Q<=O-I)break;if(i(ue,ge,X,G,C)){q=se,H=Q;break}}Q-=pe,X=ue,G=ge}if(q!==0){const te=I-(U-H);if(te<=a){const se=l.charCodeAt(K);let ue;c.isHighSurrogate(se)?ue=2:ue=s(se,U,a,d),te-ue<0&&(q=0)}}if(P){F--;continue}}if(q===0&&(q=K,H=U),q<=R){const Q=l.charCodeAt(R);c.isHighSurrogate(Q)?(q=R+2,H=N+2):(q=R+1,H=N+s(Q,N,a,d))}for(R=q,T[A]=q,N=H,M[A]=H,A++,O=H+I;F<0||F<x&&S[F]<H;)F++;let Y=Math.abs(S[F]-O);for(;F+1<x;){const Q=Math.abs(S[F+1]-O);if(Q>=Y)break;Y=Q,F++}}return A===0?null:(T.length=A,M.length=A,_=u.breakOffsets,b=u.breakOffsetsVisibleColumn,u.breakOffsets=T,u.breakOffsetsVisibleColumn=M,u.wrappedTextIndentLength=D,u)}function n(g,u,l,a,r,d,m,h){const v=E.LineInjectedText.applyInjectedText(u,l);let C,w;if(l&&l.length>0?(C=l.map(H=>H.options),w=l.map(H=>H.column-1)):(C=null,w=null),r===-1)return C?new L.ModelLineProjectionData(w,C,[v.length],[],0):null;const S=v.length;if(S<=1)return C?new L.ModelLineProjectionData(w,C,[v.length],[],0):null;const D=h==="keepAll",I=o(v,a,r,d,m),T=r-I,M=[],A=[];let R=0,N=0,O=0,x=r,F=v.charCodeAt(0),W=g.get(F),z=s(F,0,a,d),q=1;c.isHighSurrogate(F)&&(z+=1,F=v.charCodeAt(1),W=g.get(F),q++);for(let H=q;H<S;H++){const K=H,U=v.charCodeAt(H);let Y,Q;c.isHighSurrogate(U)?(H++,Y=0,Q=2):(Y=g.get(U),Q=s(U,z,a,d)),i(F,W,U,Y,D)&&(N=K,O=z),z+=Q,z>x&&((N===0||z-O>T)&&(N=K,O=z-Q),M[R]=N,A[R]=O,R++,x=O+T,N=0),F=U,W=Y}return R===0&&(!l||l.length===0)?null:(M[R]=S,A[R]=z,new L.ModelLineProjectionData(w,C,M,A,I))}function s(g,u,l,a){return g===9?l-u%l:c.isFullWidthCharacter(g)||g<32?a:1}function t(g,u){return u-g%u}function i(g,u,l,a,r){return l!==32&&(u===2&&a!==2||u!==1&&a===1||!r&&u===3&&a!==2||!r&&a===3&&u!==1)}function o(g,u,l,a,r){let d=0;if(r!==0){const m=c.firstNonWhitespaceIndex(g);if(m!==-1){for(let v=0;v<m;v++){const C=g.charCodeAt(v)===9?t(d,u):1;d+=C}const h=r===3?2:r===2?1:0;for(let v=0;v<h;v++){const C=t(d,u);d+=C}d+a>l&&(d=0)}}return d}}),define(oe[347],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewZoneManager=e.OverviewRulerZone=e.ColorZone=void 0;class c{constructor(y,f,_){this._colorZoneBrand=void 0,this.from=y|0,this.to=f|0,this.colorId=_|0}static compare(y,f){return y.colorId===f.colorId?y.from===f.from?y.to-f.to:y.from-f.from:y.colorId-f.colorId}}e.ColorZone=c;class k{constructor(y,f,_,b){this._overviewRulerZoneBrand=void 0,this.startLineNumber=y,this.endLineNumber=f,this.heightInLines=_,this.color=b,this._colorZone=null}static compare(y,f){return y.color===f.color?y.startLineNumber===f.startLineNumber?y.heightInLines===f.heightInLines?y.endLineNumber-f.endLineNumber:y.heightInLines-f.heightInLines:y.startLineNumber-f.startLineNumber:y.color<f.color?-1:1}setColorZone(y){this._colorZone=y}getColorZones(){return this._colorZone}}e.OverviewRulerZone=k;class E{constructor(y){this._getVerticalOffsetForLine=y,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(y){this._zones=y,this._zones.sort(k.compare)}setLineHeight(y){return this._lineHeight===y?!1:(this._lineHeight=y,this._colorZonesInvalid=!0,!0)}setPixelRatio(y){this._pixelRatio=y,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(y){return this._domWidth===y?!1:(this._domWidth=y,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(y){return this._domHeight===y?!1:(this._domHeight=y,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(y){return this._outerHeight===y?!1:(this._outerHeight=y,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const y=this._colorZonesInvalid,f=Math.floor(this._lineHeight),_=Math.floor(this.getCanvasHeight()),b=Math.floor(this._outerHeight),p=_/b,n=Math.floor(4*this._pixelRatio/2),s=[];for(let t=0,i=this._zones.length;t<i;t++){const o=this._zones[t];if(!y){const C=o.getColorZones();if(C){s.push(C);continue}}const g=this._getVerticalOffsetForLine(o.startLineNumber),u=o.heightInLines===0?this._getVerticalOffsetForLine(o.endLineNumber)+f:g+o.heightInLines*f,l=Math.floor(p*g),a=Math.floor(p*u);let r=Math.floor((l+a)/2),d=a-r;d<n&&(d=n),r-d<0&&(r=d),r+d>_&&(r=_-d);const m=o.color;let h=this._color2Id[m];h||(h=++this._lastAssignedId,this._color2Id[m]=h,this._id2Color[h]=m);const v=new c(r-d,r+d,h);o.setColorZone(v),s.push(v)}return this._colorZonesInvalid=!1,s.sort(c.compare),s}}e.OverviewZoneManager=E}),define(oe[625],re([1,0,39,347,173]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRuler=void 0;class L extends E.ViewEventHandler{constructor(f,_){super(),this._context=f;const b=this._context.configuration.options;this._domNode=(0,c.createFastDomNode)(document.createElement("canvas")),this._domNode.setClassName(_),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new k.OverviewZoneManager(p=>this._context.viewLayout.getVerticalOffsetForLineNumber(p)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(b.get(67)),this._zoneManager.setPixelRatio(b.get(144)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(f){const _=this._context.configuration.options;return f.hasChanged(67)&&(this._zoneManager.setLineHeight(_.get(67)),this._render()),f.hasChanged(144)&&(this._zoneManager.setPixelRatio(_.get(144)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(f){return this._render(),!0}onScrollChanged(f){return f.scrollHeightChanged&&(this._zoneManager.setOuterHeight(f.scrollHeight),this._render()),!0}onZonesChanged(f){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(f){this._domNode.setTop(f.top),this._domNode.setRight(f.right);let _=!1;_=this._zoneManager.setDOMWidth(f.width)||_,_=this._zoneManager.setDOMHeight(f.height)||_,_&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(f){this._zoneManager.setZones(f),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;const f=this._zoneManager.getCanvasWidth(),_=this._zoneManager.getCanvasHeight(),b=this._zoneManager.resolveColorZones(),p=this._zoneManager.getId2Color(),n=this._domNode.domNode.getContext("2d");return n.clearRect(0,0,f,_),b.length>0&&this._renderOneLane(n,b,p,f),!0}_renderOneLane(f,_,b,p){let n=0,s=0,t=0;for(const i of _){const o=i.colorId,g=i.from,u=i.to;o!==n?(f.fillRect(0,s,p,t-s),n=o,f.fillStyle=b[n],s=g,t=u):t>=g?t=Math.max(t,u):(f.fillRect(0,s,p,t-s),s=g,t=u)}f.fillRect(0,s,p,t-s)}}e.OverviewRuler=L}),define(oe[626],re([1,0,573]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewContext=void 0;class k{constructor(L,y,f){this.configuration=L,this.theme=new c.EditorTheme(y),this.viewModel=f,this.viewLayout=f.viewLayout}addEventHandler(L){this.viewModel.addViewEventHandler(L)}removeEventHandler(L){this.viewModel.removeViewEventHandler(L)}}e.ViewContext=k}),define(oe[255],re([1,0,6,2]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ModelTokensChangedEvent=e.ModelOptionsChangedEvent=e.ModelContentChangedEvent=e.ModelLanguageConfigurationChangedEvent=e.ModelLanguageChangedEvent=e.ModelDecorationsChangedEvent=e.ReadOnlyEditAttemptEvent=e.CursorStateChangedEvent=e.HiddenAreasChangedEvent=e.ViewZonesChangedEvent=e.ScrollChangedEvent=e.FocusChangedEvent=e.ContentSizeChangedEvent=e.ViewModelEventsCollector=e.ViewModelEventDispatcher=void 0;class E extends k.Disposable{constructor(){super(),this._onEvent=this._register(new c.Emitter),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(r){this._addOutgoingEvent(r),this._emitOutgoingEvents()}_addOutgoingEvent(r){for(let d=0,m=this._outgoingEvents.length;d<m;d++){const h=this._outgoingEvents[d].kind===r.kind?this._outgoingEvents[d].attemptToMerge(r):null;if(h){this._outgoingEvents[d]=h;return}}this._outgoingEvents.push(r)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const r=this._outgoingEvents.shift();r.isNoOp()||this._onEvent.fire(r)}}addViewEventHandler(r){for(let d=0,m=this._eventHandlers.length;d<m;d++)this._eventHandlers[d]===r&&console.warn("Detected duplicate listener in ViewEventDispatcher",r);this._eventHandlers.push(r)}removeViewEventHandler(r){for(let d=0;d<this._eventHandlers.length;d++)if(this._eventHandlers[d]===r){this._eventHandlers.splice(d,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new L),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){const r=this._collector.outgoingEvents,d=this._collector.viewEvents;this._collector=null;for(const m of r)this._addOutgoingEvent(m);d.length>0&&this._emitMany(d)}this._emitOutgoingEvents()}emitSingleViewEvent(r){try{this.beginEmitViewEvents().emitViewEvent(r)}finally{this.endEmitViewEvents()}}_emitMany(r){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(r):this._viewEventQueue=r,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const r=this._viewEventQueue;this._viewEventQueue=null;const d=this._eventHandlers.slice(0);for(const m of d)m.handleEvents(r)}}}e.ViewModelEventDispatcher=E;class L{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(r){this.viewEvents.push(r)}emitOutgoingEvent(r){this.outgoingEvents.push(r)}}e.ViewModelEventsCollector=L;class y{constructor(r,d,m,h){this.kind=0,this._oldContentWidth=r,this._oldContentHeight=d,this.contentWidth=m,this.contentHeight=h,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(r){return r.kind!==this.kind?null:new y(this._oldContentWidth,this._oldContentHeight,r.contentWidth,r.contentHeight)}}e.ContentSizeChangedEvent=y;class f{constructor(r,d){this.kind=1,this.oldHasFocus=r,this.hasFocus=d}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(r){return r.kind!==this.kind?null:new f(this.oldHasFocus,r.hasFocus)}}e.FocusChangedEvent=f;class _{constructor(r,d,m,h,v,C,w,S){this.kind=2,this._oldScrollWidth=r,this._oldScrollLeft=d,this._oldScrollHeight=m,this._oldScrollTop=h,this.scrollWidth=v,this.scrollLeft=C,this.scrollHeight=w,this.scrollTop=S,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(r){return r.kind!==this.kind?null:new _(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,r.scrollWidth,r.scrollLeft,r.scrollHeight,r.scrollTop)}}e.ScrollChangedEvent=_;class b{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(r){return r.kind!==this.kind?null:this}}e.ViewZonesChangedEvent=b;class p{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(r){return r.kind!==this.kind?null:this}}e.HiddenAreasChangedEvent=p;class n{constructor(r,d,m,h,v,C,w){this.kind=6,this.oldSelections=r,this.selections=d,this.oldModelVersionId=m,this.modelVersionId=h,this.source=v,this.reason=C,this.reachedMaxCursorCount=w}static _selectionsAreEqual(r,d){if(!r&&!d)return!0;if(!r||!d)return!1;const m=r.length,h=d.length;if(m!==h)return!1;for(let v=0;v<m;v++)if(!r[v].equalsSelection(d[v]))return!1;return!0}isNoOp(){return n._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(r){return r.kind!==this.kind?null:new n(this.oldSelections,r.selections,this.oldModelVersionId,r.modelVersionId,r.source,r.reason,this.reachedMaxCursorCount||r.reachedMaxCursorCount)}}e.CursorStateChangedEvent=n;class s{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(r){return r.kind!==this.kind?null:this}}e.ReadOnlyEditAttemptEvent=s;class t{constructor(r){this.event=r,this.kind=7}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelDecorationsChangedEvent=t;class i{constructor(r){this.event=r,this.kind=8}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelLanguageChangedEvent=i;class o{constructor(r){this.event=r,this.kind=9}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelLanguageConfigurationChangedEvent=o;class g{constructor(r){this.event=r,this.kind=10}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelContentChangedEvent=g;class u{constructor(r){this.event=r,this.kind=11}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelOptionsChangedEvent=u;class l{constructor(r){this.event=r,this.kind=12}isNoOp(){return!1}attemptToMerge(r){return null}}e.ModelTokensChangedEvent=l}),define(oe[627],re([1,0,6,2,162,620,95,255]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewLayout=void 0;const _=125;class b{constructor(t,i,o,g){t=t|0,i=i|0,o=o|0,g=g|0,t<0&&(t=0),i<0&&(i=0),o<0&&(o=0),g<0&&(g=0),this.width=t,this.contentWidth=i,this.scrollWidth=Math.max(t,i),this.height=o,this.contentHeight=g,this.scrollHeight=Math.max(o,g)}equals(t){return this.width===t.width&&this.contentWidth===t.contentWidth&&this.height===t.height&&this.contentHeight===t.contentHeight}}class p extends k.Disposable{constructor(t,i){super(),this._onDidContentSizeChange=this._register(new c.Emitter),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new b(0,0,0,0),this._scrollable=this._register(new E.Scrollable({forceIntegerValues:!0,smoothScrollDuration:t,scheduleAtNextAnimationFrame:i})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(t){this._scrollable.setSmoothScrollDuration(t)}validateScrollPosition(t){return this._scrollable.validateScrollPosition(t)}getScrollDimensions(){return this._dimensions}setScrollDimensions(t){if(this._dimensions.equals(t))return;const i=this._dimensions;this._dimensions=t,this._scrollable.setScrollDimensions({width:t.width,scrollWidth:t.scrollWidth,height:t.height,scrollHeight:t.scrollHeight},!0);const o=i.contentWidth!==t.contentWidth,g=i.contentHeight!==t.contentHeight;(o||g)&&this._onDidContentSizeChange.fire(new f.ContentSizeChangedEvent(i.contentWidth,i.contentHeight,t.contentWidth,t.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(t){this._scrollable.setScrollPositionNow(t)}setScrollPositionSmooth(t){this._scrollable.setScrollPositionSmooth(t)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class n extends k.Disposable{constructor(t,i,o){super(),this._configuration=t;const g=this._configuration.options,u=g.get(146),l=g.get(84);this._linesLayout=new L.LinesLayout(i,g.get(67),l.top,l.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new p(0,o)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new b(u.contentWidth,0,u.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(115)?_:0)}onConfigurationChanged(t){const i=this._configuration.options;if(t.hasChanged(67)&&this._linesLayout.setLineHeight(i.get(67)),t.hasChanged(84)){const o=i.get(84);this._linesLayout.setPadding(o.top,o.bottom)}if(t.hasChanged(146)){const o=i.get(146),g=o.contentWidth,u=o.height,l=this._scrollable.getScrollDimensions(),a=l.contentWidth;this._scrollable.setScrollDimensions(new b(g,l.contentWidth,u,this._getContentHeight(g,u,a)))}else this._updateHeight();t.hasChanged(115)&&this._configureSmoothScrollDuration()}onFlushed(t){this._linesLayout.onFlushed(t)}onLinesDeleted(t,i){this._linesLayout.onLinesDeleted(t,i)}onLinesInserted(t,i){this._linesLayout.onLinesInserted(t,i)}_getHorizontalScrollbarHeight(t,i){const g=this._configuration.options.get(104);return g.horizontal===2||t>=i?0:g.horizontalScrollbarSize}_getContentHeight(t,i,o){const g=this._configuration.options;let u=this._linesLayout.getLinesTotalHeight();return g.get(106)?u+=Math.max(0,i-g.get(67)-g.get(84).bottom):g.get(104).ignoreHorizontalScrollbarInContentHeight||(u+=this._getHorizontalScrollbarHeight(t,o)),u}_updateHeight(){const t=this._scrollable.getScrollDimensions(),i=t.width,o=t.height,g=t.contentWidth;this._scrollable.setScrollDimensions(new b(i,t.contentWidth,o,this._getContentHeight(i,o,g)))}getCurrentViewport(){const t=this._scrollable.getScrollDimensions(),i=this._scrollable.getCurrentScrollPosition();return new y.Viewport(i.scrollTop,i.scrollLeft,t.width,t.height)}getFutureViewport(){const t=this._scrollable.getScrollDimensions(),i=this._scrollable.getFutureScrollPosition();return new y.Viewport(i.scrollTop,i.scrollLeft,t.width,t.height)}_computeContentWidth(){const t=this._configuration.options,i=this._maxLineWidth,o=t.get(147),g=t.get(50),u=t.get(146);if(o.isViewportWrapping){const l=t.get(73);return i>u.contentWidth+g.typicalHalfwidthCharacterWidth&&l.enabled&&l.side==="right"?i+u.verticalScrollbarWidth:i}else{const l=t.get(105)*g.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(i+l+u.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(t){this._maxLineWidth=t,this._updateContentWidth()}setOverlayWidgetsMinWidth(t){this._overlayWidgetsMinWidth=t,this._updateContentWidth()}_updateContentWidth(){const t=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new b(t.width,this._computeContentWidth(),t.height,t.contentHeight)),this._updateHeight()}saveState(){const t=this._scrollable.getFutureScrollPosition(),i=t.scrollTop,o=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(i),g=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(o);return{scrollTop:i,scrollTopWithoutViewZones:i-g,scrollLeft:t.scrollLeft}}changeWhitespace(t){const i=this._linesLayout.changeWhitespace(t);return i&&this.onHeightMaybeChanged(),i}getVerticalOffsetForLineNumber(t,i=!1){return this._linesLayout.getVerticalOffsetForLineNumber(t,i)}getVerticalOffsetAfterLineNumber(t,i=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(t,i)}isAfterLines(t){return this._linesLayout.isAfterLines(t)}isInTopPadding(t){return this._linesLayout.isInTopPadding(t)}isInBottomPadding(t){return this._linesLayout.isInBottomPadding(t)}getLineNumberAtVerticalOffset(t){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t)}getWhitespaceAtVerticalOffset(t){return this._linesLayout.getWhitespaceAtVerticalOffset(t)}getLinesViewportData(){const t=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(t.top,t.top+t.height)}getLinesViewportDataAtScrollTop(t){const i=this._scrollable.getScrollDimensions();return t+i.height>i.scrollHeight&&(t=i.scrollHeight-i.height),t<0&&(t=0),this._linesLayout.getLinesViewportData(t,t+i.height)}getWhitespaceViewportData(){const t=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(t.top,t.top+t.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(t){return this._scrollable.validateScrollPosition(t)}setScrollPosition(t,i){i===1?this._scrollable.setScrollPositionNow(t):this._scrollable.setScrollPositionSmooth(t)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(t,i){const o=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:o.scrollLeft+t,scrollTop:o.scrollTop+i})}}e.ViewLayout=n}),define(oe[628],re([1,0,4,23]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoveCaretCommand=void 0;class E{constructor(y,f){this._selection=y,this._isMovingLeft=f}getEditOperations(y,f){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const _=this._selection.startLineNumber,b=this._selection.startColumn,p=this._selection.endColumn;if(!(this._isMovingLeft&&b===1)&&!(!this._isMovingLeft&&p===y.getLineMaxColumn(_)))if(this._isMovingLeft){const n=new c.Range(_,b-1,_,b),s=y.getValueInRange(n);f.addEditOperation(n,null),f.addEditOperation(new c.Range(_,p,_,p),s)}else{const n=new c.Range(_,p,_,p+1),s=y.getValueInRange(n);f.addEditOperation(n,null),f.addEditOperation(new c.Range(_,b,_,b),s)}}computeCursorState(y,f){return this._isMovingLeft?new k.Selection(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new k.Selection(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}e.MoveCaretCommand=E}),define(oe[133],re([1,0,8,90]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeActionItem=e.CodeActionCommandArgs=e.CodeActionTriggerSource=e.CodeActionKind=void 0,e.mayIncludeActionsOfKind=L,e.filtersAction=y,e.CodeActionKind=new class{constructor(){this.QuickFix=new k.HierarchicalKind("quickfix"),this.Refactor=new k.HierarchicalKind("refactor"),this.RefactorExtract=this.Refactor.append("extract"),this.RefactorInline=this.Refactor.append("inline"),this.RefactorMove=this.Refactor.append("move"),this.RefactorRewrite=this.Refactor.append("rewrite"),this.Notebook=new k.HierarchicalKind("notebook"),this.Source=new k.HierarchicalKind("source"),this.SourceOrganizeImports=this.Source.append("organizeImports"),this.SourceFixAll=this.Source.append("fixAll"),this.SurroundWith=this.Refactor.append("surround")}};var E;(function(p){p.Refactor="refactor",p.RefactorPreview="refactor preview",p.Lightbulb="lightbulb",p.Default="other (default)",p.SourceAction="source action",p.QuickFix="quick fix action",p.FixAll="fix all",p.OrganizeImports="organize imports",p.AutoFix="auto fix",p.QuickFixHover="quick fix hover window",p.OnSave="save participants",p.ProblemsView="problems view"})(E||(e.CodeActionTriggerSource=E={}));function L(p,n){return!(p.include&&!p.include.intersects(n)||p.excludes&&p.excludes.some(s=>f(n,s,p.include))||!p.includeSourceActions&&e.CodeActionKind.Source.contains(n))}function y(p,n){const s=n.kind?new k.HierarchicalKind(n.kind):void 0;return!(p.include&&(!s||!p.include.contains(s))||p.excludes&&s&&p.excludes.some(t=>f(s,t,p.include))||!p.includeSourceActions&&s&&e.CodeActionKind.Source.contains(s)||p.onlyIncludePreferredActions&&!n.isPreferred)}function f(p,n,s){return!(!n.contains(p)||s&&n.contains(s))}class _{static fromUser(n,s){return!n||typeof n!="object"?new _(s.kind,s.apply,!1):new _(_.getKindFromUser(n,s.kind),_.getApplyFromUser(n,s.apply),_.getPreferredUser(n))}static getApplyFromUser(n,s){switch(typeof n.apply=="string"?n.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return s}}static getKindFromUser(n,s){return typeof n.kind=="string"?new k.HierarchicalKind(n.kind):s}static getPreferredUser(n){return typeof n.preferred=="boolean"?n.preferred:!1}constructor(n,s,t){this.kind=n,this.apply=s,this.preferred=t}}e.CodeActionCommandArgs=_;class b{constructor(n,s,t){this.action=n,this.provider=s,this.highlightRange=t}async resolve(n){if(this.provider?.resolveCodeAction&&!this.action.edit){let s;try{s=await this.provider.resolveCodeAction(this.action,n)}catch(t){(0,c.onUnexpectedExternalError)(t)}s&&(this.action.edit=s.edit)}return this}}e.CodeActionItem=b}),define(oe[629],re([1,0,6]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPickerModel=void 0;class k{get color(){return this._color}set color(L){this._color.equals(L)||(this._color=L,this._onDidChangeColor.fire(L))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(L){this._colorPresentations=L,this.presentationIndex>L.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(L,y,f){this.presentationIndex=f,this._onColorFlushed=new c.Emitter,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new c.Emitter,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new c.Emitter,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=L,this._color=L,this._colorPresentations=y}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(L,y){let f=-1;for(let _=0;_<this.colorPresentations.length;_++)if(y.toLowerCase()===this.colorPresentations[_].label){f=_;break}if(f===-1){const _=y.split("(")[0].toLowerCase();for(let b=0;b<this.colorPresentations.length;b++)if(this.colorPresentations[b].label.toLowerCase().startsWith(_)){f=b;break}}f!==-1&&f!==this.presentationIndex&&(this.presentationIndex=f,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}e.ColorPickerModel=k}),define(oe[348],re([1,0,76,9,4,23]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BlockCommentCommand=void 0;class y{constructor(_,b,p){this.languageConfigurationService=p,this._selection=_,this._insertSpace=b,this._usedEndToken=null}static _haystackHasNeedleAtOffset(_,b,p){if(p<0)return!1;const n=b.length,s=_.length;if(p+n>s)return!1;for(let t=0;t<n;t++){const i=_.charCodeAt(p+t),o=b.charCodeAt(t);if(i!==o&&!(i>=65&&i<=90&&i+32===o)&&!(o>=65&&o<=90&&o+32===i))return!1}return!0}_createOperationsForBlockComment(_,b,p,n,s,t){const i=_.startLineNumber,o=_.startColumn,g=_.endLineNumber,u=_.endColumn,l=s.getLineContent(i),a=s.getLineContent(g);let r=l.lastIndexOf(b,o-1+b.length),d=a.indexOf(p,u-1-p.length);if(r!==-1&&d!==-1)if(i===g)l.substring(r+b.length,d).indexOf(p)>=0&&(r=-1,d=-1);else{const h=l.substring(r+b.length),v=a.substring(0,d);(h.indexOf(p)>=0||v.indexOf(p)>=0)&&(r=-1,d=-1)}let m;r!==-1&&d!==-1?(n&&r+b.length<l.length&&l.charCodeAt(r+b.length)===32&&(b=b+" "),n&&d>0&&a.charCodeAt(d-1)===32&&(p=" "+p,d-=1),m=y._createRemoveBlockCommentOperations(new E.Range(i,r+b.length+1,g,d+1),b,p)):(m=y._createAddBlockCommentOperations(_,b,p,this._insertSpace),this._usedEndToken=m.length===1?p:null);for(const h of m)t.addTrackedEditOperation(h.range,h.text)}static _createRemoveBlockCommentOperations(_,b,p){const n=[];return E.Range.isEmpty(_)?n.push(c.EditOperation.delete(new E.Range(_.startLineNumber,_.startColumn-b.length,_.endLineNumber,_.endColumn+p.length))):(n.push(c.EditOperation.delete(new E.Range(_.startLineNumber,_.startColumn-b.length,_.startLineNumber,_.startColumn))),n.push(c.EditOperation.delete(new E.Range(_.endLineNumber,_.endColumn,_.endLineNumber,_.endColumn+p.length)))),n}static _createAddBlockCommentOperations(_,b,p,n){const s=[];return E.Range.isEmpty(_)?s.push(c.EditOperation.replace(new E.Range(_.startLineNumber,_.startColumn,_.endLineNumber,_.endColumn),b+"  "+p)):(s.push(c.EditOperation.insert(new k.Position(_.startLineNumber,_.startColumn),b+(n?" ":""))),s.push(c.EditOperation.insert(new k.Position(_.endLineNumber,_.endColumn),(n?" ":"")+p))),s}getEditOperations(_,b){const p=this._selection.startLineNumber,n=this._selection.startColumn;_.tokenization.tokenizeIfCheap(p);const s=_.getLanguageIdAtPosition(p,n),t=this.languageConfigurationService.getLanguageConfiguration(s).comments;!t||!t.blockCommentStartToken||!t.blockCommentEndToken||this._createOperationsForBlockComment(this._selection,t.blockCommentStartToken,t.blockCommentEndToken,this._insertSpace,_,b)}computeCursorState(_,b){const p=b.getInverseEditOperations();if(p.length===2){const n=p[0],s=p[1];return new L.Selection(n.range.endLineNumber,n.range.endColumn,s.range.startLineNumber,s.range.startColumn)}else{const n=p[0].range,s=this._usedEndToken?-this._usedEndToken.length-1:0;return new L.Selection(n.endLineNumber,n.endColumn+s,n.endLineNumber,n.endColumn+s)}}}e.BlockCommentCommand=y}),define(oe[630],re([1,0,11,76,9,4,23,348]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineCommentCommand=void 0;class _{constructor(p,n,s,t,i,o,g){this.languageConfigurationService=p,this._selection=n,this._indentSize=s,this._type=t,this._insertSpace=i,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=o,this._ignoreFirstLine=g||!1}static _gatherPreflightCommentStrings(p,n,s,t){p.tokenization.tokenizeIfCheap(n);const i=p.getLanguageIdAtPosition(n,1),o=t.getLanguageConfiguration(i).comments,g=o?o.lineCommentToken:null;if(!g)return null;const u=[];for(let l=0,a=s-n+1;l<a;l++)u[l]={ignore:!1,commentStr:g,commentStrOffset:0,commentStrLength:g.length};return u}static _analyzeLines(p,n,s,t,i,o,g,u){let l=!0,a;p===0?a=!0:p===1?a=!1:a=!0;for(let r=0,d=t.length;r<d;r++){const m=t[r],h=i+r;if(h===i&&g){m.ignore=!0;continue}const v=s.getLineContent(h),C=c.firstNonWhitespaceIndex(v);if(C===-1){m.ignore=o,m.commentStrOffset=v.length;continue}if(l=!1,m.ignore=!1,m.commentStrOffset=C,a&&!f.BlockCommentCommand._haystackHasNeedleAtOffset(v,m.commentStr,C)&&(p===0?a=!1:p===1||(m.ignore=!0)),a&&n){const w=C+m.commentStrLength;w<v.length&&v.charCodeAt(w)===32&&(m.commentStrLength+=1)}}if(p===0&&l){a=!1;for(let r=0,d=t.length;r<d;r++)t[r].ignore=!1}return{supported:!0,shouldRemoveComments:a,lines:t}}static _gatherPreflightData(p,n,s,t,i,o,g,u){const l=_._gatherPreflightCommentStrings(s,t,i,u);return l===null?{supported:!1}:_._analyzeLines(p,n,s,l,t,o,g,u)}_executeLineComments(p,n,s,t){let i;s.shouldRemoveComments?i=_._createRemoveLineCommentsOperations(s.lines,t.startLineNumber):(_._normalizeInsertionPoint(p,s.lines,t.startLineNumber,this._indentSize),i=this._createAddLineCommentsOperations(s.lines,t.startLineNumber));const o=new E.Position(t.positionLineNumber,t.positionColumn);for(let g=0,u=i.length;g<u;g++)n.addEditOperation(i[g].range,i[g].text),L.Range.isEmpty(i[g].range)&&L.Range.getStartPosition(i[g].range).equals(o)&&p.getLineContent(o.lineNumber).length+1===o.column&&(this._deltaColumn=(i[g].text||"").length);this._selectionId=n.trackSelection(t)}_attemptRemoveBlockComment(p,n,s,t){let i=n.startLineNumber,o=n.endLineNumber;const g=t.length+Math.max(p.getLineFirstNonWhitespaceColumn(n.startLineNumber),n.startColumn);let u=p.getLineContent(i).lastIndexOf(s,g-1),l=p.getLineContent(o).indexOf(t,n.endColumn-1-s.length);return u!==-1&&l===-1&&(l=p.getLineContent(i).indexOf(t,u+s.length),o=i),u===-1&&l!==-1&&(u=p.getLineContent(o).lastIndexOf(s,l),i=o),n.isEmpty()&&(u===-1||l===-1)&&(u=p.getLineContent(i).indexOf(s),u!==-1&&(l=p.getLineContent(i).indexOf(t,u+s.length))),u!==-1&&p.getLineContent(i).charCodeAt(u+s.length)===32&&(s+=" "),l!==-1&&p.getLineContent(o).charCodeAt(l-1)===32&&(t=" "+t,l-=1),u!==-1&&l!==-1?f.BlockCommentCommand._createRemoveBlockCommentOperations(new L.Range(i,u+s.length+1,o,l+1),s,t):null}_executeBlockComment(p,n,s){p.tokenization.tokenizeIfCheap(s.startLineNumber);const t=p.getLanguageIdAtPosition(s.startLineNumber,1),i=this.languageConfigurationService.getLanguageConfiguration(t).comments;if(!i||!i.blockCommentStartToken||!i.blockCommentEndToken)return;const o=i.blockCommentStartToken,g=i.blockCommentEndToken;let u=this._attemptRemoveBlockComment(p,s,o,g);if(!u){if(s.isEmpty()){const l=p.getLineContent(s.startLineNumber);let a=c.firstNonWhitespaceIndex(l);a===-1&&(a=l.length),u=f.BlockCommentCommand._createAddBlockCommentOperations(new L.Range(s.startLineNumber,a+1,s.startLineNumber,l.length+1),o,g,this._insertSpace)}else u=f.BlockCommentCommand._createAddBlockCommentOperations(new L.Range(s.startLineNumber,p.getLineFirstNonWhitespaceColumn(s.startLineNumber),s.endLineNumber,p.getLineMaxColumn(s.endLineNumber)),o,g,this._insertSpace);u.length===1&&(this._deltaColumn=o.length+1)}this._selectionId=n.trackSelection(s);for(const l of u)n.addEditOperation(l.range,l.text)}getEditOperations(p,n){let s=this._selection;if(this._moveEndPositionDown=!1,s.startLineNumber===s.endLineNumber&&this._ignoreFirstLine){n.addEditOperation(new L.Range(s.startLineNumber,p.getLineMaxColumn(s.startLineNumber),s.startLineNumber+1,1),s.startLineNumber===p.getLineCount()?"":`
`),this._selectionId=n.trackSelection(s);return}s.startLineNumber<s.endLineNumber&&s.endColumn===1&&(this._moveEndPositionDown=!0,s=s.setEndPosition(s.endLineNumber-1,p.getLineMaxColumn(s.endLineNumber-1)));const t=_._gatherPreflightData(this._type,this._insertSpace,p,s.startLineNumber,s.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return t.supported?this._executeLineComments(p,n,t,s):this._executeBlockComment(p,n,s)}computeCursorState(p,n){let s=n.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(s=s.setEndPosition(s.endLineNumber+1,1)),new y.Selection(s.selectionStartLineNumber,s.selectionStartColumn+this._deltaColumn,s.positionLineNumber,s.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(p,n){const s=[];for(let t=0,i=p.length;t<i;t++){const o=p[t];o.ignore||s.push(k.EditOperation.delete(new L.Range(n+t,o.commentStrOffset+1,n+t,o.commentStrOffset+o.commentStrLength+1)))}return s}_createAddLineCommentsOperations(p,n){const s=[],t=this._insertSpace?" ":"";for(let i=0,o=p.length;i<o;i++){const g=p[i];g.ignore||s.push(k.EditOperation.insert(new E.Position(n+i,g.commentStrOffset+1),g.commentStr+t))}return s}static nextVisibleColumn(p,n,s,t){return s?p+(n-p%n):p+t}static _normalizeInsertionPoint(p,n,s,t){let i=1073741824,o,g;for(let u=0,l=n.length;u<l;u++){if(n[u].ignore)continue;const a=p.getLineContent(s+u);let r=0;for(let d=0,m=n[u].commentStrOffset;r<i&&d<m;d++)r=_.nextVisibleColumn(r,t,a.charCodeAt(d)===9,1);r<i&&(i=r)}i=Math.floor(i/t)*t;for(let u=0,l=n.length;u<l;u++){if(n[u].ignore)continue;const a=p.getLineContent(s+u);let r=0;for(o=0,g=n[u].commentStrOffset;r<i&&o<g;o++)r=_.nextVisibleColumn(r,t,a.charCodeAt(o)===9,1);r>i?n[u].commentStrOffset=o-1:n[u].commentStrOffset=o}}}e.LineCommentCommand=_}),define(oe[631],re([1,0,4,23]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragAndDropCommand=void 0;class E{constructor(y,f,_){this.selection=y,this.targetPosition=f,this.copy=_,this.targetSelection=null}getEditOperations(y,f){const _=y.getValueInRange(this.selection);if(this.copy||f.addEditOperation(this.selection,null),f.addEditOperation(new c.Range(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),_),this.selection.containsPosition(this.targetPosition)&&!(this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition)))){this.targetSelection=this.selection;return}if(this.copy){this.targetSelection=new k.Selection(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber>this.selection.endLineNumber){this.targetSelection=new k.Selection(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}if(this.targetPosition.lineNumber<this.selection.endLineNumber){this.targetSelection=new k.Selection(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn);return}this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new k.Selection(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column-this.selection.endColumn+this.selection.startColumn:this.targetPosition.column-this.selection.endColumn+this.selection.startColumn,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new k.Selection(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn)}computeCursorState(y,f){return this.targetSelection}}e.DragAndDropCommand=E}),define(oe[632],re([1,0,4]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaceAllCommand=void 0;class k{constructor(L,y,f){this._editorSelection=L,this._ranges=y,this._replaceStrings=f,this._trackedEditorSelectionId=null}getEditOperations(L,y){if(this._ranges.length>0){const f=[];for(let p=0;p<this._ranges.length;p++)f.push({range:this._ranges[p],text:this._replaceStrings[p]});f.sort((p,n)=>c.Range.compareRangesUsingStarts(p.range,n.range));const _=[];let b=f[0];for(let p=1;p<f.length;p++)b.range.endLineNumber===f[p].range.startLineNumber&&b.range.endColumn===f[p].range.startColumn?(b.range=b.range.plusRange(f[p].range),b.text=b.text+f[p].text):(_.push(b),b=f[p]);_.push(b);for(const p of _)y.addEditOperation(p.range,p.text)}this._trackedEditorSelectionId=y.trackSelection(this._editorSelection)}computeCursorState(L,y){return y.getTrackedSelection(this._trackedEditorSelectionId)}}e.ReplaceAllCommand=k}),define(oe[633],re([1,0,452]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReplacePiece=e.ReplacePattern=void 0,e.parseReplaceString=_;class k{constructor(p){this.staticValue=p,this.kind=0}}class E{constructor(p){this.pieces=p,this.kind=1}}class L{static fromStaticValue(p){return new L([y.staticValue(p)])}get hasReplacementPatterns(){return this._state.kind===1}constructor(p){!p||p.length===0?this._state=new k(""):p.length===1&&p[0].staticValue!==null?this._state=new k(p[0].staticValue):this._state=new E(p)}buildReplaceString(p,n){if(this._state.kind===0)return n?(0,c.buildReplaceStringWithCasePreserved)(p,this._state.staticValue):this._state.staticValue;let s="";for(let t=0,i=this._state.pieces.length;t<i;t++){const o=this._state.pieces[t];if(o.staticValue!==null){s+=o.staticValue;continue}let g=L._substitute(o.matchIndex,p);if(o.caseOps!==null&&o.caseOps.length>0){const u=[],l=o.caseOps.length;let a=0;for(let r=0,d=g.length;r<d;r++){if(a>=l){u.push(g.slice(r));break}switch(o.caseOps[a]){case"U":u.push(g[r].toUpperCase());break;case"u":u.push(g[r].toUpperCase()),a++;break;case"L":u.push(g[r].toLowerCase());break;case"l":u.push(g[r].toLowerCase()),a++;break;default:u.push(g[r])}}g=u.join("")}s+=g}return s}static _substitute(p,n){if(n===null)return"";if(p===0)return n[0];let s="";for(;p>0;){if(p<n.length)return(n[p]||"")+s;s=String(p%10)+s,p=Math.floor(p/10)}return"$"+s}}e.ReplacePattern=L;class y{static staticValue(p){return new y(p,-1,null)}static caseOps(p,n){return new y(null,p,n)}constructor(p,n,s){this.staticValue=p,this.matchIndex=n,!s||s.length===0?this.caseOps=null:this.caseOps=s.slice(0)}}e.ReplacePiece=y;class f{constructor(p){this._source=p,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(p){this._emitStatic(this._source.substring(this._lastCharIndex,p)),this._lastCharIndex=p}emitStatic(p,n){this._emitStatic(p),this._lastCharIndex=n}_emitStatic(p){p.length!==0&&(this._currentStaticPiece+=p)}emitMatchIndex(p,n,s){this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=y.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=y.caseOps(p,s),this._lastCharIndex=n}finalize(){return this.emitUnchanged(this._source.length),this._currentStaticPiece.length!==0&&(this._result[this._resultLen++]=y.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new L(this._result)}}function _(b){if(!b||b.length===0)return new L(null);const p=[],n=new f(b);for(let s=0,t=b.length;s<t;s++){const i=b.charCodeAt(s);if(i===92){if(s++,s>=t)break;const o=b.charCodeAt(s);switch(o){case 92:n.emitUnchanged(s-1),n.emitStatic("\\",s+1);break;case 110:n.emitUnchanged(s-1),n.emitStatic(`
`,s+1);break;case 116:n.emitUnchanged(s-1),n.emitStatic("	",s+1);break;case 117:case 85:case 108:case 76:n.emitUnchanged(s-1),n.emitStatic("",s+1),p.push(String.fromCharCode(o));break}continue}if(i===36){if(s++,s>=t)break;const o=b.charCodeAt(s);if(o===36){n.emitUnchanged(s-1),n.emitStatic("$",s+1);continue}if(o===48||o===38){n.emitUnchanged(s-1),n.emitMatchIndex(0,s+1,p),p.length=0;continue}if(49<=o&&o<=57){let g=o-48;if(s+1<t){const u=b.charCodeAt(s+1);if(48<=u&&u<=57){s++,g=g*10+(u-48),n.emitUnchanged(s-2),n.emitMatchIndex(g,s+1,p),p.length=0;continue}}n.emitUnchanged(s-1),n.emitMatchIndex(g,s+1,p),p.length=0;continue}}}return n.finalize()}}),define(oe[204],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRegion=e.FoldingRegions=e.MAX_LINE_NUMBER=e.MAX_FOLDING_REGIONS=e.foldSourceAbbr=void 0,e.foldSourceAbbr={0:" ",1:"u",2:"r"},e.MAX_FOLDING_REGIONS=65535,e.MAX_LINE_NUMBER=16777215;const c=4278190080;class k{constructor(f){const _=Math.ceil(f/32);this._states=new Uint32Array(_)}get(f){const _=f/32|0,b=f%32;return(this._states[_]&1<<b)!==0}set(f,_){const b=f/32|0,p=f%32,n=this._states[b];_?this._states[b]=n|1<<p:this._states[b]=n&~(1<<p)}}class E{constructor(f,_,b){if(f.length!==_.length||f.length>e.MAX_FOLDING_REGIONS)throw new Error("invalid startIndexes or endIndexes size");this._startIndexes=f,this._endIndexes=_,this._collapseStates=new k(f.length),this._userDefinedStates=new k(f.length),this._recoveredStates=new k(f.length),this._types=b,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;const f=[],_=(b,p)=>{const n=f[f.length-1];return this.getStartLineNumber(n)<=b&&this.getEndLineNumber(n)>=p};for(let b=0,p=this._startIndexes.length;b<p;b++){const n=this._startIndexes[b],s=this._endIndexes[b];if(n>e.MAX_LINE_NUMBER||s>e.MAX_LINE_NUMBER)throw new Error("startLineNumber or endLineNumber must not exceed "+e.MAX_LINE_NUMBER);for(;f.length>0&&!_(n,s);)f.pop();const t=f.length>0?f[f.length-1]:-1;f.push(b),this._startIndexes[b]=n+((t&255)<<24),this._endIndexes[b]=s+((t&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(f){return this._startIndexes[f]&e.MAX_LINE_NUMBER}getEndLineNumber(f){return this._endIndexes[f]&e.MAX_LINE_NUMBER}getType(f){return this._types?this._types[f]:void 0}hasTypes(){return!!this._types}isCollapsed(f){return this._collapseStates.get(f)}setCollapsed(f,_){this._collapseStates.set(f,_)}isUserDefined(f){return this._userDefinedStates.get(f)}setUserDefined(f,_){return this._userDefinedStates.set(f,_)}isRecovered(f){return this._recoveredStates.get(f)}setRecovered(f,_){return this._recoveredStates.set(f,_)}getSource(f){return this.isUserDefined(f)?1:this.isRecovered(f)?2:0}setSource(f,_){_===1?(this.setUserDefined(f,!0),this.setRecovered(f,!1)):_===2?(this.setUserDefined(f,!1),this.setRecovered(f,!0)):(this.setUserDefined(f,!1),this.setRecovered(f,!1))}setCollapsedAllOfType(f,_){let b=!1;if(this._types)for(let p=0;p<this._types.length;p++)this._types[p]===f&&(this.setCollapsed(p,_),b=!0);return b}toRegion(f){return new L(this,f)}getParentIndex(f){this.ensureParentIndices();const _=((this._startIndexes[f]&c)>>>24)+((this._endIndexes[f]&c)>>>16);return _===e.MAX_FOLDING_REGIONS?-1:_}contains(f,_){return this.getStartLineNumber(f)<=_&&this.getEndLineNumber(f)>=_}findIndex(f){let _=0,b=this._startIndexes.length;if(b===0)return-1;for(;_<b;){const p=Math.floor((_+b)/2);f<this.getStartLineNumber(p)?b=p:_=p+1}return _-1}findRange(f){let _=this.findIndex(f);if(_>=0){if(this.getEndLineNumber(_)>=f)return _;for(_=this.getParentIndex(_);_!==-1;){if(this.contains(_,f))return _;_=this.getParentIndex(_)}}return-1}toString(){const f=[];for(let _=0;_<this.length;_++)f[_]=`[${e.foldSourceAbbr[this.getSource(_)]}${this.isCollapsed(_)?"+":"-"}] ${this.getStartLineNumber(_)}/${this.getEndLineNumber(_)}`;return f.join(", ")}toFoldRange(f){return{startLineNumber:this._startIndexes[f]&e.MAX_LINE_NUMBER,endLineNumber:this._endIndexes[f]&e.MAX_LINE_NUMBER,type:this._types?this._types[f]:void 0,isCollapsed:this.isCollapsed(f),source:this.getSource(f)}}static fromFoldRanges(f){const _=f.length,b=new Uint32Array(_),p=new Uint32Array(_);let n=[],s=!1;for(let i=0;i<_;i++){const o=f[i];b[i]=o.startLineNumber,p[i]=o.endLineNumber,n.push(o.type),o.type&&(s=!0)}s||(n=void 0);const t=new E(b,p,n);for(let i=0;i<_;i++)f[i].isCollapsed&&t.setCollapsed(i,!0),t.setSource(i,f[i].source);return t}static sanitizeAndMerge(f,_,b){b=b??Number.MAX_VALUE;const p=(d,m)=>Array.isArray(d)?h=>h<m?d[h]:void 0:h=>h<m?d.toFoldRange(h):void 0,n=p(f,f.length),s=p(_,_.length);let t=0,i=0,o=n(0),g=s(0);const u=[];let l,a=0;const r=[];for(;o||g;){let d;if(g&&(!o||o.startLineNumber>=g.startLineNumber))o&&o.startLineNumber===g.startLineNumber?(g.source===1?d=g:(d=o,d.isCollapsed=g.isCollapsed&&o.endLineNumber===g.endLineNumber,d.source=0),o=n(++t)):(d=g,g.isCollapsed&&g.source===0&&(d.source=2)),g=s(++i);else{let m=i,h=g;for(;;){if(!h||h.startLineNumber>o.endLineNumber){d=o;break}if(h.source===1&&h.endLineNumber>o.endLineNumber)break;h=s(++m)}o=n(++t)}if(d){for(;l&&l.endLineNumber<d.startLineNumber;)l=u.pop();d.endLineNumber>d.startLineNumber&&d.startLineNumber>a&&d.endLineNumber<=b&&(!l||l.endLineNumber>=d.endLineNumber)&&(r.push(d),a=d.startLineNumber,l&&u.push(l),l=d)}}return r}}e.FoldingRegions=E;class L{constructor(f,_){this.ranges=f,this.index=_}get startLineNumber(){return this.ranges.getStartLineNumber(this.index)}get endLineNumber(){return this.ranges.getEndLineNumber(this.index)}get regionIndex(){return this.index}get parentIndex(){return this.ranges.getParentIndex(this.index)}get isCollapsed(){return this.ranges.isCollapsed(this.index)}containedBy(f){return f.startLineNumber<=this.startLineNumber&&f.endLineNumber>=this.endLineNumber}containsLine(f){return this.startLineNumber<=f&&f<=this.endLineNumber}}e.FoldingRegion=L}),define(oe[349],re([1,0,6,204,129]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingModel=void 0,e.toggleCollapseState=y,e.setCollapseStateLevelsDown=f,e.setCollapseStateLevelsUp=_,e.setCollapseStateUp=b,e.setCollapseStateAtLevel=p,e.setCollapseStateForRest=n,e.setCollapseStateForMatchingLines=s,e.setCollapseStateForType=t,e.getParentFoldLine=i,e.getPreviousFoldLine=o,e.getNextFoldLine=g;class L{get regions(){return this._regions}get textModel(){return this._textModel}constructor(l,a){this._updateEventEmitter=new c.Emitter,this.onDidChange=this._updateEventEmitter.event,this._textModel=l,this._decorationProvider=a,this._regions=new k.FoldingRegions(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}toggleCollapseState(l){if(!l.length)return;l=l.sort((r,d)=>r.regionIndex-d.regionIndex);const a={};this._decorationProvider.changeDecorations(r=>{let d=0,m=-1,h=-1;const v=C=>{for(;d<C;){const w=this._regions.getEndLineNumber(d),S=this._regions.isCollapsed(d);if(w<=m){const D=this.regions.getSource(d)!==0;r.changeDecorationOptions(this._editorDecorationIds[d],this._decorationProvider.getDecorationOption(S,w<=h,D))}S&&w>h&&(h=w),d++}};for(const C of l){const w=C.regionIndex,S=this._editorDecorationIds[w];if(S&&!a[S]){a[S]=!0,v(w);const D=!this._regions.isCollapsed(w);this._regions.setCollapsed(w,D),m=Math.max(m,this._regions.getEndLineNumber(w))}}v(this._regions.length)}),this._updateEventEmitter.fire({model:this,collapseStateChanged:l})}removeManualRanges(l){const a=new Array,r=d=>{for(const m of l)if(!(m.startLineNumber>d.endLineNumber||d.startLineNumber>m.endLineNumber))return!0;return!1};for(let d=0;d<this._regions.length;d++){const m=this._regions.toFoldRange(d);(m.source===0||!r(m))&&a.push(m)}this.updatePost(k.FoldingRegions.fromFoldRanges(a))}update(l,a=[]){const r=this._currentFoldedOrManualRanges(a),d=k.FoldingRegions.sanitizeAndMerge(l,r,this._textModel.getLineCount());this.updatePost(k.FoldingRegions.fromFoldRanges(d))}updatePost(l){const a=[];let r=-1;for(let d=0,m=l.length;d<m;d++){const h=l.getStartLineNumber(d),v=l.getEndLineNumber(d),C=l.isCollapsed(d),w=l.getSource(d)!==0,S={startLineNumber:h,startColumn:this._textModel.getLineMaxColumn(h),endLineNumber:v,endColumn:this._textModel.getLineMaxColumn(v)+1};a.push({range:S,options:this._decorationProvider.getDecorationOption(C,v<=r,w)}),C&&v>r&&(r=v)}this._decorationProvider.changeDecorations(d=>this._editorDecorationIds=d.deltaDecorations(this._editorDecorationIds,a)),this._regions=l,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(l=[]){const a=(d,m)=>{for(const h of l)if(d<h&&h<=m)return!0;return!1},r=[];for(let d=0,m=this._regions.length;d<m;d++){let h=this.regions.isCollapsed(d);const v=this.regions.getSource(d);if(h||v!==0){const C=this._regions.toFoldRange(d),w=this._textModel.getDecorationRange(this._editorDecorationIds[d]);w&&(h&&a(w.startLineNumber,w.endLineNumber)&&(h=!1),r.push({startLineNumber:w.startLineNumber,endLineNumber:w.endLineNumber,type:C.type,isCollapsed:h,source:v}))}}return r}getMemento(){const l=this._currentFoldedOrManualRanges(),a=[],r=this._textModel.getLineCount();for(let d=0,m=l.length;d<m;d++){const h=l[d];if(h.startLineNumber>=h.endLineNumber||h.startLineNumber<1||h.endLineNumber>r)continue;const v=this._getLinesChecksum(h.startLineNumber+1,h.endLineNumber);a.push({startLineNumber:h.startLineNumber,endLineNumber:h.endLineNumber,isCollapsed:h.isCollapsed,source:h.source,checksum:v})}return a.length>0?a:void 0}applyMemento(l){if(!Array.isArray(l))return;const a=[],r=this._textModel.getLineCount();for(const m of l){if(m.startLineNumber>=m.endLineNumber||m.startLineNumber<1||m.endLineNumber>r)continue;const h=this._getLinesChecksum(m.startLineNumber+1,m.endLineNumber);(!m.checksum||h===m.checksum)&&a.push({startLineNumber:m.startLineNumber,endLineNumber:m.endLineNumber,type:void 0,isCollapsed:m.isCollapsed??!0,source:m.source??0})}const d=k.FoldingRegions.sanitizeAndMerge(this._regions,a,r);this.updatePost(k.FoldingRegions.fromFoldRanges(d))}_getLinesChecksum(l,a){return(0,E.hash)(this._textModel.getLineContent(l)+this._textModel.getLineContent(a))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(l,a){const r=[];if(this._regions){let d=this._regions.findRange(l),m=1;for(;d>=0;){const h=this._regions.toRegion(d);(!a||a(h,m))&&r.push(h),m++,d=h.parentIndex}}return r}getRegionAtLine(l){if(this._regions){const a=this._regions.findRange(l);if(a>=0)return this._regions.toRegion(a)}return null}getRegionsInside(l,a){const r=[],d=l?l.regionIndex+1:0,m=l?l.endLineNumber:Number.MAX_VALUE;if(a&&a.length===2){const h=[];for(let v=d,C=this._regions.length;v<C;v++){const w=this._regions.toRegion(v);if(this._regions.getStartLineNumber(v)<m){for(;h.length>0&&!w.containedBy(h[h.length-1]);)h.pop();h.push(w),a(w,h.length)&&r.push(w)}else break}}else for(let h=d,v=this._regions.length;h<v;h++){const C=this._regions.toRegion(h);if(this._regions.getStartLineNumber(h)<m)(!a||a(C))&&r.push(C);else break}return r}}e.FoldingModel=L;function y(u,l,a){const r=[];for(const d of a){const m=u.getRegionAtLine(d);if(m){const h=!m.isCollapsed;if(r.push(m),l>1){const v=u.getRegionsInside(m,(C,w)=>C.isCollapsed!==h&&w<l);r.push(...v)}}}u.toggleCollapseState(r)}function f(u,l,a=Number.MAX_VALUE,r){const d=[];if(r&&r.length>0)for(const m of r){const h=u.getRegionAtLine(m);if(h&&(h.isCollapsed!==l&&d.push(h),a>1)){const v=u.getRegionsInside(h,(C,w)=>C.isCollapsed!==l&&w<a);d.push(...v)}}else{const m=u.getRegionsInside(null,(h,v)=>h.isCollapsed!==l&&v<a);d.push(...m)}u.toggleCollapseState(d)}function _(u,l,a,r){const d=[];for(const m of r){const h=u.getAllRegionsAtLine(m,(v,C)=>v.isCollapsed!==l&&C<=a);d.push(...h)}u.toggleCollapseState(d)}function b(u,l,a){const r=[];for(const d of a){const m=u.getAllRegionsAtLine(d,h=>h.isCollapsed!==l);m.length>0&&r.push(m[0])}u.toggleCollapseState(r)}function p(u,l,a,r){const d=(h,v)=>v===l&&h.isCollapsed!==a&&!r.some(C=>h.containsLine(C)),m=u.getRegionsInside(null,d);u.toggleCollapseState(m)}function n(u,l,a){const r=[];for(const h of a){const v=u.getAllRegionsAtLine(h,void 0);v.length>0&&r.push(v[0])}const d=h=>r.every(v=>!v.containedBy(h)&&!h.containedBy(v))&&h.isCollapsed!==l,m=u.getRegionsInside(null,d);u.toggleCollapseState(m)}function s(u,l,a){const r=u.textModel,d=u.regions,m=[];for(let h=d.length-1;h>=0;h--)if(a!==d.isCollapsed(h)){const v=d.getStartLineNumber(h);l.test(r.getLineContent(v))&&m.push(d.toRegion(h))}u.toggleCollapseState(m)}function t(u,l,a){const r=u.regions,d=[];for(let m=r.length-1;m>=0;m--)a!==r.isCollapsed(m)&&l===r.getType(m)&&d.push(r.toRegion(m));u.toggleCollapseState(d)}function i(u,l){let a=null;const r=l.getRegionAtLine(u);if(r!==null&&(a=r.startLineNumber,u===a)){const d=r.parentIndex;d!==-1?a=l.regions.getStartLineNumber(d):a=null}return a}function o(u,l){let a=l.getRegionAtLine(u);if(a!==null&&a.startLineNumber===u){if(u!==a.startLineNumber)return a.startLineNumber;{const r=a.parentIndex;let d=0;for(r!==-1&&(d=l.regions.getStartLineNumber(a.parentIndex));a!==null;)if(a.regionIndex>0){if(a=l.regions.toRegion(a.regionIndex-1),a.startLineNumber<=d)return null;if(a.parentIndex===r)return a.startLineNumber}else return null}}else if(l.regions.length>0)for(a=l.regions.toRegion(l.regions.length-1);a!==null;){if(a.startLineNumber<u)return a.startLineNumber;a.regionIndex>0?a=l.regions.toRegion(a.regionIndex-1):a=null}return null}function g(u,l){let a=l.getRegionAtLine(u);if(a!==null&&a.startLineNumber===u){const r=a.parentIndex;let d=0;if(r!==-1)d=l.regions.getEndLineNumber(a.parentIndex);else{if(l.regions.length===0)return null;d=l.regions.getEndLineNumber(l.regions.length-1)}for(;a!==null;)if(a.regionIndex<l.regions.length){if(a=l.regions.toRegion(a.regionIndex+1),a.startLineNumber>=d)return null;if(a.parentIndex===r)return a.startLineNumber}else return null}else if(l.regions.length>0)for(a=l.regions.toRegion(0);a!==null;){if(a.startLineNumber>u)return a.startLineNumber;a.regionIndex<l.regions.length?a=l.regions.toRegion(a.regionIndex+1):a=null}return null}}),define(oe[634],re([1,0,67,6,4,144]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HiddenRangeModel=void 0;class y{get onDidChange(){return this._updateEventEmitter.event}get hiddenRanges(){return this._hiddenRanges}constructor(p){this._updateEventEmitter=new k.Emitter,this._hasLineChanges=!1,this._foldingModel=p,this._foldingModelListener=p.onDidChange(n=>this.updateHiddenRanges()),this._hiddenRanges=[],p.regions.length&&this.updateHiddenRanges()}notifyChangeModelContent(p){this._hiddenRanges.length&&!this._hasLineChanges&&(this._hasLineChanges=p.changes.some(n=>n.range.endLineNumber!==n.range.startLineNumber||(0,L.countEOL)(n.text)[0]!==0))}updateHiddenRanges(){let p=!1;const n=[];let s=0,t=0,i=Number.MAX_VALUE,o=-1;const g=this._foldingModel.regions;for(;s<g.length;s++){if(!g.isCollapsed(s))continue;const u=g.getStartLineNumber(s)+1,l=g.getEndLineNumber(s);i<=u&&l<=o||(!p&&t<this._hiddenRanges.length&&this._hiddenRanges[t].startLineNumber===u&&this._hiddenRanges[t].endLineNumber===l?(n.push(this._hiddenRanges[t]),t++):(p=!0,n.push(new E.Range(u,1,l,1))),i=u,o=l)}(this._hasLineChanges||p||t<this._hiddenRanges.length)&&this.applyHiddenRanges(n)}applyHiddenRanges(p){this._hiddenRanges=p,this._hasLineChanges=!1,this._updateEventEmitter.fire(p)}hasRanges(){return this._hiddenRanges.length>0}isHidden(p){return _(this._hiddenRanges,p)!==null}adjustSelections(p){let n=!1;const s=this._foldingModel.textModel;let t=null;const i=o=>((!t||!f(o,t))&&(t=_(this._hiddenRanges,o)),t?t.startLineNumber-1:null);for(let o=0,g=p.length;o<g;o++){let u=p[o];const l=i(u.startLineNumber);l&&(u=u.setStartPosition(l,s.getLineMaxColumn(l)),n=!0);const a=i(u.endLineNumber);a&&(u=u.setEndPosition(a,s.getLineMaxColumn(a)),n=!0),p[o]=u}return n}dispose(){this.hiddenRanges.length>0&&(this._hiddenRanges=[],this._updateEventEmitter.fire(this._hiddenRanges)),this._foldingModelListener&&(this._foldingModelListener.dispose(),this._foldingModelListener=null)}}e.HiddenRangeModel=y;function f(b,p){return b>=p.startLineNumber&&b<=p.endLineNumber}function _(b,p){const n=(0,c.findFirstIdxMonotonousOrArrLen)(b,s=>p<s.startLineNumber)-1;return n>=0&&b[n].endLineNumber>=p?b[n]:null}}),define(oe[350],re([1,0,248,204]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangesCollector=e.IndentRangeProvider=void 0,e.computeRanges=b;const E=5e3,L="indent";class y{constructor(n,s,t){this.editorModel=n,this.languageConfigurationService=s,this.foldingRangesLimit=t,this.id=L}dispose(){}compute(n){const s=this.languageConfigurationService.getLanguageConfiguration(this.editorModel.getLanguageId()).foldingRules,t=s&&!!s.offSide,i=s&&s.markers;return Promise.resolve(b(this.editorModel,t,i,this.foldingRangesLimit))}}e.IndentRangeProvider=y;class f{constructor(n){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0,this._foldingRangesLimit=n}insertFirst(n,s,t){if(n>k.MAX_LINE_NUMBER||s>k.MAX_LINE_NUMBER)return;const i=this._length;this._startIndexes[i]=n,this._endIndexes[i]=s,this._length++,t<1e3&&(this._indentOccurrences[t]=(this._indentOccurrences[t]||0)+1)}toIndentRanges(n){const s=this._foldingRangesLimit.limit;if(this._length<=s){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let o=this._length-1,g=0;o>=0;o--,g++)t[g]=this._startIndexes[o],i[g]=this._endIndexes[o];return new k.FoldingRegions(t,i)}else{this._foldingRangesLimit.update(this._length,s);let t=0,i=this._indentOccurrences.length;for(let l=0;l<this._indentOccurrences.length;l++){const a=this._indentOccurrences[l];if(a){if(a+t>s){i=l;break}t+=a}}const o=n.getOptions().tabSize,g=new Uint32Array(s),u=new Uint32Array(s);for(let l=this._length-1,a=0;l>=0;l--){const r=this._startIndexes[l],d=n.getLineContent(r),m=(0,c.computeIndentLevel)(d,o);(m<i||m===i&&t++<s)&&(g[a]=r,u[a]=this._endIndexes[l],a++)}return new k.FoldingRegions(g,u)}}}e.RangesCollector=f;const _={limit:E,update:()=>{}};function b(p,n,s,t=_){const i=p.getOptions().tabSize,o=new f(t);let g;s&&(g=new RegExp(`(${s.start.source})|(?:${s.end.source})`));const u=[],l=p.getLineCount()+1;u.push({indent:-1,endAbove:l,line:l});for(let a=p.getLineCount();a>0;a--){const r=p.getLineContent(a),d=(0,c.computeIndentLevel)(r,i);let m=u[u.length-1];if(d===-1){n&&(m.endAbove=a);continue}let h;if(g&&(h=r.match(g)))if(h[1]){let v=u.length-1;for(;v>0&&u[v].indent!==-2;)v--;if(v>0){u.length=v+1,m=u[v],o.insertFirst(a,m.line,d),m.line=a,m.indent=d,m.endAbove=a;continue}}else{u.push({indent:-2,endAbove:a,line:a});continue}if(m.indent>d){do u.pop(),m=u[u.length-1];while(m.indent>d);const v=m.endAbove-1;v-a>=1&&o.insertFirst(a,v,d)}m.indent===d?m.endAbove=a:u.push({indent:d,endAbove:a,line:a})}return o.toIndentRanges(p)}}),define(oe[351],re([1,0,8,2,204]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyntaxRangeProvider=void 0,e.sanitizeRanges=p;const L={},y="syntax";class f{constructor(s,t,i,o,g){this.editorModel=s,this.providers=t,this.handleFoldingRangesChange=i,this.foldingRangesLimit=o,this.fallbackRangeProvider=g,this.id=y,this.disposables=new k.DisposableStore,g&&this.disposables.add(g);for(const u of t)typeof u.onDidChange=="function"&&this.disposables.add(u.onDidChange(i))}compute(s){return _(this.providers,this.editorModel,s).then(t=>t?p(t,this.foldingRangesLimit):this.fallbackRangeProvider?.compute(s)??null)}dispose(){this.disposables.dispose()}}e.SyntaxRangeProvider=f;function _(n,s,t){let i=null;const o=n.map((g,u)=>Promise.resolve(g.provideFoldingRanges(s,L,t)).then(l=>{if(!t.isCancellationRequested&&Array.isArray(l)){Array.isArray(i)||(i=[]);const a=s.getLineCount();for(const r of l)r.start>0&&r.end>r.start&&r.end<=a&&i.push({start:r.start,end:r.end,rank:u,kind:r.kind})}},c.onUnexpectedExternalError));return Promise.all(o).then(g=>i)}class b{constructor(s){this._startIndexes=[],this._endIndexes=[],this._nestingLevels=[],this._nestingLevelCounts=[],this._types=[],this._length=0,this._foldingRangesLimit=s}add(s,t,i,o){if(s>E.MAX_LINE_NUMBER||t>E.MAX_LINE_NUMBER)return;const g=this._length;this._startIndexes[g]=s,this._endIndexes[g]=t,this._nestingLevels[g]=o,this._types[g]=i,this._length++,o<30&&(this._nestingLevelCounts[o]=(this._nestingLevelCounts[o]||0)+1)}toIndentRanges(){const s=this._foldingRangesLimit.limit;if(this._length<=s){this._foldingRangesLimit.update(this._length,!1);const t=new Uint32Array(this._length),i=new Uint32Array(this._length);for(let o=0;o<this._length;o++)t[o]=this._startIndexes[o],i[o]=this._endIndexes[o];return new E.FoldingRegions(t,i,this._types)}else{this._foldingRangesLimit.update(this._length,s);let t=0,i=this._nestingLevelCounts.length;for(let l=0;l<this._nestingLevelCounts.length;l++){const a=this._nestingLevelCounts[l];if(a){if(a+t>s){i=l;break}t+=a}}const o=new Uint32Array(s),g=new Uint32Array(s),u=[];for(let l=0,a=0;l<this._length;l++){const r=this._nestingLevels[l];(r<i||r===i&&t++<s)&&(o[a]=this._startIndexes[l],g[a]=this._endIndexes[l],u[a]=this._types[l],a++)}return new E.FoldingRegions(o,g,u)}}}function p(n,s){const t=n.sort((u,l)=>{let a=u.start-l.start;return a===0&&(a=u.rank-l.rank),a}),i=new b(s);let o;const g=[];for(const u of t)if(!o)o=u,i.add(u.start,u.end,u.kind&&u.kind.value,g.length);else if(u.start>o.start)if(u.end<=o.end)g.push(o),o=u,i.add(u.start,u.end,u.kind&&u.kind.value,g.length);else{if(u.start>o.end){do o=g.pop();while(o&&u.start>o.end);o&&g.push(o),o=u}i.add(u.start,u.end,u.kind&&u.kind.value,g.length)}return i.toIndentRanges()}}),define(oe[352],re([1,0,76,4,142]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingEdit=void 0;class L{static _handleEolEdits(f,_){let b;const p=[];for(const n of _)typeof n.eol=="number"&&(b=n.eol),n.range&&typeof n.text=="string"&&p.push(n);return typeof b=="number"&&f.hasModel()&&f.getModel().pushEOL(b),p}static _isFullModelReplaceEdit(f,_){if(!f.hasModel())return!1;const b=f.getModel(),p=b.validateRange(_.range);return b.getFullModelRange().equalsRange(p)}static execute(f,_,b){b&&f.pushUndoStop();const p=E.StableEditorScrollState.capture(f),n=L._handleEolEdits(f,_);n.length===1&&L._isFullModelReplaceEdit(f,n[0])?f.executeEdits("formatEditsCommand",n.map(s=>c.EditOperation.replace(k.Range.lift(s.range),s.text))):f.executeEdits("formatEditsCommand",n.map(s=>c.EditOperation.replaceMove(k.Range.lift(s.range),s.text))),b&&f.pushUndoStop(),p.restoreRelativeVerticalPositionOfCursor(f)}}e.FormattingEdit=L}),define(oe[205],re([1,0,6,2,16]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickLinkGesture=e.ClickLinkOptions=e.ClickLinkKeyboardEvent=e.ClickLinkMouseEvent=void 0;function L(n,s){return!!n[s]}class y{constructor(s,t){this.target=s.target,this.isLeftClick=s.event.leftButton,this.isMiddleClick=s.event.middleButton,this.isRightClick=s.event.rightButton,this.hasTriggerModifier=L(s.event,t.triggerModifier),this.hasSideBySideModifier=L(s.event,t.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=s.event.detail<=1}}e.ClickLinkMouseEvent=y;class f{constructor(s,t){this.keyCodeIsTriggerKey=s.keyCode===t.triggerKey,this.keyCodeIsSideBySideKey=s.keyCode===t.triggerSideBySideKey,this.hasTriggerModifier=L(s,t.triggerModifier)}}e.ClickLinkKeyboardEvent=f;class _{constructor(s,t,i,o){this.triggerKey=s,this.triggerModifier=t,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=o}equals(s){return this.triggerKey===s.triggerKey&&this.triggerModifier===s.triggerModifier&&this.triggerSideBySideKey===s.triggerSideBySideKey&&this.triggerSideBySideModifier===s.triggerSideBySideModifier}}e.ClickLinkOptions=_;function b(n){return n==="altKey"?E.isMacintosh?new _(57,"metaKey",6,"altKey"):new _(5,"ctrlKey",6,"altKey"):E.isMacintosh?new _(6,"altKey",57,"metaKey"):new _(6,"altKey",5,"ctrlKey")}class p extends k.Disposable{constructor(s,t){super(),this._onMouseMoveOrRelevantKeyDown=this._register(new c.Emitter),this.onMouseMoveOrRelevantKeyDown=this._onMouseMoveOrRelevantKeyDown.event,this._onExecute=this._register(new c.Emitter),this.onExecute=this._onExecute.event,this._onCancel=this._register(new c.Emitter),this.onCancel=this._onCancel.event,this._editor=s,this._extractLineNumberFromMouseEvent=t?.extractLineNumberFromMouseEvent??(i=>i.target.position?i.target.position.lineNumber:0),this._opts=b(this._editor.getOption(78)),this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._register(this._editor.onDidChangeConfiguration(i=>{if(i.hasChanged(78)){const o=b(this._editor.getOption(78));if(this._opts.equals(o))return;this._opts=o,this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._lineNumberOnMouseDown=0,this._onCancel.fire()}})),this._register(this._editor.onMouseMove(i=>this._onEditorMouseMove(new y(i,this._opts)))),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(new y(i,this._opts)))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(new y(i,this._opts)))),this._register(this._editor.onKeyDown(i=>this._onEditorKeyDown(new f(i,this._opts)))),this._register(this._editor.onKeyUp(i=>this._onEditorKeyUp(new f(i,this._opts)))),this._register(this._editor.onMouseDrag(()=>this._resetHandler())),this._register(this._editor.onDidChangeCursorSelection(i=>this._onDidChangeCursorSelection(i))),this._register(this._editor.onDidChangeModel(i=>this._resetHandler())),this._register(this._editor.onDidChangeModelContent(()=>this._resetHandler())),this._register(this._editor.onDidScrollChange(i=>{(i.scrollTopChanged||i.scrollLeftChanged)&&this._resetHandler()}))}_onDidChangeCursorSelection(s){s.selection&&s.selection.startColumn!==s.selection.endColumn&&this._resetHandler()}_onEditorMouseMove(s){this._lastMouseMoveEvent=s,this._onMouseMoveOrRelevantKeyDown.fire([s,null])}_onEditorMouseDown(s){this._hasTriggerKeyOnMouseDown=s.hasTriggerModifier,this._lineNumberOnMouseDown=this._extractLineNumberFromMouseEvent(s)}_onEditorMouseUp(s){const t=this._extractLineNumberFromMouseEvent(s);this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t&&this._onExecute.fire(s)}_onEditorKeyDown(s){this._lastMouseMoveEvent&&(s.keyCodeIsTriggerKey||s.keyCodeIsSideBySideKey&&s.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,s]):s.hasTriggerModifier&&this._onCancel.fire()}_onEditorKeyUp(s){s.keyCodeIsTriggerKey&&this._onCancel.fire()}_resetHandler(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}e.ClickLinkGesture=p}),define(oe[635],re([1,0,13,14]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContentHoverComputer=void 0;class E{get anchor(){return this._anchor}set anchor(y){this._anchor=y}get shouldFocus(){return this._shouldFocus}set shouldFocus(y){this._shouldFocus=y}get source(){return this._source}set source(y){this._source=y}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(y){this._insistOnKeepingHoverVisible=y}constructor(y,f){this._editor=y,this._participants=f,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(y,f){if(f.type!==1&&!f.supportsMarkerHover)return[];const _=y.getModel(),b=f.range.startLineNumber;if(b>_.getLineCount())return[];const p=_.getLineMaxColumn(b);return y.getLineDecorations(b).filter(n=>{if(n.options.isWholeLine)return!0;const s=n.range.startLineNumber===b?n.range.startColumn:1,t=n.range.endLineNumber===b?n.range.endColumn:p;if(n.options.showIfCollapsed){if(s>f.range.startColumn+1||f.range.endColumn-1>t)return!1}else if(s>f.range.startColumn||f.range.endColumn>t)return!1;return!0})}computeAsync(y){const f=this._anchor;if(!this._editor.hasModel()||!f)return k.AsyncIterableObject.EMPTY;const _=E._getLineDecorations(this._editor,f);return k.AsyncIterableObject.merge(this._participants.map(b=>b.computeAsync?b.computeAsync(f,_,y):k.AsyncIterableObject.EMPTY))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const y=E._getLineDecorations(this._editor,this._anchor);let f=[];for(const _ of this._participants)f=f.concat(_.computeSync(this._anchor,y));return(0,c.coalesce)(f)}}e.ContentHoverComputer=E}),define(oe[636],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FilteredHoverResult=e.HoverResult=void 0;class c{constructor(L,y,f){this.anchor=L,this.hoverParts=y,this.isComplete=f}filter(L){const y=this.hoverParts.filter(f=>f.isValidForHoverAnchor(L));return y.length===this.hoverParts.length?this:new k(this,this.anchor,y,this.isComplete)}}e.HoverResult=c;class k extends c{constructor(L,y,f,_){super(y,f,_),this.original=L}filter(L){return this.original.filter(L)}}e.FilteredHoverResult=k}),define(oe[637],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtHoverAccessibleView=e.HoverAccessibilityHelp=e.HoverAccessibleView=void 0;class c{}e.HoverAccessibleView=c;class k{}e.HoverAccessibilityHelp=k;class E{}e.ExtHoverAccessibleView=E}),define(oe[353],re([1,0,14,8,6,2]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverOperation=e.HoverResult=void 0;class y{constructor(b,p,n){this.value=b,this.isComplete=p,this.hasLoadingMessage=n}}e.HoverResult=y;class f extends L.Disposable{constructor(b,p){super(),this._editor=b,this._computer=p,this._onResult=this._register(new E.Emitter),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new c.RunOnceScheduler(()=>this._triggerAsyncComputation(),0)),this._secondWaitScheduler=this._register(new c.RunOnceScheduler(()=>this._triggerSyncComputation(),0)),this._loadingMessageScheduler=this._register(new c.RunOnceScheduler(()=>this._triggerLoadingMessage(),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(b,p=!0){this._state=b,p&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,c.createCancelableAsyncIterable)(b=>this._computer.computeAsync(b)),(async()=>{try{for await(const b of this._asyncIterable)b&&(this._result.push(b),this._fireResult());this._asyncIterableDone=!0,(this._state===3||this._state===4)&&this._setState(0)}catch(b){(0,k.onUnexpectedError)(b)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){this._state===3&&this._setState(4)}_fireResult(){if(this._state===1||this._state===2)return;const b=this._state===0,p=this._state===4;this._onResult.fire(new y(this._result.slice(0),b,p))}start(b){if(b===0)this._state===0&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}e.HoverOperation=f}),define(oe[86],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverParticipantRegistry=e.RenderedHoverParts=e.HoverForeignElementAnchor=e.HoverRangeAnchor=void 0;class c{constructor(y,f,_,b){this.priority=y,this.range=f,this.initialMousePosX=_,this.initialMousePosY=b,this.type=1}equals(y){return y.type===1&&this.range.equalsRange(y.range)}canAdoptVisibleHover(y,f){return y.type===1&&f.lineNumber===this.range.startLineNumber}}e.HoverRangeAnchor=c;class k{constructor(y,f,_,b,p,n){this.priority=y,this.owner=f,this.range=_,this.initialMousePosX=b,this.initialMousePosY=p,this.supportsMarkerHover=n,this.type=2}equals(y){return y.type===2&&this.owner===y.owner}canAdoptVisibleHover(y,f){return y.type===2&&this.owner===y.owner}}e.HoverForeignElementAnchor=k;class E{constructor(y){this.renderedHoverParts=y}dispose(){for(const y of this.renderedHoverParts)y.dispose()}}e.RenderedHoverParts=E,e.HoverParticipantRegistry=new class{constructor(){this._participants=[]}register(y){this._participants.push(y)}getAll(){return this._participants}}}),define(oe[638],re([1,0,13,55,40]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarginHoverComputer=void 0;class L{get lineNumber(){return this._lineNumber}set lineNumber(f){this._lineNumber=f}get lane(){return this._laneOrLine}set lane(f){this._laneOrLine=f}constructor(f){this._editor=f,this._lineNumber=-1,this._laneOrLine=E.GlyphMarginLane.Center}computeSync(){const f=n=>({value:n}),_=this._editor.getLineDecorations(this._lineNumber),b=[],p=this._laneOrLine==="lineNo";if(!_)return b;for(const n of _){const s=n.options.glyphMargin?.position??E.GlyphMarginLane.Center;if(!p&&s!==this._laneOrLine)continue;const t=p?n.options.lineNumberHoverMessage:n.options.glyphMarginHoverMessage;!t||(0,k.isEmptyMarkdownString)(t)||b.push(...(0,c.asArray)(t).map(f))}return b}}e.MarginHoverComputer=L}),define(oe[639],re([1,0,234,2,9,5]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizableContentWidget=void 0;const y=30,f=24;class _ extends k.Disposable{constructor(p,n=new L.Dimension(10,10)){super(),this._editor=p,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new c.ResizableHTMLElement),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=L.Dimension.lift(n),this._resizableNode.layout(n.height,n.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize(s=>{this._resize(new L.Dimension(s.dimension.width,s.dimension.height)),s.done&&(this._isResizing=!1)})),this._register(this._resizableNode.onDidWillResize(()=>{this._isResizing=!0}))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){return this._contentPosition?.position?E.Position.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(p){const n=this._editor.getDomNode(),s=this._editor.getScrolledVisiblePosition(p);return!n||!s?void 0:L.getDomNodePagePosition(n).top+s.top-y}_availableVerticalSpaceBelow(p){const n=this._editor.getDomNode(),s=this._editor.getScrolledVisiblePosition(p);if(!n||!s)return;const t=L.getDomNodePagePosition(n),i=L.getClientArea(n.ownerDocument.body),o=t.top+s.top+s.height;return i.height-o-f}_findPositionPreference(p,n){const s=Math.min(this._availableVerticalSpaceBelow(n)??1/0,p),t=Math.min(this._availableVerticalSpaceAbove(n)??1/0,p),i=Math.min(Math.max(t,s),p),o=Math.min(p,i);let g;return this._editor.getOption(60).above?g=o<=t?1:2:g=o<=s?2:1,g===1?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),g}_resize(p){this._resizableNode.layout(p.height,p.width)}}e.ResizableContentWidget=_}),define(oe[640],re([1,0,23]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InPlaceReplaceCommand=void 0;class k{constructor(L,y,f){this._editRange=L,this._originalSelection=y,this._text=f}getEditOperations(L,y){y.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(L,y){const _=y.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new c.Selection(_.endLineNumber,Math.min(this._originalSelection.positionColumn,_.endColumn),_.endLineNumber,Math.min(this._originalSelection.positionColumn,_.endColumn)):new c.Selection(_.endLineNumber,_.endColumn-this._text.length,_.endLineNumber,_.endColumn)}}e.InPlaceReplaceCommand=k}),define(oe[354],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getSpaceCnt=c,e.generateIndent=k;function c(E,L){let y=0;for(let f=0;f<E.length;f++)E.charAt(f)==="	"?y+=L:y++;return y}function k(E,L,y){E=E<0?0:E;let f="";if(!y){const _=Math.floor(E/L);E=E%L;for(let b=0;b<_;b++)f+="	"}for(let _=0;_<E;_++)f+=" ";return f}}),define(oe[355],re([1,0,8,2,9,4,47,22]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintsFragments=e.InlayHintItem=e.InlayHintAnchor=void 0,e.asCommandLink=n;class _{constructor(t,i){this.range=t,this.direction=i}}e.InlayHintAnchor=_;class b{constructor(t,i,o){this.hint=t,this.anchor=i,this.provider=o,this._isResolved=!1}with(t){const i=new b(this.hint,t.anchor,this.provider);return i._isResolved=this._isResolved,i._currentResolve=this._currentResolve,i}async resolve(t){if(typeof this.provider.resolveInlayHint=="function"){if(this._currentResolve)return await this._currentResolve,t.isCancellationRequested?void 0:this.resolve(t);this._isResolved||(this._currentResolve=this._doResolve(t).finally(()=>this._currentResolve=void 0)),await this._currentResolve}}async _doResolve(t){try{const i=await Promise.resolve(this.provider.resolveInlayHint(this.hint,t));this.hint.tooltip=i?.tooltip??this.hint.tooltip,this.hint.label=i?.label??this.hint.label,this.hint.textEdits=i?.textEdits??this.hint.textEdits,this._isResolved=!0}catch(i){(0,c.onUnexpectedExternalError)(i),this._isResolved=!1}}}e.InlayHintItem=b;class p{static{this._emptyInlayHintList=Object.freeze({dispose(){},hints:[]})}static async create(t,i,o,g){const u=[],l=t.ordered(i).reverse().map(a=>o.map(async r=>{try{const d=await a.provideInlayHints(i,r,g);(d?.hints.length||a.onDidChangeInlayHints)&&u.push([d??p._emptyInlayHintList,a])}catch(d){(0,c.onUnexpectedExternalError)(d)}}));if(await Promise.all(l.flat()),g.isCancellationRequested||i.isDisposed())throw new c.CancellationError;return new p(o,u,i)}constructor(t,i,o){this._disposables=new k.DisposableStore,this.ranges=t,this.provider=new Set;const g=[];for(const[u,l]of i){this._disposables.add(u),this.provider.add(l);for(const a of u.hints){const r=o.validatePosition(a.position);let d="before";const m=p._getRangeAtPosition(o,r);let h;m.getStartPosition().isBefore(r)?(h=L.Range.fromPositions(m.getStartPosition(),r),d="after"):(h=L.Range.fromPositions(r,m.getEndPosition()),d="before"),g.push(new b(a,new _(h,d),l))}}this.items=g.sort((u,l)=>E.Position.compare(u.hint.position,l.hint.position))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(t,i){const o=i.lineNumber,g=t.getWordAtPosition(i);if(g)return new L.Range(o,g.startColumn,o,g.endColumn);t.tokenization.tokenizeIfCheap(o);const u=t.tokenization.getLineTokens(o),l=i.column-1,a=u.findTokenIndexAtOffset(l);let r=u.getStartOffset(a),d=u.getEndOffset(a);return d-r===1&&(r===l&&a>1?(r=u.getStartOffset(a-1),d=u.getEndOffset(a-1)):d===l&&a<u.getCount()-1&&(r=u.getStartOffset(a+1),d=u.getEndOffset(a+1))),new L.Range(o,r+1,o,d+1)}}e.InlayHintsFragments=p;function n(s){return f.URI.from({scheme:y.Schemas.command,path:s.id,query:s.arguments&&encodeURIComponent(JSON.stringify(s.arguments))}).toString()}}),define(oe[256],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showNextInlineSuggestionActionId=e.showPreviousInlineSuggestionActionId=e.inlineSuggestCommitId=void 0,e.inlineSuggestCommitId="editor.action.inlineSuggest.commit",e.showPreviousInlineSuggestionActionId="editor.action.inlineSuggest.showPrevious",e.showNextInlineSuggestionActionId="editor.action.inlineSuggest.showNext"}),define(oe[206],re([1,0,13,11,9,4,103]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GhostTextReplacement=e.GhostTextPart=e.GhostText=void 0,e.ghostTextsOrReplacementsEqual=p,e.ghostTextOrReplacementEquals=n;class f{constructor(t,i){this.lineNumber=t,this.parts=i}equals(t){return this.lineNumber===t.lineNumber&&this.parts.length===t.parts.length&&this.parts.every((i,o)=>i.equals(t.parts[o]))}renderForScreenReader(t){if(this.parts.length===0)return"";const i=this.parts[this.parts.length-1],o=t.substr(0,i.column-1);return new y.TextEdit([...this.parts.map(u=>new y.SingleTextEdit(L.Range.fromPositions(new E.Position(1,u.column)),u.lines.join(`
`)))]).applyToString(o).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(t=>t.lines.length===0)}get lineCount(){return 1+this.parts.reduce((t,i)=>t+i.lines.length-1,0)}}e.GhostText=f;class _{constructor(t,i,o){this.column=t,this.text=i,this.preview=o,this.lines=(0,k.splitLines)(this.text)}equals(t){return this.column===t.column&&this.lines.length===t.lines.length&&this.lines.every((i,o)=>i===t.lines[o])}}e.GhostTextPart=_;class b{constructor(t,i,o,g=0){this.lineNumber=t,this.columnRange=i,this.text=o,this.additionalReservedLineCount=g,this.parts=[new _(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=(0,k.splitLines)(this.text)}renderForScreenReader(t){return this.newLines.join(`
`)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(t=>t.lines.length===0)}equals(t){return this.lineNumber===t.lineNumber&&this.columnRange.equals(t.columnRange)&&this.newLines.length===t.newLines.length&&this.newLines.every((i,o)=>i===t.newLines[o])&&this.additionalReservedLineCount===t.additionalReservedLineCount}}e.GhostTextReplacement=b;function p(s,t){return(0,c.equals)(s,t,n)}function n(s,t){return s===t?!0:!s||!t?!1:s instanceof f&&t instanceof f||s instanceof b&&t instanceof b?s.equals(t):!1}}),define(oe[641],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionsAccessibleView=void 0;class c{}e.InlineCompletionsAccessibleView=c}),define(oe[257],re([1,0,190,11,4,115,103,206]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.singleTextRemoveCommonPrefix=_,e.singleTextEditAugments=b,e.computeGhostText=p;function _(g,u,l){const a=l?g.range.intersectRanges(l):g.range;if(!a)return g;const r=u.getValueInRange(a,1),d=(0,k.commonPrefixLength)(r,g.text),m=L.TextLength.ofText(r.substring(0,d)).addToPosition(g.range.getStartPosition()),h=g.text.substring(d),v=E.Range.fromPositions(m,g.range.getEndPosition());return new y.SingleTextEdit(v,h)}function b(g,u){return g.text.startsWith(u.text)&&n(g.range,u.range)}function p(g,u,l,a,r=0){let d=_(g,u);if(d.range.endLineNumber!==d.range.startLineNumber)return;const m=u.getLineContent(d.range.startLineNumber),h=(0,k.getLeadingWhitespace)(m).length;if(d.range.startColumn-1<=h){const T=(0,k.getLeadingWhitespace)(d.text).length,M=m.substring(d.range.startColumn-1,h),[A,R]=[d.range.getStartPosition(),d.range.getEndPosition()],N=A.column+M.length<=R.column?A.delta(0,M.length):R,O=E.Range.fromPositions(N,R),x=d.text.startsWith(M)?d.text.substring(M.length):d.text.substring(T);d=new y.SingleTextEdit(O,x)}const C=u.getValueInRange(d.range),w=t(C,d.text);if(!w)return;const S=d.range.startLineNumber,D=new Array;if(l==="prefix"){const T=w.filter(M=>M.originalLength===0);if(T.length>1||T.length===1&&T[0].originalStart!==C.length)return}const I=d.text.length-r;for(const T of w){const M=d.range.startColumn+T.originalStart+T.originalLength;if(l==="subwordSmart"&&a&&a.lineNumber===d.range.startLineNumber&&M<a.column||T.originalLength>0)return;if(T.modifiedLength===0)continue;const A=T.modifiedStart+T.modifiedLength,R=Math.max(T.modifiedStart,Math.min(A,I)),N=d.text.substring(T.modifiedStart,R),O=d.text.substring(R,Math.max(T.modifiedStart,A));N.length>0&&D.push(new f.GhostTextPart(M,N,!1)),O.length>0&&D.push(new f.GhostTextPart(M,O,!0))}return new f.GhostText(S,D)}function n(g,u){return u.getStartPosition().equals(g.getStartPosition())&&u.getEndPosition().isBeforeOrEqual(g.getEndPosition())}let s;function t(g,u){if(s?.originalValue===g&&s?.newValue===u)return s?.changes;{let l=o(g,u,!0);if(l){const a=i(l);if(a>0){const r=o(g,u,!1);r&&i(r)<a&&(l=r)}}return s={originalValue:g,newValue:u,changes:l},l}}function i(g){let u=0;for(const l of g)u+=l.originalLength;return u}function o(g,u,l){if(g.length>5e3||u.length>5e3)return;function a(C){let w=0;for(let S=0,D=C.length;S<D;S++){const I=C.charCodeAt(S);I>w&&(w=I)}return w}const r=Math.max(a(g),a(u));function d(C){if(C<0)throw new Error("unexpected");return r+C+1}function m(C){let w=0,S=0;const D=new Int32Array(C.length);for(let I=0,T=C.length;I<T;I++)if(l&&C[I]==="("){const M=S*100+w;D[I]=d(2*M),w++}else if(l&&C[I]===")"){w=Math.max(w-1,0);const M=S*100+w;D[I]=d(2*M+1),w===0&&S++}else D[I]=C.charCodeAt(I);return D}const h=m(g),v=m(u);return new c.LcsDiff({getElements:()=>h},{getElements:()=>v}).ComputeDiff(!1).changes}}),define(oe[207],re([1,0,8,2,21,9,4]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnRange=void 0,e.getReadonlyEmptyArray=_,e.applyObservableDecorations=p,e.addPositions=n,e.subtractPositions=s;const f=[];function _(){return f}class b{constructor(i,o){if(this.startColumn=i,this.endColumnExclusive=o,i>o)throw new c.BugIndicatingError(`startColumn ${i} cannot be after endColumnExclusive ${o}`)}toRange(i){return new y.Range(i,this.startColumn,i,this.endColumnExclusive)}equals(i){return this.startColumn===i.startColumn&&this.endColumnExclusive===i.endColumnExclusive}}e.ColumnRange=b;function p(t,i){const o=new k.DisposableStore,g=t.createDecorationsCollection();return o.add((0,E.autorunOpts)({debugName:()=>`Apply decorations from ${i.debugName}`},u=>{const l=i.read(u);g.set(l)})),o.add({dispose:()=>{g.clear()}}),o}function n(t,i){return new L.Position(t.lineNumber+i.lineNumber-1,i.lineNumber===1?t.column+i.column-1:i.column)}function s(t,i){return new L.Position(t.lineNumber-i.lineNumber+1,t.lineNumber-i.lineNumber===0?t.column-i.column+1:t.column)}}),define(oe[642],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inlineEditJumpBackId=e.inlineEditJumpToId=e.inlineEditRejectId=e.inlineEditAcceptId=void 0,e.inlineEditAcceptId="editor.action.inlineEdit.accept",e.inlineEditRejectId="editor.action.inlineEdit.reject",e.inlineEditJumpToId="editor.action.inlineEdit.jumpTo",e.inlineEditJumpBackId="editor.action.inlineEdit.jumpBack"}),define(oe[643],re([1,0,4,23]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CopyLinesCommand=void 0;class E{constructor(y,f,_){this._selection=y,this._isCopyingDown=f,this._noop=_||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(y,f){let _=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,_.startLineNumber<_.endLineNumber&&_.endColumn===1&&(this._endLineNumberDelta=1,_=_.setEndPosition(_.endLineNumber-1,y.getLineMaxColumn(_.endLineNumber-1)));const b=[];for(let n=_.startLineNumber;n<=_.endLineNumber;n++)b.push(y.getLineContent(n));const p=b.join(`
`);p===""&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?f.addEditOperation(new c.Range(_.endLineNumber,y.getLineMaxColumn(_.endLineNumber),_.endLineNumber+1,1),_.endLineNumber===y.getLineCount()?"":`
`):this._isCopyingDown?f.addEditOperation(new c.Range(_.startLineNumber,1,_.startLineNumber,1),p+`
`):f.addEditOperation(new c.Range(_.endLineNumber,y.getLineMaxColumn(_.endLineNumber),_.endLineNumber,y.getLineMaxColumn(_.endLineNumber)),`
`+p),this._selectionId=f.trackSelection(_),this._selectionDirection=this._selection.getDirection()}computeCursorState(y,f){let _=f.getTrackedSelection(this._selectionId);if(this._startLineNumberDelta!==0||this._endLineNumberDelta!==0){let b=_.startLineNumber,p=_.startColumn,n=_.endLineNumber,s=_.endColumn;this._startLineNumberDelta!==0&&(b=b+this._startLineNumberDelta,p=1),this._endLineNumberDelta!==0&&(n=n+this._endLineNumberDelta,s=1),_=k.Selection.createWithDirection(b,p,n,s,this._selectionDirection)}return _}}e.CopyLinesCommand=E}),define(oe[644],re([1,0,76,4]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SortLinesCommand=void 0;class E{static{this._COLLATOR=null}static getCollator(){return E._COLLATOR||(E._COLLATOR=new Intl.Collator),E._COLLATOR}constructor(_,b){this.selection=_,this.descending=b,this.selectionId=null}getEditOperations(_,b){const p=y(_,this.selection,this.descending);p&&b.addEditOperation(p.range,p.text),this.selectionId=b.trackSelection(this.selection)}computeCursorState(_,b){return b.getTrackedSelection(this.selectionId)}static canRun(_,b,p){if(_===null)return!1;const n=L(_,b,p);if(!n)return!1;for(let s=0,t=n.before.length;s<t;s++)if(n.before[s]!==n.after[s])return!0;return!1}}e.SortLinesCommand=E;function L(f,_,b){const p=_.startLineNumber;let n=_.endLineNumber;if(_.endColumn===1&&n--,p>=n)return null;const s=[];for(let i=p;i<=n;i++)s.push(f.getLineContent(i));let t=s.slice(0);return t.sort(E.getCollator().compare),b===!0&&(t=t.reverse()),{startLineNumber:p,endLineNumber:n,before:s,after:t}}function y(f,_,b){const p=L(f,_,b);return p?c.EditOperation.replace(new k.Range(p.startLineNumber,1,p.endLineNumber,f.getLineMaxColumn(p.endLineNumber)),p.after.join(`
`)):null}}),define(oe[356],re([1,0,5,101,2,21,65,113]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlaceholderTextContribution=void 0;class _ extends E.Disposable{static{this.ID="editor.contrib.placeholderText"}constructor(n){super(),this._editor=n,this._editorObs=(0,f.observableCodeEditor)(this._editor),this._placeholderText=this._editorObs.getOption(88),this._state=(0,L.derivedOpts)({owner:this,equalsFn:k.structuralEquals},s=>{const t=this._placeholderText.read(s);if(t&&this._editorObs.valueIsEmpty.read(s))return{placeholder:t}}),this._shouldViewBeAlive=b(this,s=>this._state.read(s)?.placeholder!==void 0),this._view=(0,y.derivedWithStore)((s,t)=>{if(!this._shouldViewBeAlive.read(s))return;const i=(0,c.h)("div.editorPlaceholder");t.add((0,L.autorun)(o=>{const g=this._state.read(o),u=g?.placeholder!==void 0;i.root.style.display=u?"block":"none",i.root.innerText=g?.placeholder??""})),t.add((0,L.autorun)(o=>{const g=this._editorObs.layoutInfo.read(o);i.root.style.left=`${g.contentLeft}px`,i.root.style.width=g.contentWidth-g.verticalScrollbarWidth+"px",i.root.style.top=`${this._editor.getTopForLineNumber(0)}px`})),t.add((0,L.autorun)(o=>{i.root.style.fontFamily=this._editorObs.getOption(49).read(o),i.root.style.fontSize=this._editorObs.getOption(52).read(o)+"px",i.root.style.lineHeight=this._editorObs.getOption(67).read(o)+"px"})),t.add(this._editorObs.createOverlayWidget({allowEditorOverflow:!1,minContentWidthInPx:(0,L.constObservable)(0),position:(0,L.constObservable)(null),domNode:i.root}))}),this._view.recomputeInitiallyAndOnChange(this._store)}}e.PlaceholderTextContribution=_;function b(p,n){return(0,L.derivedObservableWithCache)(p,(s,t)=>t===!0?!0:n(s))}}),define(oe[357],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SEMANTIC_HIGHLIGHTING_SETTING_ID=void 0,e.isSemanticColoringEnabled=c,e.SEMANTIC_HIGHLIGHTING_SETTING_ID="editor.semanticHighlighting";function c(k,E,L){const y=L.getValue(e.SEMANTIC_HIGHLIGHTING_SETTING_ID,{overrideIdentifier:k.getLanguageId(),resource:k.uri})?.enabled;return typeof y=="boolean"?y:E.getColorTheme().semanticHighlighting}}),define(oe[358],re([1,0,73,9,4]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketSelectionRangeProvider=void 0;class L{async provideSelectionRanges(f,_){const b=[];for(const p of _){const n=[];b.push(n);const s=new Map;await new Promise(t=>L._bracketsRightYield(t,0,f,p,s)),await new Promise(t=>L._bracketsLeftYield(t,0,f,p,s,n))}return b}static{this._maxDuration=30}static{this._maxRounds=2}static _bracketsRightYield(f,_,b,p,n){const s=new Map,t=Date.now();for(;;){if(_>=L._maxRounds){f();break}if(!p){f();break}const i=b.bracketPairs.findNextBracket(p);if(!i){f();break}if(Date.now()-t>L._maxDuration){setTimeout(()=>L._bracketsRightYield(f,_+1,b,p,n));break}if(i.bracketInfo.isOpeningBracket){const g=i.bracketInfo.bracketText,u=s.has(g)?s.get(g):0;s.set(g,u+1)}else{const g=i.bracketInfo.getOpeningBrackets()[0].bracketText;let u=s.has(g)?s.get(g):0;if(u-=1,s.set(g,Math.max(0,u)),u<0){let l=n.get(g);l||(l=new c.LinkedList,n.set(g,l)),l.push(i.range)}}p=i.range.getEndPosition()}}static _bracketsLeftYield(f,_,b,p,n,s){const t=new Map,i=Date.now();for(;;){if(_>=L._maxRounds&&n.size===0){f();break}if(!p){f();break}const o=b.bracketPairs.findPrevBracket(p);if(!o){f();break}if(Date.now()-i>L._maxDuration){setTimeout(()=>L._bracketsLeftYield(f,_+1,b,p,n,s));break}if(o.bracketInfo.isOpeningBracket){const u=o.bracketInfo.bracketText;let l=t.has(u)?t.get(u):0;if(l-=1,t.set(u,Math.max(0,l)),l<0){const a=n.get(u);if(a){const r=a.shift();a.size===0&&n.delete(u);const d=E.Range.fromPositions(o.range.getEndPosition(),r.getStartPosition()),m=E.Range.fromPositions(o.range.getStartPosition(),r.getEndPosition());s.push({range:d}),s.push({range:m}),L._addBracketLeading(b,m,s)}}}else{const u=o.bracketInfo.getOpeningBrackets()[0].bracketText,l=t.has(u)?t.get(u):0;t.set(u,l+1)}p=o.range.getStartPosition()}}static _addBracketLeading(f,_,b){if(_.startLineNumber===_.endLineNumber)return;const p=_.startLineNumber,n=f.getLineFirstNonWhitespaceColumn(p);n!==0&&n!==_.startColumn&&(b.push({range:E.Range.fromPositions(new k.Position(p,n),_.getEndPosition())}),b.push({range:E.Range.fromPositions(new k.Position(p,1),_.getEndPosition())}));const s=p-1;if(s>0){const t=f.getLineFirstNonWhitespaceColumn(s);t===_.startColumn&&t!==f.getLineLastNonWhitespaceColumn(s)&&(b.push({range:E.Range.fromPositions(new k.Position(s,t),_.getEndPosition())}),b.push({range:E.Range.fromPositions(new k.Position(s,1),_.getEndPosition())}))}}}e.BracketSelectionRangeProvider=L}),define(oe[645],re([1,0,11,4]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WordSelectionRangeProvider=void 0;class E{constructor(y=!0){this.selectSubwords=y}provideSelectionRanges(y,f){const _=[];for(const b of f){const p=[];_.push(p),this.selectSubwords&&this._addInWordRanges(p,y,b),this._addWordRanges(p,y,b),this._addWhitespaceLine(p,y,b),p.push({range:y.getFullModelRange()})}return _}_addInWordRanges(y,f,_){const b=f.getWordAtPosition(_);if(!b)return;const{word:p,startColumn:n}=b,s=_.column-n;let t=s,i=s,o=0;for(;t>=0;t--){const g=p.charCodeAt(t);if(t!==s&&(g===95||g===45))break;if((0,c.isLowerAsciiLetter)(g)&&(0,c.isUpperAsciiLetter)(o))break;o=g}for(t+=1;i<p.length;i++){const g=p.charCodeAt(i);if((0,c.isUpperAsciiLetter)(g)&&(0,c.isLowerAsciiLetter)(o))break;if(g===95||g===45)break;o=g}t<i&&y.push({range:new k.Range(_.lineNumber,n+t,_.lineNumber,n+i)})}_addWordRanges(y,f,_){const b=f.getWordAtPosition(_);b&&y.push({range:new k.Range(_.lineNumber,b.startColumn,_.lineNumber,b.endColumn)})}_addWhitespaceLine(y,f,_){f.getLineLength(_.lineNumber)>0&&f.getLineFirstNonWhitespaceColumn(_.lineNumber)===0&&f.getLineLastNonWhitespaceColumn(_.lineNumber)===0&&y.push({range:new k.Range(_.lineNumber,1,_.lineNumber,f.getLineMaxColumn(_.lineNumber))})}}e.WordSelectionRangeProvider=E}),define(oe[134],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetParser=e.TextmateSnippet=e.Variable=e.FormatString=e.Transform=e.Choice=e.Placeholder=e.TransformableMarker=e.Text=e.Marker=e.Scanner=void 0;class c{constructor(){this.value="",this.pos=0}static{this._table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13}}static isDigitCharacter(o){return o>=48&&o<=57}static isVariableCharacter(o){return o===95||o>=97&&o<=122||o>=65&&o<=90}text(o){this.value=o,this.pos=0}tokenText(o){return this.value.substr(o.pos,o.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};const o=this.pos;let g=0,u=this.value.charCodeAt(o),l;if(l=c._table[u],typeof l=="number")return this.pos+=1,{type:l,pos:o,len:1};if(c.isDigitCharacter(u)){l=8;do g+=1,u=this.value.charCodeAt(o+g);while(c.isDigitCharacter(u));return this.pos+=g,{type:l,pos:o,len:g}}if(c.isVariableCharacter(u)){l=9;do u=this.value.charCodeAt(o+ ++g);while(c.isVariableCharacter(u)||c.isDigitCharacter(u));return this.pos+=g,{type:l,pos:o,len:g}}l=10;do g+=1,u=this.value.charCodeAt(o+g);while(!isNaN(u)&&typeof c._table[u]>"u"&&!c.isDigitCharacter(u)&&!c.isVariableCharacter(u));return this.pos+=g,{type:l,pos:o,len:g}}}e.Scanner=c;class k{constructor(){this._children=[]}appendChild(o){return o instanceof E&&this._children[this._children.length-1]instanceof E?this._children[this._children.length-1].value+=o.value:(o.parent=this,this._children.push(o)),this}replace(o,g){const{parent:u}=o,l=u.children.indexOf(o),a=u.children.slice(0);a.splice(l,1,...g),u._children=a,function r(d,m){for(const h of d)h.parent=m,r(h.children,h)}(g,u)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let o=this;for(;;){if(!o)return;if(o instanceof s)return o;o=o.parent}}toString(){return this.children.reduce((o,g)=>o+g.toString(),"")}len(){return 0}}e.Marker=k;class E extends k{constructor(o){super(),this.value=o}toString(){return this.value}len(){return this.value.length}clone(){return new E(this.value)}}e.Text=E;class L extends k{}e.TransformableMarker=L;class y extends L{static compareByIndex(o,g){return o.index===g.index?0:o.isFinalTabstop?1:g.isFinalTabstop||o.index<g.index?-1:o.index>g.index?1:0}constructor(o){super(),this.index=o}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof f?this._children[0]:void 0}clone(){const o=new y(this.index);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(g=>g.clone()),o}}e.Placeholder=y;class f extends k{constructor(){super(...arguments),this.options=[]}appendChild(o){return o instanceof E&&(o.parent=this,this.options.push(o)),this}toString(){return this.options[0].value}len(){return this.options[0].len()}clone(){const o=new f;return this.options.forEach(o.appendChild,o),o}}e.Choice=f;class _ extends k{constructor(){super(...arguments),this.regexp=new RegExp("")}resolve(o){const g=this;let u=!1,l=o.replace(this.regexp,function(){return u=!0,g._replace(Array.prototype.slice.call(arguments,0,-2))});return!u&&this._children.some(a=>a instanceof b&&!!a.elseValue)&&(l=this._replace([])),l}_replace(o){let g="";for(const u of this._children)if(u instanceof b){let l=o[u.index]||"";l=u.resolve(l),g+=l}else g+=u.toString();return g}toString(){return""}clone(){const o=new _;return o.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),o._children=this.children.map(g=>g.clone()),o}}e.Transform=_;class b extends k{constructor(o,g,u,l){super(),this.index=o,this.shorthandName=g,this.ifValue=u,this.elseValue=l}resolve(o){return this.shorthandName==="upcase"?o?o.toLocaleUpperCase():"":this.shorthandName==="downcase"?o?o.toLocaleLowerCase():"":this.shorthandName==="capitalize"?o?o[0].toLocaleUpperCase()+o.substr(1):"":this.shorthandName==="pascalcase"?o?this._toPascalCase(o):"":this.shorthandName==="camelcase"?o?this._toCamelCase(o):"":o&&typeof this.ifValue=="string"?this.ifValue:!o&&typeof this.elseValue=="string"?this.elseValue:o||""}_toPascalCase(o){const g=o.match(/[a-z0-9]+/gi);return g?g.map(u=>u.charAt(0).toUpperCase()+u.substr(1)).join(""):o}_toCamelCase(o){const g=o.match(/[a-z0-9]+/gi);return g?g.map((u,l)=>l===0?u.charAt(0).toLowerCase()+u.substr(1):u.charAt(0).toUpperCase()+u.substr(1)).join(""):o}clone(){return new b(this.index,this.shorthandName,this.ifValue,this.elseValue)}}e.FormatString=b;class p extends L{constructor(o){super(),this.name=o}resolve(o){let g=o.resolve(this);return this.transform&&(g=this.transform.resolve(g||"")),g!==void 0?(this._children=[new E(g)],!0):!1}clone(){const o=new p(this.name);return this.transform&&(o.transform=this.transform.clone()),o._children=this.children.map(g=>g.clone()),o}}e.Variable=p;function n(i,o){const g=[...i];for(;g.length>0;){const u=g.shift();if(!o(u))break;g.unshift(...u.children)}}class s extends k{get placeholderInfo(){if(!this._placeholders){const o=[];let g;this.walk(function(u){return u instanceof y&&(o.push(u),g=!g||g.index<u.index?u:g),!0}),this._placeholders={all:o,last:g}}return this._placeholders}get placeholders(){const{all:o}=this.placeholderInfo;return o}offset(o){let g=0,u=!1;return this.walk(l=>l===o?(u=!0,!1):(g+=l.len(),!0)),u?g:-1}fullLen(o){let g=0;return n([o],u=>(g+=u.len(),!0)),g}enclosingPlaceholders(o){const g=[];let{parent:u}=o;for(;u;)u instanceof y&&g.push(u),u=u.parent;return g}resolveVariables(o){return this.walk(g=>(g instanceof p&&g.resolve(o)&&(this._placeholders=void 0),!0)),this}appendChild(o){return this._placeholders=void 0,super.appendChild(o)}replace(o,g){return this._placeholders=void 0,super.replace(o,g)}clone(){const o=new s;return this._children=this.children.map(g=>g.clone()),o}walk(o){n(this.children,o)}}e.TextmateSnippet=s;class t{constructor(){this._scanner=new c,this._token={type:14,pos:0,len:0}}static escape(o){return o.replace(/\$|}|\\/g,"\\$&")}static guessNeedsClipboard(o){return/\${?CLIPBOARD/.test(o)}parse(o,g,u){const l=new s;return this.parseFragment(o,l),this.ensureFinalTabstop(l,u??!1,g??!1),l}parseFragment(o,g){const u=g.children.length;for(this._scanner.text(o),this._token=this._scanner.next();this._parse(g););const l=new Map,a=[];g.walk(m=>(m instanceof y&&(m.isFinalTabstop?l.set(0,void 0):!l.has(m.index)&&m.children.length>0?l.set(m.index,m.children):a.push(m)),!0));const r=(m,h)=>{const v=l.get(m.index);if(!v)return;const C=new y(m.index);C.transform=m.transform;for(const w of v){const S=w.clone();C.appendChild(S),S instanceof y&&l.has(S.index)&&!h.has(S.index)&&(h.add(S.index),r(S,h),h.delete(S.index))}g.replace(m,[C])},d=new Set;for(const m of a)r(m,d);return g.children.slice(u)}ensureFinalTabstop(o,g,u){(g||u&&o.placeholders.length>0)&&(o.placeholders.find(a=>a.index===0)||o.appendChild(new y(0)))}_accept(o,g){if(o===void 0||this._token.type===o){const u=g?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),u}return!1}_backTo(o){return this._scanner.pos=o.pos+o.len,this._token=o,!1}_until(o){const g=this._token;for(;this._token.type!==o;){if(this._token.type===14)return!1;if(this._token.type===5){const l=this._scanner.next();if(l.type!==0&&l.type!==4&&l.type!==5)return!1}this._token=this._scanner.next()}const u=this._scanner.value.substring(g.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),u}_parse(o){return this._parseEscaped(o)||this._parseTabstopOrVariableName(o)||this._parseComplexPlaceholder(o)||this._parseComplexVariable(o)||this._parseAnything(o)}_parseEscaped(o){let g;return(g=this._accept(5,!0))?(g=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||g,o.appendChild(new E(g)),!0):!1}_parseTabstopOrVariableName(o){let g;const u=this._token;return this._accept(0)&&(g=this._accept(9,!0)||this._accept(8,!0))?(o.appendChild(/^\d+$/.test(g)?new y(Number(g)):new p(g)),!0):this._backTo(u)}_parseComplexPlaceholder(o){let g;const u=this._token;if(!(this._accept(0)&&this._accept(3)&&(g=this._accept(8,!0))))return this._backTo(u);const a=new y(Number(g));if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(a),!0;if(!this._parse(a))return o.appendChild(new E("${"+g+":")),a.children.forEach(o.appendChild,o),!0}else if(a.index>0&&this._accept(7)){const r=new f;for(;;){if(this._parseChoiceElement(r)){if(this._accept(2))continue;if(this._accept(7)&&(a.appendChild(r),this._accept(4)))return o.appendChild(a),!0}return this._backTo(u),!1}}else return this._accept(6)?this._parseTransform(a)?(o.appendChild(a),!0):(this._backTo(u),!1):this._accept(4)?(o.appendChild(a),!0):this._backTo(u)}_parseChoiceElement(o){const g=this._token,u=[];for(;!(this._token.type===2||this._token.type===7);){let l;if((l=this._accept(5,!0))?l=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||l:l=this._accept(void 0,!0),!l)return this._backTo(g),!1;u.push(l)}return u.length===0?(this._backTo(g),!1):(o.appendChild(new E(u.join(""))),!0)}_parseComplexVariable(o){let g;const u=this._token;if(!(this._accept(0)&&this._accept(3)&&(g=this._accept(9,!0))))return this._backTo(u);const a=new p(g);if(this._accept(1))for(;;){if(this._accept(4))return o.appendChild(a),!0;if(!this._parse(a))return o.appendChild(new E("${"+g+":")),a.children.forEach(o.appendChild,o),!0}else return this._accept(6)?this._parseTransform(a)?(o.appendChild(a),!0):(this._backTo(u),!1):this._accept(4)?(o.appendChild(a),!0):this._backTo(u)}_parseTransform(o){const g=new _;let u="",l="";for(;!this._accept(6);){let a;if(a=this._accept(5,!0)){a=this._accept(6,!0)||a,u+=a;continue}if(this._token.type!==14){u+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let a;if(a=this._accept(5,!0)){a=this._accept(5,!0)||this._accept(6,!0)||a,g.appendChild(new E(a));continue}if(!(this._parseFormatString(g)||this._parseAnything(g)))return!1}for(;!this._accept(4);){if(this._token.type!==14){l+=this._accept(void 0,!0);continue}return!1}try{g.regexp=new RegExp(u,l)}catch{return!1}return o.transform=g,!0}_parseFormatString(o){const g=this._token;if(!this._accept(0))return!1;let u=!1;this._accept(3)&&(u=!0);const l=this._accept(8,!0);if(l)if(u){if(this._accept(4))return o.appendChild(new b(Number(l))),!0;if(!this._accept(1))return this._backTo(g),!1}else return o.appendChild(new b(Number(l))),!0;else return this._backTo(g),!1;if(this._accept(6)){const a=this._accept(9,!0);return!a||!this._accept(4)?(this._backTo(g),!1):(o.appendChild(new b(Number(l),a)),!0)}else if(this._accept(11)){const a=this._until(4);if(a)return o.appendChild(new b(Number(l),void 0,a,void 0)),!0}else if(this._accept(12)){const a=this._until(4);if(a)return o.appendChild(new b(Number(l),void 0,void 0,a)),!0}else if(this._accept(13)){const a=this._until(1);if(a){const r=this._until(4);if(r)return o.appendChild(new b(Number(l),void 0,a,r)),!0}}else{const a=this._until(4);if(a)return o.appendChild(new b(Number(l),void 0,void 0,a)),!0}return this._backTo(g),!1}_parseAnything(o){return this._token.type!==14?(o.appendChild(new E(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}}e.SnippetParser=t}),define(oe[359],re([1,0,89,14,18,45,8,9,4,589,103,207,134]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionItem=e.InlineCompletionList=e.InlineCompletionProviderResult=void 0,e.provideInlineCompletions=t;async function t(a,r,d,m,h=E.CancellationToken.None,v){const C=r instanceof f.Position?u(r,d):r,w=a.all(d),S=new L.SetMap;for(const x of w)x.groupId&&S.add(x.groupId,x);function D(x){if(!x.yieldsToGroupIds)return[];const F=[];for(const W of x.yieldsToGroupIds||[]){const z=S.get(W);for(const q of z)F.push(q)}return F}const I=new Map,T=new Set;function M(x,F){if(F=[...F,x],T.has(x))return F;T.add(x);try{const W=D(x);for(const z of W){const q=M(z,F);if(q)return q}}finally{T.delete(x)}}function A(x){const F=I.get(x);if(F)return F;const W=M(x,[]);W&&(0,y.onUnexpectedExternalError)(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${W.map(q=>q.toString?q.toString():""+q).join(" -> ")}`));const z=new k.DeferredPromise;return I.set(x,z.p),(async()=>{if(!W){const q=D(x);for(const H of q){const K=await A(H);if(K&&K.items.length>0)return}}try{return r instanceof f.Position?await x.provideInlineCompletions(d,r,m,h):await x.provideInlineEdits?.(d,r,m,h)}catch(q){(0,y.onUnexpectedExternalError)(q);return}})().then(q=>z.complete(q),q=>z.error(q)),z.p}const R=await Promise.all(w.map(async x=>({provider:x,completions:await A(x)}))),N=new Map,O=[];for(const x of R){const F=x.completions;if(!F)continue;const W=new o(F,x.provider);O.push(W);for(const z of F.items){const q=g.from(z,W,C,d,v);N.set(q.hash(),q)}}return new i(Array.from(N.values()),new Set(N.keys()),O)}class i{constructor(r,d,m){this.completions=r,this.hashs=d,this.providerResults=m}has(r){return this.hashs.has(r.hash())}dispose(){for(const r of this.providerResults)r.removeRef()}}e.InlineCompletionProviderResult=i;class o{constructor(r,d){this.inlineCompletions=r,this.provider=d,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}}e.InlineCompletionList=o;class g{static from(r,d,m,h,v){let C,w,S=r.range?_.Range.lift(r.range):m;if(typeof r.insertText=="string"){if(C=r.insertText,v&&r.completeBracketPairs){C=l(C,S.getStartPosition(),h,v);const D=C.length-r.insertText.length;D!==0&&(S=new _.Range(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn+D))}w=void 0}else if("snippet"in r.insertText){const D=r.insertText.snippet.length;if(v&&r.completeBracketPairs){r.insertText.snippet=l(r.insertText.snippet,S.getStartPosition(),h,v);const T=r.insertText.snippet.length-D;T!==0&&(S=new _.Range(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn+T))}const I=new s.SnippetParser().parse(r.insertText.snippet);I.children.length===1&&I.children[0]instanceof s.Text?(C=I.children[0].value,w=void 0):(C=I.toString(),w={snippet:r.insertText.snippet,range:S})}else(0,c.assertNever)(r.insertText);return new g(C,r.command,S,C,w,r.additionalTextEdits||(0,n.getReadonlyEmptyArray)(),r,d)}constructor(r,d,m,h,v,C,w,S){this.filterText=r,this.command=d,this.range=m,this.insertText=h,this.snippetInfo=v,this.additionalTextEdits=C,this.sourceInlineCompletion=w,this.source=S,r=r.replace(/\r\n|\r/g,`
`),h=r.replace(/\r\n|\r/g,`
`)}withRange(r){return new g(this.filterText,this.command,r,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new p.SingleTextEdit(this.range,this.insertText)}}e.InlineCompletionItem=g;function u(a,r){const d=r.getWordAtPosition(a),m=r.getLineMaxColumn(a.lineNumber);return d?new _.Range(a.lineNumber,d.startColumn,a.lineNumber,m):_.Range.fromPositions(a,a.with(void 0,m))}function l(a,r,d,m){const v=d.getLineContent(r.lineNumber).substring(0,r.column-1)+a,w=d.tokenization.tokenizeLineWithEdit(r,v.length-(r.column-1),a)?.sliceAndInflate(r.column-1,v.length,0);return w?(0,b.fixBracketsInLine)(w,m):a}}),define(oe[360],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StickyModel=e.StickyElement=e.StickyRange=void 0;class c{constructor(y,f){this.startLineNumber=y,this.endLineNumber=f}}e.StickyRange=c;class k{constructor(y,f,_){this.range=y,this.children=f,this.parent=_}}e.StickyElement=k;class E{constructor(y,f,_,b){this.uri=y,this.version=f,this.element=_,this.outlineProviderId=b}}e.StickyModel=E}),define(oe[361],re([1,0,13,82,11]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompletionModel=e.LineContext=void 0;class L{constructor(_,b){this.leadingLineContent=_,this.characterCountDelta=b}}e.LineContext=L;class y{constructor(_,b,p,n,s,t,i=k.FuzzyScoreOptions.default,o=void 0){this.clipboardText=o,this._snippetCompareFn=y._compareCompletionItems,this._items=_,this._column=b,this._wordDistance=n,this._options=s,this._refilterKind=1,this._lineContext=p,this._fuzzyScoreOptions=i,t==="top"?this._snippetCompareFn=y._compareCompletionItemsSnippetsUp:t==="bottom"&&(this._snippetCompareFn=y._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(_){(this._lineContext.leadingLineContent!==_.leadingLineContent||this._lineContext.characterCountDelta!==_.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<_.characterCountDelta&&this._filteredItems?2:1,this._lineContext=_)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const _=new Set;for(const[b,p]of this.getItemsByProvider())p.length>0&&p[0].container.incomplete&&_.add(b);return _}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const _=[],{leadingLineContent:b,characterCountDelta:p}=this._lineContext;let n="",s="";const t=this._refilterKind===1?this._items:this._filteredItems,i=[],o=!this._options.filterGraceful||t.length>2e3?k.fuzzyScore:k.fuzzyScoreGracefulAggressive;for(let g=0;g<t.length;g++){const u=t[g];if(u.isInvalid)continue;const l=this._itemsByProvider.get(u.provider);l?l.push(u):this._itemsByProvider.set(u.provider,[u]);const a=u.position.column-u.editStart.column,r=a+p-(u.position.column-this._column);if(n.length!==r&&(n=r===0?"":b.slice(-r),s=n.toLowerCase()),u.word=n,r===0)u.score=k.FuzzyScore.Default;else{let d=0;for(;d<a;){const m=n.charCodeAt(d);if(m===32||m===9)d+=1;else break}if(d>=r)u.score=k.FuzzyScore.Default;else if(typeof u.completion.filterText=="string"){const m=o(n,s,d,u.completion.filterText,u.filterTextLow,0,this._fuzzyScoreOptions);if(!m)continue;(0,E.compareIgnoreCase)(u.completion.filterText,u.textLabel)===0?u.score=m:(u.score=(0,k.anyScore)(n,s,d,u.textLabel,u.labelLow,0),u.score[0]=m[0])}else{const m=o(n,s,d,u.textLabel,u.labelLow,0,this._fuzzyScoreOptions);if(!m)continue;u.score=m}}u.idx=g,u.distance=this._wordDistance.distance(u.position,u.completion),i.push(u),_.push(u.textLabel.length)}this._filteredItems=i.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:_.length?(0,c.quickSelect)(_.length-.85,_,(g,u)=>g-u):0}}static _compareCompletionItems(_,b){return _.score[0]>b.score[0]?-1:_.score[0]<b.score[0]?1:_.distance<b.distance?-1:_.distance>b.distance?1:_.idx<b.idx?-1:_.idx>b.idx?1:0}static _compareCompletionItemsSnippetsDown(_,b){if(_.completion.kind!==b.completion.kind){if(_.completion.kind===27)return 1;if(b.completion.kind===27)return-1}return y._compareCompletionItems(_,b)}static _compareCompletionItemsSnippetsUp(_,b){if(_.completion.kind!==b.completion.kind){if(_.completion.kind===27)return-1;if(b.completion.kind===27)return 1}return y._compareCompletionItems(_,b)}}e.CompletionModel=y}),define(oe[646],re([1,0,13,2,143]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommitCharacterController=void 0;class L{constructor(f,_,b,p){this._disposables=new k.DisposableStore,this._disposables.add(b.onDidSuggest(n=>{n.completionModel.items.length===0&&this.reset()})),this._disposables.add(b.onDidCancel(n=>{this.reset()})),this._disposables.add(_.onDidShow(()=>this._onItem(_.getFocusedItem()))),this._disposables.add(_.onDidFocus(this._onItem,this)),this._disposables.add(_.onDidHide(this.reset,this)),this._disposables.add(f.onWillType(n=>{if(this._active&&!_.isFrozen()&&b.state!==0){const s=n.charCodeAt(n.length-1);this._active.acceptCharacters.has(s)&&f.getOption(0)&&p(this._active.item)}}))}_onItem(f){if(!f||!(0,c.isNonEmptyArray)(f.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===f.item)return;const _=new E.CharacterSet;for(const b of f.item.completion.commitCharacters)b.length>0&&_.add(b.charCodeAt(0));this._active={acceptCharacters:_,item:f}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}e.CommitCharacterController=L}),define(oe[647],re([1,0,2]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OvertypingCapturer=void 0;class k{static{this._maxSelectionLength=51200}constructor(L,y){this._disposables=new c.DisposableStore,this._lastOvertyped=[],this._locked=!1,this._disposables.add(L.onWillType(()=>{if(this._locked||!L.hasModel())return;const f=L.getSelections(),_=f.length;let b=!1;for(let n=0;n<_;n++)if(!f[n].isEmpty()){b=!0;break}if(!b){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];const p=L.getModel();for(let n=0;n<_;n++){const s=f[n];if(p.getValueLengthInRange(s)>k._maxSelectionLength)return;this._lastOvertyped[n]={value:p.getValueInRange(s),multiline:s.startLineNumber!==s.endLineNumber}}})),this._disposables.add(y.onDidTrigger(f=>{this._locked=!0})),this._disposables.add(y.onDidCancel(f=>{this._locked=!1}))}getLastOvertypedInfo(L){if(L>=0&&L<this._lastOvertyped.length)return this._lastOvertyped[L]}dispose(){this._disposables.dispose()}}e.OvertypingCapturer=k}),define(oe[362],re([1,0,13,4,358]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WordDistance=void 0;class L{static{this.None=new class extends L{distance(){return 0}}}static async create(f,_){if(!_.getOption(119).localityBonus||!_.hasModel())return L.None;const b=_.getModel(),p=_.getPosition();if(!f.canComputeWordRanges(b.uri))return L.None;const[n]=await new E.BracketSelectionRangeProvider().provideSelectionRanges(b,[p]);if(n.length===0)return L.None;const s=await f.computeWordRanges(b.uri,n[0].range);if(!s)return L.None;const t=b.getWordUntilPosition(p);return delete s[t.word],new class extends L{distance(i,o){if(!p.equals(_.getPosition()))return 0;if(o.kind===17)return 2<<20;const g=typeof o.label=="string"?o.label:o.label.label,u=s[g];if((0,c.isFalsyOrEmpty)(u))return 2<<20;const l=(0,c.binarySearch)(u,k.Range.fromPositions(i),k.Range.compareRangesUsingStarts),a=l>=0?u[l]:u[Math.max(0,~l-1)];let r=n.length;for(const d of n){if(!k.Range.containsRange(d.range,a))break;r-=1}return r}}}}e.WordDistance=L}),define(oe[363],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFuzzyActionArr=c,e.isFuzzyAction=k,e.isString=E,e.isIAction=L,e.empty=y,e.fixCase=f,e.sanitize=_,e.log=b,e.createError=p,e.substituteMatches=n,e.substituteMatchesRe=s,e.findRules=t,e.stateExists=i;function c(o){return Array.isArray(o)}function k(o){return!c(o)}function E(o){return typeof o=="string"}function L(o){return!E(o)}function y(o){return!o}function f(o,g){return o.ignoreCase&&g?g.toLowerCase():g}function _(o){return o.replace(/[&<>'"_]/g,"-")}function b(o,g){console.log(`${o.languageId}: ${g}`)}function p(o,g){return new Error(`${o.languageId}: ${g}`)}function n(o,g,u,l,a){const r=/\$((\$)|(#)|(\d\d?)|[sS](\d\d?)|@(\w+))/g;let d=null;return g.replace(r,function(m,h,v,C,w,S,D,I,T){return y(v)?y(C)?!y(w)&&w<l.length?f(o,l[w]):!y(D)&&o&&typeof o[D]=="string"?o[D]:(d===null&&(d=a.split("."),d.unshift(a)),!y(S)&&S<d.length?f(o,d[S]):""):f(o,u):"$"})}function s(o,g,u){const l=/\$[sS](\d\d?)/g;let a=null;return g.replace(l,function(r,d){return a===null&&(a=u.split("."),a.unshift(u)),!y(d)&&d<a.length?f(o,a[d]):""})}function t(o,g){let u=g;for(;u&&u.length>0;){const l=o.tokenizer[u];if(l)return l;const a=u.lastIndexOf(".");a<0?u=null:u=u.substr(0,a)}return null}function i(o,g){let u=g;for(;u&&u.length>0;){if(o.stateNames[u])return!0;const a=u.lastIndexOf(".");a<0?u=null:u=u.substr(0,a)}return!1}}),define(oe[648],re([1,0,363]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compile=t;function k(i,o){if(!o||!Array.isArray(o))return!1;for(const g of o)if(!i(g))return!1;return!0}function E(i,o){return typeof i=="boolean"?i:o}function L(i,o){return typeof i=="string"?i:o}function y(i){const o={};for(const g of i)o[g]=!0;return o}function f(i,o=!1){o&&(i=i.map(function(u){return u.toLowerCase()}));const g=y(i);return o?function(u){return g[u.toLowerCase()]!==void 0&&g.hasOwnProperty(u.toLowerCase())}:function(u){return g[u]!==void 0&&g.hasOwnProperty(u)}}function _(i,o,g){o=o.replace(/@@/g,"");let u=0,l;do l=!1,o=o.replace(/@(\w+)/g,function(r,d){l=!0;let m="";if(typeof i[d]=="string")m=i[d];else if(i[d]&&i[d]instanceof RegExp)m=i[d].source;else throw i[d]===void 0?c.createError(i,"language definition does not contain attribute '"+d+"', used at: "+o):c.createError(i,"attribute reference '"+d+"' must be a string, used at: "+o);return c.empty(m)?"":"(?:"+m+")"}),u++;while(l&&u<5);o=o.replace(/\x01/g,"@");const a=(i.ignoreCase?"i":"")+(i.unicode?"u":"");if(g&&o.match(/\$[sS](\d\d?)/g)){let d=null,m=null;return h=>(m&&d===h||(d=h,m=new RegExp(c.substituteMatchesRe(i,o,h),a)),m)}return new RegExp(o,a)}function b(i,o,g,u){if(u<0)return i;if(u<o.length)return o[u];if(u>=100){u=u-100;const l=g.split(".");if(l.unshift(g),u<l.length)return l[u]}return null}function p(i,o,g,u){let l=-1,a=g,r=g.match(/^\$(([sS]?)(\d\d?)|#)(.*)$/);r&&(r[3]&&(l=parseInt(r[3]),r[2]&&(l=l+100)),a=r[4]);let d="~",m=a;!a||a.length===0?(d="!=",m=""):/^\w*$/.test(m)?d="==":(r=a.match(/^(@|!@|~|!~|==|!=)(.*)$/),r&&(d=r[1],m=r[2]));let h;if((d==="~"||d==="!~")&&/^(\w|\|)*$/.test(m)){const v=f(m.split("|"),i.ignoreCase);h=function(C){return d==="~"?v(C):!v(C)}}else if(d==="@"||d==="!@"){const v=i[m];if(!v)throw c.createError(i,"the @ match target '"+m+"' is not defined, in rule: "+o);if(!k(function(w){return typeof w=="string"},v))throw c.createError(i,"the @ match target '"+m+"' must be an array of strings, in rule: "+o);const C=f(v,i.ignoreCase);h=function(w){return d==="@"?C(w):!C(w)}}else if(d==="~"||d==="!~")if(m.indexOf("$")<0){const v=_(i,"^"+m+"$",!1);h=function(C){return d==="~"?v.test(C):!v.test(C)}}else h=function(v,C,w,S){return _(i,"^"+c.substituteMatches(i,m,C,w,S)+"$",!1).test(v)};else if(m.indexOf("$")<0){const v=c.fixCase(i,m);h=function(C){return d==="=="?C===v:C!==v}}else{const v=c.fixCase(i,m);h=function(C,w,S,D,I){const T=c.substituteMatches(i,v,w,S,D);return d==="=="?C===T:C!==T}}return l===-1?{name:g,value:u,test:function(v,C,w,S){return h(v,v,C,w,S)}}:{name:g,value:u,test:function(v,C,w,S){const D=b(v,C,w,l);return h(D||"",v,C,w,S)}}}function n(i,o,g){if(g){if(typeof g=="string")return g;if(g.token||g.token===""){if(typeof g.token!="string")throw c.createError(i,"a 'token' attribute must be of type string, in rule: "+o);{const u={token:g.token};if(g.token.indexOf("$")>=0&&(u.tokenSubst=!0),typeof g.bracket=="string")if(g.bracket==="@open")u.bracket=1;else if(g.bracket==="@close")u.bracket=-1;else throw c.createError(i,"a 'bracket' attribute must be either '@open' or '@close', in rule: "+o);if(g.next){if(typeof g.next!="string")throw c.createError(i,"the next state must be a string value in rule: "+o);{let l=g.next;if(!/^(@pop|@push|@popall)$/.test(l)&&(l[0]==="@"&&(l=l.substr(1)),l.indexOf("$")<0&&!c.stateExists(i,c.substituteMatches(i,l,"",[],""))))throw c.createError(i,"the next state '"+g.next+"' is not defined in rule: "+o);u.next=l}}return typeof g.goBack=="number"&&(u.goBack=g.goBack),typeof g.switchTo=="string"&&(u.switchTo=g.switchTo),typeof g.log=="string"&&(u.log=g.log),typeof g.nextEmbedded=="string"&&(u.nextEmbedded=g.nextEmbedded,i.usesEmbedded=!0),u}}else if(Array.isArray(g)){const u=[];for(let l=0,a=g.length;l<a;l++)u[l]=n(i,o,g[l]);return{group:u}}else if(g.cases){const u=[];for(const a in g.cases)if(g.cases.hasOwnProperty(a)){const r=n(i,o,g.cases[a]);a==="@default"||a==="@"||a===""?u.push({test:void 0,value:r,name:a}):a==="@eos"?u.push({test:function(d,m,h,v){return v},value:r,name:a}):u.push(p(i,o,a,r))}const l=i.defaultToken;return{test:function(a,r,d,m){for(const h of u)if(!h.test||h.test(a,r,d,m))return h.value;return l}}}else throw c.createError(i,"an action must be a string, an object with a 'token' or 'cases' attribute, or an array of actions; in rule: "+o)}else return{token:""}}class s{constructor(o){this.regex=new RegExp(""),this.action={token:""},this.matchOnlyAtLineStart=!1,this.name="",this.name=o}setRegex(o,g){let u;if(typeof g=="string")u=g;else if(g instanceof RegExp)u=g.source;else throw c.createError(o,"rules must start with a match string or regular expression: "+this.name);this.matchOnlyAtLineStart=u.length>0&&u[0]==="^",this.name=this.name+": "+u,this.regex=_(o,"^(?:"+(this.matchOnlyAtLineStart?u.substr(1):u)+")",!0)}setAction(o,g){this.action=n(o,this.name,g)}resolveRegex(o){return this.regex instanceof RegExp?this.regex:this.regex(o)}}function t(i,o){if(!o||typeof o!="object")throw new Error("Monarch: expecting a language definition object");const g={languageId:i,includeLF:E(o.includeLF,!1),noThrow:!1,maxStack:100,start:typeof o.start=="string"?o.start:null,ignoreCase:E(o.ignoreCase,!1),unicode:E(o.unicode,!1),tokenPostfix:L(o.tokenPostfix,"."+i),defaultToken:L(o.defaultToken,"source"),usesEmbedded:!1,stateNames:{},tokenizer:{},brackets:[]},u=o;u.languageId=i,u.includeLF=g.includeLF,u.ignoreCase=g.ignoreCase,u.unicode=g.unicode,u.noThrow=g.noThrow,u.usesEmbedded=g.usesEmbedded,u.stateNames=o.tokenizer,u.defaultToken=g.defaultToken;function l(r,d,m){for(const h of m){let v=h.include;if(v){if(typeof v!="string")throw c.createError(g,"an 'include' attribute must be a string at: "+r);if(v[0]==="@"&&(v=v.substr(1)),!o.tokenizer[v])throw c.createError(g,"include target '"+v+"' is not defined at: "+r);l(r+"."+v,d,o.tokenizer[v])}else{const C=new s(r);if(Array.isArray(h)&&h.length>=1&&h.length<=3)if(C.setRegex(u,h[0]),h.length>=3)if(typeof h[1]=="string")C.setAction(u,{token:h[1],next:h[2]});else if(typeof h[1]=="object"){const w=h[1];w.next=h[2],C.setAction(u,w)}else throw c.createError(g,"a next state as the last element of a rule can only be given if the action is either an object or a string, at: "+r);else C.setAction(u,h[1]);else{if(!h.regex)throw c.createError(g,"a rule must either be an array, or an object with a 'regex' or 'include' field at: "+r);h.name&&typeof h.name=="string"&&(C.name=h.name),h.matchOnlyAtStart&&(C.matchOnlyAtLineStart=E(h.matchOnlyAtLineStart,!1)),C.setRegex(u,h.regex),C.setAction(u,h.action)}d.push(C)}}}if(!o.tokenizer||typeof o.tokenizer!="object")throw c.createError(g,"a language definition must define the 'tokenizer' attribute as an object");g.tokenizer=[];for(const r in o.tokenizer)if(o.tokenizer.hasOwnProperty(r)){g.start||(g.start=r);const d=o.tokenizer[r];g.tokenizer[r]=new Array,l("tokenizer."+r,g.tokenizer[r],d)}if(g.usesEmbedded=u.usesEmbedded,o.brackets){if(!Array.isArray(o.brackets))throw c.createError(g,"the 'brackets' attribute must be defined as an array")}else o.brackets=[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"},{open:"<",close:">",token:"delimiter.angle"}];const a=[];for(const r of o.brackets){let d=r;if(d&&Array.isArray(d)&&d.length===3&&(d={token:d[2],open:d[0],close:d[1]}),d.open===d.close)throw c.createError(g,"open and close brackets in a 'brackets' attribute must be different: "+d.open+`
 hint: use the 'bracket' attribute if matching on equal brackets is required.`);if(typeof d.open=="string"&&typeof d.token=="string"&&typeof d.close=="string")a.push({token:d.token+g.tokenPostfix,open:c.fixCase(g,d.open),close:c.fixCase(g,d.close)});else throw c.createError(g,"every element in the 'brackets' array must be a '{open,close,token}' object or array")}return g.brackets=a,g.noThrow=!0,g}}),define(oe[3],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.localize=E,e.localize2=y;const c=globalThis._VSCODE_NLS_LANGUAGE==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function k(f,_){let b;return _.length===0?b=f:b=f.replace(/\{(\d+)\}/g,(p,n)=>{const s=n[0],t=_[s];let i=p;return typeof t=="string"?i=t:(typeof t=="number"||typeof t=="boolean"||t===void 0||t===null)&&(i=String(t)),i}),c&&(b="\uFF3B"+b.replace(/[aouei]/g,"$&$&")+"\uFF3D"),b}function E(f,_,...b){return k(typeof f=="number"?L(f,_):_,b)}function L(f,_){const b=globalThis._VSCODE_NLS_MESSAGES?.[f];if(typeof b!="string"){if(typeof _=="string")return _;throw new Error(`!!! NLS MISSING: ${f} !!!`)}return b}function y(f,_,...b){let p;typeof f=="number"?p=L(f,_):p=_;const n=k(p,b);return{value:n,original:_===p?n:k(_,b)}}}),define(oe[364],re([1,0,43,165,26,3]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RegexToggle=e.WholeWordsToggle=e.CaseSensitiveToggle=void 0;const y=L.localize(1036,"Match Case"),f=L.localize(1037,"Match Whole Word"),_=L.localize(1038,"Use Regular Expression");class b extends k.Toggle{constructor(t){super({icon:E.Codicon.caseSensitive,title:y+t.appendTitle,isChecked:t.isChecked,hoverDelegate:t.hoverDelegate??(0,c.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}e.CaseSensitiveToggle=b;class p extends k.Toggle{constructor(t){super({icon:E.Codicon.wholeWord,title:f+t.appendTitle,isChecked:t.isChecked,hoverDelegate:t.hoverDelegate??(0,c.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}e.WholeWordsToggle=p;class n extends k.Toggle{constructor(t){super({icon:E.Codicon.regex,title:_+t.appendTitle,isChecked:t.isChecked,hoverDelegate:t.hoverDelegate??(0,c.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground})}}e.RegexToggle=n}),define(oe[174],re([1,0,5,46,84,2,3,470]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDownAction=e.ClickAction=e.HoverAction=e.HoverWidget=void 0,e.getHoverAccessibleViewHint=p;const f=c.$;class _ extends L.Disposable{constructor(){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new E.DomScrollableElement(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}}e.HoverWidget=_;class b extends L.Disposable{static render(i,o,g){return new b(i,o,g)}constructor(i,o,g){super(),this.actionLabel=o.label,this.actionKeybindingLabel=g,this.actionContainer=c.append(i,f("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=c.append(this.actionContainer,f("a.action")),this.action.setAttribute("role","button"),o.iconClass&&c.append(this.action,f(`span.icon.${o.iconClass}`));const u=c.append(this.action,f("span"));u.textContent=g?`${o.label} (${g})`:o.label,this._store.add(new n(this.actionContainer,o.run)),this._store.add(new s(this.actionContainer,o.run,[3,10])),this.setEnabled(!0)}setEnabled(i){i?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}e.HoverAction=b;function p(t,i){return t&&i?(0,y.localize)(1032,"Inspect this in the accessible view with {0}.",i):t?(0,y.localize)(1033,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class n extends L.Disposable{constructor(i,o){super(),this._register(c.addDisposableListener(i,c.EventType.CLICK,g=>{g.stopPropagation(),g.preventDefault(),o(i)}))}}e.ClickAction=n;class s extends L.Disposable{constructor(i,o,g){super(),this._register(c.addDisposableListener(i,c.EventType.KEY_DOWN,u=>{const l=new k.StandardKeyboardEvent(u);g.some(a=>l.equals(a))&&(u.stopPropagation(),u.preventDefault(),o(i))}))}}e.KeyDownAction=s}),define(oe[649],re([1,0,5,92,46,193,81,43,112,13,6,72,2,16,3,481]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectBoxList=void 0;const o=c.$,g="selectOption.entry.template";class u{get templateId(){return g}renderTemplate(r){const d=Object.create(null);return d.root=r,d.text=c.append(r,o(".option-text")),d.detail=c.append(r,o(".option-detail")),d.decoratorRight=c.append(r,o(".option-decorator-right")),d}renderElement(r,d,m){const h=m,v=r.text,C=r.detail,w=r.decoratorRight,S=r.isDisabled;h.text.textContent=v,h.detail.textContent=C||"",h.decoratorRight.innerText=w||"",S?h.root.classList.add("option-disabled"):h.root.classList.remove("option-disabled")}disposeTemplate(r){}}class l extends s.Disposable{static{this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32}static{this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2}static{this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3}constructor(r,d,m,h,v){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=h,this.selectBoxOptions=v||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=l.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new p.Emitter,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(m),this.selected=d||0,r&&this.setOptions(r,d),this.initStyleSheet()}setTitle(r){!this._hover&&r?this._hover=this._register((0,y.getBaseLayerHoverDelegate)().setupManagedHover((0,f.getDefaultHoverDelegate)("mouse"),this.selectElement,r)):this._hover&&this._hover.update(r)}getHeight(){return 22}getTemplateId(){return g}constructSelectDropDown(r){this.contextViewProvider=r,this.selectDropDownContainer=c.$(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=c.append(this.selectDropDownContainer,o(".select-box-details-pane"));const d=c.append(this.selectDropDownContainer,o(".select-box-dropdown-container-width-control")),m=c.append(d,o(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",c.append(m,this.widthControlElement),this._dropDownPosition=0,this.styleElement=c.createStyleSheet(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(c.addDisposableListener(this.selectDropDownContainer,c.EventType.DRAG_START,h=>{c.EventHelper.stop(h,!0)}))}registerListeners(){this._register(c.addStandardDisposableListener(this.selectElement,"change",d=>{this.selected=d.target.selectedIndex,this._onDidSelect.fire({index:d.target.selectedIndex,selected:d.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(c.addDisposableListener(this.selectElement,c.EventType.CLICK,d=>{c.EventHelper.stop(d),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(c.addDisposableListener(this.selectElement,c.EventType.MOUSE_DOWN,d=>{c.EventHelper.stop(d)}));let r;this._register(c.addDisposableListener(this.selectElement,"touchstart",d=>{r=this._isVisible})),this._register(c.addDisposableListener(this.selectElement,"touchend",d=>{c.EventHelper.stop(d),r?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(c.addDisposableListener(this.selectElement,c.EventType.KEY_DOWN,d=>{const m=new E.StandardKeyboardEvent(d);let h=!1;t.isMacintosh?(m.keyCode===18||m.keyCode===16||m.keyCode===10||m.keyCode===3)&&(h=!0):(m.keyCode===18&&m.altKey||m.keyCode===16&&m.altKey||m.keyCode===10||m.keyCode===3)&&(h=!0),h&&(this.showSelectDropDown(),c.EventHelper.stop(d,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(r,d){b.equals(this.options,r)||(this.options=r,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((m,h)=>{this.selectElement.add(this.createOption(m.text,h,m.isDisabled)),typeof m.description=="string"&&(this._hasDetails=!0)})),d!==void 0&&(this.select(d),this._currentSelection=this.selected)}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(r){r>=0&&r<this.options.length?this.selected=r:r>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(r){this.selectElement.tabIndex=r?0:-1}render(r){this.container=r,r.classList.add("select-container"),r.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const r=[];this.styles.listFocusBackground&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(r.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),r.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),r.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(r.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),r.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&r.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),r.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),r.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=r.join(`
`)}styleSelectElement(){const r=this.styles.selectBackground??"",d=this.styles.selectForeground??"",m=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=r,this.selectElement.style.color=d,this.selectElement.style.borderColor=m}styleList(){const r=this.styles.selectBackground??"",d=c.asCssValueWithDefault(this.styles.selectListBackground,r);this.selectDropDownListContainer.style.backgroundColor=d,this.selectionDetailsPane.style.backgroundColor=d;const m=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=m,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(r,d,m){const h=document.createElement("option");return h.value=r,h.text=r,h.disabled=!!m,h}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:r=>this.renderSelectDropDown(r,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:r=>this.renderSelectDropDown(r),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(r){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),r&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(r,d){return r.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(d),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let r=0;return this.options.forEach((d,m)=>{this.updateDetail(m),this.selectionDetailsPane.offsetHeight>r&&(r=this.selectionDetailsPane.offsetHeight)}),r}layoutSelectDropDown(r){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const d=c.getWindow(this.selectElement),m=c.getDomNodePagePosition(this.selectElement),h=c.getWindow(this.selectElement).getComputedStyle(this.selectElement),v=parseFloat(h.getPropertyValue("--dropdown-padding-top"))+parseFloat(h.getPropertyValue("--dropdown-padding-bottom")),C=d.innerHeight-m.top-m.height-(this.selectBoxOptions.minBottomMargin||0),w=m.top-l.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,S=this.selectElement.offsetWidth,D=this.setWidthControlElement(this.widthControlElement),I=Math.max(D,Math.round(S)).toString()+"px";this.selectDropDownContainer.style.width=I,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let T=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const M=this._hasDetails?this._cachedMaxDetailsHeight:0,A=T+v+M,R=Math.floor((C-v-M)/this.getHeight()),N=Math.floor((w-v-M)/this.getHeight());if(r)return m.top+m.height>d.innerHeight-22||m.top<l.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||R<1&&N<1?!1:(R<l.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&N>R&&this.options.length>R?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(m.top+m.height>d.innerHeight-22||m.top<l.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&R<1||this._dropDownPosition===1&&N<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&R+N<1)return this.hideSelectDropDown(!0),!1;A>C&&(T=R*this.getHeight())}else A>w&&(T=N*this.getHeight());return this.selectList.layout(T),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=T+v+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=T+v+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=I,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(r){let d=0;if(r){let m=0,h=0;this.options.forEach((v,C)=>{const w=v.detail?v.detail.length:0,S=v.decoratorRight?v.decoratorRight.length:0,D=v.text.length+w+S;D>h&&(m=C,h=D)}),r.textContent=this.options[m].text+(this.options[m].decoratorRight?this.options[m].decoratorRight+" ":""),d=c.getTotalWidth(r)}return d}createSelectList(r){if(this.selectList)return;this.selectDropDownListContainer=c.append(r,o(".select-box-dropdown-list-container")),this.listRenderer=new u,this.selectList=this._register(new _.List("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:h=>{let v=h.text;return h.detail&&(v+=`. ${h.detail}`),h.decoratorRight&&(v+=`. ${h.decoratorRight}`),h.description&&(v+=`. ${h.description}`),v},getWidgetAriaLabel:()=>(0,i.localize)(1024,"Select Box"),getRole:()=>t.isMacintosh?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const d=this._register(new k.DomEmitter(this.selectDropDownListContainer,"keydown")),m=p.Event.chain(d.event,h=>h.filter(()=>this.selectList.length>0).map(v=>new E.StandardKeyboardEvent(v)));this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===3))(this.onEnter,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===2))(this.onEnter,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===9))(this.onEscape,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===16))(this.onUpArrow,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===18))(this.onDownArrow,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===12))(this.onPageDown,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===11))(this.onPageUp,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===14))(this.onHome,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode===13))(this.onEnd,this)),this._register(p.Event.chain(m,h=>h.filter(v=>v.keyCode>=21&&v.keyCode<=56||v.keyCode>=85&&v.keyCode<=113))(this.onCharacter,this)),this._register(c.addDisposableListener(this.selectList.getHTMLElement(),c.EventType.POINTER_UP,h=>this.onPointerUp(h))),this._register(this.selectList.onMouseOver(h=>typeof h.index<"u"&&this.selectList.setFocus([h.index]))),this._register(this.selectList.onDidChangeFocus(h=>this.onListFocus(h))),this._register(c.addDisposableListener(this.selectDropDownContainer,c.EventType.FOCUS_OUT,h=>{!this._isVisible||c.isAncestor(h.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(r){if(!this.selectList.length)return;c.EventHelper.stop(r);const d=r.target;if(!d||d.classList.contains("slider"))return;const m=d.closest(".monaco-list-row");if(!m)return;const h=Number(m.getAttribute("data-index")),v=m.classList.contains("option-disabled");h>=0&&h<this.options.length&&!v&&(this.selected=h,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(r,d){const m=v=>{for(let C=0;C<v.childNodes.length;C++){const w=v.childNodes.item(C);(w.tagName&&w.tagName.toLowerCase())==="img"?w.remove():m(w)}},h=(0,L.renderMarkdown)({value:r,supportThemeIcons:!0},{actionHandler:d});return h.element.classList.add("select-box-description-markdown"),m(h.element),h.element}onListFocus(r){!this._isVisible||!this._hasDetails||this.updateDetail(r.indexes[0])}updateDetail(r){this.selectionDetailsPane.innerText="";const d=this.options[r],m=d?.description??"",h=d?.descriptionIsMarkdown??!1;if(m){if(h){const v=d.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(m,v))}else this.selectionDetailsPane.innerText=m;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(r){c.EventHelper.stop(r),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(r){c.EventHelper.stop(r),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(r){if(this.selected<this.options.length-1){c.EventHelper.stop(r,!0);const d=this.options[this.selected+1].isDisabled;if(d&&this.options.length>this.selected+2)this.selected+=2;else{if(d)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(r){this.selected>0&&(c.EventHelper.stop(r,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(r){c.EventHelper.stop(r),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(r){c.EventHelper.stop(r),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(r){c.EventHelper.stop(r),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(r){c.EventHelper.stop(r),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(r){const d=n.KeyCodeUtils.toString(r.keyCode);let m=-1;for(let h=0;h<this.options.length-1;h++)if(m=(h+this.selected+1)%this.options.length,this.options[m].text.charAt(0).toUpperCase()===d&&!this.options[m].isDisabled){this.select(m),this.selectList.setFocus([m]),this.selectList.reveal(this.selectList.getFocus()[0]),c.EventHelper.stop(r);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}e.SelectBoxList=l}),define(oe[650],re([1,0,649,459,83,16,480]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectBox=void 0;class y extends E.Widget{constructor(_,b,p,n,s){super(),L.isMacintosh&&!s?.useCustomDrawn?this.selectBoxDelegate=new k.SelectBoxNative(_,b,n,s):this.selectBoxDelegate=new c.SelectBoxList(_,b,p,n,s),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(_,b){this.selectBoxDelegate.setOptions(_,b)}select(_){this.selectBoxDelegate.select(_)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(_){this.selectBoxDelegate.setFocusable(_)}render(_){this.selectBoxDelegate.render(_)}}e.SelectBox=y}),define(oe[41],re([1,0,6,2,3]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmptySubmenuAction=e.SubmenuAction=e.Separator=e.ActionRunner=e.Action=void 0,e.toAction=p;class L extends k.Disposable{constructor(s,t="",i="",o=!0,g){super(),this._onDidChange=this._register(new c.Emitter),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=s,this._label=t,this._cssClass=i,this._enabled=o,this._actionCallback=g}get id(){return this._id}get label(){return this._label}set label(s){this._setLabel(s)}_setLabel(s){this._label!==s&&(this._label=s,this._onDidChange.fire({label:s}))}get tooltip(){return this._tooltip||""}set tooltip(s){this._setTooltip(s)}_setTooltip(s){this._tooltip!==s&&(this._tooltip=s,this._onDidChange.fire({tooltip:s}))}get class(){return this._cssClass}set class(s){this._setClass(s)}_setClass(s){this._cssClass!==s&&(this._cssClass=s,this._onDidChange.fire({class:s}))}get enabled(){return this._enabled}set enabled(s){this._setEnabled(s)}_setEnabled(s){this._enabled!==s&&(this._enabled=s,this._onDidChange.fire({enabled:s}))}get checked(){return this._checked}set checked(s){this._setChecked(s)}_setChecked(s){this._checked!==s&&(this._checked=s,this._onDidChange.fire({checked:s}))}async run(s,t){this._actionCallback&&await this._actionCallback(s)}}e.Action=L;class y extends k.Disposable{constructor(){super(...arguments),this._onWillRun=this._register(new c.Emitter),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new c.Emitter),this.onDidRun=this._onDidRun.event}async run(s,t){if(!s.enabled)return;this._onWillRun.fire({action:s});let i;try{await this.runAction(s,t)}catch(o){i=o}this._onDidRun.fire({action:s,error:i})}async runAction(s,t){await s.run(t)}}e.ActionRunner=y;class f{constructor(){this.id=f.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...s){let t=[];for(const i of s)i.length&&(t.length?t=[...t,new f,...i]:t=i);return t}static{this.ID="vs.actions.separator"}async run(){}}e.Separator=f;class _{get actions(){return this._actions}constructor(s,t,i,o){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=s,this.label=t,this.class=o,this._actions=i}async run(){}}e.SubmenuAction=_;class b extends L{static{this.ID="vs.actions.empty"}constructor(){super(b.ID,E.localize(1857,"(empty)"),void 0,!1)}}e.EmptySubmenuAction=b;function p(n){return{id:n.id,label:n.label,tooltip:n.tooltip??n.label,class:n.class,enabled:n.enabled??!0,checked:n.checked,run:async(...s)=>n.run(...s)}}}),define(oe[150],re([1,0,64,222,5,68,43,650,41,2,16,19,3,81,310]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectActionViewItem=e.ActionViewItem=e.BaseActionViewItem=void 0;class i extends b.Disposable{get action(){return this._action}constructor(l,a,r={}){super(),this.options=r,this._context=l||this,this._action=a,a instanceof _.Action&&this._register(a.onDidChange(d=>{this.element&&this.handleActionChangeEvent(d)}))}handleActionChangeEvent(l){l.enabled!==void 0&&this.updateEnabled(),l.checked!==void 0&&this.updateChecked(),l.class!==void 0&&this.updateClass(),l.label!==void 0&&(this.updateLabel(),this.updateTooltip()),l.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new _.ActionRunner)),this._actionRunner}set actionRunner(l){this._actionRunner=l}isEnabled(){return this._action.enabled}setActionContext(l){this._context=l}render(l){const a=this.element=l;this._register(L.Gesture.addTarget(l));const r=this.options&&this.options.draggable;r&&(l.draggable=!0,c.isFirefox&&this._register((0,E.addDisposableListener)(l,E.EventType.DRAG_START,d=>d.dataTransfer?.setData(k.DataTransfers.TEXT,this._action.label)))),this._register((0,E.addDisposableListener)(a,L.EventType.Tap,d=>this.onClick(d,!0))),this._register((0,E.addDisposableListener)(a,E.EventType.MOUSE_DOWN,d=>{r||E.EventHelper.stop(d,!0),this._action.enabled&&d.button===0&&a.classList.add("active")})),p.isMacintosh&&this._register((0,E.addDisposableListener)(a,E.EventType.CONTEXT_MENU,d=>{d.button===0&&d.ctrlKey===!0&&this.onClick(d)})),this._register((0,E.addDisposableListener)(a,E.EventType.CLICK,d=>{E.EventHelper.stop(d,!0),this.options&&this.options.isMenu||this.onClick(d)})),this._register((0,E.addDisposableListener)(a,E.EventType.DBLCLICK,d=>{E.EventHelper.stop(d,!0)})),[E.EventType.MOUSE_UP,E.EventType.MOUSE_OUT].forEach(d=>{this._register((0,E.addDisposableListener)(a,d,m=>{E.EventHelper.stop(m),a.classList.remove("active")}))})}onClick(l,a=!1){E.EventHelper.stop(l,!0);const r=n.isUndefinedOrNull(this._context)?this.options?.useEventAsContext?l:{preserveFocus:a}:this._context;this.actionRunner.run(this._action,r)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(l){this.element&&(this.element.tabIndex=l?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const l=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=l;else if(!this.customHover&&l!==""){const a=this.options.hoverDelegate??(0,y.getDefaultHoverDelegate)("element");this.customHover=this._store.add((0,t.getBaseLayerHoverDelegate)().setupManagedHover(a,this.element,l))}else this.customHover&&this.customHover.update(l)}updateAriaLabel(){if(this.element){const l=this.getTooltip()??"";this.element.setAttribute("aria-label",l)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}e.BaseActionViewItem=i;class o extends i{constructor(l,a,r){super(l,a,r),this.options=r,this.options.icon=r.icon!==void 0?r.icon:!1,this.options.label=r.label!==void 0?r.label:!0,this.cssClass=""}render(l){super.render(l),n.assertType(this.element);const a=document.createElement("a");if(a.classList.add("action-label"),a.setAttribute("role",this.getDefaultAriaRole()),this.label=a,this.element.appendChild(a),this.options.label&&this.options.keybinding){const r=document.createElement("span");r.classList.add("keybinding"),r.textContent=this.options.keybinding,this.element.appendChild(r)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===_.Separator.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(l){this.label&&(this.label.tabIndex=l?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let l=null;return this.action.tooltip?l=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(l=this.action.label,this.options.keybinding&&(l=s.localize(1040,"{0} ({1})",l,this.options.keybinding))),l??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const l=this.getTooltip()??"";this.label.setAttribute("aria-label",l)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}e.ActionViewItem=o;class g extends i{constructor(l,a,r,d,m,h,v){super(l,a),this.selectBox=new f.SelectBox(r,d,m,h,v),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}select(l){this.selectBox.select(l)}registerListeners(){this._register(this.selectBox.onDidSelect(l=>this.runAction(l.selected,l.index)))}runAction(l,a){this.actionRunner.run(this._action,this.getActionContext(l,a))}getActionContext(l,a){return l}setFocusable(l){this.selectBox.setFocusable(l)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(l){this.selectBox.render(l)}}e.SelectActionViewItem=g}),define(oe[87],re([1,0,5,46,150,43,41,6,2,19,310]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionBar=void 0;class p extends _.Disposable{constructor(s,t={}){super(),this._actionRunnerDisposables=this._register(new _.DisposableStore),this.viewItemDisposables=this._register(new _.DisposableMap),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new f.Emitter),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new f.Emitter({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new f.Emitter),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new f.Emitter),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register((0,L.createInstantHoverDelegate)()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new y.ActionRunner,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(g=>this._onDidRun.fire(g))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(g=>this._onWillRun.fire(g))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let i,o;switch(this._orientation){case 0:i=[15],o=[17];break;case 1:i=[16],o=[18],this.domNode.className+=" vertical";break}this._register(c.addDisposableListener(this.domNode,c.EventType.KEY_DOWN,g=>{const u=new k.StandardKeyboardEvent(g);let l=!0;const a=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;i&&(u.equals(i[0])||u.equals(i[1]))?l=this.focusPrevious():o&&(u.equals(o[0])||u.equals(o[1]))?l=this.focusNext():u.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():u.equals(14)?l=this.focusFirst():u.equals(13)?l=this.focusLast():u.equals(2)&&a instanceof E.BaseActionViewItem&&a.trapsArrowNavigation?l=this.focusNext():this.isTriggerKeyEvent(u)?this._triggerKeys.keyDown?this.doTrigger(u):this.triggerKeyDown=!0:l=!1,l&&(u.preventDefault(),u.stopPropagation())})),this._register(c.addDisposableListener(this.domNode,c.EventType.KEY_UP,g=>{const u=new k.StandardKeyboardEvent(g);this.isTriggerKeyEvent(u)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(u)),u.preventDefault(),u.stopPropagation()):(u.equals(2)||u.equals(1026)||u.equals(16)||u.equals(18)||u.equals(15)||u.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(c.trackFocus(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(c.getActiveElement()===this.domNode||!c.isAncestor(c.getActiveElement(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),s.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setFocusable(s){if(this.focusable=s,this.focusable){const t=this.viewItems.find(i=>i instanceof E.BaseActionViewItem&&i.isEnabled());t instanceof E.BaseActionViewItem&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof E.BaseActionViewItem&&t.setFocusable(!1)})}isTriggerKeyEvent(s){let t=!1;return this._triggerKeys.keys.forEach(i=>{t=t||s.equals(i)}),t}updateFocusedItem(){for(let s=0;s<this.actionsList.children.length;s++){const t=this.actionsList.children[s];if(c.isAncestor(c.getActiveElement(),t)){this.focusedItem=s,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(s){this._context=s,this.viewItems.forEach(t=>t.setActionContext(s))}get actionRunner(){return this._actionRunner}set actionRunner(s){this._actionRunner=s,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=s)}getContainer(){return this.domNode}getAction(s){if(typeof s=="number")return this.viewItems[s]?.action;if(c.isHTMLElement(s)){for(;s.parentElement!==this.actionsList;){if(!s.parentElement)return;s=s.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===s)return this.viewItems[t].action}}push(s,t={}){const i=Array.isArray(s)?s:[s];let o=b.isNumber(t.index)?t.index:null;i.forEach(g=>{const u=document.createElement("li");u.className="action-item",u.setAttribute("role","presentation");let l;const a={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(l=this.options.actionViewItemProvider(g,a)),l||(l=new E.ActionViewItem(this.context,g,a)),this.options.allowContextMenu||this.viewItemDisposables.set(l,c.addDisposableListener(u,c.EventType.CONTEXT_MENU,r=>{c.EventHelper.stop(r,!0)})),l.actionRunner=this._actionRunner,l.setActionContext(this.context),l.render(u),this.focusable&&l instanceof E.BaseActionViewItem&&this.viewItems.length===0&&l.setFocusable(!0),o===null||o<0||o>=this.actionsList.children.length?(this.actionsList.appendChild(u),this.viewItems.push(l)):(this.actionsList.insertBefore(u,this.actionsList.children[o]),this.viewItems.splice(o,0,l),o++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}clear(){this.isEmpty()||(this.viewItems=(0,_.dispose)(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),c.clearNode(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(s){let t=!1,i;if(s===void 0?t=!0:typeof s=="number"?i=s:typeof s=="boolean"&&(t=s),t&&typeof this.focusedItem>"u"){const o=this.viewItems.findIndex(g=>g.isEnabled());this.focusedItem=o===-1?void 0:o,this.updateFocus(void 0,void 0,!0)}else i!==void 0&&(this.focusedItem=i),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(s){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(!s&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=t,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===y.Separator.ID));return this.updateFocus(),!0}focusPrevious(s){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let i;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!s&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}i=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===y.Separator.ID));return this.updateFocus(!0),!0}updateFocus(s,t,i=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const o=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(o){let g=!0;b.isFunction(o.focus)||(g=!1),this.options.focusOnlyEnabledItems&&b.isFunction(o.isEnabled)&&!o.isEnabled()&&(g=!1),o.action.id===y.Separator.ID&&(g=!1),g?(i||this.previouslyFocusedItem!==this.focusedItem)&&(o.focus(s),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),g&&o.showHover?.()}}doTrigger(s){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof E.BaseActionViewItem){const i=t._context===null||t._context===void 0?s:t._context;this.run(t._action,i)}}async run(s,t){await this._actionRunner.run(s,t)}dispose(){this._context=void 0,this.viewItems=(0,_.dispose)(this.viewItems),this.getContainer().remove(),super.dispose()}}e.ActionBar=p}),define(oe[651],re([1,0,5,46,68,41,6,313]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownMenu=void 0;class f extends L.ActionRunner{constructor(p,n){super(),this._onDidChangeVisibility=this._register(new y.Emitter),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=(0,c.append)(p,(0,c.$)(".monaco-dropdown")),this._label=(0,c.append)(this._element,(0,c.$)(".dropdown-label"));let s=n.labelRenderer;s||(s=i=>(i.textContent=n.label||"",null));for(const i of[c.EventType.CLICK,c.EventType.MOUSE_DOWN,E.EventType.Tap])this._register((0,c.addDisposableListener)(this.element,i,o=>c.EventHelper.stop(o,!0)));for(const i of[c.EventType.MOUSE_DOWN,E.EventType.Tap])this._register((0,c.addDisposableListener)(this._label,i,o=>{(0,c.isMouseEvent)(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register((0,c.addDisposableListener)(this._label,c.EventType.KEY_UP,i=>{const o=new k.StandardKeyboardEvent(i);(o.equals(3)||o.equals(10))&&(c.EventHelper.stop(i,!0),this.visible?this.hide():this.show())}));const t=s(this._label);t&&this._register(t),this._register(E.Gesture.addTarget(this._label))}get element(){return this._element}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}class _ extends f{constructor(p,n){super(p,n),this._options=n,this._actions=[],this.actions=n.actions||[]}set menuOptions(p){this._menuOptions=p}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(p){this._actions=p}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(p,n)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(p,n):void 0,getKeyBinding:p=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(p):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}e.DropdownMenu=_}),define(oe[365],re([1,0,5,150,651,6,43,81,313]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownMenuActionViewItem=void 0;class _ extends k.BaseActionViewItem{constructor(p,n,s,t=Object.create(null)){super(null,p,t),this.actionItem=null,this._onDidChangeVisibility=this._register(new L.Emitter),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=n,this.contextMenuProvider=s,this.options=t,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(p){this.actionItem=p;const n=i=>{this.element=(0,c.append)(i,(0,c.$)("a.action-label"));let o=[];return typeof this.options.classNames=="string"?o=this.options.classNames.split(/\s+/g).filter(g=>!!g):this.options.classNames&&(o=this.options.classNames),o.find(g=>g==="icon")||o.push("codicon"),this.element.classList.add(...o),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register((0,f.getBaseLayerHoverDelegate)().setupManagedHover(this.options.hoverDelegate??(0,y.getDefaultHoverDelegate)("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},s=Array.isArray(this.menuActionsOrProvider),t={contextMenuProvider:this.contextMenuProvider,labelRenderer:n,menuAsChild:this.options.menuAsChild,actions:s?this.menuActionsOrProvider:void 0,actionProvider:s?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new E.DropdownMenu(p,t)),this._register(this.dropdownMenu.onDidChangeVisibility(i=>{this.element?.setAttribute("aria-expanded",`${i}`),this._onDidChangeVisibility.fire(i)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const i=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return i.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let p=null;return this.action.tooltip?p=this.action.tooltip:this.action.label&&(p=this.action.label),p??void 0}setActionContext(p){super.setActionContext(p),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=p:this.dropdownMenu.menuOptions={context:p})}show(){this.dropdownMenu?.show()}updateEnabled(){const p=!this.action.enabled;this.actionItem?.classList.toggle("disabled",p),this.element?.classList.toggle("disabled",p)}}e.DropdownMenuActionViewItem=_}),define(oe[258],re([1,0,5,92,306,87,48,81,43,84,83,6,445,54,3,472]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HistoryInputBox=e.InputBox=e.unthemedInboxStyles=void 0;const o=c.$;e.unthemedInboxStyles={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class g extends p.Widget{constructor(a,r,d){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this._onDidChange=this._register(new n.Emitter),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new n.Emitter),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=r,this.options=d,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=c.append(a,o(".monaco-inputbox.idle"));const m=this.options.flexibleHeight?"textarea":"input",h=c.append(this.element,o(".ibwrapper"));if(this.input=c.append(h,o(m+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=c.append(h,o("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new b.ScrollableElement(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),c.append(a,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(w=>this.input.scrollTop=w.scrollTop));const v=this._register(new k.DomEmitter(a.ownerDocument,"selectionchange")),C=n.Event.filter(v.event,()=>a.ownerDocument.getSelection()?.anchorNode===h);this._register(C(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new L.ActionBar(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(a){this.placeholder=a,this.input.setAttribute("placeholder",a)}setTooltip(a){this.tooltip=a,this.hover?this.hover.update(a):this.hover=this._register((0,f.getBaseLayerHoverDelegate)().setupManagedHover((0,_.getDefaultHoverDelegate)("mouse"),this.input,a))}get inputElement(){return this.input}get value(){return this.input.value}set value(a){this.input.value!==a&&(this.input.value=a,this.onValueChange())}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:c.getTotalHeight(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return c.isActiveElement(this.input)}select(a=null){this.input.select(),a&&(this.input.setSelectionRange(a.start,a.end),a.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const a=this.input.selectionStart;if(a===null)return null;const r=this.input.selectionEnd??a;return{start:a,end:r}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}set paddingRight(a){this.input.style.width=`calc(100% - ${a}px)`,this.mirror&&(this.mirror.style.paddingRight=a+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const a=this.cachedContentHeight,r=this.cachedHeight,d=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:a,height:r}),this.scrollableElement.setScrollPosition({scrollTop:d})}showMessage(a,r){if(this.state==="open"&&(0,t.equals)(this.message,a))return;this.message=a,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(a.type));const d=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${c.asCssValueWithDefault(d.border,"transparent")}`,this.message.content&&(this.hasFocus()||r)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}validate(){let a=null;return this.validation&&(a=this.validation(this.value),a?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(a)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),a?.type}stylesForType(a){const r=this.options.inputBoxStyles;switch(a){case 1:return{border:r.inputValidationInfoBorder,background:r.inputValidationInfoBackground,foreground:r.inputValidationInfoForeground};case 2:return{border:r.inputValidationWarningBorder,background:r.inputValidationWarningBackground,foreground:r.inputValidationWarningForeground};default:return{border:r.inputValidationErrorBorder,background:r.inputValidationErrorBackground,foreground:r.inputValidationErrorForeground}}}classForType(a){switch(a){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let a;const r=()=>a.style.width=c.getTotalWidth(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:m=>{if(!this.message)return null;a=c.append(m,o(".monaco-inputbox-container")),r();const h={inline:!0,className:"monaco-inputbox-message"},v=this.message.formatContent?(0,E.renderFormattedText)(this.message.content,h):(0,E.renderText)(this.message.content,h);v.classList.add(this.classForType(this.message.type));const C=this.stylesForType(this.message.type);return v.style.backgroundColor=C.background??"",v.style.color=C.foreground??"",v.style.border=C.border?`1px solid ${C.border}`:"",c.append(a,v),null},onHide:()=>{this.state="closed"},layout:r});let d;this.message.type===3?d=i.localize(1026,"Error: {0}",this.message.content):this.message.type===2?d=i.localize(1027,"Warning: {0}",this.message.content):d=i.localize(1028,"Info: {0}",this.message.content),y.alert(d),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const a=this.value,d=a.charCodeAt(a.length-1)===10?" ":"";(a+d).replace(/\u000c/g,"")?this.mirror.textContent=a+d:this.mirror.innerText="\xA0",this.layout()}applyStyles(){const a=this.options.inputBoxStyles,r=a.inputBackground??"",d=a.inputForeground??"",m=a.inputBorder??"";this.element.style.backgroundColor=r,this.element.style.color=d,this.input.style.backgroundColor="inherit",this.input.style.color=d,this.element.style.border=`1px solid ${c.asCssValueWithDefault(m,"transparent")}`}layout(){if(!this.mirror)return;const a=this.cachedContentHeight;this.cachedContentHeight=c.getTotalHeight(this.mirror),a!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(a){const r=this.inputElement,d=r.selectionStart,m=r.selectionEnd,h=r.value;d!==null&&m!==null&&(this.value=h.substr(0,d)+a+h.substr(m),r.setSelectionRange(d+1,d+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}e.InputBox=g;class u extends g{constructor(a,r,d){const m=i.localize(1029," or {0} for history","\u21C5"),h=i.localize(1030," ({0} for history)","\u21C5");super(a,r,d),this._onDidFocus=this._register(new n.Emitter),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new n.Emitter),this.onDidBlur=this._onDidBlur.event,this.history=new s.HistoryNavigator(d.history,100);const v=()=>{if(d.showHistoryHint&&d.showHistoryHint()&&!this.placeholder.endsWith(m)&&!this.placeholder.endsWith(h)&&this.history.getHistory().length){const C=this.placeholder.endsWith(")")?m:h,w=this.placeholder+C;d.showPlaceholderOnFocus&&!c.isActiveElement(this.input)?this.placeholder=w:this.setPlaceHolder(w)}};this.observer=new MutationObserver((C,w)=>{C.forEach(S=>{S.target.textContent||v()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>v()),this.onblur(this.input,()=>{const C=w=>{if(this.placeholder.endsWith(w)){const S=this.placeholder.slice(0,this.placeholder.length-w.length);return d.showPlaceholderOnFocus?this.placeholder=S:this.setPlaceHolder(S),!0}else return!1};C(h)||C(m)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(a){this.value&&(a||this.value!==this.getCurrentValue())&&this.history.add(this.value)}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let a=this.getNextValue();a&&(a=a===this.value?this.getNextValue():a),this.value=a??"",y.status(this.value?this.value:i.localize(1031,"Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let a=this.getPreviousValue();a&&(a=a===this.value?this.getPreviousValue():a),a&&(this.value=a,y.status(this.value))}setPlaceHolder(a){super.setPlaceHolder(a),this.setTooltip(a)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let a=this.history.current();return a||(a=this.history.last(),this.history.next()),a}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}e.HistoryInputBox=u}),define(oe[259],re([1,0,5,364,258,83,6,3,2,43,314]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FindInput=void 0;const p=f.localize(1039,"input");class n extends L.Widget{constructor(t,i,o){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new _.MutableDisposable),this.additionalToggles=[],this._onDidOptionChange=this._register(new y.Emitter),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new y.Emitter),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new y.Emitter),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new y.Emitter),this._onKeyUp=this._register(new y.Emitter),this._onCaseSensitiveKeyDown=this._register(new y.Emitter),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new y.Emitter),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||p,this.showCommonFindToggles=!!o.showCommonFindToggles;const g=o.appendCaseSensitiveLabel||"",u=o.appendWholeWordsLabel||"",l=o.appendRegexLabel||"",a=o.history||[],r=!!o.flexibleHeight,d=!!o.flexibleWidth,m=o.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new E.HistoryInputBox(this.domNode,i,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:o.showHistoryHint,flexibleHeight:r,flexibleWidth:d,flexibleMaxHeight:m,inputBoxStyles:o.inputBoxStyles}));const h=this._register((0,b.createInstantHoverDelegate)());if(this.showCommonFindToggles){this.regex=this._register(new k.RegexToggle({appendTitle:l,isChecked:!1,hoverDelegate:h,...o.toggleStyles})),this._register(this.regex.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(C=>{this._onRegexKeyDown.fire(C)})),this.wholeWords=this._register(new k.WholeWordsToggle({appendTitle:u,isChecked:!1,hoverDelegate:h,...o.toggleStyles})),this._register(this.wholeWords.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new k.CaseSensitiveToggle({appendTitle:g,isChecked:!1,hoverDelegate:h,...o.toggleStyles})),this._register(this.caseSensitive.onChange(C=>{this._onDidOptionChange.fire(C),!C&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(C=>{this._onCaseSensitiveKeyDown.fire(C)}));const v=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,C=>{if(C.equals(15)||C.equals(17)||C.equals(9)){const w=v.indexOf(this.domNode.ownerDocument.activeElement);if(w>=0){let S=-1;C.equals(17)?S=(w+1)%v.length:C.equals(15)&&(w===0?S=v.length-1:S=w-1),C.equals(9)?(v[w].blur(),this.inputBox.focus()):S>=0&&v[S].focus(),c.EventHelper.stop(C,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(o?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),t?.appendChild(this.domNode),this._register(c.addDisposableListener(this.inputBox.inputElement,"compositionstart",v=>{this.imeSessionInProgress=!0})),this._register(c.addDisposableListener(this.inputBox.inputElement,"compositionend",v=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,v=>this._onKeyDown.fire(v)),this.onkeyup(this.inputBox.inputElement,v=>this._onKeyUp.fire(v)),this.oninput(this.inputBox.inputElement,v=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,v=>this._onMouseDown.fire(v))}get onDidChange(){return this.inputBox.onDidChange}layout(t){this.inputBox.layout(),this.updateInputBoxPadding(t.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const t of this.additionalToggles)t.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const t of this.additionalToggles)t.disable()}setFocusInputOnOptionClick(t){this.fixFocusOnOptionClickEnabled=t}setEnabled(t){t?this.enable():this.disable()}setAdditionalToggles(t){for(const i of this.additionalToggles)i.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new _.DisposableStore;for(const i of t??[])this.additionalTogglesDisposables.value.add(i),this.controls.appendChild(i.domNode),this.additionalTogglesDisposables.value.add(i.onChange(o=>{this._onDidOptionChange.fire(o),!o&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(i);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(t=!1){t?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((i,o)=>i+o.width(),0)}getValue(){return this.inputBox.value}setValue(t){this.inputBox.value!==t&&(this.inputBox.value=t)}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(t){this.caseSensitive&&(this.caseSensitive.checked=t)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(t){this.wholeWords&&(this.wholeWords.checked=t)}getRegex(){return this.regex?.checked??!1}setRegex(t){this.regex&&(this.regex.checked=t,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(t){this.inputBox.showMessage(t)}clearMessage(){this.inputBox.hideMessage()}}e.FindInput=n}),define(oe[652],re([1,0,5,165,258,83,26,6,3,43,314]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReplaceInput=void 0;const p=_.localize(1034,"input"),n=_.localize(1035,"Preserve Case");class s extends k.Toggle{constructor(o){super({icon:y.Codicon.preserveCase,title:n+o.appendTitle,isChecked:o.isChecked,hoverDelegate:o.hoverDelegate??(0,b.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:o.inputActiveOptionBorder,inputActiveOptionForeground:o.inputActiveOptionForeground,inputActiveOptionBackground:o.inputActiveOptionBackground})}}class t extends L.Widget{constructor(o,g,u,l){super(),this._showOptionButtons=u,this.fixFocusOnOptionClickEnabled=!0,this.cachedOptionsWidth=0,this._onDidOptionChange=this._register(new f.Emitter),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new f.Emitter),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new f.Emitter),this._onInput=this._register(new f.Emitter),this._onKeyUp=this._register(new f.Emitter),this._onPreserveCaseKeyDown=this._register(new f.Emitter),this.onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event,this.contextViewProvider=g,this.placeholder=l.placeholder||"",this.validation=l.validation,this.label=l.label||p;const a=l.appendPreserveCaseLabel||"",r=l.history||[],d=!!l.flexibleHeight,m=!!l.flexibleWidth,h=l.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new E.HistoryInputBox(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:r,showHistoryHint:l.showHistoryHint,flexibleHeight:d,flexibleWidth:m,flexibleMaxHeight:h,inputBoxStyles:l.inputBoxStyles})),this.preserveCase=this._register(new s({appendTitle:a,isChecked:!1,...l.toggleStyles})),this._register(this.preserveCase.onChange(w=>{this._onDidOptionChange.fire(w),!w&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(w=>{this._onPreserveCaseKeyDown.fire(w)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;const v=[this.preserveCase.domNode];this.onkeydown(this.domNode,w=>{if(w.equals(15)||w.equals(17)||w.equals(9)){const S=v.indexOf(this.domNode.ownerDocument.activeElement);if(S>=0){let D=-1;w.equals(17)?D=(S+1)%v.length:w.equals(15)&&(S===0?D=v.length-1:D=S-1),w.equals(9)?(v[S].blur(),this.inputBox.focus()):D>=0&&v[D].focus(),c.EventHelper.stop(w,!0)}}});const C=document.createElement("div");C.className="controls",C.style.display=this._showOptionButtons?"block":"none",C.appendChild(this.preserveCase.domNode),this.domNode.appendChild(C),o?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,w=>this._onKeyDown.fire(w)),this.onkeyup(this.inputBox.inputElement,w=>this._onKeyUp.fire(w)),this.oninput(this.inputBox.inputElement,w=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,w=>this._onMouseDown.fire(w))}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setEnabled(o){o?this.enable():this.disable()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(o){this.preserveCase.checked=o}focusOnPreserve(){this.preserveCase.focus()}validate(){this.inputBox?.validate()}set width(o){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=o+"px"}dispose(){super.dispose()}}e.ReplaceInput=t}),define(oe[653],re([1,0,64,68,5,46,74,87,150,311,84,41,14,26,191,30,141,2,16,11]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=e.VerticalDirection=e.HorizontalDirection=e.MENU_ESCAPED_MNEMONIC_REGEX=e.MENU_MNEMONIC_REGEX=void 0,e.cleanMnemonic=w,e.formatRule=S,e.MENU_MNEMONIC_REGEX=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,e.MENU_ESCAPED_MNEMONIC_REGEX=/(&amp;)?(&amp;)([^\s&])/g;var r;(function(I){I[I.Right=0]="Right",I[I.Left=1]="Left"})(r||(e.HorizontalDirection=r={}));var d;(function(I){I[I.Above=0]="Above",I[I.Below=1]="Below"})(d||(e.VerticalDirection=d={}));class m extends f.ActionBar{constructor(T,M,A,R){T.classList.add("monaco-menu-container"),T.setAttribute("role","presentation");const N=document.createElement("div");N.classList.add("monaco-menu"),N.setAttribute("role","presentation"),super(N,{orientation:1,actionViewItemProvider:W=>this.doGetActionViewItem(W,A,O),context:A.context,actionRunner:A.actionRunner,ariaLabel:A.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[3,...l.isMacintosh||l.isLinux?[10]:[]],keyDown:!0}}),this.menuStyles=R,this.menuElement=N,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(T,R),this._register(k.Gesture.addTarget(N)),this._register((0,E.addDisposableListener)(N,E.EventType.KEY_DOWN,W=>{new L.StandardKeyboardEvent(W).equals(2)&&W.preventDefault()})),A.enableMnemonics&&this._register((0,E.addDisposableListener)(N,E.EventType.KEY_DOWN,W=>{const z=W.key.toLocaleLowerCase();if(this.mnemonics.has(z)){E.EventHelper.stop(W,!0);const q=this.mnemonics.get(z);if(q.length===1&&(q[0]instanceof v&&q[0].container&&this.focusItemByElement(q[0].container),q[0].onClick(W)),q.length>1){const H=q.shift();H&&H.container&&(this.focusItemByElement(H.container),q.push(H)),this.mnemonics.set(z,q)}}})),l.isLinux&&this._register((0,E.addDisposableListener)(N,E.EventType.KEY_DOWN,W=>{const z=new L.StandardKeyboardEvent(W);z.equals(14)||z.equals(11)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),E.EventHelper.stop(W,!0)):(z.equals(13)||z.equals(12))&&(this.focusedItem=0,this.focusPrevious(),E.EventHelper.stop(W,!0))})),this._register((0,E.addDisposableListener)(this.domNode,E.EventType.MOUSE_OUT,W=>{const z=W.relatedTarget;(0,E.isAncestor)(z,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),W.stopPropagation())})),this._register((0,E.addDisposableListener)(this.actionsList,E.EventType.MOUSE_OVER,W=>{let z=W.target;if(!(!z||!(0,E.isAncestor)(z,this.actionsList)||z===this.actionsList)){for(;z.parentElement!==this.actionsList&&z.parentElement!==null;)z=z.parentElement;if(z.classList.contains("action-item")){const q=this.focusedItem;this.setFocusedItem(z),q!==this.focusedItem&&this.updateFocus()}}})),this._register(k.Gesture.addTarget(this.actionsList)),this._register((0,E.addDisposableListener)(this.actionsList,k.EventType.Tap,W=>{let z=W.initialTarget;if(!(!z||!(0,E.isAncestor)(z,this.actionsList)||z===this.actionsList)){for(;z.parentElement!==this.actionsList&&z.parentElement!==null;)z=z.parentElement;if(z.classList.contains("action-item")){const q=this.focusedItem;this.setFocusedItem(z),q!==this.focusedItem&&this.updateFocus()}}}));const O={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new p.DomScrollableElement(N,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const x=this.scrollableElement.getDomNode();x.style.position="",this.styleScrollElement(x,R),this._register((0,E.addDisposableListener)(N,k.EventType.Change,W=>{E.EventHelper.stop(W,!0);const z=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:z-W.translationY})})),this._register((0,E.addDisposableListener)(x,E.EventType.MOUSE_UP,W=>{W.preventDefault()}));const F=(0,E.getWindow)(T);N.style.maxHeight=`${Math.max(10,F.innerHeight-T.getBoundingClientRect().top-35)}px`,M=M.filter((W,z)=>A.submenuIds?.has(W.id)?(console.warn(`Found submenu cycle: ${W.id}`),!1):!(W instanceof n.Separator&&(z===M.length-1||z===0||M[z-1]instanceof n.Separator))),this.push(M,{icon:!0,label:!0,isMenu:!0}),T.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(W=>!(W instanceof C)).forEach((W,z,q)=>{W.updatePositionInSet(z+1,q.length)})}initializeOrUpdateStyleSheet(T,M){this.styleSheet||((0,E.isInShadowDOM)(T)?this.styleSheet=(0,E.createStyleSheet)(T):(m.globalStyleSheet||(m.globalStyleSheet=(0,E.createStyleSheet)()),this.styleSheet=m.globalStyleSheet)),this.styleSheet.textContent=D(M,(0,E.isInShadowDOM)(T))}styleScrollElement(T,M){const A=M.foregroundColor??"",R=M.backgroundColor??"",N=M.borderColor?`1px solid ${M.borderColor}`:"",O="5px",x=M.shadowColor?`0 2px 8px ${M.shadowColor}`:"";T.style.outline=N,T.style.borderRadius=O,T.style.color=A,T.style.backgroundColor=R,T.style.boxShadow=x}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}focusItemByElement(T){const M=this.focusedItem;this.setFocusedItem(T),M!==this.focusedItem&&this.updateFocus()}setFocusedItem(T){for(let M=0;M<this.actionsList.children.length;M++){const A=this.actionsList.children[M];if(T===A){this.focusedItem=M;break}}}updateFocus(T){super.updateFocus(T,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(T,M,A){if(T instanceof n.Separator)return new C(M.context,T,{icon:!0},this.menuStyles);if(T instanceof n.SubmenuAction){const R=new v(T,T.actions,A,{...M,submenuIds:new Set([...M.submenuIds||[],T.id])},this.menuStyles);if(M.enableMnemonics){const N=R.getMnemonic();if(N&&R.isEnabled()){let O=[];this.mnemonics.has(N)&&(O=this.mnemonics.get(N)),O.push(R),this.mnemonics.set(N,O)}}return R}else{const R={enableMnemonics:M.enableMnemonics,useEventAsContext:M.useEventAsContext};if(M.getKeyBinding){const O=M.getKeyBinding(T);if(O){const x=O.getLabel();x&&(R.keybinding=x)}}const N=new h(M.context,T,R,this.menuStyles);if(M.enableMnemonics){const O=N.getMnemonic();if(O&&N.isEnabled()){let x=[];this.mnemonics.has(O)&&(x=this.mnemonics.get(O)),x.push(N),this.mnemonics.set(O,x)}}return N}}}e.Menu=m;class h extends _.BaseActionViewItem{constructor(T,M,A,R){if(A.isMenu=!0,super(M,M,A),this.menuStyle=R,this.options=A,this.options.icon=A.icon!==void 0?A.icon:!1,this.options.label=A.label!==void 0?A.label:!0,this.cssClass="",this.options.label&&A.enableMnemonics){const N=this.action.label;if(N){const O=e.MENU_MNEMONIC_REGEX.exec(N);O&&(this.mnemonic=(O[1]?O[1]:O[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new s.RunOnceScheduler(()=>{this.element&&(this._register((0,E.addDisposableListener)(this.element,E.EventType.MOUSE_UP,N=>{if(E.EventHelper.stop(N,!0),c.isFirefox){if(new y.StandardMouseEvent((0,E.getWindow)(this.element),N).rightButton)return;this.onClick(N)}else setTimeout(()=>{this.onClick(N)},0)})),this._register((0,E.addDisposableListener)(this.element,E.EventType.CONTEXT_MENU,N=>{E.EventHelper.stop(N,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(T){super.render(T),this.element&&(this.container=T,this.item=(0,E.append)(this.element,(0,E.$)("a.action-menu-item")),this._action.id===n.Separator.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=(0,E.append)(this.item,(0,E.$)("span.menu-item-check"+o.ThemeIcon.asCSSSelector(t.Codicon.menuSelection))),this.check.setAttribute("role","none"),this.label=(0,E.append)(this.item,(0,E.$)("span.action-label")),this.options.label&&this.options.keybinding&&((0,E.append)(this.item,(0,E.$)("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(T,M){this.item&&(this.item.setAttribute("aria-posinset",`${T}`),this.item.setAttribute("aria-setsize",`${M}`))}updateLabel(){if(this.label&&this.options.label){(0,E.clearNode)(this.label);let T=(0,g.stripIcons)(this.action.label);if(T){const M=w(T);this.options.enableMnemonics||(T=M),this.label.setAttribute("aria-label",M.replace(/&&/g,"&"));const A=e.MENU_MNEMONIC_REGEX.exec(T);if(A){T=a.escape(T),e.MENU_ESCAPED_MNEMONIC_REGEX.lastIndex=0;let R=e.MENU_ESCAPED_MNEMONIC_REGEX.exec(T);for(;R&&R[1];)R=e.MENU_ESCAPED_MNEMONIC_REGEX.exec(T);const N=O=>O.replace(/&amp;&amp;/g,"&amp;");R?this.label.append(a.ltrim(N(T.substr(0,R.index))," "),(0,E.$)("u",{"aria-hidden":"true"},R[3]),a.rtrim(N(T.substr(R.index+R[0].length))," ")):this.label.innerText=N(T).trim(),this.item?.setAttribute("aria-keyshortcuts",(A[1]?A[1]:A[3]).toLocaleLowerCase())}else this.label.innerText=T.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const T=this.action.checked;this.item.classList.toggle("checked",!!T),T!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",T?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const T=this.element&&this.element.classList.contains("focused"),M=T&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,A=T&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,R=T&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",N=T&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=M??"",this.item.style.backgroundColor=A??"",this.item.style.outline=R,this.item.style.outlineOffset=N),this.check&&(this.check.style.color=M??"")}}class v extends h{constructor(T,M,A,R,N){super(T,T,R,N),this.submenuActions=M,this.parentData=A,this.submenuOptions=R,this.mysubmenu=null,this.submenuDisposables=this._register(new u.DisposableStore),this.mouseOver=!1,this.expandDirection=R&&R.expandDirection!==void 0?R.expandDirection:{horizontal:r.Right,vertical:d.Below},this.showScheduler=new s.RunOnceScheduler(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new s.RunOnceScheduler(()=>{this.element&&!(0,E.isAncestor)((0,E.getActiveElement)(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(T){super.render(T),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=(0,E.append)(this.item,(0,E.$)("span.submenu-indicator"+o.ThemeIcon.asCSSSelector(t.Codicon.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register((0,E.addDisposableListener)(this.element,E.EventType.KEY_UP,M=>{const A=new L.StandardKeyboardEvent(M);(A.equals(17)||A.equals(3))&&(E.EventHelper.stop(M,!0),this.createSubmenu(!0))})),this._register((0,E.addDisposableListener)(this.element,E.EventType.KEY_DOWN,M=>{const A=new L.StandardKeyboardEvent(M);(0,E.getActiveElement)()===this.item&&(A.equals(17)||A.equals(3))&&E.EventHelper.stop(M,!0)})),this._register((0,E.addDisposableListener)(this.element,E.EventType.MOUSE_OVER,M=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register((0,E.addDisposableListener)(this.element,E.EventType.MOUSE_LEAVE,M=>{this.mouseOver=!1})),this._register((0,E.addDisposableListener)(this.element,E.EventType.FOCUS_OUT,M=>{this.element&&!(0,E.isAncestor)((0,E.getActiveElement)(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}onClick(T){E.EventHelper.stop(T,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(T){if(this.parentData.submenu&&(T||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(T,M,A,R){const N={top:0,left:0};return N.left=(0,b.layout)(T.width,M.width,{position:R.horizontal===r.Right?0:1,offset:A.left,size:A.width}),N.left>=A.left&&N.left<A.left+A.width&&(A.left+10+M.width<=T.width&&(N.left=A.left+10),A.top+=10,A.height=0),N.top=(0,b.layout)(T.height,M.height,{position:0,offset:A.top,size:0}),N.top+M.height===A.top&&N.top+A.height+M.height<=T.height&&(N.top+=A.height),N}createSubmenu(T=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=(0,E.append)(this.element,(0,E.$)("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const M=(0,E.getWindow)(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),A=parseFloat(M.paddingTop||"0")||0;this.submenuContainer.style.zIndex="1",this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new m(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new n.EmptySubmenuAction],this.submenuOptions,this.menuStyle);const R=this.element.getBoundingClientRect(),N={top:R.top-A,left:R.left,height:R.height+2*A,width:R.width},O=this.submenuContainer.getBoundingClientRect(),x=(0,E.getWindow)(this.element),{top:F,left:W}=this.calculateSubmenuMenuLayout(new E.Dimension(x.innerWidth,x.innerHeight),E.Dimension.lift(O),N,this.expandDirection);this.submenuContainer.style.left=`${W-O.left}px`,this.submenuContainer.style.top=`${F-O.top}px`,this.submenuDisposables.add((0,E.addDisposableListener)(this.submenuContainer,E.EventType.KEY_UP,z=>{new L.StandardKeyboardEvent(z).equals(15)&&(E.EventHelper.stop(z,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add((0,E.addDisposableListener)(this.submenuContainer,E.EventType.KEY_DOWN,z=>{new L.StandardKeyboardEvent(z).equals(15)&&E.EventHelper.stop(z,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(T),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(T){this.item&&this.item?.setAttribute("aria-expanded",T)}applyStyle(){super.applyStyle();const M=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=M??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class C extends _.ActionViewItem{constructor(T,M,A,R){super(T,M,A),this.menuStyles=R}render(T){super.render(T),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function w(I){const T=e.MENU_MNEMONIC_REGEX,M=T.exec(I);if(!M)return I;const A=!M[1];return I.replace(T,A?"$2$3":"").trim()}function S(I){const T=(0,i.getCodiconFontCharacters)()[I.id];return`.codicon-${I.id}:before { content: '\\${T.toString(16)}'; }`}function D(I,T){let M=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${S(t.Codicon.menuSelection)}
${S(t.Codicon.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(T){M+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
		`;const A=I.scrollbarShadow;A&&(M+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${A} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${A} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${A} 6px 6px 6px -6px inset;
				}
			`);const R=I.scrollbarSliderBackground;R&&(M+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${R};
				}
			`);const N=I.scrollbarSliderHoverBackground;N&&(M+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${N};
				}
			`);const O=I.scrollbarSliderActiveBackground;O&&(M+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${O};
				}
			`)}return M}}),define(oe[654],re([1,0,87,365,41,26,30,6,2,3,43,486]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleMenuAction=e.ToolBar=void 0;class n extends _.Disposable{constructor(i,o,g={orientation:0}){super(),this.submenuActionViewItems=[],this.hasSecondaryActions=!1,this._onDidChangeDropdownVisibility=this._register(new f.EventMultiplexer),this.onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event,this.disposables=this._register(new _.DisposableStore),g.hoverDelegate=g.hoverDelegate??this._register((0,p.createInstantHoverDelegate)()),this.options=g,this.toggleMenuAction=this._register(new s(()=>this.toggleMenuActionViewItem?.show(),g.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",i.appendChild(this.element),this.actionBar=this._register(new c.ActionBar(this.element,{orientation:g.orientation,ariaLabel:g.ariaLabel,actionRunner:g.actionRunner,allowContextMenu:g.allowContextMenu,highlightToggledItems:g.highlightToggledItems,hoverDelegate:g.hoverDelegate,actionViewItemProvider:(u,l)=>{if(u.id===s.ID)return this.toggleMenuActionViewItem=new k.DropdownMenuActionViewItem(u,u.menuActions,o,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:y.ThemeIcon.asClassNameArray(g.moreIcon??L.Codicon.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(g.actionViewItemProvider){const a=g.actionViewItemProvider(u,l);if(a)return a}if(u instanceof E.SubmenuAction){const a=new k.DropdownMenuActionViewItem(u,u.actions,o,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:u.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return a.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(a),this.disposables.add(this._onDidChangeDropdownVisibility.add(a.onDidChangeVisibility)),a}}}))}set actionRunner(i){this.actionBar.actionRunner=i}get actionRunner(){return this.actionBar.actionRunner}getElement(){return this.element}getItemAction(i){return this.actionBar.getAction(i)}setActions(i,o){this.clear();const g=i?i.slice(0):[];this.hasSecondaryActions=!!(o&&o.length>0),this.hasSecondaryActions&&o&&(this.toggleMenuAction.menuActions=o.slice(0),g.push(this.toggleMenuAction)),g.forEach(u=>{this.actionBar.push(u,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(u)})})}getKeybindingLabel(i){return this.options.getKeyBinding?.(i)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}}e.ToolBar=n;class s extends E.Action{static{this.ID="toolbar.toggle.more"}constructor(i,o){o=o||b.localize(1023,"More Actions..."),super(s.ID,o,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=i}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(i){this._menuActions=i}}e.ToggleMenuAction=s}),define(oe[175],re([1,0,5,92,46,87,259,258,235,112,165,225,157,41,13,14,26,30,45,6,82,2,140,19,3,43,21,487]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractTree=e.TreeFindMatchType=e.TreeFindMode=e.FuzzyToggle=e.ModeToggle=e.TreeRenderer=e.RenderIndentGuides=e.ComposedTreeDelegate=void 0;class S extends _.ElementsDragAndDropData{constructor(B){super(B.elements.map(j=>j.element)),this.data=B}}function D(J){return J instanceof _.ElementsDragAndDropData?new S(J):J}class I{constructor(B,j){this.modelProvider=B,this.dnd=j,this.autoExpandDisposable=d.Disposable.None,this.disposables=new d.DisposableStore}getDragURI(B){return this.dnd.getDragURI(B.element)}getDragLabel(B,j){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(B.map(V=>V.element),j)}onDragStart(B,j){this.dnd.onDragStart?.(D(B),j)}onDragOver(B,j,V,$,Z,ee=!0){const le=this.dnd.onDragOver(D(B),j&&j.element,V,$,Z),de=this.autoExpandNode!==j;if(de&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=j),typeof j>"u")return le;if(de&&typeof le!="boolean"&&le.autoExpand&&(this.autoExpandDisposable=(0,o.disposableTimeout)(()=>{const Se=this.modelProvider(),ye=Se.getNodeLocation(j);Se.isCollapsed(ye)&&Se.setCollapsed(ye,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof le=="boolean"||!le.accept||typeof le.bubble>"u"||le.feedback){if(!ee){const Se=typeof le=="boolean"?le:le.accept,ye=typeof le=="boolean"?void 0:le.effect;return{accept:Se,effect:ye,feedback:[V]}}return le}if(le.bubble===1){const Se=this.modelProvider(),ye=Se.getNodeLocation(j),Ee=Se.getParentNodeLocation(ye),ke=Se.getNode(Ee),Re=Ee&&Se.getListIndex(Ee);return this.onDragOver(B,ke,Re,$,Z,!1)}const me=this.modelProvider(),be=me.getNodeLocation(j),ve=me.getListIndex(be),Le=me.getListRenderCount(be);return{...le,feedback:(0,i.range)(ve,ve+Le)}}drop(B,j,V,$,Z){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(D(B),j&&j.element,V,$,Z)}onDragEnd(B){this.dnd.onDragEnd?.(B)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function T(J,B){return B&&{...B,identityProvider:B.identityProvider&&{getId(j){return B.identityProvider.getId(j.element)}},dnd:B.dnd&&new I(J,B.dnd),multipleSelectionController:B.multipleSelectionController&&{isSelectionSingleChangeEvent(j){return B.multipleSelectionController.isSelectionSingleChangeEvent({...j,element:j.element})},isSelectionRangeChangeEvent(j){return B.multipleSelectionController.isSelectionRangeChangeEvent({...j,element:j.element})}},accessibilityProvider:B.accessibilityProvider&&{...B.accessibilityProvider,getSetSize(j){const V=J(),$=V.getNodeLocation(j),Z=V.getParentNodeLocation($);return V.getNode(Z).visibleChildrenCount},getPosInSet(j){return j.visibleChildIndex+1},isChecked:B.accessibilityProvider&&B.accessibilityProvider.isChecked?j=>B.accessibilityProvider.isChecked(j.element):void 0,getRole:B.accessibilityProvider&&B.accessibilityProvider.getRole?j=>B.accessibilityProvider.getRole(j.element):()=>"treeitem",getAriaLabel(j){return B.accessibilityProvider.getAriaLabel(j.element)},getWidgetAriaLabel(){return B.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:B.accessibilityProvider&&B.accessibilityProvider.getWidgetRole?()=>B.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:B.accessibilityProvider&&B.accessibilityProvider.getAriaLevel?j=>B.accessibilityProvider.getAriaLevel(j.element):j=>j.depth,getActiveDescendantId:B.accessibilityProvider.getActiveDescendantId&&(j=>B.accessibilityProvider.getActiveDescendantId(j.element))},keyboardNavigationLabelProvider:B.keyboardNavigationLabelProvider&&{...B.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(j){return B.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(j.element)}}}}class M{constructor(B){this.delegate=B}getHeight(B){return this.delegate.getHeight(B.element)}getTemplateId(B){return this.delegate.getTemplateId(B.element)}hasDynamicHeight(B){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(B.element)}setDynamicHeight(B,j){this.delegate.setDynamicHeight?.(B.element,j)}}e.ComposedTreeDelegate=M;var A;(function(J){J.None="none",J.OnHover="onHover",J.Always="always"})(A||(e.RenderIndentGuides=A={}));class R{get elements(){return this._elements}constructor(B,j=[]){this._elements=j,this.disposables=new d.DisposableStore,this.onDidChange=a.Event.forEach(B,V=>this._elements=V,this.disposables)}dispose(){this.disposables.dispose()}}class N{static{this.DefaultIndent=8}constructor(B,j,V,$,Z,ee={}){this.renderer=B,this.modelProvider=j,this.activeNodes=$,this.renderedIndentGuides=Z,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=N.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=d.Disposable.None,this.disposables=new d.DisposableStore,this.templateId=B.templateId,this.updateOptions(ee),a.Event.map(V,le=>le.node)(this.onDidChangeNodeTwistieState,this,this.disposables),B.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(B={}){if(typeof B.indent<"u"){const j=(0,m.clamp)(B.indent,0,40);if(j!==this.indent){this.indent=j;for(const[V,$]of this.renderedNodes)this.renderTreeElement(V,$)}}if(typeof B.renderIndentGuides<"u"){const j=B.renderIndentGuides!==A.None;if(j!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=j;for(const[V,$]of this.renderedNodes)this._renderIndentGuides(V,$);if(this.indentGuidesDisposable.dispose(),j){const V=new d.DisposableStore;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,V),this.indentGuidesDisposable=V,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof B.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=B.hideTwistiesOfChildlessElements)}renderTemplate(B){const j=(0,c.append)(B,(0,c.$)(".monaco-tl-row")),V=(0,c.append)(j,(0,c.$)(".monaco-tl-indent")),$=(0,c.append)(j,(0,c.$)(".monaco-tl-twistie")),Z=(0,c.append)(j,(0,c.$)(".monaco-tl-contents")),ee=this.renderer.renderTemplate(Z);return{container:B,indent:V,twistie:$,indentGuidesDisposable:d.Disposable.None,templateData:ee}}renderElement(B,j,V,$){this.renderedNodes.set(B,V),this.renderedElements.set(B.element,B),this.renderTreeElement(B,V),this.renderer.renderElement(B,j,V.templateData,$)}disposeElement(B,j,V,$){V.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(B,j,V.templateData,$),typeof $=="number"&&(this.renderedNodes.delete(B),this.renderedElements.delete(B.element))}disposeTemplate(B){this.renderer.disposeTemplate(B.templateData)}onDidChangeTwistieState(B){const j=this.renderedElements.get(B);j&&this.onDidChangeNodeTwistieState(j)}onDidChangeNodeTwistieState(B){const j=this.renderedNodes.get(B);j&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(B,j))}renderTreeElement(B,j){const V=N.DefaultIndent+(B.depth-1)*this.indent;j.twistie.style.paddingLeft=`${V}px`,j.indent.style.width=`${V+this.indent-16}px`,B.collapsible?j.container.setAttribute("aria-expanded",String(!B.collapsed)):j.container.removeAttribute("aria-expanded"),j.twistie.classList.remove(...u.ThemeIcon.asClassNameArray(g.Codicon.treeItemExpanded));let $=!1;this.renderer.renderTwistie&&($=this.renderer.renderTwistie(B.element,j.twistie)),B.collapsible&&(!this.hideTwistiesOfChildlessElements||B.visibleChildrenCount>0)?($||j.twistie.classList.add(...u.ThemeIcon.asClassNameArray(g.Codicon.treeItemExpanded)),j.twistie.classList.add("collapsible"),j.twistie.classList.toggle("collapsed",B.collapsed)):j.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(B,j)}_renderIndentGuides(B,j){if((0,c.clearNode)(j.indent),j.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const V=new d.DisposableStore,$=this.modelProvider();for(;;){const Z=$.getNodeLocation(B),ee=$.getParentNodeLocation(Z);if(!ee)break;const le=$.getNode(ee),de=(0,c.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(le)&&de.classList.add("active"),j.indent.childElementCount===0?j.indent.appendChild(de):j.indent.insertBefore(de,j.indent.firstElementChild),this.renderedIndentGuides.add(le,de),V.add((0,d.toDisposable)(()=>this.renderedIndentGuides.delete(le,de))),B=le}j.indentGuidesDisposable=V}_onDidChangeActiveNodes(B){if(!this.shouldRenderIndentGuides)return;const j=new Set,V=this.modelProvider();B.forEach($=>{const Z=V.getNodeLocation($);try{const ee=V.getParentNodeLocation(Z);$.collapsible&&$.children.length>0&&!$.collapsed?j.add($):ee&&j.add(V.getNode(ee))}catch{}}),this.activeIndentNodes.forEach($=>{j.has($)||this.renderedIndentGuides.forEach($,Z=>Z.classList.remove("active"))}),j.forEach($=>{this.activeIndentNodes.has($)||this.renderedIndentGuides.forEach($,Z=>Z.classList.add("active"))}),this.activeIndentNodes=j}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,d.dispose)(this.disposables)}}e.TreeRenderer=N;class O{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}constructor(B,j,V){this.tree=B,this.keyboardNavigationLabelProvider=j,this._filter=V,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new d.DisposableStore,B.onWillRefilter(this.reset,this,this.disposables)}filter(B,j){let V=1;if(this._filter){const ee=this._filter.filter(B,j);if(typeof ee=="boolean"?V=ee?1:0:(0,n.isFilterResult)(ee)?V=(0,n.getVisibleState)(ee.visibility):V=ee,V===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:r.FuzzyScore.Default,visibility:V};const $=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(B),Z=Array.isArray($)?$:[$];for(const ee of Z){const le=ee&&ee.toString();if(typeof le>"u")return{data:r.FuzzyScore.Default,visibility:V};let de;if(this.tree.findMatchType===q.Contiguous){const me=le.toLowerCase().indexOf(this._lowercasePattern);if(me>-1){de=[Number.MAX_SAFE_INTEGER,0];for(let be=this._lowercasePattern.length;be>0;be--)de.push(me+be-1)}}else de=(0,r.fuzzyScore)(this._pattern,this._lowercasePattern,0,le,le.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(de)return this._matchCount++,Z.length===1?{data:de,visibility:V}:{data:{label:le,score:de},visibility:V}}return this.tree.findMode===z.Filter?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(B):2:{data:r.FuzzyScore.Default,visibility:V}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,d.dispose)(this.disposables)}}class x extends p.Toggle{constructor(B){super({icon:g.Codicon.listFilter,title:(0,v.localize)(1016,"Filter"),isChecked:B.isChecked??!1,hoverDelegate:B.hoverDelegate??(0,C.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:B.inputActiveOptionBorder,inputActiveOptionForeground:B.inputActiveOptionForeground,inputActiveOptionBackground:B.inputActiveOptionBackground})}}e.ModeToggle=x;class F extends p.Toggle{constructor(B){super({icon:g.Codicon.searchFuzzy,title:(0,v.localize)(1017,"Fuzzy Match"),isChecked:B.isChecked??!1,hoverDelegate:B.hoverDelegate??(0,C.getDefaultHoverDelegate)("element"),inputActiveOptionBorder:B.inputActiveOptionBorder,inputActiveOptionForeground:B.inputActiveOptionForeground,inputActiveOptionBackground:B.inputActiveOptionBackground})}}e.FuzzyToggle=F;const W={inputBoxStyles:f.unthemedInboxStyles,toggleStyles:p.unthemedToggleStyles,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var z;(function(J){J[J.Highlight=0]="Highlight",J[J.Filter=1]="Filter"})(z||(e.TreeFindMode=z={}));var q;(function(J){J[J.Fuzzy=0]="Fuzzy",J[J.Contiguous=1]="Contiguous"})(q||(e.TreeFindMatchType=q={}));class H extends d.Disposable{set mode(B){this.modeToggle.checked=B===z.Filter,this.findInput.inputBox.setPlaceHolder(B===z.Filter?(0,v.localize)(1018,"Type to filter"):(0,v.localize)(1019,"Type to search"))}set matchType(B){this.matchTypeToggle.checked=B===q.Fuzzy}constructor(B,j,V,$,Z,ee){super(),this.tree=j,this.elements=(0,c.h)(".monaco-tree-type-filter",[(0,c.h)(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),(0,c.h)(".monaco-tree-type-filter-input@findInput"),(0,c.h)(".monaco-tree-type-filter-actionbar@actionbar")]),this.width=0,this.right=0,this.top=0,this._onDidDisable=new a.Emitter,B.appendChild(this.elements.root),this._register((0,d.toDisposable)(()=>this.elements.root.remove()));const le=ee?.styles??W;le.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=le.listFilterWidgetBackground),le.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${le.listFilterWidgetShadow}`);const de=this._register((0,C.createInstantHoverDelegate)());this.modeToggle=this._register(new x({...le.toggleStyles,isChecked:$===z.Filter,hoverDelegate:de})),this.matchTypeToggle=this._register(new F({...le.toggleStyles,isChecked:Z===q.Fuzzy,hoverDelegate:de})),this.onDidChangeMode=a.Event.map(this.modeToggle.onChange,()=>this.modeToggle.checked?z.Filter:z.Highlight,this._store),this.onDidChangeMatchType=a.Event.map(this.matchTypeToggle.onChange,()=>this.matchTypeToggle.checked?q.Fuzzy:q.Contiguous,this._store),this.findInput=this._register(new y.FindInput(this.elements.findInput,V,{label:(0,v.localize)(1020,"Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:le.inputBoxStyles,toggleStyles:le.toggleStyles,history:ee?.history})),this.actionbar=this._register(new L.ActionBar(this.elements.actionbar)),this.mode=$;const me=this._register(new k.DomEmitter(this.findInput.inputBox.inputElement,"keydown")),be=a.Event.chain(me.event,ye=>ye.map(Ee=>new E.StandardKeyboardEvent(Ee)));this._register(be(ye=>{if(ye.equals(3)){ye.preventDefault(),ye.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(ye.equals(18)){ye.preventDefault(),ye.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(ye.equals(16)){ye.preventDefault(),ye.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));const ve=this._register(new t.Action("close",(0,v.localize)(1021,"Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(ve,{icon:!0,label:!1});const Le=this._register(new k.DomEmitter(this.elements.grab,"mousedown"));this._register(Le.event(ye=>{const Ee=new d.DisposableStore,ke=Ee.add(new k.DomEmitter((0,c.getWindow)(ye),"mousemove")),Re=Ee.add(new k.DomEmitter((0,c.getWindow)(ye),"mouseup")),Pe=this.right,Fe=ye.pageX,je=this.top,Te=ye.pageY;this.elements.grab.classList.add("grabbing");const Ne=this.elements.root.style.transition;this.elements.root.style.transition="unset";const fe=we=>{const Oe=we.pageX-Fe;this.right=Pe-Oe;const Be=we.pageY-Te;this.top=je+Be,this.layout()};Ee.add(ke.event(fe)),Ee.add(Re.event(we=>{fe(we),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=Ne,Ee.dispose()}))}));const Se=a.Event.chain(this._register(new k.DomEmitter(this.elements.grab,"keydown")).event,ye=>ye.map(Ee=>new E.StandardKeyboardEvent(Ee)));this._register(Se(ye=>{let Ee,ke;if(ye.keyCode===15?Ee=Number.POSITIVE_INFINITY:ye.keyCode===17?Ee=0:ye.keyCode===10&&(Ee=this.right===0?Number.POSITIVE_INFINITY:0),ye.keyCode===16?ke=0:ye.keyCode===18&&(ke=Number.POSITIVE_INFINITY),Ee!==void 0&&(ye.preventDefault(),ye.stopPropagation(),this.right=Ee,this.layout()),ke!==void 0){ye.preventDefault(),ye.stopPropagation(),this.top=ke;const Re=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout(()=>{this.elements.root.style.transition=Re},0)}})),this.onDidChangeValue=this.findInput.onDidChange}layout(B=this.width){this.width=B,this.right=(0,m.clamp)(this.right,0,Math.max(0,B-212)),this.elements.root.style.right=`${this.right}px`,this.top=(0,m.clamp)(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(B){this.findInput.showMessage(B)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await(0,o.timeout)(300),super.dispose()}}class K{get pattern(){return this._pattern}get mode(){return this._mode}set mode(B){B!==this._mode&&(this._mode=B,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(B))}get matchType(){return this._matchType}set matchType(B){B!==this._matchType&&(this._matchType=B,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(B))}constructor(B,j,V,$,Z,ee={}){this.tree=B,this.view=V,this.filter=$,this.contextViewProvider=Z,this.options=ee,this._pattern="",this.width=0,this._onDidChangeMode=new a.Emitter,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new a.Emitter,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this._onDidChangePattern=new a.Emitter,this._onDidChangeOpenState=new a.Emitter,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new d.DisposableStore,this.disposables=new d.DisposableStore,this._mode=B.options.defaultFindMode??z.Highlight,this._matchType=B.options.defaultFindMatchType??q.Fuzzy,j.onDidSplice(this.onDidSpliceModel,this,this.disposables)}updateOptions(B={}){B.defaultFindMode!==void 0&&(this.mode=B.defaultFindMode),B.defaultFindMatchType!==void 0&&(this.matchType=B.defaultFindMatchType)}onDidSpliceModel(){!this.widget||this.pattern.length===0||(this.tree.refilter(),this.render())}render(){const B=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&B?this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:(0,v.localize)(1022,"No elements found.")}):this.widget?.showMessage({type:2}):this.widget?.clearMessage()}shouldAllowFocus(B){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!r.FuzzyScore.isDefault(B.filterData)}layout(B){this.width=B,this.widget?.layout(B)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function U(J,B){return J.position===B.position&&Y(J,B)}function Y(J,B){return J.node.element===B.node.element&&J.startIndex===B.startIndex&&J.height===B.height&&J.endIndex===B.endIndex}class Q{constructor(B=[]){this.stickyNodes=B}get count(){return this.stickyNodes.length}equal(B){return(0,i.equals)(this.stickyNodes,B.stickyNodes,U)}lastNodePartiallyVisible(){if(this.count===0)return!1;const B=this.stickyNodes[this.count-1];if(this.count===1)return B.position!==0;const j=this.stickyNodes[this.count-2];return j.position+j.height!==B.position}animationStateChanged(B){if(!(0,i.equals)(this.stickyNodes,B.stickyNodes,Y)||this.count===0)return!1;const j=this.stickyNodes[this.count-1],V=B.stickyNodes[B.count-1];return j.position!==V.position}}class X{constrainStickyScrollNodes(B,j,V){for(let $=0;$<B.length;$++){const Z=B[$];if(Z.position+Z.height>V||$>=j)return B.slice(0,$)}return B}}class G extends d.Disposable{constructor(B,j,V,$,Z,ee={}){super(),this.tree=B,this.model=j,this.view=V,this.treeDelegate=Z,this.maxWidgetViewRatio=.4;const le=this.validateStickySettings(ee);this.stickyScrollMaxItemCount=le.stickyScrollMaxItemCount,this.stickyScrollDelegate=ee.stickyScrollDelegate??new X,this._widget=this._register(new P(V.getScrollableElement(),V,B,$,Z,ee.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(V.onDidScroll(()=>this.update())),this._register(V.onDidChangeContentHeight(()=>this.update())),this._register(B.onDidChangeCollapseState(()=>this.update())),this.update()}get height(){return this._widget.height}getNodeAtHeight(B){let j;if(B===0?j=this.view.firstVisibleIndex:j=this.view.indexAt(B+this.view.scrollTop),!(j<0||j>=this.view.length))return this.view.element(j)}update(){const B=this.getNodeAtHeight(0);if(!B||this.tree.scrollTop===0){this._widget.setState(void 0);return}const j=this.findStickyState(B);this._widget.setState(j)}findStickyState(B){const j=[];let V=B,$=0,Z=this.getNextStickyNode(V,void 0,$);for(;Z&&(j.push(Z),$+=Z.height,!(j.length<=this.stickyScrollMaxItemCount&&(V=this.getNextVisibleNode(Z),!V)));)Z=this.getNextStickyNode(V,Z.node,$);const ee=this.constrainStickyNodes(j);return ee.length?new Q(ee):void 0}getNextVisibleNode(B){return this.getNodeAtHeight(B.position+B.height)}getNextStickyNode(B,j,V){const $=this.getAncestorUnderPrevious(B,j);if($&&!($===B&&(!this.nodeIsUncollapsedParent(B)||this.nodeTopAlignsWithStickyNodesBottom(B,V))))return this.createStickyScrollNode($,V)}nodeTopAlignsWithStickyNodesBottom(B,j){const V=this.getNodeIndex(B),$=this.view.getElementTop(V),Z=j;return this.view.scrollTop===$-Z}createStickyScrollNode(B,j){const V=this.treeDelegate.getHeight(B),{startIndex:$,endIndex:Z}=this.getNodeRange(B),ee=this.calculateStickyNodePosition(Z,j,V);return{node:B,position:ee,height:V,startIndex:$,endIndex:Z}}getAncestorUnderPrevious(B,j=void 0){let V=B,$=this.getParentNode(V);for(;$;){if($===j)return V;V=$,$=this.getParentNode(V)}if(j===void 0)return V}calculateStickyNodePosition(B,j,V){let $=this.view.getRelativeTop(B);if($===null&&this.view.firstVisibleIndex===B&&B+1<this.view.length){const me=this.treeDelegate.getHeight(this.view.element(B)),be=this.view.getRelativeTop(B+1);$=be?be-me/this.view.renderHeight:null}if($===null)return j;const Z=this.view.element(B),ee=this.treeDelegate.getHeight(Z),de=$*this.view.renderHeight+ee;return j+V>de&&j<=de?de-V:j}constrainStickyNodes(B){if(B.length===0)return[];const j=this.view.renderHeight*this.maxWidgetViewRatio,V=B[B.length-1];if(B.length<=this.stickyScrollMaxItemCount&&V.position+V.height<=j)return B;const $=this.stickyScrollDelegate.constrainStickyScrollNodes(B,this.stickyScrollMaxItemCount,j);if(!$.length)return[];const Z=$[$.length-1];if($.length>this.stickyScrollMaxItemCount||Z.position+Z.height>j)throw new Error("stickyScrollDelegate violates constraints");return $}getParentNode(B){const j=this.model.getNodeLocation(B),V=this.model.getParentNodeLocation(j);return V?this.model.getNode(V):void 0}nodeIsUncollapsedParent(B){const j=this.model.getNodeLocation(B);return this.model.getListRenderCount(j)>1}getNodeIndex(B){const j=this.model.getNodeLocation(B);return this.model.getListIndex(j)}getNodeRange(B){const j=this.model.getNodeLocation(B),V=this.model.getListIndex(j);if(V<0)throw new Error("Node not found in tree");const $=this.model.getListRenderCount(j),Z=V+$-1;return{startIndex:V,endIndex:Z}}nodePositionTopBelowWidget(B){const j=[];let V=this.getParentNode(B);for(;V;)j.push(V),V=this.getParentNode(V);let $=0;for(let Z=0;Z<j.length&&Z<this.stickyScrollMaxItemCount;Z++)$+=this.treeDelegate.getHeight(j[Z]);return $}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(B={}){if(!B.stickyScrollMaxItemCount)return;const j=this.validateStickySettings(B);this.stickyScrollMaxItemCount!==j.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=j.stickyScrollMaxItemCount,this.update())}validateStickySettings(B){let j=7;return typeof B.stickyScrollMaxItemCount=="number"&&(j=Math.max(B.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:j}}}class P{constructor(B,j,V,$,Z,ee){this.view=j,this.tree=V,this.treeRenderers=$,this.treeDelegate=Z,this.accessibilityProvider=ee,this._previousElements=[],this._previousStateDisposables=new d.DisposableStore,this._rootDomNode=(0,c.$)(".monaco-tree-sticky-container.empty"),B.appendChild(this._rootDomNode);const le=(0,c.$)(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(le),this.stickyScrollFocus=new te(this._rootDomNode,j),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const B=this._previousState.stickyNodes[this._previousState.count-1];return B.position+B.height}setState(B){const j=!!this._previousState&&this._previousState.count>0,V=!!B&&B.count>0;if(!j&&!V||j&&V&&this._previousState.equal(B))return;if(j!==V&&this.setVisible(V),!V){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const $=B.stickyNodes[B.count-1];if(this._previousState&&B.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${$.position}px`;else{this._previousStateDisposables.clear();const Z=Array(B.count);for(let ee=B.count-1;ee>=0;ee--){const le=B.stickyNodes[ee],{element:de,disposable:me}=this.createElement(le,ee,B.count);Z[ee]=de,this._rootDomNode.appendChild(de),this._previousStateDisposables.add(me)}this.stickyScrollFocus.updateElements(Z,B),this._previousElements=Z}this._previousState=B,this._rootDomNode.style.height=`${$.position+$.height}px`}createElement(B,j,V){const $=B.startIndex,Z=document.createElement("div");Z.style.top=`${B.position}px`,this.tree.options.setRowHeight!==!1&&(Z.style.height=`${B.height}px`),this.tree.options.setRowLineHeight!==!1&&(Z.style.lineHeight=`${B.height}px`),Z.classList.add("monaco-tree-sticky-row"),Z.classList.add("monaco-list-row"),Z.setAttribute("data-index",`${$}`),Z.setAttribute("data-parity",$%2===0?"even":"odd"),Z.setAttribute("id",this.view.getElementID($));const ee=this.setAccessibilityAttributes(Z,B.node.element,j,V),le=this.treeDelegate.getTemplateId(B.node),de=this.treeRenderers.find(Le=>Le.templateId===le);if(!de)throw new Error(`No renderer found for template id ${le}`);let me=B.node;me===this.tree.getNode(this.tree.getNodeLocation(B.node))&&(me=new Proxy(B.node,{}));const be=de.renderTemplate(Z);de.renderElement(me,B.startIndex,be,B.height);const ve=(0,d.toDisposable)(()=>{ee.dispose(),de.disposeElement(me,B.startIndex,be,B.height),de.disposeTemplate(be),Z.remove()});return{element:Z,disposable:ve}}setAccessibilityAttributes(B,j,V,$){if(!this.accessibilityProvider)return d.Disposable.None;this.accessibilityProvider.getSetSize&&B.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(j,V,$))),this.accessibilityProvider.getPosInSet&&B.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(j,V))),this.accessibilityProvider.getRole&&B.setAttribute("role",this.accessibilityProvider.getRole(j)??"treeitem");const Z=this.accessibilityProvider.getAriaLabel(j),ee=Z&&typeof Z!="string"?Z:(0,w.constObservable)(Z),le=(0,w.autorun)(me=>{const be=me.readObservable(ee);be?B.setAttribute("aria-label",be):B.removeAttribute("aria-label")});typeof Z=="string"||Z&&B.setAttribute("aria-label",Z.get());const de=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(j);return typeof de=="number"&&B.setAttribute("aria-level",`${de}`),B.setAttribute("aria-selected",String(!1)),le}setVisible(B){this._rootDomNode.classList.toggle("empty",!B),B||this.stickyScrollFocus.updateElements([],void 0)}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class te extends d.Disposable{get domHasFocus(){return this._domHasFocus}set domHasFocus(B){B!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(B),this._domHasFocus=B)}constructor(B,j){super(),this.container=B,this.view=j,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new a.Emitter,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new a.Emitter,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register((0,c.addDisposableListener)(this.container,"focus",()=>this.onFocus())),this._register((0,c.addDisposableListener)(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(V=>this.onKeyDown(V))),this._register(this.view.onMouseDown(V=>this.onMouseDown(V))),this._register(this.view.onContextMenu(V=>this.handleContextMenu(V)))}handleContextMenu(B){const j=B.browserEvent.target;if(!(0,b.isStickyScrollContainer)(j)&&!(0,b.isStickyScrollElement)(j)){this.focusedLast()&&this.view.domFocus();return}if(!(0,c.isKeyboardEvent)(B.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const ee=this.state.stickyNodes.findIndex(le=>le.node.element===B.element?.element);if(ee===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(ee);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const $=this.state.stickyNodes[this.focusedIndex].node.element,Z=this.elements[this.focusedIndex];this._onContextMenu.fire({element:$,anchor:Z,browserEvent:B.browserEvent,isStickyScroll:!0})}onKeyDown(B){if(this.domHasFocus&&this.state){if(B.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),B.preventDefault(),B.stopPropagation();else if(B.key==="ArrowDown"||B.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const j=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([j]),this.scrollNodeUnderWidget(j,this.state)}else this.setFocusedElement(this.focusedIndex+1);B.preventDefault(),B.stopPropagation()}}}onMouseDown(B){const j=B.browserEvent.target;!(0,b.isStickyScrollContainer)(j)&&!(0,b.isStickyScrollElement)(j)||(B.browserEvent.preventDefault(),B.browserEvent.stopPropagation())}updateElements(B,j){if(j&&j.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(j&&j.count!==B.length)throw new Error("Sticky scroll focus received illigel state");const V=this.focusedIndex;if(this.removeFocus(),this.elements=B,this.state=j,j){const $=(0,m.clamp)(V,0,j.count-1);this.setFocus($)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=j?0:-1}setFocusedElement(B){const j=this.state;if(!j)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(B),!(B<j.count-1)&&j.lastNodePartiallyVisible()){const V=j.stickyNodes[B];this.scrollNodeUnderWidget(V.endIndex+1,j)}}scrollNodeUnderWidget(B,j){const V=j.stickyNodes[j.count-1],$=j.count>1?j.stickyNodes[j.count-2]:void 0,Z=this.view.getElementTop(B),ee=$?$.position+$.height+V.height:V.height;this.view.scrollTop=Z-ee}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(B){if(0>B)throw new Error("addFocus() can not remove focus");if(!this.state&&B>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&B>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const j=this.focusedIndex;j>=0&&this.toggleElementFocus(this.elements[j],!1),B>=0&&this.toggleElementFocus(this.elements[B],!0),this.focusedIndex=B}toggleElementFocus(B,j){this.toggleElementActiveFocus(B,j&&this.domHasFocus),this.toggleElementPassiveFocus(B,j)}toggleCurrentElementActiveFocus(B){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],B)}toggleElementActiveFocus(B,j){B.classList.toggle("focused",j)}toggleElementPassiveFocus(B,j){B.classList.toggle("passive-focused",j)}toggleStickyScrollFocused(B){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",B)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function se(J){let B=s.TreeMouseEventTarget.Unknown;return(0,c.hasParentWithClass)(J.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?B=s.TreeMouseEventTarget.Twistie:(0,c.hasParentWithClass)(J.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?B=s.TreeMouseEventTarget.Element:(0,c.hasParentWithClass)(J.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(B=s.TreeMouseEventTarget.Filter),{browserEvent:J.browserEvent,element:J.element?J.element.element:null,target:B}}function ue(J){const B=(0,b.isStickyScrollContainer)(J.browserEvent.target);return{element:J.element?J.element.element:null,browserEvent:J.browserEvent,anchor:J.anchor,isStickyScroll:B}}function ge(J,B){B(J),J.children.forEach(j=>ge(j,B))}class pe{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(B,j){this.getFirstViewElementWithTrait=B,this.identityProvider=j,this.nodes=[],this._onDidChange=new a.Emitter,this.onDidChange=this._onDidChange.event}set(B,j){!j?.__forceEvent&&(0,i.equals)(this.nodes,B)||this._set(B,!1,j)}_set(B,j,V){if(this.nodes=[...B],this.elements=void 0,this._nodeSet=void 0,!j){const $=this;this._onDidChange.fire({get elements(){return $.get()},browserEvent:V})}}get(){return this.elements||(this.elements=this.nodes.map(B=>B.element)),[...this.elements]}getNodes(){return this.nodes}has(B){return this.nodeSet.has(B)}onDidModelSplice({insertedNodes:B,deletedNodes:j}){if(!this.identityProvider){const de=this.createNodeSet(),me=be=>de.delete(be);j.forEach(be=>ge(be,me)),this.set([...de.values()]);return}const V=new Set,$=de=>V.add(this.identityProvider.getId(de.element).toString());j.forEach(de=>ge(de,$));const Z=new Map,ee=de=>Z.set(this.identityProvider.getId(de.element).toString(),de);B.forEach(de=>ge(de,ee));const le=[];for(const de of this.nodes){const me=this.identityProvider.getId(de.element).toString();if(!V.has(me))le.push(de);else{const ve=Z.get(me);ve&&ve.visible&&le.push(ve)}}if(this.nodes.length>0&&le.length===0){const de=this.getFirstViewElementWithTrait();de&&le.push(de)}this._set(le,!0)}createNodeSet(){const B=new Set;for(const j of this.nodes)B.add(j);return B}}class ce extends b.MouseController{constructor(B,j,V){super(B),this.tree=j,this.stickyScrollProvider=V}onViewPointer(B){if((0,b.isButton)(B.browserEvent.target)||(0,b.isInputElement)(B.browserEvent.target)||(0,b.isMonacoEditor)(B.browserEvent.target)||B.browserEvent.isHandledByList)return;const j=B.element;if(!j)return super.onViewPointer(B);if(this.isSelectionRangeChangeEvent(B)||this.isSelectionSingleChangeEvent(B))return super.onViewPointer(B);const V=B.browserEvent.target,$=V.classList.contains("monaco-tl-twistie")||V.classList.contains("monaco-icon-label")&&V.classList.contains("folder-icon")&&B.browserEvent.offsetX<16,Z=(0,b.isStickyScrollElement)(B.browserEvent.target);let ee=!1;if(Z?ee=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?ee=this.tree.expandOnlyOnTwistieClick(j.element):ee=!!this.tree.expandOnlyOnTwistieClick,Z)this.handleStickyScrollMouseEvent(B,j);else{if(ee&&!$&&B.browserEvent.detail!==2)return super.onViewPointer(B);if(!this.tree.expandOnDoubleClick&&B.browserEvent.detail===2)return super.onViewPointer(B)}if(j.collapsible&&(!Z||$)){const le=this.tree.getNodeLocation(j),de=B.browserEvent.altKey;if(this.tree.setFocus([le]),this.tree.toggleCollapsed(le,de),$){B.browserEvent.isHandledByList=!0;return}}Z||super.onViewPointer(B)}handleStickyScrollMouseEvent(B,j){if((0,b.isMonacoCustomToggle)(B.browserEvent.target)||(0,b.isActionItem)(B.browserEvent.target))return;const V=this.stickyScrollProvider();if(!V)throw new Error("Sticky scroll controller not found");const $=this.list.indexOf(j),Z=this.list.getElementTop($),ee=V.nodePositionTopBelowWidget(j);this.tree.scrollTop=Z-ee,this.list.domFocus(),this.list.setFocus([$]),this.list.setSelection([$])}onDoubleClick(B){B.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||B.browserEvent.isHandledByList||super.onDoubleClick(B)}onMouseDown(B){const j=B.browserEvent.target;if(!(0,b.isStickyScrollContainer)(j)&&!(0,b.isStickyScrollElement)(j)){super.onMouseDown(B);return}}onContextMenu(B){const j=B.browserEvent.target;if(!(0,b.isStickyScrollContainer)(j)&&!(0,b.isStickyScrollElement)(j)){super.onContextMenu(B);return}}}class ie extends b.List{constructor(B,j,V,$,Z,ee,le,de){super(B,j,V,$,de),this.focusTrait=Z,this.selectionTrait=ee,this.anchorTrait=le}createMouseController(B){return new ce(this,B.tree,B.stickyScrollProvider)}splice(B,j,V=[]){if(super.splice(B,j,V),V.length===0)return;const $=[],Z=[];let ee;V.forEach((le,de)=>{this.focusTrait.has(le)&&$.push(B+de),this.selectionTrait.has(le)&&Z.push(B+de),this.anchorTrait.has(le)&&(ee=B+de)}),$.length>0&&super.setFocus((0,i.distinct)([...super.getFocus(),...$])),Z.length>0&&super.setSelection((0,i.distinct)([...super.getSelection(),...Z])),typeof ee=="number"&&super.setAnchor(ee)}setFocus(B,j,V=!1){super.setFocus(B,j),V||this.focusTrait.set(B.map($=>this.element($)),j)}setSelection(B,j,V=!1){super.setSelection(B,j),V||this.selectionTrait.set(B.map($=>this.element($)),j)}setAnchor(B,j=!1){super.setAnchor(B),j||(typeof B>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(B)]))}}class ne{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return a.Event.filter(a.Event.map(this.view.onMouseDblClick,se),B=>B.target!==s.TreeMouseEventTarget.Filter)}get onMouseOver(){return a.Event.map(this.view.onMouseOver,se)}get onMouseOut(){return a.Event.map(this.view.onMouseOut,se)}get onContextMenu(){return a.Event.any(a.Event.filter(a.Event.map(this.view.onContextMenu,ue),B=>!B.isStickyScroll),this.stickyScrollController?.onContextMenu??a.Event.None)}get onPointer(){return a.Event.map(this.view.onPointer,se)}get onKeyDown(){return this.view.onKeyDown}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return a.Event.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){return this.findController?.mode??z.Highlight}set findMode(B){this.findController&&(this.findController.mode=B)}get findMatchType(){return this.findController?.matchType??q.Fuzzy}set findMatchType(B){this.findController&&(this.findController.matchType=B)}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(B,j,V,$,Z={}){this._user=B,this._options=Z,this.eventBufferer=new a.EventBufferer,this.onDidChangeFindOpenState=a.Event.None,this.onDidChangeStickyScrollFocused=a.Event.None,this.disposables=new d.DisposableStore,this._onWillRefilter=new a.Emitter,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new a.Emitter,this.treeDelegate=new M(V);const ee=new a.Relay,le=new a.Relay,de=this.disposables.add(new R(le.event)),me=new l.SetMap;this.renderers=$.map(ye=>new N(ye,()=>this.model,ee.event,de,me,Z));for(const ye of this.renderers)this.disposables.add(ye);let be;Z.keyboardNavigationLabelProvider&&(be=new O(this,Z.keyboardNavigationLabelProvider,Z.filter),Z={...Z,filter:be},this.disposables.add(be)),this.focus=new pe(()=>this.view.getFocusedElements()[0],Z.identityProvider),this.selection=new pe(()=>this.view.getSelectedElements()[0],Z.identityProvider),this.anchor=new pe(()=>this.view.getAnchorElement(),Z.identityProvider),this.view=new ie(B,j,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...T(()=>this.model,Z),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.model=this.createModel(B,this.view,Z),ee.input=this.model.onDidChangeCollapseState;const ve=a.Event.forEach(this.model.onDidSplice,ye=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(ye),this.selection.onDidModelSplice(ye)})},this.disposables);ve(()=>null,null,this.disposables);const Le=this.disposables.add(new a.Emitter),Se=this.disposables.add(new o.Delayer(0));if(this.disposables.add(a.Event.any(ve,this.focus.onDidChange,this.selection.onDidChange)(()=>{Se.trigger(()=>{const ye=new Set;for(const Ee of this.focus.getNodes())ye.add(Ee);for(const Ee of this.selection.getNodes())ye.add(Ee);Le.fire([...ye.values()])})})),le.input=Le.event,Z.keyboardSupport!==!1){const ye=a.Event.chain(this.view.onKeyDown,Ee=>Ee.filter(ke=>!(0,b.isInputElement)(ke.target)).map(ke=>new E.StandardKeyboardEvent(ke)));a.Event.chain(ye,Ee=>Ee.filter(ke=>ke.keyCode===15))(this.onLeftArrow,this,this.disposables),a.Event.chain(ye,Ee=>Ee.filter(ke=>ke.keyCode===17))(this.onRightArrow,this,this.disposables),a.Event.chain(ye,Ee=>Ee.filter(ke=>ke.keyCode===10))(this.onSpace,this,this.disposables)}if((Z.findWidgetEnabled??!0)&&Z.keyboardNavigationLabelProvider&&Z.contextViewProvider){const ye=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new K(this,this.model,this.view,be,Z.contextViewProvider,ye),this.focusNavigationFilter=Ee=>this.findController.shouldAllowFocus(Ee),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=a.Event.None,this.onDidChangeFindMatchType=a.Event.None;Z.enableStickyScroll&&(this.stickyScrollController=new G(this,this.model,this.view,this.renderers,this.treeDelegate,Z),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=(0,c.createStyleSheet)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===A.Always)}updateOptions(B={}){this._options={...this._options,...B};for(const j of this.renderers)j.updateOptions(B);this.view.updateOptions(this._options),this.findController?.updateOptions(B),this.updateStickyScroll(B),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===A.Always)}get options(){return this._options}updateStickyScroll(B){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new G(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=a.Event.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(B)}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(B){this.view.scrollTop=B}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(B){this.view.ariaLabel=B}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}layout(B,j){this.view.layout(B,j),(0,h.isNumber)(j)&&this.findController?.layout(j)}style(B){const j=`.${this.view.domId}`,V=[];B.treeIndentGuidesStroke&&(V.push(`.monaco-list${j}:hover .monaco-tl-indent > .indent-guide, .monaco-list${j}.always .monaco-tl-indent > .indent-guide  { border-color: ${B.treeInactiveIndentGuidesStroke}; }`),V.push(`.monaco-list${j} .monaco-tl-indent > .indent-guide.active { border-color: ${B.treeIndentGuidesStroke}; }`));const $=B.treeStickyScrollBackground??B.listBackground;$&&(V.push(`.monaco-list${j} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${$}; }`),V.push(`.monaco-list${j} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${$}; }`)),B.treeStickyScrollBorder&&V.push(`.monaco-list${j} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${B.treeStickyScrollBorder}; }`),B.treeStickyScrollShadow&&V.push(`.monaco-list${j} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${B.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),B.listFocusForeground&&(V.push(`.monaco-list${j}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${B.listFocusForeground}; }`),V.push(`.monaco-list${j}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const Z=(0,c.asCssValueWithDefault)(B.listFocusAndSelectionOutline,(0,c.asCssValueWithDefault)(B.listSelectionOutline,B.listFocusOutline??""));Z&&(V.push(`.monaco-list${j}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${Z}; outline-offset: -1px;}`),V.push(`.monaco-list${j}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),B.listFocusOutline&&(V.push(`.monaco-list${j}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${B.listFocusOutline}; outline-offset: -1px; }`),V.push(`.monaco-list${j}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),V.push(`.monaco-workbench.context-menu-visible .monaco-list${j}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${B.listFocusOutline}; outline-offset: -1px; }`),V.push(`.monaco-workbench.context-menu-visible .monaco-list${j}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),V.push(`.monaco-workbench.context-menu-visible .monaco-list${j}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=V.join(`
`),this.view.style(B)}getParentElement(B){const j=this.model.getParentNodeLocation(B);return this.model.getNode(j).element}getFirstElementChild(B){return this.model.getFirstElementChild(B)}getNode(B){return this.model.getNode(B)}getNodeLocation(B){return this.model.getNodeLocation(B)}collapse(B,j=!1){return this.model.setCollapsed(B,!0,j)}expand(B,j=!1){return this.model.setCollapsed(B,!1,j)}toggleCollapsed(B,j=!1){return this.model.setCollapsed(B,void 0,j)}isCollapsible(B){return this.model.isCollapsible(B)}setCollapsible(B,j){return this.model.setCollapsible(B,j)}isCollapsed(B){return this.model.isCollapsed(B)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(B,j){this.eventBufferer.bufferEvents(()=>{const V=B.map(Z=>this.model.getNode(Z));this.selection.set(V,j);const $=B.map(Z=>this.model.getListIndex(Z)).filter(Z=>Z>-1);this.view.setSelection($,j,!0)})}getSelection(){return this.selection.get()}setFocus(B,j){this.eventBufferer.bufferEvents(()=>{const V=B.map(Z=>this.model.getNode(Z));this.focus.set(V,j);const $=B.map(Z=>this.model.getListIndex(Z)).filter(Z=>Z>-1);this.view.setFocus($,j,!0)})}focusNext(B=1,j=!1,V,$=(0,c.isKeyboardEvent)(V)&&V.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(B,j,V,$)}focusPrevious(B=1,j=!1,V,$=(0,c.isKeyboardEvent)(V)&&V.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(B,j,V,$)}focusNextPage(B,j=(0,c.isKeyboardEvent)(B)&&B.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(B,j)}focusPreviousPage(B,j=(0,c.isKeyboardEvent)(B)&&B.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(B,j,()=>this.stickyScrollController?.height??0)}focusLast(B,j=(0,c.isKeyboardEvent)(B)&&B.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(B,j)}focusFirst(B,j=(0,c.isKeyboardEvent)(B)&&B.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(B,j)}getFocus(){return this.focus.get()}reveal(B,j){this.model.expandTo(B);const V=this.model.getListIndex(B);if(V!==-1)if(!this.stickyScrollController)this.view.reveal(V,j);else{const $=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(B));this.view.reveal(V,j,$)}}onLeftArrow(B){B.preventDefault(),B.stopPropagation();const j=this.view.getFocusedElements();if(j.length===0)return;const V=j[0],$=this.model.getNodeLocation(V);if(!this.model.setCollapsed($,!0)){const ee=this.model.getParentNodeLocation($);if(!ee)return;const le=this.model.getListIndex(ee);this.view.reveal(le),this.view.setFocus([le])}}onRightArrow(B){B.preventDefault(),B.stopPropagation();const j=this.view.getFocusedElements();if(j.length===0)return;const V=j[0],$=this.model.getNodeLocation(V);if(!this.model.setCollapsed($,!1)){if(!V.children.some(de=>de.visible))return;const[ee]=this.view.getFocus(),le=ee+1;this.view.reveal(le),this.view.setFocus([le])}}onSpace(B){B.preventDefault(),B.stopPropagation();const j=this.view.getFocusedElements();if(j.length===0)return;const V=j[0],$=this.model.getNodeLocation(V),Z=B.browserEvent.altKey;this.model.setCollapsed($,void 0,Z)}dispose(){(0,d.dispose)(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose()}}e.AbstractTree=ne}),define(oe[655],re([1,0,175,226]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataTree=void 0;class E extends c.AbstractTree{constructor(y,f,_,b,p,n={}){super(y,f,_,b,n),this.user=y,this.dataSource=p,this.identityProvider=n.identityProvider}createModel(y,f,_){return new k.ObjectTreeModel(y,f,_)}}e.DataTree=E}),define(oe[366],re([1,0,175,454,226,126,53]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompressibleObjectTree=e.ObjectTree=void 0;class f extends c.AbstractTree{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(t,i,o,g,u={}){super(t,i,o,g,u),this.user=t}setChildren(t,i=y.Iterable.empty(),o){this.model.setChildren(t,i,o)}rerender(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)}hasElement(t){return this.model.has(t)}createModel(t,i,o){return new E.ObjectTreeModel(t,i,o)}}e.ObjectTree=f;class _{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(t,i,o){this._compressedTreeNodeProvider=t,this.stickyScrollDelegate=i,this.renderer=o,this.templateId=o.templateId,o.onDidChangeTwistieState&&(this.onDidChangeTwistieState=o.onDidChangeTwistieState)}renderTemplate(t){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(t)}}renderElement(t,i,o,g){let u=this.stickyScrollDelegate.getCompressedNode(t);u||(u=this.compressedTreeNodeProvider.getCompressedTreeNode(t.element)),u.element.elements.length===1?(o.compressedTreeNode=void 0,this.renderer.renderElement(t,i,o.data,g)):(o.compressedTreeNode=u,this.renderer.renderCompressedElements(u,i,o.data,g))}disposeElement(t,i,o,g){o.compressedTreeNode?this.renderer.disposeCompressedElements?.(o.compressedTreeNode,i,o.data,g):this.renderer.disposeElement?.(t,i,o.data,g)}disposeTemplate(t){this.renderer.disposeTemplate(t.data)}renderTwistie(t,i){return this.renderer.renderTwistie?this.renderer.renderTwistie(t,i):!1}}De([L.memoize],_.prototype,"compressedTreeNodeProvider",null);class b{constructor(t){this.modelProvider=t,this.compressedStickyNodes=new Map}getCompressedNode(t){return this.compressedStickyNodes.get(t)}constrainStickyScrollNodes(t,i,o){if(this.compressedStickyNodes.clear(),t.length===0)return[];for(let g=0;g<t.length;g++){const u=t[g],l=u.position+u.height;if(g+1<t.length&&l+t[g+1].height>o||g>=i-1&&i<t.length){const r=t.slice(0,g),d=t.slice(g),m=this.compressStickyNodes(d);return[...r,m]}}return t}compressStickyNodes(t){if(t.length===0)throw new Error("Can't compress empty sticky nodes");const i=this.modelProvider();if(!i.isCompressionEnabled())return t[0];const o=[];for(let d=0;d<t.length;d++){const m=t[d],h=i.getCompressedTreeNode(m.node.element);if(h.element){if(d!==0&&h.element.incompressible)break;o.push(...h.element.elements)}}if(o.length<2)return t[0];const g=t[t.length-1],u={elements:o,incompressible:!1},l={...g.node,children:[],element:u},a=new Proxy(t[0].node,{}),r={node:a,startIndex:t[0].startIndex,endIndex:g.endIndex,position:t[0].position,height:t[0].height};return this.compressedStickyNodes.set(a,l),r}}function p(s,t){return t&&{...t,keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let o;try{o=s().getCompressedTreeNode(i)}catch{return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return o.element.elements.length===1?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(o.element.elements)}}}}class n extends f{constructor(t,i,o,g,u={}){const l=()=>this,a=new b(()=>this.model),r=g.map(d=>new _(l,a,d));super(t,i,o,r,{...p(l,u),stickyScrollDelegate:a})}setChildren(t,i=y.Iterable.empty(),o){this.model.setChildren(t,i,o)}createModel(t,i,o){return new k.CompressibleObjectTreeModel(t,i,o)}updateOptions(t={}){super.updateOptions(t),typeof t.compressionEnabled<"u"&&this.model.setCompressionEnabled(t.compressionEnabled)}getCompressedTreeNode(t=null){return this.model.getCompressedTreeNode(t)}}e.CompressibleObjectTree=n}),define(oe[656],re([1,0,235,175,225,366,157,14,26,30,8,6,53,2,19]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompressibleAsyncDataTree=e.AsyncDataTree=void 0;function o(R){return{...R,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function g(R,N){return N.parent?N.parent===R?!0:g(R,N.parent):!1}function u(R,N){return R===N||g(R,N)||g(N,R)}class l{get element(){return this.node.element.element}get children(){return this.node.children.map(N=>new l(N))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(N){this.node=N}}class a{constructor(N,O,x){this.renderer=N,this.nodeMapper=O,this.onDidChangeTwistieState=x,this.renderedNodes=new Map,this.templateId=N.templateId}renderTemplate(N){return{templateData:this.renderer.renderTemplate(N)}}renderElement(N,O,x,F){this.renderer.renderElement(this.nodeMapper.map(N),O,x.templateData,F)}renderTwistie(N,O){return N.slow?(O.classList.add(...b.ThemeIcon.asClassNameArray(_.Codicon.treeItemLoading)),!0):(O.classList.remove(...b.ThemeIcon.asClassNameArray(_.Codicon.treeItemLoading)),!1)}disposeElement(N,O,x,F){this.renderer.disposeElement?.(this.nodeMapper.map(N),O,x.templateData,F)}disposeTemplate(N){this.renderer.disposeTemplate(N.templateData)}dispose(){this.renderedNodes.clear()}}function r(R){return{browserEvent:R.browserEvent,elements:R.elements.map(N=>N.element)}}function d(R){return{browserEvent:R.browserEvent,element:R.element&&R.element.element,target:R.target}}class m extends c.ElementsDragAndDropData{constructor(N){super(N.elements.map(O=>O.element)),this.data=N}}function h(R){return R instanceof c.ElementsDragAndDropData?new m(R):R}class v{constructor(N){this.dnd=N}getDragURI(N){return this.dnd.getDragURI(N.element)}getDragLabel(N,O){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(N.map(x=>x.element),O)}onDragStart(N,O){this.dnd.onDragStart?.(h(N),O)}onDragOver(N,O,x,F,W,z=!0){return this.dnd.onDragOver(h(N),O&&O.element,x,F,W)}drop(N,O,x,F,W){this.dnd.drop(h(N),O&&O.element,x,F,W)}onDragEnd(N){this.dnd.onDragEnd?.(N)}dispose(){this.dnd.dispose()}}function C(R){return R&&{...R,collapseByDefault:!0,identityProvider:R.identityProvider&&{getId(N){return R.identityProvider.getId(N.element)}},dnd:R.dnd&&new v(R.dnd),multipleSelectionController:R.multipleSelectionController&&{isSelectionSingleChangeEvent(N){return R.multipleSelectionController.isSelectionSingleChangeEvent({...N,element:N.element})},isSelectionRangeChangeEvent(N){return R.multipleSelectionController.isSelectionRangeChangeEvent({...N,element:N.element})}},accessibilityProvider:R.accessibilityProvider&&{...R.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:R.accessibilityProvider.getRole?N=>R.accessibilityProvider.getRole(N.element):()=>"treeitem",isChecked:R.accessibilityProvider.isChecked?N=>!!R.accessibilityProvider?.isChecked(N.element):void 0,getAriaLabel(N){return R.accessibilityProvider.getAriaLabel(N.element)},getWidgetAriaLabel(){return R.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:R.accessibilityProvider.getWidgetRole?()=>R.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:R.accessibilityProvider.getAriaLevel&&(N=>R.accessibilityProvider.getAriaLevel(N.element)),getActiveDescendantId:R.accessibilityProvider.getActiveDescendantId&&(N=>R.accessibilityProvider.getActiveDescendantId(N.element))},filter:R.filter&&{filter(N,O){return R.filter.filter(N.element,O)}},keyboardNavigationLabelProvider:R.keyboardNavigationLabelProvider&&{...R.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(N){return R.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(N.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof R.expandOnlyOnTwistieClick>"u"?void 0:typeof R.expandOnlyOnTwistieClick!="function"?R.expandOnlyOnTwistieClick:N=>R.expandOnlyOnTwistieClick(N.element),defaultFindVisibility:N=>N.hasChildren&&N.stale?1:typeof R.defaultFindVisibility=="number"?R.defaultFindVisibility:typeof R.defaultFindVisibility>"u"?2:R.defaultFindVisibility(N.element)}}function w(R,N){N(R),R.children.forEach(O=>w(O,N))}class S{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return n.Event.map(this.tree.onDidChangeFocus,r)}get onDidChangeSelection(){return n.Event.map(this.tree.onDidChangeSelection,r)}get onMouseDblClick(){return n.Event.map(this.tree.onMouseDblClick,d)}get onPointer(){return n.Event.map(this.tree.onPointer,d)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get onDidDispose(){return this.tree.onDidDispose}constructor(N,O,x,F,W,z={}){this.user=N,this.dataSource=W,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new n.Emitter,this._onDidChangeNodeSlowState=new n.Emitter,this.nodeMapper=new y.WeakMapper(q=>new l(q)),this.disposables=new t.DisposableStore,this.identityProvider=z.identityProvider,this.autoExpandSingleChildren=typeof z.autoExpandSingleChildren>"u"?!1:z.autoExpandSingleChildren,this.sorter=z.sorter,this.getDefaultCollapseState=q=>z.collapseByDefault?z.collapseByDefault(q)?y.ObjectTreeElementCollapseState.PreserveOrCollapsed:y.ObjectTreeElementCollapseState.PreserveOrExpanded:void 0,this.tree=this.createTree(N,O,x,F,z),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=o({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}createTree(N,O,x,F,W){const z=new k.ComposedTreeDelegate(x),q=F.map(K=>new a(K,this.nodeMapper,this._onDidChangeNodeSlowState.event)),H=C(W)||{};return new L.ObjectTree(N,O,z,q,H)}updateOptions(N={}){this.tree.updateOptions(N)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(N){this.tree.scrollTop=N}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}domFocus(){this.tree.domFocus()}layout(N,O){this.tree.layout(N,O)}style(N){this.tree.style(N)}getInput(){return this.root.element}async setInput(N,O){this.refreshPromises.forEach(F=>F.cancel()),this.refreshPromises.clear(),this.root.element=N;const x=O&&{viewState:O,focus:[],selection:[]};await this._updateChildren(N,!0,!1,x),x&&(this.tree.setFocus(x.focus),this.tree.setSelection(x.selection)),O&&typeof O.scrollTop=="number"&&(this.scrollTop=O.scrollTop)}async _updateChildren(N=this.root.element,O=!0,x=!1,F,W){if(typeof this.root.element>"u")throw new y.TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await n.Event.toPromise(this._onDidRender.event));const z=this.getDataNode(N);if(await this.refreshAndRenderNode(z,O,F,W),x)try{this.tree.rerender(z)}catch{}}rerender(N){if(N===void 0||N===this.root.element){this.tree.rerender();return}const O=this.getDataNode(N);this.tree.rerender(O)}getNode(N=this.root.element){const O=this.getDataNode(N),x=this.tree.getNode(O===this.root?null:O);return this.nodeMapper.map(x)}collapse(N,O=!1){const x=this.getDataNode(N);return this.tree.collapse(x===this.root?null:x,O)}async expand(N,O=!1){if(typeof this.root.element>"u")throw new y.TreeError(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await n.Event.toPromise(this._onDidRender.event));const x=this.getDataNode(N);if(this.tree.hasElement(x)&&!this.tree.isCollapsible(x)||(x.refreshPromise&&(await this.root.refreshPromise,await n.Event.toPromise(this._onDidRender.event)),x!==this.root&&!x.refreshPromise&&!this.tree.isCollapsed(x)))return!1;const F=this.tree.expand(x===this.root?null:x,O);return x.refreshPromise&&(await this.root.refreshPromise,await n.Event.toPromise(this._onDidRender.event)),F}setSelection(N,O){const x=N.map(F=>this.getDataNode(F));this.tree.setSelection(x,O)}getSelection(){return this.tree.getSelection().map(O=>O.element)}setFocus(N,O){const x=N.map(F=>this.getDataNode(F));this.tree.setFocus(x,O)}getFocus(){return this.tree.getFocus().map(O=>O.element)}reveal(N,O){this.tree.reveal(this.getDataNode(N),O)}getParentElement(N){const O=this.tree.getParentElement(this.getDataNode(N));return O&&O.element}getFirstElementChild(N=this.root.element){const O=this.getDataNode(N),x=this.tree.getFirstElementChild(O===this.root?null:O);return x&&x.element}getDataNode(N){const O=this.nodes.get(N===this.root.element?null:N);if(!O)throw new y.TreeError(this.user,`Data tree node not found: ${N}`);return O}async refreshAndRenderNode(N,O,x,F){await this.refreshNode(N,O,x),!this.disposables.isDisposed&&this.render(N,x,F)}async refreshNode(N,O,x){let F;if(this.subTreeRefreshPromises.forEach((W,z)=>{!F&&u(z,N)&&(F=W.then(()=>this.refreshNode(N,O,x)))}),F)return F;if(N!==this.root&&this.tree.getNode(N).collapsed){N.hasChildren=!!this.dataSource.hasChildren(N.element),N.stale=!0,this.setChildren(N,[],O,x);return}return this.doRefreshSubTree(N,O,x)}async doRefreshSubTree(N,O,x){let F;N.refreshPromise=new Promise(W=>F=W),this.subTreeRefreshPromises.set(N,N.refreshPromise),N.refreshPromise.finally(()=>{N.refreshPromise=void 0,this.subTreeRefreshPromises.delete(N)});try{const W=await this.doRefreshNode(N,O,x);N.stale=!1,await f.Promises.settled(W.map(z=>this.doRefreshSubTree(z,O,x)))}finally{F()}}async doRefreshNode(N,O,x){N.hasChildren=!!this.dataSource.hasChildren(N.element);let F;if(!N.hasChildren)F=Promise.resolve(s.Iterable.empty());else{const W=this.doGetChildren(N);if((0,i.isIterable)(W))F=Promise.resolve(W);else{const z=(0,f.timeout)(800);z.then(()=>{N.slow=!0,this._onDidChangeNodeSlowState.fire(N)},q=>null),F=W.finally(()=>z.cancel())}}try{const W=await F;return this.setChildren(N,W,O,x)}catch(W){if(N!==this.root&&this.tree.hasElement(N)&&this.tree.collapse(N),(0,p.isCancellationError)(W))return[];throw W}finally{N.slow&&(N.slow=!1,this._onDidChangeNodeSlowState.fire(N))}}doGetChildren(N){let O=this.refreshPromises.get(N);if(O)return O;const x=this.dataSource.getChildren(N.element);return(0,i.isIterable)(x)?this.processChildren(x):(O=(0,f.createCancelablePromise)(async()=>this.processChildren(await x)),this.refreshPromises.set(N,O),O.finally(()=>{this.refreshPromises.delete(N)}))}_onDidChangeCollapseState({node:N,deep:O}){N.element!==null&&!N.collapsed&&N.element.stale&&(O?this.collapse(N.element.element):this.refreshAndRenderNode(N.element,!1).catch(p.onUnexpectedError))}setChildren(N,O,x,F){const W=[...O];if(N.children.length===0&&W.length===0)return[];const z=new Map,q=new Map;for(const U of N.children)z.set(U.element,U),this.identityProvider&&q.set(U.id,{node:U,collapsed:this.tree.hasElement(U)&&this.tree.isCollapsed(U)});const H=[],K=W.map(U=>{const Y=!!this.dataSource.hasChildren(U);if(!this.identityProvider){const P=o({element:U,parent:N,hasChildren:Y,defaultCollapseState:this.getDefaultCollapseState(U)});return Y&&P.defaultCollapseState===y.ObjectTreeElementCollapseState.PreserveOrExpanded&&H.push(P),P}const Q=this.identityProvider.getId(U).toString(),X=q.get(Q);if(X){const P=X.node;return z.delete(P.element),this.nodes.delete(P.element),this.nodes.set(U,P),P.element=U,P.hasChildren=Y,x?X.collapsed?(P.children.forEach(te=>w(te,se=>this.nodes.delete(se.element))),P.children.splice(0,P.children.length),P.stale=!0):H.push(P):Y&&!X.collapsed&&H.push(P),P}const G=o({element:U,parent:N,id:Q,hasChildren:Y,defaultCollapseState:this.getDefaultCollapseState(U)});return F&&F.viewState.focus&&F.viewState.focus.indexOf(Q)>-1&&F.focus.push(G),F&&F.viewState.selection&&F.viewState.selection.indexOf(Q)>-1&&F.selection.push(G),(F&&F.viewState.expanded&&F.viewState.expanded.indexOf(Q)>-1||Y&&G.defaultCollapseState===y.ObjectTreeElementCollapseState.PreserveOrExpanded)&&H.push(G),G});for(const U of z.values())w(U,Y=>this.nodes.delete(Y.element));for(const U of K)this.nodes.set(U.element,U);return N.children.splice(0,N.children.length,...K),N!==this.root&&this.autoExpandSingleChildren&&K.length===1&&H.length===0&&(K[0].forceExpanded=!0,H.push(K[0])),H}render(N,O,x){const F=N.children.map(z=>this.asTreeElement(z,O)),W=x&&{...x,diffIdentityProvider:x.diffIdentityProvider&&{getId(z){return x.diffIdentityProvider.getId(z.element)}}};this.tree.setChildren(N===this.root?null:N,F,W),N!==this.root&&this.tree.setCollapsible(N,N.hasChildren),this._onDidRender.fire()}asTreeElement(N,O){if(N.stale)return{element:N,collapsible:N.hasChildren,collapsed:!0};let x;return O&&O.viewState.expanded&&N.id&&O.viewState.expanded.indexOf(N.id)>-1?x=!1:N.forceExpanded?(x=!1,N.forceExpanded=!1):x=N.defaultCollapseState,{element:N,children:N.hasChildren?s.Iterable.map(N.children,F=>this.asTreeElement(F,O)):[],collapsible:N.hasChildren,collapsed:x}}processChildren(N){return this.sorter&&(N=[...N].sort(this.sorter.compare.bind(this.sorter))),N}dispose(){this.disposables.dispose(),this.tree.dispose()}}e.AsyncDataTree=S;class D{get element(){return{elements:this.node.element.elements.map(N=>N.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(N=>new D(N))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(N){this.node=N}}class I{constructor(N,O,x,F){this.renderer=N,this.nodeMapper=O,this.compressibleNodeMapperProvider=x,this.onDidChangeTwistieState=F,this.renderedNodes=new Map,this.disposables=[],this.templateId=N.templateId}renderTemplate(N){return{templateData:this.renderer.renderTemplate(N)}}renderElement(N,O,x,F){this.renderer.renderElement(this.nodeMapper.map(N),O,x.templateData,F)}renderCompressedElements(N,O,x,F){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(N),O,x.templateData,F)}renderTwistie(N,O){return N.slow?(O.classList.add(...b.ThemeIcon.asClassNameArray(_.Codicon.treeItemLoading)),!0):(O.classList.remove(...b.ThemeIcon.asClassNameArray(_.Codicon.treeItemLoading)),!1)}disposeElement(N,O,x,F){this.renderer.disposeElement?.(this.nodeMapper.map(N),O,x.templateData,F)}disposeCompressedElements(N,O,x,F){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(N),O,x.templateData,F)}disposeTemplate(N){this.renderer.disposeTemplate(N.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,t.dispose)(this.disposables)}}function T(R){const N=R&&C(R);return N&&{...N,keyboardNavigationLabelProvider:N.keyboardNavigationLabelProvider&&{...N.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(O){return R.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(O.map(x=>x.element))}}}}class M extends S{constructor(N,O,x,F,W,z,q={}){super(N,O,x,W,z,q),this.compressionDelegate=F,this.compressibleNodeMapper=new y.WeakMapper(H=>new D(H)),this.filter=q.filter}createTree(N,O,x,F,W){const z=new k.ComposedTreeDelegate(x),q=F.map(K=>new I(K,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),H=T(W)||{};return new L.CompressibleObjectTree(N,O,z,q,H)}asTreeElement(N,O){return{incompressible:this.compressionDelegate.isIncompressible(N.element),...super.asTreeElement(N,O)}}updateOptions(N={}){this.tree.updateOptions(N)}render(N,O,x){if(!this.identityProvider)return super.render(N,O);const F=X=>this.identityProvider.getId(X).toString(),W=X=>{const G=new Set;for(const P of X){const te=this.tree.getCompressedTreeNode(P===this.root?null:P);if(te.element)for(const se of te.element.elements)G.add(F(se.element))}return G},z=W(this.tree.getSelection()),q=W(this.tree.getFocus());super.render(N,O,x);const H=this.getSelection();let K=!1;const U=this.getFocus();let Y=!1;const Q=X=>{const G=X.element;if(G)for(let P=0;P<G.elements.length;P++){const te=F(G.elements[P].element),se=G.elements[G.elements.length-1].element;z.has(te)&&H.indexOf(se)===-1&&(H.push(se),K=!0),q.has(te)&&U.indexOf(se)===-1&&(U.push(se),Y=!0)}X.children.forEach(Q)};Q(this.tree.getCompressedTreeNode(N===this.root?null:N)),K&&this.setSelection(H),Y&&this.setFocus(U)}processChildren(N){return this.filter&&(N=s.Iterable.filter(N,O=>{const x=this.filter.filter(O,1),F=A(x);if(F===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return F===1})),super.processChildren(N)}}e.CompressibleAsyncDataTree=M;function A(R){return typeof R=="boolean"?R?1:0:(0,E.isFilterResult)(R)?(0,E.getVisibleState)(R.visibility):(0,E.getVisibleState)(R)}}),define(oe[367],re([1,0,13,19,3]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toErrorMessage=_;function L(b,p){return p&&(b.stack||b.stacktrace)?E.localize(1851,"{0}: {1}",f(b),y(b.stack)||y(b.stacktrace)):f(b)}function y(b){return Array.isArray(b)?b.join(`
`):b}function f(b){return b.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${b.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof b.code=="string"&&typeof b.errno=="number"&&typeof b.syscall=="string"?E.localize(1852,"A system error occurred ({0})",b.message):b.message||E.localize(1853,"An unknown error occurred. Please consult the log for more details.")}function _(b=null,p=!1){if(!b)return E.localize(1854,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(b)){const n=c.coalesce(b),s=_(n[0],p);return n.length>1?E.localize(1855,"{0} ({1} errors in total)",s,n.length):s}if(k.isString(b))return b;if(b.detail){const n=b.detail;if(n.error)return L(n.error,p);if(n.exception)return L(n.exception,p)}return b.stack?L(b,p):b.message?b.message:E.localize(1856,"An unknown error occurred. Please consult the log for more details.")}}),define(oe[260],re([1,0,3]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserSettingsLabelProvider=e.ElectronAcceleratorLabelProvider=e.AriaLabelProvider=e.UILabelProvider=e.ModifierLabelProvider=void 0;class k{constructor(y,f,_=f){this.modifierLabels=[null],this.modifierLabels[2]=y,this.modifierLabels[1]=f,this.modifierLabels[3]=_}toLabel(y,f,_){if(f.length===0)return null;const b=[];for(let p=0,n=f.length;p<n;p++){const s=f[p],t=_(s);if(t===null)return null;b[p]=E(s,t,this.modifierLabels[y])}return b.join(" ")}}e.ModifierLabelProvider=k,e.UILabelProvider=new k({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:c.localize(1831,"Ctrl"),shiftKey:c.localize(1832,"Shift"),altKey:c.localize(1833,"Alt"),metaKey:c.localize(1834,"Windows"),separator:"+"},{ctrlKey:c.localize(1835,"Ctrl"),shiftKey:c.localize(1836,"Shift"),altKey:c.localize(1837,"Alt"),metaKey:c.localize(1838,"Super"),separator:"+"}),e.AriaLabelProvider=new k({ctrlKey:c.localize(1839,"Control"),shiftKey:c.localize(1840,"Shift"),altKey:c.localize(1841,"Option"),metaKey:c.localize(1842,"Command"),separator:"+"},{ctrlKey:c.localize(1843,"Control"),shiftKey:c.localize(1844,"Shift"),altKey:c.localize(1845,"Alt"),metaKey:c.localize(1846,"Windows"),separator:"+"},{ctrlKey:c.localize(1847,"Control"),shiftKey:c.localize(1848,"Shift"),altKey:c.localize(1849,"Alt"),metaKey:c.localize(1850,"Super"),separator:"+"}),e.ElectronAcceleratorLabelProvider=new k({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),e.UserSettingsLabelProvider=new k({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function E(L,y,f){if(y===null)return"";const _=[];return L.ctrlKey&&_.push(f.ctrlKey),L.shiftKey&&_.push(f.shiftKey),L.altKey&&_.push(f.altKey),L.metaKey&&_.push(f.metaKey),y!==""&&_.push(y),_.join(f.separator)}}),define(oe[208],re([1,0,5,81,43,260,2,54,3,473]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeybindingLabel=e.unthemedKeybindingLabelOptions=void 0;const b=c.$;e.unthemedKeybindingLabelOptions={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class p extends y.Disposable{constructor(s,t,i){super(),this.os=t,this.keyElements=new Set,this.options=i||Object.create(null);const o=this.options.keybindingLabelForeground;this.domNode=c.append(s,b(".monaco-keybinding")),o&&(this.domNode.style.color=o),this.hover=this._register((0,k.getBaseLayerHoverDelegate)().setupManagedHover((0,E.getDefaultHoverDelegate)("mouse"),this.domNode,"")),this.didEverRender=!1,s.appendChild(this.domNode)}get element(){return this.domNode}set(s,t){this.didEverRender&&this.keybinding===s&&p.areSame(this.matches,t)||(this.keybinding=s,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const s=this.keybinding.getChords();s[0]&&this.renderChord(this.domNode,s[0],this.matches?this.matches.firstPart:null);for(let i=1;i<s.length;i++)c.append(this.domNode,b("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,s[i],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){c.clearNode(this.domNode),this.keyElements.clear()}renderChord(s,t,i){const o=L.UILabelProvider.modifierLabels[this.os];t.ctrlKey&&this.renderKey(s,o.ctrlKey,!!i?.ctrlKey,o.separator),t.shiftKey&&this.renderKey(s,o.shiftKey,!!i?.shiftKey,o.separator),t.altKey&&this.renderKey(s,o.altKey,!!i?.altKey,o.separator),t.metaKey&&this.renderKey(s,o.metaKey,!!i?.metaKey,o.separator);const g=t.keyLabel;g&&this.renderKey(s,g,!!i?.keyCode,"")}renderKey(s,t,i,o){c.append(s,this.createKeyElement(t,i?".highlight":"")),o&&c.append(s,b("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(s){c.append(s,this.createKeyElement((0,_.localize)(1025,"Unbound")))}createKeyElement(s,t=""){const i=b("span.monaco-keybinding-key"+t,void 0,s);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(s,t){return s===t||!s&&!t?!0:!!s&&!!t&&(0,f.equals)(s.firstPart,t.firstPart)&&(0,f.equals)(s.chordPart,t.chordPart)}}e.KeybindingLabel=p}),define(oe[657],re([1,0,5,18,55,19,3]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ManagedHoverWidget=void 0;class f{constructor(b,p,n){this.hoverDelegate=b,this.target=p,this.fadeInAnimation=n}async update(b,p,n){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(b===void 0||(0,L.isString)(b)||(0,c.isHTMLElement)(b))s=b;else if(!(0,L.isFunction)(b.markdown))s=b.markdown??b.markdownNotSupportedFallback;else{this._hoverWidget||this.show((0,y.localize)(1014,"Loading..."),p,n),this._cancellationTokenSource=new k.CancellationTokenSource;const t=this._cancellationTokenSource.token;if(s=await b.markdown(t),s===void 0&&(s=b.markdownNotSupportedFallback),this.isDisposed||t.isCancellationRequested)return}this.show(s,p,n)}show(b,p,n){const s=this._hoverWidget;if(this.hasContent(b)){const t={content:b,target:this.target,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s},position:{hoverPosition:2},...n};this._hoverWidget=this.hoverDelegate.showHover(t,p)}s?.dispose()}hasContent(b){return b?(0,E.isMarkdownString)(b)?!!b.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}e.ManagedHoverWidget=f}),define(oe[658],re([1,0,5,41,26,2,16,30,3]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineDiffDeletedCodeMargin=void 0;class b extends L.Disposable{get visibility(){return this._visibility}set visibility(n){this._visibility!==n&&(this._visibility=n,this._diffActions.style.visibility=n?"visible":"hidden")}constructor(n,s,t,i,o,g,u,l,a){super(),this._getViewZoneId=n,this._marginDomNode=s,this._modifiedEditor=t,this._diff=i,this._editor=o,this._viewLineCounts=g,this._originalTextModel=u,this._contextMenuService=l,this._clipboardService=a,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=f.ThemeIcon.asClassName(E.Codicon.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const r=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${r}px`,this._diffActions.style.lineHeight=`${r}px`,this._marginDomNode.appendChild(this._diffActions);let d=0;const m=t.getOption(128)&&!y.isIOS,h=(v,C)=>{this._contextMenuService.showContextMenu({domForShadowRoot:m?t.getDomNode()??void 0:void 0,getAnchor:()=>({x:v,y:C}),getActions:()=>{const w=[],S=i.modified.isEmpty;return w.push(new k.Action("diff.clipboard.copyDeletedContent",S?i.original.length>1?(0,_.localize)(0,"Copy deleted lines"):(0,_.localize)(1,"Copy deleted line"):i.original.length>1?(0,_.localize)(2,"Copy changed lines"):(0,_.localize)(3,"Copy changed line"),void 0,!0,async()=>{const I=this._originalTextModel.getValueInRange(i.original.toExclusiveRange());await this._clipboardService.writeText(I)})),i.original.length>1&&w.push(new k.Action("diff.clipboard.copyDeletedLineContent",S?(0,_.localize)(4,"Copy deleted line ({0})",i.original.startLineNumber+d):(0,_.localize)(5,"Copy changed line ({0})",i.original.startLineNumber+d),void 0,!0,async()=>{let I=this._originalTextModel.getLineContent(i.original.startLineNumber+d);I===""&&(I=this._originalTextModel.getEndOfLineSequence()===0?`
`:`\r
`),await this._clipboardService.writeText(I)})),t.getOption(92)||w.push(new k.Action("diff.inline.revertChange",(0,_.localize)(6,"Revert this change"),void 0,!0,async()=>{this._editor.revert(this._diff)})),w},autoSelectFirstItem:!0})};this._register((0,c.addStandardDisposableListener)(this._diffActions,"mousedown",v=>{if(!v.leftButton)return;const{top:C,height:w}=(0,c.getDomNodePagePosition)(this._diffActions),S=Math.floor(r/3);v.preventDefault(),h(v.posx,C+w+S)})),this._register(t.onMouseMove(v=>{(v.target.type===8||v.target.type===5)&&v.target.detail.viewZoneId===this._getViewZoneId()?(d=this._updateLightBulbPosition(this._marginDomNode,v.event.browserEvent.y,r),this.visibility=!0):this.visibility=!1})),this._register(t.onMouseDown(v=>{v.event.leftButton&&(v.target.type===8||v.target.type===5)&&v.target.detail.viewZoneId===this._getViewZoneId()&&(v.event.preventDefault(),d=this._updateLightBulbPosition(this._marginDomNode,v.event.browserEvent.y,r),h(v.event.posx,v.event.posy+r))}))}_updateLightBulbPosition(n,s,t){const{top:i}=(0,c.getDomNodePagePosition)(n),o=s-i,g=Math.floor(o/t),u=g*t;if(this._diffActions.style.top=`${u}px`,this._viewLineCounts){let l=0;for(let a=0;a<this._viewLineCounts.length;a++)if(l+=this._viewLineCounts[a],g<l)return a}return g}}e.InlineDiffDeletedCodeMargin=b}),define(oe[368],re([1,0,5,87,41,13,67,26,2,21,30,85,69,3]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MovedBlocksLinesFeature=void 0;class i extends _.Disposable{static{this.movedCodeBlockPadding=4}constructor(l,a,r,d,m){super(),this._rootElement=l,this._diffModel=a,this._originalEditorLayoutInfo=r,this._modifiedEditorLayoutInfo=d,this._editors=m,this._originalScrollTop=(0,b.observableFromEvent)(this,this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,b.observableFromEvent)(this,this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._viewZonesChanged=(0,b.observableSignalFromEvent)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,b.observableValue)(this,0),this._modifiedViewZonesChangedSignal=(0,b.observableSignalFromEvent)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,b.observableSignalFromEvent)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,b.derivedWithStore)(this,(S,D)=>{this._element.replaceChildren();const I=this._diffModel.read(S),T=I?.diff.read(S)?.movedTexts;if(!T||T.length===0){this.width.set(0,void 0);return}this._viewZonesChanged.read(S);const M=this._originalEditorLayoutInfo.read(S),A=this._modifiedEditorLayoutInfo.read(S);if(!M||!A){this.width.set(0,void 0);return}this._modifiedViewZonesChangedSignal.read(S),this._originalViewZonesChangedSignal.read(S);const R=T.map(q=>{function H(se,ue){const ge=ue.getTopForLineNumber(se.startLineNumber,!0),pe=ue.getTopForLineNumber(se.endLineNumberExclusive,!0);return(ge+pe)/2}const K=H(q.lineRangeMapping.original,this._editors.original),U=this._originalScrollTop.read(S),Y=H(q.lineRangeMapping.modified,this._editors.modified),Q=this._modifiedScrollTop.read(S),X=K-U,G=Y-Q,P=Math.min(K,Y),te=Math.max(K,Y);return{range:new s.OffsetRange(P,te),from:X,to:G,fromWithoutScroll:K,toWithoutScroll:Y,move:q}});R.sort((0,L.tieBreakComparators)((0,L.compareBy)(q=>q.fromWithoutScroll>q.toWithoutScroll,L.booleanComparator),(0,L.compareBy)(q=>q.fromWithoutScroll>q.toWithoutScroll?q.fromWithoutScroll:-q.toWithoutScroll,L.numberComparator)));const N=o.compute(R.map(q=>q.range)),O=10,x=M.verticalScrollbarWidth,F=(N.getTrackCount()-1)*10+O*2,W=x+F+(A.contentLeft-i.movedCodeBlockPadding);let z=0;for(const q of R){const H=N.getTrack(z),K=x+O+H*10,U=15,Y=15,Q=W,X=A.glyphMarginWidth+A.lineNumbersWidth,G=18,P=document.createElementNS("http://www.w3.org/2000/svg","rect");P.classList.add("arrow-rectangle"),P.setAttribute("x",`${Q-X}`),P.setAttribute("y",`${q.to-G/2}`),P.setAttribute("width",`${X}`),P.setAttribute("height",`${G}`),this._element.appendChild(P);const te=document.createElementNS("http://www.w3.org/2000/svg","g"),se=document.createElementNS("http://www.w3.org/2000/svg","path");se.setAttribute("d",`M 0 ${q.from} L ${K} ${q.from} L ${K} ${q.to} L ${Q-Y} ${q.to}`),se.setAttribute("fill","none"),te.appendChild(se);const ue=document.createElementNS("http://www.w3.org/2000/svg","polygon");ue.classList.add("arrow"),D.add((0,b.autorun)(ge=>{se.classList.toggle("currentMove",q.move===I.activeMovedText.read(ge)),ue.classList.toggle("currentMove",q.move===I.activeMovedText.read(ge))})),ue.setAttribute("points",`${Q-Y},${q.to-U/2} ${Q},${q.to} ${Q-Y},${q.to+U/2}`),te.appendChild(ue),this._element.appendChild(te),z++}this.width.set(F,void 0)}),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,_.toDisposable)(()=>this._element.remove())),this._register((0,b.autorun)(S=>{const D=this._originalEditorLayoutInfo.read(S),I=this._modifiedEditorLayoutInfo.read(S);!D||!I||(this._element.style.left=`${D.width-D.verticalScrollbarWidth}px`,this._element.style.height=`${D.height}px`,this._element.style.width=`${D.verticalScrollbarWidth+D.contentLeft-i.movedCodeBlockPadding+this.width.read(S)}px`)})),this._register((0,b.recomputeInitiallyAndOnChange)(this._state));const h=(0,b.derived)(S=>{const I=this._diffModel.read(S)?.diff.read(S);return I?I.movedTexts.map(T=>({move:T,original:new n.PlaceholderViewZone((0,b.constObservable)(T.lineRangeMapping.original.startLineNumber-1),18),modified:new n.PlaceholderViewZone((0,b.constObservable)(T.lineRangeMapping.modified.startLineNumber-1),18)})):[]});this._register((0,n.applyViewZones)(this._editors.original,h.map(S=>S.map(D=>D.original)))),this._register((0,n.applyViewZones)(this._editors.modified,h.map(S=>S.map(D=>D.modified)))),this._register((0,b.autorunWithStore)((S,D)=>{const I=h.read(S);for(const T of I)D.add(new g(this._editors.original,T.original,T.move,"original",this._diffModel.get())),D.add(new g(this._editors.modified,T.modified,T.move,"modified",this._diffModel.get()))}));const v=(0,b.observableSignalFromEvent)("original.onDidFocusEditorWidget",S=>this._editors.original.onDidFocusEditorWidget(()=>setTimeout(()=>S(void 0),0))),C=(0,b.observableSignalFromEvent)("modified.onDidFocusEditorWidget",S=>this._editors.modified.onDidFocusEditorWidget(()=>setTimeout(()=>S(void 0),0)));let w="modified";this._register((0,b.autorunHandleChanges)({createEmptyChangeSummary:()=>{},handleChange:(S,D)=>(S.didChange(v)&&(w="original"),S.didChange(C)&&(w="modified"),!0)},S=>{v.read(S),C.read(S);const D=this._diffModel.read(S);if(!D)return;const I=D.diff.read(S);let T;if(I&&w==="original"){const M=this._editors.originalCursor.read(S);M&&(T=I.movedTexts.find(A=>A.lineRangeMapping.original.contains(M.lineNumber)))}if(I&&w==="modified"){const M=this._editors.modifiedCursor.read(S);M&&(T=I.movedTexts.find(A=>A.lineRangeMapping.modified.contains(M.lineNumber)))}T!==D.movedTextToCompare.get()&&D.movedTextToCompare.set(void 0,void 0),D.setActiveMovedText(T)}))}}e.MovedBlocksLinesFeature=i;class o{static compute(l){const a=[],r=[];for(const d of l){let m=a.findIndex(h=>!h.intersectsStrict(d));m===-1&&(a.length>=6?m=(0,y.findMaxIdx)(a,(0,L.compareBy)(v=>v.intersectWithRangeLength(d),L.numberComparator)):(m=a.length,a.push(new s.OffsetRangeSet))),a[m].addRange(d),r.push(m)}return new o(a.length,r)}constructor(l,a){this._trackCount=l,this.trackPerLineIdx=a}getTrack(l){return this.trackPerLineIdx[l]}getTrackCount(){return this._trackCount}}class g extends n.ViewZoneOverlayWidget{constructor(l,a,r,d,m){const h=(0,c.h)("div.diff-hidden-lines-widget");super(l,a,h.root),this._editor=l,this._move=r,this._kind=d,this._diffModel=m,this._nodes=(0,c.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,c.h)("div.text-content@textContent"),(0,c.h)("div.action-bar@actionBar")]),h.root.appendChild(this._nodes.root);const v=(0,b.observableFromEvent)(this._editor.onDidLayoutChange,()=>this._editor.getLayoutInfo());this._register((0,n.applyStyle)(this._nodes.root,{paddingRight:v.map(I=>I.verticalScrollbarWidth)}));let C;r.changes.length>0?C=this._kind==="original"?(0,t.localize)(19,"Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,t.localize)(20,"Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):C=this._kind==="original"?(0,t.localize)(21,"Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,t.localize)(22,"Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const w=this._register(new k.ActionBar(this._nodes.actionBar,{highlightToggledItems:!0})),S=new E.Action("",C,"",!1);w.push(S,{icon:!1,label:!0});const D=new E.Action("","Compare",p.ThemeIcon.asClassName(f.Codicon.compareChanges),!0,()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===r?void 0:this._move,void 0)});this._register((0,b.autorun)(I=>{const T=this._diffModel.movedTextToCompare.read(I)===r;D.checked=T})),w.push(D,{icon:!1,label:!0})}}}),define(oe[659],re([1,0,5,111,26,2,21,56,4,104,40,3]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RevertButton=e.RevertButtonsFeature=void 0;const s=[];class t extends L.Disposable{constructor(g,u,l,a){super(),this._editors=g,this._diffModel=u,this._options=l,this._widget=a,this._selectedDiffs=(0,y.derived)(this,r=>{const m=this._diffModel.read(r)?.diff.read(r);if(!m)return s;const h=this._editors.modifiedSelections.read(r);if(h.every(S=>S.isEmpty()))return s;const v=new f.LineRangeSet(h.map(S=>f.LineRange.fromRangeInclusive(S))),w=m.mappings.filter(S=>S.lineRangeMapping.innerChanges&&v.intersects(S.lineRangeMapping.modified)).map(S=>({mapping:S,rangeMappings:S.lineRangeMapping.innerChanges.filter(D=>h.some(I=>_.Range.areIntersecting(D.modifiedRange,I)))}));return w.length===0||w.every(S=>S.rangeMappings.length===0)?s:w}),this._register((0,y.autorunWithStore)((r,d)=>{if(!this._options.shouldRenderOldRevertArrows.read(r))return;const m=this._diffModel.read(r),h=m?.diff.read(r);if(!m||!h||m.movedTextToCompare.read(r))return;const v=[],C=this._selectedDiffs.read(r),w=new Set(C.map(S=>S.mapping));if(C.length>0){const S=this._editors.modifiedSelections.read(r),D=d.add(new i(S[S.length-1].positionLineNumber,this._widget,C.flatMap(I=>I.rangeMappings),!0));this._editors.modified.addGlyphMarginWidget(D),v.push(D)}for(const S of h.mappings)if(!w.has(S)&&!S.lineRangeMapping.modified.isEmpty&&S.lineRangeMapping.innerChanges){const D=d.add(new i(S.lineRangeMapping.modified.startLineNumber,this._widget,S.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(D),v.push(D)}d.add((0,L.toDisposable)(()=>{for(const S of v)this._editors.modified.removeGlyphMarginWidget(S)}))}))}}e.RevertButtonsFeature=t;class i extends L.Disposable{static{this.counter=0}getId(){return this._id}constructor(g,u,l,a){super(),this._lineNumber=g,this._widget=u,this._diffs=l,this._revertSelection=a,this._id=`revertButton${i.counter++}`,this._domNode=(0,c.h)("div.revertButton",{title:this._revertSelection?(0,n.localize)(17,"Revert Selected Changes"):(0,n.localize)(18,"Revert Change")},[(0,k.renderIcon)(E.Codicon.arrowRight)]).root,this._register((0,c.addDisposableListener)(this._domNode,c.EventType.MOUSE_DOWN,r=>{r.button!==2&&(r.stopPropagation(),r.preventDefault())})),this._register((0,c.addDisposableListener)(this._domNode,c.EventType.MOUSE_UP,r=>{r.stopPropagation(),r.preventDefault()})),this._register((0,c.addDisposableListener)(this._domNode,c.EventType.CLICK,r=>{this._diffs instanceof b.LineRangeMapping?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),r.stopPropagation(),r.preventDefault()}))}getDomNode(){return this._domNode}getPosition(){return{lane:p.GlyphMarginLane.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}e.RevertButton=i}),define(oe[369],re([1,0,41]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionRunnerWithContext=void 0;class k extends c.ActionRunner{constructor(L){super(),this._getContext=L}runAction(L,y){const f=this._getContext();return super.runAction(L,f)}}e.ActionRunnerWithContext=k}),define(oe[37],re([1,0,13,54,16,197,169,3]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorOptions=e.editorOptionsRegistry=e.EDITOR_FONT_DEFAULTS=e.unicodeHighlightConfigKeys=e.inUntrustedWorkspace=e.ShowLightbulbIconMode=e.EditorLayoutInfoComputer=e.EditorFontVariations=e.EditorFontLigatures=e.TextEditorCursorStyle=e.ApplyUpdateResult=e.ComputeOptionsMemory=e.ConfigurationChangedEvent=e.MINIMAP_GUTTER_WIDTH=void 0,e.boolean=o,e.clampedInt=u,e.clampedFloat=a,e.stringSet=m,e.filterValidationDecorations=J,e.MINIMAP_GUTTER_WIDTH=8;class _{constructor(fe){this._values=fe}hasChanged(fe){return this._values[fe]}}e.ConfigurationChangedEvent=_;class b{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}e.ComputeOptionsMemory=b;class p{constructor(fe,we,Oe,Be){this.id=fe,this.name=we,this.defaultValue=Oe,this.schema=Be}applyUpdate(fe,we){return s(fe,we)}compute(fe,we,Oe){return Oe}}class n{constructor(fe,we){this.newValue=fe,this.didChange=we}}e.ApplyUpdateResult=n;function s(Ne,fe){if(typeof Ne!="object"||typeof fe!="object"||!Ne||!fe)return new n(fe,Ne!==fe);if(Array.isArray(Ne)||Array.isArray(fe)){const Oe=Array.isArray(Ne)&&Array.isArray(fe)&&c.equals(Ne,fe);return new n(fe,!Oe)}let we=!1;for(const Oe in fe)if(fe.hasOwnProperty(Oe)){const Be=s(Ne[Oe],fe[Oe]);Be.didChange&&(Ne[Oe]=Be.newValue,we=!0)}return new n(Ne,we)}class t{constructor(fe){this.schema=void 0,this.id=fe,this.name="_never_",this.defaultValue=void 0}applyUpdate(fe,we){return s(fe,we)}validate(fe){return this.defaultValue}}class i{constructor(fe,we,Oe,Be){this.id=fe,this.name=we,this.defaultValue=Oe,this.schema=Be}applyUpdate(fe,we){return s(fe,we)}validate(fe){return typeof fe>"u"?this.defaultValue:fe}compute(fe,we,Oe){return Oe}}function o(Ne,fe){return typeof Ne>"u"?fe:Ne==="false"?!1:!!Ne}class g extends i{constructor(fe,we,Oe,Be=void 0){typeof Be<"u"&&(Be.type="boolean",Be.default=Oe),super(fe,we,Oe,Be)}validate(fe){return o(fe,this.defaultValue)}}function u(Ne,fe,we,Oe){if(typeof Ne>"u")return fe;let Be=parseInt(Ne,10);return isNaN(Be)?fe:(Be=Math.max(we,Be),Be=Math.min(Oe,Be),Be|0)}class l extends i{static clampedInt(fe,we,Oe,Be){return u(fe,we,Oe,Be)}constructor(fe,we,Oe,Be,Ue,Ye=void 0){typeof Ye<"u"&&(Ye.type="integer",Ye.default=Oe,Ye.minimum=Be,Ye.maximum=Ue),super(fe,we,Oe,Ye),this.minimum=Be,this.maximum=Ue}validate(fe){return l.clampedInt(fe,this.defaultValue,this.minimum,this.maximum)}}function a(Ne,fe,we,Oe){if(typeof Ne>"u")return fe;const Be=r.float(Ne,fe);return r.clamp(Be,we,Oe)}class r extends i{static clamp(fe,we,Oe){return fe<we?we:fe>Oe?Oe:fe}static float(fe,we){if(typeof fe=="number")return fe;if(typeof fe>"u")return we;const Oe=parseFloat(fe);return isNaN(Oe)?we:Oe}constructor(fe,we,Oe,Be,Ue){typeof Ue<"u"&&(Ue.type="number",Ue.default=Oe),super(fe,we,Oe,Ue),this.validationFn=Be}validate(fe){return this.validationFn(r.float(fe,this.defaultValue))}}class d extends i{static string(fe,we){return typeof fe!="string"?we:fe}constructor(fe,we,Oe,Be=void 0){typeof Be<"u"&&(Be.type="string",Be.default=Oe),super(fe,we,Oe,Be)}validate(fe){return d.string(fe,this.defaultValue)}}function m(Ne,fe,we,Oe){return typeof Ne!="string"?fe:Oe&&Ne in Oe?Oe[Ne]:we.indexOf(Ne)===-1?fe:Ne}class h extends i{constructor(fe,we,Oe,Be,Ue=void 0){typeof Ue<"u"&&(Ue.type="string",Ue.enum=Be,Ue.default=Oe),super(fe,we,Oe,Ue),this._allowedValues=Be}validate(fe){return m(fe,this.defaultValue,this._allowedValues)}}class v extends p{constructor(fe,we,Oe,Be,Ue,Ye,Qe=void 0){typeof Qe<"u"&&(Qe.type="string",Qe.enum=Ue,Qe.default=Be),super(fe,we,Oe,Qe),this._allowedValues=Ue,this._convert=Ye}validate(fe){return typeof fe!="string"?this.defaultValue:this._allowedValues.indexOf(fe)===-1?this.defaultValue:this._convert(fe)}}function C(Ne){switch(Ne){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class w extends p{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[f.localize(1315,"Use platform APIs to detect when a Screen Reader is attached."),f.localize(1316,"Optimize for usage with a Screen Reader."),f.localize(1317,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:f.localize(1318,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(fe){switch(fe){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(fe,we,Oe){return Oe===0?fe.accessibilitySupport:Oe}}class S extends p{constructor(){const fe={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",fe,{"editor.comments.insertSpace":{type:"boolean",default:fe.insertSpace,description:f.localize(1319,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:fe.ignoreEmptyLines,description:f.localize(1320,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{insertSpace:o(we.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:o(we.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function D(Ne){switch(Ne){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var I;(function(Ne){Ne[Ne.Line=1]="Line",Ne[Ne.Block=2]="Block",Ne[Ne.Underline=3]="Underline",Ne[Ne.LineThin=4]="LineThin",Ne[Ne.BlockOutline=5]="BlockOutline",Ne[Ne.UnderlineThin=6]="UnderlineThin"})(I||(e.TextEditorCursorStyle=I={}));function T(Ne){switch(Ne){case"line":return I.Line;case"block":return I.Block;case"underline":return I.Underline;case"line-thin":return I.LineThin;case"block-outline":return I.BlockOutline;case"underline-thin":return I.UnderlineThin}}class M extends t{constructor(){super(143)}compute(fe,we,Oe){const Be=["monaco-editor"];return we.get(39)&&Be.push(we.get(39)),fe.extraEditorClassName&&Be.push(fe.extraEditorClassName),we.get(74)==="default"?Be.push("mouse-default"):we.get(74)==="copy"&&Be.push("mouse-copy"),we.get(112)&&Be.push("showUnused"),we.get(141)&&Be.push("showDeprecated"),Be.join(" ")}}class A extends g{constructor(){super(37,"emptySelectionClipboard",!0,{description:f.localize(1321,"Controls whether copying without a selection copies the current line.")})}compute(fe,we,Oe){return Oe&&fe.emptySelectionClipboard}}class R extends p{constructor(){const fe={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",fe,{"editor.find.cursorMoveOnType":{type:"boolean",default:fe.cursorMoveOnType,description:f.localize(1322,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:fe.seedSearchStringFromSelection,enumDescriptions:[f.localize(1323,"Never seed search string from the editor selection."),f.localize(1324,"Always seed search string from the editor selection, including word at cursor position."),f.localize(1325,"Only seed search string from the editor selection.")],description:f.localize(1326,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:fe.autoFindInSelection,enumDescriptions:[f.localize(1327,"Never turn on Find in Selection automatically (default)."),f.localize(1328,"Always turn on Find in Selection automatically."),f.localize(1329,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:f.localize(1330,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:fe.globalFindClipboard,description:f.localize(1331,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:E.isMacintosh},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:fe.addExtraSpaceOnTop,description:f.localize(1332,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:fe.loop,description:f.localize(1333,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{cursorMoveOnType:o(we.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof fe.seedSearchStringFromSelection=="boolean"?fe.seedSearchStringFromSelection?"always":"never":m(we.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof fe.autoFindInSelection=="boolean"?fe.autoFindInSelection?"always":"never":m(we.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:o(we.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:o(we.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:o(we.loop,this.defaultValue.loop)}}}class N extends p{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(51,"fontLigatures",N.OFF,{anyOf:[{type:"boolean",description:f.localize(1334,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:f.localize(1335,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:f.localize(1336,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(fe){return typeof fe>"u"?this.defaultValue:typeof fe=="string"?fe==="false"||fe.length===0?N.OFF:fe==="true"?N.ON:fe:fe?N.ON:N.OFF}}e.EditorFontLigatures=N;class O extends p{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(54,"fontVariations",O.OFF,{anyOf:[{type:"boolean",description:f.localize(1337,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:f.localize(1338,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:f.localize(1339,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(fe){return typeof fe>"u"?this.defaultValue:typeof fe=="string"?fe==="false"?O.OFF:fe==="true"?O.TRANSLATE:fe:fe?O.TRANSLATE:O.OFF}compute(fe,we,Oe){return fe.fontInfo.fontVariationSettings}}e.EditorFontVariations=O;class x extends t{constructor(){super(50)}compute(fe,we,Oe){return fe.fontInfo}}class F extends i{constructor(){super(52,"fontSize",e.EDITOR_FONT_DEFAULTS.fontSize,{type:"number",minimum:6,maximum:100,default:e.EDITOR_FONT_DEFAULTS.fontSize,description:f.localize(1340,"Controls the font size in pixels.")})}validate(fe){const we=r.float(fe,this.defaultValue);return we===0?e.EDITOR_FONT_DEFAULTS.fontSize:r.clamp(we,6,100)}compute(fe,we,Oe){return fe.fontInfo.fontSize}}class W extends p{static{this.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.MINIMUM_VALUE=1}static{this.MAXIMUM_VALUE=1e3}constructor(){super(53,"fontWeight",e.EDITOR_FONT_DEFAULTS.fontWeight,{anyOf:[{type:"number",minimum:W.MINIMUM_VALUE,maximum:W.MAXIMUM_VALUE,errorMessage:f.localize(1341,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:W.SUGGESTION_VALUES}],default:e.EDITOR_FONT_DEFAULTS.fontWeight,description:f.localize(1342,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(fe){return fe==="normal"||fe==="bold"?fe:String(l.clampedInt(fe,e.EDITOR_FONT_DEFAULTS.fontWeight,W.MINIMUM_VALUE,W.MAXIMUM_VALUE))}}class z extends p{constructor(){const fe={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},we={type:"string",enum:["peek","gotoAndPeek","goto"],default:fe.multiple,enumDescriptions:[f.localize(1343,"Show Peek view of the results (default)"),f.localize(1344,"Go to the primary result and show a Peek view"),f.localize(1345,"Go to the primary result and enable Peek-less navigation to others")]},Oe=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",fe,{"editor.gotoLocation.multiple":{deprecationMessage:f.localize(1346,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:f.localize(1347,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...we},"editor.gotoLocation.multipleTypeDefinitions":{description:f.localize(1348,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...we},"editor.gotoLocation.multipleDeclarations":{description:f.localize(1349,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...we},"editor.gotoLocation.multipleImplementations":{description:f.localize(1350,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...we},"editor.gotoLocation.multipleReferences":{description:f.localize(1351,"Controls the behavior the 'Go to References'-command when multiple target locations exist."),...we},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:fe.alternativeDefinitionCommand,enum:Oe,description:f.localize(1352,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:fe.alternativeTypeDefinitionCommand,enum:Oe,description:f.localize(1353,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:fe.alternativeDeclarationCommand,enum:Oe,description:f.localize(1354,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:fe.alternativeImplementationCommand,enum:Oe,description:f.localize(1355,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:fe.alternativeReferenceCommand,enum:Oe,description:f.localize(1356,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{multiple:m(we.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:we.multipleDefinitions??m(we.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:we.multipleTypeDefinitions??m(we.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:we.multipleDeclarations??m(we.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:we.multipleImplementations??m(we.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:we.multipleReferences??m(we.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:we.multipleTests??m(we.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:d.string(we.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:d.string(we.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:d.string(we.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:d.string(we.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:d.string(we.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:d.string(we.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class q extends p{constructor(){const fe={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",fe,{"editor.hover.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1357,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:fe.delay,minimum:0,maximum:1e4,description:f.localize(1358,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:fe.sticky,description:f.localize(1359,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:fe.hidingDelay,description:f.localize(1360,"Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:fe.above,description:f.localize(1361,"Prefer showing hovers above the line, if there's space.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),delay:l.clampedInt(we.delay,this.defaultValue.delay,0,1e4),sticky:o(we.sticky,this.defaultValue.sticky),hidingDelay:l.clampedInt(we.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:o(we.above,this.defaultValue.above)}}}class H extends t{constructor(){super(146)}compute(fe,we,Oe){return H.computeLayout(we,{memory:fe.memory,outerWidth:fe.outerWidth,outerHeight:fe.outerHeight,isDominatedByLongLines:fe.isDominatedByLongLines,lineHeight:fe.fontInfo.lineHeight,viewLineCount:fe.viewLineCount,lineNumbersDigitCount:fe.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:fe.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:fe.fontInfo.maxDigitWidth,pixelRatio:fe.pixelRatio,glyphMarginDecorationLaneCount:fe.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(fe){const we=fe.height/fe.lineHeight,Oe=Math.floor(fe.paddingTop/fe.lineHeight);let Be=Math.floor(fe.paddingBottom/fe.lineHeight);fe.scrollBeyondLastLine&&(Be=Math.max(Be,we-1));const Ue=(Oe+fe.viewLineCount+Be)/(fe.pixelRatio*fe.height),Ye=Math.floor(fe.viewLineCount/Ue);return{typicalViewportLineCount:we,extraLinesBeforeFirstLine:Oe,extraLinesBeyondLastLine:Be,desiredRatio:Ue,minimapLineCount:Ye}}static _computeMinimapLayout(fe,we){const Oe=fe.outerWidth,Be=fe.outerHeight,Ue=fe.pixelRatio;if(!fe.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(Ue*Be),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:Be};const Ye=we.stableMinimapLayoutInput,Qe=Ye&&fe.outerHeight===Ye.outerHeight&&fe.lineHeight===Ye.lineHeight&&fe.typicalHalfwidthCharacterWidth===Ye.typicalHalfwidthCharacterWidth&&fe.pixelRatio===Ye.pixelRatio&&fe.scrollBeyondLastLine===Ye.scrollBeyondLastLine&&fe.paddingTop===Ye.paddingTop&&fe.paddingBottom===Ye.paddingBottom&&fe.minimap.enabled===Ye.minimap.enabled&&fe.minimap.side===Ye.minimap.side&&fe.minimap.size===Ye.minimap.size&&fe.minimap.showSlider===Ye.minimap.showSlider&&fe.minimap.renderCharacters===Ye.minimap.renderCharacters&&fe.minimap.maxColumn===Ye.minimap.maxColumn&&fe.minimap.scale===Ye.minimap.scale&&fe.verticalScrollbarWidth===Ye.verticalScrollbarWidth&&fe.isViewportWrapping===Ye.isViewportWrapping,tt=fe.lineHeight,it=fe.typicalHalfwidthCharacterWidth,ut=fe.scrollBeyondLastLine,ct=fe.minimap.renderCharacters;let nt=Ue>=2?Math.round(fe.minimap.scale*2):fe.minimap.scale;const st=fe.minimap.maxColumn,dt=fe.minimap.size,St=fe.minimap.side,_t=fe.verticalScrollbarWidth,ht=fe.viewLineCount,wt=fe.remainingWidth,qe=fe.isViewportWrapping,Ce=ct?2:3;let _e=Math.floor(Ue*Be);const Ie=_e/Ue;let Ae=!1,We=!1,Ke=Ce*nt,He=nt/Ue,$e=1;if(dt==="fill"||dt==="fit"){const{typicalViewportLineCount:Je,extraLinesBeforeFirstLine:rt,extraLinesBeyondLastLine:et,desiredRatio:ot,minimapLineCount:at}=H.computeContainedMinimapLineCount({viewLineCount:ht,scrollBeyondLastLine:ut,paddingTop:fe.paddingTop,paddingBottom:fe.paddingBottom,height:Be,lineHeight:tt,pixelRatio:Ue});if(ht/at>1)Ae=!0,We=!0,nt=1,Ke=1,He=nt/Ue;else{let pt=!1,lt=nt+1;if(dt==="fit"){const ft=Math.ceil((rt+ht+et)*Ke);qe&&Qe&&wt<=we.stableFitRemainingWidth?(pt=!0,lt=we.stableFitMaxMinimapScale):pt=ft>_e}if(dt==="fill"||pt){Ae=!0;const ft=nt;Ke=Math.min(tt*Ue,Math.max(1,Math.floor(1/ot))),qe&&Qe&&wt<=we.stableFitRemainingWidth&&(lt=we.stableFitMaxMinimapScale),nt=Math.min(lt,Math.max(1,Math.floor(Ke/Ce))),nt>ft&&($e=Math.min(2,nt/ft)),He=nt/Ue/$e,_e=Math.ceil(Math.max(Je,rt+ht+et)*Ke),qe?(we.stableMinimapLayoutInput=fe,we.stableFitRemainingWidth=wt,we.stableFitMaxMinimapScale=nt):(we.stableMinimapLayoutInput=null,we.stableFitRemainingWidth=0)}}}const Ve=Math.floor(st*He),Me=Math.min(Ve,Math.max(0,Math.floor((wt-_t-2)*He/(it+He)))+e.MINIMAP_GUTTER_WIDTH);let xe=Math.floor(Ue*Me);const ze=xe/Ue;xe=Math.floor(xe*$e);const Ge=ct?1:2,Xe=St==="left"?0:Oe-Me-_t;return{renderMinimap:Ge,minimapLeft:Xe,minimapWidth:Me,minimapHeightIsEditorHeight:Ae,minimapIsSampling:We,minimapScale:nt,minimapLineHeight:Ke,minimapCanvasInnerWidth:xe,minimapCanvasInnerHeight:_e,minimapCanvasOuterWidth:ze,minimapCanvasOuterHeight:Ie}}static computeLayout(fe,we){const Oe=we.outerWidth|0,Be=we.outerHeight|0,Ue=we.lineHeight|0,Ye=we.lineNumbersDigitCount|0,Qe=we.typicalHalfwidthCharacterWidth,tt=we.maxDigitWidth,it=we.pixelRatio,ut=we.viewLineCount,ct=fe.get(138),nt=ct==="inherit"?fe.get(137):ct,st=nt==="inherit"?fe.get(133):nt,dt=fe.get(136),St=we.isDominatedByLongLines,_t=fe.get(57),ht=fe.get(68).renderType!==0,wt=fe.get(69),qe=fe.get(106),Ce=fe.get(84),_e=fe.get(73),Ie=fe.get(104),Ae=Ie.verticalScrollbarSize,We=Ie.verticalHasArrows,Ke=Ie.arrowSize,He=Ie.horizontalScrollbarSize,$e=fe.get(43),Ve=fe.get(111)!=="never";let Me=fe.get(66);$e&&Ve&&(Me+=16);let xe=0;if(ht){const Et=Math.max(Ye,wt);xe=Math.round(Et*tt)}let ze=0;_t&&(ze=Ue*we.glyphMarginDecorationLaneCount);let Ge=0,Xe=Ge+ze,Je=Xe+xe,rt=Je+Me;const et=Oe-ze-xe-Me;let ot=!1,at=!1,gt=-1;nt==="inherit"&&St?(ot=!0,at=!0):st==="on"||st==="bounded"?at=!0:st==="wordWrapColumn"&&(gt=dt);const pt=H._computeMinimapLayout({outerWidth:Oe,outerHeight:Be,lineHeight:Ue,typicalHalfwidthCharacterWidth:Qe,pixelRatio:it,scrollBeyondLastLine:qe,paddingTop:Ce.top,paddingBottom:Ce.bottom,minimap:_e,verticalScrollbarWidth:Ae,viewLineCount:ut,remainingWidth:et,isViewportWrapping:at},we.memory||new b);pt.renderMinimap!==0&&pt.minimapLeft===0&&(Ge+=pt.minimapWidth,Xe+=pt.minimapWidth,Je+=pt.minimapWidth,rt+=pt.minimapWidth);const lt=et-pt.minimapWidth,ft=Math.max(1,Math.floor((lt-Ae-2)/Qe)),Dt=We?Ke:0;return at&&(gt=Math.max(1,ft),st==="bounded"&&(gt=Math.min(gt,dt))),{width:Oe,height:Be,glyphMarginLeft:Ge,glyphMarginWidth:ze,glyphMarginDecorationLaneCount:we.glyphMarginDecorationLaneCount,lineNumbersLeft:Xe,lineNumbersWidth:xe,decorationsLeft:Je,decorationsWidth:Me,contentLeft:rt,contentWidth:lt,minimap:pt,viewportColumn:ft,isWordWrapMinified:ot,isViewportWrapping:at,wrappingColumn:gt,verticalScrollbarWidth:Ae,horizontalScrollbarHeight:He,overviewRuler:{top:Dt,width:Ae,height:Be-2*Dt,right:0}}}}e.EditorLayoutInfoComputer=H;class K extends p{constructor(){super(140,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[f.localize(1362,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),f.localize(1363,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:f.localize(1364,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(fe){return m(fe,"simple",["simple","advanced"])}compute(fe,we,Oe){return we.get(2)===2?"advanced":Oe}}var U;(function(Ne){Ne.Off="off",Ne.OnCode="onCode",Ne.On="on"})(U||(e.ShowLightbulbIconMode=U={}));class Y extends p{constructor(){const fe={enabled:U.On};super(65,"lightbulb",fe,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[U.Off,U.OnCode,U.On],default:fe.enabled,enumDescriptions:[f.localize(1365,"Disable the code action menu."),f.localize(1366,"Show the code action menu when the cursor is on lines with code."),f.localize(1367,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:f.localize(1368,"Enables the Code Action lightbulb in the editor.")}})}validate(fe){return!fe||typeof fe!="object"?this.defaultValue:{enabled:m(fe.enabled,this.defaultValue.enabled,[U.Off,U.OnCode,U.On])}}}class Q extends p{constructor(){const fe={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(116,"stickyScroll",fe,{"editor.stickyScroll.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1369,"Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:fe.maxLineCount,minimum:1,maximum:20,description:f.localize(1370,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:fe.defaultModel,description:f.localize(1371,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:fe.scrollWithEditor,description:f.localize(1372,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),maxLineCount:l.clampedInt(we.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:m(we.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:o(we.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class X extends p{constructor(){const fe={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(142,"inlayHints",fe,{"editor.inlayHints.enabled":{type:"string",default:fe.enabled,description:f.localize(1373,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[f.localize(1374,"Inlay hints are enabled"),f.localize(1375,"Inlay hints are showing by default and hide when holding {0}",E.isMacintosh?"Ctrl+Option":"Ctrl+Alt"),f.localize(1376,"Inlay hints are hidden by default and show when holding {0}",E.isMacintosh?"Ctrl+Option":"Ctrl+Alt"),f.localize(1377,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:fe.fontSize,markdownDescription:f.localize(1378,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:fe.fontFamily,markdownDescription:f.localize(1379,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:fe.padding,description:f.localize(1380,"Enables the padding around the inlay hints in the editor.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return typeof we.enabled=="boolean"&&(we.enabled=we.enabled?"on":"off"),{enabled:m(we.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:l.clampedInt(we.fontSize,this.defaultValue.fontSize,0,100),fontFamily:d.string(we.fontFamily,this.defaultValue.fontFamily),padding:o(we.padding,this.defaultValue.padding)}}}class G extends p{constructor(){super(66,"lineDecorationsWidth",10)}validate(fe){return typeof fe=="string"&&/^\d+(\.\d+)?ch$/.test(fe)?-parseFloat(fe.substring(0,fe.length-2)):l.clampedInt(fe,this.defaultValue,0,1e3)}compute(fe,we,Oe){return Oe<0?l.clampedInt(-Oe*fe.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):Oe}}class P extends r{constructor(){super(67,"lineHeight",e.EDITOR_FONT_DEFAULTS.lineHeight,fe=>r.clamp(fe,0,150),{markdownDescription:f.localize(1381,`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(fe,we,Oe){return fe.fontInfo.lineHeight}}class te extends p{constructor(){const fe={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(73,"minimap",fe,{"editor.minimap.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1382,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:fe.autohide,description:f.localize(1383,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[f.localize(1384,"The minimap has the same size as the editor contents (and might scroll)."),f.localize(1385,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),f.localize(1386,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:fe.size,description:f.localize(1387,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:fe.side,description:f.localize(1388,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:fe.showSlider,description:f.localize(1389,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:fe.scale,minimum:1,maximum:3,enum:[1,2,3],description:f.localize(1390,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:fe.renderCharacters,description:f.localize(1391,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:fe.maxColumn,description:f.localize(1392,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:fe.showRegionSectionHeaders,description:f.localize(1393,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:fe.showMarkSectionHeaders,description:f.localize(1394,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:fe.sectionHeaderFontSize,description:f.localize(1395,"Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:fe.sectionHeaderLetterSpacing,description:f.localize(1396,"Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),autohide:o(we.autohide,this.defaultValue.autohide),size:m(we.size,this.defaultValue.size,["proportional","fill","fit"]),side:m(we.side,this.defaultValue.side,["right","left"]),showSlider:m(we.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:o(we.renderCharacters,this.defaultValue.renderCharacters),scale:l.clampedInt(we.scale,1,1,3),maxColumn:l.clampedInt(we.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:o(we.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:o(we.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:r.clamp(we.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:r.clamp(we.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function se(Ne){return Ne==="ctrlCmd"?E.isMacintosh?"metaKey":"ctrlKey":"altKey"}class ue extends p{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:f.localize(1397,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:f.localize(1398,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{top:l.clampedInt(we.top,0,0,1e3),bottom:l.clampedInt(we.bottom,0,0,1e3)}}}class ge extends p{constructor(){const fe={enabled:!0,cycle:!0};super(86,"parameterHints",fe,{"editor.parameterHints.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1399,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:fe.cycle,description:f.localize(1400,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),cycle:o(we.cycle,this.defaultValue.cycle)}}}class pe extends t{constructor(){super(144)}compute(fe,we,Oe){return fe.pixelRatio}}class ce extends p{constructor(){super(88,"placeholder",void 0)}validate(fe){return typeof fe>"u"?this.defaultValue:typeof fe=="string"?fe:this.defaultValue}}class ie extends p{constructor(){const fe={other:"on",comments:"off",strings:"off"},we=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[f.localize(1401,"Quick suggestions show inside the suggest widget"),f.localize(1402,"Quick suggestions show as ghost text"),f.localize(1403,"Quick suggestions are disabled")]}];super(90,"quickSuggestions",fe,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:we,default:fe.strings,description:f.localize(1404,"Enable quick suggestions inside strings.")},comments:{anyOf:we,default:fe.comments,description:f.localize(1405,"Enable quick suggestions inside comments.")},other:{anyOf:we,default:fe.other,description:f.localize(1406,"Enable quick suggestions outside of strings and comments.")}},default:fe,markdownDescription:f.localize(1407,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=fe}validate(fe){if(typeof fe=="boolean"){const it=fe?"on":"off";return{comments:it,strings:it,other:it}}if(!fe||typeof fe!="object")return this.defaultValue;const{other:we,comments:Oe,strings:Be}=fe,Ue=["on","inline","off"];let Ye,Qe,tt;return typeof we=="boolean"?Ye=we?"on":"off":Ye=m(we,this.defaultValue.other,Ue),typeof Oe=="boolean"?Qe=Oe?"on":"off":Qe=m(Oe,this.defaultValue.comments,Ue),typeof Be=="boolean"?tt=Be?"on":"off":tt=m(Be,this.defaultValue.strings,Ue),{other:Ye,comments:Qe,strings:tt}}}class ne extends p{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[f.localize(1408,"Line numbers are not rendered."),f.localize(1409,"Line numbers are rendered as absolute number."),f.localize(1410,"Line numbers are rendered as distance in lines to cursor position."),f.localize(1411,"Line numbers are rendered every 10 lines.")],default:"on",description:f.localize(1412,"Controls the display of line numbers.")})}validate(fe){let we=this.defaultValue.renderType,Oe=this.defaultValue.renderFn;return typeof fe<"u"&&(typeof fe=="function"?(we=4,Oe=fe):fe==="interval"?we=3:fe==="relative"?we=2:fe==="on"?we=1:we=0),{renderType:we,renderFn:Oe}}}function J(Ne){const fe=Ne.get(99);return fe==="editable"?Ne.get(92):fe!=="on"}class B extends p{constructor(){const fe=[],we={type:"number",description:f.localize(1413,"Number of monospace characters at which this editor ruler will render.")};super(103,"rulers",fe,{type:"array",items:{anyOf:[we,{type:["object"],properties:{column:we,color:{type:"string",description:f.localize(1414,"Color of this editor ruler."),format:"color-hex"}}}]},default:fe,description:f.localize(1415,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(fe){if(Array.isArray(fe)){const we=[];for(const Oe of fe)if(typeof Oe=="number")we.push({column:l.clampedInt(Oe,0,0,1e4),color:null});else if(Oe&&typeof Oe=="object"){const Be=Oe;we.push({column:l.clampedInt(Be.column,0,0,1e4),color:Be.color})}return we.sort((Oe,Be)=>Oe.column-Be.column),we}return this.defaultValue}}class j extends p{constructor(){super(93,"readOnlyMessage",void 0)}validate(fe){return!fe||typeof fe!="object"?this.defaultValue:fe}}function V(Ne,fe){if(typeof Ne!="string")return fe;switch(Ne){case"hidden":return 2;case"visible":return 3;default:return 1}}class $ extends p{constructor(){const fe={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(104,"scrollbar",fe,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[f.localize(1416,"The vertical scrollbar will be visible only when necessary."),f.localize(1417,"The vertical scrollbar will always be visible."),f.localize(1418,"The vertical scrollbar will always be hidden.")],default:"auto",description:f.localize(1419,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[f.localize(1420,"The horizontal scrollbar will be visible only when necessary."),f.localize(1421,"The horizontal scrollbar will always be visible."),f.localize(1422,"The horizontal scrollbar will always be hidden.")],default:"auto",description:f.localize(1423,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:fe.verticalScrollbarSize,description:f.localize(1424,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:fe.horizontalScrollbarSize,description:f.localize(1425,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:fe.scrollByPage,description:f.localize(1426,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:fe.ignoreHorizontalScrollbarInContentHeight,description:f.localize(1427,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe,Oe=l.clampedInt(we.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),Be=l.clampedInt(we.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:l.clampedInt(we.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:V(we.vertical,this.defaultValue.vertical),horizontal:V(we.horizontal,this.defaultValue.horizontal),useShadows:o(we.useShadows,this.defaultValue.useShadows),verticalHasArrows:o(we.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:o(we.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:o(we.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:o(we.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:Oe,horizontalSliderSize:l.clampedInt(we.horizontalSliderSize,Oe,0,1e3),verticalScrollbarSize:Be,verticalSliderSize:l.clampedInt(we.verticalSliderSize,Be,0,1e3),scrollByPage:o(we.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:o(we.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}e.inUntrustedWorkspace="inUntrustedWorkspace",e.unicodeHighlightConfigKeys={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class Z extends p{constructor(){const fe={nonBasicASCII:e.inUntrustedWorkspace,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:e.inUntrustedWorkspace,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(126,"unicodeHighlight",fe,{[e.unicodeHighlightConfigKeys.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,e.inUntrustedWorkspace],default:fe.nonBasicASCII,description:f.localize(1428,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[e.unicodeHighlightConfigKeys.invisibleCharacters]:{restricted:!0,type:"boolean",default:fe.invisibleCharacters,description:f.localize(1429,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[e.unicodeHighlightConfigKeys.ambiguousCharacters]:{restricted:!0,type:"boolean",default:fe.ambiguousCharacters,description:f.localize(1430,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[e.unicodeHighlightConfigKeys.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,e.inUntrustedWorkspace],default:fe.includeComments,description:f.localize(1431,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[e.unicodeHighlightConfigKeys.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,e.inUntrustedWorkspace],default:fe.includeStrings,description:f.localize(1432,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[e.unicodeHighlightConfigKeys.allowedCharacters]:{restricted:!0,type:"object",default:fe.allowedCharacters,description:f.localize(1433,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[e.unicodeHighlightConfigKeys.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:fe.allowedLocales,description:f.localize(1434,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(fe,we){let Oe=!1;we.allowedCharacters&&fe&&(k.equals(fe.allowedCharacters,we.allowedCharacters)||(fe={...fe,allowedCharacters:we.allowedCharacters},Oe=!0)),we.allowedLocales&&fe&&(k.equals(fe.allowedLocales,we.allowedLocales)||(fe={...fe,allowedLocales:we.allowedLocales},Oe=!0));const Be=super.applyUpdate(fe,we);return Oe?new n(Be.newValue,!0):Be}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{nonBasicASCII:be(we.nonBasicASCII,e.inUntrustedWorkspace,[!0,!1,e.inUntrustedWorkspace]),invisibleCharacters:o(we.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:o(we.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:be(we.includeComments,e.inUntrustedWorkspace,[!0,!1,e.inUntrustedWorkspace]),includeStrings:be(we.includeStrings,e.inUntrustedWorkspace,[!0,!1,e.inUntrustedWorkspace]),allowedCharacters:this.validateBooleanMap(fe.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(fe.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(fe,we){if(typeof fe!="object"||!fe)return we;const Oe={};for(const[Be,Ue]of Object.entries(fe))Ue===!0&&(Oe[Be]=!0);return Oe}}class ee extends p{constructor(){const fe={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",fe,{"editor.inlineSuggest.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1435,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:fe.showToolbar,enum:["always","onHover","never"],enumDescriptions:[f.localize(1436,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),f.localize(1437,"Show the inline suggestion toolbar when hovering over an inline suggestion."),f.localize(1438,"Never show the inline suggestion toolbar.")],description:f.localize(1439,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:fe.suppressSuggestions,description:f.localize(1440,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:fe.fontFamily,description:f.localize(1441,"Controls the font family of the inline suggestions.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),mode:m(we.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:m(we.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:o(we.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:o(we.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:d.string(we.fontFamily,this.defaultValue.fontFamily)}}}class le extends p{constructor(){const fe={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(63,"experimentalInlineEdit",fe,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:fe.enabled,description:f.localize(1442,"Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:fe.showToolbar,enum:["always","onHover","never"],enumDescriptions:[f.localize(1443,"Show the inline edit toolbar whenever an inline suggestion is shown."),f.localize(1444,"Show the inline edit toolbar when hovering over an inline suggestion."),f.localize(1445,"Never show the inline edit toolbar.")],description:f.localize(1446,"Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:fe.fontFamily,description:f.localize(1447,"Controls the font family of the inline edit.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),showToolbar:m(we.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:d.string(we.fontFamily,this.defaultValue.fontFamily),keepOnBlur:o(we.keepOnBlur,this.defaultValue.keepOnBlur)}}}class de extends p{constructor(){const fe={enabled:L.EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:L.EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",fe,{"editor.bracketPairColorization.enabled":{type:"boolean",default:fe.enabled,markdownDescription:f.localize(1448,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:fe.independentColorPoolPerBracketType,description:f.localize(1449,"Controls whether each bracket type has its own independent color pool.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:o(we.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class me extends p{constructor(){const fe={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",fe,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[f.localize(1450,"Enables bracket pair guides."),f.localize(1451,"Enables bracket pair guides only for the active bracket pair."),f.localize(1452,"Disables bracket pair guides.")],default:fe.bracketPairs,description:f.localize(1453,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[f.localize(1454,"Enables horizontal guides as addition to vertical bracket pair guides."),f.localize(1455,"Enables horizontal guides only for the active bracket pair."),f.localize(1456,"Disables horizontal bracket pair guides.")],default:fe.bracketPairsHorizontal,description:f.localize(1457,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:fe.highlightActiveBracketPair,description:f.localize(1458,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:fe.indentation,description:f.localize(1459,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[f.localize(1460,"Highlights the active indent guide."),f.localize(1461,"Highlights the active indent guide even if bracket guides are highlighted."),f.localize(1462,"Do not highlight the active indent guide.")],default:fe.highlightActiveIndentation,description:f.localize(1463,"Controls whether the editor should highlight the active indent guide.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{bracketPairs:be(we.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:be(we.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:o(we.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:o(we.indentation,this.defaultValue.indentation),highlightActiveIndentation:be(we.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function be(Ne,fe,we){const Oe=we.indexOf(Ne);return Oe===-1?fe:we[Oe]}class ve extends p{constructor(){const fe={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(119,"suggest",fe,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[f.localize(1464,"Insert suggestion without overwriting text right of the cursor."),f.localize(1465,"Insert suggestion and overwrite text right of the cursor.")],default:fe.insertMode,description:f.localize(1466,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:fe.filterGraceful,description:f.localize(1467,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:fe.localityBonus,description:f.localize(1468,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:fe.shareSuggestSelections,markdownDescription:f.localize(1469,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[f.localize(1470,"Always select a suggestion when automatically triggering IntelliSense."),f.localize(1471,"Never select a suggestion when automatically triggering IntelliSense."),f.localize(1472,"Select a suggestion only when triggering IntelliSense from a trigger character."),f.localize(1473,"Select a suggestion only when triggering IntelliSense as you type.")],default:fe.selectionMode,markdownDescription:f.localize(1474,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:fe.snippetsPreventQuickSuggestions,description:f.localize(1475,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:fe.showIcons,description:f.localize(1476,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:fe.showStatusBar,description:f.localize(1477,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:fe.preview,description:f.localize(1478,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:fe.showInlineDetails,description:f.localize(1479,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:f.localize(1480,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:f.localize(1481,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:f.localize(1482,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:f.localize(1483,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:f.localize(1484,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:f.localize(1485,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:f.localize(1486,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:f.localize(1487,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:f.localize(1488,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:f.localize(1489,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:f.localize(1490,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:f.localize(1491,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:f.localize(1492,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:f.localize(1493,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:f.localize(1494,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:f.localize(1495,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:f.localize(1496,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:f.localize(1497,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:f.localize(1498,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:f.localize(1499,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:f.localize(1500,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:f.localize(1501,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:f.localize(1502,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:f.localize(1503,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:f.localize(1504,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:f.localize(1505,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:f.localize(1506,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:f.localize(1507,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:f.localize(1508,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:f.localize(1509,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:f.localize(1510,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:f.localize(1511,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{insertMode:m(we.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:o(we.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:o(we.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:o(we.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:o(we.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:m(we.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:o(we.showIcons,this.defaultValue.showIcons),showStatusBar:o(we.showStatusBar,this.defaultValue.showStatusBar),preview:o(we.preview,this.defaultValue.preview),previewMode:m(we.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:o(we.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:o(we.showMethods,this.defaultValue.showMethods),showFunctions:o(we.showFunctions,this.defaultValue.showFunctions),showConstructors:o(we.showConstructors,this.defaultValue.showConstructors),showDeprecated:o(we.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:o(we.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:o(we.showFields,this.defaultValue.showFields),showVariables:o(we.showVariables,this.defaultValue.showVariables),showClasses:o(we.showClasses,this.defaultValue.showClasses),showStructs:o(we.showStructs,this.defaultValue.showStructs),showInterfaces:o(we.showInterfaces,this.defaultValue.showInterfaces),showModules:o(we.showModules,this.defaultValue.showModules),showProperties:o(we.showProperties,this.defaultValue.showProperties),showEvents:o(we.showEvents,this.defaultValue.showEvents),showOperators:o(we.showOperators,this.defaultValue.showOperators),showUnits:o(we.showUnits,this.defaultValue.showUnits),showValues:o(we.showValues,this.defaultValue.showValues),showConstants:o(we.showConstants,this.defaultValue.showConstants),showEnums:o(we.showEnums,this.defaultValue.showEnums),showEnumMembers:o(we.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:o(we.showKeywords,this.defaultValue.showKeywords),showWords:o(we.showWords,this.defaultValue.showWords),showColors:o(we.showColors,this.defaultValue.showColors),showFiles:o(we.showFiles,this.defaultValue.showFiles),showReferences:o(we.showReferences,this.defaultValue.showReferences),showFolders:o(we.showFolders,this.defaultValue.showFolders),showTypeParameters:o(we.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:o(we.showSnippets,this.defaultValue.showSnippets),showUsers:o(we.showUsers,this.defaultValue.showUsers),showIssues:o(we.showIssues,this.defaultValue.showIssues)}}}class Le extends p{constructor(){super(114,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:f.localize(1512,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:f.localize(1513,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(fe){return!fe||typeof fe!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:o(fe.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:o(fe.selectSubwords,this.defaultValue.selectSubwords)}}}class Se extends p{constructor(){const fe=[];super(131,"wordSegmenterLocales",fe,{anyOf:[{description:f.localize(1514,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:f.localize(1515,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(fe){if(typeof fe=="string"&&(fe=[fe]),Array.isArray(fe)){const we=[];for(const Oe of fe)if(typeof Oe=="string")try{Intl.Segmenter.supportedLocalesOf(Oe).length>0&&we.push(Oe)}catch{}return we}return this.defaultValue}}class ye extends p{constructor(){super(139,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[f.localize(1516,"No indentation. Wrapped lines begin at column 1."),f.localize(1517,"Wrapped lines get the same indentation as the parent."),f.localize(1518,"Wrapped lines get +1 indentation toward the parent."),f.localize(1519,"Wrapped lines get +2 indentation toward the parent.")],description:f.localize(1520,"Controls the indentation of wrapped lines."),default:"same"}})}validate(fe){switch(fe){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(fe,we,Oe){return we.get(2)===2?0:Oe}}class Ee extends t{constructor(){super(147)}compute(fe,we,Oe){const Be=we.get(146);return{isDominatedByLongLines:fe.isDominatedByLongLines,isWordWrapMinified:Be.isWordWrapMinified,isViewportWrapping:Be.isViewportWrapping,wrappingColumn:Be.wrappingColumn}}}class ke extends p{constructor(){const fe={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",fe,{"editor.dropIntoEditor.enabled":{type:"boolean",default:fe.enabled,markdownDescription:f.localize(1521,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:f.localize(1522,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[f.localize(1523,"Show the drop selector widget after a file is dropped into the editor."),f.localize(1524,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),showDropSelector:m(we.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class Re extends p{constructor(){const fe={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",fe,{"editor.pasteAs.enabled":{type:"boolean",default:fe.enabled,markdownDescription:f.localize(1525,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:f.localize(1526,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[f.localize(1527,"Show the paste selector widget after content is pasted into the editor."),f.localize(1528,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(fe){if(!fe||typeof fe!="object")return this.defaultValue;const we=fe;return{enabled:o(we.enabled,this.defaultValue.enabled),showPasteSelector:m(we.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Pe="Consolas, 'Courier New', monospace",Fe="Menlo, Monaco, 'Courier New', monospace",je="'Droid Sans Mono', 'monospace', monospace";e.EDITOR_FONT_DEFAULTS={fontFamily:E.isMacintosh?Fe:E.isLinux?je:Pe,fontWeight:"normal",fontSize:E.isMacintosh?12:14,lineHeight:0,letterSpacing:0},e.editorOptionsRegistry=[];function Te(Ne){return e.editorOptionsRegistry[Ne.id]=Ne,Ne}e.EditorOptions={acceptSuggestionOnCommitCharacter:Te(new g(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:f.localize(1529,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:Te(new h(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",f.localize(1530,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:f.localize(1531,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:Te(new w),accessibilityPageSize:Te(new l(3,"accessibilityPageSize",10,1,1073741824,{description:f.localize(1532,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:Te(new d(4,"ariaLabel",f.localize(1533,"Editor content"))),ariaRequired:Te(new g(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:Te(new g(8,"screenReaderAnnounceInlineSuggestion",!0,{description:f.localize(1534,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:Te(new h(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f.localize(1535,"Use language configurations to determine when to autoclose brackets."),f.localize(1536,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:f.localize(1537,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:Te(new h(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f.localize(1538,"Use language configurations to determine when to autoclose comments."),f.localize(1539,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:f.localize(1540,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:Te(new h(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",f.localize(1541,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:f.localize(1542,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:Te(new h(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",f.localize(1543,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:f.localize(1544,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:Te(new h(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f.localize(1545,"Use language configurations to determine when to autoclose quotes."),f.localize(1546,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:f.localize(1547,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:Te(new v(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],C,{enumDescriptions:[f.localize(1548,"The editor will not insert indentation automatically."),f.localize(1549,"The editor will keep the current line's indentation."),f.localize(1550,"The editor will keep the current line's indentation and honor language defined brackets."),f.localize(1551,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),f.localize(1552,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:f.localize(1553,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:Te(new g(13,"automaticLayout",!1)),autoSurround:Te(new h(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[f.localize(1554,"Use language configurations to determine when to automatically surround selections."),f.localize(1555,"Surround with quotes but not brackets."),f.localize(1556,"Surround with brackets but not quotes."),""],description:f.localize(1557,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:Te(new de),bracketPairGuides:Te(new me),stickyTabStops:Te(new g(117,"stickyTabStops",!1,{description:f.localize(1558,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:Te(new g(17,"codeLens",!0,{description:f.localize(1559,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:Te(new d(18,"codeLensFontFamily","",{description:f.localize(1560,"Controls the font family for CodeLens.")})),codeLensFontSize:Te(new l(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:f.localize(1561,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:Te(new g(20,"colorDecorators",!0,{description:f.localize(1562,"Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:Te(new h(149,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[f.localize(1563,"Make the color picker appear both on click and hover of the color decorator"),f.localize(1564,"Make the color picker appear on hover of the color decorator"),f.localize(1565,"Make the color picker appear on click of the color decorator")],description:f.localize(1566,"Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:Te(new l(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:f.localize(1567,"Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:Te(new g(22,"columnSelection",!1,{description:f.localize(1568,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:Te(new S),contextmenu:Te(new g(24,"contextmenu",!0)),copyWithSyntaxHighlighting:Te(new g(25,"copyWithSyntaxHighlighting",!0,{description:f.localize(1569,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:Te(new v(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],D,{description:f.localize(1570,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:Te(new h(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[f.localize(1571,"Smooth caret animation is disabled."),f.localize(1572,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),f.localize(1573,"Smooth caret animation is always enabled.")],description:f.localize(1574,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:Te(new v(28,"cursorStyle",I.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],T,{description:f.localize(1575,"Controls the cursor style.")})),cursorSurroundingLines:Te(new l(29,"cursorSurroundingLines",0,0,1073741824,{description:f.localize(1576,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:Te(new h(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[f.localize(1577,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),f.localize(1578,"`cursorSurroundingLines` is enforced always.")],markdownDescription:f.localize(1579,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:Te(new l(31,"cursorWidth",0,0,1073741824,{markdownDescription:f.localize(1580,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:Te(new g(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:Te(new g(33,"disableMonospaceOptimizations",!1)),domReadOnly:Te(new g(34,"domReadOnly",!1)),dragAndDrop:Te(new g(35,"dragAndDrop",!0,{description:f.localize(1581,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:Te(new A),dropIntoEditor:Te(new ke),stickyScroll:Te(new Q),experimentalWhitespaceRendering:Te(new h(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[f.localize(1582,"Use a new rendering method with svgs."),f.localize(1583,"Use a new rendering method with font characters."),f.localize(1584,"Use the stable rendering method.")],description:f.localize(1585,"Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:Te(new d(39,"extraEditorClassName","")),fastScrollSensitivity:Te(new r(40,"fastScrollSensitivity",5,Ne=>Ne<=0?5:Ne,{markdownDescription:f.localize(1586,"Scrolling speed multiplier when pressing `Alt`.")})),find:Te(new R),fixedOverflowWidgets:Te(new g(42,"fixedOverflowWidgets",!1)),folding:Te(new g(43,"folding",!0,{description:f.localize(1587,"Controls whether the editor has code folding enabled.")})),foldingStrategy:Te(new h(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[f.localize(1588,"Use a language-specific folding strategy if available, else the indentation-based one."),f.localize(1589,"Use the indentation-based folding strategy.")],description:f.localize(1590,"Controls the strategy for computing folding ranges.")})),foldingHighlight:Te(new g(45,"foldingHighlight",!0,{description:f.localize(1591,"Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:Te(new g(46,"foldingImportsByDefault",!1,{description:f.localize(1592,"Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:Te(new l(47,"foldingMaximumRegions",5e3,10,65e3,{description:f.localize(1593,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:Te(new g(48,"unfoldOnClickAfterEndOfLine",!1,{description:f.localize(1594,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:Te(new d(49,"fontFamily",e.EDITOR_FONT_DEFAULTS.fontFamily,{description:f.localize(1595,"Controls the font family.")})),fontInfo:Te(new x),fontLigatures2:Te(new N),fontSize:Te(new F),fontWeight:Te(new W),fontVariations:Te(new O),formatOnPaste:Te(new g(55,"formatOnPaste",!1,{description:f.localize(1596,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:Te(new g(56,"formatOnType",!1,{description:f.localize(1597,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:Te(new g(57,"glyphMargin",!0,{description:f.localize(1598,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:Te(new z),hideCursorInOverviewRuler:Te(new g(59,"hideCursorInOverviewRuler",!1,{description:f.localize(1599,"Controls whether the cursor should be hidden in the overview ruler.")})),hover:Te(new q),inDiffEditor:Te(new g(61,"inDiffEditor",!1)),letterSpacing:Te(new r(64,"letterSpacing",e.EDITOR_FONT_DEFAULTS.letterSpacing,Ne=>r.clamp(Ne,-5,20),{description:f.localize(1600,"Controls the letter spacing in pixels.")})),lightbulb:Te(new Y),lineDecorationsWidth:Te(new G),lineHeight:Te(new P),lineNumbers:Te(new ne),lineNumbersMinChars:Te(new l(69,"lineNumbersMinChars",5,1,300)),linkedEditing:Te(new g(70,"linkedEditing",!1,{description:f.localize(1601,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:Te(new g(71,"links",!0,{description:f.localize(1602,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:Te(new h(72,"matchBrackets","always",["always","near","never"],{description:f.localize(1603,"Highlight matching brackets.")})),minimap:Te(new te),mouseStyle:Te(new h(74,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:Te(new r(75,"mouseWheelScrollSensitivity",1,Ne=>Ne===0?1:Ne,{markdownDescription:f.localize(1604,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:Te(new g(76,"mouseWheelZoom",!1,{markdownDescription:E.isMacintosh?f.localize(1605,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):f.localize(1606,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:Te(new g(77,"multiCursorMergeOverlapping",!0,{description:f.localize(1607,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:Te(new v(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],se,{markdownEnumDescriptions:[f.localize(1608,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),f.localize(1609,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:f.localize(1610,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:Te(new h(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[f.localize(1611,"Each cursor pastes a single line of the text."),f.localize(1612,"Each cursor pastes the full text.")],markdownDescription:f.localize(1613,"Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:Te(new l(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:f.localize(1614,"Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:Te(new h(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[f.localize(1615,"Does not highlight occurrences."),f.localize(1616,"Highlights occurrences only in the current file."),f.localize(1617,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:f.localize(1618,"Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:Te(new g(82,"overviewRulerBorder",!0,{description:f.localize(1619,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:Te(new l(83,"overviewRulerLanes",3,0,3)),padding:Te(new ue),pasteAs:Te(new Re),parameterHints:Te(new ge),peekWidgetDefaultFocus:Te(new h(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[f.localize(1620,"Focus the tree when opening peek"),f.localize(1621,"Focus the editor when opening peek")],description:f.localize(1622,"Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:Te(new ce),definitionLinkOpensInPeek:Te(new g(89,"definitionLinkOpensInPeek",!1,{description:f.localize(1623,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:Te(new ie),quickSuggestionsDelay:Te(new l(91,"quickSuggestionsDelay",10,0,1073741824,{description:f.localize(1624,"Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:Te(new g(92,"readOnly",!1)),readOnlyMessage:Te(new j),renameOnType:Te(new g(94,"renameOnType",!1,{description:f.localize(1625,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:f.localize(1626,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:Te(new g(95,"renderControlCharacters",!0,{description:f.localize(1627,"Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:Te(new h(96,"renderFinalNewline",E.isLinux?"dimmed":"on",["off","on","dimmed"],{description:f.localize(1628,"Render last line number when the file ends with a newline.")})),renderLineHighlight:Te(new h(97,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",f.localize(1629,"Highlights both the gutter and the current line.")],description:f.localize(1630,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:Te(new g(98,"renderLineHighlightOnlyWhenFocus",!1,{description:f.localize(1631,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:Te(new h(99,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:Te(new h(100,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",f.localize(1632,"Render whitespace characters except for single spaces between words."),f.localize(1633,"Render whitespace characters only on selected text."),f.localize(1634,"Render only trailing whitespace characters."),""],description:f.localize(1635,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:Te(new l(101,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:Te(new g(102,"roundedSelection",!0,{description:f.localize(1636,"Controls whether selections should have rounded corners.")})),rulers:Te(new B),scrollbar:Te(new $),scrollBeyondLastColumn:Te(new l(105,"scrollBeyondLastColumn",4,0,1073741824,{description:f.localize(1637,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:Te(new g(106,"scrollBeyondLastLine",!0,{description:f.localize(1638,"Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:Te(new g(107,"scrollPredominantAxis",!0,{description:f.localize(1639,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:Te(new g(108,"selectionClipboard",!0,{description:f.localize(1640,"Controls whether the Linux primary clipboard should be supported."),included:E.isLinux})),selectionHighlight:Te(new g(109,"selectionHighlight",!0,{description:f.localize(1641,"Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:Te(new g(110,"selectOnLineNumbers",!0)),showFoldingControls:Te(new h(111,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[f.localize(1642,"Always show the folding controls."),f.localize(1643,"Never show the folding controls and reduce the gutter size."),f.localize(1644,"Only show the folding controls when the mouse is over the gutter.")],description:f.localize(1645,"Controls when the folding controls on the gutter are shown.")})),showUnused:Te(new g(112,"showUnused",!0,{description:f.localize(1646,"Controls fading out of unused code.")})),showDeprecated:Te(new g(141,"showDeprecated",!0,{description:f.localize(1647,"Controls strikethrough deprecated variables.")})),inlayHints:Te(new X),snippetSuggestions:Te(new h(113,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[f.localize(1648,"Show snippet suggestions on top of other suggestions."),f.localize(1649,"Show snippet suggestions below other suggestions."),f.localize(1650,"Show snippets suggestions with other suggestions."),f.localize(1651,"Do not show snippet suggestions.")],description:f.localize(1652,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:Te(new Le),smoothScrolling:Te(new g(115,"smoothScrolling",!1,{description:f.localize(1653,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:Te(new l(118,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:Te(new ve),inlineSuggest:Te(new ee),inlineEdit:Te(new le),inlineCompletionsAccessibilityVerbose:Te(new g(150,"inlineCompletionsAccessibilityVerbose",!1,{description:f.localize(1654,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:Te(new l(120,"suggestFontSize",0,0,1e3,{markdownDescription:f.localize(1655,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:Te(new l(121,"suggestLineHeight",0,0,1e3,{markdownDescription:f.localize(1656,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:Te(new g(122,"suggestOnTriggerCharacters",!0,{description:f.localize(1657,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:Te(new h(123,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[f.localize(1658,"Always select the first suggestion."),f.localize(1659,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),f.localize(1660,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:f.localize(1661,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:Te(new h(124,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[f.localize(1662,"Tab complete will insert the best matching suggestion when pressing tab."),f.localize(1663,"Disable tab completions."),f.localize(1664,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:f.localize(1665,"Enables tab completions.")})),tabIndex:Te(new l(125,"tabIndex",0,-1,1073741824)),unicodeHighlight:Te(new Z),unusualLineTerminators:Te(new h(127,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[f.localize(1666,"Unusual line terminators are automatically removed."),f.localize(1667,"Unusual line terminators are ignored."),f.localize(1668,"Unusual line terminators prompt to be removed.")],description:f.localize(1669,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:Te(new g(128,"useShadowDOM",!0)),useTabStops:Te(new g(129,"useTabStops",!0,{description:f.localize(1670,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:Te(new h(130,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[f.localize(1671,"Use the default line break rule."),f.localize(1672,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:f.localize(1673,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:Te(new Se),wordSeparators:Te(new d(132,"wordSeparators",y.USUAL_WORD_SEPARATORS,{description:f.localize(1674,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:Te(new h(133,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[f.localize(1675,"Lines will never wrap."),f.localize(1676,"Lines will wrap at the viewport width."),f.localize(1677,"Lines will wrap at `#editor.wordWrapColumn#`."),f.localize(1678,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:f.localize(1679,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:Te(new d(134,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:Te(new d(135,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:Te(new l(136,"wordWrapColumn",80,1,1073741824,{markdownDescription:f.localize(1680,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:Te(new h(137,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:Te(new h(138,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:Te(new M),defaultColorDecorators:Te(new g(148,"defaultColorDecorators",!1,{markdownDescription:f.localize(1681,"Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:Te(new pe),tabFocusMode:Te(new g(145,"tabFocusMode",!1,{markdownDescription:f.localize(1682,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:Te(new H),wrappingInfo:Te(new Ee),wrappingIndent:Te(new ye),wrappingStrategy:Te(new K)}}),define(oe[660],re([1,0,5,39,11,75,37,9,4,233]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewCursor=e.CursorPlurality=void 0;class p{constructor(i,o,g,u,l,a,r){this.top=i,this.left=o,this.paddingLeft=g,this.width=u,this.height=l,this.textContent=a,this.textContentClassName=r}}var n;(function(t){t[t.Single=0]="Single",t[t.MultiPrimary=1]="MultiPrimary",t[t.MultiSecondary=2]="MultiSecondary"})(n||(e.CursorPlurality=n={}));class s{constructor(i,o){this._context=i;const g=this._context.configuration.options,u=g.get(50);this._cursorStyle=g.get(28),this._lineHeight=g.get(67),this._typicalHalfwidthCharacterWidth=u.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(g.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=(0,k.createFastDomNode)(document.createElement("div")),this._domNode.setClassName(`cursor ${b.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),(0,L.applyFontInfo)(this._domNode,u),this._domNode.setDisplay("none"),this._position=new f.Position(1,1),this._pluralityClass="",this.setPlurality(o),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(i){switch(i){default:case n.Single:this._pluralityClass="";break;case n.MultiPrimary:this._pluralityClass="cursor-primary";break;case n.MultiSecondary:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(i){const o=this._context.configuration.options,g=o.get(50);return this._cursorStyle=o.get(28),this._lineHeight=o.get(67),this._typicalHalfwidthCharacterWidth=g.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(o.get(31),this._typicalHalfwidthCharacterWidth),(0,L.applyFontInfo)(this._domNode,g),!0}onCursorPositionChanged(i,o){return o?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=i,!0}_getGraphemeAwarePosition(){const{lineNumber:i,column:o}=this._position,g=this._context.viewModel.getLineContent(i),[u,l]=E.getCharContainingOffset(g,o-1);return[new f.Position(i,u+1),g.substring(u,l)]}_prepareRender(i){let o="",g="";const[u,l]=this._getGraphemeAwarePosition();if(this._cursorStyle===y.TextEditorCursorStyle.Line||this._cursorStyle===y.TextEditorCursorStyle.LineThin){const C=i.visibleRangeForPosition(u);if(!C||C.outsideRenderedLine)return null;const w=c.getWindow(this._domNode.domNode);let S;this._cursorStyle===y.TextEditorCursorStyle.Line?(S=c.computeScreenAwareSize(w,this._lineCursorWidth>0?this._lineCursorWidth:2),S>2&&(o=l,g=this._getTokenClassName(u))):S=c.computeScreenAwareSize(w,1);let D=C.left,I=0;S>=2&&D>=1&&(I=1,D-=I);const T=i.getVerticalOffsetForLineNumber(u.lineNumber)-i.bigNumbersDelta;return new p(T,D,I,S,this._lineHeight,o,g)}const a=i.linesVisibleRangesForRange(new _.Range(u.lineNumber,u.column,u.lineNumber,u.column+l.length),!1);if(!a||a.length===0)return null;const r=a[0];if(r.outsideRenderedLine||r.ranges.length===0)return null;const d=r.ranges[0],m=l==="	"?this._typicalHalfwidthCharacterWidth:d.width<1?this._typicalHalfwidthCharacterWidth:d.width;this._cursorStyle===y.TextEditorCursorStyle.Block&&(o=l,g=this._getTokenClassName(u));let h=i.getVerticalOffsetForLineNumber(u.lineNumber)-i.bigNumbersDelta,v=this._lineHeight;return(this._cursorStyle===y.TextEditorCursorStyle.Underline||this._cursorStyle===y.TextEditorCursorStyle.UnderlineThin)&&(h+=this._lineHeight-2,v=2),new p(h,d.left,0,m,v,o,g)}_getTokenClassName(i){const o=this._context.viewModel.getViewLineData(i.lineNumber),g=o.tokens.findTokenIndexAtOffset(i.column-1);return o.tokens.getClassName(g)}prepareRender(i){this._renderData=this._prepareRender(i)}render(i){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${b.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}}e.ViewCursor=s}),define(oe[261],re([1,0,16,37,167]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontInfo=e.SERIALIZED_FONT_INFO_VERSION=e.BareFontInfo=void 0;const L=c.isMacintosh?1.5:1.35,y=8;class f{static createFromValidatedSettings(p,n,s){const t=p.get(49),i=p.get(53),o=p.get(52),g=p.get(51),u=p.get(54),l=p.get(67),a=p.get(64);return f._create(t,i,o,g,u,l,a,n,s)}static _create(p,n,s,t,i,o,g,u,l){o===0?o=L*s:o<y&&(o=o*s),o=Math.round(o),o<y&&(o=y);const a=1+(l?0:E.EditorZoom.getZoomLevel()*.1);return s*=a,o*=a,i===k.EditorFontVariations.TRANSLATE&&(n==="normal"||n==="bold"?i=k.EditorFontVariations.OFF:(i=`'wght' ${parseInt(n,10)}`,n="normal")),new f({pixelRatio:u,fontFamily:p,fontWeight:n,fontSize:s,fontFeatureSettings:t,fontVariationSettings:i,lineHeight:o,letterSpacing:g})}constructor(p){this._bareFontInfoBrand=void 0,this.pixelRatio=p.pixelRatio,this.fontFamily=String(p.fontFamily),this.fontWeight=String(p.fontWeight),this.fontSize=p.fontSize,this.fontFeatureSettings=p.fontFeatureSettings,this.fontVariationSettings=p.fontVariationSettings,this.lineHeight=p.lineHeight|0,this.letterSpacing=p.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){const p=k.EDITOR_FONT_DEFAULTS.fontFamily,n=f._wrapInQuotes(this.fontFamily);return p&&this.fontFamily!==p?`${n}, ${p}`:n}static _wrapInQuotes(p){return/[,"']/.test(p)?p:/[+ ]/.test(p)?`"${p}"`:p}}e.BareFontInfo=f,e.SERIALIZED_FONT_INFO_VERSION=2;class _ extends f{constructor(p,n){super(p),this._editorStylingBrand=void 0,this.version=e.SERIALIZED_FONT_INFO_VERSION,this.isTrusted=n,this.isMonospace=p.isMonospace,this.typicalHalfwidthCharacterWidth=p.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=p.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=p.canUseHalfwidthRightwardsArrow,this.spaceWidth=p.spaceWidth,this.middotWidth=p.middotWidth,this.wsmiddotWidth=p.wsmiddotWidth,this.maxDigitWidth=p.maxDigitWidth}equals(p){return this.fontFamily===p.fontFamily&&this.fontWeight===p.fontWeight&&this.fontSize===p.fontSize&&this.fontFeatureSettings===p.fontFeatureSettings&&this.fontVariationSettings===p.fontVariationSettings&&this.lineHeight===p.lineHeight&&this.letterSpacing===p.letterSpacing&&this.typicalHalfwidthCharacterWidth===p.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===p.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===p.canUseHalfwidthRightwardsArrow&&this.spaceWidth===p.spaceWidth&&this.middotWidth===p.middotWidth&&this.wsmiddotWidth===p.wsmiddotWidth&&this.maxDigitWidth===p.maxDigitWidth}}e.FontInfo=_}),define(oe[370],re([1,0,5,229,6,2,554,37,261]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FontMeasurements=e.FontMeasurementsImpl=void 0;class b extends L.Disposable{constructor(){super(...arguments),this._cache=new Map,this._evictUntrustedReadingsTimeout=-1,this._onDidChange=this._register(new E.Emitter),this.onDidChange=this._onDidChange.event}dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(s){const t=(0,c.getWindowId)(s);let i=this._cache.get(t);return i||(i=new p,this._cache.set(t,i)),i}_writeToCache(s,t,i){this._ensureCache(s).put(t,i),!i.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=s.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(s)},5e3))}_evictUntrustedReadings(s){const t=this._ensureCache(s),i=t.getValues();let o=!1;for(const g of i)g.isTrusted||(o=!0,t.remove(g));o&&this._onDidChange.fire()}readFontInfo(s,t){const i=this._ensureCache(s);if(!i.has(t)){let o=this._actualReadFontInfo(s,t);(o.typicalHalfwidthCharacterWidth<=2||o.typicalFullwidthCharacterWidth<=2||o.spaceWidth<=2||o.maxDigitWidth<=2)&&(o=new _.FontInfo({pixelRatio:k.PixelRatio.getInstance(s).value,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontSize:o.fontSize,fontFeatureSettings:o.fontFeatureSettings,fontVariationSettings:o.fontVariationSettings,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,isMonospace:o.isMonospace,typicalHalfwidthCharacterWidth:Math.max(o.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(o.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:o.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(o.spaceWidth,5),middotWidth:Math.max(o.middotWidth,5),wsmiddotWidth:Math.max(o.wsmiddotWidth,5),maxDigitWidth:Math.max(o.maxDigitWidth,5)},!1)),this._writeToCache(s,t,o)}return i.get(t)}_createRequest(s,t,i,o){const g=new y.CharWidthRequest(s,t);return i.push(g),o?.push(g),g}_actualReadFontInfo(s,t){const i=[],o=[],g=this._createRequest("n",0,i,o),u=this._createRequest("\uFF4D",0,i,null),l=this._createRequest(" ",0,i,o),a=this._createRequest("0",0,i,o),r=this._createRequest("1",0,i,o),d=this._createRequest("2",0,i,o),m=this._createRequest("3",0,i,o),h=this._createRequest("4",0,i,o),v=this._createRequest("5",0,i,o),C=this._createRequest("6",0,i,o),w=this._createRequest("7",0,i,o),S=this._createRequest("8",0,i,o),D=this._createRequest("9",0,i,o),I=this._createRequest("\u2192",0,i,o),T=this._createRequest("\uFFEB",0,i,null),M=this._createRequest("\xB7",0,i,o),A=this._createRequest("\u2E31",0,i,null),R="|/-_ilm%";for(let W=0,z=R.length;W<z;W++)this._createRequest(R.charAt(W),0,i,o),this._createRequest(R.charAt(W),1,i,o),this._createRequest(R.charAt(W),2,i,o);(0,y.readCharWidths)(s,t,i);const N=Math.max(a.width,r.width,d.width,m.width,h.width,v.width,C.width,w.width,S.width,D.width);let O=t.fontFeatureSettings===f.EditorFontLigatures.OFF;const x=o[0].width;for(let W=1,z=o.length;O&&W<z;W++){const q=x-o[W].width;if(q<-.001||q>.001){O=!1;break}}let F=!0;return O&&T.width!==x&&(F=!1),T.width>I.width&&(F=!1),new _.FontInfo({pixelRatio:k.PixelRatio.getInstance(s).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:O,typicalHalfwidthCharacterWidth:g.width,typicalFullwidthCharacterWidth:u.width,canUseHalfwidthRightwardsArrow:F,spaceWidth:l.width,middotWidth:M.width,wsmiddotWidth:A.width,maxDigitWidth:N},!0)}}e.FontMeasurementsImpl=b;class p{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(s){const t=s.getId();return!!this._values[t]}get(s){const t=s.getId();return this._values[t]}put(s,t){const i=s.getId();this._keys[i]=s,this._values[i]=t}remove(s){const t=s.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(s=>this._values[s])}}e.FontMeasurements=new b}),define(oe[28],re([1,0,26,22,4,603,3]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditTriggerKind=e.TokenizationRegistry=e.LazyTokenizationSupport=e.InlayHintKind=e.Command=e.NewSymbolNameTriggerKind=e.NewSymbolNameTag=e.FoldingRangeKind=e.TextEdit=e.SymbolKinds=e.symbolKindNames=e.DocumentHighlightKind=e.SignatureHelpTriggerKind=e.DocumentPasteTriggerKind=e.SelectedSuggestionInfo=e.InlineCompletionTriggerKind=e.CompletionItemKinds=e.HoverVerbosityAction=e.EncodedTokenizationResult=e.TokenizationResult=e.Token=void 0,e.isLocationLink=u,e.getAriaLabelForSymbol=l;class f{constructor(I,T,M){this.offset=I,this.type=T,this.language=M,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}}e.Token=f;class _{constructor(I,T){this.tokens=I,this.endState=T,this._tokenizationResultBrand=void 0}}e.TokenizationResult=_;class b{constructor(I,T){this.tokens=I,this.endState=T,this._encodedTokenizationResultBrand=void 0}}e.EncodedTokenizationResult=b;var p;(function(D){D[D.Increase=0]="Increase",D[D.Decrease=1]="Decrease"})(p||(e.HoverVerbosityAction=p={}));var n;(function(D){const I=new Map;I.set(0,c.Codicon.symbolMethod),I.set(1,c.Codicon.symbolFunction),I.set(2,c.Codicon.symbolConstructor),I.set(3,c.Codicon.symbolField),I.set(4,c.Codicon.symbolVariable),I.set(5,c.Codicon.symbolClass),I.set(6,c.Codicon.symbolStruct),I.set(7,c.Codicon.symbolInterface),I.set(8,c.Codicon.symbolModule),I.set(9,c.Codicon.symbolProperty),I.set(10,c.Codicon.symbolEvent),I.set(11,c.Codicon.symbolOperator),I.set(12,c.Codicon.symbolUnit),I.set(13,c.Codicon.symbolValue),I.set(15,c.Codicon.symbolEnum),I.set(14,c.Codicon.symbolConstant),I.set(15,c.Codicon.symbolEnum),I.set(16,c.Codicon.symbolEnumMember),I.set(17,c.Codicon.symbolKeyword),I.set(27,c.Codicon.symbolSnippet),I.set(18,c.Codicon.symbolText),I.set(19,c.Codicon.symbolColor),I.set(20,c.Codicon.symbolFile),I.set(21,c.Codicon.symbolReference),I.set(22,c.Codicon.symbolCustomColor),I.set(23,c.Codicon.symbolFolder),I.set(24,c.Codicon.symbolTypeParameter),I.set(25,c.Codicon.account),I.set(26,c.Codicon.issues);function T(R){let N=I.get(R);return N||(console.info("No codicon found for CompletionItemKind "+R),N=c.Codicon.symbolProperty),N}D.toIcon=T;const M=new Map;M.set("method",0),M.set("function",1),M.set("constructor",2),M.set("field",3),M.set("variable",4),M.set("class",5),M.set("struct",6),M.set("interface",7),M.set("module",8),M.set("property",9),M.set("event",10),M.set("operator",11),M.set("unit",12),M.set("value",13),M.set("constant",14),M.set("enum",15),M.set("enum-member",16),M.set("enumMember",16),M.set("keyword",17),M.set("snippet",27),M.set("text",18),M.set("color",19),M.set("file",20),M.set("reference",21),M.set("customcolor",22),M.set("folder",23),M.set("type-parameter",24),M.set("typeParameter",24),M.set("account",25),M.set("issue",26);function A(R,N){let O=M.get(R);return typeof O>"u"&&!N&&(O=9),O}D.fromString=A})(n||(e.CompletionItemKinds=n={}));var s;(function(D){D[D.Automatic=0]="Automatic",D[D.Explicit=1]="Explicit"})(s||(e.InlineCompletionTriggerKind=s={}));class t{constructor(I,T,M,A){this.range=I,this.text=T,this.completionKind=M,this.isSnippetText=A}equals(I){return E.Range.lift(this.range).equalsRange(I.range)&&this.text===I.text&&this.completionKind===I.completionKind&&this.isSnippetText===I.isSnippetText}}e.SelectedSuggestionInfo=t;var i;(function(D){D[D.Automatic=0]="Automatic",D[D.PasteAs=1]="PasteAs"})(i||(e.DocumentPasteTriggerKind=i={}));var o;(function(D){D[D.Invoke=1]="Invoke",D[D.TriggerCharacter=2]="TriggerCharacter",D[D.ContentChange=3]="ContentChange"})(o||(e.SignatureHelpTriggerKind=o={}));var g;(function(D){D[D.Text=0]="Text",D[D.Read=1]="Read",D[D.Write=2]="Write"})(g||(e.DocumentHighlightKind=g={}));function u(D){return D&&k.URI.isUri(D.uri)&&E.Range.isIRange(D.range)&&(E.Range.isIRange(D.originSelectionRange)||E.Range.isIRange(D.targetSelectionRange))}e.symbolKindNames={17:(0,y.localize)(1748,"array"),16:(0,y.localize)(1749,"boolean"),4:(0,y.localize)(1750,"class"),13:(0,y.localize)(1751,"constant"),8:(0,y.localize)(1752,"constructor"),9:(0,y.localize)(1753,"enumeration"),21:(0,y.localize)(1754,"enumeration member"),23:(0,y.localize)(1755,"event"),7:(0,y.localize)(1756,"field"),0:(0,y.localize)(1757,"file"),11:(0,y.localize)(1758,"function"),10:(0,y.localize)(1759,"interface"),19:(0,y.localize)(1760,"key"),5:(0,y.localize)(1761,"method"),1:(0,y.localize)(1762,"module"),2:(0,y.localize)(1763,"namespace"),20:(0,y.localize)(1764,"null"),15:(0,y.localize)(1765,"number"),18:(0,y.localize)(1766,"object"),24:(0,y.localize)(1767,"operator"),3:(0,y.localize)(1768,"package"),6:(0,y.localize)(1769,"property"),14:(0,y.localize)(1770,"string"),22:(0,y.localize)(1771,"struct"),25:(0,y.localize)(1772,"type parameter"),12:(0,y.localize)(1773,"variable")};function l(D,I){return(0,y.localize)(1774,"{0} ({1})",D,e.symbolKindNames[I])}var a;(function(D){const I=new Map;I.set(0,c.Codicon.symbolFile),I.set(1,c.Codicon.symbolModule),I.set(2,c.Codicon.symbolNamespace),I.set(3,c.Codicon.symbolPackage),I.set(4,c.Codicon.symbolClass),I.set(5,c.Codicon.symbolMethod),I.set(6,c.Codicon.symbolProperty),I.set(7,c.Codicon.symbolField),I.set(8,c.Codicon.symbolConstructor),I.set(9,c.Codicon.symbolEnum),I.set(10,c.Codicon.symbolInterface),I.set(11,c.Codicon.symbolFunction),I.set(12,c.Codicon.symbolVariable),I.set(13,c.Codicon.symbolConstant),I.set(14,c.Codicon.symbolString),I.set(15,c.Codicon.symbolNumber),I.set(16,c.Codicon.symbolBoolean),I.set(17,c.Codicon.symbolArray),I.set(18,c.Codicon.symbolObject),I.set(19,c.Codicon.symbolKey),I.set(20,c.Codicon.symbolNull),I.set(21,c.Codicon.symbolEnumMember),I.set(22,c.Codicon.symbolStruct),I.set(23,c.Codicon.symbolEvent),I.set(24,c.Codicon.symbolOperator),I.set(25,c.Codicon.symbolTypeParameter);function T(M){let A=I.get(M);return A||(console.info("No codicon found for SymbolKind "+M),A=c.Codicon.symbolProperty),A}D.toIcon=T})(a||(e.SymbolKinds=a={}));class r{}e.TextEdit=r;class d{static{this.Comment=new d("comment")}static{this.Imports=new d("imports")}static{this.Region=new d("region")}static fromValue(I){switch(I){case"comment":return d.Comment;case"imports":return d.Imports;case"region":return d.Region}return new d(I)}constructor(I){this.value=I}}e.FoldingRangeKind=d;var m;(function(D){D[D.AIGenerated=1]="AIGenerated"})(m||(e.NewSymbolNameTag=m={}));var h;(function(D){D[D.Invoke=0]="Invoke",D[D.Automatic=1]="Automatic"})(h||(e.NewSymbolNameTriggerKind=h={}));var v;(function(D){function I(T){return!T||typeof T!="object"?!1:typeof T.id=="string"&&typeof T.title=="string"}D.is=I})(v||(e.Command=v={}));var C;(function(D){D[D.Type=1]="Type",D[D.Parameter=2]="Parameter"})(C||(e.InlayHintKind=C={}));class w{constructor(I){this.createSupport=I,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(I=>{I&&I.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}e.LazyTokenizationSupport=w,e.TokenizationRegistry=new L.TokenizationRegistry;var S;(function(D){D[D.Invoke=0]="Invoke",D[D.Automatic=1]="Automatic"})(S||(e.InlineEditTriggerKind=S={}))}),define(oe[176],re([1,0,28]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NullState=void 0,e.nullTokenize=k,e.nullTokenizeEncoded=E,e.NullState=new class{clone(){return this}equals(L){return this===L}};function k(L,y){return new c.TokenizationResult([new c.Token(0,"",L)],y)}function E(L,y){const f=new Uint32Array(2);return f[0]=0,f[1]=(L<<0|0|0|32768|2<<24)>>>0,new c.EncodedTokenizationResult(f,y===null?e.NullState:y)}}),define(oe[371],re([1,0,11,94,28,176]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tokenizeToString=f,e.tokenizeLineToHTML=_,e._tokenizeToString=b;const y={getInitialState:()=>L.NullState,tokenizeEncoded:(p,n,s)=>(0,L.nullTokenizeEncoded)(0,s)};async function f(p,n,s){if(!s)return b(n,p.languageIdCodec,y);const t=await E.TokenizationRegistry.getOrCreate(s);return b(n,p.languageIdCodec,t||y)}function _(p,n,s,t,i,o,g){let u="<div>",l=t,a=0,r=!0;for(let d=0,m=n.getCount();d<m;d++){const h=n.getEndOffset(d);if(h<=t)continue;let v="";for(;l<h&&l<i;l++){const C=p.charCodeAt(l);switch(C){case 9:{let w=o-(l+a)%o;for(a+=w-1;w>0;)g&&r?(v+="&#160;",r=!1):(v+=" ",r=!0),w--;break}case 60:v+="&lt;",r=!1;break;case 62:v+="&gt;",r=!1;break;case 38:v+="&amp;",r=!1;break;case 0:v+="&#00;",r=!1;break;case 65279:case 8232:case 8233:case 133:v+="\uFFFD",r=!1;break;case 13:v+="&#8203",r=!1;break;case 32:g&&r?(v+="&#160;",r=!1):(v+=" ",r=!0);break;default:v+=String.fromCharCode(C),r=!1}}if(u+=`<span style="${n.getInlineStyle(d,s)}">${v}</span>`,h>i||l>=i)break}return u+="</div>",u}function b(p,n,s){let t='<div class="monaco-tokenized-source">';const i=c.splitLines(p);let o=s.getInitialState();for(let g=0,u=i.length;g<u;g++){const l=i[g];g>0&&(t+="<br/>");const a=s.tokenizeEncoded(l,!0,o);k.LineTokens.convertToEndOffset(a.tokens,l.length);const d=new k.LineTokens(a.tokens,l,n).inflate();let m=0;for(let h=0,v=d.getCount();h<v;h++){const C=d.getClassName(h),w=d.getEndOffset(h);t+=`<span class="${C}">${c.escape(l.substring(m,w))}</span>`,m=w}o=a.endState}return t+="</div>",t}}),define(oe[372],re([1,0,3,8,23,22,326,158,51]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditStack=e.MultiModelEditStackElement=e.SingleModelEditStackElement=e.SingleModelEditStackData=void 0,e.isEditStackElement=i;function b(g){return g.toString()}class p{static create(u,l){const a=u.getAlternativeVersionId(),r=t(u);return new p(a,a,r,r,l,l,[])}constructor(u,l,a,r,d,m,h){this.beforeVersionId=u,this.afterVersionId=l,this.beforeEOL=a,this.afterEOL=r,this.beforeCursorState=d,this.afterCursorState=m,this.changes=h}append(u,l,a,r,d){l.length>0&&(this.changes=(0,y.compressConsecutiveTextChanges)(this.changes,l)),this.afterEOL=a,this.afterVersionId=r,this.afterCursorState=d}static _writeSelectionsSize(u){return 4+4*4*(u?u.length:0)}static _writeSelections(u,l,a){if(f.writeUInt32BE(u,l?l.length:0,a),a+=4,l)for(const r of l)f.writeUInt32BE(u,r.selectionStartLineNumber,a),a+=4,f.writeUInt32BE(u,r.selectionStartColumn,a),a+=4,f.writeUInt32BE(u,r.positionLineNumber,a),a+=4,f.writeUInt32BE(u,r.positionColumn,a),a+=4;return a}static _readSelections(u,l,a){const r=f.readUInt32BE(u,l);l+=4;for(let d=0;d<r;d++){const m=f.readUInt32BE(u,l);l+=4;const h=f.readUInt32BE(u,l);l+=4;const v=f.readUInt32BE(u,l);l+=4;const C=f.readUInt32BE(u,l);l+=4,a.push(new E.Selection(m,h,v,C))}return l}serialize(){let u=10+p._writeSelectionsSize(this.beforeCursorState)+p._writeSelectionsSize(this.afterCursorState)+4;for(const r of this.changes)u+=r.writeSize();const l=new Uint8Array(u);let a=0;f.writeUInt32BE(l,this.beforeVersionId,a),a+=4,f.writeUInt32BE(l,this.afterVersionId,a),a+=4,f.writeUInt8(l,this.beforeEOL,a),a+=1,f.writeUInt8(l,this.afterEOL,a),a+=1,a=p._writeSelections(l,this.beforeCursorState,a),a=p._writeSelections(l,this.afterCursorState,a),f.writeUInt32BE(l,this.changes.length,a),a+=4;for(const r of this.changes)a=r.write(l,a);return l.buffer}static deserialize(u){const l=new Uint8Array(u);let a=0;const r=f.readUInt32BE(l,a);a+=4;const d=f.readUInt32BE(l,a);a+=4;const m=f.readUInt8(l,a);a+=1;const h=f.readUInt8(l,a);a+=1;const v=[];a=p._readSelections(l,a,v);const C=[];a=p._readSelections(l,a,C);const w=f.readUInt32BE(l,a);a+=4;const S=[];for(let D=0;D<w;D++)a=y.TextChange.read(l,a,S);return new p(r,d,m,h,v,C,S)}}e.SingleModelEditStackData=p;class n{get type(){return 0}get resource(){return L.URI.isUri(this.model)?this.model:this.model.uri}constructor(u,l,a,r){this.label=u,this.code=l,this.model=a,this._data=p.create(a,r)}toString(){return(this._data instanceof p?this._data:p.deserialize(this._data)).changes.map(l=>l.toString()).join(", ")}matchesResource(u){return(L.URI.isUri(this.model)?this.model:this.model.uri).toString()===u.toString()}setModel(u){this.model=u}canAppend(u){return this.model===u&&this._data instanceof p}append(u,l,a,r,d){this._data instanceof p&&this._data.append(u,l,a,r,d)}close(){this._data instanceof p&&(this._data=this._data.serialize())}open(){this._data instanceof p||(this._data=p.deserialize(this._data))}undo(){if(L.URI.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof p&&(this._data=this._data.serialize());const u=p.deserialize(this._data);this.model._applyUndo(u.changes,u.beforeEOL,u.beforeVersionId,u.beforeCursorState)}redo(){if(L.URI.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof p&&(this._data=this._data.serialize());const u=p.deserialize(this._data);this.model._applyRedo(u.changes,u.afterEOL,u.afterVersionId,u.afterCursorState)}heapSize(){return this._data instanceof p&&(this._data=this._data.serialize()),this._data.byteLength+168}}e.SingleModelEditStackElement=n;class s{get resources(){return this._editStackElementsArr.map(u=>u.resource)}constructor(u,l,a){this.label=u,this.code=l,this.type=1,this._isOpen=!0,this._editStackElementsArr=a.slice(0),this._editStackElementsMap=new Map;for(const r of this._editStackElementsArr){const d=b(r.resource);this._editStackElementsMap.set(d,r)}this._delegate=null}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(u){const l=b(u);return this._editStackElementsMap.has(l)}setModel(u){const l=b(L.URI.isUri(u)?u:u.uri);this._editStackElementsMap.has(l)&&this._editStackElementsMap.get(l).setModel(u)}canAppend(u){if(!this._isOpen)return!1;const l=b(u.uri);return this._editStackElementsMap.has(l)?this._editStackElementsMap.get(l).canAppend(u):!1}append(u,l,a,r,d){const m=b(u.uri);this._editStackElementsMap.get(m).append(u,l,a,r,d)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const u of this._editStackElementsArr)u.undo()}redo(){for(const u of this._editStackElementsArr)u.redo()}heapSize(u){const l=b(u);return this._editStackElementsMap.has(l)?this._editStackElementsMap.get(l).heapSize():0}split(){return this._editStackElementsArr}toString(){const u=[];for(const l of this._editStackElementsArr)u.push(`${(0,_.basename)(l.resource)}: ${l}`);return`{${u.join(", ")}}`}}e.MultiModelEditStackElement=s;function t(g){return g.getEOL()===`
`?0:1}function i(g){return g?g instanceof n||g instanceof s:!1}class o{constructor(u,l){this._model=u,this._undoRedoService=l}pushStackElement(){const u=this._undoRedoService.getLastElement(this._model.uri);i(u)&&u.close()}popStackElement(){const u=this._undoRedoService.getLastElement(this._model.uri);i(u)&&u.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(u,l){const a=this._undoRedoService.getLastElement(this._model.uri);if(i(a)&&a.canAppend(this._model))return a;const r=new n(c.localize(1242,"Typing"),"undoredo.textBufferEdit",this._model,u);return this._undoRedoService.pushElement(r,l),r}pushEOL(u){const l=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(u),l.append(this._model,[],t(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(u,l,a,r){const d=this._getOrCreateEditStackElement(u,r),m=this._model.applyEdits(l,!0),h=o._computeCursorState(a,m),v=m.map((C,w)=>({index:w,textChange:C.textChange}));return v.sort((C,w)=>C.textChange.oldPosition===w.textChange.oldPosition?C.index-w.index:C.textChange.oldPosition-w.textChange.oldPosition),d.append(this._model,v.map(C=>C.textChange),t(this._model),this._model.getAlternativeVersionId(),h),h}static _computeCursorState(u,l){try{return u?u(l):null}catch(a){return(0,k.onUnexpectedError)(a),null}}}e.EditStack=o}),define(oe[661],re([1,0,14,8,16,59,144,56,69,176,590,345,94]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultBackgroundTokenizer=e.RangePriorityQueueImpl=e.TokenizationStateStore=e.TrackingTokenizationStateStore=e.TokenizerWithStateStoreAndTextModel=e.TokenizerWithStateStore=void 0;class t{constructor(d,m){this.tokenizationSupport=m,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new o(d)}getStartState(d){return this.store.getStartState(d,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}e.TokenizerWithStateStore=t;class i extends t{constructor(d,m,h,v){super(d,m),this._textModel=h,this._languageIdCodec=v}updateTokensUntilLine(d,m){const h=this._textModel.getLanguageId();for(;;){const v=this.getFirstInvalidLine();if(!v||v.lineNumber>m)break;const C=this._textModel.getLineContent(v.lineNumber),w=l(this._languageIdCodec,h,this.tokenizationSupport,C,!0,v.startState);d.add(v.lineNumber,w.tokens),this.store.setEndState(v.lineNumber,w.endState)}}getTokenTypeIfInsertingCharacter(d,m){const h=this.getStartState(d.lineNumber);if(!h)return 0;const v=this._textModel.getLanguageId(),C=this._textModel.getLineContent(d.lineNumber),w=C.substring(0,d.column-1)+m+C.substring(d.column-1),S=l(this._languageIdCodec,v,this.tokenizationSupport,w,!0,h),D=new s.LineTokens(S.tokens,w,this._languageIdCodec);if(D.getCount()===0)return 0;const I=D.findTokenIndexAtOffset(d.column-1);return D.getStandardTokenType(I)}tokenizeLineWithEdit(d,m,h){const v=d.lineNumber,C=d.column,w=this.getStartState(v);if(!w)return null;const S=this._textModel.getLineContent(v),D=S.substring(0,C-1)+h+S.substring(C-1+m),I=this._textModel.getLanguageIdAtPosition(v,0),T=l(this._languageIdCodec,I,this.tokenizationSupport,D,!0,w);return new s.LineTokens(T.tokens,D,this._languageIdCodec)}hasAccurateTokensForLine(d){const m=this.store.getFirstInvalidEndStateLineNumberOrMax();return d<m}isCheapToTokenize(d){const m=this.store.getFirstInvalidEndStateLineNumberOrMax();return d<m||d===m&&this._textModel.getLineLength(d)<2048}tokenizeHeuristically(d,m,h){if(h<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(m<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(d,h),{heuristicTokens:!1};let v=this.guessStartState(m);const C=this._textModel.getLanguageId();for(let w=m;w<=h;w++){const S=this._textModel.getLineContent(w),D=l(this._languageIdCodec,C,this.tokenizationSupport,S,!0,v);d.add(w,D.tokens),v=D.endState}return{heuristicTokens:!0}}guessStartState(d){let m=this._textModel.getLineFirstNonWhitespaceColumn(d);const h=[];let v=null;for(let S=d-1;m>1&&S>=1;S--){const D=this._textModel.getLineFirstNonWhitespaceColumn(S);if(D!==0&&D<m&&(h.push(this._textModel.getLineContent(S)),m=D,v=this.getStartState(S),v))break}v||(v=this.tokenizationSupport.getInitialState()),h.reverse();const C=this._textModel.getLanguageId();let w=v;for(const S of h)w=l(this._languageIdCodec,C,this.tokenizationSupport,S,!1,w).endState;return w}}e.TokenizerWithStateStoreAndTextModel=i;class o{constructor(d){this.lineCount=d,this._tokenizationStateStore=new g,this._invalidEndStatesLineNumbers=new u,this._invalidEndStatesLineNumbers.addRange(new _.OffsetRange(1,d+1))}getEndState(d){return this._tokenizationStateStore.getEndState(d)}setEndState(d,m){if(!m)throw new k.BugIndicatingError("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(d);const h=this._tokenizationStateStore.setEndState(d,m);return h&&d<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new _.OffsetRange(d+1,d+2)),h}acceptChange(d,m){this.lineCount+=m-d.length,this._tokenizationStateStore.acceptChange(d,m),this._invalidEndStatesLineNumbers.addRangeAndResize(new _.OffsetRange(d.startLineNumber,d.endLineNumberExclusive),m)}acceptChanges(d){for(const m of d){const[h]=(0,y.countEOL)(m.text);this.acceptChange(new f.LineRange(m.range.startLineNumber,m.range.endLineNumber+1),h+1)}}invalidateEndStateRange(d){this._invalidEndStatesLineNumbers.addRange(new _.OffsetRange(d.startLineNumber,d.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(d,m){return d===1?m:this.getEndState(d-1)}getFirstInvalidLine(d){const m=this.getFirstInvalidEndStateLineNumber();if(m===null)return null;const h=this.getStartState(m,d);if(!h)throw new k.BugIndicatingError("Start state must be defined");return{lineNumber:m,startState:h}}}e.TrackingTokenizationStateStore=o;class g{constructor(){this._lineEndStates=new p.FixedArray(null)}getEndState(d){return this._lineEndStates.get(d)}setEndState(d,m){const h=this._lineEndStates.get(d);return h&&h.equals(m)?!1:(this._lineEndStates.set(d,m),!0)}acceptChange(d,m){let h=d.length;m>0&&h>0&&(h--,m--),this._lineEndStates.replace(d.startLineNumber,h,m)}}e.TokenizationStateStore=g;class u{constructor(){this._ranges=[]}get min(){return this._ranges.length===0?null:this._ranges[0].start}delete(d){const m=this._ranges.findIndex(h=>h.contains(d));if(m!==-1){const h=this._ranges[m];h.start===d?h.endExclusive===d+1?this._ranges.splice(m,1):this._ranges[m]=new _.OffsetRange(d+1,h.endExclusive):h.endExclusive===d+1?this._ranges[m]=new _.OffsetRange(h.start,d):this._ranges.splice(m,1,new _.OffsetRange(h.start,d),new _.OffsetRange(d+1,h.endExclusive))}}addRange(d){_.OffsetRange.addRange(d,this._ranges)}addRangeAndResize(d,m){let h=0;for(;!(h>=this._ranges.length||d.start<=this._ranges[h].endExclusive);)h++;let v=h;for(;!(v>=this._ranges.length||d.endExclusive<this._ranges[v].start);)v++;const C=m-d.length;for(let w=v;w<this._ranges.length;w++)this._ranges[w]=this._ranges[w].delta(C);if(h===v){const w=new _.OffsetRange(d.start,d.start+m);w.isEmpty||this._ranges.splice(h,0,w)}else{const w=Math.min(d.start,this._ranges[h].start),S=Math.max(d.endExclusive,this._ranges[v-1].endExclusive),D=new _.OffsetRange(w,S+C);D.isEmpty?this._ranges.splice(h,v-h):this._ranges.splice(h,v-h,D)}}toString(){return this._ranges.map(d=>d.toString()).join(" + ")}}e.RangePriorityQueueImpl=u;function l(r,d,m,h,v,C){let w=null;if(m)try{w=m.tokenizeEncoded(h,v,C.clone())}catch(S){(0,k.onUnexpectedError)(S)}return w||(w=(0,b.nullTokenizeEncoded)(r.encodeLanguageId(d),C)),s.LineTokens.convertToEndOffset(w.tokens,h.length),w}class a{constructor(d,m){this._tokenizerWithStateStore=d,this._backgroundTokenStore=m,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,(0,c.runWhenGlobalIdle)(d=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(d)}))}_backgroundTokenizeWithDeadline(d){const m=Date.now()+d.timeRemaining(),h=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<m?(0,E.setTimeout0)(h):this._beginBackgroundTokenization())};h()}_backgroundTokenizeForAtLeast1ms(){const d=this._tokenizerWithStateStore._textModel.getLineCount(),m=new n.ContiguousMultilineTokensBuilder,h=L.StopWatch.create(!1);do if(h.elapsed()>1||this._tokenizeOneInvalidLine(m)>=d)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(m.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(d){const m=this._tokenizerWithStateStore?.getFirstInvalidLine();return m?(this._tokenizerWithStateStore.updateTokensUntilLine(d,m.lineNumber),m.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(d,m){this._tokenizerWithStateStore.store.invalidateEndStateRange(new f.LineRange(d,m))}}e.DefaultBackgroundTokenizer=a}),define(oe[662],re([1,0,13,14,8,6,2,144,56,9,169,28,338,661,345,606,608]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenizationTextModelPart=void 0;class u extends s.TextModelPart{constructor(d,m,h,v,C,w){super(),this._languageService=d,this._languageConfigurationService=m,this._textModel=h,this._bracketPairsTextModelPart=v,this._languageId=C,this._attachedViews=w,this._semanticTokens=new g.SparseTokensStore(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new L.Emitter),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new L.Emitter),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new L.Emitter),this.onDidChangeTokens=this._onDidChangeTokens.event,this.grammarTokens=this._register(new l(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),this._register(this.grammarTokens.onDidChangeTokens(S=>{this._emitModelTokensChangedEvent(S)})),this._register(this.grammarTokens.onDidChangeBackgroundTokenizationState(S=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()}))}handleLanguageConfigurationServiceChange(d){d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(d){if(d.isFlush)this._semanticTokens.flush();else if(!d.isEolChange)for(const m of d.changes){const[h,v,C]=(0,f.countEOL)(m.text);this._semanticTokens.acceptEdit(m.range,h,v,C,m.text.length>0?m.text.charCodeAt(0):0)}this.grammarTokens.handleDidChangeContent(d)}handleDidChangeAttached(){this.grammarTokens.handleDidChangeAttached()}getLineTokens(d){this.validateLineNumber(d);const m=this.grammarTokens.getLineTokens(d);return this._semanticTokens.addSparseTokens(d,m)}_emitModelTokensChangedEvent(d){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(d),this._onDidChangeTokens.fire(d))}validateLineNumber(d){if(d<1||d>this._textModel.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber")}get hasTokens(){return this.grammarTokens.hasTokens}resetTokenization(){this.grammarTokens.resetTokenization()}get backgroundTokenizationState(){return this.grammarTokens.backgroundTokenizationState}forceTokenization(d){this.validateLineNumber(d),this.grammarTokens.forceTokenization(d)}hasAccurateTokensForLine(d){return this.validateLineNumber(d),this.grammarTokens.hasAccurateTokensForLine(d)}isCheapToTokenize(d){return this.validateLineNumber(d),this.grammarTokens.isCheapToTokenize(d)}tokenizeIfCheap(d){this.validateLineNumber(d),this.grammarTokens.tokenizeIfCheap(d)}getTokenTypeIfInsertingCharacter(d,m,h){return this.grammarTokens.getTokenTypeIfInsertingCharacter(d,m,h)}tokenizeLineWithEdit(d,m,h){return this.grammarTokens.tokenizeLineWithEdit(d,m,h)}setSemanticTokens(d,m){this._semanticTokens.set(d,m),this._emitModelTokensChangedEvent({semanticTokensApplied:d!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(d,m){if(this.hasCompleteSemanticTokens())return;const h=this._textModel.validateRange(this._semanticTokens.setPartial(d,m));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:h.startLineNumber,toLineNumber:h.endLineNumber}]})}getWordAtPosition(d){this.assertNotDisposed();const m=this._textModel.validatePosition(d),h=this._textModel.getLineContent(m.lineNumber),v=this.getLineTokens(m.lineNumber),C=v.findTokenIndexAtOffset(m.column-1),[w,S]=u._findLanguageBoundaries(v,C),D=(0,p.getWordAtText)(m.column,this.getLanguageConfiguration(v.getLanguageId(C)).getWordDefinition(),h.substring(w,S),w);if(D&&D.startColumn<=d.column&&d.column<=D.endColumn)return D;if(C>0&&w===m.column-1){const[I,T]=u._findLanguageBoundaries(v,C-1),M=(0,p.getWordAtText)(m.column,this.getLanguageConfiguration(v.getLanguageId(C-1)).getWordDefinition(),h.substring(I,T),I);if(M&&M.startColumn<=d.column&&d.column<=M.endColumn)return M}return null}getLanguageConfiguration(d){return this._languageConfigurationService.getLanguageConfiguration(d)}static _findLanguageBoundaries(d,m){const h=d.getLanguageId(m);let v=0;for(let w=m;w>=0&&d.getLanguageId(w)===h;w--)v=d.getStartOffset(w);let C=d.getLineContent().length;for(let w=m,S=d.getCount();w<S&&d.getLanguageId(w)===h;w++)C=d.getEndOffset(w);return[v,C]}getWordUntilPosition(d){const m=this.getWordAtPosition(d);return m?{word:m.word.substr(0,d.column-m.startColumn),startColumn:m.startColumn,endColumn:d.column}:{word:"",startColumn:d.column,endColumn:d.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(d,m){const h=this._textModel.validatePosition(new b.Position(d,m)),v=this.getLineTokens(h.lineNumber);return v.getLanguageId(v.findTokenIndexAtOffset(h.column-1))}setLanguageId(d,m="api"){if(this._languageId===d)return;const h={oldLanguage:this._languageId,newLanguage:d,source:m};this._languageId=d,this._bracketPairsTextModelPart.handleDidChangeLanguage(h),this.grammarTokens.resetTokenization(),this._onDidChangeLanguage.fire(h),this._onDidChangeLanguageConfiguration.fire({})}}e.TokenizationTextModelPart=u;class l extends y.Disposable{get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(d,m,h,v){super(),this._languageIdCodec=d,this._textModel=m,this.getLanguageId=h,this._tokenizer=null,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new y.MutableDisposable),this._tokens=new o.ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new y.MutableDisposable),this._backgroundTokenizationState=1,this._onDidChangeBackgroundTokenizationState=this._register(new L.Emitter),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._onDidChangeTokens=this._register(new L.Emitter),this.onDidChangeTokens=this._onDidChangeTokens.event,this._attachedViewStates=this._register(new y.DisposableMap),this._register(n.TokenizationRegistry.onDidChange(C=>{const w=this.getLanguageId();C.changedLanguages.indexOf(w)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(v.onDidChangeVisibleRanges(({view:C,state:w})=>{if(w){let S=this._attachedViewStates.get(C);S||(S=new a(()=>this.refreshRanges(S.lineRanges)),this._attachedViewStates.set(C,S)),S.handleStateChange(w)}else this._attachedViewStates.deleteAndDispose(C)}))}resetTokenization(d=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new t.TrackingTokenizationStateStore(this._textModel.getLineCount())),d&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const m=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const C=n.TokenizationRegistry.get(this.getLanguageId());if(!C)return[null,null];let w;try{w=C.getInitialState()}catch(S){return(0,E.onUnexpectedError)(S),[null,null]}return[C,w]},[h,v]=m();if(h&&v?this._tokenizer=new t.TokenizerWithStateStoreAndTextModel(this._textModel.getLineCount(),h,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const C={setTokens:w=>{this.setTokens(w)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;const w=2;this._backgroundTokenizationState=w,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(w,S)=>{if(!this._tokenizer)return;const D=this._tokenizer.store.getFirstInvalidEndStateLineNumber();D!==null&&w>=D&&this._tokenizer?.store.setEndState(w,S)}};h&&h.createBackgroundTokenizer&&!h.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=h.createBackgroundTokenizer(this._textModel,C)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new t.DefaultBackgroundTokenizer(this._tokenizer,C),this._defaultBackgroundTokenizer.handleChanges()),h?.backgroundTokenizerShouldOnlyVerifyTokens&&h.createBackgroundTokenizer?(this._debugBackgroundTokens=new o.ContiguousTokensStore(this._languageIdCodec),this._debugBackgroundStates=new t.TrackingTokenizationStateStore(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=h.createBackgroundTokenizer(this._textModel,{setTokens:w=>{this._debugBackgroundTokens?.setMultilineTokens(w,this._textModel)},backgroundTokenizationFinished(){},setEndState:(w,S)=>{this._debugBackgroundStates?.setEndState(w,S)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(d){if(d.isFlush)this.resetTokenization(!1);else if(!d.isEolChange){for(const m of d.changes){const[h,v]=(0,f.countEOL)(m.text);this._tokens.acceptEdit(m.range,h,v),this._debugBackgroundTokens?.acceptEdit(m.range,h,v)}this._debugBackgroundStates?.acceptChanges(d.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(d.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(d){const{changes:m}=this._tokens.setMultilineTokens(d,this._textModel);return m.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:m}),{changes:m}}refreshAllVisibleLineTokens(){const d=_.LineRange.joinMany([...this._attachedViewStates].map(([m,h])=>h.lineRanges));this.refreshRanges(d)}refreshRanges(d){for(const m of d)this.refreshRange(m.startLineNumber,m.endLineNumberExclusive-1)}refreshRange(d,m){if(!this._tokenizer)return;d=Math.max(1,Math.min(this._textModel.getLineCount(),d)),m=Math.min(this._textModel.getLineCount(),m);const h=new i.ContiguousMultilineTokensBuilder,{heuristicTokens:v}=this._tokenizer.tokenizeHeuristically(h,d,m),C=this.setTokens(h.finalize());if(v)for(const w of C.changes)this._backgroundTokenizer.value?.requestTokens(w.fromLineNumber,w.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(d){const m=new i.ContiguousMultilineTokensBuilder;this._tokenizer?.updateTokensUntilLine(m,d),this.setTokens(m.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(d){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(d):!0}isCheapToTokenize(d){return this._tokenizer?this._tokenizer.isCheapToTokenize(d):!0}tokenizeIfCheap(d){this.isCheapToTokenize(d)&&this.forceTokenization(d)}getLineTokens(d){const m=this._textModel.getLineContent(d),h=this._tokens.getTokens(this._textModel.getLanguageId(),d-1,m);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>d&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>d){const v=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),d-1,m);!h.equals(v)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(d)}return h}getTokenTypeIfInsertingCharacter(d,m,h){if(!this._tokenizer)return 0;const v=this._textModel.validatePosition(new b.Position(d,m));return this.forceTokenization(v.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(v,h)}tokenizeLineWithEdit(d,m,h){if(!this._tokenizer)return null;const v=this._textModel.validatePosition(d);return this.forceTokenization(v.lineNumber),this._tokenizer.tokenizeLineWithEdit(v,m,h)}get hasTokens(){return this._tokens.hasTokens}}class a extends y.Disposable{get lineRanges(){return this._lineRanges}constructor(d){super(),this._refreshTokens=d,this.runner=this._register(new k.RunOnceScheduler(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){(0,c.equals)(this._computedLineRanges,this._lineRanges,(d,m)=>d.equals(m))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(d){this._lineRanges=d.visibleLineRanges,d.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}}),define(oe[373],re([1,0,18,6,72,22,9,4,23,28,249]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeyMod=void 0,e.createMonacoBaseAPI=s;class n{static{this.CtrlCmd=2048}static{this.Shift=1024}static{this.Alt=512}static{this.WinCtrl=256}static chord(i,o){return(0,E.KeyChord)(i,o)}}e.KeyMod=n;function s(){return{editor:void 0,languages:void 0,CancellationTokenSource:c.CancellationTokenSource,Emitter:k.Emitter,KeyCode:p.KeyCode,KeyMod:n,Position:y.Position,Range:f.Range,Selection:_.Selection,SelectionDirection:p.SelectionDirection,MarkerSeverity:p.MarkerSeverity,MarkerTag:p.MarkerTag,Uri:L.URI,Token:b.Token}}}),define(oe[663],re([1,0,190,22,9,4,594,169,575,581,373,59,343,572,54,574,597]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorSimpleWorker=void 0,e.create=a;class u extends y.MirrorTextModel{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(d){const m=[];for(let h=0;h<this._lines.length;h++){const v=this._lines[h],C=this.offsetAt(new E.Position(h+1,1)),w=v.matchAll(d);for(const S of w)(S.index||S.index===0)&&(S.index=S.index+C),m.push(S)}return m}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(d){return this._lines[d-1]}getWordAtPosition(d,m){const h=(0,f.getWordAtText)(d.column,(0,f.ensureValidWordDefinition)(m),this._lines[d.lineNumber-1],0);return h?new L.Range(d.lineNumber,h.startColumn,d.lineNumber,h.endColumn):null}words(d){const m=this._lines,h=this._wordenize.bind(this);let v=0,C="",w=0,S=[];return{*[Symbol.iterator](){for(;;)if(w<S.length){const D=C.substring(S[w].start,S[w].end);w+=1,yield D}else if(v<m.length)C=m[v],S=h(C,d),w=0,v+=1;else break}}}getLineWords(d,m){const h=this._lines[d-1],v=this._wordenize(h,m),C=[];for(const w of v)C.push({word:h.substring(w.start,w.end),startColumn:w.start+1,endColumn:w.end+1});return C}_wordenize(d,m){const h=[];let v;for(m.lastIndex=0;(v=m.exec(d))&&v[0].length!==0;)h.push({start:v.index,end:v.index+v[0].length});return h}getValueInRange(d){if(d=this._validateRange(d),d.startLineNumber===d.endLineNumber)return this._lines[d.startLineNumber-1].substring(d.startColumn-1,d.endColumn-1);const m=this._eol,h=d.startLineNumber-1,v=d.endLineNumber-1,C=[];C.push(this._lines[h].substring(d.startColumn-1));for(let w=h+1;w<v;w++)C.push(this._lines[w]);return C.push(this._lines[v].substring(0,d.endColumn-1)),C.join(m)}offsetAt(d){return d=this._validatePosition(d),this._ensureLineStarts(),this._lineStarts.getPrefixSum(d.lineNumber-2)+(d.column-1)}positionAt(d){d=Math.floor(d),d=Math.max(0,d),this._ensureLineStarts();const m=this._lineStarts.getIndexOf(d),h=this._lines[m.index].length;return{lineNumber:1+m.index,column:1+Math.min(m.remainder,h)}}_validateRange(d){const m=this._validatePosition({lineNumber:d.startLineNumber,column:d.startColumn}),h=this._validatePosition({lineNumber:d.endLineNumber,column:d.endColumn});return m.lineNumber!==d.startLineNumber||m.column!==d.startColumn||h.lineNumber!==d.endLineNumber||h.column!==d.endColumn?{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:h.lineNumber,endColumn:h.column}:d}_validatePosition(d){if(!E.Position.isIPosition(d))throw new Error("bad position");let{lineNumber:m,column:h}=d,v=!1;if(m<1)m=1,h=1,v=!0;else if(m>this._lines.length)m=this._lines.length,h=this._lines[m-1].length+1,v=!0;else{const C=this._lines[m-1].length+1;h<1?(h=1,v=!0):h>C&&(h=C,v=!0)}return v?{lineNumber:m,column:h}:d}}class l{constructor(d,m){this._host=d,this._models=Object.create(null),this._foreignModuleFactory=m,this._foreignModule=null}dispose(){this._models=Object.create(null)}_getModel(d){return this._models[d]}_getModels(){const d=[];return Object.keys(this._models).forEach(m=>d.push(this._models[m])),d}acceptNewModel(d){this._models[d.url]=new u(k.URI.parse(d.url),d.lines,d.EOL,d.versionId)}acceptModelChanged(d,m){if(!this._models[d])return;this._models[d].onEvents(m)}acceptRemovedModel(d){this._models[d]&&delete this._models[d]}async computeUnicodeHighlights(d,m,h){const v=this._getModel(d);return v?s.UnicodeTextModelHighlighter.computeUnicodeHighlights(v,m,h):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async findSectionHeaders(d,m){const h=this._getModel(d);return h?(0,g.findSectionHeaders)(h,m):[]}async computeDiff(d,m,h,v){const C=this._getModel(d),w=this._getModel(m);return!C||!w?null:l.computeDiff(C,w,h,v)}static computeDiff(d,m,h,v){const C=v==="advanced"?t.linesDiffComputers.getDefault():t.linesDiffComputers.getLegacy(),w=d.getLinesContent(),S=m.getLinesContent(),D=C.computeDiff(w,S,h),I=D.changes.length>0?!1:this._modelsAreIdentical(d,m);function T(M){return M.map(A=>[A.original.startLineNumber,A.original.endLineNumberExclusive,A.modified.startLineNumber,A.modified.endLineNumberExclusive,A.innerChanges?.map(R=>[R.originalRange.startLineNumber,R.originalRange.startColumn,R.originalRange.endLineNumber,R.originalRange.endColumn,R.modifiedRange.startLineNumber,R.modifiedRange.startColumn,R.modifiedRange.endLineNumber,R.modifiedRange.endColumn])])}return{identical:I,quitEarly:D.hitTimeout,changes:T(D.changes),moves:D.moves.map(M=>[M.lineRangeMapping.original.startLineNumber,M.lineRangeMapping.original.endLineNumberExclusive,M.lineRangeMapping.modified.startLineNumber,M.lineRangeMapping.modified.endLineNumberExclusive,T(M.changes)])}}static _modelsAreIdentical(d,m){const h=d.getLineCount(),v=m.getLineCount();if(h!==v)return!1;for(let C=1;C<=h;C++){const w=d.getLineContent(C),S=m.getLineContent(C);if(w!==S)return!1}return!0}static{this._diffLimit=1e5}async computeMoreMinimalEdits(d,m,h){const v=this._getModel(d);if(!v)return m;const C=[];let w;m=m.slice(0).sort((D,I)=>{if(D.range&&I.range)return L.Range.compareRangesUsingStarts(D.range,I.range);const T=D.range?0:1,M=I.range?0:1;return T-M});let S=0;for(let D=1;D<m.length;D++)L.Range.getEndPosition(m[S].range).equals(L.Range.getStartPosition(m[D].range))?(m[S].range=L.Range.fromPositions(L.Range.getStartPosition(m[S].range),L.Range.getEndPosition(m[D].range)),m[S].text+=m[D].text):(S++,m[S]=m[D]);m.length=S+1;for(let{range:D,text:I,eol:T}of m){if(typeof T=="number"&&(w=T),L.Range.isEmpty(D)&&!I)continue;const M=v.getValueInRange(D);if(I=I.replace(/\r\n|\n|\r/g,v.eol),M===I)continue;if(Math.max(I.length,M.length)>l._diffLimit){C.push({range:D,text:I});continue}const A=(0,c.stringDiff)(M,I,h),R=v.offsetAt(L.Range.lift(D).getStartPosition());for(const N of A){const O=v.positionAt(R+N.originalStart),x=v.positionAt(R+N.originalStart+N.originalLength),F={text:I.substr(N.modifiedStart,N.modifiedLength),range:{startLineNumber:O.lineNumber,startColumn:O.column,endLineNumber:x.lineNumber,endColumn:x.column}};v.getValueInRange(F.range)!==F.text&&C.push(F)}}return typeof w=="number"&&C.push({eol:w,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),C}async computeLinks(d){const m=this._getModel(d);return m?(0,_.computeLinks)(m):null}async computeDefaultDocumentColors(d){const m=this._getModel(d);return m?(0,o.computeDefaultDocumentColors)(m):null}static{this._suggestionsLimit=1e4}async textualSuggest(d,m,h,v){const C=new n.StopWatch,w=new RegExp(h,v),S=new Set;e:for(const D of d){const I=this._getModel(D);if(I){for(const T of I.words(w))if(!(T===m||!isNaN(Number(T)))&&(S.add(T),S.size>l._suggestionsLimit))break e}}return{words:Array.from(S),duration:C.elapsed()}}async computeWordRanges(d,m,h,v){const C=this._getModel(d);if(!C)return Object.create(null);const w=new RegExp(h,v),S=Object.create(null);for(let D=m.startLineNumber;D<m.endLineNumber;D++){const I=C.getLineWords(D,w);for(const T of I){if(!isNaN(Number(T.word)))continue;let M=S[T.word];M||(M=[],S[T.word]=M),M.push({startLineNumber:D,startColumn:T.startColumn,endLineNumber:D,endColumn:T.endColumn})}}return S}async navigateValueSet(d,m,h,v,C){const w=this._getModel(d);if(!w)return null;const S=new RegExp(v,C);m.startColumn===m.endColumn&&(m={startLineNumber:m.startLineNumber,startColumn:m.startColumn,endLineNumber:m.endLineNumber,endColumn:m.endColumn+1});const D=w.getValueInRange(m),I=w.getWordAtPosition({lineNumber:m.startLineNumber,column:m.startColumn},S);if(!I)return null;const T=w.getValueInRange(I);return b.BasicInplaceReplace.INSTANCE.navigateValueSet(m,D,I,T,h)}loadForeignModule(d,m,h){const v=(S,D)=>this._host.fhr(S,D),w={host:(0,i.createProxyObject)(h,v),getMirrorModels:()=>this._getModels()};return this._foreignModuleFactory?(this._foreignModule=this._foreignModuleFactory(w,m),Promise.resolve((0,i.getAllMethodNames)(this._foreignModule))):new Promise((S,D)=>{ae([d],I=>{this._foreignModule=I.create(w,m),S((0,i.getAllMethodNames)(this._foreignModule))},D)})}fmr(d,m){if(!this._foreignModule||typeof this._foreignModule[d]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+d));try{return Promise.resolve(this._foreignModule[d].apply(this._foreignModule,m))}catch(h){return Promise.reject(h)}}}e.EditorSimpleWorker=l;function a(r){return new l(r,null)}typeof importScripts=="function"&&(globalThis.monaco=(0,p.createMonacoBaseAPI)())}),define(oe[106],re([1,0,3]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneServicesNLS=e.ToggleHighContrastNLS=e.StandaloneCodeEditorNLS=e.QuickOutlineNLS=e.QuickCommandNLS=e.QuickHelpNLS=e.GoToLineNLS=e.InspectTokensNLS=void 0;var k;(function(n){n.inspectTokensAction=c.localize(1737,"Developer: Inspect Tokens")})(k||(e.InspectTokensNLS=k={}));var E;(function(n){n.gotoLineActionLabel=c.localize(1738,"Go to Line/Column...")})(E||(e.GoToLineNLS=E={}));var L;(function(n){n.helpQuickAccessActionLabel=c.localize(1739,"Show all Quick Access Providers")})(L||(e.QuickHelpNLS=L={}));var y;(function(n){n.quickCommandActionLabel=c.localize(1740,"Command Palette"),n.quickCommandHelp=c.localize(1741,"Show And Run Commands")})(y||(e.QuickCommandNLS=y={}));var f;(function(n){n.quickOutlineActionLabel=c.localize(1742,"Go to Symbol..."),n.quickOutlineByCategoryActionLabel=c.localize(1743,"Go to Symbol by Category...")})(f||(e.QuickOutlineNLS=f={}));var _;(function(n){n.editorViewAccessibleLabel=c.localize(1744,"Editor content"),n.accessibilityHelpMessage=c.localize(1745,"Press Alt+F1 for Accessibility Options.")})(_||(e.StandaloneCodeEditorNLS=_={}));var b;(function(n){n.toggleHighContrast=c.localize(1746,"Toggle High Contrast Theme")})(b||(e.ToggleHighContrastNLS=b={}));var p;(function(n){n.bulkEditServiceSummary=c.localize(1747,"Made {0} edits in {1} files")})(p||(e.StandaloneServicesNLS=p={}))}),define(oe[135],re([1,0,3,11,114,149,619]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderLineOutput2=e.RenderLineOutput=e.CharacterMapping=e.DomPosition=e.RenderLineInput=e.LineRange=void 0,e.renderViewLine=s,e.renderViewLine2=i;class f{constructor(S,D){this.startOffset=S,this.endOffset=D}equals(S){return this.startOffset===S.startOffset&&this.endOffset===S.endOffset}}e.LineRange=f;class _{constructor(S,D,I,T,M,A,R,N,O,x,F,W,z,q,H,K,U,Y,Q){this.useMonospaceOptimizations=S,this.canUseHalfwidthRightwardsArrow=D,this.lineContent=I,this.continuesWithWrappedLine=T,this.isBasicASCII=M,this.containsRTL=A,this.fauxIndentLength=R,this.lineTokens=N,this.lineDecorations=O.sort(L.LineDecoration.compare),this.tabSize=x,this.startVisibleColumn=F,this.spaceWidth=W,this.stopRenderingLineAfter=H,this.renderWhitespace=K==="all"?4:K==="boundary"?1:K==="selection"?2:K==="trailing"?3:0,this.renderControlCharacters=U,this.fontLigatures=Y,this.selectionsOnLine=Q&&Q.sort((P,te)=>P.startOffset<te.startOffset?-1:1);const X=Math.abs(q-W),G=Math.abs(z-W);X<G?(this.renderSpaceWidth=q,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=z,this.renderSpaceCharCode=183)}sameSelection(S){if(this.selectionsOnLine===null)return S===null;if(S===null||S.length!==this.selectionsOnLine.length)return!1;for(let D=0;D<this.selectionsOnLine.length;D++)if(!this.selectionsOnLine[D].equals(S[D]))return!1;return!0}equals(S){return this.useMonospaceOptimizations===S.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===S.canUseHalfwidthRightwardsArrow&&this.lineContent===S.lineContent&&this.continuesWithWrappedLine===S.continuesWithWrappedLine&&this.isBasicASCII===S.isBasicASCII&&this.containsRTL===S.containsRTL&&this.fauxIndentLength===S.fauxIndentLength&&this.tabSize===S.tabSize&&this.startVisibleColumn===S.startVisibleColumn&&this.spaceWidth===S.spaceWidth&&this.renderSpaceWidth===S.renderSpaceWidth&&this.renderSpaceCharCode===S.renderSpaceCharCode&&this.stopRenderingLineAfter===S.stopRenderingLineAfter&&this.renderWhitespace===S.renderWhitespace&&this.renderControlCharacters===S.renderControlCharacters&&this.fontLigatures===S.fontLigatures&&L.LineDecoration.equalsArr(this.lineDecorations,S.lineDecorations)&&this.lineTokens.equals(S.lineTokens)&&this.sameSelection(S.selectionsOnLine)}}e.RenderLineInput=_;class b{constructor(S,D){this.partIndex=S,this.charIndex=D}}e.DomPosition=b;class p{static getPartIndex(S){return(S&4294901760)>>>16}static getCharIndex(S){return(S&65535)>>>0}constructor(S,D){this.length=S,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(S,D,I,T){const M=(D<<16|I<<0)>>>0;this._data[S-1]=M,this._horizontalOffset[S-1]=T}getHorizontalOffset(S){return this._horizontalOffset.length===0?0:this._horizontalOffset[S-1]}charOffsetToPartData(S){return this.length===0?0:S<0?this._data[0]:S>=this.length?this._data[this.length-1]:this._data[S]}getDomPosition(S){const D=this.charOffsetToPartData(S-1),I=p.getPartIndex(D),T=p.getCharIndex(D);return new b(I,T)}getColumn(S,D){return this.partDataToCharOffset(S.partIndex,D,S.charIndex)+1}partDataToCharOffset(S,D,I){if(this.length===0)return 0;const T=(S<<16|I<<0)>>>0;let M=0,A=this.length-1;for(;M+1<A;){const H=M+A>>>1,K=this._data[H];if(K===T)return H;K>T?A=H:M=H}if(M===A)return M;const R=this._data[M],N=this._data[A];if(R===T)return M;if(N===T)return A;const O=p.getPartIndex(R),x=p.getCharIndex(R),F=p.getPartIndex(N);let W;O!==F?W=D:W=p.getCharIndex(N);const z=I-x,q=W-I;return z<=q?M:A}}e.CharacterMapping=p;class n{constructor(S,D,I){this._renderLineOutputBrand=void 0,this.characterMapping=S,this.containsRTL=D,this.containsForeignElements=I}}e.RenderLineOutput=n;function s(w,S){if(w.lineContent.length===0){if(w.lineDecorations.length>0){S.appendString("<span>");let D=0,I=0,T=0;for(const A of w.lineDecorations)(A.type===1||A.type===2)&&(S.appendString('<span class="'),S.appendString(A.className),S.appendString('"></span>'),A.type===1&&(T|=1,D++),A.type===2&&(T|=2,I++));S.appendString("</span>");const M=new p(1,D+I);return M.setColumnInfo(1,D,0,0),new n(M,!1,T)}return S.appendString("<span><span></span></span>"),new n(new p(0,0),!1,0)}return h(g(w),S)}class t{constructor(S,D,I,T){this.characterMapping=S,this.html=D,this.containsRTL=I,this.containsForeignElements=T}}e.RenderLineOutput2=t;function i(w){const S=new E.StringBuilder(1e4),D=s(w,S);return new t(D.characterMapping,S.build(),D.containsRTL,D.containsForeignElements)}class o{constructor(S,D,I,T,M,A,R,N,O,x,F,W,z,q,H,K){this.fontIsMonospace=S,this.canUseHalfwidthRightwardsArrow=D,this.lineContent=I,this.len=T,this.isOverflowing=M,this.overflowingCharCount=A,this.parts=R,this.containsForeignElements=N,this.fauxIndentLength=O,this.tabSize=x,this.startVisibleColumn=F,this.containsRTL=W,this.spaceWidth=z,this.renderSpaceCharCode=q,this.renderWhitespace=H,this.renderControlCharacters=K}}function g(w){const S=w.lineContent;let D,I,T;w.stopRenderingLineAfter!==-1&&w.stopRenderingLineAfter<S.length?(D=!0,I=S.length-w.stopRenderingLineAfter,T=w.stopRenderingLineAfter):(D=!1,I=0,T=S.length);let M=u(S,w.containsRTL,w.lineTokens,w.fauxIndentLength,T);w.renderControlCharacters&&!w.isBasicASCII&&(M=r(S,M)),(w.renderWhitespace===4||w.renderWhitespace===1||w.renderWhitespace===2&&w.selectionsOnLine||w.renderWhitespace===3&&!w.continuesWithWrappedLine)&&(M=d(w,S,T,M));let A=0;if(w.lineDecorations.length>0){for(let R=0,N=w.lineDecorations.length;R<N;R++){const O=w.lineDecorations[R];O.type===3||O.type===1?A|=1:O.type===2&&(A|=2)}M=m(S,T,M,w.lineDecorations)}return w.containsRTL||(M=l(S,M,!w.isBasicASCII||w.fontLigatures)),new o(w.useMonospaceOptimizations,w.canUseHalfwidthRightwardsArrow,S,T,D,I,M,A,w.fauxIndentLength,w.tabSize,w.startVisibleColumn,w.containsRTL,w.spaceWidth,w.renderSpaceCharCode,w.renderWhitespace,w.renderControlCharacters)}function u(w,S,D,I,T){const M=[];let A=0;I>0&&(M[A++]=new y.LinePart(I,"",0,!1));let R=I;for(let N=0,O=D.getCount();N<O;N++){const x=D.getEndOffset(N);if(x<=I)continue;const F=D.getClassName(N);if(x>=T){const z=S?k.containsRTL(w.substring(R,T)):!1;M[A++]=new y.LinePart(T,F,0,z);break}const W=S?k.containsRTL(w.substring(R,x)):!1;M[A++]=new y.LinePart(x,F,0,W),R=x}return M}function l(w,S,D){let I=0;const T=[];let M=0;if(D)for(let A=0,R=S.length;A<R;A++){const N=S[A],O=N.endIndex;if(I+50<O){const x=N.type,F=N.metadata,W=N.containsRTL;let z=-1,q=I;for(let H=I;H<O;H++)w.charCodeAt(H)===32&&(z=H),z!==-1&&H-q>=50&&(T[M++]=new y.LinePart(z+1,x,F,W),q=z+1,z=-1);q!==O&&(T[M++]=new y.LinePart(O,x,F,W))}else T[M++]=N;I=O}else for(let A=0,R=S.length;A<R;A++){const N=S[A],O=N.endIndex,x=O-I;if(x>50){const F=N.type,W=N.metadata,z=N.containsRTL,q=Math.ceil(x/50);for(let H=1;H<q;H++){const K=I+H*50;T[M++]=new y.LinePart(K,F,W,z)}T[M++]=new y.LinePart(O,F,W,z)}else T[M++]=N;I=O}return T}function a(w){return w<32?w!==9:w===127||w>=8234&&w<=8238||w>=8294&&w<=8297||w>=8206&&w<=8207||w===1564}function r(w,S){const D=[];let I=new y.LinePart(0,"",0,!1),T=0;for(const M of S){const A=M.endIndex;for(;T<A;T++){const R=w.charCodeAt(T);a(R)&&(T>I.endIndex&&(I=new y.LinePart(T,M.type,M.metadata,M.containsRTL),D.push(I)),I=new y.LinePart(T+1,"mtkcontrol",M.metadata,!1),D.push(I))}T>I.endIndex&&(I=new y.LinePart(A,M.type,M.metadata,M.containsRTL),D.push(I))}return D}function d(w,S,D,I){const T=w.continuesWithWrappedLine,M=w.fauxIndentLength,A=w.tabSize,R=w.startVisibleColumn,N=w.useMonospaceOptimizations,O=w.selectionsOnLine,x=w.renderWhitespace===1,F=w.renderWhitespace===3,W=w.renderSpaceWidth!==w.spaceWidth,z=[];let q=0,H=0,K=I[H].type,U=I[H].containsRTL,Y=I[H].endIndex;const Q=I.length;let X=!1,G=k.firstNonWhitespaceIndex(S),P;G===-1?(X=!0,G=D,P=D):P=k.lastNonWhitespaceIndex(S);let te=!1,se=0,ue=O&&O[se],ge=R%A;for(let ce=M;ce<D;ce++){const ie=S.charCodeAt(ce);ue&&ce>=ue.endOffset&&(se++,ue=O&&O[se]);let ne;if(ce<G||ce>P)ne=!0;else if(ie===9)ne=!0;else if(ie===32)if(x)if(te)ne=!0;else{const J=ce+1<D?S.charCodeAt(ce+1):0;ne=J===32||J===9}else ne=!0;else ne=!1;if(ne&&O&&(ne=!!ue&&ue.startOffset<=ce&&ue.endOffset>ce),ne&&F&&(ne=X||ce>P),ne&&U&&ce>=G&&ce<=P&&(ne=!1),te){if(!ne||!N&&ge>=A){if(W){const J=q>0?z[q-1].endIndex:M;for(let B=J+1;B<=ce;B++)z[q++]=new y.LinePart(B,"mtkw",1,!1)}else z[q++]=new y.LinePart(ce,"mtkw",1,!1);ge=ge%A}}else(ce===Y||ne&&ce>M)&&(z[q++]=new y.LinePart(ce,K,0,U),ge=ge%A);for(ie===9?ge=A:k.isFullWidthCharacter(ie)?ge+=2:ge++,te=ne;ce===Y&&(H++,H<Q);)K=I[H].type,U=I[H].containsRTL,Y=I[H].endIndex}let pe=!1;if(te)if(T&&x){const ce=D>0?S.charCodeAt(D-1):0,ie=D>1?S.charCodeAt(D-2):0;ce===32&&ie!==32&&ie!==9||(pe=!0)}else pe=!0;if(pe)if(W){const ce=q>0?z[q-1].endIndex:M;for(let ie=ce+1;ie<=D;ie++)z[q++]=new y.LinePart(ie,"mtkw",1,!1)}else z[q++]=new y.LinePart(D,"mtkw",1,!1);else z[q++]=new y.LinePart(D,K,0,U);return z}function m(w,S,D,I){I.sort(L.LineDecoration.compare);const T=L.LineDecorationsNormalizer.normalize(w,I),M=T.length;let A=0;const R=[];let N=0,O=0;for(let F=0,W=D.length;F<W;F++){const z=D[F],q=z.endIndex,H=z.type,K=z.metadata,U=z.containsRTL;for(;A<M&&T[A].startOffset<q;){const Y=T[A];if(Y.startOffset>O&&(O=Y.startOffset,R[N++]=new y.LinePart(O,H,K,U)),Y.endOffset+1<=q)O=Y.endOffset+1,R[N++]=new y.LinePart(O,H+" "+Y.className,K|Y.metadata,U),A++;else{O=q,R[N++]=new y.LinePart(O,H+" "+Y.className,K|Y.metadata,U);break}}q>O&&(O=q,R[N++]=new y.LinePart(O,H,K,U))}const x=D[D.length-1].endIndex;if(A<M&&T[A].startOffset===x)for(;A<M&&T[A].startOffset===x;){const F=T[A];R[N++]=new y.LinePart(O,F.className,F.metadata,!1),A++}return R}function h(w,S){const D=w.fontIsMonospace,I=w.canUseHalfwidthRightwardsArrow,T=w.containsForeignElements,M=w.lineContent,A=w.len,R=w.isOverflowing,N=w.overflowingCharCount,O=w.parts,x=w.fauxIndentLength,F=w.tabSize,W=w.startVisibleColumn,z=w.containsRTL,q=w.spaceWidth,H=w.renderSpaceCharCode,K=w.renderWhitespace,U=w.renderControlCharacters,Y=new p(A+1,O.length);let Q=!1,X=0,G=W,P=0,te=0,se=0;z?S.appendString('<span dir="ltr">'):S.appendString("<span>");for(let ue=0,ge=O.length;ue<ge;ue++){const pe=O[ue],ce=pe.endIndex,ie=pe.type,ne=pe.containsRTL,J=K!==0&&pe.isWhitespace(),B=J&&!D&&(ie==="mtkw"||!T),j=X===ce&&pe.isPseudoAfter();if(P=0,S.appendString("<span "),ne&&S.appendString('style="unicode-bidi:isolate" '),S.appendString('class="'),S.appendString(B?"mtkz":ie),S.appendASCIICharCode(34),J){let V=0;{let $=X,Z=G;for(;$<ce;$++){const le=(M.charCodeAt($)===9?F-Z%F:1)|0;V+=le,$>=x&&(Z+=le)}}for(B&&(S.appendString(' style="width:'),S.appendString(String(q*V)),S.appendString('px"')),S.appendASCIICharCode(62);X<ce;X++){Y.setColumnInfo(X+1,ue-se,P,te),se=0;const $=M.charCodeAt(X);let Z,ee;if($===9){Z=F-G%F|0,ee=Z,!I||ee>1?S.appendCharCode(8594):S.appendCharCode(65515);for(let le=2;le<=ee;le++)S.appendCharCode(160)}else Z=2,ee=1,S.appendCharCode(H),S.appendCharCode(8204);P+=Z,te+=ee,X>=x&&(G+=ee)}}else for(S.appendASCIICharCode(62);X<ce;X++){Y.setColumnInfo(X+1,ue-se,P,te),se=0;const V=M.charCodeAt(X);let $=1,Z=1;switch(V){case 9:$=F-G%F,Z=$;for(let ee=1;ee<=$;ee++)S.appendCharCode(160);break;case 32:S.appendCharCode(160);break;case 60:S.appendString("&lt;");break;case 62:S.appendString("&gt;");break;case 38:S.appendString("&amp;");break;case 0:U?S.appendCharCode(9216):S.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:S.appendCharCode(65533);break;default:k.isFullWidthCharacter(V)&&Z++,U&&V<32?S.appendCharCode(9216+V):U&&V===127?S.appendCharCode(9249):U&&a(V)?(S.appendString("[U+"),S.appendString(v(V)),S.appendString("]"),$=8,Z=$):S.appendCharCode(V)}P+=$,te+=Z,X>=x&&(G+=Z)}j?se++:se=0,X>=A&&!Q&&pe.isPseudoAfter()&&(Q=!0,Y.setColumnInfo(X+1,ue,P,te)),S.appendString("</span>")}return Q||Y.setColumnInfo(A+1,O.length-1,P,te),R&&(S.appendString('<span class="mtkoverflow">'),S.appendString(c.localize(1240,"Show more ({0})",C(N))),S.appendString("</span>")),S.appendString("</span>"),new n(Y,z,T)}function v(w){return w.toString(16).toUpperCase().padStart(4,"0")}function C(w){return w<1024?c.localize(1241,"{0} chars",w):w<1024*1024?`${(w/1024).toFixed(1)} KB`:`${(w/1024/1024).toFixed(1)} MB`}}),define(oe[664],re([1,0,102,75,37,114,149,135,95]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderOptions=e.LineSource=void 0,e.renderLines=p;const b=(0,c.createTrustedTypesPolicy)("diffEditorWidget",{createHTML:i=>i});function p(i,o,g,u){(0,k.applyFontInfo)(u,o.fontInfo);const l=g.length>0,a=new L.StringBuilder(1e4);let r=0,d=0;const m=[];for(let w=0;w<i.lineTokens.length;w++){const S=w+1,D=i.lineTokens[w],I=i.lineBreakData[w],T=y.LineDecoration.filter(g,S,1,Number.MAX_SAFE_INTEGER);if(I){let M=0;for(const A of I.breakOffsets){const R=D.sliceAndInflate(M,A,0);r=Math.max(r,t(d,R,y.LineDecoration.extractWrapped(T,M,A),l,i.mightContainNonBasicASCII,i.mightContainRTL,o,a)),d++,M=A}m.push(I.breakOffsets.length)}else m.push(1),r=Math.max(r,t(d,D,T,l,i.mightContainNonBasicASCII,i.mightContainRTL,o,a)),d++}r+=o.scrollBeyondLastColumn;const h=a.build(),v=b?b.createHTML(h):h;u.innerHTML=v;const C=r*o.typicalHalfwidthCharacterWidth;return{heightInLines:d,minWidthInPx:C,viewLineCounts:m}}class n{constructor(o,g,u,l){this.lineTokens=o,this.lineBreakData=g,this.mightContainNonBasicASCII=u,this.mightContainRTL=l}}e.LineSource=n;class s{static fromEditor(o){const g=o.getOptions(),u=g.get(50),l=g.get(146);return new s(o.getModel()?.getOptions().tabSize||0,u,g.get(33),u.typicalHalfwidthCharacterWidth,g.get(105),g.get(67),l.decorationsWidth,g.get(118),g.get(100),g.get(95),g.get(51))}constructor(o,g,u,l,a,r,d,m,h,v,C){this.tabSize=o,this.fontInfo=g,this.disableMonospaceOptimizations=u,this.typicalHalfwidthCharacterWidth=l,this.scrollBeyondLastColumn=a,this.lineHeight=r,this.lineDecorationsWidth=d,this.stopRenderingLineAfter=m,this.renderWhitespace=h,this.renderControlCharacters=v,this.fontLigatures=C}}e.RenderOptions=s;function t(i,o,g,u,l,a,r,d){d.appendString('<div class="view-line'),u||d.appendString(" char-delete"),d.appendString('" style="top:'),d.appendString(String(i*r.lineHeight)),d.appendString('px;width:1000000px;">');const m=o.getLineContent(),h=_.ViewLineRenderingData.isBasicASCII(m,l),v=_.ViewLineRenderingData.containsRTL(m,h,a),C=(0,f.renderViewLine)(new f.RenderLineInput(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,m,!1,h,v,0,o,g,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==E.EditorFontLigatures.OFF,null),d);return d.appendString("</div>"),C.characterMapping.getHorizontalOffset(C.characterMapping.length)}}),define(oe[374],re([1,0,6,2,324,28]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MinimapTokensColorTracker=void 0;class y extends k.Disposable{static{this._INSTANCE=null}static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,k.markAsSingleton)(new y)),this._INSTANCE}constructor(){super(),this._onDidChange=new c.Emitter,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(L.TokenizationRegistry.onDidChange(_=>{_.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){const _=L.TokenizationRegistry.getColorMap();if(!_){this._colors=[E.RGBA8.Empty],this._backgroundIsLight=!0;return}this._colors=[E.RGBA8.Empty];for(let p=1;p<_.length;p++){const n=_[p].rgba;this._colors[p]=new E.RGBA8(n.r,n.g,n.b,Math.round(n.a*255))}const b=_[2].getRelativeLuminance();this._backgroundIsLight=b>=.5,this._onDidChange.fire(void 0)}getColor(_){return(_<1||_>=this._colors.length)&&(_=2),this._colors[_]}backgroundIsLight(){return this._backgroundIsLight}}e.MinimapTokensColorTracker=y}),define(oe[375],re([1,0,9,4,95,37]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewModelDecorations=void 0,e.isModelDecorationVisible=f,e.isModelDecorationInComment=_,e.isModelDecorationInString=b;class y{constructor(s,t,i,o,g){this.editorId=s,this.model=t,this.configuration=i,this._linesCollection=o,this._coordinatesConverter=g,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(s){const t=s.id;let i=this._decorationsCache[t];if(!i){const o=s.range,g=s.options;let u;if(g.isWholeLine){const l=this._coordinatesConverter.convertModelPositionToViewPosition(new c.Position(o.startLineNumber,1),0,!1,!0),a=this._coordinatesConverter.convertModelPositionToViewPosition(new c.Position(o.endLineNumber,this.model.getLineMaxColumn(o.endLineNumber)),1);u=new k.Range(l.lineNumber,l.column,a.lineNumber,a.column)}else u=this._coordinatesConverter.convertModelRangeToViewRange(o,1);i=new E.ViewModelDecoration(u,g),this._decorationsCache[t]=i}return i}getMinimapDecorationsInRange(s){return this._getDecorationsInRange(s,!0,!1).decorations}getDecorationsViewportData(s){let t=this._cachedModelDecorationsResolver!==null;return t=t&&s.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(s,!1,!1),this._cachedModelDecorationsResolverViewRange=s),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(s,t=!1,i=!1){const o=new k.Range(s,this._linesCollection.getViewLineMinColumn(s),s,this._linesCollection.getViewLineMaxColumn(s));return this._getDecorationsInRange(o,t,i).inlineDecorations[0]}_getDecorationsInRange(s,t,i){const o=this._linesCollection.getDecorationsInRange(s,this.editorId,(0,L.filterValidationDecorations)(this.configuration.options),t,i),g=s.startLineNumber,u=s.endLineNumber,l=[];let a=0;const r=[];for(let d=g;d<=u;d++)r[d-g]=[];for(let d=0,m=o.length;d<m;d++){const h=o[d],v=h.options;if(!f(this.model,h))continue;const C=this._getOrCreateViewModelDecoration(h),w=C.range;if(l[a++]=C,v.inlineClassName){const S=new E.InlineDecoration(w,v.inlineClassName,v.inlineClassNameAffectsLetterSpacing?3:0),D=Math.max(g,w.startLineNumber),I=Math.min(u,w.endLineNumber);for(let T=D;T<=I;T++)r[T-g].push(S)}if(v.beforeContentClassName&&g<=w.startLineNumber&&w.startLineNumber<=u){const S=new E.InlineDecoration(new k.Range(w.startLineNumber,w.startColumn,w.startLineNumber,w.startColumn),v.beforeContentClassName,1);r[w.startLineNumber-g].push(S)}if(v.afterContentClassName&&g<=w.endLineNumber&&w.endLineNumber<=u){const S=new E.InlineDecoration(new k.Range(w.endLineNumber,w.endColumn,w.endLineNumber,w.endColumn),v.afterContentClassName,2);r[w.endLineNumber-g].push(S)}}return{decorations:l,inlineDecorations:r}}}e.ViewModelDecorations=y;function f(n,s){return!(s.options.hideInCommentTokens&&_(n,s)||s.options.hideInStringTokens&&b(n,s))}function _(n,s){return p(n,s.range,t=>t===1)}function b(n,s){return p(n,s.range,t=>t===2)}function p(n,s,t){for(let i=s.startLineNumber;i<=s.endLineNumber;i++){const o=n.tokenization.getLineTokens(i),g=i===s.startLineNumber,u=i===s.endLineNumber;let l=g?o.findTokenIndexAtOffset(s.startColumn-1):0;for(;l<o.getCount()&&!(u&&o.getStartOffset(l)>s.endColumn-1);){if(!t(o.getStandardTokenType(l)))return!1;l++}}return!0}}),define(oe[177],re([1,0,8,6,187,2,45,51,11,4,3]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReferencesModel=e.FileReferences=e.FilePreview=e.OneReference=void 0;class n{constructor(g,u,l,a){this.isProviderFirst=g,this.parent=u,this.link=l,this._rangeCallback=a,this.id=E.defaultGenerator.nextId()}get uri(){return this.link.uri}get range(){return this._range??this.link.targetSelectionRange??this.link.range}set range(g){this._range=g,this._rangeCallback(this)}get ariaMessage(){const g=this.parent.getPreview(this)?.preview(this.range);return g?(0,p.localize)(704,"{0} in {1} on line {2} at column {3}",g.value,(0,f.basename)(this.uri),this.range.startLineNumber,this.range.startColumn):(0,p.localize)(703,"in {0} on line {1} at column {2}",(0,f.basename)(this.uri),this.range.startLineNumber,this.range.startColumn)}}e.OneReference=n;class s{constructor(g){this._modelReference=g}dispose(){this._modelReference.dispose()}preview(g,u=8){const l=this._modelReference.object.textEditorModel;if(!l)return;const{startLineNumber:a,startColumn:r,endLineNumber:d,endColumn:m}=g,h=l.getWordUntilPosition({lineNumber:a,column:r-u}),v=new b.Range(a,h.startColumn,a,r),C=new b.Range(d,m,d,1073741824),w=l.getValueInRange(v).replace(/^\s+/,""),S=l.getValueInRange(g),D=l.getValueInRange(C).replace(/\s+$/,"");return{value:w+S+D,highlight:{start:w.length,end:w.length+S.length}}}}e.FilePreview=s;class t{constructor(g,u){this.parent=g,this.uri=u,this.children=[],this._previews=new y.ResourceMap}dispose(){(0,L.dispose)(this._previews.values()),this._previews.clear()}getPreview(g){return this._previews.get(g.uri)}get ariaMessage(){const g=this.children.length;return g===1?(0,p.localize)(705,"1 symbol in {0}, full path {1}",(0,f.basename)(this.uri),this.uri.fsPath):(0,p.localize)(706,"{0} symbols in {1}, full path {2}",g,(0,f.basename)(this.uri),this.uri.fsPath)}async resolve(g){if(this._previews.size!==0)return this;for(const u of this.children)if(!this._previews.has(u.uri))try{const l=await g.createModelReference(u.uri);this._previews.set(u.uri,new s(l))}catch(l){(0,c.onUnexpectedError)(l)}return this}}e.FileReferences=t;class i{constructor(g,u){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new k.Emitter,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=g,this._title=u;const[l]=g;g.sort(i._compareReferences);let a;for(const r of g)if((!a||!f.extUri.isEqual(a.uri,r.uri,!0))&&(a=new t(this,r.uri),this.groups.push(a)),a.children.length===0||i._compareReferences(r,a.children[a.children.length-1])!==0){const d=new n(l===r,a,r,m=>this._onDidChangeReferenceRange.fire(m));this.references.push(d),a.children.push(d)}}dispose(){(0,L.dispose)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new i(this._links,this._title)}get title(){return this._title}get isEmpty(){return this.groups.length===0}get ariaMessage(){return this.isEmpty?(0,p.localize)(707,"No results found"):this.references.length===1?(0,p.localize)(708,"Found 1 symbol in {0}",this.references[0].uri.fsPath):this.groups.length===1?(0,p.localize)(709,"Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,p.localize)(710,"Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(g,u){const{parent:l}=g;let a=l.children.indexOf(g);const r=l.children.length,d=l.parent.groups.length;return d===1||u&&a+1<r||!u&&a>0?(u?a=(a+1)%r:a=(a+r-1)%r,l.children[a]):(a=l.parent.groups.indexOf(l),u?(a=(a+1)%d,l.parent.groups[a].children[0]):(a=(a+d-1)%d,l.parent.groups[a].children[l.parent.groups[a].children.length-1]))}nearestReference(g,u){const l=this.references.map((a,r)=>({idx:r,prefixLen:_.commonPrefixLength(a.uri.toString(),g.toString()),offsetDist:Math.abs(a.range.startLineNumber-u.lineNumber)*100+Math.abs(a.range.startColumn-u.column)})).sort((a,r)=>a.prefixLen>r.prefixLen?-1:a.prefixLen<r.prefixLen?1:a.offsetDist<r.offsetDist?-1:a.offsetDist>r.offsetDist?1:0)[0];if(l)return this.references[l.idx]}referenceAt(g,u){for(const l of this.references)if(l.uri.toString()===g.toString()&&b.Range.containsPosition(l.range,u))return l}firstReference(){for(const g of this.references)if(g.isProviderFirst)return g;return this.references[0]}static _compareReferences(g,u){return f.extUri.compare(g.uri,u.uri)||b.Range.compareRangesUsingStarts(g.range,u.range)}}e.ReferencesModel=i}),define(oe[262],re([1,0,3]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DECREASE_HOVER_VERBOSITY_ACTION_LABEL=e.DECREASE_HOVER_VERBOSITY_ACTION_ID=e.INCREASE_HOVER_VERBOSITY_ACTION_LABEL=e.INCREASE_HOVER_VERBOSITY_ACTION_ID=e.GO_TO_BOTTOM_HOVER_ACTION_ID=e.GO_TO_TOP_HOVER_ACTION_ID=e.PAGE_DOWN_HOVER_ACTION_ID=e.PAGE_UP_HOVER_ACTION_ID=e.SCROLL_RIGHT_HOVER_ACTION_ID=e.SCROLL_LEFT_HOVER_ACTION_ID=e.SCROLL_DOWN_HOVER_ACTION_ID=e.SCROLL_UP_HOVER_ACTION_ID=e.SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID=e.SHOW_OR_FOCUS_HOVER_ACTION_ID=void 0,e.SHOW_OR_FOCUS_HOVER_ACTION_ID="editor.action.showHover",e.SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID="editor.action.showDefinitionPreviewHover",e.SCROLL_UP_HOVER_ACTION_ID="editor.action.scrollUpHover",e.SCROLL_DOWN_HOVER_ACTION_ID="editor.action.scrollDownHover",e.SCROLL_LEFT_HOVER_ACTION_ID="editor.action.scrollLeftHover",e.SCROLL_RIGHT_HOVER_ACTION_ID="editor.action.scrollRightHover",e.PAGE_UP_HOVER_ACTION_ID="editor.action.pageUpHover",e.PAGE_DOWN_HOVER_ACTION_ID="editor.action.pageDownHover",e.GO_TO_TOP_HOVER_ACTION_ID="editor.action.goToTopHover",e.GO_TO_BOTTOM_HOVER_ACTION_ID="editor.action.goToBottomHover",e.INCREASE_HOVER_VERBOSITY_ACTION_ID="editor.action.increaseHoverVerbosityLevel",e.INCREASE_HOVER_VERBOSITY_ACTION_LABEL=c.localize(698,"Increase Hover Verbosity Level"),e.DECREASE_HOVER_VERBOSITY_ACTION_ID="editor.action.decreaseHoverVerbosityLevel",e.DECREASE_HOVER_VERBOSITY_ACTION_LABEL=c.localize(699,"Decrease Hover Verbosity Level")}),define(oe[376],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibleViewRegistry=void 0,e.AccessibleViewRegistry=new class{constructor(){this._implementations=[]}register(k){return this._implementations.push(k),{dispose:()=>{const E=this._implementations.indexOf(k);E!==-1&&this._implementations.splice(E,1)}}}getImplementations(){return this._implementations}}}),define(oe[377],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLocalizedString=c,e.isICommandActionToggleInfo=k;function c(E){return E&&typeof E=="object"&&typeof E.original=="string"&&typeof E.value=="string"}function k(E){return E?E.condition!==void 0:!1}}),define(oe[665],re([1,0,3]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Categories=void 0,e.Categories=Object.freeze({View:(0,c.localize2)(1185,"View"),Help:(0,c.localize2)(1186,"Help"),Test:(0,c.localize2)(1187,"Test"),File:(0,c.localize2)(1188,"File"),Preferences:(0,c.localize2)(1189,"Preferences"),Developer:(0,c.localize2)(1190,"Developer")})}),define(oe[666],re([1,0,8,3]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scanner=void 0;function E(..._){switch(_.length){case 1:return(0,k.localize)(1131,"Did you mean {0}?",_[0]);case 2:return(0,k.localize)(1132,"Did you mean {0} or {1}?",_[0],_[1]);case 3:return(0,k.localize)(1133,"Did you mean {0}, {1} or {2}?",_[0],_[1],_[2]);default:return}}const L=(0,k.localize)(1134,"Did you forget to open or close the quote?"),y=(0,k.localize)(1135,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class f{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(b){switch(b.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return b.isTripleEq?"===":"==";case 4:return b.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return b.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return b.lexeme;case 18:return b.lexeme;case 19:return b.lexeme;case 20:return"EOF";default:throw(0,c.illegalState)(`unhandled token type: ${JSON.stringify(b)}; have you forgotten to add a case?`)}}static{this._regexFlags=new Set(["i","g","s","m","y","u"].map(b=>b.charCodeAt(0)))}static{this._keywords=new Map([["not",14],["in",13],["false",12],["true",11]])}reset(b){return this._input=b,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const p=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:p})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const p=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:p})}else this._match(126)?this._addToken(9):this._error(E("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(E("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(E("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(b){return this._isAtEnd()||this._input.charCodeAt(this._current)!==b?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(b){this._tokens.push({type:b,offset:this._start})}_error(b){const p=this._start,n=this._input.substring(this._start,this._current),s={type:19,offset:this._start,lexeme:n};this._errors.push({offset:p,lexeme:n,additionalInfo:b}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const b=this.stringRe.exec(this._input);if(b){this._current=this._start+b[0].length;const p=this._input.substring(this._start,this._current),n=f._keywords.get(p);n?this._addToken(n):this._tokens.push({type:17,lexeme:p,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(L);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let b=this._current,p=!1,n=!1;for(;;){if(b>=this._input.length){this._current=b,this._error(y);return}const t=this._input.charCodeAt(b);if(p)p=!1;else if(t===47&&!n){b++;break}else t===91?n=!0:t===92?p=!0:t===93&&(n=!1);b++}for(;b<this._input.length&&f._regexFlags.has(this._input.charCodeAt(b));)b++;this._current=b;const s=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}e.Scanner=f}),define(oe[667],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorOpenSource=void 0;var c;(function(k){k[k.API=0]="API",k[k.USER=1]="USER"})(c||(e.EditorOpenSource=c={}))}),define(oe[668],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExtensionIdentifierSet=e.ExtensionIdentifier=void 0;class c{constructor(L){this.value=L,this._lower=L.toLowerCase()}static toKey(L){return typeof L=="string"?L.toLowerCase():L._lower}}e.ExtensionIdentifier=c;class k{constructor(L){if(this._set=new Set,L)for(const y of L)this.add(y)}add(L){this._set.add(c.toKey(L))}has(L){return this._set.has(c.toKey(L))}}e.ExtensionIdentifierSet=k}),define(oe[378],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileKind=void 0;var c;(function(k){k[k.FILE=0]="FILE",k[k.FOLDER=1]="FOLDER",k[k.ROOT_FOLDER=2]="ROOT_FOLDER"})(c||(e.FileKind=c={}))}),define(oe[669],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showHistoryKeybindingHint=c;function c(k){return k.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&k.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}}),define(oe[263],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SyncDescriptor=void 0;class c{constructor(E,L=[],y=!1){this.ctor=E,this.staticArguments=L,this.supportsDelayedInstantiation=y}}e.SyncDescriptor=c}),define(oe[49],re([1,0,263]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerSingleton=E,e.getSingletonServiceDescriptors=L;const k=[];function E(y,f,_){f instanceof c.SyncDescriptor||(f=new c.SyncDescriptor(f,[],!!_)),k.push([y,f])}function L(){return k}}),define(oe[670],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Graph=e.Node=void 0;class c{constructor(L,y){this.key=L,this.data=y,this.incoming=new Map,this.outgoing=new Map}}e.Node=c;class k{constructor(L){this._hashFn=L,this._nodes=new Map}roots(){const L=[];for(const y of this._nodes.values())y.outgoing.size===0&&L.push(y);return L}insertEdge(L,y){const f=this.lookupOrInsertNode(L),_=this.lookupOrInsertNode(y);f.outgoing.set(_.key,_),_.incoming.set(f.key,f)}removeNode(L){const y=this._hashFn(L);this._nodes.delete(y);for(const f of this._nodes.values())f.outgoing.delete(y),f.incoming.delete(y)}lookupOrInsertNode(L){const y=this._hashFn(L);let f=this._nodes.get(y);return f||(f=new c(y,L),this._nodes.set(y,f)),f}isEmpty(){return this._nodes.size===0}toString(){const L=[];for(const[y,f]of this._nodes)L.push(`${y}
	(-> incoming)[${[...f.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...f.outgoing.keys()].join(",")}]
`);return L.join(`
`)}findCycleSlow(){for(const[L,y]of this._nodes){const f=new Set([L]),_=this._findCycle(y,f);if(_)return _}}_findCycle(L,y){for(const[f,_]of L.outgoing){if(y.has(f))return[...y,f].join(" -> ");y.add(f);const b=this._findCycle(_,y);if(b)return b;y.delete(f)}}}e.Graph=k}),define(oe[7],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IInstantiationService=e._util=void 0,e.createDecorator=E;var c;(function(L){L.serviceIds=new Map,L.DI_TARGET="$di$target",L.DI_DEPENDENCIES="$di$dependencies";function y(f){return f[L.DI_DEPENDENCIES]||[]}L.getServiceDependencies=y})(c||(e._util=c={})),e.IInstantiationService=E("instantiationService");function k(L,y,f){y[c.DI_TARGET]===y?y[c.DI_DEPENDENCIES].push({id:L,index:f}):(y[c.DI_DEPENDENCIES]=[{id:L,index:f}],y[c.DI_TARGET]=y)}function E(L){if(c.serviceIds.has(L))return c.serviceIds.get(L);const y=function(f,_,b){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");k(y,f,b)};return y.toString=()=>L,c.serviceIds.set(L,y),y}}),define(oe[151],re([1,0,7,22,19]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceFileEdit=e.ResourceTextEdit=e.ResourceEdit=e.IBulkEditService=void 0,e.IBulkEditService=(0,c.createDecorator)("IWorkspaceEditService");class L{constructor(b){this.metadata=b}static convert(b){return b.edits.map(p=>{if(y.is(p))return y.lift(p);if(f.is(p))return f.lift(p);throw new Error("Unsupported edit")})}}e.ResourceEdit=L;class y extends L{static is(b){return b instanceof y?!0:(0,E.isObject)(b)&&k.URI.isUri(b.resource)&&(0,E.isObject)(b.textEdit)}static lift(b){return b instanceof y?b:new y(b.resource,b.textEdit,b.versionId,b.metadata)}constructor(b,p,n=void 0,s){super(s),this.resource=b,this.textEdit=p,this.versionId=n}}e.ResourceTextEdit=y;class f extends L{static is(b){return b instanceof f?!0:(0,E.isObject)(b)&&(!!b.newResource||!!b.oldResource)}static lift(b){return b instanceof f?b:new f(b.oldResource,b.newResource,b.options,b.metadata)}constructor(b,p,n={},s){super(s),this.oldResource=b,this.newResource=p,this.options=n}}e.ResourceFileEdit=f}),define(oe[35],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ICodeEditorService=void 0,e.ICodeEditorService=(0,c.createDecorator)("codeEditorService")});var he=this&&this.__param||function(ae,e){return function(c,k){e(c,k,ae)}};define(oe[379],re([1,0,5,111,26,55,2,21,65,30,19,113,85,56,9,4,28,3,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.HideUnchangedRegionsFeature=void 0;let r=class extends y.Disposable{static{a=this}static{this._breadcrumbsSourceFactory=(0,f.observableValue)(a,()=>({dispose(){},getBreadcrumbItems(v,C){return[]}}))}static setBreadcrumbsSourceFactory(v){this._breadcrumbsSourceFactory.set(v,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(v,C,w,S){super(),this._editors=v,this._diffModel=C,this._options=w,this._instantiationService=S,this._modifiedOutlineSource=(0,_.derivedDisposable)(this,M=>{const A=this._editors.modifiedModel.read(M),R=a._breadcrumbsSourceFactory.read(M);return!A||!R?void 0:R(A,this._instantiationService)}),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition(M=>{if(M.reason===1)return;const A=this._diffModel.get();(0,f.transaction)(R=>{for(const N of this._editors.original.getSelections()||[])A?.ensureOriginalLineIsVisible(N.getStartPosition().lineNumber,0,R),A?.ensureOriginalLineIsVisible(N.getEndPosition().lineNumber,0,R)})})),this._register(this._editors.modified.onDidChangeCursorPosition(M=>{if(M.reason===1)return;const A=this._diffModel.get();(0,f.transaction)(R=>{for(const N of this._editors.modified.getSelections()||[])A?.ensureModifiedLineIsVisible(N.getStartPosition().lineNumber,0,R),A?.ensureModifiedLineIsVisible(N.getEndPosition().lineNumber,0,R)})}));const D=this._diffModel.map((M,A)=>{const R=M?.unchangedRegions.read(A)??[];return R.length===1&&R[0].modifiedLineNumber===1&&R[0].lineCount===this._editors.modifiedModel.read(A)?.getLineCount()?[]:R});this.viewZones=(0,f.derivedWithStore)(this,(M,A)=>{const R=this._modifiedOutlineSource.read(M);if(!R)return{origViewZones:[],modViewZones:[]};const N=[],O=[],x=this._options.renderSideBySide.read(M),F=this._options.compactMode.read(M),W=D.read(M);for(let z=0;z<W.length;z++){const q=W[z];if(!q.shouldHideControls(M)&&!(F&&(z===0||z===W.length-1)))if(F){{const H=(0,f.derived)(this,U=>q.getHiddenOriginalRange(U).startLineNumber-1),K=new s.PlaceholderViewZone(H,12);N.push(K),A.add(new d(this._editors.original,K,q,!x))}{const H=(0,f.derived)(this,U=>q.getHiddenModifiedRange(U).startLineNumber-1),K=new s.PlaceholderViewZone(H,12);O.push(K),A.add(new d(this._editors.modified,K,q))}}else{{const H=(0,f.derived)(this,U=>q.getHiddenOriginalRange(U).startLineNumber-1),K=new s.PlaceholderViewZone(H,24);N.push(K),A.add(new m(this._editors.original,K,q,q.originalUnchangedRange,!x,R,U=>this._diffModel.get().ensureModifiedLineIsVisible(U,2,void 0),this._options))}{const H=(0,f.derived)(this,U=>q.getHiddenModifiedRange(U).startLineNumber-1),K=new s.PlaceholderViewZone(H,24);O.push(K),A.add(new m(this._editors.modified,K,q,q.modifiedUnchangedRange,!1,R,U=>this._diffModel.get().ensureModifiedLineIsVisible(U,2,void 0),this._options))}}}return{origViewZones:N,modViewZones:O}});const I={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},T={description:"Fold Unchanged",glyphMarginHoverMessage:new L.MarkdownString(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,u.localize)(23,"Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+b.ThemeIcon.asClassName(E.Codicon.fold),zIndex:10001};this._register((0,s.applyObservableDecorations)(this._editors.original,(0,f.derived)(this,M=>{const A=D.read(M),R=A.map(N=>({range:N.originalUnchangedRange.toInclusiveRange(),options:I}));for(const N of A)N.shouldHideControls(M)&&R.push({range:o.Range.fromPositions(new i.Position(N.originalLineNumber,1)),options:T});return R}))),this._register((0,s.applyObservableDecorations)(this._editors.modified,(0,f.derived)(this,M=>{const A=D.read(M),R=A.map(N=>({range:N.modifiedUnchangedRange.toInclusiveRange(),options:I}));for(const N of A)N.shouldHideControls(M)&&R.push({range:t.LineRange.ofLength(N.modifiedLineNumber,1).toInclusiveRange(),options:T});return R}))),this._register((0,f.autorun)(M=>{const A=D.read(M);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(A.map(R=>R.getHiddenOriginalRange(M).toInclusiveRange()).filter(p.isDefined)),this._editors.modified.setHiddenAreas(A.map(R=>R.getHiddenModifiedRange(M).toInclusiveRange()).filter(p.isDefined))}finally{this._isUpdatingHiddenAreas=!1}})),this._register(this._editors.modified.onMouseUp(M=>{if(!M.event.rightButton&&M.target.position&&M.target.element?.className.includes("fold-unchanged")){const A=M.target.position.lineNumber,R=this._diffModel.get();if(!R)return;const N=R.unchangedRegions.get().find(O=>O.modifiedUnchangedRange.includes(A));if(!N)return;N.collapseAll(void 0),M.event.stopPropagation(),M.event.preventDefault()}})),this._register(this._editors.original.onMouseUp(M=>{if(!M.event.rightButton&&M.target.position&&M.target.element?.className.includes("fold-unchanged")){const A=M.target.position.lineNumber,R=this._diffModel.get();if(!R)return;const N=R.unchangedRegions.get().find(O=>O.originalUnchangedRange.includes(A));if(!N)return;N.collapseAll(void 0),M.event.stopPropagation(),M.event.preventDefault()}}))}};e.HideUnchangedRegionsFeature=r,e.HideUnchangedRegionsFeature=r=a=De([he(3,l.IInstantiationService)],r);class d extends s.ViewZoneOverlayWidget{constructor(v,C,w,S=!1){const D=(0,c.h)("div.diff-hidden-lines-widget");super(v,C,D.root),this._unchangedRegion=w,this._hide=S,this._nodes=(0,c.h)("div.diff-hidden-lines-compact",[(0,c.h)("div.line-left",[]),(0,c.h)("div.text@text",[]),(0,c.h)("div.line-right",[])]),D.root.appendChild(this._nodes.root),this._hide&&this._nodes.root.replaceChildren(),this._register((0,f.autorun)(I=>{if(!this._hide){const T=this._unchangedRegion.getHiddenModifiedRange(I).length,M=(0,u.localize)(24,"{0} hidden lines",T);this._nodes.text.innerText=M}}))}}class m extends s.ViewZoneOverlayWidget{constructor(v,C,w,S,D,I,T,M){const A=(0,c.h)("div.diff-hidden-lines-widget");super(v,C,A.root),this._editor=v,this._unchangedRegion=w,this._unchangedRegionRange=S,this._hide=D,this._modifiedOutlineSource=I,this._revealModifiedHiddenLine=T,this._options=M,this._nodes=(0,c.h)("div.diff-hidden-lines",[(0,c.h)("div.top@top",{title:(0,u.localize)(25,"Click or drag to show more above")}),(0,c.h)("div.center@content",{style:{display:"flex"}},[(0,c.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,c.$)("a",{title:(0,u.localize)(26,"Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,k.renderLabelWithIcons)("$(unfold)"))]),(0,c.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,c.h)("div.bottom@bottom",{title:(0,u.localize)(27,"Click or drag to show more below"),role:"button"})]),A.root.appendChild(this._nodes.root),this._hide?(0,c.reset)(this._nodes.first):this._register((0,s.applyStyle)(this._nodes.first,{width:(0,n.observableCodeEditor)(this._editor).layoutInfoContentLeft})),this._register((0,f.autorun)(N=>{const O=this._unchangedRegion.visibleLineCountTop.read(N)+this._unchangedRegion.visibleLineCountBottom.read(N)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!O),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(N)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(N)>0),this._nodes.top.classList.toggle("canMoveBottom",!O);const x=this._unchangedRegion.isDragged.read(N),F=this._editor.getDomNode();F&&(F.classList.toggle("draggingUnchangedRegion",!!x),x==="top"?(F.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(N)>0),F.classList.toggle("canMoveBottom",!O)):x==="bottom"?(F.classList.toggle("canMoveTop",!O),F.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(N)>0)):(F.classList.toggle("canMoveTop",!1),F.classList.toggle("canMoveBottom",!1)))}));const R=this._editor;this._register((0,c.addDisposableListener)(this._nodes.top,"mousedown",N=>{if(N.button!==0)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),N.preventDefault();const O=N.clientY;let x=!1;const F=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const W=(0,c.getWindow)(this._nodes.top),z=(0,c.addDisposableListener)(W,"mousemove",H=>{const U=H.clientY-O;x=x||Math.abs(U)>2;const Y=Math.round(U/R.getOption(67)),Q=Math.max(0,Math.min(F+Y,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(Q,void 0)}),q=(0,c.addDisposableListener)(W,"mouseup",H=>{x||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),z.dispose(),q.dispose()})})),this._register((0,c.addDisposableListener)(this._nodes.bottom,"mousedown",N=>{if(N.button!==0)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),N.preventDefault();const O=N.clientY;let x=!1;const F=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const W=(0,c.getWindow)(this._nodes.bottom),z=(0,c.addDisposableListener)(W,"mousemove",H=>{const U=H.clientY-O;x=x||Math.abs(U)>2;const Y=Math.round(U/R.getOption(67)),Q=Math.max(0,Math.min(F-Y,this._unchangedRegion.getMaxVisibleLineCountBottom())),X=this._unchangedRegionRange.endLineNumberExclusive>R.getModel().getLineCount()?R.getContentHeight():R.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(Q,void 0);const G=this._unchangedRegionRange.endLineNumberExclusive>R.getModel().getLineCount()?R.getContentHeight():R.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);R.setScrollTop(R.getScrollTop()+(G-X))}),q=(0,c.addDisposableListener)(W,"mouseup",H=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!x){const K=R.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const U=R.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);R.setScrollTop(R.getScrollTop()+(U-K))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),z.dispose(),q.dispose()})})),this._register((0,f.autorun)(N=>{const O=[];if(!this._hide){const x=w.getHiddenModifiedRange(N).length,F=(0,u.localize)(28,"{0} hidden lines",x),W=(0,c.$)("span",{title:(0,u.localize)(29,"Double click to unfold")},F);W.addEventListener("dblclick",H=>{H.button===0&&(H.preventDefault(),this._unchangedRegion.showAll(void 0))}),O.push(W);const z=this._unchangedRegion.getHiddenModifiedRange(N),q=this._modifiedOutlineSource.getBreadcrumbItems(z,N);if(q.length>0){O.push((0,c.$)("span",void 0,"\xA0\xA0|\xA0\xA0"));for(let H=0;H<q.length;H++){const K=q[H],U=g.SymbolKinds.toIcon(K.kind),Y=(0,c.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,k.renderIcon)(U),"\xA0",K.name,...H===q.length-1?[]:[(0,k.renderIcon)(E.Codicon.chevronRight)]]).root;O.push(Y),Y.onclick=()=>{this._revealModifiedHiddenLine(K.startLineNumber)}}}}(0,c.reset)(this._nodes.others,...O)}))}}}),define(oe[42],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ILanguageService=void 0,e.ILanguageService=(0,c.createDecorator)("languageService")}),define(oe[116],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IEditorWorkerService=void 0,e.IEditorWorkerService=(0,c.createDecorator)("editorWorkerService")}),define(oe[17],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ILanguageFeaturesService=void 0,e.ILanguageFeaturesService=(0,c.createDecorator)("ILanguageFeaturesService")}),define(oe[671],re([1,0,586,17,49]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageFeaturesService=void 0;class L{constructor(){this.referenceProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.renameProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.newSymbolNamesProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.codeActionProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.definitionProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.typeDefinitionProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.declarationProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.implementationProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentSymbolProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.inlayHintsProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.colorProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.codeLensProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentFormattingEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeFormattingEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.onTypeFormattingEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.signatureHelpProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.hoverProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentHighlightProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.multiDocumentHighlightProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.selectionRangeProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.foldingRangeProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.linkProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.inlineCompletionsProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.inlineEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.completionProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.linkedEditingRangeProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentRangeSemanticTokensProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentSemanticTokensProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentDropEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this)),this.documentPasteEditProvider=new c.LanguageFeatureRegistry(this._score.bind(this))}_score(f){return this._notebookTypeResolver?.(f)}}e.LanguageFeaturesService=L,(0,E.registerSingleton)(k.ILanguageFeaturesService,L,1)}),define(oe[264],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IMarkerDecorationsService=void 0,e.IMarkerDecorationsService=(0,c.createDecorator)("markerDecorationsService")}),define(oe[44],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IModelService=void 0,e.IModelService=(0,c.createDecorator)("modelService")}),define(oe[78],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITextModelService=void 0,e.ITextModelService=(0,c.createDecorator)("textModelService")}),define(oe[265],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISemanticTokensStylingService=void 0,e.ISemanticTokensStylingService=(0,c.createDecorator)("semanticTokensStylingService")}),define(oe[209],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITextResourcePropertiesService=e.ITextResourceConfigurationService=void 0,e.ITextResourceConfigurationService=(0,c.createDecorator)("textResourceConfigurationService"),e.ITextResourcePropertiesService=(0,c.createDecorator)("textResourcePropertiesService")}),define(oe[672],re([1,0,49,7,342]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITreeViewsDnDService=void 0,e.ITreeViewsDnDService=(0,k.createDecorator)("treeViewsDndService"),(0,c.registerSingleton)(e.ITreeViewsDnDService,E.TreeViewsDnDService,1)}),define(oe[266],re([1,0,151,134]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCombinedWorkspaceEdit=E,e.sortEditsByYieldTo=L;function E(y,f,_){return(typeof _.insertText=="string"?_.insertText==="":_.insertText.snippet==="")?{edits:_.additionalEdit?.edits??[]}:{edits:[...f.map(b=>new c.ResourceTextEdit(y,{range:b,text:typeof _.insertText=="string"?k.SnippetParser.escape(_.insertText)+"$0":_.insertText.snippet,insertAsSnippet:!0})),..._.additionalEdit?.edits??[]]}}function L(y){function f(s,t){return"mimeType"in s?s.mimeType===t.handledMimeType:!!t.kind&&s.kind.contains(t.kind)}const _=new Map;for(const s of y)for(const t of s.yieldTo??[])for(const i of y)if(i!==s&&f(t,i)){let o=_.get(s);o||(o=[],_.set(s,o)),o.push(i)}if(!_.size)return Array.from(y);const b=new Set,p=[];function n(s){if(!s.length)return[];const t=s[0];if(p.includes(t))return console.warn("Yield to cycle detected",t),s;if(b.has(t))return n(s.slice(1));let i=[];const o=_.get(t);return o&&(p.push(t),i=n(o),p.pop()),b.add(t),[...i,t,...n(s.slice(1))]}return n(Array.from(y))}}),define(oe[673],re([1,0,102,6,2,21,11,75,37,9,4,114,42,40,94,149,135,206,207,525]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ttPolicy=e.AdditionalLinesWidget=e.GhostTextWidget=e.GHOST_TEXT_DESCRIPTION=void 0,e.GHOST_TEXT_DESCRIPTION="ghost-text";let a=class extends E.Disposable{constructor(h,v,C){super(),this.editor=h,this.model=v,this.languageService=C,this.isDisposed=(0,L.observableValue)(this,!1),this.currentTextModel=(0,L.observableFromEvent)(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,L.derived)(this,w=>{if(this.isDisposed.read(w))return;const S=this.currentTextModel.read(w);if(S!==this.model.targetTextModel.read(w))return;const D=this.model.ghostText.read(w);if(!D)return;const I=D instanceof u.GhostTextReplacement?D.columnRange:void 0,T=[],M=[];function A(F,W){if(M.length>0){const z=M[M.length-1];W&&z.decorations.push(new o.LineDecoration(z.content.length+1,z.content.length+1+F[0].length,W,0)),z.content+=F[0],F=F.slice(1)}for(const z of F)M.push({content:z,decorations:W?[new o.LineDecoration(1,z.length+1,W,0)]:[]})}const R=S.getLineContent(D.lineNumber);let N,O=0;for(const F of D.parts){let W=F.lines;N===void 0?(T.push({column:F.column,text:W[0],preview:F.preview}),W=W.slice(1)):A([R.substring(O,F.column-1)],void 0),W.length>0&&(A(W,e.GHOST_TEXT_DESCRIPTION),N===void 0&&F.column<=R.length&&(N=F.column)),O=F.column-1}N!==void 0&&A([R.substring(O)],void 0);const x=N!==void 0?new l.ColumnRange(N,R.length+1):void 0;return{replacedRange:I,inlineTexts:T,additionalLines:M,hiddenRange:x,lineNumber:D.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(w),targetTextModel:S}}),this.decorations=(0,L.derived)(this,w=>{const S=this.uiState.read(w);if(!S)return[];const D=[];S.replacedRange&&D.push({range:S.replacedRange.toRange(S.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),S.hiddenRange&&D.push({range:S.hiddenRange.toRange(S.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const I of S.inlineTexts)D.push({range:p.Range.fromPositions(new b.Position(S.lineNumber,I.column)),options:{description:e.GHOST_TEXT_DESCRIPTION,after:{content:I.text,inlineClassName:I.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:t.InjectedTextCursorStops.Left},showIfCollapsed:!0}});return D}),this.additionalLinesWidget=this._register(new r(this.editor,this.languageService.languageIdCodec,(0,L.derived)(w=>{const S=this.uiState.read(w);return S?{lineNumber:S.lineNumber,additionalLines:S.additionalLines,minReservedLineCount:S.additionalReservedLineCount,targetTextModel:S.targetTextModel}:void 0}))),this._register((0,E.toDisposable)(()=>{this.isDisposed.set(!0,void 0)})),this._register((0,l.applyObservableDecorations)(this.editor,this.decorations))}ownsViewZone(h){return this.additionalLinesWidget.viewZoneId===h}};e.GhostTextWidget=a,e.GhostTextWidget=a=De([he(2,s.ILanguageService)],a);class r extends E.Disposable{get viewZoneId(){return this._viewZoneId}constructor(h,v,C){super(),this.editor=h,this.languageIdCodec=v,this.lines=C,this._viewZoneId=void 0,this.editorOptionsChanged=(0,L.observableSignalFromEvent)("editorOptionChanged",k.Event.filter(this.editor.onDidChangeConfiguration,w=>w.hasChanged(33)||w.hasChanged(118)||w.hasChanged(100)||w.hasChanged(95)||w.hasChanged(51)||w.hasChanged(50)||w.hasChanged(67))),this._register((0,L.autorun)(w=>{const S=this.lines.read(w);this.editorOptionsChanged.read(w),S?this.updateLines(S.lineNumber,S.additionalLines,S.minReservedLineCount):this.clear()}))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones(h=>{this._viewZoneId&&(h.removeZone(this._viewZoneId),this._viewZoneId=void 0)})}updateLines(h,v,C){const w=this.editor.getModel();if(!w)return;const{tabSize:S}=w.getOptions();this.editor.changeViewZones(D=>{this._viewZoneId&&(D.removeZone(this._viewZoneId),this._viewZoneId=void 0);const I=Math.max(v.length,C);if(I>0){const T=document.createElement("div");d(T,S,v,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=D.addZone({afterLineNumber:h,heightInLines:I,domNode:T,afterColumnAffinity:1})}})}}e.AdditionalLinesWidget=r;function d(m,h,v,C,w){const S=C.get(33),D=C.get(118),I="none",T=C.get(95),M=C.get(51),A=C.get(50),R=C.get(67),N=new n.StringBuilder(1e4);N.appendString('<div class="suggest-preview-text">');for(let F=0,W=v.length;F<W;F++){const z=v[F],q=z.content;N.appendString('<div class="view-line'),N.appendString('" style="top:'),N.appendString(String(F*R)),N.appendString('px;width:1000000px;">');const H=y.isBasicASCII(q),K=y.containsRTL(q),U=i.LineTokens.createEmpty(q,w);(0,g.renderViewLine)(new g.RenderLineInput(A.isMonospace&&!S,A.canUseHalfwidthRightwardsArrow,q,!1,H,K,0,U,z.decorations,h,0,A.spaceWidth,A.middotWidth,A.wsmiddotWidth,D,I,T,M!==_.EditorFontLigatures.OFF,null),N),N.appendString("</div>")}N.appendString("</div>"),(0,f.applyFontInfo)(m,A);const O=N.build(),x=e.ttPolicy?e.ttPolicy.createHTML(O):O;m.innerHTML=x}e.ttPolicy=(0,c.createTrustedTypesPolicy)("editorGhostText",{createHTML:m=>m})}),define(oe[152],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IStandaloneThemeService=void 0,e.IStandaloneThemeService=(0,c.createDecorator)("themeService")}),define(oe[136],re([1,0,3,7]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilitySignal=e.SoundSource=e.Sound=e.AcknowledgeDocCommentsToken=e.IAccessibilitySignalService=void 0,e.IAccessibilitySignalService=(0,k.createDecorator)("accessibilitySignalService"),e.AcknowledgeDocCommentsToken=Symbol("AcknowledgeDocCommentsToken");class E{static register(_){return new E(_.fileName)}static{this.error=E.register({fileName:"error.mp3"})}static{this.warning=E.register({fileName:"warning.mp3"})}static{this.success=E.register({fileName:"success.mp3"})}static{this.foldedArea=E.register({fileName:"foldedAreas.mp3"})}static{this.break=E.register({fileName:"break.mp3"})}static{this.quickFixes=E.register({fileName:"quickFixes.mp3"})}static{this.taskCompleted=E.register({fileName:"taskCompleted.mp3"})}static{this.taskFailed=E.register({fileName:"taskFailed.mp3"})}static{this.terminalBell=E.register({fileName:"terminalBell.mp3"})}static{this.diffLineInserted=E.register({fileName:"diffLineInserted.mp3"})}static{this.diffLineDeleted=E.register({fileName:"diffLineDeleted.mp3"})}static{this.diffLineModified=E.register({fileName:"diffLineModified.mp3"})}static{this.chatRequestSent=E.register({fileName:"chatRequestSent.mp3"})}static{this.chatResponseReceived1=E.register({fileName:"chatResponseReceived1.mp3"})}static{this.chatResponseReceived2=E.register({fileName:"chatResponseReceived2.mp3"})}static{this.chatResponseReceived3=E.register({fileName:"chatResponseReceived3.mp3"})}static{this.chatResponseReceived4=E.register({fileName:"chatResponseReceived4.mp3"})}static{this.clear=E.register({fileName:"clear.mp3"})}static{this.save=E.register({fileName:"save.mp3"})}static{this.format=E.register({fileName:"format.mp3"})}static{this.voiceRecordingStarted=E.register({fileName:"voiceRecordingStarted.mp3"})}static{this.voiceRecordingStopped=E.register({fileName:"voiceRecordingStopped.mp3"})}static{this.progress=E.register({fileName:"progress.mp3"})}constructor(_){this.fileName=_}}e.Sound=E;class L{constructor(_){this.randomOneOf=_}}e.SoundSource=L;class y{constructor(_,b,p,n,s,t){this.sound=_,this.name=b,this.legacySoundSettingsKey=p,this.settingsKey=n,this.legacyAnnouncementSettingsKey=s,this.announcementMessage=t}static{this._signals=new Set}static register(_){const b=new L("randomOneOf"in _.sound?_.sound.randomOneOf:[_.sound]),p=new y(b,_.name,_.legacySoundSettingsKey,_.settingsKey,_.legacyAnnouncementSettingsKey,_.announcementMessage);return y._signals.add(p),p}static{this.errorAtPosition=y.register({name:(0,c.localize)(1191,"Error at Position"),sound:E.error,announcementMessage:(0,c.localize)(1192,"Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"})}static{this.warningAtPosition=y.register({name:(0,c.localize)(1193,"Warning at Position"),sound:E.warning,announcementMessage:(0,c.localize)(1194,"Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"})}static{this.errorOnLine=y.register({name:(0,c.localize)(1195,"Error on Line"),sound:E.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:(0,c.localize)(1196,"Error on Line"),settingsKey:"accessibility.signals.lineHasError"})}static{this.warningOnLine=y.register({name:(0,c.localize)(1197,"Warning on Line"),sound:E.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:(0,c.localize)(1198,"Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"})}static{this.foldedArea=y.register({name:(0,c.localize)(1199,"Folded Area on Line"),sound:E.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:(0,c.localize)(1200,"Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"})}static{this.break=y.register({name:(0,c.localize)(1201,"Breakpoint on Line"),sound:E.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:(0,c.localize)(1202,"Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"})}static{this.inlineSuggestion=y.register({name:(0,c.localize)(1203,"Inline Suggestion on Line"),sound:E.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"})}static{this.terminalQuickFix=y.register({name:(0,c.localize)(1204,"Terminal Quick Fix"),sound:E.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:(0,c.localize)(1205,"Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"})}static{this.onDebugBreak=y.register({name:(0,c.localize)(1206,"Debugger Stopped on Breakpoint"),sound:E.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:(0,c.localize)(1207,"Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"})}static{this.noInlayHints=y.register({name:(0,c.localize)(1208,"No Inlay Hints on Line"),sound:E.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:(0,c.localize)(1209,"No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"})}static{this.taskCompleted=y.register({name:(0,c.localize)(1210,"Task Completed"),sound:E.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:(0,c.localize)(1211,"Task Completed"),settingsKey:"accessibility.signals.taskCompleted"})}static{this.taskFailed=y.register({name:(0,c.localize)(1212,"Task Failed"),sound:E.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:(0,c.localize)(1213,"Task Failed"),settingsKey:"accessibility.signals.taskFailed"})}static{this.terminalCommandFailed=y.register({name:(0,c.localize)(1214,"Terminal Command Failed"),sound:E.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:(0,c.localize)(1215,"Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"})}static{this.terminalCommandSucceeded=y.register({name:(0,c.localize)(1216,"Terminal Command Succeeded"),sound:E.success,announcementMessage:(0,c.localize)(1217,"Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"})}static{this.terminalBell=y.register({name:(0,c.localize)(1218,"Terminal Bell"),sound:E.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:(0,c.localize)(1219,"Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"})}static{this.notebookCellCompleted=y.register({name:(0,c.localize)(1220,"Notebook Cell Completed"),sound:E.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:(0,c.localize)(1221,"Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"})}static{this.notebookCellFailed=y.register({name:(0,c.localize)(1222,"Notebook Cell Failed"),sound:E.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:(0,c.localize)(1223,"Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"})}static{this.diffLineInserted=y.register({name:(0,c.localize)(1224,"Diff Line Inserted"),sound:E.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"})}static{this.diffLineDeleted=y.register({name:(0,c.localize)(1225,"Diff Line Deleted"),sound:E.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"})}static{this.diffLineModified=y.register({name:(0,c.localize)(1226,"Diff Line Modified"),sound:E.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"})}static{this.chatRequestSent=y.register({name:(0,c.localize)(1227,"Chat Request Sent"),sound:E.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:(0,c.localize)(1228,"Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"})}static{this.chatResponseReceived=y.register({name:(0,c.localize)(1229,"Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[E.chatResponseReceived1,E.chatResponseReceived2,E.chatResponseReceived3,E.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"})}static{this.progress=y.register({name:(0,c.localize)(1230,"Progress"),sound:E.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:(0,c.localize)(1231,"Progress"),settingsKey:"accessibility.signals.progress"})}static{this.clear=y.register({name:(0,c.localize)(1232,"Clear"),sound:E.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:(0,c.localize)(1233,"Clear"),settingsKey:"accessibility.signals.clear"})}static{this.save=y.register({name:(0,c.localize)(1234,"Save"),sound:E.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:(0,c.localize)(1235,"Save"),settingsKey:"accessibility.signals.save"})}static{this.format=y.register({name:(0,c.localize)(1236,"Format"),sound:E.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:(0,c.localize)(1237,"Format"),settingsKey:"accessibility.signals.format"})}static{this.voiceRecordingStarted=y.register({name:(0,c.localize)(1238,"Voice Recording Started"),sound:E.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"})}static{this.voiceRecordingStopped=y.register({name:(0,c.localize)(1239,"Voice Recording Stopped"),sound:E.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"})}}e.AccessibilitySignal=y}),define(oe[117],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IClipboardService=void 0,e.IClipboardService=(0,c.createDecorator)("clipboardService")}),define(oe[24],re([1,0,6,53,2,73,19,7]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CommandsRegistry=e.ICommandService=void 0,e.ICommandService=(0,f.createDecorator)("commandService"),e.CommandsRegistry=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new c.Emitter,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(_,b){if(!_)throw new Error("invalid command");if(typeof _=="string"){if(!b)throw new Error("invalid command");return this.registerCommand({id:_,handler:b})}if(_.metadata&&Array.isArray(_.metadata.args)){const i=[];for(const g of _.metadata.args)i.push(g.constraint);const o=_.handler;_.handler=function(g,...u){return(0,y.validateConstraints)(u,i),o(g,...u)}}const{id:p}=_;let n=this._commands.get(p);n||(n=new L.LinkedList,this._commands.set(p,n));const s=n.unshift(_),t=(0,E.toDisposable)(()=>{s(),this._commands.get(p)?.isEmpty()&&this._commands.delete(p)});return this._onDidRegisterCommand.fire(p),t}registerCommandAlias(_,b){return e.CommandsRegistry.registerCommand(_,(p,...n)=>p.get(e.ICommandService).executeCommand(b,...n))}getCommand(_){const b=this._commands.get(_);if(!(!b||b.isEmpty()))return k.Iterable.first(b)}getCommands(){const _=new Map;for(const b of this._commands.keys()){const p=this.getCommand(b);p&&_.set(b,p)}return _}},e.CommandsRegistry.registerCommand("noop",()=>{})}),define(oe[380],re([1,0,18,8,2,19,22,44,24,17]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeLensModel=void 0,e.getCodeLensModel=n;class p{constructor(){this.lenses=[],this._disposables=new E.DisposableStore}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(t,i){this._disposables.add(t);for(const o of t.lenses)this.lenses.push({symbol:o,provider:i})}}e.CodeLensModel=p;async function n(s,t,i){const o=s.ordered(t),g=new Map,u=new p,l=o.map(async(a,r)=>{g.set(a,r);try{const d=await Promise.resolve(a.provideCodeLenses(t,i));d&&u.add(d,a)}catch(d){(0,k.onUnexpectedExternalError)(d)}});return await Promise.all(l),u.lenses=u.lenses.sort((a,r)=>a.symbol.range.startLineNumber<r.symbol.range.startLineNumber?-1:a.symbol.range.startLineNumber>r.symbol.range.startLineNumber?1:g.get(a.provider)<g.get(r.provider)?-1:g.get(a.provider)>g.get(r.provider)?1:a.symbol.range.startColumn<r.symbol.range.startColumn?-1:a.symbol.range.startColumn>r.symbol.range.startColumn?1:0),u}_.CommandsRegistry.registerCommand("_executeCodeLensProvider",function(s,...t){let[i,o]=t;(0,L.assertType)(y.URI.isUri(i)),(0,L.assertType)(typeof o=="number"||!o);const{codeLensProvider:g}=s.get(b.ILanguageFeaturesService),u=s.get(f.IModelService).getModel(i);if(!u)throw(0,k.illegalArgument)();const l=[],a=new E.DisposableStore;return n(g,u,c.CancellationToken.None).then(r=>{a.add(r);const d=[];for(const m of r.lenses)o==null||m.symbol.command?l.push(m.symbol):o-- >0&&m.provider.resolveCodeLens&&d.push(Promise.resolve(m.provider.resolveCodeLens(u,m.symbol,c.CancellationToken.None)).then(h=>l.push(h||m.symbol)));return Promise.all(d)}).then(()=>l).finally(()=>{setTimeout(()=>a.dispose(),100)})})}),define(oe[674],re([1,0,13,18,8,2,19,22,4,44,24,17]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinksList=e.Link=void 0,e.getLinks=i;class s{constructor(g,u){this._link=g,this._provider=u}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(g){return this._link.url?this._link.url:typeof this._provider.resolveLink=="function"?Promise.resolve(this._provider.resolveLink(this._link,g)).then(u=>(this._link=u||this._link,this._link.url?this.resolve(g):Promise.reject(new Error("missing")))):Promise.reject(new Error("missing"))}}e.Link=s;class t{constructor(g){this._disposables=new L.DisposableStore;let u=[];for(const[l,a]of g){const r=l.links.map(d=>new s(d,a));u=t._union(u,r),(0,L.isDisposable)(l)&&this._disposables.add(l)}this.links=u}dispose(){this._disposables.dispose(),this.links.length=0}static _union(g,u){const l=[];let a,r,d,m;for(a=0,d=0,r=g.length,m=u.length;a<r&&d<m;){const h=g[a],v=u[d];if(_.Range.areIntersectingOrTouching(h.range,v.range)){a++;continue}_.Range.compareRangesUsingStarts(h.range,v.range)<0?(l.push(h),a++):(l.push(v),d++)}for(;a<r;a++)l.push(g[a]);for(;d<m;d++)l.push(u[d]);return l}}e.LinksList=t;function i(o,g,u){const l=[],a=o.ordered(g).reverse().map((r,d)=>Promise.resolve(r.provideLinks(g,u)).then(m=>{m&&(l[d]=[m,r])},E.onUnexpectedExternalError));return Promise.all(a).then(()=>{const r=new t((0,c.coalesce)(l));return u.isCancellationRequested?(r.dispose(),new t([])):r})}p.CommandsRegistry.registerCommand("_executeLinkProvider",async(o,...g)=>{let[u,l]=g;(0,y.assertType)(u instanceof f.URI),typeof l!="number"&&(l=0);const{linkProvider:a}=o.get(n.ILanguageFeaturesService),r=o.get(b.IModelService).getModel(u);if(!r)return[];const d=await i(a,r,k.CancellationToken.None);if(!d)return[];for(let h=0;h<Math.min(l,d.links.length);h++)await d.links[h].resolve(k.CancellationToken.None);const m=d.links.slice(0);return d.dispose(),m})}),define(oe[381],re([1,0,18,8,22,44,24,19,598,4,17]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentSemanticTokensResult=void 0,e.isSemanticTokens=n,e.isSemanticTokensEdits=s,e.hasDocumentSemanticTokensProvider=i,e.getDocumentSemanticTokens=g,e.hasDocumentRangeSemanticTokensProvider=a,e.getDocumentRangeSemanticTokens=d;function n(m){return m&&!!m.data}function s(m){return m&&Array.isArray(m.edits)}class t{constructor(h,v,C){this.provider=h,this.tokens=v,this.error=C}}e.DocumentSemanticTokensResult=t;function i(m,h){return m.has(h)}function o(m,h){const v=m.orderedGroups(h);return v.length>0?v[0]:[]}async function g(m,h,v,C,w){const S=o(m,h),D=await Promise.all(S.map(async I=>{let T,M=null;try{T=await I.provideDocumentSemanticTokens(h,I===v?C:null,w)}catch(A){M=A,T=null}return(!T||!n(T)&&!s(T))&&(T=null),new t(I,T,M)}));for(const I of D){if(I.error)throw I.error;if(I.tokens)return I}return D.length>0?D[0]:null}function u(m,h){const v=m.orderedGroups(h);return v.length>0?v[0]:null}class l{constructor(h,v){this.provider=h,this.tokens=v}}function a(m,h){return m.has(h)}function r(m,h){const v=m.orderedGroups(h);return v.length>0?v[0]:[]}async function d(m,h,v,C){const w=r(m,h),S=await Promise.all(w.map(async D=>{let I;try{I=await D.provideDocumentRangeSemanticTokens(h,v,C)}catch(T){(0,k.onUnexpectedExternalError)(T),I=null}return(!I||!n(I))&&(I=null),new l(D,I)}));for(const D of S)if(D.tokens)return D;return S.length>0?S[0]:null}y.CommandsRegistry.registerCommand("_provideDocumentSemanticTokensLegend",async(m,...h)=>{const[v]=h;(0,f.assertType)(v instanceof E.URI);const C=m.get(L.IModelService).getModel(v);if(!C)return;const{documentSemanticTokensProvider:w}=m.get(p.ILanguageFeaturesService),S=u(w,C);return S?S[0].getLegend():m.get(y.ICommandService).executeCommand("_provideDocumentRangeSemanticTokensLegend",v)}),y.CommandsRegistry.registerCommand("_provideDocumentSemanticTokens",async(m,...h)=>{const[v]=h;(0,f.assertType)(v instanceof E.URI);const C=m.get(L.IModelService).getModel(v);if(!C)return;const{documentSemanticTokensProvider:w}=m.get(p.ILanguageFeaturesService);if(!i(w,C))return m.get(y.ICommandService).executeCommand("_provideDocumentRangeSemanticTokens",v,C.getFullModelRange());const S=await g(w,C,null,null,c.CancellationToken.None);if(!S)return;const{provider:D,tokens:I}=S;if(!I||!n(I))return;const T=(0,_.encodeSemanticTokensDto)({id:0,type:"full",data:I.data});return I.resultId&&D.releaseDocumentSemanticTokens(I.resultId),T}),y.CommandsRegistry.registerCommand("_provideDocumentRangeSemanticTokensLegend",async(m,...h)=>{const[v,C]=h;(0,f.assertType)(v instanceof E.URI);const w=m.get(L.IModelService).getModel(v);if(!w)return;const{documentRangeSemanticTokensProvider:S}=m.get(p.ILanguageFeaturesService),D=r(S,w);if(D.length===0)return;if(D.length===1)return D[0].getLegend();if(!C||!b.Range.isIRange(C))return console.warn("provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in"),D[0].getLegend();const I=await d(S,w,b.Range.lift(C),c.CancellationToken.None);if(I)return I.provider.getLegend()}),y.CommandsRegistry.registerCommand("_provideDocumentRangeSemanticTokens",async(m,...h)=>{const[v,C]=h;(0,f.assertType)(v instanceof E.URI),(0,f.assertType)(b.Range.isIRange(C));const w=m.get(L.IModelService).getModel(v);if(!w)return;const{documentRangeSemanticTokensProvider:S}=m.get(p.ILanguageFeaturesService),D=await d(S,w,b.Range.lift(C),c.CancellationToken.None);if(!(!D||!D.tokens))return(0,_.encodeSemanticTokensDto)({id:0,type:"full",data:D.tokens.data})})}),define(oe[27],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IConfigurationService=void 0,e.toValuesTree=k,e.addToValueTree=E,e.removeFromValueTree=L,e.getConfigurationValue=f,e.getLanguageTagSettingPlainKey=_,e.IConfigurationService=(0,c.createDecorator)("configurationService");function k(b,p){const n=Object.create(null);for(const s in b)E(n,s,b[s],p);return n}function E(b,p,n,s){const t=p.split("."),i=t.pop();let o=b;for(let g=0;g<t.length;g++){const u=t[g];let l=o[u];switch(typeof l){case"undefined":l=o[u]=Object.create(null);break;case"object":if(l===null){s(`Ignoring ${p} as ${t.slice(0,g+1).join(".")} is null`);return}break;default:s(`Ignoring ${p} as ${t.slice(0,g+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[i]=n}catch{s(`Ignoring ${p} as ${t.join(".")} is ${JSON.stringify(o)}`)}else s(`Ignoring ${p} as ${t.join(".")} is ${JSON.stringify(o)}`)}function L(b,p){const n=p.split(".");y(b,n)}function y(b,p){const n=p.shift();if(p.length===0){delete b[n];return}if(Object.keys(b).indexOf(n)!==-1){const s=b[n];typeof s=="object"&&!Array.isArray(s)&&(y(s,p),Object.keys(s).length===0&&delete b[n])}}function f(b,p,n){function s(o,g){let u=o;for(const l of g){if(typeof u!="object"||u===null)return;u=u[l]}return u}const t=p.split("."),i=s(b,t);return typeof i>"u"?n:i}function _(b){return b.replace(/[\[\]]/g,"")}}),define(oe[382],re([1,0,2,28,176,363,27]),function(ae,e,c,k,E,L,y){"use strict";var f;Object.defineProperty(e,"__esModule",{value:!0}),e.MonarchTokenizer=void 0;const _=5;class b{static{this._INSTANCE=new b(_)}static create(a,r){return this._INSTANCE.create(a,r)}constructor(a){this._maxCacheDepth=a,this._entries=Object.create(null)}create(a,r){if(a!==null&&a.depth>=this._maxCacheDepth)return new p(a,r);let d=p.getStackElementId(a);d.length>0&&(d+="|"),d+=r;let m=this._entries[d];return m||(m=new p(a,r),this._entries[d]=m,m)}}class p{constructor(a,r){this.parent=a,this.state=r,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(a){let r="";for(;a!==null;)r.length>0&&(r+="|"),r+=a.state,a=a.parent;return r}static _equals(a,r){for(;a!==null&&r!==null;){if(a===r)return!0;if(a.state!==r.state)return!1;a=a.parent,r=r.parent}return a===null&&r===null}equals(a){return p._equals(this,a)}push(a){return b.create(this,a)}pop(){return this.parent}popall(){let a=this;for(;a.parent;)a=a.parent;return a}switchTo(a){return b.create(this.parent,a)}}class n{constructor(a,r){this.languageId=a,this.state=r}equals(a){return this.languageId===a.languageId&&this.state.equals(a.state)}clone(){return this.state.clone()===this.state?this:new n(this.languageId,this.state)}}class s{static{this._INSTANCE=new s(_)}static create(a,r){return this._INSTANCE.create(a,r)}constructor(a){this._maxCacheDepth=a,this._entries=Object.create(null)}create(a,r){if(r!==null)return new t(a,r);if(a!==null&&a.depth>=this._maxCacheDepth)return new t(a,r);const d=p.getStackElementId(a);let m=this._entries[d];return m||(m=new t(a,null),this._entries[d]=m,m)}}class t{constructor(a,r){this.stack=a,this.embeddedLanguageData=r}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:s.create(this.stack,this.embeddedLanguageData)}equals(a){return!(a instanceof t)||!this.stack.equals(a.stack)?!1:this.embeddedLanguageData===null&&a.embeddedLanguageData===null?!0:this.embeddedLanguageData===null||a.embeddedLanguageData===null?!1:this.embeddedLanguageData.equals(a.embeddedLanguageData)}}class i{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(a){this._languageId=a}emit(a,r){this._lastTokenType===r&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=r,this._lastTokenLanguage=this._languageId,this._tokens.push(new k.Token(a,r,this._languageId)))}nestedLanguageTokenize(a,r,d,m){const h=d.languageId,v=d.state,C=k.TokenizationRegistry.get(h);if(!C)return this.enterLanguage(h),this.emit(m,""),v;const w=C.tokenize(a,r,v);if(m!==0)for(const S of w.tokens)this._tokens.push(new k.Token(S.offset+m,S.type,S.language));else this._tokens=this._tokens.concat(w.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,w.endState}finalize(a){return new k.TokenizationResult(this._tokens,a)}}class o{constructor(a,r){this._languageService=a,this._theme=r,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(a){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(a)}emit(a,r){const d=this._theme.match(this._currentLanguageId,r)|1024;this._lastTokenMetadata!==d&&(this._lastTokenMetadata=d,this._tokens.push(a),this._tokens.push(d))}static _merge(a,r,d){const m=a!==null?a.length:0,h=r.length,v=d!==null?d.length:0;if(m===0&&h===0&&v===0)return new Uint32Array(0);if(m===0&&h===0)return d;if(h===0&&v===0)return a;const C=new Uint32Array(m+h+v);a!==null&&C.set(a);for(let w=0;w<h;w++)C[m+w]=r[w];return d!==null&&C.set(d,m+h),C}nestedLanguageTokenize(a,r,d,m){const h=d.languageId,v=d.state,C=k.TokenizationRegistry.get(h);if(!C)return this.enterLanguage(h),this.emit(m,""),v;const w=C.tokenizeEncoded(a,r,v);if(m!==0)for(let S=0,D=w.tokens.length;S<D;S+=2)w.tokens[S]+=m;return this._prependTokens=o._merge(this._prependTokens,this._tokens,w.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,w.endState}finalize(a){return new k.EncodedTokenizationResult(o._merge(this._prependTokens,this._tokens,null),a)}}let g=f=class extends c.Disposable{constructor(a,r,d,m,h){super(),this._configurationService=h,this._languageService=a,this._standaloneThemeService=r,this._languageId=d,this._lexer=m,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let v=!1;this._register(k.TokenizationRegistry.onDidChange(C=>{if(v)return;let w=!1;for(let S=0,D=C.changedLanguages.length;S<D;S++){const I=C.changedLanguages[S];if(this._embeddedLanguages[I]){w=!0;break}}w&&(v=!0,k.TokenizationRegistry.handleChange([this._languageId]),v=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._register(this._configurationService.onDidChangeConfiguration(C=>{C.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}getLoadStatus(){const a=[];for(const r in this._embeddedLanguages){const d=k.TokenizationRegistry.get(r);if(d){if(d instanceof f){const m=d.getLoadStatus();m.loaded===!1&&a.push(m.promise)}continue}k.TokenizationRegistry.isResolved(r)||a.push(k.TokenizationRegistry.getOrCreate(r))}return a.length===0?{loaded:!0}:{loaded:!1,promise:Promise.all(a).then(r=>{})}}getInitialState(){const a=b.create(null,this._lexer.start);return s.create(a,null)}tokenize(a,r,d){if(a.length>=this._maxTokenizationLineLength)return(0,E.nullTokenize)(this._languageId,d);const m=new i,h=this._tokenize(a,r,d,m);return m.finalize(h)}tokenizeEncoded(a,r,d){if(a.length>=this._maxTokenizationLineLength)return(0,E.nullTokenizeEncoded)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),d);const m=new o(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),h=this._tokenize(a,r,d,m);return m.finalize(h)}_tokenize(a,r,d,m){return d.embeddedLanguageData?this._nestedTokenize(a,r,d,0,m):this._myTokenize(a,r,d,0,m)}_findLeavingNestedLanguageOffset(a,r){let d=this._lexer.tokenizer[r.stack.state];if(!d&&(d=L.findRules(this._lexer,r.stack.state),!d))throw L.createError(this._lexer,"tokenizer state is not defined: "+r.stack.state);let m=-1,h=!1;for(const v of d){if(!L.isIAction(v.action)||v.action.nextEmbedded!=="@pop")continue;h=!0;let C=v.resolveRegex(r.stack.state);const w=C.source;if(w.substr(0,4)==="^(?:"&&w.substr(w.length-1,1)===")"){const D=(C.ignoreCase?"i":"")+(C.unicode?"u":"");C=new RegExp(w.substr(4,w.length-5),D)}const S=a.search(C);S===-1||S!==0&&v.matchOnlyAtLineStart||(m===-1||S<m)&&(m=S)}if(!h)throw L.createError(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+r.stack.state);return m}_nestedTokenize(a,r,d,m,h){const v=this._findLeavingNestedLanguageOffset(a,d);if(v===-1){const S=h.nestedLanguageTokenize(a,r,d.embeddedLanguageData,m);return s.create(d.stack,new n(d.embeddedLanguageData.languageId,S))}const C=a.substring(0,v);C.length>0&&h.nestedLanguageTokenize(C,!1,d.embeddedLanguageData,m);const w=a.substring(v);return this._myTokenize(w,r,d,m+v,h)}_safeRuleName(a){return a?a.name:"(unknown)"}_myTokenize(a,r,d,m,h){h.enterLanguage(this._languageId);const v=a.length,C=r&&this._lexer.includeLF?a+`
`:a,w=C.length;let S=d.embeddedLanguageData,D=d.stack,I=0,T=null,M=!0;for(;M||I<w;){const A=I,R=D.depth,N=T?T.groups.length:0,O=D.state;let x=null,F=null,W=null,z=null,q=null;if(T){x=T.matches;const U=T.groups.shift();F=U.matched,W=U.action,z=T.rule,T.groups.length===0&&(T=null)}else{if(!M&&I>=w)break;M=!1;let U=this._lexer.tokenizer[O];if(!U&&(U=L.findRules(this._lexer,O),!U))throw L.createError(this._lexer,"tokenizer state is not defined: "+O);const Y=C.substr(I);for(const Q of U)if((I===0||!Q.matchOnlyAtLineStart)&&(x=Y.match(Q.resolveRegex(O)),x)){F=x[0],W=Q.action;break}}if(x||(x=[""],F=""),W||(I<w&&(x=[C.charAt(I)],F=x[0]),W=this._lexer.defaultToken),F===null)break;for(I+=F.length;L.isFuzzyAction(W)&&L.isIAction(W)&&W.test;)W=W.test(F,x,O,I===w);let H=null;if(typeof W=="string"||Array.isArray(W))H=W;else if(W.group)H=W.group;else if(W.token!==null&&W.token!==void 0){if(W.tokenSubst?H=L.substituteMatches(this._lexer,W.token,F,x,O):H=W.token,W.nextEmbedded)if(W.nextEmbedded==="@pop"){if(!S)throw L.createError(this._lexer,"cannot pop embedded language if not inside one");S=null}else{if(S)throw L.createError(this._lexer,"cannot enter embedded language from within an embedded language");q=L.substituteMatches(this._lexer,W.nextEmbedded,F,x,O)}if(W.goBack&&(I=Math.max(0,I-W.goBack)),W.switchTo&&typeof W.switchTo=="string"){let U=L.substituteMatches(this._lexer,W.switchTo,F,x,O);if(U[0]==="@"&&(U=U.substr(1)),L.findRules(this._lexer,U))D=D.switchTo(U);else throw L.createError(this._lexer,"trying to switch to a state '"+U+"' that is undefined in rule: "+this._safeRuleName(z))}else{if(W.transform&&typeof W.transform=="function")throw L.createError(this._lexer,"action.transform not supported");if(W.next)if(W.next==="@push"){if(D.depth>=this._lexer.maxStack)throw L.createError(this._lexer,"maximum tokenizer stack size reached: ["+D.state+","+D.parent.state+",...]");D=D.push(O)}else if(W.next==="@pop"){if(D.depth<=1)throw L.createError(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(z));D=D.pop()}else if(W.next==="@popall")D=D.popall();else{let U=L.substituteMatches(this._lexer,W.next,F,x,O);if(U[0]==="@"&&(U=U.substr(1)),L.findRules(this._lexer,U))D=D.push(U);else throw L.createError(this._lexer,"trying to set a next state '"+U+"' that is undefined in rule: "+this._safeRuleName(z))}}W.log&&typeof W.log=="string"&&L.log(this._lexer,this._lexer.languageId+": "+L.substituteMatches(this._lexer,W.log,F,x,O))}if(H===null)throw L.createError(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(z));const K=U=>{const Y=this._languageService.getLanguageIdByLanguageName(U)||this._languageService.getLanguageIdByMimeType(U)||U,Q=this._getNestedEmbeddedLanguageData(Y);if(I<w){const X=a.substr(I);return this._nestedTokenize(X,r,s.create(D,Q),m+I,h)}else return s.create(D,Q)};if(Array.isArray(H)){if(T&&T.groups.length>0)throw L.createError(this._lexer,"groups cannot be nested: "+this._safeRuleName(z));if(x.length!==H.length+1)throw L.createError(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(z));let U=0;for(let Y=1;Y<x.length;Y++)U+=x[Y].length;if(U!==F.length)throw L.createError(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(z));T={rule:z,matches:x,groups:[]};for(let Y=0;Y<H.length;Y++)T.groups[Y]={action:H[Y],matched:x[Y+1]};I-=F.length;continue}else{if(H==="@rematch"&&(I-=F.length,F="",x=null,H="",q!==null))return K(q);if(F.length===0){if(w===0||R!==D.depth||O!==D.state||(T?T.groups.length:0)!==N)continue;throw L.createError(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(z))}let U=null;if(L.isString(H)&&H.indexOf("@brackets")===0){const Y=H.substr(9),Q=u(this._lexer,F);if(!Q)throw L.createError(this._lexer,"@brackets token returned but no bracket defined as: "+F);U=L.sanitize(Q.token+Y)}else{const Y=H===""?"":H+this._lexer.tokenPostfix;U=L.sanitize(Y)}A<v&&h.emit(A+m,U)}if(q!==null)return K(q)}return s.create(D,S)}_getNestedEmbeddedLanguageData(a){if(!this._languageService.isRegisteredLanguageId(a))return new n(a,E.NullState);a!==this._languageId&&(this._languageService.requestBasicLanguageFeatures(a),k.TokenizationRegistry.getOrCreate(a),this._embeddedLanguages[a]=!0);const r=k.TokenizationRegistry.get(a);return r?new n(a,r.getInitialState()):new n(a,E.NullState)}};e.MonarchTokenizer=g,e.MonarchTokenizer=g=f=De([he(4,y.IConfigurationService)],g);function u(l,a){if(!a)return null;a=L.fixCase(l,a);const r=l.brackets;for(const d of r){if(d.open===a)return{token:d.token,bracketType:1};if(d.close===a)return{token:d.token,bracketType:-1}}return null}}),define(oe[675],re([1,0,102,11,28,94,135,95,382]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Colorizer=void 0;const b=(0,c.createTrustedTypesPolicy)("standaloneColorizer",{createHTML:i=>i});class p{static colorizeElement(o,g,u,l){l=l||{};const a=l.theme||"vs",r=l.mimeType||u.getAttribute("lang")||u.getAttribute("data-lang");if(!r)return console.error("Mode not detected"),Promise.resolve();const d=g.getLanguageIdByMimeType(r)||r;o.setTheme(a);const m=u.firstChild?u.firstChild.nodeValue:"";u.className+=" "+a;const h=v=>{const C=b?.createHTML(v)??v;u.innerHTML=C};return this.colorize(g,m||"",d,l).then(h,v=>console.error(v))}static async colorize(o,g,u,l){const a=o.languageIdCodec;let r=4;l&&typeof l.tabSize=="number"&&(r=l.tabSize),k.startsWithUTF8BOM(g)&&(g=g.substr(1));const d=k.splitLines(g);if(!o.isRegisteredLanguageId(u))return s(d,r,a);const m=await E.TokenizationRegistry.getOrCreate(u);return m?n(d,r,m,a):s(d,r,a)}static colorizeLine(o,g,u,l,a=4){const r=f.ViewLineRenderingData.isBasicASCII(o,g),d=f.ViewLineRenderingData.containsRTL(o,r,u);return(0,y.renderViewLine2)(new y.RenderLineInput(!1,!0,o,!1,r,d,0,l,[],a,0,0,0,0,-1,"none",!1,!1,null)).html}static colorizeModelLine(o,g,u=4){const l=o.getLineContent(g);o.tokenization.forceTokenization(g);const r=o.tokenization.getLineTokens(g).inflate();return this.colorizeLine(l,o.mightContainNonBasicASCII(),o.mightContainRTL(),r,u)}}e.Colorizer=p;function n(i,o,g,u){return new Promise((l,a)=>{const r=()=>{const d=t(i,o,g,u);if(g instanceof _.MonarchTokenizer){const m=g.getLoadStatus();if(m.loaded===!1){m.promise.then(r,a);return}}l(d)};r()})}function s(i,o,g){let u=[];const a=new Uint32Array(2);a[0]=0,a[1]=33587200;for(let r=0,d=i.length;r<d;r++){const m=i[r];a[0]=m.length;const h=new L.LineTokens(a,m,g),v=f.ViewLineRenderingData.isBasicASCII(m,!0),C=f.ViewLineRenderingData.containsRTL(m,v,!0),w=(0,y.renderViewLine2)(new y.RenderLineInput(!1,!0,m,!1,v,C,0,h,[],o,0,0,0,0,-1,"none",!1,!1,null));u=u.concat(w.html),u.push("<br/>")}return u.join("")}function t(i,o,g,u){let l=[],a=g.getInitialState();for(let r=0,d=i.length;r<d;r++){const m=i[r],h=g.tokenizeEncoded(m,!0,a);L.LineTokens.convertToEndOffset(h.tokens,m.length);const v=new L.LineTokens(h.tokens,m,u),C=f.ViewLineRenderingData.isBasicASCII(m,!0),w=f.ViewLineRenderingData.containsRTL(m,C,!0),S=(0,y.renderViewLine2)(new y.RenderLineInput(!1,!0,m,!1,C,w,0,v.inflate(),[],o,0,0,0,0,-1,"none",!1,!1,null));l=l.concat(S.html),l.push("<br/>"),a=h.endState}return l.join("")}}),define(oe[12],re([1,0,16,11,666,7,3]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IContextKeyService=e.RawContextKey=e.ContextKeyOrExpr=e.ContextKeyAndExpr=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.ContextKeyExpr=e.Parser=void 0,e.expressionsAreEqualWithConstantSubstitution=r,e.implies=U;const f=new Map;f.set("false",!1),f.set("true",!0),f.set("isMac",c.isMacintosh),f.set("isLinux",c.isLinux),f.set("isWindows",c.isWindows),f.set("isWeb",c.isWeb),f.set("isMacNative",c.isMacintosh&&!c.isWeb),f.set("isEdge",c.isEdge),f.set("isFirefox",c.isFirefox),f.set("isChrome",c.isChrome),f.set("isSafari",c.isSafari);const _=Object.prototype.hasOwnProperty,b={regexParsingWithErrorRecovery:!0},p=(0,y.localize)(1145,"Empty context key expression"),n=(0,y.localize)(1146,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),s=(0,y.localize)(1147,"'in' after 'not'."),t=(0,y.localize)(1148,"closing parenthesis ')'"),i=(0,y.localize)(1149,"Unexpected token"),o=(0,y.localize)(1150,"Did you forget to put && or || before the token?"),g=(0,y.localize)(1151,"Unexpected end of expression"),u=(0,y.localize)(1152,"Did you forget to put a context key?");class l{static{this._parseError=new Error}constructor(G=b){this._config=G,this._scanner=new E.Scanner,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(G){if(G===""){this._parsingErrors.push({message:p,offset:0,lexeme:"",additionalInfo:n});return}this._tokens=this._scanner.reset(G).scan(),this._current=0,this._parsingErrors=[];try{const P=this._expr();if(!this._isAtEnd()){const te=this._peek(),se=te.type===17?o:void 0;throw this._parsingErrors.push({message:i,offset:te.offset,lexeme:E.Scanner.getLexeme(te),additionalInfo:se}),l._parseError}return P}catch(P){if(P!==l._parseError)throw P;return}}_expr(){return this._or()}_or(){const G=[this._and()];for(;this._matchOne(16);){const P=this._and();G.push(P)}return G.length===1?G[0]:a.or(...G)}_and(){const G=[this._term()];for(;this._matchOne(15);){const P=this._term();G.push(P)}return G.length===1?G[0]:a.and(...G)}_term(){if(this._matchOne(2)){const G=this._peek();switch(G.type){case 11:return this._advance(),m.INSTANCE;case 12:return this._advance(),h.INSTANCE;case 0:{this._advance();const P=this._expr();return this._consume(1,t),P?.negate()}case 17:return this._advance(),I.create(G.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",G)}}return this._primary()}_primary(){const G=this._peek();switch(G.type){case 11:return this._advance(),a.true();case 12:return this._advance(),a.false();case 0:{this._advance();const P=this._expr();return this._consume(1,t),P}case 17:{const P=G.lexeme;if(this._advance(),this._matchOne(9)){const se=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),se.type!==10)throw this._errExpectedButGot("REGEX",se);const ue=se.lexeme,ge=ue.lastIndexOf("/"),pe=ge===ue.length-1?void 0:this._removeFlagsGY(ue.substring(ge+1));let ce;try{ce=new RegExp(ue.substring(1,ge),pe)}catch{throw this._errExpectedButGot("REGEX",se)}return O.create(P,ce)}switch(se.type){case 10:case 19:{const ue=[se.lexeme];this._advance();let ge=this._peek(),pe=0;for(let B=0;B<se.lexeme.length;B++)se.lexeme.charCodeAt(B)===40?pe++:se.lexeme.charCodeAt(B)===41&&pe--;for(;!this._isAtEnd()&&ge.type!==15&&ge.type!==16;){switch(ge.type){case 0:pe++;break;case 1:pe--;break;case 10:case 18:for(let B=0;B<ge.lexeme.length;B++)ge.lexeme.charCodeAt(B)===40?pe++:se.lexeme.charCodeAt(B)===41&&pe--}if(pe<0)break;ue.push(E.Scanner.getLexeme(ge)),this._advance(),ge=this._peek()}const ce=ue.join(""),ie=ce.lastIndexOf("/"),ne=ie===ce.length-1?void 0:this._removeFlagsGY(ce.substring(ie+1));let J;try{J=new RegExp(ce.substring(1,ie),ne)}catch{throw this._errExpectedButGot("REGEX",se)}return a.regex(P,J)}case 18:{const ue=se.lexeme;this._advance();let ge=null;if(!(0,k.isFalsyOrWhitespace)(ue)){const pe=ue.indexOf("/"),ce=ue.lastIndexOf("/");if(pe!==ce&&pe>=0){const ie=ue.slice(pe+1,ce),ne=ue[ce+1]==="i"?"i":"";try{ge=new RegExp(ie,ne)}catch{throw this._errExpectedButGot("REGEX",se)}}}if(ge===null)throw this._errExpectedButGot("REGEX",se);return O.create(P,ge)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,s);const se=this._value();return a.notIn(P,se)}switch(this._peek().type){case 3:{this._advance();const se=this._value();if(this._previous().type===18)return a.equals(P,se);switch(se){case"true":return a.has(P);case"false":return a.not(P);default:return a.equals(P,se)}}case 4:{this._advance();const se=this._value();if(this._previous().type===18)return a.notEquals(P,se);switch(se){case"true":return a.not(P);case"false":return a.has(P);default:return a.notEquals(P,se)}}case 5:return this._advance(),R.create(P,this._value());case 6:return this._advance(),N.create(P,this._value());case 7:return this._advance(),M.create(P,this._value());case 8:return this._advance(),A.create(P,this._value());case 13:return this._advance(),a.in(P,this._value());default:return a.has(P)}}case 20:throw this._parsingErrors.push({message:g,offset:G.offset,lexeme:"",additionalInfo:u}),l._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const G=this._peek();switch(G.type){case 17:case 18:return this._advance(),G.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(G){return G.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(G){return this._check(G)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(G,P){if(this._check(G))return this._advance();throw this._errExpectedButGot(P,this._peek())}_errExpectedButGot(G,P,te){const se=(0,y.localize)(1153,`Expected: {0}
Received: '{1}'.`,G,E.Scanner.getLexeme(P)),ue=P.offset,ge=E.Scanner.getLexeme(P);return this._parsingErrors.push({message:se,offset:ue,lexeme:ge,additionalInfo:te}),l._parseError}_check(G){return this._peek().type===G}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}}e.Parser=l;class a{static false(){return m.INSTANCE}static true(){return h.INSTANCE}static has(G){return v.create(G)}static equals(G,P){return C.create(G,P)}static notEquals(G,P){return D.create(G,P)}static regex(G,P){return O.create(G,P)}static in(G,P){return w.create(G,P)}static notIn(G,P){return S.create(G,P)}static not(G){return I.create(G)}static and(...G){return W.create(G,null,!0)}static or(...G){return z.create(G,null,!0)}static{this._parser=new l({regexParsingWithErrorRecovery:!1})}static deserialize(G){return G==null?void 0:this._parser.parse(G)}}e.ContextKeyExpr=a;function r(X,G){const P=X?X.substituteConstants():void 0,te=G?G.substituteConstants():void 0;return!P&&!te?!0:!P||!te?!1:P.equals(te)}function d(X,G){return X.cmp(G)}class m{static{this.INSTANCE=new m}constructor(){this.type=0}cmp(G){return this.type-G.type}equals(G){return G.type===this.type}substituteConstants(){return this}evaluate(G){return!1}serialize(){return"false"}keys(){return[]}negate(){return h.INSTANCE}}e.ContextKeyFalseExpr=m;class h{static{this.INSTANCE=new h}constructor(){this.type=1}cmp(G){return this.type-G.type}equals(G){return G.type===this.type}substituteConstants(){return this}evaluate(G){return!0}serialize(){return"true"}keys(){return[]}negate(){return m.INSTANCE}}e.ContextKeyTrueExpr=h;class v{static create(G,P=null){const te=f.get(G);return typeof te=="boolean"?te?h.INSTANCE:m.INSTANCE:new v(G,P)}constructor(G,P){this.key=G,this.negated=P,this.type=2}cmp(G){return G.type!==this.type?this.type-G.type:H(this.key,G.key)}equals(G){return G.type===this.type?this.key===G.key:!1}substituteConstants(){const G=f.get(this.key);return typeof G=="boolean"?G?h.INSTANCE:m.INSTANCE:this}evaluate(G){return!!G.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}negate(){return this.negated||(this.negated=I.create(this.key,this)),this.negated}}e.ContextKeyDefinedExpr=v;class C{static create(G,P,te=null){if(typeof P=="boolean")return P?v.create(G,te):I.create(G,te);const se=f.get(G);return typeof se=="boolean"?P===(se?"true":"false")?h.INSTANCE:m.INSTANCE:new C(G,P,te)}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=4}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){const G=f.get(this.key);if(typeof G=="boolean"){const P=G?"true":"false";return this.value===P?h.INSTANCE:m.INSTANCE}return this}evaluate(G){return G.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=D.create(this.key,this.value,this)),this.negated}}e.ContextKeyEqualsExpr=C;class w{static create(G,P){return new w(G,P)}constructor(G,P){this.key=G,this.valueKey=P,this.type=10,this.negated=null}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.valueKey,G.key,G.valueKey)}equals(G){return G.type===this.type?this.key===G.key&&this.valueKey===G.valueKey:!1}substituteConstants(){return this}evaluate(G){const P=G.getValue(this.valueKey),te=G.getValue(this.key);return Array.isArray(P)?P.includes(te):typeof te=="string"&&typeof P=="object"&&P!==null?_.call(P,te):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}negate(){return this.negated||(this.negated=S.create(this.key,this.valueKey)),this.negated}}e.ContextKeyInExpr=w;class S{static create(G,P){return new S(G,P)}constructor(G,P){this.key=G,this.valueKey=P,this.type=11,this._negated=w.create(G,P)}cmp(G){return G.type!==this.type?this.type-G.type:this._negated.cmp(G._negated)}equals(G){return G.type===this.type?this._negated.equals(G._negated):!1}substituteConstants(){return this}evaluate(G){return!this._negated.evaluate(G)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}negate(){return this._negated}}e.ContextKeyNotInExpr=S;class D{static create(G,P,te=null){if(typeof P=="boolean")return P?I.create(G,te):v.create(G,te);const se=f.get(G);return typeof se=="boolean"?P===(se?"true":"false")?m.INSTANCE:h.INSTANCE:new D(G,P,te)}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=5}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){const G=f.get(this.key);if(typeof G=="boolean"){const P=G?"true":"false";return this.value===P?m.INSTANCE:h.INSTANCE}return this}evaluate(G){return G.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}negate(){return this.negated||(this.negated=C.create(this.key,this.value,this)),this.negated}}e.ContextKeyNotEqualsExpr=D;class I{static create(G,P=null){const te=f.get(G);return typeof te=="boolean"?te?m.INSTANCE:h.INSTANCE:new I(G,P)}constructor(G,P){this.key=G,this.negated=P,this.type=3}cmp(G){return G.type!==this.type?this.type-G.type:H(this.key,G.key)}equals(G){return G.type===this.type?this.key===G.key:!1}substituteConstants(){const G=f.get(this.key);return typeof G=="boolean"?G?m.INSTANCE:h.INSTANCE:this}evaluate(G){return!G.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=v.create(this.key,this)),this.negated}}e.ContextKeyNotExpr=I;function T(X,G){if(typeof X=="string"){const P=parseFloat(X);isNaN(P)||(X=P)}return typeof X=="string"||typeof X=="number"?G(X):m.INSTANCE}class M{static create(G,P,te=null){return T(P,se=>new M(G,se,te))}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=12}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){return this}evaluate(G){return typeof this.value=="string"?!1:parseFloat(G.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=N.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterExpr=M;class A{static create(G,P,te=null){return T(P,se=>new A(G,se,te))}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=13}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){return this}evaluate(G){return typeof this.value=="string"?!1:parseFloat(G.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=R.create(this.key,this.value,this)),this.negated}}e.ContextKeyGreaterEqualsExpr=A;class R{static create(G,P,te=null){return T(P,se=>new R(G,se,te))}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=14}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){return this}evaluate(G){return typeof this.value=="string"?!1:parseFloat(G.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=A.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerExpr=R;class N{static create(G,P,te=null){return T(P,se=>new N(G,se,te))}constructor(G,P,te){this.key=G,this.value=P,this.negated=te,this.type=15}cmp(G){return G.type!==this.type?this.type-G.type:K(this.key,this.value,G.key,G.value)}equals(G){return G.type===this.type?this.key===G.key&&this.value===G.value:!1}substituteConstants(){return this}evaluate(G){return typeof this.value=="string"?!1:parseFloat(G.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=M.create(this.key,this.value,this)),this.negated}}e.ContextKeySmallerEqualsExpr=N;class O{static create(G,P){return new O(G,P)}constructor(G,P){this.key=G,this.regexp=P,this.type=7,this.negated=null}cmp(G){if(G.type!==this.type)return this.type-G.type;if(this.key<G.key)return-1;if(this.key>G.key)return 1;const P=this.regexp?this.regexp.source:"",te=G.regexp?G.regexp.source:"";return P<te?-1:P>te?1:0}equals(G){if(G.type===this.type){const P=this.regexp?this.regexp.source:"",te=G.regexp?G.regexp.source:"";return this.key===G.key&&P===te}return!1}substituteConstants(){return this}evaluate(G){const P=G.getValue(this.key);return this.regexp?this.regexp.test(P):!1}serialize(){const G=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${G}`}keys(){return[this.key]}negate(){return this.negated||(this.negated=x.create(this)),this.negated}}e.ContextKeyRegexExpr=O;class x{static create(G){return new x(G)}constructor(G){this._actual=G,this.type=8}cmp(G){return G.type!==this.type?this.type-G.type:this._actual.cmp(G._actual)}equals(G){return G.type===this.type?this._actual.equals(G._actual):!1}substituteConstants(){return this}evaluate(G){return!this._actual.evaluate(G)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}negate(){return this._actual}}e.ContextKeyNotRegexExpr=x;function F(X){let G=null;for(let P=0,te=X.length;P<te;P++){const se=X[P].substituteConstants();if(X[P]!==se&&G===null){G=[];for(let ue=0;ue<P;ue++)G[ue]=X[ue]}G!==null&&(G[P]=se)}return G===null?X:G}class W{static create(G,P,te){return W._normalizeArr(G,P,te)}constructor(G,P){this.expr=G,this.negated=P,this.type=6}cmp(G){if(G.type!==this.type)return this.type-G.type;if(this.expr.length<G.expr.length)return-1;if(this.expr.length>G.expr.length)return 1;for(let P=0,te=this.expr.length;P<te;P++){const se=d(this.expr[P],G.expr[P]);if(se!==0)return se}return 0}equals(G){if(G.type===this.type){if(this.expr.length!==G.expr.length)return!1;for(let P=0,te=this.expr.length;P<te;P++)if(!this.expr[P].equals(G.expr[P]))return!1;return!0}return!1}substituteConstants(){const G=F(this.expr);return G===this.expr?this:W.create(G,this.negated,!1)}evaluate(G){for(let P=0,te=this.expr.length;P<te;P++)if(!this.expr[P].evaluate(G))return!1;return!0}static _normalizeArr(G,P,te){const se=[];let ue=!1;for(const ge of G)if(ge){if(ge.type===1){ue=!0;continue}if(ge.type===0)return m.INSTANCE;if(ge.type===6){se.push(...ge.expr);continue}se.push(ge)}if(se.length===0&&ue)return h.INSTANCE;if(se.length!==0){if(se.length===1)return se[0];se.sort(d);for(let ge=1;ge<se.length;ge++)se[ge-1].equals(se[ge])&&(se.splice(ge,1),ge--);if(se.length===1)return se[0];for(;se.length>1;){const ge=se[se.length-1];if(ge.type!==9)break;se.pop();const pe=se.pop(),ce=se.length===0,ie=z.create(ge.expr.map(ne=>W.create([ne,pe],null,te)),null,ce);ie&&(se.push(ie),se.sort(d))}if(se.length===1)return se[0];if(te){for(let ge=0;ge<se.length;ge++)for(let pe=ge+1;pe<se.length;pe++)if(se[ge].negate().equals(se[pe]))return m.INSTANCE;if(se.length===1)return se[0]}return new W(se,P)}}serialize(){return this.expr.map(G=>G.serialize()).join(" && ")}keys(){const G=[];for(const P of this.expr)G.push(...P.keys());return G}negate(){if(!this.negated){const G=[];for(const P of this.expr)G.push(P.negate());this.negated=z.create(G,this,!0)}return this.negated}}e.ContextKeyAndExpr=W;class z{static create(G,P,te){return z._normalizeArr(G,P,te)}constructor(G,P){this.expr=G,this.negated=P,this.type=9}cmp(G){if(G.type!==this.type)return this.type-G.type;if(this.expr.length<G.expr.length)return-1;if(this.expr.length>G.expr.length)return 1;for(let P=0,te=this.expr.length;P<te;P++){const se=d(this.expr[P],G.expr[P]);if(se!==0)return se}return 0}equals(G){if(G.type===this.type){if(this.expr.length!==G.expr.length)return!1;for(let P=0,te=this.expr.length;P<te;P++)if(!this.expr[P].equals(G.expr[P]))return!1;return!0}return!1}substituteConstants(){const G=F(this.expr);return G===this.expr?this:z.create(G,this.negated,!1)}evaluate(G){for(let P=0,te=this.expr.length;P<te;P++)if(this.expr[P].evaluate(G))return!0;return!1}static _normalizeArr(G,P,te){let se=[],ue=!1;if(G){for(let ge=0,pe=G.length;ge<pe;ge++){const ce=G[ge];if(ce){if(ce.type===0){ue=!0;continue}if(ce.type===1)return h.INSTANCE;if(ce.type===9){se=se.concat(ce.expr);continue}se.push(ce)}}if(se.length===0&&ue)return m.INSTANCE;se.sort(d)}if(se.length!==0){if(se.length===1)return se[0];for(let ge=1;ge<se.length;ge++)se[ge-1].equals(se[ge])&&(se.splice(ge,1),ge--);if(se.length===1)return se[0];if(te){for(let ge=0;ge<se.length;ge++)for(let pe=ge+1;pe<se.length;pe++)if(se[ge].negate().equals(se[pe]))return h.INSTANCE;if(se.length===1)return se[0]}return new z(se,P)}}serialize(){return this.expr.map(G=>G.serialize()).join(" || ")}keys(){const G=[];for(const P of this.expr)G.push(...P.keys());return G}negate(){if(!this.negated){const G=[];for(const P of this.expr)G.push(P.negate());for(;G.length>1;){const P=G.shift(),te=G.shift(),se=[];for(const ue of Q(P))for(const ge of Q(te))se.push(W.create([ue,ge],null,!1));G.unshift(z.create(se,null,!1))}this.negated=z.create(G,this,!0)}return this.negated}}e.ContextKeyOrExpr=z;class q extends v{static{this._info=[]}static all(){return q._info.values()}constructor(G,P,te){super(G,null),this._defaultValue=P,typeof te=="object"?q._info.push({...te,key:G}):te!==!0&&q._info.push({key:G,description:te,type:P!=null?typeof P:void 0})}bindTo(G){return G.createKey(this.key,this._defaultValue)}getValue(G){return G.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(G){return C.create(this.key,G)}}e.RawContextKey=q,e.IContextKeyService=(0,L.createDecorator)("contextKeyService");function H(X,G){return X<G?-1:X>G?1:0}function K(X,G,P,te){return X<P?-1:X>P?1:G<te?-1:G>te?1:0}function U(X,G){if(X.type===0||G.type===1)return!0;if(X.type===9)return G.type===9?Y(X.expr,G.expr):!1;if(G.type===9){for(const P of G.expr)if(U(X,P))return!0;return!1}if(X.type===6){if(G.type===6)return Y(G.expr,X.expr);for(const P of X.expr)if(U(P,G))return!0;return!1}return X.equals(G)}function Y(X,G){let P=0,te=0;for(;P<X.length&&te<G.length;){const se=X[P].cmp(G[te]);if(se<0)return!1;se===0&&P++,te++}return P===X.length}function Q(X){return X.type===9?X.expr:[X]}}),define(oe[20],re([1,0,3,12]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorContextKeys=void 0;var E;(function(L){L.editorSimpleInput=new k.RawContextKey("editorSimpleInput",!1,!0),L.editorTextFocus=new k.RawContextKey("editorTextFocus",!1,c.localize(1775,"Whether the editor text has focus (cursor is blinking)")),L.focus=new k.RawContextKey("editorFocus",!1,c.localize(1776,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),L.textInputFocus=new k.RawContextKey("textInputFocus",!1,c.localize(1777,"Whether an editor or a rich text input has focus (cursor is blinking)")),L.readOnly=new k.RawContextKey("editorReadonly",!1,c.localize(1778,"Whether the editor is read-only")),L.inDiffEditor=new k.RawContextKey("inDiffEditor",!1,c.localize(1779,"Whether the context is a diff editor")),L.isEmbeddedDiffEditor=new k.RawContextKey("isEmbeddedDiffEditor",!1,c.localize(1780,"Whether the context is an embedded diff editor")),L.inMultiDiffEditor=new k.RawContextKey("inMultiDiffEditor",!1,c.localize(1781,"Whether the context is a multi diff editor")),L.multiDiffEditorAllCollapsed=new k.RawContextKey("multiDiffEditorAllCollapsed",void 0,c.localize(1782,"Whether all files in multi diff editor are collapsed")),L.hasChanges=new k.RawContextKey("diffEditorHasChanges",!1,c.localize(1783,"Whether the diff editor has changes")),L.comparingMovedCode=new k.RawContextKey("comparingMovedCode",!1,c.localize(1784,"Whether a moved code block is selected for comparison")),L.accessibleDiffViewerVisible=new k.RawContextKey("accessibleDiffViewerVisible",!1,c.localize(1785,"Whether the accessible diff viewer is visible")),L.diffEditorRenderSideBySideInlineBreakpointReached=new k.RawContextKey("diffEditorRenderSideBySideInlineBreakpointReached",!1,c.localize(1786,"Whether the diff editor render side by side inline breakpoint is reached")),L.diffEditorInlineMode=new k.RawContextKey("diffEditorInlineMode",!1,c.localize(1787,"Whether inline mode is active")),L.diffEditorOriginalWritable=new k.RawContextKey("diffEditorOriginalWritable",!1,c.localize(1788,"Whether modified is writable in the diff editor")),L.diffEditorModifiedWritable=new k.RawContextKey("diffEditorModifiedWritable",!1,c.localize(1789,"Whether modified is writable in the diff editor")),L.diffEditorOriginalUri=new k.RawContextKey("diffEditorOriginalUri","",c.localize(1790,"The uri of the original document")),L.diffEditorModifiedUri=new k.RawContextKey("diffEditorModifiedUri","",c.localize(1791,"The uri of the modified document")),L.columnSelection=new k.RawContextKey("editorColumnSelection",!1,c.localize(1792,"Whether `editor.columnSelection` is enabled")),L.writable=L.readOnly.toNegated(),L.hasNonEmptySelection=new k.RawContextKey("editorHasSelection",!1,c.localize(1793,"Whether the editor has text selected")),L.hasOnlyEmptySelection=L.hasNonEmptySelection.toNegated(),L.hasMultipleSelections=new k.RawContextKey("editorHasMultipleSelections",!1,c.localize(1794,"Whether the editor has multiple selections")),L.hasSingleSelection=L.hasMultipleSelections.toNegated(),L.tabMovesFocus=new k.RawContextKey("editorTabMovesFocus",!1,c.localize(1795,"Whether `Tab` will move focus out of the editor")),L.tabDoesNotMoveFocus=L.tabMovesFocus.toNegated(),L.isInEmbeddedEditor=new k.RawContextKey("isInEmbeddedEditor",!1,!0),L.canUndo=new k.RawContextKey("canUndo",!1,!0),L.canRedo=new k.RawContextKey("canRedo",!1,!0),L.hoverVisible=new k.RawContextKey("editorHoverVisible",!1,c.localize(1796,"Whether the editor hover is visible")),L.hoverFocused=new k.RawContextKey("editorHoverFocused",!1,c.localize(1797,"Whether the editor hover is focused")),L.stickyScrollFocused=new k.RawContextKey("stickyScrollFocused",!1,c.localize(1798,"Whether the sticky scroll is focused")),L.stickyScrollVisible=new k.RawContextKey("stickyScrollVisible",!1,c.localize(1799,"Whether the sticky scroll is visible")),L.standaloneColorPickerVisible=new k.RawContextKey("standaloneColorPickerVisible",!1,c.localize(1800,"Whether the standalone color picker is visible")),L.standaloneColorPickerFocused=new k.RawContextKey("standaloneColorPickerFocused",!1,c.localize(1801,"Whether the standalone color picker is focused")),L.inCompositeEditor=new k.RawContextKey("inCompositeEditor",void 0,c.localize(1802,"Whether the editor is part of a larger editor (e.g. notebooks)")),L.notInCompositeEditor=L.inCompositeEditor.toNegated(),L.languageId=new k.RawContextKey("editorLangId","",c.localize(1803,"The language identifier of the editor")),L.hasCompletionItemProvider=new k.RawContextKey("editorHasCompletionItemProvider",!1,c.localize(1804,"Whether the editor has a completion item provider")),L.hasCodeActionsProvider=new k.RawContextKey("editorHasCodeActionsProvider",!1,c.localize(1805,"Whether the editor has a code actions provider")),L.hasCodeLensProvider=new k.RawContextKey("editorHasCodeLensProvider",!1,c.localize(1806,"Whether the editor has a code lens provider")),L.hasDefinitionProvider=new k.RawContextKey("editorHasDefinitionProvider",!1,c.localize(1807,"Whether the editor has a definition provider")),L.hasDeclarationProvider=new k.RawContextKey("editorHasDeclarationProvider",!1,c.localize(1808,"Whether the editor has a declaration provider")),L.hasImplementationProvider=new k.RawContextKey("editorHasImplementationProvider",!1,c.localize(1809,"Whether the editor has an implementation provider")),L.hasTypeDefinitionProvider=new k.RawContextKey("editorHasTypeDefinitionProvider",!1,c.localize(1810,"Whether the editor has a type definition provider")),L.hasHoverProvider=new k.RawContextKey("editorHasHoverProvider",!1,c.localize(1811,"Whether the editor has a hover provider")),L.hasDocumentHighlightProvider=new k.RawContextKey("editorHasDocumentHighlightProvider",!1,c.localize(1812,"Whether the editor has a document highlight provider")),L.hasDocumentSymbolProvider=new k.RawContextKey("editorHasDocumentSymbolProvider",!1,c.localize(1813,"Whether the editor has a document symbol provider")),L.hasReferenceProvider=new k.RawContextKey("editorHasReferenceProvider",!1,c.localize(1814,"Whether the editor has a reference provider")),L.hasRenameProvider=new k.RawContextKey("editorHasRenameProvider",!1,c.localize(1815,"Whether the editor has a rename provider")),L.hasSignatureHelpProvider=new k.RawContextKey("editorHasSignatureHelpProvider",!1,c.localize(1816,"Whether the editor has a signature help provider")),L.hasInlayHintsProvider=new k.RawContextKey("editorHasInlayHintsProvider",!1,c.localize(1817,"Whether the editor has an inline hints provider")),L.hasDocumentFormattingProvider=new k.RawContextKey("editorHasDocumentFormattingProvider",!1,c.localize(1818,"Whether the editor has a document formatting provider")),L.hasDocumentSelectionFormattingProvider=new k.RawContextKey("editorHasDocumentSelectionFormattingProvider",!1,c.localize(1819,"Whether the editor has a document selection formatting provider")),L.hasMultipleDocumentFormattingProvider=new k.RawContextKey("editorHasMultipleDocumentFormattingProvider",!1,c.localize(1820,"Whether the editor has multiple document formatting providers")),L.hasMultipleDocumentSelectionFormattingProvider=new k.RawContextKey("editorHasMultipleDocumentSelectionFormattingProvider",!1,c.localize(1821,"Whether the editor has multiple document selection formatting providers"))})(E||(e.EditorContextKeys=E={}))}),define(oe[267],re([1,0,21,11,93,12,2,3]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionContextKeys=void 0;class _ extends y.Disposable{static{this.inlineSuggestionVisible=new L.RawContextKey("inlineSuggestionVisible",!1,(0,f.localize)(615,"Whether an inline suggestion is visible"))}static{this.inlineSuggestionHasIndentation=new L.RawContextKey("inlineSuggestionHasIndentation",!1,(0,f.localize)(616,"Whether the inline suggestion starts with whitespace"))}static{this.inlineSuggestionHasIndentationLessThanTabSize=new L.RawContextKey("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,f.localize)(617,"Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"))}static{this.suppressSuggestions=new L.RawContextKey("inlineSuggestionSuppressSuggestions",void 0,(0,f.localize)(618,"Whether suggestions should be suppressed for the current suggestion"))}constructor(p,n){super(),this.contextKeyService=p,this.model=n,this.inlineCompletionVisible=_.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=_.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=_.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=_.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,c.autorun)(s=>{const i=this.model.read(s)?.state.read(s),o=!!i?.inlineCompletion&&i?.primaryGhostText!==void 0&&!i?.primaryGhostText.isEmpty();this.inlineCompletionVisible.set(o),i?.primaryGhostText&&i?.inlineCompletion&&this.suppressSuggestions.set(i.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register((0,c.autorun)(s=>{const t=this.model.read(s);let i=!1,o=!0;const g=t?.primaryGhostText.read(s);if(t?.selectedSuggestItem&&g&&g.parts.length>0){const{column:u,lines:l}=g.parts[0],a=l[0],r=t.textModel.getLineIndentColumn(g.lineNumber);if(u<=r){let m=(0,k.firstNonWhitespaceIndex)(a);m===-1&&(m=a.length-1),i=m>0;const h=t.textModel.getOptions().tabSize;o=E.CursorColumns.visibleColumnFromColumn(a,m+1,h)<h}}this.inlineCompletionSuggestsIndentation.set(i),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(o)}))}}e.InlineCompletionContextKeys=_}),define(oe[383],re([1,0,3,12]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPinnedContextKey=e.inlineEditVisible=e.showNextInlineEditActionId=e.showPreviousInlineEditActionId=e.inlineEditAcceptId=void 0,e.inlineEditAcceptId="editor.action.inlineEdits.accept",e.showPreviousInlineEditActionId="editor.action.inlineEdits.showPrevious",e.showNextInlineEditActionId="editor.action.inlineEdits.showNext",e.inlineEditVisible=new k.RawContextKey("inlineEditsVisible",!1,(0,c.localize)(601,"Whether an inline edit is visible")),e.isPinnedContextKey=new k.RawContextKey("inlineEditsIsPinned",!1,(0,c.localize)(602,"Whether an inline edit is visible"))}),define(oe[268],re([1,0,18,8,19,22,9,28,17,78,24,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0,e.provideSignatureHelp=s,e.Context={Visible:new n.RawContextKey("parameterHintsVisible",!1),MultipleSignatures:new n.RawContextKey("parameterHintsMultipleSignatures",!1)};async function s(t,i,o,g,u){const l=t.ordered(i);for(const a of l)try{const r=await a.provideSignatureHelp(i,o,u,g);if(r)return r}catch(r){(0,k.onUnexpectedExternalError)(r)}}p.CommandsRegistry.registerCommand("_executeSignatureHelpProvider",async(t,...i)=>{const[o,g,u]=i;(0,E.assertType)(L.URI.isUri(o)),(0,E.assertType)(y.Position.isIPosition(g)),(0,E.assertType)(typeof u=="string"||!u);const l=t.get(_.ILanguageFeaturesService),a=await t.get(b.ITextModelService).createModelReference(o);try{const r=await s(l.signatureHelpProvider,a.object.textEditorModel,y.Position.lift(g),{triggerKind:f.SignatureHelpTriggerKind.Invoke,isRetrigger:!1,triggerCharacter:u},c.CancellationToken.None);return r?(setTimeout(()=>r.dispose(),0),r.value):void 0}finally{a.dispose()}})}),define(oe[676],re([1,0,14,8,6,2,143,28,268]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParameterHintsModel=void 0;var b;(function(s){s.Default={type:0};class t{constructor(g,u){this.request=g,this.previouslyActiveHints=u,this.type=2}}s.Pending=t;class i{constructor(g){this.hints=g,this.type=1}}s.Active=i})(b||(b={}));class p extends L.Disposable{static{this.DEFAULT_DELAY=120}constructor(t,i,o=p.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new E.Emitter),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=b.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new L.MutableDisposable),this.triggerChars=new y.CharacterSet,this.retriggerChars=new y.CharacterSet,this.triggerId=0,this.editor=t,this.providers=i,this.throttledDelayer=new c.Delayer(o),this._register(this.editor.onDidBlurEditorWidget(()=>this.cancel())),this._register(this.editor.onDidChangeConfiguration(()=>this.onEditorConfigurationChange())),this._register(this.editor.onDidChangeModel(g=>this.onModelChanged())),this._register(this.editor.onDidChangeModelLanguage(g=>this.onModelChanged())),this._register(this.editor.onDidChangeCursorSelection(g=>this.onCursorChange(g))),this._register(this.editor.onDidChangeModelContent(g=>this.onModelContentChange())),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType(g=>this.onDidType(g))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(t){this._state.type===2&&this._state.request.cancel(),this._state=t}cancel(t=!1){this.state=b.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)}trigger(t,i){const o=this.editor.getModel();if(!o||!this.providers.has(o))return;const g=++this.triggerId;this._pendingTriggers.push(t),this.throttledDelayer.trigger(()=>this.doTrigger(g),i).catch(k.onUnexpectedError)}next(){if(this.state.type!==1)return;const t=this.state.hints.signatures.length,i=this.state.hints.activeSignature,o=i%t===t-1,g=this.editor.getOption(86).cycle;if((t<2||o)&&!g){this.cancel();return}this.updateActiveSignature(o&&g?0:i+1)}previous(){if(this.state.type!==1)return;const t=this.state.hints.signatures.length,i=this.state.hints.activeSignature,o=i===0,g=this.editor.getOption(86).cycle;if((t<2||o)&&!g){this.cancel();return}this.updateActiveSignature(o&&g?t-1:i-1)}updateActiveSignature(t){this.state.type===1&&(this.state=new b.Active({...this.state.hints,activeSignature:t}),this._onChangedHints.fire(this.state.hints))}async doTrigger(t){const i=this.state.type===1||this.state.type===2,o=this.getLastActiveHints();if(this.cancel(!0),this._pendingTriggers.length===0)return!1;const g=this._pendingTriggers.reduce(n);this._pendingTriggers=[];const u={triggerKind:g.triggerKind,triggerCharacter:g.triggerCharacter,isRetrigger:i,activeSignatureHelp:o};if(!this.editor.hasModel())return!1;const l=this.editor.getModel(),a=this.editor.getPosition();this.state=new b.Pending((0,c.createCancelablePromise)(r=>(0,_.provideSignatureHelp)(this.providers,l,a,u,r)),o);try{const r=await this.state.request;return t!==this.triggerId?(r?.dispose(),!1):!r||!r.value.signatures||r.value.signatures.length===0?(r?.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1):(this.state=new b.Active(r.value),this._lastSignatureHelpResult.value=r,this._onChangedHints.fire(this.state.hints),!0)}catch(r){return t===this.triggerId&&(this.state=b.Default),(0,k.onUnexpectedError)(r),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return this.state.type===1||this.state.type===2||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const t=this.editor.getModel();if(t)for(const i of this.providers.ordered(t)){for(const o of i.signatureHelpTriggerCharacters||[])if(o.length){const g=o.charCodeAt(0);this.triggerChars.add(g),this.retriggerChars.add(g)}for(const o of i.signatureHelpRetriggerCharacters||[])o.length&&this.retriggerChars.add(o.charCodeAt(0))}}onDidType(t){if(!this.triggerOnType)return;const i=t.length-1,o=t.charCodeAt(i);(this.triggerChars.has(o)||this.isTriggered&&this.retriggerChars.has(o))&&this.trigger({triggerKind:f.SignatureHelpTriggerKind.TriggerCharacter,triggerCharacter:t.charAt(i)})}onCursorChange(t){t.source==="mouse"?this.cancel():this.isTriggered&&this.trigger({triggerKind:f.SignatureHelpTriggerKind.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:f.SignatureHelpTriggerKind.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}e.ParameterHintsModel=p;function n(s,t){switch(t.triggerKind){case f.SignatureHelpTriggerKind.Invoke:return t;case f.SignatureHelpTriggerKind.ContentChange:return s;case f.SignatureHelpTriggerKind.TriggerCharacter:default:return t}}}),define(oe[677],re([1,0,12]),function(ae,e,c){"use strict";var k;Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestAlternatives=void 0;let E=class{static{k=this}static{this.OtherSuggestions=new c.RawContextKey("hasOtherSuggestions",!1)}constructor(y,f){this._editor=y,this._index=0,this._ckOtherSuggestions=k.OtherSuggestions.bindTo(f)}dispose(){this.reset()}reset(){this._ckOtherSuggestions.reset(),this._listener?.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:y,index:f},_){if(y.items.length===0){this.reset();return}if(k._moveIndex(!0,y,f)===f){this.reset();return}this._acceptNext=_,this._model=y,this._index=f,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(y,f,_){let b=_;for(let p=f.items.length;p>0&&(b=(b+f.items.length+(y?1:-1))%f.items.length,!(b===_||!f.items[b].completion.additionalTextEdits));p--);return b}next(){this._move(!0)}prev(){this._move(!1)}_move(y){if(this._model)try{this._ignore=!0,this._index=k._moveIndex(y,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};e.SuggestAlternatives=E,e.SuggestAlternatives=E=k=De([he(1,c.IContextKeyService)],E)}),define(oe[678],re([1,0,12]),function(ae,e,c){"use strict";var k;Object.defineProperty(e,"__esModule",{value:!0}),e.WordContextKey=void 0;let E=class{static{k=this}static{this.AtEnd=new c.RawContextKey("atEndOfWord",!1)}constructor(y,f){this._editor=y,this._enabled=!1,this._ckAtEnd=k.AtEnd.bindTo(f),this._configListener=this._editor.onDidChangeConfiguration(_=>_.hasChanged(124)&&this._update()),this._update()}dispose(){this._configListener.dispose(),this._selectionListener?.dispose(),this._ckAtEnd.reset()}_update(){const y=this._editor.getOption(124)==="on";if(this._enabled!==y)if(this._enabled=y,this._enabled){const f=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}const _=this._editor.getModel(),b=this._editor.getSelection(),p=_.getWordAtPosition(b.getStartPosition());if(!p){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(p.endColumn===b.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(f),f()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};e.WordContextKey=E,e.WordContextKey=E=k=De([he(1,c.IContextKeyService)],E)}),define(oe[60],re([1,0,12,7]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_ACCESSIBILITY_MODE_ENABLED=e.IAccessibilityService=void 0,e.IAccessibilityService=(0,k.createDecorator)("accessibilityService"),e.CONTEXT_ACCESSIBILITY_MODE_ENABLED=new c.RawContextKey("accessibilityModeEnabled",!1)}),define(oe[679],re([1,0,64,13,6,2,54,16,318,370,555,239,37,167,261,60,5,229]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComputedEditorOptions=e.EditorConfiguration=void 0;let l=class extends L.Disposable{constructor(w,S,D,I,T){super(),this._accessibilityService=T,this._onDidChange=this._register(new E.Emitter),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new E.Emitter),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new s.ComputeOptionsMemory,this.isSimpleWidget=w,this.contextMenuId=S,this._containerObserver=this._register(new _.ElementSizeObserver(I,D.dimension)),this._targetWindowId=(0,g.getWindow)(I).vscodeWindowId,this._rawOptions=v(D),this._validatedOptions=h.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(t.EditorZoom.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(n.TabFocus.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(b.FontMeasurements.onDidChange(()=>this._recomputeOptions())),this._register(u.PixelRatio.getInstance((0,g.getWindow)(I)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_recomputeOptions(){const w=this._computeOptions(),S=h.checkEquals(this.options,w);S!==null&&(this.options=w,this._onDidChangeFast.fire(S),this._onDidChange.fire(S))}_computeOptions(){const w=this._readEnvConfiguration(),S=i.BareFontInfo.createFromValidatedSettings(this._validatedOptions,w.pixelRatio,this.isSimpleWidget),D=this._readFontInfo(S),I={memory:this._computeOptionsMemory,outerWidth:w.outerWidth,outerHeight:w.outerHeight-this._reservedHeight,fontInfo:D,extraEditorClassName:w.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:w.emptySelectionClipboard,pixelRatio:w.pixelRatio,tabFocusMode:n.TabFocus.getTabFocusMode(),accessibilitySupport:w.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return h.computeOptions(this._validatedOptions,I)}_readEnvConfiguration(){return{extraEditorClassName:r(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:c.isWebKit||c.isFirefox,pixelRatio:u.PixelRatio.getInstance((0,g.getWindowById)(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(w){return b.FontMeasurements.readFontInfo((0,g.getWindowById)(this._targetWindowId,!0).window,w)}getRawOptions(){return this._rawOptions}updateOptions(w){const S=v(w);h.applyUpdate(this._rawOptions,S)&&(this._validatedOptions=h.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(w){this._containerObserver.observe(w)}setIsDominatedByLongLines(w){this._isDominatedByLongLines!==w&&(this._isDominatedByLongLines=w,this._recomputeOptions())}setModelLineCount(w){const S=a(w);this._lineNumbersDigitCount!==S&&(this._lineNumbersDigitCount=S,this._recomputeOptions())}setViewLineCount(w){this._viewLineCount!==w&&(this._viewLineCount=w,this._recomputeOptions())}setReservedHeight(w){this._reservedHeight!==w&&(this._reservedHeight=w,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(w){this._glyphMarginDecorationLaneCount!==w&&(this._glyphMarginDecorationLaneCount=w,this._recomputeOptions())}};e.EditorConfiguration=l,e.EditorConfiguration=l=De([he(4,o.IAccessibilityService)],l);function a(C){let w=0;for(;C;)C=Math.floor(C/10),w++;return w||1}function r(){let C="";return!c.isSafari&&!c.isWebkitWebView&&(C+="no-user-select "),c.isSafari&&(C+="no-minimap-shadow ",C+="enable-user-select "),f.isMacintosh&&(C+="mac "),C}class d{constructor(){this._values=[]}_read(w){return this._values[w]}get(w){return this._values[w]}_write(w,S){this._values[w]=S}}class m{constructor(){this._values=[]}_read(w){if(w>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[w]}get(w){return this._read(w)}_write(w,S){this._values[w]=S}}e.ComputedEditorOptions=m;class h{static validateOptions(w){const S=new d;for(const D of s.editorOptionsRegistry){const I=D.name==="_never_"?void 0:w[D.name];S._write(D.id,D.validate(I))}return S}static computeOptions(w,S){const D=new m;for(const I of s.editorOptionsRegistry)D._write(I.id,I.compute(S,D,w._read(I.id)));return D}static _deepEquals(w,S){if(typeof w!="object"||typeof S!="object"||!w||!S)return w===S;if(Array.isArray(w)||Array.isArray(S))return Array.isArray(w)&&Array.isArray(S)?k.equals(w,S):!1;if(Object.keys(w).length!==Object.keys(S).length)return!1;for(const D in w)if(!h._deepEquals(w[D],S[D]))return!1;return!0}static checkEquals(w,S){const D=[];let I=!1;for(const T of s.editorOptionsRegistry){const M=!h._deepEquals(w._read(T.id),S._read(T.id));D[T.id]=M,M&&(I=!0)}return I?new s.ConfigurationChangedEvent(D):null}static applyUpdate(w,S){let D=!1;for(const I of s.editorOptionsRegistry)if(S.hasOwnProperty(I.name)){const T=I.applyUpdate(w[I.name],S[I.name]);w[I.name]=T.newValue,D=D||T.didChange}return D}}function v(C){const w=y.deepClone(C);return(0,p.migrateOptions)(w),w}}),define(oe[680],re([1,0,6,53,2,54,227,22,3,24,27,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextKeyService=e.AbstractContextKeyService=e.Context=void 0,e.setContext=C;const s="data-keybinding-context";class t{constructor(D,I){this._id=D,this._parent=I,this._value=Object.create(null),this._value._contextId=D}get value(){return{...this._value}}setValue(D,I){return this._value[D]!==I?(this._value[D]=I,!0):!1}removeValue(D){return D in this._value?(delete this._value[D],!0):!1}getValue(D){const I=this._value[D];return typeof I>"u"&&this._parent?this._parent.getValue(D):I}}e.Context=t;class i extends t{static{this.INSTANCE=new i}constructor(){super(-1,null)}setValue(D,I){return!1}removeValue(D){return!1}getValue(D){}}class o extends t{static{this._keyPrefix="config."}constructor(D,I,T){super(D,null),this._configurationService=I,this._values=y.TernarySearchTree.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(M=>{if(M.source===7){const A=Array.from(this._values,([R])=>R);this._values.clear(),T.fire(new l(A))}else{const A=[];for(const R of M.affectedKeys){const N=`config.${R}`,O=this._values.findSuperstr(N);O!==void 0&&(A.push(...k.Iterable.map(O,([x])=>x)),this._values.deleteSuperstr(N)),this._values.has(N)&&(A.push(N),this._values.delete(N))}T.fire(new l(A))}})}dispose(){this._listener.dispose()}getValue(D){if(D.indexOf(o._keyPrefix)!==0)return super.getValue(D);if(this._values.has(D))return this._values.get(D);const I=D.substr(o._keyPrefix.length),T=this._configurationService.getValue(I);let M;switch(typeof T){case"number":case"boolean":case"string":M=T;break;default:Array.isArray(T)?M=JSON.stringify(T):M=T}return this._values.set(D,M),M}setValue(D,I){return super.setValue(D,I)}removeValue(D){return super.removeValue(D)}}class g{constructor(D,I,T){this._service=D,this._key=I,this._defaultValue=T,this.reset()}set(D){this._service.setContext(this._key,D)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class u{constructor(D){this.key=D}affectsSome(D){return D.has(this.key)}allKeysContainedIn(D){return this.affectsSome(D)}}class l{constructor(D){this.keys=D}affectsSome(D){for(const I of this.keys)if(D.has(I))return!0;return!1}allKeysContainedIn(D){return this.keys.every(I=>D.has(I))}}class a{constructor(D){this.events=D}affectsSome(D){for(const I of this.events)if(I.affectsSome(D))return!0;return!1}allKeysContainedIn(D){return this.events.every(I=>I.allKeysContainedIn(D))}}function r(S,D){return S.allKeysContainedIn(new Set(Object.keys(D)))}class d extends E.Disposable{constructor(D){super(),this._onDidChangeContext=this._register(new c.PauseableEmitter({merge:I=>new a(I)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=D}createKey(D,I){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new g(this,D,I)}bufferChangeEvents(D){this._onDidChangeContext.pause();try{D()}finally{this._onDidChangeContext.resume()}}createScoped(D){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new h(this,D)}contextMatchesRules(D){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const I=this.getContextValuesContainer(this._myContextId);return D?D.evaluate(I):!0}getContextKeyValue(D){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(D)}setContext(D,I){if(this._isDisposed)return;const T=this.getContextValuesContainer(this._myContextId);T&&T.setValue(D,I)&&this._onDidChangeContext.fire(new u(D))}removeContext(D){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(D)&&this._onDidChangeContext.fire(new u(D))}getContext(D){return this._isDisposed?i.INSTANCE:this.getContextValuesContainer(v(D))}dispose(){super.dispose(),this._isDisposed=!0}}e.AbstractContextKeyService=d;let m=class extends d{constructor(D){super(0),this._contexts=new Map,this._lastContextId=0;const I=this._register(new o(this._myContextId,D,this._onDidChangeContext));this._contexts.set(this._myContextId,I)}getContextValuesContainer(D){return this._isDisposed?i.INSTANCE:this._contexts.get(D)||i.INSTANCE}createChildContext(D=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const I=++this._lastContextId;return this._contexts.set(I,new t(I,this.getContextValuesContainer(D))),I}disposeContext(D){this._isDisposed||this._contexts.delete(D)}};e.ContextKeyService=m,e.ContextKeyService=m=De([he(0,p.IConfigurationService)],m);class h extends d{constructor(D,I){if(super(D.createChildContext()),this._parentChangeListener=this._register(new E.MutableDisposable),this._parent=D,this._updateParentChangeListener(),this._domNode=I,this._domNode.hasAttribute(s)){let T="";this._domNode.classList&&(T=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${T?": "+T:""}`)}this._domNode.setAttribute(s,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(D=>{const T=this._parent.getContextValuesContainer(this._myContextId).value;r(D,T)||this._onDidChangeContext.fire(D)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(s),super.dispose())}getContextValuesContainer(D){return this._isDisposed?i.INSTANCE:this._parent.getContextValuesContainer(D)}createChildContext(D=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(D)}disposeContext(D){this._isDisposed||this._parent.disposeContext(D)}}function v(S){for(;S;){if(S.hasAttribute(s)){const D=S.getAttribute(s);return D?parseInt(D,10):NaN}S=S.parentElement}return 0}function C(S,D,I){S.get(n.IContextKeyService).createKey(String(D),w(I))}function w(S){return(0,L.cloneAndChange)(S,D=>{if(typeof D=="object"&&D.$mid===1)return f.URI.revive(D).toString();if(D instanceof f.URI)return D.toString()})}b.CommandsRegistry.registerCommand("_setContext",C),b.CommandsRegistry.registerCommand({id:"getContextKeyInfo",handler(){return[...n.RawContextKey.all()].sort((S,D)=>S.key.localeCompare(D.key))},metadata:{description:(0,_.localize)(1154,"A command that returns information about context keys"),args:[]}}),b.CommandsRegistry.registerCommand("_generateContextKeyInfo",function(){const S=[],D=new Set;for(const I of n.RawContextKey.all())D.has(I.key)||(D.add(I.key),S.push(I));S.sort((I,T)=>I.key.localeCompare(T.key)),console.log(JSON.stringify(S,void 0,2))})}),define(oe[178],re([1,0,16,3,12]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InputFocusedContext=e.InputFocusedContextKey=e.ProductQualityContext=e.IsDevelopmentContext=e.IsMobileContext=e.IsIOSContext=e.IsMacNativeContext=e.IsWebContext=e.IsWindowsContext=e.IsLinuxContext=e.IsMacContext=void 0,e.IsMacContext=new E.RawContextKey("isMac",c.isMacintosh,(0,k.localize)(1136,"Whether the operating system is macOS")),e.IsLinuxContext=new E.RawContextKey("isLinux",c.isLinux,(0,k.localize)(1137,"Whether the operating system is Linux")),e.IsWindowsContext=new E.RawContextKey("isWindows",c.isWindows,(0,k.localize)(1138,"Whether the operating system is Windows")),e.IsWebContext=new E.RawContextKey("isWeb",c.isWeb,(0,k.localize)(1139,"Whether the platform is a web browser")),e.IsMacNativeContext=new E.RawContextKey("isMacNative",c.isMacintosh&&!c.isWeb,(0,k.localize)(1140,"Whether the operating system is macOS on a non-browser platform")),e.IsIOSContext=new E.RawContextKey("isIOS",c.isIOS,(0,k.localize)(1141,"Whether the operating system is iOS")),e.IsMobileContext=new E.RawContextKey("isMobile",c.isMobile,(0,k.localize)(1142,"Whether the platform is a mobile web browser")),e.IsDevelopmentContext=new E.RawContextKey("isDevelopment",!1,!0),e.ProductQualityContext=new E.RawContextKey("productQualityType","",(0,k.localize)(1143,"Quality type of VS Code")),e.InputFocusedContextKey="inputFocus",e.InputFocusedContext=new E.RawContextKey(e.InputFocusedContextKey,!1,(0,k.localize)(1144,"Whether keyboard focus is inside an input box"))}),define(oe[58],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IContextMenuService=e.IContextViewService=void 0,e.IContextViewService=(0,c.createDecorator)("contextViewService"),e.IContextMenuService=(0,c.createDecorator)("contextMenuService")}),define(oe[179],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IDialogService=void 0,e.IDialogService=(0,c.createDecorator)("dialogService")}),define(oe[269],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IEnvironmentService=void 0,e.IEnvironmentService=(0,c.createDecorator)("environmentService")}),define(oe[118],re([1,0,7,2,27,5]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.nativeHoverDelegate=e.WorkbenchHoverDelegate=e.IHoverService=void 0,e.IHoverService=(0,c.createDecorator)("hoverService");let y=class extends k.Disposable{get delay(){return this.isInstantlyHovering()?0:this._delay}constructor(_,b,p={},n,s){super(),this.placement=_,this.instantHover=b,this.overrideOptions=p,this.configurationService=n,this.hoverService=s,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new k.DisposableStore),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(_,b){const p=typeof this.overrideOptions=="function"?this.overrideOptions(_,b):this.overrideOptions;this.hoverDisposables.clear();const n=(0,L.isHTMLElement)(_.target)?[_.target]:_.target.targetElements;for(const t of n)this.hoverDisposables.add((0,L.addStandardDisposableListener)(t,"keydown",i=>{i.equals(9)&&this.hoverService.hideHover()}));const s=(0,L.isHTMLElement)(_.content)?void 0:_.content.toString();return this.hoverService.showHover({..._,...p,persistence:{hideOnKeyDown:!0,...p.persistence},id:s,appearance:{..._.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...p.appearance}},b)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};e.WorkbenchHoverDelegate=y,e.WorkbenchHoverDelegate=y=De([he(3,E.IConfigurationService),he(4,e.IHoverService)],y),e.nativeHoverDelegate={showHover:function(){throw new Error("Native hover function not implemented.")},delay:0,showNativeHover:!0}}),define(oe[180],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceCollection=void 0;class c{constructor(...E){this._entries=new Map;for(const[L,y]of E)this.set(L,y)}set(E,L){const y=this._entries.get(E);return this._entries.set(E,L),y}get(E){return this._entries.get(E)}}e.ServiceCollection=c}),define(oe[681],re([1,0,14,8,2,263,670,7,180,73]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Trace=e.InstantiationService=void 0;const p=!1;class n extends Error{constructor(o){super("cyclic dependency between services"),this.message=o.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${o.toString()}`}}class s{constructor(o=new _.ServiceCollection,g=!1,u,l=p){this._services=o,this._strict=g,this._parent=u,this._enableTracing=l,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(f.IInstantiationService,this),this._globalGraph=l?u?._globalGraph??new y.Graph(a=>a):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,(0,E.dispose)(this._children),this._children.clear();for(const o of this._servicesToMaybeDispose)(0,E.isDisposable)(o)&&o.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(o,g){this._throwIfDisposed();const u=this,l=new class extends s{dispose(){u._children.delete(l),super.dispose()}}(o,this._strict,this,this._enableTracing);return this._children.add(l),g?.add(l),l}invokeFunction(o,...g){this._throwIfDisposed();const u=t.traceInvocation(this._enableTracing,o);let l=!1;try{return o({get:r=>{if(l)throw(0,k.illegalState)("service accessor is only valid during the invocation of its target method");const d=this._getOrCreateServiceInstance(r,u);if(!d)throw new Error(`[invokeFunction] unknown service '${r}'`);return d}},...g)}finally{l=!0,u.stop()}}createInstance(o,...g){this._throwIfDisposed();let u,l;return o instanceof L.SyncDescriptor?(u=t.traceCreation(this._enableTracing,o.ctor),l=this._createInstance(o.ctor,o.staticArguments.concat(g),u)):(u=t.traceCreation(this._enableTracing,o),l=this._createInstance(o,g,u)),u.stop(),l}_createInstance(o,g=[],u){const l=f._util.getServiceDependencies(o).sort((d,m)=>d.index-m.index),a=[];for(const d of l){const m=this._getOrCreateServiceInstance(d.id,u);m||this._throwIfStrict(`[createInstance] ${o.name} depends on UNKNOWN service ${d.id}.`,!1),a.push(m)}const r=l.length>0?l[0].index:g.length;if(g.length!==r){console.trace(`[createInstance] First service dependency of ${o.name} at position ${r+1} conflicts with ${g.length} static arguments`);const d=r-g.length;d>0?g=g.concat(new Array(d)):g=g.slice(0,r)}return Reflect.construct(o,g.concat(a))}_setCreatedServiceInstance(o,g){if(this._services.get(o)instanceof L.SyncDescriptor)this._services.set(o,g);else if(this._parent)this._parent._setCreatedServiceInstance(o,g);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(o){const g=this._services.get(o);return!g&&this._parent?this._parent._getServiceInstanceOrDescriptor(o):g}_getOrCreateServiceInstance(o,g){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(o));const u=this._getServiceInstanceOrDescriptor(o);return u instanceof L.SyncDescriptor?this._safeCreateAndCacheServiceInstance(o,u,g.branch(o,!0)):(g.branch(o,!1),u)}_safeCreateAndCacheServiceInstance(o,g,u){if(this._activeInstantiations.has(o))throw new Error(`illegal state - RECURSIVELY instantiating service '${o}'`);this._activeInstantiations.add(o);try{return this._createAndCacheServiceInstance(o,g,u)}finally{this._activeInstantiations.delete(o)}}_createAndCacheServiceInstance(o,g,u){const l=new y.Graph(m=>m.id.toString());let a=0;const r=[{id:o,desc:g,_trace:u}],d=new Set;for(;r.length;){const m=r.pop();if(!d.has(String(m.id))){if(d.add(String(m.id)),l.lookupOrInsertNode(m),a++>1e3)throw new n(l);for(const h of f._util.getServiceDependencies(m.desc.ctor)){const v=this._getServiceInstanceOrDescriptor(h.id);if(v||this._throwIfStrict(`[createInstance] ${o} depends on ${h.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(m.id),String(h.id)),v instanceof L.SyncDescriptor){const C={id:h.id,desc:v,_trace:m._trace.branch(h.id,!0)};l.insertEdge(m,C),r.push(C)}}}}for(;;){const m=l.roots();if(m.length===0){if(!l.isEmpty())throw new n(l);break}for(const{data:h}of m){if(this._getServiceInstanceOrDescriptor(h.id)instanceof L.SyncDescriptor){const C=this._createServiceInstanceWithOwner(h.id,h.desc.ctor,h.desc.staticArguments,h.desc.supportsDelayedInstantiation,h._trace);this._setCreatedServiceInstance(h.id,C)}l.removeNode(h)}}return this._getServiceInstanceOrDescriptor(o)}_createServiceInstanceWithOwner(o,g,u=[],l,a){if(this._services.get(o)instanceof L.SyncDescriptor)return this._createServiceInstance(o,g,u,l,a,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(o,g,u,l,a);throw new Error(`illegalState - creating UNKNOWN service instance ${g.name}`)}_createServiceInstance(o,g,u=[],l,a,r){if(l){const d=new s(void 0,this._strict,this,this._enableTracing);d._globalGraphImplicitDependency=String(o);const m=new Map,h=new c.GlobalIdleValue(()=>{const v=d._createInstance(g,u,a);for(const[C,w]of m){const S=v[C];if(typeof S=="function")for(const D of w)D.disposable=S.apply(v,D.listener)}return m.clear(),r.add(v),v});return new Proxy(Object.create(null),{get(v,C){if(!h.isInitialized&&typeof C=="string"&&(C.startsWith("onDid")||C.startsWith("onWill"))){let D=m.get(C);return D||(D=new b.LinkedList,m.set(C,D)),(T,M,A)=>{if(h.isInitialized)return h.value[C](T,M,A);{const R={listener:[T,M,A],disposable:void 0},N=D.push(R);return(0,E.toDisposable)(()=>{N(),R.disposable?.dispose()})}}}if(C in v)return v[C];const w=h.value;let S=w[C];return typeof S!="function"||(S=S.bind(w),v[C]=S),S},set(v,C,w){return h.value[C]=w,!0},getPrototypeOf(v){return g.prototype}})}else{const d=this._createInstance(g,u,a);return r.add(d),d}}_throwIfStrict(o,g){if(g&&console.warn(o),this._strict)throw new Error(o)}}e.InstantiationService=s;class t{static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(o,g){return o?new t(2,g.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(o,g){return o?new t(1,g.name):t._None}static{this._totals=0}constructor(o,g){this.type=o,this.name=g,this._start=Date.now(),this._dep=[]}branch(o,g){const u=new t(3,o.toString());return this._dep.push([o,g,u]),u}stop(){const o=Date.now()-this._start;t._totals+=o;let g=!1;function u(a,r){const d=[],m=new Array(a+1).join("	");for(const[h,v,C]of r._dep)if(v&&C){g=!0,d.push(`${m}CREATES -> ${h}`);const w=u(a+1,C);w&&d.push(w)}else d.push(`${m}uses -> ${h}`);return d.join(`
`)}const l=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${u(1,this)}`,`DONE, took ${o.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(o>2||g)&&t.all.add(l.join(`
`))}}e.Trace=t}),define(oe[682],re([1,0,8,260,139]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseResolvedKeybinding=void 0;class L extends E.ResolvedKeybinding{constructor(f,_){if(super(),_.length===0)throw(0,c.illegalArgument)("chords");this._os=f,this._chords=_}getLabel(){return k.UILabelProvider.toLabel(this._os,this._chords,f=>this._getLabel(f))}getAriaLabel(){return k.AriaLabelProvider.toLabel(this._os,this._chords,f=>this._getAriaLabel(f))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:k.ElectronAcceleratorLabelProvider.toLabel(this._os,this._chords,f=>this._getElectronAccelerator(f))}getUserSettingsLabel(){return k.UserSettingsLabelProvider.toLabel(this._os,this._chords,f=>this._getUserSettingsLabel(f))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(f=>this._getChord(f))}_getChord(f){return new E.ResolvedChord(f.ctrlKey,f.shiftKey,f.altKey,f.metaKey,this._getLabel(f),this._getAriaLabel(f))}getDispatchChords(){return this._chords.map(f=>this._getChordDispatch(f))}getSingleModifierDispatchChords(){return this._chords.map(f=>this._getSingleModifierChordDispatch(f))}}e.BaseResolvedKeybinding=L}),define(oe[31],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IKeybindingService=void 0,e.IKeybindingService=(0,c.createDecorator)("keybindingService")}),define(oe[384],re([1,0,5,174,2,31]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorHoverStatusBar=void 0;const y=c.$;let f=class extends E.Disposable{get hasContent(){return this._hasContent}constructor(b){super(),this._keybindingService=b,this.actions=[],this._hasContent=!1,this.hoverElement=y("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=c.append(this.hoverElement,y("div.actions"))}addAction(b){const p=this._keybindingService.lookupKeybinding(b.commandId),n=p?p.getLabel():null;this._hasContent=!0;const s=this._register(k.HoverAction.render(this.actionsElement,b,n));return this.actions.push(s),s}append(b){const p=c.append(this.actionsElement,b);return this._hasContent=!0,p}};e.EditorHoverStatusBar=f,e.EditorHoverStatusBar=f=De([he(0,L.IKeybindingService)],f)}),define(oe[385],re([1,0,5,31,639,12,27,60,20,174,6]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.ContentHoverWidget=void 0;const s=30,t=6;let i=class extends E.ResizableContentWidget{static{n=this}static{this.ID="editor.contrib.resizableContentHoverWidget"}static{this._lastDimensions=new c.Dimension(0,0)}get isVisibleFromKeyboard(){return this._renderedHover?.source===1}get isVisible(){return this._hoverVisibleKey.get()??!1}get isFocused(){return this._hoverFocusedKey.get()??!1}constructor(u,l,a,r,d){const m=u.getOption(67)+8,h=150,v=new c.Dimension(h,m);super(u,v),this._configurationService=a,this._accessibilityService=r,this._keybindingService=d,this._hover=this._register(new b.HoverWidget),this._onDidResize=this._register(new p.Emitter),this.onDidResize=this._onDidResize.event,this._minimumSize=v,this._hoverVisibleKey=_.EditorContextKeys.hoverVisible.bindTo(l),this._hoverFocusedKey=_.EditorContextKeys.hoverFocused.bindTo(l),c.append(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange(()=>{this.isVisible&&this._updateMaxDimensions()})),this._register(this._editor.onDidChangeConfiguration(w=>{w.hasChanged(50)&&this._updateFont()}));const C=this._register(c.trackFocus(this._resizableNode.domNode));this._register(C.onDidFocus(()=>{this._hoverFocusedKey.set(!0)})),this._register(C.onDidBlur(()=>{this._hoverFocusedKey.set(!1)})),this._setRenderedHover(void 0),this._editor.addContentWidget(this)}dispose(){super.dispose(),this._renderedHover?.dispose(),this._editor.removeContentWidget(this)}getId(){return n.ID}static _applyDimensions(u,l,a){const r=typeof l=="number"?`${l}px`:l,d=typeof a=="number"?`${a}px`:a;u.style.width=r,u.style.height=d}_setContentsDomNodeDimensions(u,l){const a=this._hover.contentsDomNode;return n._applyDimensions(a,u,l)}_setContainerDomNodeDimensions(u,l){const a=this._hover.containerDomNode;return n._applyDimensions(a,u,l)}_setHoverWidgetDimensions(u,l){this._setContentsDomNodeDimensions(u,l),this._setContainerDomNodeDimensions(u,l),this._layoutContentWidget()}static _applyMaxDimensions(u,l,a){const r=typeof l=="number"?`${l}px`:l,d=typeof a=="number"?`${a}px`:a;u.style.maxWidth=r,u.style.maxHeight=d}_setHoverWidgetMaxDimensions(u,l){n._applyMaxDimensions(this._hover.contentsDomNode,u,l),n._applyMaxDimensions(this._hover.containerDomNode,u,l),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth",typeof u=="number"?`${u}px`:u),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(u){this._setHoverWidgetMaxDimensions("none","none");const l=u.width,a=u.height;this._setHoverWidgetDimensions(l,a)}_updateResizableNodeMaxDimensions(){const u=this._findMaximumRenderingWidth()??1/0,l=this._findMaximumRenderingHeight()??1/0;this._resizableNode.maxSize=new c.Dimension(u,l),this._setHoverWidgetMaxDimensions(u,l)}_resize(u){n._lastDimensions=new c.Dimension(u.width,u.height),this._setAdjustedHoverWidgetDimensions(u),this._resizableNode.layout(u.height,u.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),this._onDidResize.fire()}_findAvailableSpaceVertically(){const u=this._renderedHover?.showAtPosition;if(u)return this._positionPreference===1?this._availableVerticalSpaceAbove(u):this._availableVerticalSpaceBelow(u)}_findMaximumRenderingHeight(){const u=this._findAvailableSpaceVertically();if(!u)return;let l=t;return Array.from(this._hover.contentsDomNode.children).forEach(a=>{l+=a.clientHeight}),Math.min(u,l)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const u=Array.from(this._hover.contentsDomNode.children).some(l=>l.scrollWidth>l.clientWidth);return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),u}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const u=this._isHoverTextOverflowing(),l=typeof this._contentWidth>"u"?0:this._contentWidth-2;return u||this._hover.containerDomNode.clientWidth<l?c.getClientArea(this._hover.containerDomNode.ownerDocument.body).width-14:this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(u,l){if(!this._renderedHover)return!1;if(this._renderedHover.initialMousePosX===void 0||this._renderedHover.initialMousePosY===void 0)return this._renderedHover.initialMousePosX=u,this._renderedHover.initialMousePosY=l,!1;const a=c.getDomNodePagePosition(this.getDomNode());this._renderedHover.closestMouseDistance===void 0&&(this._renderedHover.closestMouseDistance=o(this._renderedHover.initialMousePosX,this._renderedHover.initialMousePosY,a.left,a.top,a.width,a.height));const r=o(u,l,a.left,a.top,a.width,a.height);return r>this._renderedHover.closestMouseDistance+4?!1:(this._renderedHover.closestMouseDistance=Math.min(this._renderedHover.closestMouseDistance,r),!0)}_setRenderedHover(u){this._renderedHover?.dispose(),this._renderedHover=u,this._hoverVisibleKey.set(!!u),this._hover.containerDomNode.classList.toggle("hidden",!u)}_updateFont(){const{fontSize:u,lineHeight:l}=this._editor.getOption(50),a=this._hover.contentsDomNode;a.style.fontSize=`${u}px`,a.style.lineHeight=`${l/u}`,Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(d=>this._editor.applyFontInfo(d))}_updateContent(u){const l=this._hover.contentsDomNode;l.style.paddingBottom="",l.textContent="",l.appendChild(u)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const u=Math.max(this._editor.getLayoutInfo().height/4,250,n._lastDimensions.height),l=Math.max(this._editor.getLayoutInfo().width*.66,500,n._lastDimensions.width);this._setHoverWidgetMaxDimensions(l,u)}_render(u){this._setRenderedHover(u),this._updateFont(),this._updateContent(u.domNode),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){return this._renderedHover?{position:this._renderedHover.showAtPosition,secondaryPosition:this._renderedHover.showAtSecondaryPosition,positionAffinity:this._renderedHover.shouldAppearBeforeContent?3:void 0,preference:[this._positionPreference??1]}:null}show(u){if(!this._editor||!this._editor.hasModel())return;this._render(u);const l=c.getTotalHeight(this._hover.containerDomNode),a=u.showAtPosition;this._positionPreference=this._findPositionPreference(l,a)??1,this.onContentsChanged(),u.shouldFocus&&this._hover.containerDomNode.focus(),this._onDidResize.fire();const d=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&(0,b.getHoverAccessibleViewHint)(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel()??"");d&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+d)}hide(){if(!this._renderedHover)return;const u=this._renderedHover.shouldFocus||this._hoverFocusedKey.get();this._setRenderedHover(void 0),this._resizableNode.maxSize=new c.Dimension(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),u&&this._editor.focus()}_removeConstraintsRenderNormally(){const u=this._editor.getLayoutInfo();this._resizableNode.layout(u.height,u.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(u){this._minimumSize=new c.Dimension(Math.max(this._minimumSize.width,u.width),Math.max(this._minimumSize.height,u.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const u=typeof this._contentWidth>"u"?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new c.Dimension(u,this._minimumSize.height)}onContentsChanged(){this._removeConstraintsRenderNormally();const u=this._hover.containerDomNode;let l=c.getTotalHeight(u),a=c.getTotalWidth(u);if(this._resizableNode.layout(l,a),this._setHoverWidgetDimensions(a,l),l=c.getTotalHeight(u),a=c.getTotalWidth(u),this._contentWidth=a,this._updateMinimumWidth(),this._resizableNode.layout(l,a),this._renderedHover?.showAtPosition){const r=c.getTotalHeight(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(r,this._renderedHover.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const u=this._hover.scrollbar.getScrollPosition().scrollTop,l=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:u-l.lineHeight})}scrollDown(){const u=this._hover.scrollbar.getScrollPosition().scrollTop,l=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:u+l.lineHeight})}scrollLeft(){const u=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:u-s})}scrollRight(){const u=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:u+s})}pageUp(){const u=this._hover.scrollbar.getScrollPosition().scrollTop,l=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:u-l})}pageDown(){const u=this._hover.scrollbar.getScrollPosition().scrollTop,l=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:u+l})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};e.ContentHoverWidget=i,e.ContentHoverWidget=i=n=De([he(1,L.IContextKeyService),he(2,y.IConfigurationService),he(3,f.IAccessibilityService),he(4,k.IKeybindingService)],i);function o(g,u,l,a,r,d){const m=l+r/2,h=a+d/2,v=Math.max(Math.abs(g-m)-r/2,0),C=Math.max(Math.abs(u-h)-d/2,0);return Math.sqrt(v*v+C*C)}}),define(oe[386],re([1,0,12]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KeybindingResolver=e.NoMatchingKb=void 0,e.NoMatchingKb={kind:0};const k={kind:1};function E(_,b,p){return{kind:2,commandId:_,commandArgs:b,isBubble:p}}class L{constructor(b,p,n){this._log=n,this._defaultKeybindings=b,this._defaultBoundCommands=new Map;for(const s of b){const t=s.command;t&&t.charAt(0)!=="-"&&this._defaultBoundCommands.set(t,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=L.handleRemovals([].concat(b).concat(p));for(let s=0,t=this._keybindings.length;s<t;s++){const i=this._keybindings[s];if(i.chords.length===0)continue;const o=i.when?.substituteConstants();o&&o.type===0||this._addKeyPress(i.chords[0],i)}}static _isTargetedForRemoval(b,p,n){if(p){for(let s=0;s<p.length;s++)if(p[s]!==b.chords[s])return!1}return!(n&&n.type!==1&&(!b.when||!(0,c.expressionsAreEqualWithConstantSubstitution)(n,b.when)))}static handleRemovals(b){const p=new Map;for(let s=0,t=b.length;s<t;s++){const i=b[s];if(i.command&&i.command.charAt(0)==="-"){const o=i.command.substring(1);p.has(o)?p.get(o).push(i):p.set(o,[i])}}if(p.size===0)return b;const n=[];for(let s=0,t=b.length;s<t;s++){const i=b[s];if(!i.command||i.command.length===0){n.push(i);continue}if(i.command.charAt(0)==="-")continue;const o=p.get(i.command);if(!o||!i.isDefault){n.push(i);continue}let g=!1;for(const u of o){const l=u.when;if(this._isTargetedForRemoval(i,u.chords,l)){g=!0;break}}if(!g){n.push(i);continue}}return n}_addKeyPress(b,p){const n=this._map.get(b);if(typeof n>"u"){this._map.set(b,[p]),this._addToLookupMap(p);return}for(let s=n.length-1;s>=0;s--){const t=n[s];if(t.command===p.command)continue;let i=!0;for(let o=1;o<t.chords.length&&o<p.chords.length;o++)if(t.chords[o]!==p.chords[o]){i=!1;break}i&&L.whenIsEntirelyIncluded(t.when,p.when)&&this._removeFromLookupMap(t)}n.push(p),this._addToLookupMap(p)}_addToLookupMap(b){if(!b.command)return;let p=this._lookupMap.get(b.command);typeof p>"u"?(p=[b],this._lookupMap.set(b.command,p)):p.push(b)}_removeFromLookupMap(b){if(!b.command)return;const p=this._lookupMap.get(b.command);if(!(typeof p>"u")){for(let n=0,s=p.length;n<s;n++)if(p[n]===b){p.splice(n,1);return}}}static whenIsEntirelyIncluded(b,p){return!p||p.type===1?!0:!b||b.type===1?!1:(0,c.implies)(b,p)}getKeybindings(){return this._keybindings}lookupPrimaryKeybinding(b,p){const n=this._lookupMap.get(b);if(typeof n>"u"||n.length===0)return null;if(n.length===1)return n[0];for(let s=n.length-1;s>=0;s--){const t=n[s];if(p.contextMatchesRules(t.when))return t}return n[n.length-1]}resolve(b,p,n){const s=[...p,n];this._log(`| Resolving ${s}`);const t=this._map.get(s[0]);if(t===void 0)return this._log("\\ No keybinding entries."),e.NoMatchingKb;let i=null;if(s.length<2)i=t;else{i=[];for(let g=0,u=t.length;g<u;g++){const l=t[g];if(s.length>l.chords.length)continue;let a=!0;for(let r=1;r<s.length;r++)if(l.chords[r]!==s[r]){a=!1;break}a&&i.push(l)}}const o=this._findCommand(b,i);return o?s.length<o.chords.length?(this._log(`\\ From ${i.length} keybinding entries, awaiting ${o.chords.length-s.length} more chord(s), when: ${y(o.when)}, source: ${f(o)}.`),k):(this._log(`\\ From ${i.length} keybinding entries, matched ${o.command}, when: ${y(o.when)}, source: ${f(o)}.`),E(o.command,o.commandArgs,o.bubble)):(this._log(`\\ From ${i.length} keybinding entries, no when clauses matched the context.`),e.NoMatchingKb)}_findCommand(b,p){for(let n=p.length-1;n>=0;n--){const s=p[n];if(L._contextMatchesRules(b,s.when))return s}return null}static _contextMatchesRules(b,p){return p?p.evaluate(b):!0}}e.KeybindingResolver=L;function y(_){return _?`${_.serialize()}`:"no when condition"}function f(_){return _.extensionId?_.isBuiltinExtension?`built-in extension ${_.extensionId}`:`user extension ${_.extensionId}`:_.isDefault?"built-in":"user"}}),define(oe[683],re([1,0,14,8,6,302,2,3,386]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractKeybindingService=void 0;const b=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class p extends y.Disposable{get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:E.Event.None}get inChordMode(){return this._currentChords.length>0}constructor(t,i,o,g,u){super(),this._contextKeyService=t,this._commandService=i,this._telemetryService=o,this._notificationService=g,this._logService=u,this._onDidUpdateKeybindings=this._register(new E.Emitter),this._currentChords=[],this._currentChordChecker=new c.IntervalTimer,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=n.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new c.TimeoutTimer,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}_log(t){this._logging&&this._logService.info(`[KeybindingService]: ${t}`)}getKeybindings(){return this._getResolver().getKeybindings()}lookupKeybinding(t,i){const o=this._getResolver().lookupPrimaryKeybinding(t,i||this._contextKeyService);if(o)return o.resolvedKeybinding}dispatchEvent(t,i){return this._dispatch(t,i)}softDispatch(t,i){this._log("/ Soft dispatching keyboard event");const o=this.resolveKeyboardEvent(t);if(o.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),_.NoMatchingKb;const[g]=o.getDispatchChords();if(g===null)return this._log("\\ Keyboard event cannot be dispatched"),_.NoMatchingKb;const u=this._contextKeyService.getContext(i),l=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(u,l,g)}_scheduleLeaveChordMode(){const t=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-t>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(t,i){switch(this._currentChords.push({keypress:t,label:i}),this._currentChords.length){case 0:throw(0,k.illegalState)("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(f.localize(1126,"({0}) was pressed. Waiting for second key of chord...",i));break;default:{const o=this._currentChords.map(({label:g})=>g).join(", ");this._currentChordStatusMessage=this._notificationService.status(f.localize(1127,"({0}) was pressed. Waiting for next key of chord...",o))}}this._scheduleLeaveChordMode(),L.IME.enabled&&L.IME.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.dispose(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],L.IME.enable()}_dispatch(t,i){return this._doDispatch(this.resolveKeyboardEvent(t),i,!1)}_singleModifierDispatch(t,i){const o=this.resolveKeyboardEvent(t),[g]=o.getSingleModifierDispatchChords();if(g)return this._ignoreSingleModifiers.has(g)?(this._log(`+ Ignoring single modifier ${g} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=n.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=n.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${g}.`),this._currentSingleModifier=g,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):g===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${g} ${g}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(o,i,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${g}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[u]=o.getChords();return this._ignoreSingleModifiers=new n(u),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(t,i,o=!1){let g=!1;if(t.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let u=null,l=null;if(o){const[m]=t.getSingleModifierDispatchChords();u=m,l=m?[m]:[]}else[u]=t.getDispatchChords(),l=this._currentChords.map(({keypress:m})=>m);if(u===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),g;const a=this._contextKeyService.getContext(i),r=t.getLabel(),d=this._getResolver().resolve(a,l,u);switch(d.kind){case 0:{if(this._logService.trace("KeybindingService#dispatch",r,"[ No matching keybinding ]"),this.inChordMode){const m=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${m}, ${r}".`),this._notificationService.status(f.localize(1128,"The key combination ({0}, {1}) is not a command.",m,r),{hideAfter:10*1e3}),this._leaveChordMode(),g=!0}return g}case 1:return this._logService.trace("KeybindingService#dispatch",r,"[ Several keybindings match - more chords needed ]"),g=!0,this._expectAnotherChord(u,r),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),g;case 2:{if(this._logService.trace("KeybindingService#dispatch",r,`[ Will dispatch command ${d.commandId} ]`),d.commandId===null||d.commandId===""){if(this.inChordMode){const m=this._currentChords.map(({label:h})=>h).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${m}, ${r}".`),this._notificationService.status(f.localize(1129,"The key combination ({0}, {1}) is not a command.",m,r),{hideAfter:10*1e3}),this._leaveChordMode(),g=!0}}else{this.inChordMode&&this._leaveChordMode(),d.isBubble||(g=!0),this._log(`+ Invoking command ${d.commandId}.`),this._currentlyDispatchingCommandId=d.commandId;try{typeof d.commandArgs>"u"?this._commandService.executeCommand(d.commandId).then(void 0,m=>this._notificationService.warn(m)):this._commandService.executeCommand(d.commandId,d.commandArgs).then(void 0,m=>this._notificationService.warn(m))}finally{this._currentlyDispatchingCommandId=null}b.test(d.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:d.commandId,from:"keybinding",detail:t.getUserSettingsLabel()??void 0})}return g}}}mightProducePrintableCharacter(t){return t.ctrlKey||t.metaKey?!1:t.keyCode>=31&&t.keyCode<=56||t.keyCode>=21&&t.keyCode<=30}}e.AbstractKeybindingService=p;class n{static{this.EMPTY=new n(null)}constructor(t){this._ctrlKey=t?t.ctrlKey:!1,this._shiftKey=t?t.shiftKey:!1,this._altKey=t?t.altKey:!1,this._metaKey=t?t.metaKey:!1}has(t){switch(t){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}}),define(oe[387],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResolvedKeybindingItem=void 0,e.toEmptyArrayIfContainsNull=k;class c{constructor(L,y,f,_,b,p,n){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=L,this.chords=L?k(L.getDispatchChords()):[],L&&this.chords.length===0&&(this.chords=k(L.getSingleModifierDispatchChords())),this.bubble=y?y.charCodeAt(0)===94:!1,this.command=this.bubble?y.substr(1):y,this.commandArgs=f,this.when=_,this.isDefault=b,this.extensionId=p,this.isBuiltinExtension=n}}e.ResolvedKeybindingItem=c;function k(E){const L=[];for(let y=0,f=E.length;y<f;y++){const _=E[y];if(!_)return[];L.push(_)}return L}}),define(oe[684],re([1,0,72,139,682,387]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.USLayoutResolvedKeybinding=void 0;class y extends E.BaseResolvedKeybinding{constructor(_,b){super(b,_)}_keyCodeToUILabel(_){if(this._os===2)switch(_){case 15:return"\u2190";case 16:return"\u2191";case 17:return"\u2192";case 18:return"\u2193"}return c.KeyCodeUtils.toString(_)}_getLabel(_){return _.isDuplicateModifierCase()?"":this._keyCodeToUILabel(_.keyCode)}_getAriaLabel(_){return _.isDuplicateModifierCase()?"":c.KeyCodeUtils.toString(_.keyCode)}_getElectronAccelerator(_){return c.KeyCodeUtils.toElectronAccelerator(_.keyCode)}_getUserSettingsLabel(_){if(_.isDuplicateModifierCase())return"";const b=c.KeyCodeUtils.toUserSettingsUS(_.keyCode);return b&&b.toLowerCase()}_getChordDispatch(_){return y.getDispatchStr(_)}static getDispatchStr(_){if(_.isModifierKey())return null;let b="";return _.ctrlKey&&(b+="ctrl+"),_.shiftKey&&(b+="shift+"),_.altKey&&(b+="alt+"),_.metaKey&&(b+="meta+"),b+=c.KeyCodeUtils.toString(_.keyCode),b}_getSingleModifierChordDispatch(_){return _.keyCode===5&&!_.shiftKey&&!_.altKey&&!_.metaKey?"ctrl":_.keyCode===4&&!_.ctrlKey&&!_.altKey&&!_.metaKey?"shift":_.keyCode===6&&!_.ctrlKey&&!_.shiftKey&&!_.metaKey?"alt":_.keyCode===57&&!_.ctrlKey&&!_.shiftKey&&!_.altKey?"meta":null}static _scanCodeToKeyCode(_){const b=c.IMMUTABLE_CODE_TO_KEY_CODE[_];if(b!==-1)return b;switch(_){case 10:return 31;case 11:return 32;case 12:return 33;case 13:return 34;case 14:return 35;case 15:return 36;case 16:return 37;case 17:return 38;case 18:return 39;case 19:return 40;case 20:return 41;case 21:return 42;case 22:return 43;case 23:return 44;case 24:return 45;case 25:return 46;case 26:return 47;case 27:return 48;case 28:return 49;case 29:return 50;case 30:return 51;case 31:return 52;case 32:return 53;case 33:return 54;case 34:return 55;case 35:return 56;case 36:return 22;case 37:return 23;case 38:return 24;case 39:return 25;case 40:return 26;case 41:return 27;case 42:return 28;case 43:return 29;case 44:return 30;case 45:return 21;case 51:return 88;case 52:return 86;case 53:return 92;case 54:return 94;case 55:return 93;case 56:return 0;case 57:return 85;case 58:return 95;case 59:return 91;case 60:return 87;case 61:return 89;case 62:return 90;case 106:return 97}return 0}static _toKeyCodeChord(_){if(!_)return null;if(_ instanceof k.KeyCodeChord)return _;const b=this._scanCodeToKeyCode(_.scanCode);return b===0?null:new k.KeyCodeChord(_.ctrlKey,_.shiftKey,_.altKey,_.metaKey,b)}static resolveKeybinding(_,b){const p=(0,L.toEmptyArrayIfContainsNull)(_.chords.map(n=>this._toKeyCodeChord(n)));return p.length>0?[new y(p,b)]:[]}}e.USLayoutResolvedKeybinding=y}),define(oe[181],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ILabelService=void 0,e.ILabelService=(0,c.createDecorator)("labelService")}),define(oe[119],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ILayoutService=void 0,e.ILayoutService=(0,c.createDecorator)("layoutService")}),define(oe[388],re([1,0,5,52,13,6,35,49,119]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorScopedLayoutService=void 0;let b=class{get mainContainer(){return(0,E.firstOrDefault)(this._codeEditorService.listCodeEditors())?.getContainerDomNode()??k.mainWindow.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return c.getClientArea(this.mainContainer)}get activeContainerDimension(){return c.getClientArea(this.activeContainer)}get containers(){return(0,E.coalesce)(this._codeEditorService.listCodeEditors().map(s=>s.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(s){this._codeEditorService=s,this.onDidLayoutMainContainer=L.Event.None,this.onDidLayoutActiveContainer=L.Event.None,this.onDidLayoutContainer=L.Event.None,this.onDidChangeActiveContainer=L.Event.None,this.onDidAddContainer=L.Event.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};b=De([he(0,y.ICodeEditorService)],b);let p=class extends b{get mainContainer(){return this._container}constructor(s,t){super(t),this._container=s}};e.EditorScopedLayoutService=p,e.EditorScopedLayoutService=p=De([he(1,y.ICodeEditorService)],p),(0,f.registerSingleton)(_.ILayoutService,b,1)}),define(oe[685],re([1,0,5,52,6,2,60,27,12,119]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityService=void 0;let p=class extends L.Disposable{constructor(s,t,i){super(),this._contextKeyService=s,this._layoutService=t,this._configurationService=i,this._accessibilitySupport=0,this._onDidChangeScreenReaderOptimized=new E.Emitter,this._onDidChangeReducedMotion=new E.Emitter,this._onDidChangeLinkUnderline=new E.Emitter,this._accessibilityModeEnabledContext=y.CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);const o=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(u=>{u.affectsConfiguration("editor.accessibilitySupport")&&(o(),this._onDidChangeScreenReaderOptimized.fire()),u.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),o(),this._register(this.onDidChangeScreenReaderOptimized(()=>o()));const g=k.mainWindow.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=g.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(g),this.initLinkUnderlineListeners()}initReducedMotionListeners(s){this._register((0,c.addDisposableListener)(s,"change",()=>{this._systemMotionReduced=s.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const i=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",i),this._layoutService.mainContainer.classList.toggle("enable-motion",!i)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const i=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=i,this._onDidChangeLinkUnderline.fire()}}));const s=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};s(),this._register(this.onDidChangeLinkUnderlines(()=>s()))}onDidChangeLinkUnderlines(s){return this._onDidChangeLinkUnderline.event(s)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const s=this._configurationService.getValue("editor.accessibilitySupport");return s==="on"||s==="auto"&&this._accessibilitySupport===2}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const s=this._configMotionReduced;return s==="on"||s==="auto"&&this._systemMotionReduced}getAccessibilitySupport(){return this._accessibilitySupport}};e.AccessibilityService=p,e.AccessibilityService=p=De([he(0,_.IContextKeyService),he(1,b.ILayoutService),he(2,f.IConfigurationService)],p)}),define(oe[389],re([1,0,311,2,119,5]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextViewService=e.ContextViewHandler=void 0;let y=class extends k.Disposable{constructor(b){super(),this.layoutService=b,this.contextView=this._register(new c.ContextView(this.layoutService.mainContainer,1)),this.layout(),this._register(b.onDidLayoutContainer(()=>this.layout()))}showContextView(b,p,n){let s;p?p===this.layoutService.getContainer((0,L.getWindow)(p))?s=1:n?s=3:s=2:s=1,this.contextView.setContainer(p??this.layoutService.activeContainer,s),this.contextView.show(b);const t={close:()=>{this.openContextView===t&&this.hideContextView()}};return this.openContextView=t,t}layout(){this.contextView.layout()}hideContextView(b){this.contextView.hide(b),this.openContextView=void 0}};e.ContextViewHandler=y,e.ContextViewHandler=y=De([he(0,E.ILayoutService)],y);class f extends y{getContextViewElement(){return this.contextView.getViewElement()}}e.ContextViewService=f}),define(oe[61],re([1,0,6,2,12,7]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_LOG_LEVEL=e.MultiplexLogger=e.ConsoleLogger=e.AbstractLogger=e.DEFAULT_LOG_LEVEL=e.LogLevel=e.ILogService=void 0,e.LogLevelToString=p,e.ILogService=(0,L.createDecorator)("logService");var y;(function(n){n[n.Off=0]="Off",n[n.Trace=1]="Trace",n[n.Debug=2]="Debug",n[n.Info=3]="Info",n[n.Warning=4]="Warning",n[n.Error=5]="Error"})(y||(e.LogLevel=y={})),e.DEFAULT_LOG_LEVEL=y.Info;class f extends k.Disposable{constructor(){super(...arguments),this.level=e.DEFAULT_LOG_LEVEL,this._onDidChangeLogLevel=this._register(new c.Emitter),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(s){this.level!==s&&(this.level=s,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(s){return this.level!==y.Off&&this.level<=s}}e.AbstractLogger=f;class _ extends f{constructor(s=e.DEFAULT_LOG_LEVEL,t=!0){super(),this.useColors=t,this.setLevel(s)}trace(s,...t){this.checkLogLevel(y.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",s,...t):console.log(s,...t))}debug(s,...t){this.checkLogLevel(y.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",s,...t):console.log(s,...t))}info(s,...t){this.checkLogLevel(y.Info)&&(this.useColors?console.log("%c INFO","color: #33f",s,...t):console.log(s,...t))}warn(s,...t){this.checkLogLevel(y.Warning)&&(this.useColors?console.log("%c WARN","color: #993",s,...t):console.log(s,...t))}error(s,...t){this.checkLogLevel(y.Error)&&(this.useColors?console.log("%c  ERR","color: #f33",s,...t):console.error(s,...t))}}e.ConsoleLogger=_;class b extends f{constructor(s){super(),this.loggers=s,s.length&&this.setLevel(s[0].getLevel())}setLevel(s){for(const t of this.loggers)t.setLevel(s);super.setLevel(s)}trace(s,...t){for(const i of this.loggers)i.trace(s,...t)}debug(s,...t){for(const i of this.loggers)i.debug(s,...t)}info(s,...t){for(const i of this.loggers)i.info(s,...t)}warn(s,...t){for(const i of this.loggers)i.warn(s,...t)}error(s,...t){for(const i of this.loggers)i.error(s,...t)}dispose(){for(const s of this.loggers)s.dispose();super.dispose()}}e.MultiplexLogger=b;function p(n){switch(n){case y.Trace:return"trace";case y.Debug:return"debug";case y.Info:return"info";case y.Warning:return"warn";case y.Error:return"error";case y.Off:return"off"}}e.CONTEXT_LOG_LEVEL=new E.RawContextKey("logLevel",p(y.Info))}),define(oe[210],re([1,0,64,5,92,46,295,14,6,2,128,11,323,23,60,61]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextAreaWrapper=e.ClipboardEventUtils=e.TextAreaInput=e.InMemoryClipboardMetadataManager=e.CopyOptions=e.TextAreaSyntethicEvents=void 0;var g;(function(d){d.Tap="-monaco-textarea-synthetic-tap"})(g||(e.TextAreaSyntethicEvents=g={})),e.CopyOptions={forceCopyWithSyntaxHighlighting:!1};class u{static{this.INSTANCE=new u}constructor(){this._lastState=null}set(m,h){this._lastState={lastCopiedValue:m,data:h}}get(m){return this._lastState&&this._lastState.lastCopiedValue===m?this._lastState.data:(this._lastState=null,null)}}e.InMemoryClipboardMetadataManager=u;class l{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(m){m=m||"";const h={text:m,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=m.length,h}}let a=class extends b.Disposable{get textAreaState(){return this._textAreaState}constructor(m,h,v,C,w,S){super(),this._host=m,this._textArea=h,this._OS=v,this._browser=C,this._accessibilityService=w,this._logService=S,this._onFocus=this._register(new _.Emitter),this.onFocus=this._onFocus.event,this._onBlur=this._register(new _.Emitter),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new _.Emitter),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new _.Emitter),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new _.Emitter),this.onCut=this._onCut.event,this._onPaste=this._register(new _.Emitter),this.onPaste=this._onPaste.event,this._onType=this._register(new _.Emitter),this.onType=this._onType.event,this._onCompositionStart=this._register(new _.Emitter),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new _.Emitter),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new _.Emitter),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new _.Emitter),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncFocusGainWriteScreenReaderContent=this._register(new b.MutableDisposable),this._asyncTriggerCut=this._register(new f.RunOnceScheduler(()=>this._onCut.fire(),0)),this._textAreaState=s.TextAreaState.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(_.Event.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new f.RunOnceScheduler(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let D=null;this._register(this._textArea.onKeyDown(I=>{const T=new L.StandardKeyboardEvent(I);(T.keyCode===114||this._currentComposition&&T.keyCode===1)&&T.stopPropagation(),T.equals(9)&&T.preventDefault(),D=T,this._onKeyDown.fire(T)})),this._register(this._textArea.onKeyUp(I=>{const T=new L.StandardKeyboardEvent(I);this._onKeyUp.fire(T)})),this._register(this._textArea.onCompositionStart(I=>{s._debugComposition&&console.log("[compositionstart]",I);const T=new l;if(this._currentComposition){this._currentComposition=T;return}if(this._currentComposition=T,this._OS===2&&D&&D.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===I.data&&(D.code==="ArrowRight"||D.code==="ArrowLeft")){s._debugComposition&&console.log("[compositionstart] Handling long press case on macOS + arrow key",I),T.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:I.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:I.data});return}this._onCompositionStart.fire({data:I.data})})),this._register(this._textArea.onCompositionUpdate(I=>{s._debugComposition&&console.log("[compositionupdate]",I);const T=this._currentComposition;if(!T)return;if(this._browser.isAndroid){const A=s.TextAreaState.readFromTextArea(this._textArea,this._textAreaState),R=s.TextAreaState.deduceAndroidCompositionInput(this._textAreaState,A);this._textAreaState=A,this._onType.fire(R),this._onCompositionUpdate.fire(I);return}const M=T.handleCompositionUpdate(I.data);this._textAreaState=s.TextAreaState.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(M),this._onCompositionUpdate.fire(I)})),this._register(this._textArea.onCompositionEnd(I=>{s._debugComposition&&console.log("[compositionend]",I);const T=this._currentComposition;if(!T)return;if(this._currentComposition=null,this._browser.isAndroid){const A=s.TextAreaState.readFromTextArea(this._textArea,this._textAreaState),R=s.TextAreaState.deduceAndroidCompositionInput(this._textAreaState,A);this._textAreaState=A,this._onType.fire(R),this._onCompositionEnd.fire();return}const M=T.handleCompositionUpdate(I.data);this._textAreaState=s.TextAreaState.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(M),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(I=>{if(s._debugComposition&&console.log("[input]",I),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const T=s.TextAreaState.readFromTextArea(this._textArea,this._textAreaState),M=s.TextAreaState.deduceInput(this._textAreaState,T,this._OS===2);M.replacePrevCharCnt===0&&M.text.length===1&&(n.isHighSurrogate(M.text.charCodeAt(0))||M.text.charCodeAt(0)===127)||(this._textAreaState=T,(M.text!==""||M.replacePrevCharCnt!==0||M.replaceNextCharCnt!==0||M.positionDelta!==0)&&this._onType.fire(M))})),this._register(this._textArea.onCut(I=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(I),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(I=>{this._ensureClipboardGetsEditorSelection(I)})),this._register(this._textArea.onPaste(I=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),I.preventDefault(),!I.clipboardData)return;let[T,M]=e.ClipboardEventUtils.getTextData(I.clipboardData);T&&(M=M||u.INSTANCE.get(T),this._onPaste.fire({text:T,metadata:M}))})),this._register(this._textArea.onFocus(()=>{const I=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!I&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new f.RunOnceScheduler(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_installSelectionChangeListener(){let m=0;return k.addDisposableListener(this._textArea.ownerDocument,"selectionchange",h=>{if(y.inputLatency.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;const v=Date.now(),C=v-m;if(m=v,C<5)return;const w=v-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),w<100||!this._textAreaState.selection)return;const S=this._textArea.getValue();if(this._textAreaState.value!==S)return;const D=this._textArea.getSelectionStart(),I=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===D&&this._textAreaState.selectionEnd===I)return;const T=this._textAreaState.deduceEditorPosition(D),M=this._host.deduceModelPosition(T[0],T[1],T[2]),A=this._textAreaState.deduceEditorPosition(I),R=this._host.deduceModelPosition(A[0],A[1],A[2]),N=new t.Selection(M.lineNumber,M.column,R.lineNumber,R.column);this._onSelectionChangeRequest.fire(N)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(m){this._hasFocus!==m&&(this._hasFocus=m,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(m,h){this._hasFocus||(h=h.collapseSelection()),h.writeToTextArea(m,this._textArea,this._hasFocus),this._textAreaState=h}writeNativeTextAreaContent(m){!this._accessibilityService.isScreenReaderOptimized()&&m==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${m})`),this._setAndWriteTextAreaState(m,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(m){const h=this._host.getDataToCopy(),v={version:1,isFromEmptySelection:h.isFromEmptySelection,multicursorText:h.multicursorText,mode:h.mode};u.INSTANCE.set(this._browser.isFirefox?h.text.replace(/\r\n/g,`
`):h.text,v),m.preventDefault(),m.clipboardData&&e.ClipboardEventUtils.setTextData(m.clipboardData,h.text,h.html,v)}};e.TextAreaInput=a,e.TextAreaInput=a=De([he(4,i.IAccessibilityService),he(5,o.ILogService)],a),e.ClipboardEventUtils={getTextData(d){const m=d.getData(p.Mimes.text);let h=null;const v=d.getData("vscode-editor-data");if(typeof v=="string")try{h=JSON.parse(v),h.version!==1&&(h=null)}catch{}return m.length===0&&h===null&&d.files.length>0?[Array.prototype.slice.call(d.files,0).map(w=>w.name).join(`
`),null]:[m,h]},setTextData(d,m,h,v){d.setData(p.Mimes.text,m),typeof h=="string"&&d.setData("text/html",h),d.setData("vscode-editor-data",JSON.stringify(v))}};class r extends b.Disposable{get ownerDocument(){return this._actual.ownerDocument}constructor(m){super(),this._actual=m,this.onKeyDown=this._register(new E.DomEmitter(this._actual,"keydown")).event,this.onKeyUp=this._register(new E.DomEmitter(this._actual,"keyup")).event,this.onCompositionStart=this._register(new E.DomEmitter(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new E.DomEmitter(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new E.DomEmitter(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new E.DomEmitter(this._actual,"beforeinput")).event,this.onInput=this._register(new E.DomEmitter(this._actual,"input")).event,this.onCut=this._register(new E.DomEmitter(this._actual,"cut")).event,this.onCopy=this._register(new E.DomEmitter(this._actual,"copy")).event,this.onPaste=this._register(new E.DomEmitter(this._actual,"paste")).event,this.onFocus=this._register(new E.DomEmitter(this._actual,"focus")).event,this.onBlur=this._register(new E.DomEmitter(this._actual,"blur")).event,this._onSyntheticTap=this._register(new _.Emitter),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>y.inputLatency.onKeyDown())),this._register(this.onBeforeInput(()=>y.inputLatency.onBeforeInput())),this._register(this.onInput(()=>y.inputLatency.onInput())),this._register(this.onKeyUp(()=>y.inputLatency.onKeyUp())),this._register(k.addDisposableListener(this._actual,g.Tap,()=>this._onSyntheticTap.fire()))}hasFocus(){const m=k.getShadowRoot(this._actual);return m?m.activeElement===this._actual:this._actual.isConnected?k.getActiveElement()===this._actual:!1}setIgnoreSelectionChangeTime(m){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(m,h){const v=this._actual;v.value!==h&&(this.setIgnoreSelectionChangeTime("setValue"),v.value=h)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(m,h,v){const C=this._actual;let w=null;const S=k.getShadowRoot(C);S?w=S.activeElement:w=k.getActiveElement();const D=k.getWindow(w),I=w===C,T=C.selectionStart,M=C.selectionEnd;if(I&&T===h&&M===v){c.isFirefox&&D.parent!==D&&C.focus();return}if(I){this.setIgnoreSelectionChangeTime("setSelectionRange"),C.setSelectionRange(h,v),c.isFirefox&&D.parent!==D&&C.focus();return}try{const A=k.saveParentsScrollTop(C);this.setIgnoreSelectionChangeTime("setSelectionRange"),C.focus(),C.setSelectionRange(h,v),k.restoreParentsScrollTop(C,A)}catch{}}}e.TextAreaWrapper=r}),define(oe[79],re([1,0,129,45,140,269,49,7,61,47]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageFeatureDebounceService=e.ILanguageFeatureDebounceService=void 0,e.ILanguageFeatureDebounceService=(0,f.createDecorator)("ILanguageFeatureDebounceService");var p;(function(i){const o=new WeakMap;let g=0;function u(l){let a=o.get(l);return a===void 0&&(a=++g,o.set(l,a)),a}i.of=u})(p||(p={}));class n{constructor(o){this._default=o}get(o){return this._default}update(o,g){return this._default}default(){return this._default}}class s{constructor(o,g,u,l,a,r){this._logService=o,this._name=g,this._registry=u,this._default=l,this._min=a,this._max=r,this._cache=new k.LRUCache(50,.7)}_key(o){return o.id+this._registry.all(o).reduce((g,u)=>(0,c.doHash)(p.of(u),g),0)}get(o){const g=this._key(o),u=this._cache.get(g);return u?(0,E.clamp)(u.value,this._min,this._max):this.default()}update(o,g){const u=this._key(o);let l=this._cache.get(u);l||(l=new E.SlidingWindowAverage(6),this._cache.set(u,l));const a=(0,E.clamp)(l.update(g),this._min,this._max);return(0,b.matchesScheme)(o.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${o.uri.toString()} is ${a}ms`),a}_overall(){const o=new E.MovingAverage;for(const[,g]of this._cache)o.update(g.value);return o.value}default(){const o=this._overall()|0||this._default;return(0,E.clamp)(o,this._min,this._max)}}let t=class{constructor(o,g){this._logService=o,this._data=new Map,this._isDev=g.isExtensionDevelopment||!g.isBuilt}for(o,g,u){const l=u?.min??50,a=u?.max??l**2,r=u?.key??void 0,d=`${p.of(o)},${l}${r?","+r:""}`;let m=this._data.get(d);return m||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${g}] is disabled in developed mode`),m=new n(l*1.5)):m=new s(this._logService,g,o,this._overallAverage()|0||l*1.5,l,a),this._data.set(d,m)),m}_overallAverage(){const o=new E.MovingAverage;for(const g of this._data.values())o.update(g.default());return o.value}};e.LanguageFeatureDebounceService=t,e.LanguageFeatureDebounceService=t=De([he(0,_.ILogService),he(1,L.IEnvironmentService)],t),(0,y.registerSingleton)(e.ILanguageFeatureDebounceService,t,1)}),define(oe[182],re([1,0,13,18,8,53,45,9,4,79,7,49,44,2,17]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OutlineModelService=e.IOutlineModelService=e.OutlineModel=e.OutlineGroup=e.OutlineElement=e.TreeElement=void 0;class o{remove(){this.parent?.children.delete(this.id)}static findId(d,m){let h;typeof d=="string"?h=`${m.id}/${d}`:(h=`${m.id}/${d.name}`,m.children.get(h)!==void 0&&(h=`${m.id}/${d.name}_${d.range.startLineNumber}_${d.range.startColumn}`));let v=h;for(let C=0;m.children.get(v)!==void 0;C++)v=`${h}_${C}`;return v}static empty(d){return d.children.size===0}}e.TreeElement=o;class g extends o{constructor(d,m,h){super(),this.id=d,this.parent=m,this.symbol=h,this.children=new Map}}e.OutlineElement=g;class u extends o{constructor(d,m,h,v){super(),this.id=d,this.parent=m,this.label=h,this.order=v,this.children=new Map}}e.OutlineGroup=u;class l extends o{static create(d,m,h){const v=new k.CancellationTokenSource(h),C=new l(m.uri),w=d.ordered(m),S=w.map((I,T)=>{const M=o.findId(`provider_${T}`,C),A=new u(M,C,I.displayName??"Unknown Outline Provider",T);return Promise.resolve(I.provideDocumentSymbols(m,v.token)).then(R=>{for(const N of R||[])l._makeOutlineElement(N,A);return A},R=>((0,E.onUnexpectedExternalError)(R),A)).then(R=>{o.empty(R)?R.remove():C._groups.set(M,R)})}),D=d.onDidChange(()=>{const I=d.ordered(m);(0,c.equals)(I,w)||v.cancel()});return Promise.all(S).then(()=>v.token.isCancellationRequested&&!h.isCancellationRequested?l.create(d,m,h):C._compact()).finally(()=>{v.dispose(),D.dispose(),v.dispose()})}static _makeOutlineElement(d,m){const h=o.findId(d,m),v=new g(h,m,d);if(d.children)for(const C of d.children)l._makeOutlineElement(C,v);m.children.set(v.id,v)}constructor(d){super(),this.uri=d,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let d=0;for(const[m,h]of this._groups)h.children.size===0?this._groups.delete(m):d+=1;if(d!==1)this.children=this._groups;else{const m=L.Iterable.first(this._groups.values());for(const[,h]of m.children)h.parent=this,this.children.set(h.id,h)}return this}getTopLevelSymbols(){const d=[];for(const m of this.children.values())m instanceof g?d.push(m.symbol):d.push(...L.Iterable.map(m.children.values(),h=>h.symbol));return d.sort((m,h)=>_.Range.compareRangesUsingStarts(m.range,h.range))}asListOfDocumentSymbols(){const d=this.getTopLevelSymbols(),m=[];return l._flattenDocumentSymbols(m,d,""),m.sort((h,v)=>f.Position.compare(_.Range.getStartPosition(h.range),_.Range.getStartPosition(v.range))||f.Position.compare(_.Range.getEndPosition(v.range),_.Range.getEndPosition(h.range)))}static _flattenDocumentSymbols(d,m,h){for(const v of m)d.push({kind:v.kind,tags:v.tags,name:v.name,detail:v.detail,containerName:v.containerName||h,range:v.range,selectionRange:v.selectionRange,children:void 0}),v.children&&l._flattenDocumentSymbols(d,v.children,v.name)}}e.OutlineModel=l,e.IOutlineModelService=(0,p.createDecorator)("IOutlineModelService");let a=class{constructor(d,m,h){this._languageFeaturesService=d,this._disposables=new t.DisposableStore,this._cache=new y.LRUCache(10,.7),this._debounceInformation=m.for(d.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(h.onModelRemoved(v=>{this._cache.delete(v.id)}))}dispose(){this._disposables.dispose()}async getOrCreate(d,m){const h=this._languageFeaturesService.documentSymbolProvider,v=h.ordered(d);let C=this._cache.get(d.id);if(!C||C.versionId!==d.getVersionId()||!(0,c.equals)(C.provider,v)){const S=new k.CancellationTokenSource;C={versionId:d.getVersionId(),provider:v,promiseCnt:0,source:S,promise:l.create(h,d,S.token),model:void 0},this._cache.set(d.id,C);const D=Date.now();C.promise.then(I=>{C.model=I,this._debounceInformation.update(d,Date.now()-D)}).catch(I=>{this._cache.delete(d.id)})}if(C.model)return C.model;C.promiseCnt+=1;const w=m.onCancellationRequested(()=>{--C.promiseCnt===0&&(C.source.cancel(),this._cache.delete(d.id))});try{return await C.promise}finally{w.dispose()}}};e.OutlineModelService=a,e.OutlineModelService=a=De([he(0,i.ILanguageFeaturesService),he(1,b.ILanguageFeatureDebounceService),he(2,s.IModelService)],a),(0,n.registerSingleton)(e.IOutlineModelService,a,1)}),define(oe[686],re([1,0,13,21,379,85,17,182,2,6]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let p=class extends _.Disposable{constructor(s,t,i){super(),this._textModel=s,this._languageFeaturesService=t,this._outlineModelService=i,this._currentModel=(0,k.observableValue)(this,void 0);const o=(0,k.observableSignalFromEvent)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),g=(0,k.observableSignalFromEvent)("_textModel.onDidChangeContent",b.Event.debounce(u=>this._textModel.onDidChangeContent(u),()=>{},100));this._register((0,k.autorunWithStore)(async(u,l)=>{o.read(u),g.read(u);const a=l.add(new L.DisposableCancellationTokenSource),r=await this._outlineModelService.getOrCreate(this._textModel,a.token);l.isDisposed||this._currentModel.set(r,void 0)}))}getBreadcrumbItems(s,t){const i=this._currentModel.read(t);if(!i)return[];const o=i.asListOfDocumentSymbols().filter(g=>s.contains(g.range.startLineNumber)&&!s.contains(g.range.endLineNumber));return o.sort((0,c.reverseOrder)((0,c.compareBy)(g=>g.range.endLineNumber-g.range.startLineNumber,c.numberComparator))),o.map(g=>({name:g.name,kind:g.kind,startLineNumber:g.range.startLineNumber}))}};p=De([he(1,y.ILanguageFeaturesService),he(2,f.IOutlineModelService)],p),E.HideUnchangedRegionsFeature.setBreadcrumbsSourceFactory((n,s)=>s.createInstance(p,n))}),define(oe[687],re([1,0,18,19,22,78,182,24]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),f.CommandsRegistry.registerCommand("_executeDocumentSymbolProvider",async function(_,...b){const[p]=b;(0,k.assertType)(E.URI.isUri(p));const n=_.get(y.IOutlineModelService),t=await _.get(L.ITextModelService).createModelReference(p);try{return(await n.getOrCreate(t.object.textEditorModel,c.CancellationToken.None)).getTopLevelSymbols()}finally{t.dispose()}})}),define(oe[688],re([1,0,64,5,52,14,6,129,2,119,61]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserClipboardService=void 0;let s=class extends _.Disposable{static{n=this}constructor(i,o){super(),this.layoutService=i,this.logService=o,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(c.isSafari||c.isWebkitWebView)&&this.installWebKitWriteTextWorkaround(),this._register(y.Event.runAndSubscribe(k.onDidRegisterWindow,({window:g,disposables:u})=>{u.add((0,k.addDisposableListener)(g.document,"copy",()=>this.clearResources()))},{window:E.mainWindow,disposables:this._store}))}installWebKitWriteTextWorkaround(){const i=()=>{const o=new L.DeferredPromise;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=o,(0,k.getActiveWindow)().navigator.clipboard.write([new ClipboardItem({"text/plain":o.p})]).catch(async g=>{(!(g instanceof Error)||g.name!=="NotAllowedError"||!o.isRejected)&&this.logService.error(g)})};this._register(y.Event.runAndSubscribe(this.layoutService.onDidAddContainer,({container:o,disposables:g})=>{g.add((0,k.addDisposableListener)(o,"click",i)),g.add((0,k.addDisposableListener)(o,"keydown",i))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(i,o){if(this.writeResources([]),o){this.mapTextToType.set(o,i);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(i);try{return await(0,k.getActiveWindow)().navigator.clipboard.writeText(i)}catch(g){console.error(g)}this.fallbackWriteText(i)}fallbackWriteText(i){const o=(0,k.getActiveDocument)(),g=o.activeElement,u=o.body.appendChild((0,k.$)("textarea",{"aria-hidden":!0}));u.style.height="1px",u.style.width="1px",u.style.position="absolute",u.value=i,u.focus(),u.select(),o.execCommand("copy"),(0,k.isHTMLElement)(g)&&g.focus(),u.remove()}async readText(i){if(i)return this.mapTextToType.get(i)||"";try{return await(0,k.getActiveWindow)().navigator.clipboard.readText()}catch(o){console.error(o)}return""}async readFindText(){return this.findText}async writeFindText(i){this.findText=i}static{this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3}async writeResources(i){i.length===0?this.clearResources():(this.resources=i,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){const i=await this.computeResourcesStateHash();return this.resourcesStateHash!==i&&this.clearResources(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const i=await this.readText();return(0,f.hash)(i.substring(0,n.MAX_RESOURCE_STATE_SOURCE_LENGTH))}clearResources(){this.resources=[],this.resourcesStateHash=void 0}};e.BrowserClipboardService=s,e.BrowserClipboardService=s=n=De([he(0,b.ILayoutService),he(1,p.ILogService)],s)}),define(oe[689],re([1,0,2,61]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;class E extends c.Disposable{constructor(y,f=[]){super(),this.logger=new k.MultiplexLogger([y,...f]),this._register(y.onDidChangeLogLevel(_=>this.setLevel(_)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(y){this.logger.setLevel(y)}getLevel(){return this.logger.getLevel()}trace(y,...f){this.logger.trace(y,...f)}debug(y,...f){this.logger.debug(y,...f)}info(y,...f){this.logger.info(y,...f)}warn(y,...f){this.logger.warn(y,...f)}error(y,...f){this.logger.error(y,...f)}}e.LogService=E}),define(oe[107],re([1,0,110,3,7]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IMarkerService=e.IMarkerData=e.MarkerSeverity=void 0;var L;(function(f){f[f.Hint=1]="Hint",f[f.Info=2]="Info",f[f.Warning=4]="Warning",f[f.Error=8]="Error"})(L||(e.MarkerSeverity=L={})),function(f){function _(t,i){return i-t}f.compare=_;const b=Object.create(null);b[f.Error]=(0,k.localize)(1096,"Error"),b[f.Warning]=(0,k.localize)(1097,"Warning"),b[f.Info]=(0,k.localize)(1098,"Info");function p(t){return b[t]||""}f.toString=p;function n(t){switch(t){case c.default.Error:return f.Error;case c.default.Warning:return f.Warning;case c.default.Info:return f.Info;case c.default.Ignore:return f.Hint}}f.fromSeverity=n;function s(t){switch(t){case f.Error:return c.default.Error;case f.Warning:return c.default.Warning;case f.Info:return c.default.Info;case f.Hint:return c.default.Ignore}}f.toSeverity=s}(L||(e.MarkerSeverity=L={}));var y;(function(f){const _="";function b(n){return p(n,!0)}f.makeKey=b;function p(n,s){const t=[_];return n.source?t.push(n.source.replace("\xA6","\\\xA6")):t.push(_),n.code?typeof n.code=="string"?t.push(n.code.replace("\xA6","\\\xA6")):t.push(n.code.value.replace("\xA6","\\\xA6")):t.push(_),n.severity!==void 0&&n.severity!==null?t.push(L.toString(n.severity)):t.push(_),n.message&&s?t.push(n.message.replace("\xA6","\\\xA6")):t.push(_),n.startLineNumber!==void 0&&n.startLineNumber!==null?t.push(n.startLineNumber.toString()):t.push(_),n.startColumn!==void 0&&n.startColumn!==null?t.push(n.startColumn.toString()):t.push(_),n.endLineNumber!==void 0&&n.endLineNumber!==null?t.push(n.endLineNumber.toString()):t.push(_),n.endColumn!==void 0&&n.endColumn!==null?t.push(n.endColumn.toString()):t.push(_),t.push(_),t.join("\xA6")}f.makeKeyOptionalMessage=p})(y||(e.IMarkerData=y={})),e.IMarkerService=(0,E.createDecorator)("markerService")}),define(oe[690],re([1,0,13,6,2,73,11,22,4,49,7,107,27]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IMarkerNavigationService=e.MarkerList=e.MarkerCoordinate=void 0;class t{constructor(u,l,a){this.marker=u,this.index=l,this.total=a}}e.MarkerCoordinate=t;let i=class{constructor(u,l,a){this._markerService=l,this._configService=a,this._onDidChange=new k.Emitter,this.onDidChange=this._onDidChange.event,this._dispoables=new E.DisposableStore,this._markers=[],this._nextIdx=-1,f.URI.isUri(u)?this._resourceFilter=h=>h.toString()===u.toString():u&&(this._resourceFilter=u);const r=this._configService.getValue("problems.sortOrder"),d=(h,v)=>{let C=(0,y.compare)(h.resource.toString(),v.resource.toString());return C===0&&(r==="position"?C=_.Range.compareRangesUsingStarts(h,v)||n.MarkerSeverity.compare(h.severity,v.severity):C=n.MarkerSeverity.compare(h.severity,v.severity)||_.Range.compareRangesUsingStarts(h,v)),C},m=()=>{this._markers=this._markerService.read({resource:f.URI.isUri(u)?u:void 0,severities:n.MarkerSeverity.Error|n.MarkerSeverity.Warning|n.MarkerSeverity.Info}),typeof u=="function"&&(this._markers=this._markers.filter(h=>this._resourceFilter(h.resource))),this._markers.sort(d)};m(),this._dispoables.add(l.onMarkerChanged(h=>{(!this._resourceFilter||h.some(v=>this._resourceFilter(v)))&&(m(),this._nextIdx=-1,this._onDidChange.fire())}))}dispose(){this._dispoables.dispose(),this._onDidChange.dispose()}matches(u){return!this._resourceFilter&&!u?!0:!this._resourceFilter||!u?!1:this._resourceFilter(u)}get selected(){const u=this._markers[this._nextIdx];return u&&new t(u,this._nextIdx+1,this._markers.length)}_initIdx(u,l,a){let r=!1,d=this._markers.findIndex(m=>m.resource.toString()===u.uri.toString());d<0&&(d=(0,c.binarySearch)(this._markers,{resource:u.uri},(m,h)=>(0,y.compare)(m.resource.toString(),h.resource.toString())),d<0&&(d=~d));for(let m=d;m<this._markers.length;m++){let h=_.Range.lift(this._markers[m]);if(h.isEmpty()){const v=u.getWordAtPosition(h.getStartPosition());v&&(h=new _.Range(h.startLineNumber,v.startColumn,h.startLineNumber,v.endColumn))}if(l&&(h.containsPosition(l)||l.isBeforeOrEqual(h.getStartPosition()))){this._nextIdx=m,r=!0;break}if(this._markers[m].resource.toString()!==u.uri.toString())break}r||(this._nextIdx=a?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}resetIndex(){this._nextIdx=-1}move(u,l,a){if(this._markers.length===0)return!1;const r=this._nextIdx;return this._nextIdx===-1?this._initIdx(l,a,u):u?this._nextIdx=(this._nextIdx+1)%this._markers.length:u||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),r!==this._nextIdx}find(u,l){let a=this._markers.findIndex(r=>r.resource.toString()===u.toString());if(!(a<0)){for(;a<this._markers.length;a++)if(_.Range.containsPosition(this._markers[a],l))return new t(this._markers[a],a+1,this._markers.length)}}};e.MarkerList=i,e.MarkerList=i=De([he(1,n.IMarkerService),he(2,s.IConfigurationService)],i),e.IMarkerNavigationService=(0,p.createDecorator)("IMarkerNavigationService");let o=class{constructor(u,l){this._markerService=u,this._configService=l,this._provider=new L.LinkedList}getMarkerList(u){for(const l of this._provider){const a=l.getMarkerList(u);if(a)return a}return new i(u,this._markerService,this._configService)}};o=De([he(0,n.IMarkerService),he(1,s.IConfigurationService)],o),(0,b.registerSingleton)(e.IMarkerNavigationService,o,1)}),define(oe[691],re([1,0,13,6,53,45,47,22,107]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerService=e.unsupportedSchemas=void 0,e.unsupportedSchemas=new Set([y.Schemas.inMemory,y.Schemas.vscodeSourceControl,y.Schemas.walkThrough,y.Schemas.walkThroughSnippet,y.Schemas.vscodeChatCodeBlock,y.Schemas.vscodeCopilotBackingChatCodeBlock]);class b{constructor(){this._byResource=new L.ResourceMap,this._byOwner=new Map}set(t,i,o){let g=this._byResource.get(t);g||(g=new Map,this._byResource.set(t,g)),g.set(i,o);let u=this._byOwner.get(i);u||(u=new L.ResourceMap,this._byOwner.set(i,u)),u.set(t,o)}get(t,i){return this._byResource.get(t)?.get(i)}delete(t,i){let o=!1,g=!1;const u=this._byResource.get(t);u&&(o=u.delete(i));const l=this._byOwner.get(i);if(l&&(g=l.delete(t)),o!==g)throw new Error("illegal state");return o&&g}values(t){return typeof t=="string"?this._byOwner.get(t)?.values()??E.Iterable.empty():f.URI.isUri(t)?this._byResource.get(t)?.values()??E.Iterable.empty():E.Iterable.map(E.Iterable.concat(...this._byOwner.values()),i=>i[1])}}class p{constructor(t){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new L.ResourceMap,this._service=t,this._subscription=t.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(t){for(const i of t){const o=this._data.get(i);o&&this._substract(o);const g=this._resourceStats(i);this._add(g),this._data.set(i,g)}}_resourceStats(t){const i={errors:0,warnings:0,infos:0,unknowns:0};if(e.unsupportedSchemas.has(t.scheme))return i;for(const{severity:o}of this._service.read({resource:t}))o===_.MarkerSeverity.Error?i.errors+=1:o===_.MarkerSeverity.Warning?i.warnings+=1:o===_.MarkerSeverity.Info?i.infos+=1:i.unknowns+=1;return i}_substract(t){this.errors-=t.errors,this.warnings-=t.warnings,this.infos-=t.infos,this.unknowns-=t.unknowns}_add(t){this.errors+=t.errors,this.warnings+=t.warnings,this.infos+=t.infos,this.unknowns+=t.unknowns}}class n{constructor(){this._onMarkerChanged=new k.DebounceEmitter({delay:0,merge:n._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new b,this._stats=new p(this)}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}remove(t,i){for(const o of i||[])this.changeOne(t,o,[])}changeOne(t,i,o){if((0,c.isFalsyOrEmpty)(o))this._data.delete(i,t)&&this._onMarkerChanged.fire([i]);else{const g=[];for(const u of o){const l=n._toMarker(t,i,u);l&&g.push(l)}this._data.set(i,t,g),this._onMarkerChanged.fire([i])}}static _toMarker(t,i,o){let{code:g,severity:u,message:l,source:a,startLineNumber:r,startColumn:d,endLineNumber:m,endColumn:h,relatedInformation:v,tags:C}=o;if(l)return r=r>0?r:1,d=d>0?d:1,m=m>=r?m:r,h=h>0?h:d,{resource:i,owner:t,code:g,severity:u,message:l,source:a,startLineNumber:r,startColumn:d,endLineNumber:m,endColumn:h,relatedInformation:v,tags:C}}changeAll(t,i){const o=[],g=this._data.values(t);if(g)for(const u of g){const l=E.Iterable.first(u);l&&(o.push(l.resource),this._data.delete(l.resource,t))}if((0,c.isNonEmptyArray)(i)){const u=new L.ResourceMap;for(const{resource:l,marker:a}of i){const r=n._toMarker(t,l,a);if(!r)continue;const d=u.get(l);d?d.push(r):(u.set(l,[r]),o.push(l))}for(const[l,a]of u)this._data.set(l,t,a)}o.length>0&&this._onMarkerChanged.fire(o)}read(t=Object.create(null)){let{owner:i,resource:o,severities:g,take:u}=t;if((!u||u<0)&&(u=-1),i&&o){const l=this._data.get(o,i);if(l){const a=[];for(const r of l)if(n._accept(r,g)){const d=a.push(r);if(u>0&&d===u)break}return a}else return[]}else if(!i&&!o){const l=[];for(const a of this._data.values())for(const r of a)if(n._accept(r,g)){const d=l.push(r);if(u>0&&d===u)return l}return l}else{const l=this._data.values(o??i),a=[];for(const r of l)for(const d of r)if(n._accept(d,g)){const m=a.push(d);if(u>0&&m===u)return a}return a}}static _accept(t,i){return i===void 0||(i&t.severity)===t.severity}static _merge(t){const i=new L.ResourceMap;for(const o of t)for(const g of o)i.set(g,!0);return Array.from(i.keys())}}e.MarkerService=n}),define(oe[50],re([1,0,110,7]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoOpNotification=e.INotificationService=e.Severity=void 0,e.Severity=c.default,e.INotificationService=(0,k.createDecorator)("notificationService");class E{}e.NoOpNotification=E}),define(oe[390],re([1,0,5,231,41,367,8,6,2,151,266,3,12,58,7,31,50,517]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.PostEditWidgetManager=void 0;let l=class extends _.Disposable{static{u=this}static{this.baseId="editor.widget.postEditWidget"}constructor(d,m,h,v,C,w,S,D,I,T){super(),this.typeId=d,this.editor=m,this.showCommand=v,this.range=C,this.edits=w,this.onSelectNewEdit=S,this._contextMenuService=D,this._keybindingService=T,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=h.bindTo(I),this.visibleContext.set(!0),this._register((0,_.toDisposable)(()=>this.visibleContext.reset())),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,_.toDisposable)(()=>this.editor.removeContentWidget(this))),this._register(this.editor.onDidChangeCursorPosition(M=>{C.containsPosition(M.position)||this.dispose()})),this._register(f.Event.runAndSubscribe(T.onDidUpdateKeybindings,()=>{this._updateButtonTitle()}))}_updateButtonTitle(){const d=this._keybindingService.lookupKeybinding(this.showCommand.id)?.getLabel();this.button.element.title=this.showCommand.label+(d?` (${d})`:"")}create(){this.domNode=c.$(".post-edit-widget"),this.button=this._register(new k.Button(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(c.addDisposableListener(this.domNode,c.EventType.CLICK,()=>this.showSelector()))}getId(){return u.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const d=c.getDomNodePagePosition(this.button.element);return{x:d.left+d.width,y:d.top+d.height}},getActions:()=>this.edits.allEdits.map((d,m)=>(0,E.toAction)({id:"",label:d.title,checked:m===this.edits.activeEditIndex,run:()=>{if(m!==this.edits.activeEditIndex)return this.onSelectNewEdit(m)}}))})}};l=u=De([he(7,t.IContextMenuService),he(8,s.IContextKeyService),he(9,o.IKeybindingService)],l);let a=class extends _.Disposable{constructor(d,m,h,v,C,w,S){super(),this._id=d,this._editor=m,this._visibleContext=h,this._showCommand=v,this._instantiationService=C,this._bulkEditService=w,this._notificationService=S,this._currentWidget=this._register(new _.MutableDisposable),this._register(f.Event.any(m.onDidChangeModel,m.onDidChangeModelContent)(()=>this.clear()))}async applyEditAndShowIfNeeded(d,m,h,v,C){const w=this._editor.getModel();if(!w||!d.length)return;const S=m.allEdits.at(m.activeEditIndex);if(!S)return;const D=async x=>{const F=this._editor.getModel();F&&(await F.undo(),this.applyEditAndShowIfNeeded(d,{activeEditIndex:x,allEdits:m.allEdits},h,v,C))},I=(x,F)=>{(0,y.isCancellationError)(x)||(this._notificationService.error(F),h&&this.show(d[0],m,D))};let T;try{T=await v(S,C)}catch(x){return I(x,(0,n.localize)(849,`Error resolving edit '{0}':
{1}`,S.title,(0,L.toErrorMessage)(x)))}if(C.isCancellationRequested)return;const M=(0,p.createCombinedWorkspaceEdit)(w.uri,d,T),A=d[0],R=w.deltaDecorations([],[{range:A,options:{description:"paste-line-suffix",stickiness:0}}]);this._editor.focus();let N,O;try{N=await this._bulkEditService.apply(M,{editor:this._editor,token:C}),O=w.getDecorationRange(R[0])}catch(x){return I(x,(0,n.localize)(850,`Error applying edit '{0}':
{1}`,S.title,(0,L.toErrorMessage)(x)))}finally{w.deltaDecorations(R,[])}C.isCancellationRequested||h&&N.isApplied&&m.allEdits.length>1&&this.show(O??A,m,D)}show(d,m,h){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(l,this._id,this._editor,this._visibleContext,this._showCommand,d,m,h))}clear(){this._currentWidget.clear()}tryShowSelector(){this._currentWidget.value?.showSelector()}};e.PostEditWidgetManager=a,e.PostEditWidgetManager=a=De([he(4,i.IInstantiationService),he(5,b.IBulkEditService),he(6,g.INotificationService)],a)}),define(oe[391],re([1,0,21,189]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observableConfigValue=E,e.bindContextKey=L;function E(y,f,_){return(0,k.observableFromEventOpts)({debugName:()=>`Configuration Key "${y}"`},b=>_.onDidChangeConfiguration(p=>{p.affectsConfiguration(y)&&b(p)}),()=>_.getValue(y)??f)}function L(y,f,_){const b=y.bindTo(f);return(0,c.autorunOpts)({debugName:()=>`Set Context Key "${y.key}"`},p=>{b.set(_(p))})}}),define(oe[692],re([1,0,301,161,21,7]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wrapInReloadableClass1=_;class y{constructor(n){this.instantiationService=n}init(...n){}}function f(p,n){return class extends n{constructor(){super(...arguments),this._autorun=void 0}init(...t){this._autorun=(0,E.autorunWithStore)((i,o)=>{const g=(0,k.readHotReloadableExport)(p(),i);o.add(this.instantiationService.createInstance(g,...t))})}dispose(){this._autorun?.dispose()}}}function _(p){return(0,c.isHotReloadEnabled)()?f(p,b):p()}let b=class extends y{constructor(n,s){super(s),this.init(n)}};b=De([he(1,L.IInstantiationService)],b)}),define(oe[62],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IOpenerService=void 0,e.extractSelection=k,e.IOpenerService=(0,c.createDecorator)("openerService");function k(E){let L;const y=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(E.fragment);return y&&(L={startLineNumber:parseInt(y[1]),startColumn:y[2]?parseInt(y[2]):1,endLineNumber:y[4]?parseInt(y[4]):void 0,endColumn:y[4]?y[5]?parseInt(y[5]):1:void 0},E=E.with({fragment:""})),{selection:L,uri:E}}}),define(oe[693],re([1,0,5,52,18,73,45,228,47,51,22,35,24,667,62]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OpenerService=void 0;let o=class{constructor(a){this._commandService=a}async open(a,r){if(!(0,_.matchesScheme)(a,_.Schemas.command))return!1;if(!r?.allowCommands||(typeof a=="string"&&(a=p.URI.parse(a)),Array.isArray(r.allowCommands)&&!r.allowCommands.includes(a.path)))return!0;let d=[];try{d=(0,f.parse)(decodeURIComponent(a.query))}catch{try{d=(0,f.parse)(a.query)}catch{}}return Array.isArray(d)||(d=[d]),await this._commandService.executeCommand(a.path,...d),!0}};o=De([he(0,s.ICommandService)],o);let g=class{constructor(a){this._editorService=a}async open(a,r){typeof a=="string"&&(a=p.URI.parse(a));const{selection:d,uri:m}=(0,i.extractSelection)(a);return a=m,a.scheme===_.Schemas.file&&(a=(0,b.normalizePath)(a)),await this._editorService.openCodeEditor({resource:a,options:{selection:d,source:r?.fromUserGesture?t.EditorOpenSource.USER:t.EditorOpenSource.API,...r?.editorOptions}},this._editorService.getFocusedCodeEditor(),r?.openToSide),!0}};g=De([he(0,n.ICodeEditorService)],g);let u=class{constructor(a,r){this._openers=new L.LinkedList,this._validators=new L.LinkedList,this._resolvers=new L.LinkedList,this._resolvedUriTargets=new y.ResourceMap(d=>d.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new L.LinkedList,this._defaultExternalOpener={openExternal:async d=>((0,_.matchesSomeScheme)(d,_.Schemas.http,_.Schemas.https)?c.windowOpenNoOpener(d):k.mainWindow.location.href=d,!0)},this._openers.push({open:async(d,m)=>m?.openExternal||(0,_.matchesSomeScheme)(d,_.Schemas.mailto,_.Schemas.http,_.Schemas.https,_.Schemas.vsls)?(await this._doOpenExternal(d,m),!0):!1}),this._openers.push(new o(r)),this._openers.push(new g(a))}registerOpener(a){return{dispose:this._openers.unshift(a)}}async open(a,r){const d=typeof a=="string"?p.URI.parse(a):a,m=this._resolvedUriTargets.get(d)??a;for(const h of this._validators)if(!await h.shouldOpen(m,r))return!1;for(const h of this._openers)if(await h.open(a,r))return!0;return!1}async resolveExternalUri(a,r){for(const d of this._resolvers)try{const m=await d.resolveExternalUri(a,r);if(m)return this._resolvedUriTargets.has(m.resolved)||this._resolvedUriTargets.set(m.resolved,a),m}catch{}throw new Error("Could not resolve external URI: "+a.toString())}async _doOpenExternal(a,r){const d=typeof a=="string"?p.URI.parse(a):a;let m;try{m=(await this.resolveExternalUri(d,r)).resolved}catch{m=d}let h;if(typeof a=="string"&&d.toString()===m.toString()?h=a:h=encodeURI(m.toString(!0)),r?.allowContributedOpeners){const v=typeof r?.allowContributedOpeners=="string"?r?.allowContributedOpeners:void 0;for(const C of this._externalOpeners)if(await C.openExternal(h,{sourceUri:d,preferredOpenerId:v},E.CancellationToken.None))return!0}return this._defaultExternalOpener.openExternal(h,{sourceUri:d},E.CancellationToken.None)}dispose(){this._validators.clear()}};e.OpenerService=u,e.OpenerService=u=De([he(0,n.ICodeEditorService),he(1,s.ICommandService)],u)}),define(oe[694],re([1,0,5,92,46,68,6,2,62,43,118,552]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;let n=class extends f.Disposable{get enabled(){return this._enabled}set enabled(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t}constructor(t,i,o={},g,u){super(),this._link=i,this._hoverService=g,this._enabled=!0,this.el=(0,c.append)(t,(0,c.$)("a.monaco-link",{tabIndex:i.tabIndex??0,href:i.href},i.label)),this.hoverDelegate=o.hoverDelegate??(0,b.getDefaultHoverDelegate)("mouse"),this.setTooltip(i.title),this.el.setAttribute("role","button");const l=this._register(new k.DomEmitter(this.el,"click")),a=this._register(new k.DomEmitter(this.el,"keypress")),r=y.Event.chain(a.event,h=>h.map(v=>new E.StandardKeyboardEvent(v)).filter(v=>v.keyCode===3)),d=this._register(new k.DomEmitter(this.el,L.EventType.Tap)).event;this._register(L.Gesture.addTarget(this.el));const m=y.Event.any(l.event,r,d);this._register(m(h=>{this.enabled&&(c.EventHelper.stop(h,!0),o?.opener?o.opener(this._link.href):u.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}setTooltip(t){this.hoverDelegate.showNativeHover?this.el.title=t??"":!this.hover&&t?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)}};e.Link=n,e.Link=n=De([he(3,p.IHoverService),he(4,_.IOpenerService)],n)}),define(oe[96],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IEditorProgressService=e.Progress=e.emptyProgressRunner=e.IProgressService=void 0,e.IProgressService=(0,c.createDecorator)("progressService"),e.emptyProgressRunner=Object.freeze({total(){},worked(){},done(){}});class k{static{this.None=Object.freeze({report(){}})}constructor(L){this.callback=L}report(L){this._value=L,this.callback(this._value)}}e.Progress=k,e.IEditorProgressService=(0,c.createDecorator)("editorProgressService")}),define(oe[695],re([1,0,14,18,2,19]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PickerQuickAccessProvider=e.TriggerAction=void 0;var y;(function(p){p[p.NO_ACTION=0]="NO_ACTION",p[p.CLOSE_PICKER=1]="CLOSE_PICKER",p[p.REFRESH_PICKER=2]="REFRESH_PICKER",p[p.REMOVE_ITEM=3]="REMOVE_ITEM"})(y||(e.TriggerAction=y={}));function f(p){const n=p;return Array.isArray(n.items)}function _(p){const n=p;return!!n.picks&&n.additionalPicks instanceof Promise}class b extends E.Disposable{constructor(n,s){super(),this.prefix=n,this.options=s}provide(n,s,t){const i=new E.DisposableStore;n.canAcceptInBackground=!!this.options?.canAcceptInBackground,n.matchOnLabel=n.matchOnDescription=n.matchOnDetail=n.sortByLabel=!1;let o;const g=i.add(new E.MutableDisposable),u=async()=>{const a=g.value=new E.DisposableStore;o?.dispose(!0),n.busy=!1,o=new k.CancellationTokenSource(s);const r=o.token;let d=n.value.substring(this.prefix.length);this.options?.shouldSkipTrimPickFilter||(d=d.trim());const m=this._getPicks(d,a,r,t),h=(C,w)=>{let S,D;if(f(C)?(S=C.items,D=C.active):S=C,S.length===0){if(w)return!1;(d.length>0||n.hideInput)&&this.options?.noResultsPick&&((0,L.isFunction)(this.options.noResultsPick)?S=[this.options.noResultsPick(d)]:S=[this.options.noResultsPick])}return n.items=S,D&&(n.activeItems=[D]),!0},v=async C=>{let w=!1,S=!1;await Promise.all([(async()=>{typeof C.mergeDelay=="number"&&(await(0,c.timeout)(C.mergeDelay),r.isCancellationRequested)||S||(w=h(C.picks,!0))})(),(async()=>{n.busy=!0;try{const D=await C.additionalPicks;if(r.isCancellationRequested)return;let I,T;f(C.picks)?(I=C.picks.items,T=C.picks.active):I=C.picks;let M,A;if(f(D)?(M=D.items,A=D.active):M=D,M.length>0||!w){let R;if(!T&&!A){const N=n.activeItems[0];N&&I.indexOf(N)!==-1&&(R=N)}h({items:[...I,...M],active:T||A||R})}}finally{r.isCancellationRequested||(n.busy=!1),S=!0}})()])};if(m!==null)if(_(m))await v(m);else if(!(m instanceof Promise))h(m);else{n.busy=!0;try{const C=await m;if(r.isCancellationRequested)return;_(C)?await v(C):h(C)}finally{r.isCancellationRequested||(n.busy=!1)}}};i.add(n.onDidChangeValue(()=>u())),u(),i.add(n.onDidAccept(a=>{if(t?.handleAccept){a.inBackground||n.hide(),t.handleAccept?.(n.activeItems[0]);return}const[r]=n.selectedItems;typeof r?.accept=="function"&&(a.inBackground||n.hide(),r.accept(n.keyMods,a))}));const l=async(a,r)=>{if(typeof r.trigger!="function")return;const d=r.buttons?.indexOf(a)??-1;if(d>=0){const m=r.trigger(d,n.keyMods),h=typeof m=="number"?m:await m;if(s.isCancellationRequested)return;switch(h){case y.NO_ACTION:break;case y.CLOSE_PICKER:n.hide();break;case y.REFRESH_PICKER:u();break;case y.REMOVE_ITEM:{const v=n.items.indexOf(r);if(v!==-1){const C=n.items.slice(),w=C.splice(v,1),S=n.activeItems.filter(I=>I!==w[0]),D=n.keepScrollPosition;n.keepScrollPosition=!0,n.items=C,S&&(n.activeItems=S),n.keepScrollPosition=D}break}}}};return i.add(n.onDidTriggerItemButton(({button:a,item:r})=>l(a,r))),i.add(n.onDidTriggerSeparatorButton(({button:a,separator:r})=>l(a,r))),i}}e.PickerQuickAccessProvider=b}),define(oe[696],re([1,0,5,259,2,110,238]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputBox=void 0;const y=c.$;class f extends E.Disposable{constructor(b,p,n){super(),this.parent=b,this.onKeyDown=t=>c.addStandardDisposableListener(this.findInput.inputBox.inputElement,c.EventType.KEY_DOWN,t),this.onDidChange=t=>this.findInput.onDidChange(t),this.container=c.append(this.parent,y(".quick-input-box")),this.findInput=this._register(new k.FindInput(this.container,void 0,{label:"",inputBoxStyles:p,toggleStyles:n}));const s=this.findInput.inputBox.inputElement;s.role="combobox",s.ariaHasPopup="menu",s.ariaAutoComplete="list",s.ariaExpanded="true"}get value(){return this.findInput.getValue()}set value(b){this.findInput.setValue(b)}select(b=null){this.findInput.inputBox.select(b)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(b){this.findInput.inputBox.setPlaceHolder(b)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(b){this.findInput.inputBox.inputElement.type=b?"password":"text"}set enabled(b){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!b)}set toggles(b){this.findInput.setAdditionalToggles(b)}setAttribute(b,p){this.findInput.inputBox.inputElement.setAttribute(b,p)}showDecoration(b){b===L.default.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:b===L.default.Info?1:b===L.default.Warning?2:3,content:""})}stylesForType(b){return this.findInput.inputBox.stylesForType(b===L.default.Info?1:b===L.default.Warning?2:3)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}e.QuickInputBox=f}),define(oe[392],re([1,0,5,92,6,46,68,111,187,441,3,238]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.quickInputButtonToAction=i,e.renderQuickInputDescription=o;const n={},s=new _.IdGenerator("quick-input-button-icon-");function t(g){if(!g)return;let u;const l=g.dark.toString();return n[l]?u=n[l]:(u=s.nextId(),c.createCSSRule(`.${u}, .hc-light .${u}`,`background-image: ${c.asCSSUrl(g.light||g.dark)}`),c.createCSSRule(`.vs-dark .${u}, .hc-black .${u}`,`background-image: ${c.asCSSUrl(g.dark)}`),n[l]=u),u}function i(g,u,l){let a=g.iconClass||t(g.iconPath);return g.alwaysVisible&&(a=a?`${a} always-visible`:"always-visible"),{id:u,label:"",tooltip:g.tooltip||"",class:a,enabled:!0,run:l}}function o(g,u,l){c.reset(u);const a=(0,b.parseLinkedText)(g);let r=0;for(const d of a.nodes)if(typeof d=="string")u.append(...(0,f.renderLabelWithIcons)(d));else{let m=d.title;!m&&d.href.startsWith("command:")?m=(0,p.localize)(1069,"Click to execute command '{0}'",d.href.substring(8)):m||(m=d.href);const h=c.$("a",{href:d.href,title:m,tabIndex:r++},d.label);h.style.textDecoration="underline";const v=I=>{c.isEventLike(I)&&c.EventHelper.stop(I,!0),l.callback(d.href)},C=l.disposables.add(new k.DomEmitter(h,c.EventType.CLICK)).event,w=l.disposables.add(new k.DomEmitter(h,c.EventType.KEY_DOWN)).event,S=E.Event.chain(w,I=>I.filter(T=>{const M=new L.StandardKeyboardEvent(T);return M.equals(10)||M.equals(3)}));l.disposables.add(y.Gesture.addTarget(h));const D=l.disposables.add(new k.DomEmitter(h,y.EventType.Tap)).event;E.Event.any(C,D,S)(v,null,l.disposables),u.appendChild(h)}}}),define(oe[63],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IQuickInputService=e.quickPickItemScorerAccessor=e.QuickPickItemScorerAccessor=e.QuickInputButtonLocation=e.QuickPickFocus=e.ItemActivation=e.QuickInputHideReason=e.NO_KEY_MODS=void 0,e.NO_KEY_MODS={ctrlCmd:!1,alt:!1};var k;(function(_){_[_.Blur=1]="Blur",_[_.Gesture=2]="Gesture",_[_.Other=3]="Other"})(k||(e.QuickInputHideReason=k={}));var E;(function(_){_[_.NONE=0]="NONE",_[_.FIRST=1]="FIRST",_[_.SECOND=2]="SECOND",_[_.LAST=3]="LAST"})(E||(e.ItemActivation=E={}));var L;(function(_){_[_.First=1]="First",_[_.Second=2]="Second",_[_.Last=3]="Last",_[_.Next=4]="Next",_[_.Previous=5]="Previous",_[_.NextPage=6]="NextPage",_[_.PreviousPage=7]="PreviousPage",_[_.NextSeparator=8]="NextSeparator",_[_.PreviousSeparator=9]="PreviousSeparator"})(L||(e.QuickPickFocus=L={}));var y;(function(_){_[_.Title=1]="Title",_[_.Inline=2]="Inline"})(y||(e.QuickInputButtonLocation=y={}));class f{constructor(b){this.options=b}}e.QuickPickItemScorerAccessor=f,e.quickPickItemScorerAccessor=new f,e.IQuickInputService=(0,c.createDecorator)("quickInputService")}),define(oe[270],re([1,0,5,46,165,13,14,26,6,2,16,110,30,3,63,392,27,118,63,12,238]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputHoverDelegate=e.InputBox=e.QuickPick=e.backButton=e.endOfQuickInputBoxContext=e.EndOfQuickInputBoxContextKey=e.endOfQuickInputBoxContextKeyValue=e.QuickInputTypeContextKey=e.quickInputTypeContextKeyValue=e.inQuickInputContext=e.InQuickInputContextKey=e.inQuickInputContextKeyValue=void 0,e.inQuickInputContextKeyValue="inQuickInput",e.InQuickInputContextKey=new a.RawContextKey(e.inQuickInputContextKeyValue,!1,(0,t.localize)(1081,"Whether keyboard focus is inside the quick input control")),e.inQuickInputContext=a.ContextKeyExpr.has(e.inQuickInputContextKeyValue),e.quickInputTypeContextKeyValue="quickInputType",e.QuickInputTypeContextKey=new a.RawContextKey(e.quickInputTypeContextKeyValue,void 0,(0,t.localize)(1082,"The type of the currently visible quick input")),e.endOfQuickInputBoxContextKeyValue="cursorAtEndOfQuickInputBox",e.EndOfQuickInputBoxContextKey=new a.RawContextKey(e.endOfQuickInputBoxContextKeyValue,!1,(0,t.localize)(1083,"Whether the cursor in the quick input is at the end of the input box")),e.endOfQuickInputBoxContext=a.ContextKeyExpr.has(e.endOfQuickInputBoxContextKeyValue),e.backButton={iconClass:s.ThemeIcon.asClassName(f.Codicon.quickInputBack),tooltip:(0,t.localize)(1084,"Back"),handle:-1};class r extends b.Disposable{static{this.noPromptMessage=(0,t.localize)(1085,"Press 'Enter' to confirm your input or 'Escape' to cancel")}constructor(C){super(),this.ui=C,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=r.noPromptMessage,this._severity=n.default.Ignore,this.onDidTriggerButtonEmitter=this._register(new _.Emitter),this.onDidHideEmitter=this._register(new _.Emitter),this.onWillHideEmitter=this._register(new _.Emitter),this.onDisposeEmitter=this._register(new _.Emitter),this.visibleDisposables=this._register(new b.DisposableStore),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(C){this._title=C,this.update()}get description(){return this._description}set description(C){this._description=C,this.update()}get step(){return this._steps}set step(C){this._steps=C,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(C){this._totalSteps=C,this.update()}get enabled(){return this._enabled}set enabled(C){this._enabled=C,this.update()}get contextKey(){return this._contextKey}set contextKey(C){this._contextKey=C,this.update()}get busy(){return this._busy}set busy(C){this._busy=C,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(C){const w=this._ignoreFocusOut!==C&&!p.isIOS;this._ignoreFocusOut=C&&!p.isIOS,w&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(C){this._leftButtons=C.filter(w=>w===e.backButton),this._rightButtons=C.filter(w=>w!==e.backButton&&w.location!==i.QuickInputButtonLocation.Inline),this._inlineButtons=C.filter(w=>w.location===i.QuickInputButtonLocation.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(C){this._toggles=C??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(C){this._validationMessage=C,this.update()}get severity(){return this._severity}set severity(C){this._severity=C,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(C=>{this.buttons.indexOf(C)!==-1&&this.onDidTriggerButtonEmitter.fire(C)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(C=i.QuickInputHideReason.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:C})}willHide(C=i.QuickInputHideReason.Other){this.onWillHideEmitter.fire({reason:C})}update(){if(!this.visible)return;const C=this.getTitle();C&&this.ui.title.textContent!==C?this.ui.title.textContent=C:!C&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText="\xA0");const w=this.getDescription();if(this.ui.description1.textContent!==w&&(this.ui.description1.textContent=w),this.ui.description2.textContent!==w&&(this.ui.description2.textContent=w),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?c.reset(this.ui.widget,this._widget):c.reset(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new y.TimeoutTimer,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const D=this._leftButtons.map((M,A)=>(0,o.quickInputButtonToAction)(M,`id-${A}`,async()=>this.onDidTriggerButtonEmitter.fire(M)));this.ui.leftActionBar.push(D,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const I=this._rightButtons.map((M,A)=>(0,o.quickInputButtonToAction)(M,`id-${A}`,async()=>this.onDidTriggerButtonEmitter.fire(M)));this.ui.rightActionBar.push(I,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const T=this._inlineButtons.map((M,A)=>(0,o.quickInputButtonToAction)(M,`id-${A}`,async()=>this.onDidTriggerButtonEmitter.fire(M)));this.ui.inlineActionBar.push(T,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const D=this.toggles?.filter(I=>I instanceof E.Toggle)??[];this.ui.inputBox.toggles=D}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const S=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==S&&(this._lastValidationMessage=S,c.reset(this.ui.message),(0,o.renderQuickInputDescription)(S,this.ui.message,{callback:D=>{this.ui.linkOpenerDelegate(D)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,t.localize)(1086,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(C){if(this.ui.inputBox.showDecoration(C),C!==n.default.Ignore){const w=this.ui.inputBox.stylesForType(C);this.ui.message.style.color=w.foreground?`${w.foreground}`:"",this.ui.message.style.backgroundColor=w.background?`${w.background}`:"",this.ui.message.style.border=w.border?`1px solid ${w.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class d extends r{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new _.Emitter),this.onWillAcceptEmitter=this._register(new _.Emitter),this.onDidAcceptEmitter=this._register(new _.Emitter),this.onDidCustomEmitter=this._register(new _.Emitter),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=i.ItemActivation.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new _.Emitter),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new _.Emitter),this.onDidTriggerItemButtonEmitter=this._register(new _.Emitter),this.onDidTriggerSeparatorButtonEmitter=this._register(new _.Emitter),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new _.EventBufferer,this.type="quickPick",this.filterValue=C=>C,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static{this.DEFAULT_ARIA_LABEL=(0,t.localize)(1087,"Type to narrow down results.")}get quickNavigate(){return this._quickNavigate}set quickNavigate(C){this._quickNavigate=C,this.update()}get value(){return this._value}set value(C){this.doSetValue(C)}doSetValue(C,w){this._value!==C&&(this._value=C,w||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(C){this._ariaLabel=C,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(C){this._placeholder=C,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(C){this.ui.list.scrollTop=C}set items(C){this._items=C,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(C){this._canSelectMany=C,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(C){this._canAcceptInBackground=C}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(C){this._matchOnDescription=C,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(C){this._matchOnDetail=C,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(C){this._matchOnLabel=C,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(C){this._matchOnLabelMode=C,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(C){this._sortByLabel=C,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(C){this._keepScrollPosition=C}get itemActivation(){return this._itemActivation}set itemActivation(C){this._itemActivation=C}get activeItems(){return this._activeItems}set activeItems(C){this._activeItems=C,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(C){this._selectedItems=C,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?i.NO_KEY_MODS:this.ui.keyMods}get valueSelection(){const C=this.ui.inputBox.getSelection();if(C)return[C.start,C.end]}set valueSelection(C){this._valueSelection=C,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(C){this._customButton=C,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(C){this._customButtonLabel=C,this.update()}get customHover(){return this._customButtonHover}set customHover(C){this._customButtonHover=C,this.update()}get ok(){return this._ok}set ok(C){this._ok=C,this.update()}get hideInput(){return!!this._hideInput}set hideInput(C){this._hideInput=C,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(l.QuickPickFocus.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(C=>{this.doSetValue(C,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(C,w)=>w)(C=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,L.equals)(C,this._activeItems,(w,S)=>w===S)||(this._activeItems=C,this.onDidChangeActiveEmitter.fire(C))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:C,event:w})=>{if(this.canSelectMany){C.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&(0,L.equals)(C,this._selectedItems,(S,D)=>S===D)||(this._selectedItems=C,this.onDidChangeSelectionEmitter.fire(C),C.length&&this.handleAccept(c.isMouseEvent(w)&&w.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(C=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&(0,L.equals)(C,this._selectedItems,(w,S)=>w===S)||(this._selectedItems=C,this.onDidChangeSelectionEmitter.fire(C))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(C=>this.onDidTriggerItemButtonEmitter.fire(C))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(C=>this.onDidTriggerSeparatorButtonEmitter.fire(C))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(C){let w=!1;this.onWillAcceptEmitter.fire({veto:()=>w=!0}),w||this.onDidAcceptEmitter.fire({inBackground:C})}registerQuickNavigation(){return c.addDisposableListener(this.ui.container,c.EventType.KEY_UP,C=>{if(this.canSelectMany||!this._quickNavigate)return;const w=new k.StandardKeyboardEvent(C),S=w.keyCode;this._quickNavigate.keybindings.some(T=>{const M=T.getChords();return M.length>1?!1:M[0].shiftKey&&S===4?!(w.ctrlKey||w.altKey||w.metaKey):!!(M[0].altKey&&S===6||M[0].ctrlKey&&S===5||M[0].metaKey&&S===57)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const C=this.keepScrollPosition?this.scrollTop:0,w=!!this.description,S={title:!!this.title||!!this.step||!!this.titleButtons.length,description:w,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||w,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(S),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let D=this.ariaLabel;!D&&S.inputBox&&(D=this.placeholder||d.DEFAULT_ARIA_LABEL,this.title&&(D+=` - ${this.title}`)),this.ui.list.ariaLabel!==D&&(this.ui.list.ariaLabel=D??null),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case i.ItemActivation.NONE:this._itemActivation=i.ItemActivation.FIRST;break;case i.ItemActivation.SECOND:this.ui.list.focus(l.QuickPickFocus.Second),this._itemActivation=i.ItemActivation.FIRST;break;case i.ItemActivation.LAST:this.ui.list.focus(l.QuickPickFocus.Last),this._itemActivation=i.ItemActivation.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",S.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(l.QuickPickFocus.First)),this.keepScrollPosition&&(this.scrollTop=C)}focus(C){this.ui.list.focus(C),this.canSelectMany&&this.ui.list.domFocus()}accept(C){C&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(C??!1))}}e.QuickPick=d;class m extends r{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new _.Emitter),this.onDidAcceptEmitter=this._register(new _.Emitter),this.type="inputBox",this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(C){this._value=C||"",this.update()}get placeholder(){return this._placeholder}set placeholder(C){this._placeholder=C,this.update()}get password(){return this._password}set password(C){this._password=C,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(C=>{C!==this.value&&(this._value=C,this.onDidValueChangeEmitter.fire(C))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const C={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(C),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password)}}e.InputBox=m;let h=class extends u.WorkbenchHoverDelegate{constructor(C,w){super("element",!1,S=>this.getOverrideOptions(S),C,w)}getOverrideOptions(C){const w=(c.isHTMLElement(C.content)?C.content.textContent??"":typeof C.content=="string"?C.content:C.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:w,skipFadeInAnimation:!0}}}};e.QuickInputHoverDelegate=h,e.QuickInputHoverDelegate=h=De([he(0,g.IConfigurationService),he(1,u.IHoverService)],h)}),define(oe[38],re([1,0,89,19]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=void 0;class E{constructor(){this.data=new Map}add(y,f){c.ok(k.isString(y)),c.ok(k.isObject(f)),c.ok(!this.data.has(y),"There is already an extension with this id"),this.data.set(y,f)}as(y){return this.data.get(y)||null}}e.Registry=new E}),define(oe[393],re([1,0,38]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalSelectionTransfer=e.Extensions=e.CodeDataTransfers=void 0,e.CodeDataTransfers={EDITORS:"CodeEditors",FILES:"CodeFiles"};class k{}e.Extensions={DragAndDropContribution:"workbench.contributions.dragAndDrop"},c.Registry.add(e.Extensions.DragAndDropContribution,new k);class E{static{this.INSTANCE=new E}constructor(){}static getInstance(){return E.INSTANCE}hasData(y){return y&&y===this.proto}getData(y){if(this.hasData(y))return this.data}}e.LocalSelectionTransfer=E}),define(oe[394],re([1,0,222,195,128,22,393]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toVSDataTransfer=f,e.toExternalVSDataTransfer=p;function f(n){const s=new k.VSDataTransfer;for(const t of n.items){const i=t.type;if(t.kind==="string"){const o=new Promise(g=>t.getAsString(g));s.append(i,(0,k.createStringDataTransferItem)(o))}else if(t.kind==="file"){const o=t.getAsFile();o&&s.append(i,_(o))}}return s}function _(n){const s=n.path?L.URI.parse(n.path):void 0;return(0,k.createFileDataTransferItem)(n.name,s,async()=>new Uint8Array(await n.arrayBuffer()))}const b=Object.freeze([y.CodeDataTransfers.EDITORS,y.CodeDataTransfers.FILES,c.DataTransfers.RESOURCES,c.DataTransfers.INTERNAL_URI_LIST]);function p(n,s=!1){const t=f(n),i=t.get(c.DataTransfers.INTERNAL_URI_LIST);if(i)t.replace(E.Mimes.uriList,i);else if(s||!t.has(E.Mimes.uriList)){const o=[];for(const g of n.items){const u=g.getAsFile();if(u){const l=u.path;try{l?o.push(L.URI.file(l).toString()):o.push(L.URI.parse(u.name,!0).toString())}catch{}}}o.length&&t.replace(E.Mimes.uriList,(0,k.createStringDataTransferItem)(k.UriList.create(o)))}for(const o of b)t.delete(o);return t}}),define(oe[271],re([1,0,6,38]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Extensions=void 0,e.Extensions={JSONContribution:"base.contributions.json"};function E(f){return f.length>0&&f.charAt(f.length-1)==="#"?f.substring(0,f.length-1):f}class L{constructor(){this._onDidChangeSchema=new c.Emitter,this.schemasById={}}registerSchema(_,b){this.schemasById[E(_)]=b,this._onDidChangeSchema.fire(_)}notifySchemaChanged(_){this._onDidChangeSchema.fire(_)}}const y=new L;k.Registry.add(e.Extensions.JSONContribution,y)}),define(oe[108],re([1,0,13,6,19,3,27,271,38]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.OVERRIDE_PROPERTY_REGEX=e.OVERRIDE_PROPERTY_PATTERN=e.resourceLanguageSettingsSchemaId=e.resourceSettings=e.windowSettings=e.machineOverridableSettings=e.machineSettings=e.applicationSettings=e.allSettings=e.Extensions=void 0,e.overrideIdentifiersFromKey=t,e.getDefaultValue=i,e.validateProperty=g,e.Extensions={Configuration:"base.contributions.configuration"},e.allSettings={properties:{},patternProperties:{}},e.applicationSettings={properties:{},patternProperties:{}},e.machineSettings={properties:{},patternProperties:{}},e.machineOverridableSettings={properties:{},patternProperties:{}},e.windowSettings={properties:{},patternProperties:{}},e.resourceSettings={properties:{},patternProperties:{}},e.resourceLanguageSettingsSchemaId="vscode://schemas/settings/resourceLanguage";const b=_.Registry.as(f.Extensions.JSONContribution);class p{constructor(){this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=new k.Emitter,this._onDidUpdateConfiguration=new k.Emitter,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:L.localize(1155,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(l,a=!0){this.registerConfigurations([l],a)}registerConfigurations(l,a=!0){const r=new Set;this.doRegisterConfigurations(l,a,r),b.registerSchema(e.resourceLanguageSettingsSchemaId,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:r})}registerDefaultConfigurations(l){const a=new Set;this.doRegisterDefaultConfigurations(l,a),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:a,defaultsOverrides:!0})}doRegisterDefaultConfigurations(l,a){this.registeredConfigurationDefaults.push(...l);const r=[];for(const{overrides:d,source:m}of l)for(const h in d){a.add(h);const v=this.configurationDefaultsOverrides.get(h)??this.configurationDefaultsOverrides.set(h,{configurationDefaultOverrides:[]}).get(h),C=d[h];if(v.configurationDefaultOverrides.push({value:C,source:m}),e.OVERRIDE_PROPERTY_REGEX.test(h)){const w=this.mergeDefaultConfigurationsForOverrideIdentifier(h,C,m,v.configurationDefaultOverrideValue);if(!w)continue;v.configurationDefaultOverrideValue=w,this.updateDefaultOverrideProperty(h,w,m),r.push(...t(h))}else{const w=this.mergeDefaultConfigurationsForConfigurationProperty(h,C,m,v.configurationDefaultOverrideValue);if(!w)continue;v.configurationDefaultOverrideValue=w;const S=this.configurationProperties[h];S&&(this.updatePropertyDefaultValue(h,S),this.updateSchema(h,S))}}this.doRegisterOverrideIdentifiers(r)}updateDefaultOverrideProperty(l,a,r){const d={type:"object",default:a.value,description:L.localize(1156,"Configure settings to be overridden for the {0} language.",(0,y.getLanguageTagSettingPlainKey)(l)),$ref:e.resourceLanguageSettingsSchemaId,defaultDefaultValue:a.value,source:r,defaultValueSource:r};this.configurationProperties[l]=d,this.defaultLanguageConfigurationOverridesNode.properties[l]=d}mergeDefaultConfigurationsForOverrideIdentifier(l,a,r,d){const m=d?.value||{},h=d?.source??new Map;if(!(h instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const v of Object.keys(a)){const C=a[v];if(E.isObject(C)&&(E.isUndefined(m[v])||E.isObject(m[v]))){if(m[v]={...m[v]??{},...C},r)for(const S in C)h.set(`${v}.${S}`,r)}else m[v]=C,r?h.set(v,r):h.delete(v)}return{value:m,source:h}}mergeDefaultConfigurationsForConfigurationProperty(l,a,r,d){const m=this.configurationProperties[l],h=d?.value??m?.defaultDefaultValue;let v=r;if(E.isObject(a)&&(m!==void 0&&m.type==="object"||m===void 0&&(E.isUndefined(h)||E.isObject(h)))){if(v=d?.source??new Map,!(v instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const w in a)r&&v.set(`${l}.${w}`,r);a={...E.isObject(h)?h:{},...a}}return{value:a,source:v}}registerOverrideIdentifiers(l){this.doRegisterOverrideIdentifiers(l),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(l){for(const a of l)this.overrideIdentifiers.add(a);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(l,a,r){l.forEach(d=>{this.validateAndRegisterProperties(d,a,d.extensionInfo,d.restrictedProperties,void 0,r),this.configurationContributors.push(d),this.registerJSONConfiguration(d)})}validateAndRegisterProperties(l,a=!0,r,d,m=3,h){m=E.isUndefinedOrNull(l.scope)?m:l.scope;const v=l.properties;if(v)for(const w in v){const S=v[w];if(a&&g(w,S)){delete v[w];continue}if(S.source=r,S.defaultDefaultValue=v[w].default,this.updatePropertyDefaultValue(w,S),e.OVERRIDE_PROPERTY_REGEX.test(w)?S.scope=void 0:(S.scope=E.isUndefinedOrNull(S.scope)?m:S.scope,S.restricted=E.isUndefinedOrNull(S.restricted)?!!d?.includes(w):S.restricted),v[w].hasOwnProperty("included")&&!v[w].included){this.excludedConfigurationProperties[w]=v[w],delete v[w];continue}else this.configurationProperties[w]=v[w],v[w].policy?.name&&this.policyConfigurations.set(v[w].policy.name,w);!v[w].deprecationMessage&&v[w].markdownDeprecationMessage&&(v[w].deprecationMessage=v[w].markdownDeprecationMessage),h.add(w)}const C=l.allOf;if(C)for(const w of C)this.validateAndRegisterProperties(w,a,r,d,m,h)}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}registerJSONConfiguration(l){const a=r=>{const d=r.properties;if(d)for(const h in d)this.updateSchema(h,d[h]);r.allOf?.forEach(a)};a(l)}updateSchema(l,a){switch(e.allSettings.properties[l]=a,a.scope){case 1:e.applicationSettings.properties[l]=a;break;case 2:e.machineSettings.properties[l]=a;break;case 6:e.machineOverridableSettings.properties[l]=a;break;case 3:e.windowSettings.properties[l]=a;break;case 4:e.resourceSettings.properties[l]=a;break;case 5:e.resourceSettings.properties[l]=a,this.resourceLanguageSettingsSchema.properties[l]=a;break}}updateOverridePropertyPatternKey(){for(const l of this.overrideIdentifiers.values()){const a=`[${l}]`,r={type:"object",description:L.localize(1157,"Configure editor settings to be overridden for a language."),errorMessage:L.localize(1158,"This setting does not support per-language configuration."),$ref:e.resourceLanguageSettingsSchemaId};this.updatePropertyDefaultValue(a,r),e.allSettings.properties[a]=r,e.applicationSettings.properties[a]=r,e.machineSettings.properties[a]=r,e.machineOverridableSettings.properties[a]=r,e.windowSettings.properties[a]=r,e.resourceSettings.properties[a]=r}}registerOverridePropertyPatternKey(){const l={type:"object",description:L.localize(1159,"Configure editor settings to be overridden for a language."),errorMessage:L.localize(1160,"This setting does not support per-language configuration."),$ref:e.resourceLanguageSettingsSchemaId};e.allSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,e.applicationSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,e.machineSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,e.machineOverridableSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,e.windowSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,e.resourceSettings.patternProperties[e.OVERRIDE_PROPERTY_PATTERN]=l,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(l,a){const r=this.configurationDefaultsOverrides.get(l)?.configurationDefaultOverrideValue;let d,m;r&&(!a.disallowConfigurationDefault||!r.source)&&(d=r.value,m=r.source),E.isUndefined(d)&&(d=a.defaultDefaultValue,m=void 0),E.isUndefined(d)&&(d=i(a.type)),a.default=d,a.defaultValueSource=m}}const n="\\[([^\\]]+)\\]",s=new RegExp(n,"g");e.OVERRIDE_PROPERTY_PATTERN=`^(${n})+$`,e.OVERRIDE_PROPERTY_REGEX=new RegExp(e.OVERRIDE_PROPERTY_PATTERN);function t(u){const l=[];if(e.OVERRIDE_PROPERTY_REGEX.test(u)){let a=s.exec(u);for(;a?.length;){const r=a[1].trim();r&&l.push(r),a=s.exec(u)}}return(0,c.distinct)(l)}function i(u){switch(Array.isArray(u)?u[0]:u){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const o=new p;_.Registry.add(e.Extensions.Configuration,o);function g(u,l){return u.trim()?e.OVERRIDE_PROPERTY_REGEX.test(u)?L.localize(1162,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",u):o.getConfigurationProperties()[u]!==void 0?L.localize(1163,"Cannot register '{0}'. This property is already registered.",u):l.policy?.name&&o.getPolicyConfigurations().get(l.policy?.name)!==void 0?L.localize(1164,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",u,l.policy?.name,o.getPolicyConfigurations().get(l.policy?.name)):null:L.localize(1161,"Cannot register an empty property")}}),define(oe[272],re([1,0,321,37,197,3,108,38]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.editorConfigurationBaseNode=void 0,e.isEditorConfigurationKey=s,e.isDiffEditorConfigurationKey=t,e.editorConfigurationBaseNode=Object.freeze({id:"editor",order:5,type:"object",title:L.localize(1683,"Editor"),scope:5});const _={...e.editorConfigurationBaseNode,properties:{"editor.tabSize":{type:"number",default:E.EDITOR_MODEL_DEFAULTS.tabSize,minimum:1,markdownDescription:L.localize(1684,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:L.localize(1685,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:E.EDITOR_MODEL_DEFAULTS.insertSpaces,markdownDescription:L.localize(1686,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:E.EDITOR_MODEL_DEFAULTS.detectIndentation,markdownDescription:L.localize(1687,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:E.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,description:L.localize(1688,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:E.EDITOR_MODEL_DEFAULTS.largeFileOptimizations,description:L.localize(1689,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[L.localize(1690,"Turn off Word Based Suggestions."),L.localize(1691,"Only suggest words from the active document."),L.localize(1692,"Suggest words from all open documents of the same language."),L.localize(1693,"Suggest words from all open documents.")],description:L.localize(1694,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[L.localize(1695,"Semantic highlighting enabled for all color themes."),L.localize(1696,"Semantic highlighting disabled for all color themes."),L.localize(1697,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:L.localize(1698,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:L.localize(1699,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:L.localize(1700,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!1,description:L.localize(1701,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:L.localize(1702,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:L.localize(1703,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.language.brackets":{type:["array","null"],default:null,description:L.localize(1704,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:L.localize(1705,"The opening bracket character or string sequence.")},{type:"string",description:L.localize(1706,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:L.localize(1707,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:L.localize(1708,"The opening bracket character or string sequence.")},{type:"string",description:L.localize(1709,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:c.diffEditorDefaultOptions.maxComputationTime,description:L.localize(1710,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:c.diffEditorDefaultOptions.maxFileSize,description:L.localize(1711,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:c.diffEditorDefaultOptions.renderSideBySide,description:L.localize(1712,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:c.diffEditorDefaultOptions.renderSideBySideInlineBreakpoint,description:L.localize(1713,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:c.diffEditorDefaultOptions.useInlineViewWhenSpaceIsLimited,description:L.localize(1714,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:c.diffEditorDefaultOptions.renderMarginRevertIcon,description:L.localize(1715,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:c.diffEditorDefaultOptions.renderGutterMenu,description:L.localize(1716,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:c.diffEditorDefaultOptions.ignoreTrimWhitespace,description:L.localize(1717,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:c.diffEditorDefaultOptions.renderIndicators,description:L.localize(1718,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:c.diffEditorDefaultOptions.diffCodeLens,description:L.localize(1719,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:c.diffEditorDefaultOptions.diffWordWrap,markdownEnumDescriptions:[L.localize(1720,"Lines will never wrap."),L.localize(1721,"Lines will wrap at the viewport width."),L.localize(1722,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:c.diffEditorDefaultOptions.diffAlgorithm,markdownEnumDescriptions:[L.localize(1723,"Uses the legacy diffing algorithm."),L.localize(1724,"Uses the advanced diffing algorithm.")],tags:["experimental"]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:c.diffEditorDefaultOptions.hideUnchangedRegions.enabled,markdownDescription:L.localize(1725,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:c.diffEditorDefaultOptions.hideUnchangedRegions.revealLineCount,markdownDescription:L.localize(1726,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:c.diffEditorDefaultOptions.hideUnchangedRegions.minimumLineCount,markdownDescription:L.localize(1727,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:c.diffEditorDefaultOptions.hideUnchangedRegions.contextLineCount,markdownDescription:L.localize(1728,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:c.diffEditorDefaultOptions.experimental.showMoves,markdownDescription:L.localize(1729,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:c.diffEditorDefaultOptions.experimental.showEmptyDecorations,description:L.localize(1730,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:c.diffEditorDefaultOptions.experimental.useTrueInlineView,description:L.localize(1731,"If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function b(o){return typeof o.type<"u"||typeof o.anyOf<"u"}for(const o of k.editorOptionsRegistry){const g=o.schema;if(typeof g<"u")if(b(g))_.properties[`editor.${o.name}`]=g;else for(const u in g)Object.hasOwnProperty.call(g,u)&&(_.properties[u]=g[u])}let p=null;function n(){return p===null&&(p=Object.create(null),Object.keys(_.properties).forEach(o=>{p[o]=!0})),p}function s(o){return n()[`editor.${o}`]||!1}function t(o){return n()[`diffEditor.${o}`]||!1}f.Registry.as(y.Extensions.Configuration).registerConfiguration(_)}),define(oe[70],re([1,0,3,6,38,128,108]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PLAINTEXT_EXTENSION=e.PLAINTEXT_LANGUAGE_ID=e.ModesRegistry=e.EditorModesRegistry=e.Extensions=void 0,e.Extensions={ModesRegistry:"editor.modesRegistry"};class f{constructor(){this._onDidChangeLanguages=new k.Emitter,this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(b){return this._languages.push(b),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let p=0,n=this._languages.length;p<n;p++)if(this._languages[p]===b){this._languages.splice(p,1);return}}}}getLanguages(){return this._languages}}e.EditorModesRegistry=f,e.ModesRegistry=new f,E.Registry.add(e.Extensions.ModesRegistry,e.ModesRegistry),e.PLAINTEXT_LANGUAGE_ID="plaintext",e.PLAINTEXT_EXTENSION=".txt",e.ModesRegistry.registerLanguage({id:e.PLAINTEXT_LANGUAGE_ID,extensions:[e.PLAINTEXT_EXTENSION],aliases:[c.localize(1243,"Plain Text"),"text"],mimetypes:[L.Mimes.text]}),E.Registry.as(y.Extensions.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}])}),define(oe[120],re([1,0,193,102,8,6,2,75,42,70,371,62,510]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.MarkdownRenderer=void 0,e.openLinkFromMarkdown=i;let t=class{static{s=this}static{this._ttpTokenizer=(0,k.createTrustedTypesPolicy)("tokenizeToString",{createHTML(u){return u}})}constructor(u,l,a){this._options=u,this._languageService=l,this._openerService=a,this._onDidRenderAsync=new L.Emitter,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(u,l,a){if(!u)return{element:document.createElement("span"),dispose:()=>{}};const r=new y.DisposableStore,d=r.add((0,c.renderMarkdown)(u,{...this._getRenderOptions(u,r),...l},a));return d.element.classList.add("rendered-markdown"),{element:d.element,dispose:()=>r.dispose()}}_getRenderOptions(u,l){return{codeBlockRenderer:async(a,r)=>{let d;a?d=this._languageService.getLanguageIdByLanguageName(a):this._options.editor&&(d=this._options.editor.getModel()?.getLanguageId()),d||(d=b.PLAINTEXT_LANGUAGE_ID);const m=await(0,p.tokenizeToString)(this._languageService,r,d),h=document.createElement("span");if(h.innerHTML=s._ttpTokenizer?.createHTML(m)??m,this._options.editor){const v=this._options.editor.getOption(50);(0,f.applyFontInfo)(h,v)}else this._options.codeBlockFontFamily&&(h.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(h.style.fontSize=this._options.codeBlockFontSize),h},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:a=>i(this._openerService,a,u.isTrusted),disposables:l}}}};e.MarkdownRenderer=t,e.MarkdownRenderer=t=s=De([he(1,_.ILanguageService),he(2,n.IOpenerService)],t);async function i(g,u,l){try{return await g.open(u,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:o(l)})}catch(a){return(0,E.onUnexpectedError)(a),!1}}function o(g){return g===!0?!0:g&&Array.isArray(g.enabledCommands)?g.enabledCommands:!1}}),define(oe[697],re([1,0,2,6,5,31,27,37,174,83,62,7,120,55,3,16,60,48,489]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverWidget=void 0;const l=E.$;let a=class extends b.Widget{get _targetWindow(){return E.getWindow(this._target.targetElements[0])}get _targetDocumentElement(){return E.getWindow(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===2?0:1}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(h){this._isLocked!==h&&(this._isLocked=h,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(h,v,C,w,S,D){super(),this._keybindingService=v,this._configurationService=C,this._openerService=w,this._instantiationService=S,this._accessibilityService=D,this._messageListeners=new c.DisposableStore,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._onDispose=this._register(new k.Emitter),this._onRequestLayout=this._register(new k.Emitter),this._linkHandler=h.linkHandler||(N=>(0,s.openLinkFromMarkdown)(this._openerService,N,(0,t.isMarkdownString)(h.content)?h.content.isTrusted:void 0)),this._target="targetElements"in h.target?h.target:new d(h.target),this._hoverPointer=h.appearance?.showPointer?l("div.workbench-hover-pointer"):void 0,this._hover=this._register(new _.HoverWidget),this._hover.containerDomNode.classList.add("workbench-hover","fadeIn"),h.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),h.appearance?.skipFadeInAnimation&&this._hover.containerDomNode.classList.add("skip-fade-in"),h.additionalClasses&&this._hover.containerDomNode.classList.add(...h.additionalClasses),h.position?.forcePosition&&(this._forcePosition=!0),h.trapFocus&&(this._enableFocusTraps=!0),this._hoverPosition=h.position?.hoverPosition??3,this.onmousedown(this._hover.containerDomNode,N=>N.stopPropagation()),this.onkeydown(this._hover.containerDomNode,N=>{N.equals(9)&&this.dispose()}),this._register(E.addDisposableListener(this._targetWindow,"blur",()=>this.dispose()));const I=l("div.hover-row.markdown-hover"),T=l("div.hover-contents");if(typeof h.content=="string")T.textContent=h.content,T.style.whiteSpace="pre-wrap";else if(E.isHTMLElement(h.content))T.appendChild(h.content),T.classList.add("html-hover-contents");else{const N=h.content,O=this._instantiationService.createInstance(s.MarkdownRenderer,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||f.EDITOR_FONT_DEFAULTS.fontFamily}),{element:x}=O.render(N,{actionHandler:{callback:F=>this._linkHandler(F),disposables:this._messageListeners},asyncRenderCallback:()=>{T.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});T.appendChild(x)}if(I.appendChild(T),this._hover.contentsDomNode.appendChild(I),h.actions&&h.actions.length>0){const N=l("div.hover-row.status-bar"),O=l("div.actions");h.actions.forEach(x=>{const F=this._keybindingService.lookupKeybinding(x.commandId),W=F?F.getLabel():null;_.HoverAction.render(O,{label:x.label,commandId:x.commandId,run:z=>{x.run(z),this.dispose()},iconClass:x.iconClass},W)}),N.appendChild(O),this._hover.containerDomNode.appendChild(N)}this._hoverContainer=l("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let M;if(h.actions&&h.actions.length>0?M=!1:h.persistence?.hideOnHover===void 0?M=typeof h.content=="string"||(0,t.isMarkdownString)(h.content)&&!h.content.value.includes("](")&&!h.content.value.includes("</a>"):M=h.persistence.hideOnHover,M&&h.appearance?.showHoverHint){const N=l("div.hover-row.status-bar"),O=l("div.info");O.textContent=(0,i.localize)(1015,"Hold {0} key to mouse over",o.isMacintosh?"Option":"Alt"),N.appendChild(O),this._hover.containerDomNode.appendChild(N)}const A=[...this._target.targetElements];M||A.push(this._hoverContainer);const R=this._register(new r(A));if(this._register(R.onMouseOut(()=>{this._isLocked||this.dispose()})),M){const N=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new r(N)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=R}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const h=this._hover.containerDomNode,v=this.findLastFocusableChild(this._hover.containerDomNode);if(v){const C=E.prepend(this._hoverContainer,l("div")),w=E.append(this._hoverContainer,l("div"));C.tabIndex=0,w.tabIndex=0,this._register(E.addDisposableListener(w,"focus",S=>{h.focus(),S.preventDefault()})),this._register(E.addDisposableListener(C,"focus",S=>{v.focus(),S.preventDefault()}))}}findLastFocusableChild(h){if(h.hasChildNodes())for(let v=0;v<h.childNodes.length;v++){const C=h.childNodes.item(h.childNodes.length-v-1);if(C.nodeType===C.ELEMENT_NODE){const S=C;if(typeof S.tabIndex=="number"&&S.tabIndex>=0)return S}const w=this.findLastFocusableChild(C);if(w)return w}}render(h){h.appendChild(this._hoverContainer);const C=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&(0,_.getHoverAccessibleViewHint)(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());C&&(0,u.status)(C),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const h=A=>{const R=E.getDomNodeZoomLevel(A),N=A.getBoundingClientRect();return{top:N.top*R,bottom:N.bottom*R,right:N.right*R,left:N.left*R}},v=this._target.targetElements.map(A=>h(A)),{top:C,right:w,bottom:S,left:D}=v[0],I=w-D,T=S-C,M={top:C,right:w,bottom:S,left:D,width:I,height:T,center:{x:D+I/2,y:C+T/2}};if(this.adjustHorizontalHoverPosition(M),this.adjustVerticalHoverPosition(M),this.adjustHoverMaxHeight(M),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case 1:M.left+=3,M.right+=3,this._hoverContainer.style.paddingLeft="3px",this._hoverContainer.style.marginLeft="-3px";break;case 0:M.left-=3,M.right-=3,this._hoverContainer.style.paddingRight="3px",this._hoverContainer.style.marginRight="-3px";break;case 2:M.top+=3,M.bottom+=3,this._hoverContainer.style.paddingTop="3px",this._hoverContainer.style.marginTop="-3px";break;case 3:M.top-=3,M.bottom-=3,this._hoverContainer.style.paddingBottom="3px",this._hoverContainer.style.marginBottom="-3px";break}M.center.x=M.left+I/2,M.center.y=M.top+T/2}this.computeXCordinate(M),this.computeYCordinate(M),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(M)),this._hover.onContentsChanged()}computeXCordinate(h){const v=this._hover.containerDomNode.clientWidth+2;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===1?this._x=h.right:this._hoverPosition===0?this._x=h.left-v:(this._hoverPointer?this._x=h.center.x-this._hover.containerDomNode.clientWidth/2:this._x=h.left,this._x+v>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-v-2,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=h.left+2)}computeYCordinate(h){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===3?this._y=h.top:this._hoverPosition===2?this._y=h.bottom-2:this._hoverPointer?this._y=h.center.y+this._hover.containerDomNode.clientHeight/2:this._y=h.bottom,this._y>this._targetWindow.innerHeight&&(this._y=h.bottom)}adjustHorizontalHoverPosition(h){if(this._target.x!==void 0)return;const v=this._hoverPointer?3:0;if(this._forcePosition){const C=v+2;this._hoverPosition===1?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-h.right-C}px`:this._hoverPosition===0&&(this._hover.containerDomNode.style.maxWidth=`${h.left-C}px`);return}this._hoverPosition===1?this._targetDocumentElement.clientWidth-h.right<this._hover.containerDomNode.clientWidth+v&&(h.left>=this._hover.containerDomNode.clientWidth+v?this._hoverPosition=0:this._hoverPosition=2):this._hoverPosition===0&&(h.left<this._hover.containerDomNode.clientWidth+v&&(this._targetDocumentElement.clientWidth-h.right>=this._hover.containerDomNode.clientWidth+v?this._hoverPosition=1:this._hoverPosition=2),h.left-this._hover.containerDomNode.clientWidth-v<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=1))}adjustVerticalHoverPosition(h){if(this._target.y!==void 0||this._forcePosition)return;const v=this._hoverPointer?3:0;this._hoverPosition===3?h.top-this._hover.containerDomNode.clientHeight-v<0&&(this._hoverPosition=2):this._hoverPosition===2&&h.bottom+this._hover.containerDomNode.clientHeight+v>this._targetWindow.innerHeight&&(this._hoverPosition=3)}adjustHoverMaxHeight(h){let v=this._targetWindow.innerHeight/2;if(this._forcePosition){const C=(this._hoverPointer?3:0)+2;this._hoverPosition===3?v=Math.min(v,h.top-C):this._hoverPosition===2&&(v=Math.min(v,this._targetWindow.innerHeight-h.bottom-C))}if(this._hover.containerDomNode.style.maxHeight=`${v}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const C=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==C&&(this._hover.contentsDomNode.style.paddingRight=C)}}setHoverPointerPosition(h){if(this._hoverPointer)switch(this._hoverPosition){case 0:case 1:{this._hoverPointer.classList.add(this._hoverPosition===0?"right":"left");const v=this._hover.containerDomNode.clientHeight;v>h.height?this._hoverPointer.style.top=`${h.center.y-(this._y-v)-3}px`:this._hoverPointer.style.top=`${Math.round(v/2)-3}px`;break}case 3:case 2:{this._hoverPointer.classList.add(this._hoverPosition===3?"bottom":"top");const v=this._hover.containerDomNode.clientWidth;let C=Math.round(v/2)-3;const w=this._x+C;(w<h.left||w>h.right)&&(C=h.center.x-this._x-3),this._hoverPointer.style.left=`${C}px`;break}}}focus(){this._hover.containerDomNode.focus()}dispose(){this._isDisposed||(this._onDispose.fire(),this._hoverContainer.remove(),this._messageListeners.dispose(),this._target.dispose(),super.dispose()),this._isDisposed=!0}};e.HoverWidget=a,e.HoverWidget=a=De([he(1,L.IKeybindingService),he(2,y.IConfigurationService),he(3,p.IOpenerService),he(4,n.IInstantiationService),he(5,g.IAccessibilityService)],a);class r extends b.Widget{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(h){super(),this._elements=h,this._isMouseIn=!0,this._onMouseOut=this._register(new k.Emitter),this._elements.forEach(v=>this.onmouseover(v,()=>this._onTargetMouseOver(v))),this._elements.forEach(v=>this.onmouseleave(v,()=>this._onTargetMouseLeave(v)))}_onTargetMouseOver(h){this._isMouseIn=!0,this._clearEvaluateMouseStateTimeout(h)}_onTargetMouseLeave(h){this._isMouseIn=!1,this._evaluateMouseState(h)}_evaluateMouseState(h){this._clearEvaluateMouseStateTimeout(h),this._mouseTimeout=E.getWindow(h).setTimeout(()=>this._fireIfMouseOutside(),0)}_clearEvaluateMouseStateTimeout(h){this._mouseTimeout&&(E.getWindow(h).clearTimeout(this._mouseTimeout),this._mouseTimeout=void 0)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class d{constructor(h){this._element=h,this.targetElements=[this._element]}dispose(){}}}),define(oe[34],re([1,0,6,2,11,169,130,579,583,580,582,200,7,27,42,49,70,584]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResolvedLanguageConfiguration=e.LanguageConfigurationRegistry=e.LanguageConfigurationChangeEvent=e.LanguageConfigurationService=e.ILanguageConfigurationService=e.LanguageConfigurationServiceChangeEvent=void 0,e.getIndentationAtPosition=v;class l{constructor(A){this.languageId=A}affects(A){return this.languageId?this.languageId===A:!0}}e.LanguageConfigurationServiceChangeEvent=l,e.ILanguageConfigurationService=(0,s.createDecorator)("languageConfigurationService");let a=class extends k.Disposable{constructor(A,R){super(),this.configurationService=A,this.languageService=R,this._registry=this._register(new I),this.onDidChangeEmitter=this._register(new c.Emitter),this.onDidChange=this.onDidChangeEmitter.event,this.configurations=new Map;const N=new Set(Object.values(d));this._register(this.configurationService.onDidChangeConfiguration(O=>{const x=O.change.keys.some(W=>N.has(W)),F=O.change.overrides.filter(([W,z])=>z.some(q=>N.has(q))).map(([W])=>W);if(x)this.configurations.clear(),this.onDidChangeEmitter.fire(new l(void 0));else for(const W of F)this.languageService.isRegisteredLanguageId(W)&&(this.configurations.delete(W),this.onDidChangeEmitter.fire(new l(W)))})),this._register(this._registry.onDidChange(O=>{this.configurations.delete(O.languageId),this.onDidChangeEmitter.fire(new l(O.languageId))}))}register(A,R,N){return this._registry.register(A,R,N)}getLanguageConfiguration(A){let R=this.configurations.get(A);return R||(R=r(A,this._registry,this.configurationService,this.languageService),this.configurations.set(A,R)),R}};e.LanguageConfigurationService=a,e.LanguageConfigurationService=a=De([he(0,t.IConfigurationService),he(1,i.ILanguageService)],a);function r(M,A,R,N){let O=A.getLanguageConfiguration(M);if(!O){if(!N.isRegisteredLanguageId(M))return new T(M,{});O=new T(M,{})}const x=m(O.languageId,R),F=w([O.underlyingConfig,x]);return new T(O.languageId,F)}const d={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function m(M,A){const R=A.getValue(d.brackets,{overrideIdentifier:M}),N=A.getValue(d.colorizedBracketPairs,{overrideIdentifier:M});return{brackets:h(R),colorizedBracketPairs:h(N)}}function h(M){if(Array.isArray(M))return M.map(A=>{if(!(!Array.isArray(A)||A.length!==2))return[A[0],A[1]]}).filter(A=>!!A)}function v(M,A,R){const N=M.getLineContent(A);let O=E.getLeadingWhitespace(N);return O.length>R-1&&(O=O.substring(0,R-1)),O}class C{constructor(A){this.languageId=A,this._resolved=null,this._entries=[],this._order=0,this._resolved=null}register(A,R){const N=new S(A,R,++this._order);return this._entries.push(N),this._resolved=null,(0,k.toDisposable)(()=>{for(let O=0;O<this._entries.length;O++)if(this._entries[O]===N){this._entries.splice(O,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){const A=this._resolve();A&&(this._resolved=new T(this.languageId,A))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(S.cmp),w(this._entries.map(A=>A.configuration)))}}function w(M){let A={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(const R of M)A={comments:R.comments||A.comments,brackets:R.brackets||A.brackets,wordPattern:R.wordPattern||A.wordPattern,indentationRules:R.indentationRules||A.indentationRules,onEnterRules:R.onEnterRules||A.onEnterRules,autoClosingPairs:R.autoClosingPairs||A.autoClosingPairs,surroundingPairs:R.surroundingPairs||A.surroundingPairs,autoCloseBefore:R.autoCloseBefore||A.autoCloseBefore,folding:R.folding||A.folding,colorizedBracketPairs:R.colorizedBracketPairs||A.colorizedBracketPairs,__electricCharacterSupport:R.__electricCharacterSupport||A.__electricCharacterSupport};return A}class S{constructor(A,R,N){this.configuration=A,this.priority=R,this.order=N}static cmp(A,R){return A.priority===R.priority?A.order-R.order:A.priority-R.priority}}class D{constructor(A){this.languageId=A}}e.LanguageConfigurationChangeEvent=D;class I extends k.Disposable{constructor(){super(),this._entries=new Map,this._onDidChange=this._register(new c.Emitter),this.onDidChange=this._onDidChange.event,this._register(this.register(g.PLAINTEXT_LANGUAGE_ID,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(A,R,N=0){let O=this._entries.get(A);O||(O=new C(A),this._entries.set(A,O));const x=O.register(R,N);return this._onDidChange.fire(new D(A)),(0,k.toDisposable)(()=>{x.dispose(),this._onDidChange.fire(new D(A))})}getLanguageConfiguration(A){return this._entries.get(A)?.getResolvedConfiguration()||null}}e.LanguageConfigurationRegistry=I;class T{constructor(A,R){this.languageId=A,this.underlyingConfig=R,this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new p.OnEnterSupport(this.underlyingConfig):null,this.comments=T._handleComments(this.underlyingConfig),this.characterPair=new f.CharacterPairSupport(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||L.DEFAULT_WORD_REGEXP,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new b.IndentRulesSupport(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new u.LanguageBracketsConfiguration(A,this.underlyingConfig)}getWordDefinition(){return(0,L.ensureValidWordDefinition)(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new n.RichEditBrackets(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new _.BracketElectricCharacterSupport(this.brackets)),this._electricCharacter}onEnter(A,R,N,O){return this._onEnterSupport?this._onEnterSupport.onEnter(A,R,N,O):null}getAutoClosingPairs(){return new y.AutoClosingPairs(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(A){return this.characterPair.getAutoCloseBeforeSet(A)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(A){const R=A.comments;if(!R)return null;const N={};if(R.lineComment&&(N.lineCommentToken=R.lineComment),R.blockComment){const[O,x]=R.blockComment;N.blockCommentStartToken=O,N.blockCommentEndToken=x}return N}}e.ResolvedLanguageConfiguration=T,(0,o.registerSingleton)(e.ILanguageConfigurationService,a,1)}),define(oe[273],re([1,0,14,2,309,462,4,34,663,44,209,13,61,59,8,17,243,104,56,52,5]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorWorkerClient=e.EditorWorkerHost=e.EditorWorkerService=void 0;const d=60*1e3,m=5*60*1e3;function h(M,A){const R=M.getModel(A);return!(!R||R.isTooLargeForSyncing())}let v=class extends k.Disposable{constructor(A,R,N,O,x){super(),this._modelService=A,this._workerManager=this._register(new w(this._modelService,O)),this._logService=N,this._register(x.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:(F,W)=>h(this._modelService,F.uri)?this._workerManager.withWorker().then(z=>z.computeLinks(F.uri)).then(z=>z&&{links:z}):Promise.resolve({links:[]})})),this._register(x.completionProvider.register("*",new C(this._workerManager,R,this._modelService,O)))}dispose(){super.dispose()}canComputeUnicodeHighlights(A){return h(this._modelService,A)}computedUnicodeHighlights(A,R,N){return this._workerManager.withWorker().then(O=>O.computedUnicodeHighlights(A,R,N))}async computeDiff(A,R,N,O){const x=await this._workerManager.withWorker().then(z=>z.computeDiff(A,R,N,O));if(!x)return null;return{identical:x.identical,quitEarly:x.quitEarly,changes:W(x.changes),moves:x.moves.map(z=>new g.MovedText(new u.LineRangeMapping(new l.LineRange(z[0],z[1]),new l.LineRange(z[2],z[3])),W(z[4])))};function W(z){return z.map(q=>new u.DetailedLineRangeMapping(new l.LineRange(q[0],q[1]),new l.LineRange(q[2],q[3]),q[4]?.map(H=>new u.RangeMapping(new y.Range(H[0],H[1],H[2],H[3]),new y.Range(H[4],H[5],H[6],H[7])))))}}computeMoreMinimalEdits(A,R,N=!1){if((0,n.isNonEmptyArray)(R)){if(!h(this._modelService,A))return Promise.resolve(R);const O=t.StopWatch.create(),x=this._workerManager.withWorker().then(F=>F.computeMoreMinimalEdits(A,R,N));return x.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",A.toString(!0),O.elapsed())),Promise.race([x,(0,c.timeout)(1e3).then(()=>R)])}else return Promise.resolve(void 0)}canNavigateValueSet(A){return h(this._modelService,A)}navigateValueSet(A,R,N){return this._workerManager.withWorker().then(O=>O.navigateValueSet(A,R,N))}canComputeWordRanges(A){return h(this._modelService,A)}computeWordRanges(A,R){return this._workerManager.withWorker().then(N=>N.computeWordRanges(A,R))}findSectionHeaders(A,R){return this._workerManager.withWorker().then(N=>N.findSectionHeaders(A,R))}};e.EditorWorkerService=v,e.EditorWorkerService=v=De([he(0,b.IModelService),he(1,p.ITextResourceConfigurationService),he(2,s.ILogService),he(3,f.ILanguageConfigurationService),he(4,o.ILanguageFeaturesService)],v);class C{constructor(A,R,N,O){this.languageConfigurationService=O,this._debugDisplayName="wordbasedCompletions",this._workerManager=A,this._configurationService=R,this._modelService=N}async provideCompletionItems(A,R){const N=this._configurationService.getValue(A.uri,R,"editor");if(N.wordBasedSuggestions==="off")return;const O=[];if(N.wordBasedSuggestions==="currentDocument")h(this._modelService,A.uri)&&O.push(A.uri);else for(const K of this._modelService.getModels())h(this._modelService,K.uri)&&(K===A?O.unshift(K.uri):(N.wordBasedSuggestions==="allDocuments"||K.getLanguageId()===A.getLanguageId())&&O.push(K.uri));if(O.length===0)return;const x=this.languageConfigurationService.getLanguageConfiguration(A.getLanguageId()).getWordDefinition(),F=A.getWordAtPosition(R),W=F?new y.Range(R.lineNumber,F.startColumn,R.lineNumber,F.endColumn):y.Range.fromPositions(R),z=W.setEndPosition(R.lineNumber,R.column),H=await(await this._workerManager.withWorker()).textualSuggest(O,F?.word,x);if(H)return{duration:H.duration,suggestions:H.words.map(K=>({kind:18,label:K,insertText:K,range:{insert:z,replace:W}}))}}}class w extends k.Disposable{constructor(A,R){super(),this.languageConfigurationService=R,this._modelService=A,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new r.WindowIntervalTimer).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(m/2),a.mainWindow),this._register(this._modelService.onModelRemoved(O=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>m&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new T(this._modelService,!1,"editorWorkerService",this.languageConfigurationService)),Promise.resolve(this._editorWorkerClient)}}class S extends k.Disposable{constructor(A,R,N){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=A,this._modelService=R,!N){const O=new c.IntervalTimer;O.cancelAndSet(()=>this._checkStopModelSync(),Math.round(d/2)),this._register(O)}}dispose(){for(const A in this._syncedModels)(0,k.dispose)(this._syncedModels[A]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(A,R){for(const N of A){const O=N.toString();this._syncedModels[O]||this._beginModelSync(N,R),this._syncedModels[O]&&(this._syncedModelsLastUsedTime[O]=new Date().getTime())}}_checkStopModelSync(){const A=new Date().getTime(),R=[];for(const N in this._syncedModelsLastUsedTime)A-this._syncedModelsLastUsedTime[N]>d&&R.push(N);for(const N of R)this._stopModelSync(N)}_beginModelSync(A,R){const N=this._modelService.getModel(A);if(!N||!R&&N.isTooLargeForSyncing())return;const O=A.toString();this._proxy.acceptNewModel({url:N.uri.toString(),lines:N.getLinesContent(),EOL:N.getEOL(),versionId:N.getVersionId()});const x=new k.DisposableStore;x.add(N.onDidChangeContent(F=>{this._proxy.acceptModelChanged(O.toString(),F)})),x.add(N.onWillDispose(()=>{this._stopModelSync(O)})),x.add((0,k.toDisposable)(()=>{this._proxy.acceptRemovedModel(O)})),this._syncedModels[O]=x}_stopModelSync(A){const R=this._syncedModels[A];delete this._syncedModels[A],delete this._syncedModelsLastUsedTime[A],(0,k.dispose)(R)}}class D{constructor(A){this._instance=A,this._proxyObj=Promise.resolve(this._instance)}dispose(){this._instance.dispose()}getProxyObject(){return this._proxyObj}}class I{constructor(A){this._workerClient=A}fhr(A,R){return this._workerClient.fhr(A,R)}}e.EditorWorkerHost=I;class T extends k.Disposable{constructor(A,R,N,O){super(),this.languageConfigurationService=O,this._disposed=!1,this._modelService=A,this._keepIdleModels=R,this._workerFactory=new L.DefaultWorkerFactory(N),this._worker=null,this._modelManager=null}fhr(A,R){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(new E.SimpleWorkerClient(this._workerFactory,"vs/editor/common/services/editorSimpleWorker",new I(this)))}catch(A){(0,E.logOnceWebWorkerWarning)(A),this._worker=new D(new _.EditorSimpleWorker(new I(this),null))}return this._worker}_getProxy(){return this._getOrCreateWorker().getProxyObject().then(void 0,A=>((0,E.logOnceWebWorkerWarning)(A),this._worker=new D(new _.EditorSimpleWorker(new I(this),null)),this._getOrCreateWorker().getProxyObject()))}_getOrCreateModelManager(A){return this._modelManager||(this._modelManager=this._register(new S(A,this._modelService,this._keepIdleModels))),this._modelManager}async _withSyncedResources(A,R=!1){return this._disposed?Promise.reject((0,i.canceled)()):this._getProxy().then(N=>(this._getOrCreateModelManager(N).ensureSyncedResources(A,R),N))}computedUnicodeHighlights(A,R,N){return this._withSyncedResources([A]).then(O=>O.computeUnicodeHighlights(A.toString(),R,N))}computeDiff(A,R,N,O){return this._withSyncedResources([A,R],!0).then(x=>x.computeDiff(A.toString(),R.toString(),N,O))}computeMoreMinimalEdits(A,R,N){return this._withSyncedResources([A]).then(O=>O.computeMoreMinimalEdits(A.toString(),R,N))}computeLinks(A){return this._withSyncedResources([A]).then(R=>R.computeLinks(A.toString()))}computeDefaultDocumentColors(A){return this._withSyncedResources([A]).then(R=>R.computeDefaultDocumentColors(A.toString()))}async textualSuggest(A,R,N){const O=await this._withSyncedResources(A),x=N.source,F=N.flags;return O.textualSuggest(A.map(W=>W.toString()),R,x,F)}computeWordRanges(A,R){return this._withSyncedResources([A]).then(N=>{const O=this._modelService.getModel(A);if(!O)return Promise.resolve(null);const x=this.languageConfigurationService.getLanguageConfiguration(O.getLanguageId()).getWordDefinition(),F=x.source,W=x.flags;return N.computeWordRanges(A.toString(),R,F,W)})}navigateValueSet(A,R,N){return this._withSyncedResources([A]).then(O=>{const x=this._modelService.getModel(A);if(!x)return null;const F=this.languageConfigurationService.getLanguageConfiguration(x.getLanguageId()).getWordDefinition(),W=F.source,z=F.flags;return O.navigateValueSet(A.toString(),R,N,W,z)})}findSectionHeaders(A,R){return this._withSyncedResources([A]).then(N=>N.findSectionHeaders(A.toString(),R))}dispose(){super.dispose(),this._disposed=!0}}e.EditorWorkerClient=T}),define(oe[698],re([1,0,54,273]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWebWorker=E;function E(y,f,_){return new L(y,f,_)}class L extends k.EditorWorkerClient{constructor(f,_,b){super(f,b.keepIdleModels||!1,b.label,_),this._foreignModuleId=b.moduleId,this._foreignModuleCreateData=b.createData||null,this._foreignModuleHost=b.host||null,this._foreignProxy=null}fhr(f,_){if(!this._foreignModuleHost||typeof this._foreignModuleHost[f]!="function")return Promise.reject(new Error("Missing method "+f+" or missing main thread foreign host."));try{return Promise.resolve(this._foreignModuleHost[f].apply(this._foreignModuleHost,_))}catch(b){return Promise.reject(b)}}_getForeignProxy(){return this._foreignProxy||(this._foreignProxy=this._getProxy().then(f=>{const _=this._foreignModuleHost?(0,c.getAllMethodNames)(this._foreignModuleHost):[];return f.loadForeignModule(this._foreignModuleId,this._foreignModuleCreateData,_).then(b=>{this._foreignModuleCreateData=null;const p=(t,i)=>f.fmr(t,i),n=(t,i)=>function(){const o=Array.prototype.slice.call(arguments,0);return i(t,o)},s={};for(const t of b)s[t]=n(t,p);return s})})),this._foreignProxy}getProxy(){return this._getForeignProxy()}withSyncedResources(f){return this._withSyncedResources(f).then(_=>this.getProxy())}}}),define(oe[274],re([1,0,130,34,251]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getEnterAction=L;function L(y,f,_,b){f.tokenization.forceTokenization(_.startLineNumber);const p=f.getLanguageIdAtPosition(_.startLineNumber,_.startColumn),n=b.getLanguageConfiguration(p);if(!n)return null;const t=new E.IndentationContextProcessor(f,b).getProcessedTokenContextAroundRange(_),i=t.previousLineProcessedTokens.getLineContent(),o=t.beforeRangeProcessedTokens.getLineContent(),g=t.afterRangeProcessedTokens.getLineContent(),u=n.onEnter(y,i,o,g);if(!u)return null;const l=u.indentAction;let a=u.appendText;const r=u.removeText||0;a?l===c.IndentAction.Indent&&(a="	"+a):l===c.IndentAction.Indent||l===c.IndentAction.IndentOutdent?a="	":a="";let d=(0,k.getIndentationAtPosition)(f,_.startLineNumber,_.startColumn);return r&&(d=d.substring(0,d.length-r)),{indentAction:l,appendText:a,removeText:r,indentation:d}}}),define(oe[183],re([1,0,11,93,4,23,274,34]),function(ae,e,c,k,E,L,y,f){"use strict";var _;Object.defineProperty(e,"__esModule",{value:!0}),e.ShiftCommand=void 0;const b=Object.create(null);function p(s,t){if(t<=0)return"";b[s]||(b[s]=["",s]);const i=b[s];for(let o=i.length;o<=t;o++)i[o]=i[o-1]+s;return i[t]}let n=_=class{static unshiftIndent(t,i,o,g,u){const l=k.CursorColumns.visibleColumnFromColumn(t,i,o);if(u){const a=p(" ",g),d=k.CursorColumns.prevIndentTabStop(l,g)/g;return p(a,d)}else{const a="	",d=k.CursorColumns.prevRenderTabStop(l,o)/o;return p(a,d)}}static shiftIndent(t,i,o,g,u){const l=k.CursorColumns.visibleColumnFromColumn(t,i,o);if(u){const a=p(" ",g),d=k.CursorColumns.nextIndentTabStop(l,g)/g;return p(a,d)}else{const a="	",d=k.CursorColumns.nextRenderTabStop(l,o)/o;return p(a,d)}}constructor(t,i,o){this._languageConfigurationService=o,this._opts=i,this._selection=t,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}_addEditOperation(t,i,o){this._useLastEditRangeForCursorEndPosition?t.addTrackedEditOperation(i,o):t.addEditOperation(i,o)}getEditOperations(t,i){const o=this._selection.startLineNumber;let g=this._selection.endLineNumber;this._selection.endColumn===1&&o!==g&&(g=g-1);const{tabSize:u,indentSize:l,insertSpaces:a}=this._opts,r=o===g;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(t.getLineContent(o))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,m=0;for(let h=o;h<=g;h++,d=m){m=0;const v=t.getLineContent(h);let C=c.firstNonWhitespaceIndex(v);if(this._opts.isUnshift&&(v.length===0||C===0)||!r&&!this._opts.isUnshift&&v.length===0)continue;if(C===-1&&(C=v.length),h>1&&k.CursorColumns.visibleColumnFromColumn(v,C+1,u)%l!==0&&t.tokenization.isCheapToTokenize(h-1)){const D=(0,y.getEnterAction)(this._opts.autoIndent,t,new E.Range(h-1,t.getLineMaxColumn(h-1),h-1,t.getLineMaxColumn(h-1)),this._languageConfigurationService);if(D){if(m=d,D.appendText)for(let I=0,T=D.appendText.length;I<T&&m<l&&D.appendText.charCodeAt(I)===32;I++)m++;D.removeText&&(m=Math.max(0,m-D.removeText));for(let I=0;I<m&&!(C===0||v.charCodeAt(C-1)!==32);I++)C--}}if(this._opts.isUnshift&&C===0)continue;let w;this._opts.isUnshift?w=_.unshiftIndent(v,C+1,u,l,a):w=_.shiftIndent(v,C+1,u,l,a),this._addEditOperation(i,new E.Range(h,1,h,C+1),w),h===o&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=C+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&t.getLineLength(o)===0&&(this._useLastEditRangeForCursorEndPosition=!0);const d=a?p(" ",l):"	";for(let m=o;m<=g;m++){const h=t.getLineContent(m);let v=c.firstNonWhitespaceIndex(h);if(!(this._opts.isUnshift&&(h.length===0||v===0))&&!(!r&&!this._opts.isUnshift&&h.length===0)&&(v===-1&&(v=h.length),!(this._opts.isUnshift&&v===0)))if(this._opts.isUnshift){v=Math.min(v,l);for(let C=0;C<v;C++)if(h.charCodeAt(C)===9){v=C+1;break}this._addEditOperation(i,new E.Range(m,1,m,v+1),"")}else this._addEditOperation(i,new E.Range(m,1,m,1),d),m===o&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=i.trackSelection(this._selection)}computeCursorState(t,i){if(this._useLastEditRangeForCursorEndPosition){const g=i.getInverseEditOperations()[0];return new L.Selection(g.range.endLineNumber,g.range.endColumn,g.range.endLineNumber,g.range.endColumn)}const o=i.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){const g=this._selection.startColumn;return o.startColumn<=g?o:o.getDirection()===0?new L.Selection(o.startLineNumber,g,o.endLineNumber,o.endColumn):new L.Selection(o.endLineNumber,o.endColumn,o.startLineNumber,g)}return o}};e.ShiftCommand=n,e.ShiftCommand=n=_=De([he(2,f.ILanguageConfigurationService)],n)}),define(oe[211],re([1,0,8,11,145,183,325,77,168,4,9,130,34,172,252,274]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseTypeWithAutoClosingCommand=e.TabOperation=e.TypeWithoutInterceptorsOperation=e.CompositionOperation=e.PasteOperation=e.EnterOperation=e.SimpleCharacterTypeOperation=e.InterceptorElectricCharOperation=e.SurroundSelectionOperation=e.AutoClosingOpenCharTypeOperation=e.AutoClosingOvertypeWithInterceptorsOperation=e.AutoClosingOvertypeOperation=e.AutoIndentOperation=void 0,e.shiftIndent=F,e.unshiftIndent=W,e.shouldSurroundChar=z;class g{static getEdits(H,K,U,Y,Q){if(!Q&&this._isAutoIndentType(H,K,U)){const X=[];for(const P of U){const te=this._findActualIndentationForSelection(H,K,P,Y);if(te===null)return;X.push({selection:P,indentation:te})}const G=a.getAutoClosingPairClose(H,K,U,Y,!1);return this._getIndentationAndAutoClosingPairEdits(H,K,X,Y,G)}}static _isAutoIndentType(H,K,U){if(H.autoIndent<4)return!1;for(let Y=0,Q=U.length;Y<Q;Y++)if(!K.tokenization.isCheapToTokenize(U[Y].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(H,K,U,Y){const Q=(0,i.getIndentActionForType)(H,K,U,Y,{shiftIndent:G=>F(H,G),unshiftIndent:G=>W(H,G)},H.languageConfigurationService);if(Q===null)return null;const X=(0,s.getIndentationAtPosition)(K,U.startLineNumber,U.startColumn);return Q===H.normalizeIndentation(X)?null:Q}static _getIndentationAndAutoClosingPairEdits(H,K,U,Y,Q){const X=U.map(({selection:P,indentation:te})=>{if(Q!==null){const se=this._getEditFromIndentationAndSelection(H,K,te,P,Y,!1);return new T(se,P,Y,Q)}else{const se=this._getEditFromIndentationAndSelection(H,K,te,P,Y,!0);return x(se.range,se.text,!1)}}),G={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new f.EditOperationResult(4,X,G)}static _getEditFromIndentationAndSelection(H,K,U,Y,Q,X=!0){const G=Y.startLineNumber,P=K.getLineFirstNonWhitespaceColumn(G);let te=H.normalizeIndentation(U);if(P!==0){const ue=K.getLineContent(G);te+=ue.substring(P-1,Y.startColumn-1)}return te+=X?Q:"",{range:new b.Range(G,1,Y.endLineNumber,Y.endColumn),text:te}}}e.AutoIndentOperation=g;class u{static getEdits(H,K,U,Y,Q,X){if(O(K,U,Y,Q,X))return this._runAutoClosingOvertype(H,Y,X)}static _runAutoClosingOvertype(H,K,U){const Y=[];for(let Q=0,X=K.length;Q<X;Q++){const P=K[Q].getPosition(),te=new b.Range(P.lineNumber,P.column,P.lineNumber,P.column+1);Y[Q]=new E.ReplaceCommand(te,U)}return new f.EditOperationResult(4,Y,{shouldPushStackElementBefore:A(H,4),shouldPushStackElementAfter:!1})}}e.AutoClosingOvertypeOperation=u;class l{static getEdits(H,K,U,Y,Q){if(O(H,K,U,Y,Q)){const X=U.map(G=>new E.ReplaceCommand(new b.Range(G.positionLineNumber,G.positionColumn,G.positionLineNumber,G.positionColumn+1),"",!1));return new f.EditOperationResult(4,X,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}}e.AutoClosingOvertypeWithInterceptorsOperation=l;class a{static getEdits(H,K,U,Y,Q,X){if(!X){const G=this.getAutoClosingPairClose(H,K,U,Y,Q);if(G!==null)return this._runAutoClosingOpenCharType(U,Y,Q,G)}}static _runAutoClosingOpenCharType(H,K,U,Y){const Q=[];for(let X=0,G=H.length;X<G;X++){const P=H[X];Q[X]=new I(P,K,!U,Y)}return new f.EditOperationResult(4,Q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(H,K,U,Y,Q){for(const ce of U)if(!ce.isEmpty())return null;const X=U.map(ce=>{const ie=ce.getPosition();return Q?{lineNumber:ie.lineNumber,beforeColumn:ie.column-Y.length,afterColumn:ie.column}:{lineNumber:ie.lineNumber,beforeColumn:ie.column,afterColumn:ie.column}}),G=this._findAutoClosingPairOpen(H,K,X.map(ce=>new p.Position(ce.lineNumber,ce.beforeColumn)),Y);if(!G)return null;let P,te;if((0,f.isQuote)(Y)?(P=H.autoClosingQuotes,te=H.shouldAutoCloseBefore.quote):(H.blockCommentStartToken?G.open.includes(H.blockCommentStartToken):!1)?(P=H.autoClosingComments,te=H.shouldAutoCloseBefore.comment):(P=H.autoClosingBrackets,te=H.shouldAutoCloseBefore.bracket),P==="never")return null;const ue=this._findContainedAutoClosingPair(H,G),ge=ue?ue.close:"";let pe=!0;for(const ce of X){const{lineNumber:ie,beforeColumn:ne,afterColumn:J}=ce,B=K.getLineContent(ie),j=B.substring(0,ne-1),V=B.substring(J-1);if(V.startsWith(ge)||(pe=!1),V.length>0){const le=V.charAt(0);if(!this._isBeforeClosingBrace(H,V)&&!te(le))return null}if(G.open.length===1&&(Y==="'"||Y==='"')&&P!=="always"){const le=(0,_.getMapForWordSeparators)(H.wordSeparators,[]);if(j.length>0){const de=j.charCodeAt(j.length-1);if(le.get(de)===0)return null}}if(!K.tokenization.isCheapToTokenize(ie))return null;K.tokenization.forceTokenization(ie);const $=K.tokenization.getLineTokens(ie),Z=(0,t.createScopedLineTokens)($,ne-1);if(!G.shouldAutoClose(Z,ne-Z.firstCharOffset))return null;const ee=G.findNeutralCharacter();if(ee){const le=K.tokenization.getTokenTypeIfInsertingCharacter(ie,ne,ee);if(!G.isOK(le))return null}}return pe?G.close.substring(0,G.close.length-ge.length):G.close}static _findContainedAutoClosingPair(H,K){if(K.open.length<=1)return null;const U=K.close.charAt(K.close.length-1),Y=H.autoClosingPairs.autoClosingPairsCloseByEnd.get(U)||[];let Q=null;for(const X of Y)X.open!==K.open&&K.open.includes(X.open)&&K.close.endsWith(X.close)&&(!Q||X.open.length>Q.open.length)&&(Q=X);return Q}static _findAutoClosingPairOpen(H,K,U,Y){const Q=H.autoClosingPairs.autoClosingPairsOpenByEnd.get(Y);if(!Q)return null;let X=null;for(const G of Q)if(X===null||G.open.length>X.open.length){let P=!0;for(const te of U)if(K.getValueInRange(new b.Range(te.lineNumber,te.column-G.open.length+1,te.lineNumber,te.column))+Y!==G.open){P=!1;break}P&&(X=G)}return X}static _isBeforeClosingBrace(H,K){const U=K.charAt(0),Y=H.autoClosingPairs.autoClosingPairsOpenByStart.get(U)||[],Q=H.autoClosingPairs.autoClosingPairsCloseByStart.get(U)||[],X=Y.some(P=>K.startsWith(P.open)),G=Q.some(P=>K.startsWith(P.close));return!X&&G}}e.AutoClosingOpenCharTypeOperation=a;class r{static getEdits(H,K,U,Y,Q){if(!Q&&this._isSurroundSelectionType(H,K,U,Y))return this._runSurroundSelectionType(H,U,Y)}static _runSurroundSelectionType(H,K,U){const Y=[];for(let Q=0,X=K.length;Q<X;Q++){const G=K[Q],P=H.surroundingPairs[U];Y[Q]=new y.SurroundSelectionCommand(G,U,P)}return new f.EditOperationResult(0,Y,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(H,K,U,Y){if(!z(H,Y)||!H.surroundingPairs.hasOwnProperty(Y))return!1;const Q=(0,f.isQuote)(Y);for(const X of U){if(X.isEmpty())return!1;let G=!0;for(let P=X.startLineNumber;P<=X.endLineNumber;P++){const te=K.getLineContent(P),se=P===X.startLineNumber?X.startColumn-1:0,ue=P===X.endLineNumber?X.endColumn-1:te.length,ge=te.substring(se,ue);if(/[^ \t]/.test(ge)){G=!1;break}}if(G)return!1;if(Q&&X.startLineNumber===X.endLineNumber&&X.startColumn+1===X.endColumn){const P=K.getValueInRange(X);if((0,f.isQuote)(P))return!1}}return!0}}e.SurroundSelectionOperation=r;class d{static getEdits(H,K,U,Y,Q,X){if(!X&&this._isTypeInterceptorElectricChar(K,U,Y)){const G=this._typeInterceptorElectricChar(H,K,U,Y[0],Q);if(G)return G}}static _isTypeInterceptorElectricChar(H,K,U){return!!(U.length===1&&K.tokenization.isCheapToTokenize(U[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(H,K,U,Y,Q){if(!K.electricChars.hasOwnProperty(Q)||!Y.isEmpty())return null;const X=Y.getPosition();U.tokenization.forceTokenization(X.lineNumber);const G=U.tokenization.getLineTokens(X.lineNumber);let P;try{P=K.onElectricCharacter(Q,G,X.column)}catch(te){return(0,c.onUnexpectedError)(te),null}if(!P)return null;if(P.matchOpenBracket){const te=(G.getLineContent()+Q).lastIndexOf(P.matchOpenBracket)+1,se=U.bracketPairs.findMatchingBracketUp(P.matchOpenBracket,{lineNumber:X.lineNumber,column:te},500);if(se){if(se.startLineNumber===X.lineNumber)return null;const ue=U.getLineContent(se.startLineNumber),ge=k.getLeadingWhitespace(ue),pe=K.normalizeIndentation(ge),ce=U.getLineContent(X.lineNumber),ie=U.getLineFirstNonWhitespaceColumn(X.lineNumber)||X.column,ne=ce.substring(ie-1,X.column-1),J=pe+ne+Q,B=new b.Range(X.lineNumber,1,X.lineNumber,X.column),j=new E.ReplaceCommand(B,J);return new f.EditOperationResult(M(J,H),[j],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}}e.InterceptorElectricCharOperation=d;class m{static getEdits(H,K,U){const Y=[];for(let X=0,G=K.length;X<G;X++)Y[X]=new E.ReplaceCommand(K[X],U);const Q=M(U,H);return new f.EditOperationResult(Q,Y,{shouldPushStackElementBefore:A(H,Q),shouldPushStackElementAfter:!1})}}e.SimpleCharacterTypeOperation=m;class h{static getEdits(H,K,U,Y,Q){if(!Q&&Y===`
`){const X=[];for(let G=0,P=U.length;G<P;G++)X[G]=this._enter(H,K,!1,U[G]);return new f.EditOperationResult(4,X,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(H,K,U,Y){if(H.autoIndent===0)return x(Y,`
`,U);if(!K.tokenization.isCheapToTokenize(Y.getStartPosition().lineNumber)||H.autoIndent===1){const P=K.getLineContent(Y.startLineNumber),te=k.getLeadingWhitespace(P).substring(0,Y.startColumn-1);return x(Y,`
`+H.normalizeIndentation(te),U)}const Q=(0,o.getEnterAction)(H.autoIndent,K,Y,H.languageConfigurationService);if(Q){if(Q.indentAction===n.IndentAction.None)return x(Y,`
`+H.normalizeIndentation(Q.indentation+Q.appendText),U);if(Q.indentAction===n.IndentAction.Indent)return x(Y,`
`+H.normalizeIndentation(Q.indentation+Q.appendText),U);if(Q.indentAction===n.IndentAction.IndentOutdent){const P=H.normalizeIndentation(Q.indentation),te=H.normalizeIndentation(Q.indentation+Q.appendText),se=`
`+te+`
`+P;return U?new E.ReplaceCommandWithoutChangingPosition(Y,se,!0):new E.ReplaceCommandWithOffsetCursorState(Y,se,-1,te.length-P.length,!0)}else if(Q.indentAction===n.IndentAction.Outdent){const P=W(H,Q.indentation);return x(Y,`
`+H.normalizeIndentation(P+Q.appendText),U)}}const X=K.getLineContent(Y.startLineNumber),G=k.getLeadingWhitespace(X).substring(0,Y.startColumn-1);if(H.autoIndent>=4){const P=(0,i.getIndentForEnter)(H.autoIndent,K,Y,{unshiftIndent:te=>W(H,te),shiftIndent:te=>F(H,te),normalizeIndentation:te=>H.normalizeIndentation(te)},H.languageConfigurationService);if(P){let te=H.visibleColumnFromColumn(K,Y.getEndPosition());const se=Y.endColumn,ue=K.getLineContent(Y.endLineNumber),ge=k.firstNonWhitespaceIndex(ue);if(ge>=0?Y=Y.setEndPosition(Y.endLineNumber,Math.max(Y.endColumn,ge+1)):Y=Y.setEndPosition(Y.endLineNumber,K.getLineMaxColumn(Y.endLineNumber)),U)return new E.ReplaceCommandWithoutChangingPosition(Y,`
`+H.normalizeIndentation(P.afterEnter),!0);{let pe=0;return se<=ge+1&&(H.insertSpaces||(te=Math.ceil(te/H.indentSize)),pe=Math.min(te+1-H.normalizeIndentation(P.afterEnter).length-1,0)),new E.ReplaceCommandWithOffsetCursorState(Y,`
`+H.normalizeIndentation(P.afterEnter),0,pe,!0)}}}return x(Y,`
`+H.normalizeIndentation(G),U)}static lineInsertBefore(H,K,U){if(K===null||U===null)return[];const Y=[];for(let Q=0,X=U.length;Q<X;Q++){let G=U[Q].positionLineNumber;if(G===1)Y[Q]=new E.ReplaceCommandWithoutChangingPosition(new b.Range(1,1,1,1),`
`);else{G--;const P=K.getLineMaxColumn(G);Y[Q]=this._enter(H,K,!1,new b.Range(G,P,G,P))}}return Y}static lineInsertAfter(H,K,U){if(K===null||U===null)return[];const Y=[];for(let Q=0,X=U.length;Q<X;Q++){const G=U[Q].positionLineNumber,P=K.getLineMaxColumn(G);Y[Q]=this._enter(H,K,!1,new b.Range(G,P,G,P))}return Y}static lineBreakInsert(H,K,U){const Y=[];for(let Q=0,X=U.length;Q<X;Q++)Y[Q]=this._enter(H,K,!0,U[Q]);return Y}}e.EnterOperation=h;class v{static getEdits(H,K,U,Y,Q,X){const G=this._distributePasteToCursors(H,U,Y,Q,X);return G?(U=U.sort(b.Range.compareRangesUsingStarts),this._distributedPaste(H,K,U,G)):this._simplePaste(H,K,U,Y,Q)}static _distributePasteToCursors(H,K,U,Y,Q){if(Y||K.length===1)return null;if(Q&&Q.length===K.length)return Q;if(H.multiCursorPaste==="spread"){U.charCodeAt(U.length-1)===10&&(U=U.substring(0,U.length-1)),U.charCodeAt(U.length-1)===13&&(U=U.substring(0,U.length-1));const X=k.splitLines(U);if(X.length===K.length)return X}return null}static _distributedPaste(H,K,U,Y){const Q=[];for(let X=0,G=U.length;X<G;X++)Q[X]=new E.ReplaceCommand(U[X],Y[X]);return new f.EditOperationResult(0,Q,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(H,K,U,Y,Q){const X=[];for(let G=0,P=U.length;G<P;G++){const te=U[G],se=te.getPosition();if(Q&&!te.isEmpty()&&(Q=!1),Q&&Y.indexOf(`
`)!==Y.length-1&&(Q=!1),Q){const ue=new b.Range(se.lineNumber,1,se.lineNumber,1);X[G]=new E.ReplaceCommandThatPreservesSelection(ue,Y,te,!0)}else X[G]=new E.ReplaceCommand(te,Y)}return new f.EditOperationResult(0,X,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}}e.PasteOperation=v;class C{static getEdits(H,K,U,Y,Q,X,G,P){const te=Y.map(se=>this._compositionType(U,se,Q,X,G,P));return new f.EditOperationResult(4,te,{shouldPushStackElementBefore:A(H,4),shouldPushStackElementAfter:!1})}static _compositionType(H,K,U,Y,Q,X){if(!K.isEmpty())return null;const G=K.getPosition(),P=Math.max(1,G.column-Y),te=Math.min(H.getLineMaxColumn(G.lineNumber),G.column+Q),se=new b.Range(G.lineNumber,P,G.lineNumber,te);return H.getValueInRange(se)===U&&X===0?null:new E.ReplaceCommandWithOffsetCursorState(se,U,0,X)}}e.CompositionOperation=C;class w{static getEdits(H,K,U){const Y=[];for(let X=0,G=K.length;X<G;X++)Y[X]=new E.ReplaceCommand(K[X],U);const Q=M(U,H);return new f.EditOperationResult(Q,Y,{shouldPushStackElementBefore:A(H,Q),shouldPushStackElementAfter:!1})}}e.TypeWithoutInterceptorsOperation=w;class S{static getCommands(H,K,U){const Y=[];for(let Q=0,X=U.length;Q<X;Q++){const G=U[Q];if(G.isEmpty()){const P=K.getLineContent(G.startLineNumber);if(/^\s*$/.test(P)&&K.tokenization.isCheapToTokenize(G.startLineNumber)){let te=this._goodIndentForLine(H,K,G.startLineNumber);te=te||"	";const se=H.normalizeIndentation(te);if(!P.startsWith(se)){Y[Q]=new E.ReplaceCommand(new b.Range(G.startLineNumber,1,G.startLineNumber,P.length+1),se,!0);continue}}Y[Q]=this._replaceJumpToNextIndent(H,K,G,!0)}else{if(G.startLineNumber===G.endLineNumber){const P=K.getLineMaxColumn(G.startLineNumber);if(G.startColumn!==1||G.endColumn!==P){Y[Q]=this._replaceJumpToNextIndent(H,K,G,!1);continue}}Y[Q]=new L.ShiftCommand(G,{isUnshift:!1,tabSize:H.tabSize,indentSize:H.indentSize,insertSpaces:H.insertSpaces,useTabStops:H.useTabStops,autoIndent:H.autoIndent},H.languageConfigurationService)}}return Y}static _goodIndentForLine(H,K,U){let Y=null,Q="";const X=(0,i.getInheritIndentForLine)(H.autoIndent,K,U,!1,H.languageConfigurationService);if(X)Y=X.action,Q=X.indentation;else if(U>1){let G;for(G=U-1;G>=1;G--){const se=K.getLineContent(G);if(k.lastNonWhitespaceIndex(se)>=0)break}if(G<1)return null;const P=K.getLineMaxColumn(G),te=(0,o.getEnterAction)(H.autoIndent,K,new b.Range(G,P,G,P),H.languageConfigurationService);te&&(Q=te.indentation+te.appendText)}return Y&&(Y===n.IndentAction.Indent&&(Q=F(H,Q)),Y===n.IndentAction.Outdent&&(Q=W(H,Q)),Q=H.normalizeIndentation(Q)),Q||null}static _replaceJumpToNextIndent(H,K,U,Y){let Q="";const X=U.getStartPosition();if(H.insertSpaces){const G=H.visibleColumnFromColumn(K,X),P=H.indentSize,te=P-G%P;for(let se=0;se<te;se++)Q+=" "}else Q="	";return new E.ReplaceCommand(U,Q,Y)}}e.TabOperation=S;class D extends E.ReplaceCommandWithOffsetCursorState{constructor(H,K,U,Y,Q,X){super(H,K,U,Y),this._openCharacter=Q,this._closeCharacter=X,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(H,K,U){return this.closeCharacterRange=new b.Range(K.startLineNumber,K.endColumn-this._closeCharacter.length,K.endLineNumber,K.endColumn),this.enclosingRange=new b.Range(K.startLineNumber,K.endColumn-this._openCharacter.length-this._closeCharacter.length,K.endLineNumber,K.endColumn),super.computeCursorState(H,U)}}e.BaseTypeWithAutoClosingCommand=D;class I extends D{constructor(H,K,U,Y){const Q=(U?K:"")+Y,X=0,G=-Y.length;super(H,Q,X,G,K,Y)}computeCursorState(H,K){const Y=K.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(H,Y,K)}}class T extends D{constructor(H,K,U,Y){const Q=U+Y,X=0,G=U.length;super(K,Q,X,G,U,Y),this._autoIndentationEdit=H,this._autoClosingEdit={range:K,text:Q}}getEditOperations(H,K){K.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),K.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(H,K){const U=K.getInverseEditOperations();if(U.length!==2)throw new Error("There should be two inverse edit operations!");const Y=U[0].range,Q=U[1].range,X=Y.plusRange(Q);return this._computeCursorStateWithRange(H,X,K)}}function M(q,H){return q===" "?H===5||H===6?6:5:4}function A(q,H){return N(q)&&!N(H)?!0:q===5?!1:R(q)!==R(H)}function R(q){return q===6||q===5?"space":q}function N(q){return q===4||q===5||q===6}function O(q,H,K,U,Y){if(q.autoClosingOvertype==="never"||!q.autoClosingPairs.autoClosingPairsCloseSingleChar.has(Y))return!1;for(let Q=0,X=K.length;Q<X;Q++){const G=K[Q];if(!G.isEmpty())return!1;const P=G.getPosition(),te=H.getLineContent(P.lineNumber);if(te.charAt(P.column-1)!==Y)return!1;const ue=(0,f.isQuote)(Y);if((P.column>2?te.charCodeAt(P.column-2):0)===92&&ue)return!1;if(q.autoClosingOvertype==="auto"){let pe=!1;for(let ce=0,ie=U.length;ce<ie;ce++){const ne=U[ce];if(P.lineNumber===ne.startLineNumber&&P.column===ne.startColumn){pe=!0;break}}if(!pe)return!1}}return!0}function x(q,H,K){return K?new E.ReplaceCommandWithoutChangingPosition(q,H,!0):new E.ReplaceCommand(q,H,!0)}function F(q,H,K){return K=K||1,L.ShiftCommand.shiftIndent(H,H.length+K,q.tabSize,q.indentSize,q.insertSpaces)}function W(q,H,K){return K=K||1,L.ShiftCommand.unshiftIndent(H,H.length+K,q.tabSize,q.indentSize,q.insertSpaces)}function z(q,H){return(0,f.isQuote)(H)?q.autoSurround==="quotes"||q.autoSurround==="languageDefined":q.autoSurround==="brackets"||q.autoSurround==="languageDefined"}}),define(oe[275],re([1,0,183,325,77,211]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionOutcome=e.TypeOperations=void 0;class y{static indent(b,p,n){if(p===null||n===null)return[];const s=[];for(let t=0,i=n.length;t<i;t++)s[t]=new c.ShiftCommand(n[t],{isUnshift:!1,tabSize:b.tabSize,indentSize:b.indentSize,insertSpaces:b.insertSpaces,useTabStops:b.useTabStops,autoIndent:b.autoIndent},b.languageConfigurationService);return s}static outdent(b,p,n){const s=[];for(let t=0,i=n.length;t<i;t++)s[t]=new c.ShiftCommand(n[t],{isUnshift:!0,tabSize:b.tabSize,indentSize:b.indentSize,insertSpaces:b.insertSpaces,useTabStops:b.useTabStops,autoIndent:b.autoIndent},b.languageConfigurationService);return s}static paste(b,p,n,s,t,i){return L.PasteOperation.getEdits(b,p,n,s,t,i)}static tab(b,p,n){return L.TabOperation.getCommands(b,p,n)}static compositionType(b,p,n,s,t,i,o,g){return L.CompositionOperation.getEdits(b,p,n,s,t,i,o,g)}static compositionEndWithInterceptors(b,p,n,s,t,i){if(!s)return null;let o=null;for(const r of s)if(o===null)o=r.insertedText;else if(o!==r.insertedText)return null;if(!o||o.length!==1)return null;const g=o;let u=!1;for(const r of s)if(r.deletedText.length!==0){u=!0;break}if(u){if(!(0,L.shouldSurroundChar)(p,g)||!p.surroundingPairs.hasOwnProperty(g))return null;const r=(0,E.isQuote)(g);for(const h of s)if(h.deletedSelectionStart!==0||h.deletedSelectionEnd!==h.deletedText.length||/^[ \t]+$/.test(h.deletedText)||r&&(0,E.isQuote)(h.deletedText))return null;const d=[];for(const h of t){if(!h.isEmpty())return null;d.push(h.getPosition())}if(d.length!==s.length)return null;const m=[];for(let h=0,v=d.length;h<v;h++)m.push(new k.CompositionSurroundSelectionCommand(d[h],s[h].deletedText,p.surroundingPairs[g]));return new E.EditOperationResult(4,m,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}const l=L.AutoClosingOvertypeWithInterceptorsOperation.getEdits(p,n,t,i,g);if(l!==void 0)return l;const a=L.AutoClosingOpenCharTypeOperation.getEdits(p,n,t,g,!0,!1);return a!==void 0?a:null}static typeWithInterceptors(b,p,n,s,t,i,o){const g=L.EnterOperation.getEdits(n,s,t,o,b);if(g!==void 0)return g;const u=L.AutoIndentOperation.getEdits(n,s,t,o,b);if(u!==void 0)return u;const l=L.AutoClosingOvertypeOperation.getEdits(p,n,s,t,i,o);if(l!==void 0)return l;const a=L.AutoClosingOpenCharTypeOperation.getEdits(n,s,t,o,!1,b);if(a!==void 0)return a;const r=L.SurroundSelectionOperation.getEdits(n,s,t,o,b);if(r!==void 0)return r;const d=L.InterceptorElectricCharOperation.getEdits(p,n,s,t,o,b);return d!==void 0?d:L.SimpleCharacterTypeOperation.getEdits(p,t,o)}static typeWithoutInterceptors(b,p,n,s,t){return L.TypeWithoutInterceptorsOperation.getEdits(b,s,t)}}e.TypeOperations=y;class f{constructor(b,p,n,s,t,i){this.deletedText=b,this.deletedSelectionStart=p,this.deletedSelectionEnd=n,this.insertedText=s,this.insertedSelectionStart=t,this.insertedSelectionEnd=i}}e.CompositionOutcome=f}),define(oe[699],re([1,0,8,11,578,77,567,245,275,211,4,23,131,254,2,255]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorsController=void 0;class g extends i.Disposable{constructor(h,v,C,w){super(),this._model=h,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=v,this._coordinatesConverter=C,this.context=new y.CursorContext(this._model,this._viewModel,this._coordinatesConverter,w),this._cursors=new E.CursorCollection(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=(0,i.dispose)(this._autoClosedActions),super.dispose()}updateConfiguration(h){this.context=new y.CursorContext(this._model,this._viewModel,this._coordinatesConverter,h),this._cursors.updateContext(this.context)}onLineMappingChanged(h){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(h,"viewModel",0,this.getCursorStates())}setHasFocus(h){this._hasFocus=h}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){const h=this._cursors.getSelections();for(let v=0;v<this._autoClosedActions.length;v++){const C=this._autoClosedActions[v];C.isValid(h)||(C.dispose(),this._autoClosedActions.splice(v,1),v--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(h,v,C,w){let S=!1;const D=this.context.cursorConfig.multiCursorLimit;w!==null&&w.length>D&&(w=w.slice(0,D),S=!0);const I=u.from(this._model,this);return this._cursors.setStates(w),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(h,v,C,I,S)}setCursorColumnSelectData(h){this._columnSelectData=h}revealAll(h,v,C,w,S,D){const I=this._cursors.getViewPositions();let T=null,M=null;I.length>1?M=this._cursors.getViewSelections():T=p.Range.fromPositions(I[0],I[0]),h.emitViewEvent(new t.ViewRevealRangeRequestEvent(v,C,T,M,w,S,D))}revealPrimary(h,v,C,w,S,D){const T=[this._cursors.getPrimaryCursor().viewState.selection];h.emitViewEvent(new t.ViewRevealRangeRequestEvent(v,C,null,T,w,S,D))}saveState(){const h=[],v=this._cursors.getSelections();for(let C=0,w=v.length;C<w;C++){const S=v[C];h.push({inSelectionMode:!S.isEmpty(),selectionStart:{lineNumber:S.selectionStartLineNumber,column:S.selectionStartColumn},position:{lineNumber:S.positionLineNumber,column:S.positionColumn}})}return h}restoreState(h,v){const C=[];for(let w=0,S=v.length;w<S;w++){const D=v[w];let I=1,T=1;D.position&&D.position.lineNumber&&(I=D.position.lineNumber),D.position&&D.position.column&&(T=D.position.column);let M=I,A=T;D.selectionStart&&D.selectionStart.lineNumber&&(M=D.selectionStart.lineNumber),D.selectionStart&&D.selectionStart.column&&(A=D.selectionStart.column),C.push({selectionStartLineNumber:M,selectionStartColumn:A,positionLineNumber:I,positionColumn:T})}this.setStates(h,"restoreState",0,L.CursorState.fromModelSelections(C)),this.revealAll(h,"restoreState",!1,0,!0,1)}onModelContentChanged(h,v){if(v instanceof s.ModelInjectedTextChangedEvent){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(h,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{const C=v.rawContentChangedEvent;if(this._knownModelVersionId=C.versionId,this._isHandling)return;const w=C.containsEvent(1);if(this._prevEditOperationType=0,w)this._cursors.dispose(),this._cursors=new E.CursorCollection(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(h,"model",1,null,!1);else if(this._hasFocus&&C.resultingSelection&&C.resultingSelection.length>0){const S=L.CursorState.fromModelSelections(C.resultingSelection);this.setStates(h,"modelChange",C.isUndoing?5:C.isRedoing?6:2,S)&&this.revealAll(h,"modelChange",!1,0,!0,0)}else{const S=this._cursors.readSelectionFromMarkers();this.setStates(h,"modelChange",2,L.CursorState.fromModelSelections(S))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;const h=this._cursors.getPrimaryCursor(),v=h.viewState.selectionStart.getStartPosition(),C=h.viewState.position;return{isReal:!1,fromViewLineNumber:v.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,v),toViewLineNumber:C.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,C)}}getSelections(){return this._cursors.getSelections()}setSelections(h,v,C,w){this.setStates(h,v,w,L.CursorState.fromModelSelections(C))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(h){this._prevEditOperationType=h}_pushAutoClosedAction(h,v){const C=[],w=[];for(let I=0,T=h.length;I<T;I++)C.push({range:h[I],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),w.push({range:v[I],options:{description:"auto-closed-enclosing",stickiness:1}});const S=this._model.deltaDecorations([],C),D=this._model.deltaDecorations([],w);this._autoClosedActions.push(new l(this._model,S,D))}_executeEditOperation(h){if(!h)return;h.shouldPushStackElementBefore&&this._model.pushStackElement();const v=a.executeCommands(this._model,this._cursors.getSelections(),h.commands);if(v){this._interpretCommandResult(v);const C=[],w=[];for(let S=0;S<h.commands.length;S++){const D=h.commands[S];D instanceof b.BaseTypeWithAutoClosingCommand&&D.enclosingRange&&D.closeCharacterRange&&(C.push(D.closeCharacterRange),w.push(D.enclosingRange))}C.length>0&&this._pushAutoClosedAction(C,w),this._prevEditOperationType=h.type}h.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(h){(!h||h.length===0)&&(h=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(h),this._cursors.normalize()}_emitStateChangedIfNecessary(h,v,C,w,S){const D=u.from(this._model,this);if(D.equals(w))return!1;const I=this._cursors.getSelections(),T=this._cursors.getViewSelections();if(h.emitViewEvent(new t.ViewCursorStateChangedEvent(T,I,C)),!w||w.cursorState.length!==D.cursorState.length||D.cursorState.some((M,A)=>!M.modelState.equals(w.cursorState[A].modelState))){const M=w?w.cursorState.map(R=>R.modelState.selection):null,A=w?w.modelVersionId:0;h.emitOutgoingEvent(new o.CursorStateChangedEvent(M,I,A,D.modelVersionId,v||"keyboard",C,S))}return!0}_findAutoClosingPairs(h){if(!h.length)return null;const v=[];for(let C=0,w=h.length;C<w;C++){const S=h[C];if(!S.text||S.text.indexOf(`
`)>=0)return null;const D=S.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!D)return null;const I=D[1],T=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(I);if(!T||T.length!==1)return null;const M=T[0].open,A=S.text.length-D[2].length-1,R=S.text.lastIndexOf(M,A-1);if(R===-1)return null;v.push([R,A])}return v}executeEdits(h,v,C,w){let S=null;v==="snippet"&&(S=this._findAutoClosingPairs(C)),S&&(C[0]._isTracked=!0);const D=[],I=[],T=this._model.pushEditOperations(this.getSelections(),C,M=>{if(S)for(let R=0,N=S.length;R<N;R++){const[O,x]=S[R],F=M[R],W=F.range.startLineNumber,z=F.range.startColumn-1+O,q=F.range.startColumn-1+x;D.push(new p.Range(W,q+1,W,q+2)),I.push(new p.Range(W,z+1,W,q+2))}const A=w(M);return A&&(this._isHandling=!0),A});T&&(this._isHandling=!1,this.setSelections(h,v,T,0)),D.length>0&&this._pushAutoClosedAction(D,I)}_executeEdit(h,v,C,w=0){if(this.context.cursorConfig.readOnly)return;const S=u.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),h()}catch(D){(0,c.onUnexpectedError)(D)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(v,C,w,S,!1)&&this.revealAll(v,C,!1,0,!0,0)}getAutoClosedCharacters(){return l.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(h){this._compositionState=new d(this._model,this.getSelections())}endComposition(h,v){const C=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{v==="keyboard"&&this._executeEditOperation(_.TypeOperations.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,C,this.getSelections(),this.getAutoClosedCharacters()))},h,v)}type(h,v,C){this._executeEdit(()=>{if(C==="keyboard"){const w=v.length;let S=0;for(;S<w;){const D=k.nextCharLength(v,S),I=v.substr(S,D);this._executeEditOperation(_.TypeOperations.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),I)),S+=D}}else this._executeEditOperation(_.TypeOperations.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),v))},h,C)}compositionType(h,v,C,w,S,D){if(v.length===0&&C===0&&w===0){if(S!==0){const I=this.getSelections().map(T=>{const M=T.getPosition();return new n.Selection(M.lineNumber,M.column+S,M.lineNumber,M.column+S)});this.setSelections(h,D,I,0)}return}this._executeEdit(()=>{this._executeEditOperation(_.TypeOperations.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),v,C,w,S))},h,D)}paste(h,v,C,w,S){this._executeEdit(()=>{this._executeEditOperation(_.TypeOperations.paste(this.context.cursorConfig,this._model,this.getSelections(),v,C,w||[]))},h,S,4)}cut(h,v){this._executeEdit(()=>{this._executeEditOperation(f.DeleteOperations.cut(this.context.cursorConfig,this._model,this.getSelections()))},h,v)}executeCommand(h,v,C){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new L.EditOperationResult(0,[v],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},h,C)}executeCommands(h,v,C){this._executeEdit(()=>{this._executeEditOperation(new L.EditOperationResult(0,v,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},h,C)}}e.CursorsController=g;class u{static from(h,v){return new u(h.getVersionId(),v.getCursorStates())}constructor(h,v){this.modelVersionId=h,this.cursorState=v}equals(h){if(!h||this.modelVersionId!==h.modelVersionId||this.cursorState.length!==h.cursorState.length)return!1;for(let v=0,C=this.cursorState.length;v<C;v++)if(!this.cursorState[v].equals(h.cursorState[v]))return!1;return!0}}class l{static getAllAutoClosedCharacters(h){let v=[];for(const C of h)v=v.concat(C.getAutoClosedCharactersRanges());return v}constructor(h,v,C){this._model=h,this._autoClosedCharactersDecorations=v,this._autoClosedEnclosingDecorations=C}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){const h=[];for(let v=0;v<this._autoClosedCharactersDecorations.length;v++){const C=this._model.getDecorationRange(this._autoClosedCharactersDecorations[v]);C&&h.push(C)}return h}isValid(h){const v=[];for(let C=0;C<this._autoClosedEnclosingDecorations.length;C++){const w=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[C]);if(w&&(v.push(w),w.startLineNumber!==w.endLineNumber))return!1}v.sort(p.Range.compareRangesUsingStarts),h.sort(p.Range.compareRangesUsingStarts);for(let C=0;C<h.length;C++)if(C>=v.length||!v[C].strictContainsRange(h[C]))return!1;return!0}}class a{static executeCommands(h,v,C){const w={model:h,selectionsBefore:v,trackedRanges:[],trackedRangesDirection:[]},S=this._innerExecuteCommands(w,C);for(let D=0,I=w.trackedRanges.length;D<I;D++)w.model._setTrackedRange(w.trackedRanges[D],null,0);return S}static _innerExecuteCommands(h,v){if(this._arrayIsEmpty(v))return null;const C=this._getEditOperations(h,v);if(C.operations.length===0)return null;const w=C.operations,S=this._getLoserCursorMap(w);if(S.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;const D=[];for(let M=0,A=w.length;M<A;M++)S.hasOwnProperty(w[M].identifier.major.toString())||D.push(w[M]);C.hadTrackedEditOperation&&D.length>0&&(D[0]._isTracked=!0);let I=h.model.pushEditOperations(h.selectionsBefore,D,M=>{const A=[];for(let O=0;O<h.selectionsBefore.length;O++)A[O]=[];for(const O of M)O.identifier&&A[O.identifier.major].push(O);const R=(O,x)=>O.identifier.minor-x.identifier.minor,N=[];for(let O=0;O<h.selectionsBefore.length;O++)A[O].length>0?(A[O].sort(R),N[O]=v[O].computeCursorState(h.model,{getInverseEditOperations:()=>A[O],getTrackedSelection:x=>{const F=parseInt(x,10),W=h.model._getTrackedRange(h.trackedRanges[F]);return h.trackedRangesDirection[F]===0?new n.Selection(W.startLineNumber,W.startColumn,W.endLineNumber,W.endColumn):new n.Selection(W.endLineNumber,W.endColumn,W.startLineNumber,W.startColumn)}})):N[O]=h.selectionsBefore[O];return N});I||(I=h.selectionsBefore);const T=[];for(const M in S)S.hasOwnProperty(M)&&T.push(parseInt(M,10));T.sort((M,A)=>A-M);for(const M of T)I.splice(M,1);return I}static _arrayIsEmpty(h){for(let v=0,C=h.length;v<C;v++)if(h[v])return!1;return!0}static _getEditOperations(h,v){let C=[],w=!1;for(let S=0,D=v.length;S<D;S++){const I=v[S];if(I){const T=this._getEditOperationsFromCommand(h,S,I);C=C.concat(T.operations),w=w||T.hadTrackedEditOperation}}return{operations:C,hadTrackedEditOperation:w}}static _getEditOperationsFromCommand(h,v,C){const w=[];let S=0;const D=(R,N,O=!1)=>{p.Range.isEmpty(R)&&N===""||w.push({identifier:{major:v,minor:S++},range:R,text:N,forceMoveMarkers:O,isAutoWhitespaceEdit:C.insertsAutoWhitespace})};let I=!1;const A={addEditOperation:D,addTrackedEditOperation:(R,N,O)=>{I=!0,D(R,N,O)},trackSelection:(R,N)=>{const O=n.Selection.liftSelection(R);let x;if(O.isEmpty())if(typeof N=="boolean")N?x=2:x=3;else{const z=h.model.getLineMaxColumn(O.startLineNumber);O.startColumn===z?x=2:x=3}else x=1;const F=h.trackedRanges.length,W=h.model._setTrackedRange(null,O,x);return h.trackedRanges[F]=W,h.trackedRangesDirection[F]=O.getDirection(),F.toString()}};try{C.getEditOperations(h.model,A)}catch(R){return(0,c.onUnexpectedError)(R),{operations:[],hadTrackedEditOperation:!1}}return{operations:w,hadTrackedEditOperation:I}}static _getLoserCursorMap(h){h=h.slice(0),h.sort((C,w)=>-p.Range.compareRangesUsingEnds(C.range,w.range));const v={};for(let C=1;C<h.length;C++){const w=h[C-1],S=h[C];if(p.Range.getStartPosition(w.range).isBefore(p.Range.getEndPosition(S.range))){let D;w.identifier.major>S.identifier.major?D=w.identifier.major:D=S.identifier.major,v[D.toString()]=!0;for(let I=0;I<h.length;I++)h[I].identifier.major===D&&(h.splice(I,1),I<C&&C--,I--);C>0&&C--}}return v}}class r{constructor(h,v,C){this.text=h,this.startSelection=v,this.endSelection=C}}class d{static _capture(h,v){const C=[];for(const w of v){if(w.startLineNumber!==w.endLineNumber)return null;C.push(new r(h.getLineContent(w.startLineNumber),w.startColumn-1,w.endColumn-1))}return C}constructor(h,v){this._original=d._capture(h,v)}deduceOutcome(h,v){if(!this._original)return null;const C=d._capture(h,v);if(!C||this._original.length!==C.length)return null;const w=[];for(let S=0,D=this._original.length;S<D;S++)w.push(d._deduceOutcome(this._original[S],C[S]));return w}static _deduceOutcome(h,v){const C=Math.min(h.startSelection,v.startSelection,k.commonPrefixLength(h.text,v.text)),w=Math.min(h.text.length-h.endSelection,v.text.length-v.endSelection,k.commonSuffixLength(h.text,v.text)),S=h.text.substring(C,h.text.length-w),D=v.text.substring(C,v.text.length-w);return new _.CompositionOutcome(S,h.startSelection-C,h.endSelection-C,D,v.startSelection-C,v.endSelection-C)}}}),define(oe[700],re([1,0,47,51,22,70,378,30]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getIconClasses=b;const _=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function b(s,t,i,o,g){if(f.ThemeIcon.isThemeIcon(g))return[`codicon-${g.id}`,"predefined-file-icon"];if(E.URI.isUri(g))return[];const u=o===y.FileKind.ROOT_FOLDER?["rootfolder-icon"]:o===y.FileKind.FOLDER?["folder-icon"]:["file-icon"];if(i){let l;if(i.scheme===c.Schemas.data)l=k.DataUri.parseMetaData(i).get(k.DataUri.META_DATA_LABEL);else{const a=i.path.match(_);a?(l=n(a[2].toLowerCase()),a[1]&&u.push(`${n(a[1].toLowerCase())}-name-dir-icon`)):l=n(i.authority.toLowerCase())}if(o===y.FileKind.ROOT_FOLDER)u.push(`${l}-root-name-folder-icon`);else if(o===y.FileKind.FOLDER)u.push(`${l}-name-folder-icon`);else{if(l){if(u.push(`${l}-name-file-icon`),u.push("name-file-icon"),l.length<=255){const r=l.split(".");for(let d=1;d<r.length;d++)u.push(`${r.slice(d).join(".")}-ext-file-icon`)}u.push("ext-file-icon")}const a=p(s,t,i);a&&u.push(`${n(a)}-lang-file-icon`)}}return u}function p(s,t,i){if(!i)return null;let o=null;if(i.scheme===c.Schemas.data){const u=k.DataUri.parseMetaData(i).get(k.DataUri.META_DATA_MIME);u&&(o=t.getLanguageIdByMimeType(u))}else{const g=s.getModel(i);g&&(o=g.getLanguageId())}return o&&o!==L.PLAINTEXT_LANGUAGE_ID?o:t.guessLanguageIdByFilepathOrFirstLine(i)}function n(s){return s.replace(/[\x11\x12\x14\x15\x40]/g,"/")}}),define(oe[701],re([1,0,304,128,47,99,51,11,70]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerPlatformLanguageAssociation=s,e.clearPlatformLanguageAssociations=o,e.getLanguageIds=g;let b=[],p=[],n=[];function s(r,d=!1){t(r,!1,d)}function t(r,d,m){const h=i(r,d);b.push(h),h.userConfigured?n.push(h):p.push(h),m&&!h.userConfigured&&b.forEach(v=>{v.mime===h.mime||v.userConfigured||(h.extension&&v.extension===h.extension&&console.warn(`Overwriting extension <<${h.extension}>> to now point to mime <<${h.mime}>>`),h.filename&&v.filename===h.filename&&console.warn(`Overwriting filename <<${h.filename}>> to now point to mime <<${h.mime}>>`),h.filepattern&&v.filepattern===h.filepattern&&console.warn(`Overwriting filepattern <<${h.filepattern}>> to now point to mime <<${h.mime}>>`),h.firstline&&v.firstline===h.firstline&&console.warn(`Overwriting firstline <<${h.firstline}>> to now point to mime <<${h.mime}>>`))})}function i(r,d){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:d,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?(0,c.parse)(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(L.posix.sep)>=0:!1}}function o(){b=b.filter(r=>r.userConfigured),p=[]}function g(r,d){return u(r,d).map(m=>m.id)}function u(r,d){let m;if(r)switch(r.scheme){case E.Schemas.file:m=r.fsPath;break;case E.Schemas.data:{m=y.DataUri.parseMetaData(r).get(y.DataUri.META_DATA_LABEL);break}case E.Schemas.vscodeNotebookCell:m=void 0;break;default:m=r.path}if(!m)return[{id:"unknown",mime:k.Mimes.unknown}];m=m.toLowerCase();const h=(0,L.basename)(m),v=l(m,h,n);if(v)return[v,{id:_.PLAINTEXT_LANGUAGE_ID,mime:k.Mimes.text}];const C=l(m,h,p);if(C)return[C,{id:_.PLAINTEXT_LANGUAGE_ID,mime:k.Mimes.text}];if(d){const w=a(d);if(w)return[w,{id:_.PLAINTEXT_LANGUAGE_ID,mime:k.Mimes.text}]}return[{id:"unknown",mime:k.Mimes.unknown}]}function l(r,d,m){let h,v,C;for(let w=m.length-1;w>=0;w--){const S=m[w];if(d===S.filenameLowercase){h=S;break}if(S.filepattern&&(!v||S.filepattern.length>v.filepattern.length)){const D=S.filepatternOnPath?r:d;S.filepatternLowercase?.(D)&&(v=S)}S.extension&&(!C||S.extension.length>C.extension.length)&&d.endsWith(S.extensionLowercase)&&(C=S)}if(h)return h;if(v)return v;if(C)return C}function a(r){if((0,f.startsWithUTF8BOM)(r)&&(r=r.substr(1)),r.length>0)for(let d=b.length-1;d>=0;d--){const m=b[d];if(!m.firstline)continue;const h=r.match(m.firstline);if(h&&h.length>0)return m}}}),define(oe[702],re([1,0,6,2,11,701,70,108,38]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguagesRegistry=e.LanguageIdCodec=void 0;const b=Object.prototype.hasOwnProperty,p="vs.editor.nullLanguage";class n{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(p,0),this._register(y.PLAINTEXT_LANGUAGE_ID,1),this._nextLanguageId=2}_register(i,o){this._languageIdToLanguage[o]=i,this._languageToLanguageId.set(i,o)}register(i){if(this._languageToLanguageId.has(i))return;const o=this._nextLanguageId++;this._register(i,o)}encodeLanguageId(i){return this._languageToLanguageId.get(i)||0}decodeLanguageId(i){return this._languageIdToLanguage[i]||p}}e.LanguageIdCodec=n;class s extends k.Disposable{static{this.instanceCount=0}constructor(i=!0,o=!1){super(),this._onDidChange=this._register(new c.Emitter),this.onDidChange=this._onDidChange.event,s.instanceCount++,this._warnOnOverwrite=o,this.languageIdCodec=new n,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},i&&(this._initializeFromRegistry(),this._register(y.ModesRegistry.onDidChangeLanguages(g=>{this._initializeFromRegistry()})))}dispose(){s.instanceCount--,super.dispose()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},(0,L.clearPlatformLanguageAssociations)();const i=[].concat(y.ModesRegistry.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(i)}_registerLanguages(i){for(const o of i)this._registerLanguage(o);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(o=>{const g=this._languages[o];g.name&&(this._nameMap[g.name]=g.identifier),g.aliases.forEach(u=>{this._lowercaseNameMap[u.toLowerCase()]=g.identifier}),g.mimetypes.forEach(u=>{this._mimeTypesMap[u]=g.identifier})}),_.Registry.as(f.Extensions.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(i){const o=i.id;let g;b.call(this._languages,o)?g=this._languages[o]:(this.languageIdCodec.register(o),g={identifier:o,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[o]=g),this._mergeLanguage(g,i)}_mergeLanguage(i,o){const g=o.id;let u=null;if(Array.isArray(o.mimetypes)&&o.mimetypes.length>0&&(i.mimetypes.push(...o.mimetypes),u=o.mimetypes[0]),u||(u=`text/x-${g}`,i.mimetypes.push(u)),Array.isArray(o.extensions)){o.configuration?i.extensions=o.extensions.concat(i.extensions):i.extensions=i.extensions.concat(o.extensions);for(const r of o.extensions)(0,L.registerPlatformLanguageAssociation)({id:g,mime:u,extension:r},this._warnOnOverwrite)}if(Array.isArray(o.filenames))for(const r of o.filenames)(0,L.registerPlatformLanguageAssociation)({id:g,mime:u,filename:r},this._warnOnOverwrite),i.filenames.push(r);if(Array.isArray(o.filenamePatterns))for(const r of o.filenamePatterns)(0,L.registerPlatformLanguageAssociation)({id:g,mime:u,filepattern:r},this._warnOnOverwrite);if(typeof o.firstLine=="string"&&o.firstLine.length>0){let r=o.firstLine;r.charAt(0)!=="^"&&(r="^"+r);try{const d=new RegExp(r);(0,E.regExpLeadsToEndlessLoop)(d)||(0,L.registerPlatformLanguageAssociation)({id:g,mime:u,firstline:d},this._warnOnOverwrite)}catch(d){console.warn(`[${o.id}]: Invalid regular expression \`${r}\`: `,d)}}i.aliases.push(g);let l=null;if(typeof o.aliases<"u"&&Array.isArray(o.aliases)&&(o.aliases.length===0?l=[null]:l=o.aliases),l!==null)for(const r of l)!r||r.length===0||i.aliases.push(r);const a=l!==null&&l.length>0;if(!(a&&l[0]===null)){const r=(a?l[0]:null)||g;(a||!i.name)&&(i.name=r)}o.configuration&&i.configurationFiles.push(o.configuration),o.icon&&i.icons.push(o.icon)}isRegisteredLanguageId(i){return i?b.call(this._languages,i):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getLanguageIdByLanguageName(i){const o=i.toLowerCase();return b.call(this._lowercaseNameMap,o)?this._lowercaseNameMap[o]:null}getLanguageIdByMimeType(i){return i&&b.call(this._mimeTypesMap,i)?this._mimeTypesMap[i]:null}guessLanguageIdByFilepathOrFirstLine(i,o){return!i&&!o?[]:(0,L.getLanguageIds)(i,o)}}e.LanguagesRegistry=s}),define(oe[703],re([1,0,6,2,702,13,28,70]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageService=void 0;class _ extends k.Disposable{static{this.instanceCount=0}constructor(n=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new c.Emitter),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new c.Emitter),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new c.Emitter({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,_.instanceCount++,this._registry=this._register(new E.LanguagesRegistry(!0,n)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){_.instanceCount--,super.dispose()}isRegisteredLanguageId(n){return this._registry.isRegisteredLanguageId(n)}getLanguageIdByLanguageName(n){return this._registry.getLanguageIdByLanguageName(n)}getLanguageIdByMimeType(n){return this._registry.getLanguageIdByMimeType(n)}guessLanguageIdByFilepathOrFirstLine(n,s){const t=this._registry.guessLanguageIdByFilepathOrFirstLine(n,s);return(0,L.firstOrDefault)(t,null)}createById(n){return new b(this.onDidChange,()=>this._createAndGetLanguageIdentifier(n))}createByFilepathOrFirstLine(n,s){return new b(this.onDidChange,()=>{const t=this.guessLanguageIdByFilepathOrFirstLine(n,s);return this._createAndGetLanguageIdentifier(t)})}_createAndGetLanguageIdentifier(n){return(!n||!this.isRegisteredLanguageId(n))&&(n=f.PLAINTEXT_LANGUAGE_ID),n}requestBasicLanguageFeatures(n){this._requestedBasicLanguages.has(n)||(this._requestedBasicLanguages.add(n),this._onDidRequestBasicLanguageFeatures.fire(n))}requestRichLanguageFeatures(n){this._requestedRichLanguages.has(n)||(this._requestedRichLanguages.add(n),this.requestBasicLanguageFeatures(n),y.TokenizationRegistry.getOrCreate(n),this._onDidRequestRichLanguageFeatures.fire(n))}}e.LanguageService=_;class b{constructor(n,s){this._onDidChangeLanguages=n,this._selector=s,this._listener=null,this._emitter=null,this.languageId=this._selector()}_dispose(){this._listener&&(this._listener.dispose(),this._listener=null),this._emitter&&(this._emitter.dispose(),this._emitter=null)}get onDidChange(){return this._listener||(this._listener=this._onDidChangeLanguages(()=>this._evaluate())),this._emitter||(this._emitter=new c.Emitter({onDidRemoveLastListener:()=>{this._dispose()}})),this._emitter.event}_evaluate(){const n=this._selector();n!==this.languageId&&(this.languageId=n,this._emitter?.fire(this.languageId))}}}),define(oe[395],re([1,0,33,273,44,34,2,17,146]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultDocumentColorProvider=void 0;class b{constructor(s,t){this._editorWorkerClient=new k.EditorWorkerClient(s,!1,"editorWorkerService",t)}async provideDocumentColors(s,t){return this._editorWorkerClient.computeDefaultDocumentColors(s.uri)}provideColorPresentations(s,t,i){const o=t.range,g=t.color,u=g.alpha,l=new c.Color(new c.RGBA(Math.round(255*g.red),Math.round(255*g.green),Math.round(255*g.blue),u)),a=u?c.Color.Format.CSS.formatRGB(l):c.Color.Format.CSS.formatRGBA(l),r=u?c.Color.Format.CSS.formatHSL(l):c.Color.Format.CSS.formatHSLA(l),d=u?c.Color.Format.CSS.formatHex(l):c.Color.Format.CSS.formatHexA(l),m=[];return m.push({label:a,textEdit:{range:o,text:a}}),m.push({label:r,textEdit:{range:o,text:r}}),m.push({label:d,textEdit:{range:o,text:d}}),m}}e.DefaultDocumentColorProvider=b;let p=class extends y.Disposable{constructor(s,t,i){super(),this._register(i.colorProvider.register("*",new b(s,t)))}};p=De([he(0,E.IModelService),he(1,L.ILanguageConfigurationService),he(2,f.ILanguageFeaturesService)],p),(0,_.registerEditorFeature)(p)}),define(oe[396],re([1,0,18,8,22,4,44,24,17,395,27]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getColors=n,e.getColorPresentations=s;async function n(l,a,r,d=!0){return g(new t,l,a,r,d)}function s(l,a,r,d){return Promise.resolve(r.provideColorPresentations(l,a,d))}class t{constructor(){}async compute(a,r,d,m){const h=await a.provideDocumentColors(r,d);if(Array.isArray(h))for(const v of h)m.push({colorInfo:v,provider:a});return Array.isArray(h)}}class i{constructor(){}async compute(a,r,d,m){const h=await a.provideDocumentColors(r,d);if(Array.isArray(h))for(const v of h)m.push({range:v.range,color:[v.color.red,v.color.green,v.color.blue,v.color.alpha]});return Array.isArray(h)}}class o{constructor(a){this.colorInfo=a}async compute(a,r,d,m){const h=await a.provideColorPresentations(r,this.colorInfo,c.CancellationToken.None);return Array.isArray(h)&&m.push(...h),Array.isArray(h)}}async function g(l,a,r,d,m){let h=!1,v;const C=[],w=a.ordered(r);for(let S=w.length-1;S>=0;S--){const D=w[S];if(D instanceof b.DefaultDocumentColorProvider)v=D;else try{await l.compute(D,r,d,C)&&(h=!0)}catch(I){(0,k.onUnexpectedExternalError)(I)}}return h?C:v&&m?(await l.compute(v,r,d,C),C):[]}function u(l,a){const{colorProvider:r}=l.get(_.ILanguageFeaturesService),d=l.get(y.IModelService).getModel(a);if(!d)throw(0,k.illegalArgument)();const m=l.get(p.IConfigurationService).getValue("editor.defaultColorDecorators",{resource:a});return{model:d,colorProviderRegistry:r,isDefaultColorDecoratorsEnabled:m}}f.CommandsRegistry.registerCommand("_executeDocumentColorProvider",function(l,...a){const[r]=a;if(!(r instanceof E.URI))throw(0,k.illegalArgument)();const{model:d,colorProviderRegistry:m,isDefaultColorDecoratorsEnabled:h}=u(l,r);return g(new i,m,d,c.CancellationToken.None,h)}),f.CommandsRegistry.registerCommand("_executeColorPresentationProvider",function(l,...a){const[r,d]=a,{uri:m,range:h}=d;if(!(m instanceof E.URI)||!Array.isArray(r)||r.length!==4||!L.Range.isIRange(h))throw(0,k.illegalArgument)();const{model:v,colorProviderRegistry:C,isDefaultColorDecoratorsEnabled:w}=u(l,m),[S,D,I,T]=r;return g(new o({range:h,color:{red:S,green:D,blue:I,alpha:T}}),C,v,c.CancellationToken.None,w)})}),define(oe[704],re([1,0,5,2,120,353,174,638]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarginHoverWidget=void 0;const _=c.$;class b extends k.Disposable{static{this.ID="editor.contrib.modesGlyphHoverWidget"}constructor(n,s,t){super(),this._renderDisposeables=this._register(new k.DisposableStore),this._editor=n,this._isVisible=!1,this._messages=[],this._hover=this._register(new y.HoverWidget),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new E.MarkdownRenderer({editor:this._editor},s,t)),this._computer=new f.MarginHoverComputer(this._editor),this._hoverOperation=this._register(new L.HoverOperation(this._editor,this._computer)),this._register(this._hoverOperation.onResult(i=>{this._withResult(i.value)})),this._register(this._editor.onDidChangeModelDecorations(()=>this._onModelDecorationsChanged())),this._register(this._editor.onDidChangeConfiguration(i=>{i.hasChanged(50)&&this._updateFont()})),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return b.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach(s=>this._editor.applyFontInfo(s))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(n){const s=n.target;return s.type===2&&s.detail.glyphMarginLane?(this._startShowingAt(s.position.lineNumber,s.detail.glyphMarginLane),!0):s.type===3?(this._startShowingAt(s.position.lineNumber,"lineNo"),!0):!1}_startShowingAt(n,s){this._computer.lineNumber===n&&this._computer.lane===s||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=n,this._computer.lane=s,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(n){this._messages=n,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(n,s){this._renderDisposeables.clear();const t=document.createDocumentFragment();for(const i of s){const o=_("div.hover-row.markdown-hover"),g=c.append(o,_("div.hover-contents")),u=this._renderDisposeables.add(this._markdownRenderer.render(i.value));g.appendChild(u.element),t.appendChild(o)}this._updateContents(t),this._showAt(n)}_updateContents(n){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(n),this._updateFont()}_showAt(n){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const s=this._editor.getLayoutInfo(),t=this._editor.getTopForLineNumber(n),i=this._editor.getScrollTop(),o=this._editor.getOption(67),g=this._hover.containerDomNode.clientHeight,u=t-i-(g-o)/2,l=s.glyphMarginLeft+s.glyphMarginWidth+(this._computer.lane==="lineNo"?s.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${l}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(u),0)}px`}}e.MarginHoverWidget=b}),define(oe[705],re([1,0,11,183,76,240,23,251]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReindentEditOperations=_;function _(p,n,s,t){if(p.getLineCount()===1&&p.getLineMaxColumn(1)===1)return[];const i=n.getLanguageConfiguration(p.getLanguageId()).indentRulesSupport;if(!i)return[];const o=new f.ProcessedIndentRulesSupport(p,i,n);for(t=Math.min(t,p.getLineCount());s<=t&&o.shouldIgnore(s);)s++;if(s>t-1)return[];const{tabSize:g,indentSize:u,insertSpaces:l}=p.getOptions(),a=(C,w)=>(w=w||1,k.ShiftCommand.shiftIndent(C,C.length+w,g,u,l)),r=(C,w)=>(w=w||1,k.ShiftCommand.unshiftIndent(C,C.length+w,g,u,l)),d=[],m=p.getLineContent(s);let h=c.getLeadingWhitespace(m),v=h;o.shouldIncrease(s)?(v=a(v),h=a(h)):o.shouldIndentNextLine(s)&&(v=a(v)),s++;for(let C=s;C<=t;C++){if(b(p,C))continue;const w=p.getLineContent(C),S=c.getLeadingWhitespace(w),D=v;o.shouldDecrease(C,D)&&(v=r(v),h=r(h)),S!==v&&d.push(E.EditOperation.replaceMove(new y.Selection(C,1,C,S.length+1),(0,L.normalizeIndentation)(v,u,l))),!o.shouldIgnore(C)&&(o.shouldIncrease(C,D)?(h=a(h),v=h):o.shouldIndentNextLine(C,D)?v=a(v):v=h)}return d}function b(p,n){return p.tokenization.isCheapToTokenize(n)?p.tokenization.getLineTokens(n).getStandardTokenType(0)===2:!1}}),define(oe[706],re([1,0,18,101,82,2,21,4,103,115,28,34,17,359,257]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionWithUpdatedRange=e.UpToDateInlineCompletions=e.InlineCompletionsSource=void 0;let o=class extends L.Disposable{constructor(h,v,C,w,S){super(),this.textModel=h,this.versionId=v,this._debounceValue=C,this.languageFeaturesService=w,this.languageConfigurationService=S,this._updateOperation=this._register(new L.MutableDisposable),this.inlineCompletions=(0,y.disposableObservableValue)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,y.disposableObservableValue)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}fetch(h,v,C){const w=new u(h,v,this.textModel.getVersionId()),S=v.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(this._updateOperation.value?.request.satisfies(w))return this._updateOperation.value.promise;if(S.get()?.request.satisfies(w))return Promise.resolve(!0);const D=!!this._updateOperation.value;this._updateOperation.clear();const I=new c.CancellationTokenSource,T=(async()=>{if((D||v.triggerKind===p.InlineCompletionTriggerKind.Automatic)&&await g(this._debounceValue.get(this.textModel),I.token),I.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==w.versionId)return!1;const R=new Date,N=await(0,t.provideInlineCompletions)(this.languageFeaturesService.inlineCompletionsProvider,h,this.textModel,v,I.token,this.languageConfigurationService);if(I.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==w.versionId)return!1;const O=new Date;this._debounceValue.update(this.textModel,O.getTime()-R.getTime());const x=new a(N,w,this.textModel,this.versionId);if(C){const F=C.toInlineCompletion(void 0);C.canBeReused(this.textModel,h)&&!N.has(F)&&x.prepend(C.inlineCompletion,F.range,!0)}return this._updateOperation.clear(),(0,y.transaction)(F=>{S.set(x,F)}),!0})(),M=new l(w,I,T);return this._updateOperation.value=M,T}clear(h){this._updateOperation.clear(),this.inlineCompletions.set(void 0,h),this.suggestWidgetInlineCompletions.set(void 0,h)}clearSuggestWidgetInlineCompletions(h){this._updateOperation.value?.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,h)}cancelUpdate(){this._updateOperation.clear()}};e.InlineCompletionsSource=o,e.InlineCompletionsSource=o=De([he(3,s.ILanguageFeaturesService),he(4,n.ILanguageConfigurationService)],o);function g(m,h){return new Promise(v=>{let C;const w=setTimeout(()=>{C&&C.dispose(),v()},m);h&&(C=h.onCancellationRequested(()=>{clearTimeout(w),C&&C.dispose(),v()}))})}class u{constructor(h,v,C){this.position=h,this.context=v,this.versionId=C}satisfies(h){return this.position.equals(h.position)&&(0,k.equalsIfDefined)(this.context.selectedSuggestionInfo,h.context.selectedSuggestionInfo,(0,k.itemEquals)())&&(h.context.triggerKind===p.InlineCompletionTriggerKind.Automatic||this.context.triggerKind===p.InlineCompletionTriggerKind.Explicit)&&this.versionId===h.versionId}}class l{constructor(h,v,C){this.request=h,this.cancellationTokenSource=v,this.promise=C}dispose(){this.cancellationTokenSource.cancel()}}class a{get inlineCompletions(){return this._inlineCompletions}constructor(h,v,C,w){this.inlineCompletionProviderResult=h,this.request=v,this._textModel=C,this._versionId=w,this._refCount=1,this._prependedInlineCompletionItems=[];const S=C.deltaDecorations([],h.completions.map(D=>({range:D.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=h.completions.map((D,I)=>new r(D,S[I],this._textModel,this._versionId))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(h=>h.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(const h of this._prependedInlineCompletionItems)h.source.removeRef()}}prepend(h,v,C){C&&h.source.addRef();const w=this._textModel.deltaDecorations([],[{range:v,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new r(h,w,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(h)}}e.UpToDateInlineCompletions=a;class r{get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}constructor(h,v,C,w){this.inlineCompletion=h,this.decorationId=v,this._textModel=C,this._modelVersion=w,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=(0,y.derivedOpts)({owner:this,equalsFn:f.Range.equalsRange},S=>(this._modelVersion.read(S),this._textModel.getDecorationRange(this.decorationId)))}toInlineCompletion(h){return this.inlineCompletion.withRange(this._updatedRange.read(h)??d)}toSingleTextEdit(h){return new _.SingleTextEdit(this._updatedRange.read(h)??d,this.inlineCompletion.insertText)}isVisible(h,v,C){const w=(0,i.singleTextRemoveCommonPrefix)(this._toFilterTextReplacement(C),h),S=this._updatedRange.read(C);if(!S||!this.inlineCompletion.range.getStartPosition().equals(S.getStartPosition())||v.lineNumber!==w.range.startLineNumber)return!1;const D=h.getValueInRange(w.range,1),I=w.text,T=Math.max(0,v.column-w.range.startColumn);let M=I.substring(0,T),A=I.substring(T),R=D.substring(0,T),N=D.substring(T);const O=h.getLineIndentColumn(w.range.startLineNumber);return w.range.startColumn<=O&&(R=R.trimStart(),R.length===0&&(N=N.trimStart()),M=M.trimStart(),M.length===0&&(A=A.trimStart())),M.startsWith(R)&&!!(0,E.matchesSubString)(N,A)}canBeReused(h,v){const C=this._updatedRange.read(void 0);return!!C&&C.containsPosition(v)&&this.isVisible(h,v,void 0)&&b.TextLength.ofRange(C).isGreaterThanOrEqualTo(b.TextLength.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(h){return new _.SingleTextEdit(this._updatedRange.read(h)??d,this.inlineCompletion.filterText)}}e.InlineCompletionWithUpdatedRange=r;const d=new f.Range(1,1,1,1)}),define(oe[707],re([1,0,11,183,4,23,130,34,354,252,274]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoveLinesCommand=void 0;let n=class{constructor(t,i,o,g){this._languageConfigurationService=g,this._selection=t,this._isMovingDown=i,this._autoIndent=o,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(t,i){const o=()=>t.getLanguageId(),g=(h,v)=>t.getLanguageIdAtPosition(h,v),u=t.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===u){this._selectionId=i.trackSelection(this._selection);return}if(!this._isMovingDown&&this._selection.startLineNumber===1){this._selectionId=i.trackSelection(this._selection);return}this._moveEndPositionDown=!1;let l=this._selection;l.startLineNumber<l.endLineNumber&&l.endColumn===1&&(this._moveEndPositionDown=!0,l=l.setEndPosition(l.endLineNumber-1,t.getLineMaxColumn(l.endLineNumber-1)));const{tabSize:a,indentSize:r,insertSpaces:d}=t.getOptions(),m=this.buildIndentConverter(a,r,d);if(l.startLineNumber===l.endLineNumber&&t.getLineMaxColumn(l.startLineNumber)===1){const h=l.startLineNumber,v=this._isMovingDown?h+1:h-1;t.getLineMaxColumn(v)===1?i.addEditOperation(new E.Range(1,1,1,1),null):(i.addEditOperation(new E.Range(h,1,h,1),t.getLineContent(v)),i.addEditOperation(new E.Range(v,1,v,t.getLineMaxColumn(v)),null)),l=new L.Selection(v,1,v,1)}else{let h,v;if(this._isMovingDown){h=l.endLineNumber+1,v=t.getLineContent(h),i.addEditOperation(new E.Range(h-1,t.getLineMaxColumn(h-1),h,t.getLineMaxColumn(h)),null);let C=v;if(this.shouldAutoIndent(t,l)){const w=this.matchEnterRule(t,m,a,h,l.startLineNumber-1);if(w!==null){const D=c.getLeadingWhitespace(t.getLineContent(h)),I=w+_.getSpaceCnt(D,a);C=_.generateIndent(I,a,d)+this.trimStart(v)}else{const D={tokenization:{getLineTokens:T=>T===l.startLineNumber?t.tokenization.getLineTokens(h):t.tokenization.getLineTokens(T),getLanguageId:o,getLanguageIdAtPosition:g},getLineContent:T=>T===l.startLineNumber?t.getLineContent(h):t.getLineContent(T)},I=(0,b.getGoodIndentForLine)(this._autoIndent,D,t.getLanguageIdAtPosition(h,1),l.startLineNumber,m,this._languageConfigurationService);if(I!==null){const T=c.getLeadingWhitespace(t.getLineContent(h)),M=_.getSpaceCnt(I,a),A=_.getSpaceCnt(T,a);M!==A&&(C=_.generateIndent(M,a,d)+this.trimStart(v))}}i.addEditOperation(new E.Range(l.startLineNumber,1,l.startLineNumber,1),C+`
`);const S=this.matchEnterRuleMovingDown(t,m,a,l.startLineNumber,h,C);if(S!==null)S!==0&&this.getIndentEditsOfMovingBlock(t,i,l,a,d,S);else{const D={tokenization:{getLineTokens:T=>T===l.startLineNumber?t.tokenization.getLineTokens(h):T>=l.startLineNumber+1&&T<=l.endLineNumber+1?t.tokenization.getLineTokens(T-1):t.tokenization.getLineTokens(T),getLanguageId:o,getLanguageIdAtPosition:g},getLineContent:T=>T===l.startLineNumber?C:T>=l.startLineNumber+1&&T<=l.endLineNumber+1?t.getLineContent(T-1):t.getLineContent(T)},I=(0,b.getGoodIndentForLine)(this._autoIndent,D,t.getLanguageIdAtPosition(h,1),l.startLineNumber+1,m,this._languageConfigurationService);if(I!==null){const T=c.getLeadingWhitespace(t.getLineContent(l.startLineNumber)),M=_.getSpaceCnt(I,a),A=_.getSpaceCnt(T,a);if(M!==A){const R=M-A;this.getIndentEditsOfMovingBlock(t,i,l,a,d,R)}}}}else i.addEditOperation(new E.Range(l.startLineNumber,1,l.startLineNumber,1),C+`
`)}else if(h=l.startLineNumber-1,v=t.getLineContent(h),i.addEditOperation(new E.Range(h,1,h+1,1),null),i.addEditOperation(new E.Range(l.endLineNumber,t.getLineMaxColumn(l.endLineNumber),l.endLineNumber,t.getLineMaxColumn(l.endLineNumber)),`
`+v),this.shouldAutoIndent(t,l)){const C={tokenization:{getLineTokens:S=>S===h?t.tokenization.getLineTokens(l.startLineNumber):t.tokenization.getLineTokens(S),getLanguageId:o,getLanguageIdAtPosition:g},getLineContent:S=>S===h?t.getLineContent(l.startLineNumber):t.getLineContent(S)},w=this.matchEnterRule(t,m,a,l.startLineNumber,l.startLineNumber-2);if(w!==null)w!==0&&this.getIndentEditsOfMovingBlock(t,i,l,a,d,w);else{const S=(0,b.getGoodIndentForLine)(this._autoIndent,C,t.getLanguageIdAtPosition(l.startLineNumber,1),h,m,this._languageConfigurationService);if(S!==null){const D=c.getLeadingWhitespace(t.getLineContent(l.startLineNumber)),I=_.getSpaceCnt(S,a),T=_.getSpaceCnt(D,a);if(I!==T){const M=I-T;this.getIndentEditsOfMovingBlock(t,i,l,a,d,M)}}}}}this._selectionId=i.trackSelection(l)}buildIndentConverter(t,i,o){return{shiftIndent:g=>k.ShiftCommand.shiftIndent(g,g.length+1,t,i,o),unshiftIndent:g=>k.ShiftCommand.unshiftIndent(g,g.length+1,t,i,o)}}parseEnterResult(t,i,o,g,u){if(u){let l=u.indentation;u.indentAction===y.IndentAction.None||u.indentAction===y.IndentAction.Indent?l=u.indentation+u.appendText:u.indentAction===y.IndentAction.IndentOutdent?l=u.indentation:u.indentAction===y.IndentAction.Outdent&&(l=i.unshiftIndent(u.indentation)+u.appendText);const a=t.getLineContent(g);if(this.trimStart(a).indexOf(this.trimStart(l))>=0){const r=c.getLeadingWhitespace(t.getLineContent(g));let d=c.getLeadingWhitespace(l);const m=(0,b.getIndentMetadata)(t,g,this._languageConfigurationService);m!==null&&m&2&&(d=i.unshiftIndent(d));const h=_.getSpaceCnt(d,o),v=_.getSpaceCnt(r,o);return h-v}}return null}matchEnterRuleMovingDown(t,i,o,g,u,l){if(c.lastNonWhitespaceIndex(l)>=0){const a=t.getLineMaxColumn(u),r=(0,p.getEnterAction)(this._autoIndent,t,new E.Range(u,a,u,a),this._languageConfigurationService);return this.parseEnterResult(t,i,o,g,r)}else{let a=g-1;for(;a>=1;){const m=t.getLineContent(a);if(c.lastNonWhitespaceIndex(m)>=0)break;a--}if(a<1||g>t.getLineCount())return null;const r=t.getLineMaxColumn(a),d=(0,p.getEnterAction)(this._autoIndent,t,new E.Range(a,r,a,r),this._languageConfigurationService);return this.parseEnterResult(t,i,o,g,d)}}matchEnterRule(t,i,o,g,u,l){let a=u;for(;a>=1;){let m;if(a===u&&l!==void 0?m=l:m=t.getLineContent(a),c.lastNonWhitespaceIndex(m)>=0)break;a--}if(a<1||g>t.getLineCount())return null;const r=t.getLineMaxColumn(a),d=(0,p.getEnterAction)(this._autoIndent,t,new E.Range(a,r,a,r),this._languageConfigurationService);return this.parseEnterResult(t,i,o,g,d)}trimStart(t){return t.replace(/^\s+/,"")}shouldAutoIndent(t,i){if(this._autoIndent<4||!t.tokenization.isCheapToTokenize(i.startLineNumber))return!1;const o=t.getLanguageIdAtPosition(i.startLineNumber,1),g=t.getLanguageIdAtPosition(i.endLineNumber,1);return!(o!==g||this._languageConfigurationService.getLanguageConfiguration(o).indentRulesSupport===null)}getIndentEditsOfMovingBlock(t,i,o,g,u,l){for(let a=o.startLineNumber;a<=o.endLineNumber;a++){const r=t.getLineContent(a),d=c.getLeadingWhitespace(r),h=_.getSpaceCnt(d,g)+l,v=_.generateIndent(h,g,u);v!==d&&(i.addEditOperation(new E.Range(a,1,a,d.length+1),v),a===o.endLineNumber&&o.endColumn<=d.length+1&&v===""&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(t,i){let o=i.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&o.startLineNumber<o.endLineNumber&&(o=o.setEndPosition(o.endLineNumber,2)),o}};e.MoveLinesCommand=n,e.MoveLinesCommand=n=De([he(3,f.ILanguageConfigurationService)],n)}),define(oe[397],re([1,0,5,84,26,30,6,55,2,120,234,3,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestDetailsOverlay=e.SuggestDetailsWidget=void 0,e.canExpandCompletionItem=t;function t(g){return!!g&&!!(g.completion.documentation||g.completion.detail&&g.completion.detail!==g.completion.label)}let i=class{constructor(u,l){this._editor=u,this._onDidClose=new y.Emitter,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new y.Emitter,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new _.DisposableStore,this._renderDisposeable=new _.DisposableStore,this._borderWidth=1,this._size=new c.Dimension(330,0),this.domNode=c.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=l.createInstance(b.MarkdownRenderer,{editor:u}),this._body=c.$(".body"),this._scrollbar=new k.DomScrollableElement(this._body,{alwaysConsumeMouseWheel:!0}),c.append(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=c.append(this._body,c.$(".header")),this._close=c.append(this._header,c.$("span"+L.ThemeIcon.asCSSSelector(E.Codicon.close))),this._close.title=n.localize(360,"Close"),this._type=c.append(this._header,c.$("p.type")),this._docs=c.append(this._body,c.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(50)&&this._configureFont()}))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const u=this._editor.getOptions(),l=u.get(50),a=l.getMassagedFontFamily(),r=u.get(120)||l.fontSize,d=u.get(121)||l.lineHeight,m=l.fontWeight,h=`${r}px`,v=`${d}px`;this.domNode.style.fontSize=h,this.domNode.style.lineHeight=`${d/r}`,this.domNode.style.fontWeight=m,this.domNode.style.fontFeatureSettings=l.fontFeatureSettings,this._type.style.fontFamily=a,this._close.style.height=v,this._close.style.width=v}getLayoutInfo(){const u=this._editor.getOption(121)||this._editor.getOption(50).lineHeight,l=this._borderWidth,a=l*2;return{lineHeight:u,borderWidth:l,borderHeight:a,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=n.localize(361,"Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(u,l){this._renderDisposeable.clear();let{detail:a,documentation:r}=u.completion;if(l){let d="";d+=`score: ${u.score[0]}
`,d+=`prefix: ${u.word??"(no prefix)"}
`,d+=`word: ${u.completion.filterText?u.completion.filterText+" (filterText)":u.textLabel}
`,d+=`distance: ${u.distance} (localityBonus-setting)
`,d+=`index: ${u.idx}, based on ${u.completion.sortText&&`sortText: "${u.completion.sortText}"`||"label"}
`,d+=`commit_chars: ${u.completion.commitCharacters?.join("")}
`,r=new f.MarkdownString().appendCodeblock("empty",d),a=`Provider: ${u.provider._debugDisplayName}`}if(!l&&!t(u)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),a){const d=a.length>1e5?`${a.substr(0,1e5)}\u2026`:a;this._type.textContent=d,this._type.title=d,c.show(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(d))}else c.clearNode(this._type),this._type.title="",c.hide(this._type),this.domNode.classList.add("no-type");if(c.clearNode(this._docs),typeof r=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=r;else if(r){this._docs.classList.add("markdown-docs"),c.clearNode(this._docs);const d=this._markdownRenderer.render(r);this._docs.appendChild(d.element),this._renderDisposeable.add(d),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=d=>{d.preventDefault(),d.stopPropagation()},this._close.onclick=d=>{d.preventDefault(),d.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(u,l){const a=new c.Dimension(u,l);c.Dimension.equals(a,this._size)||(this._size=a,c.size(this.domNode,u,l)),this._scrollbar.scanDomNode()}scrollDown(u=8){this._body.scrollTop+=u}scrollUp(u=8){this._body.scrollTop-=u}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(u){this._borderWidth=u}get borderWidth(){return this._borderWidth}};e.SuggestDetailsWidget=i,e.SuggestDetailsWidget=i=De([he(1,s.IInstantiationService)],i);class o{constructor(u,l){this.widget=u,this._editor=l,this.allowEditorOverflow=!0,this._disposables=new _.DisposableStore,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new p.ResizableHTMLElement,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(u.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let a,r,d=0,m=0;this._disposables.add(this._resizable.onDidWillResize(()=>{a=this._topLeft,r=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(h=>{if(a&&r){this.widget.layout(h.dimension.width,h.dimension.height);let v=!1;h.west&&(m=r.width-h.dimension.width,v=!0),h.north&&(d=r.height-h.dimension.height,v=!0),v&&this._applyTopLeft({top:a.top+d,left:a.left+m})}h.done&&(a=void 0,r=void 0,d=0,m=0,this._userSize=h.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(u=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),u&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(u,l){const a=u.getBoundingClientRect();this._anchorBox=a,this._preferAlignAtTop=l,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,l)}_placeAtAnchor(u,l,a){const r=c.getClientArea(this.getDomNode().ownerDocument.body),d=this.widget.getLayoutInfo(),m=new c.Dimension(220,2*d.lineHeight),h=u.top,v=function(){const F=r.width-(u.left+u.width+d.borderWidth+d.horizontalPadding),W=-d.borderWidth+u.left+u.width,z=new c.Dimension(F,r.height-u.top-d.borderHeight-d.verticalPadding),q=z.with(void 0,u.top+u.height-d.borderHeight-d.verticalPadding);return{top:h,left:W,fit:F-l.width,maxSizeTop:z,maxSizeBottom:q,minSize:m.with(Math.min(F,m.width))}}(),C=function(){const F=u.left-d.borderWidth-d.horizontalPadding,W=Math.max(d.horizontalPadding,u.left-l.width-d.borderWidth),z=new c.Dimension(F,r.height-u.top-d.borderHeight-d.verticalPadding),q=z.with(void 0,u.top+u.height-d.borderHeight-d.verticalPadding);return{top:h,left:W,fit:F-l.width,maxSizeTop:z,maxSizeBottom:q,minSize:m.with(Math.min(F,m.width))}}(),w=function(){const F=u.left,W=-d.borderWidth+u.top+u.height,z=new c.Dimension(u.width-d.borderHeight,r.height-u.top-u.height-d.verticalPadding);return{top:W,left:F,fit:z.height-l.height,maxSizeBottom:z,maxSizeTop:z,minSize:m.with(z.width)}}(),S=[v,C,w],D=S.find(F=>F.fit>=0)??S.sort((F,W)=>W.fit-F.fit)[0],I=u.top+u.height-d.borderHeight;let T,M=l.height;const A=Math.max(D.maxSizeTop.height,D.maxSizeBottom.height);M>A&&(M=A);let R;a?M<=D.maxSizeTop.height?(T=!0,R=D.maxSizeTop):(T=!1,R=D.maxSizeBottom):M<=D.maxSizeBottom.height?(T=!1,R=D.maxSizeBottom):(T=!0,R=D.maxSizeTop);let{top:N,left:O}=D;!T&&M>u.height&&(N=I-M);const x=this._editor.getDomNode();if(x){const F=x.getBoundingClientRect();N-=F.top,O-=F.left}this._applyTopLeft({left:O,top:N}),this._resizable.enableSashes(!T,D===v,T,D!==v),this._resizable.minSize=D.minSize,this._resizable.maxSize=R,this._resizable.layout(M,Math.min(R.width,l.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(u){this._topLeft=u,this._editor.layoutOverlayWidget(this)}}e.SuggestDetailsOverlay=o}),define(oe[398],re([1,0,13,45,54,19,22,27,108,38]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationChangeEvent=e.Configuration=e.ConfigurationModelParser=e.ConfigurationModel=void 0;function p(g){return Object.isFrozen(g)?g:E.deepFreeze(g)}class n{static createEmptyModel(u){return new n({},[],[],void 0,u)}constructor(u,l,a,r,d){this._contents=u,this._keys=l,this._overrides=a,this.raw=r,this.logService=d,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw?.length){const u=this.raw.map(l=>{if(l instanceof n)return l;const a=new s("",this.logService);return a.parseRaw(l),a.configurationModel});this._rawConfiguration=u.reduce((l,a)=>a===l?a:l.merge(a),u[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(u){return u?(0,f.getConfigurationValue)(this.contents,u):this.contents}inspect(u,l){const a=this;return{get value(){return p(a.rawConfiguration.getValue(u))},get override(){return l?p(a.rawConfiguration.getOverrideValue(u,l)):void 0},get merged(){return p(l?a.rawConfiguration.override(l).getValue(u):a.rawConfiguration.getValue(u))},get overrides(){const r=[];for(const{contents:d,identifiers:m,keys:h}of a.rawConfiguration.overrides){const v=new n(d,h,[],void 0,a.logService).getValue(u);v!==void 0&&r.push({identifiers:m,value:v})}return r.length?p(r):void 0}}}getOverrideValue(u,l){const a=this.getContentsForOverrideIdentifer(l);return a?u?(0,f.getConfigurationValue)(a,u):a:void 0}override(u){let l=this.overrideConfigurations.get(u);return l||(l=this.createOverrideConfigurationModel(u),this.overrideConfigurations.set(u,l)),l}merge(...u){const l=E.deepClone(this.contents),a=E.deepClone(this.overrides),r=[...this.keys],d=this.raw?.length?[...this.raw]:[this];for(const m of u)if(d.push(...m.raw?.length?m.raw:[m]),!m.isEmpty()){this.mergeContents(l,m.contents);for(const h of m.overrides){const[v]=a.filter(C=>c.equals(C.identifiers,h.identifiers));v?(this.mergeContents(v.contents,h.contents),v.keys.push(...h.keys),v.keys=c.distinct(v.keys)):a.push(E.deepClone(h))}for(const h of m.keys)r.indexOf(h)===-1&&r.push(h)}return new n(l,r,a,d.every(m=>m instanceof n)?void 0:d,this.logService)}createOverrideConfigurationModel(u){const l=this.getContentsForOverrideIdentifer(u);if(!l||typeof l!="object"||!Object.keys(l).length)return this;const a={};for(const r of c.distinct([...Object.keys(this.contents),...Object.keys(l)])){let d=this.contents[r];const m=l[r];m&&(typeof d=="object"&&typeof m=="object"?(d=E.deepClone(d),this.mergeContents(d,m)):d=m),a[r]=d}return new n(a,this.keys,this.overrides,void 0,this.logService)}mergeContents(u,l){for(const a of Object.keys(l)){if(a in u&&L.isObject(u[a])&&L.isObject(l[a])){this.mergeContents(u[a],l[a]);continue}u[a]=E.deepClone(l[a])}}getContentsForOverrideIdentifer(u){let l=null,a=null;const r=d=>{d&&(a?this.mergeContents(a,d):a=E.deepClone(d))};for(const d of this.overrides)d.identifiers.length===1&&d.identifiers[0]===u?l=d.contents:d.identifiers.includes(u)&&r(d.contents);return r(l),a}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}setValue(u,l){this.updateValue(u,l,!1)}removeValue(u){const l=this.keys.indexOf(u);l!==-1&&(this.keys.splice(l,1),(0,f.removeFromValueTree)(this.contents,u),_.OVERRIDE_PROPERTY_REGEX.test(u)&&this.overrides.splice(this.overrides.findIndex(a=>c.equals(a.identifiers,(0,_.overrideIdentifiersFromKey)(u))),1))}updateValue(u,l,a){if((0,f.addToValueTree)(this.contents,u,l,r=>this.logService.error(r)),a=a||this.keys.indexOf(u)===-1,a&&this.keys.push(u),_.OVERRIDE_PROPERTY_REGEX.test(u)){const r=(0,_.overrideIdentifiersFromKey)(u),d={identifiers:r,keys:Object.keys(this.contents[u]),contents:(0,f.toValuesTree)(this.contents[u],h=>this.logService.error(h))},m=this.overrides.findIndex(h=>c.equals(h.identifiers,r));m!==-1?this.overrides[m]=d:this.overrides.push(d)}}}e.ConfigurationModel=n;class s{constructor(u,l){this._name=u,this.logService=l,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[]}get configurationModel(){return this._configurationModel||n.createEmptyModel(this.logService)}parseRaw(u,l){this._raw=u;const{contents:a,keys:r,overrides:d,restricted:m,hasExcludedProperties:h}=this.doParseRaw(u,l);this._configurationModel=new n(a,r,d,h?[u]:void 0,this.logService),this._restrictedConfigurations=m||[]}doParseRaw(u,l){const a=b.Registry.as(_.Extensions.Configuration).getConfigurationProperties(),r=this.filter(u,a,!0,l);u=r.raw;const d=(0,f.toValuesTree)(u,v=>this.logService.error(`Conflict in settings file ${this._name}: ${v}`)),m=Object.keys(u),h=this.toOverrides(u,v=>this.logService.error(`Conflict in settings file ${this._name}: ${v}`));return{contents:d,keys:m,overrides:h,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}filter(u,l,a,r){let d=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:u,restricted:[],hasExcludedProperties:d};const m={},h=[];for(const v in u)if(_.OVERRIDE_PROPERTY_REGEX.test(v)&&a){const C=this.filter(u[v],l,!1,r);m[v]=C.raw,d=d||C.hasExcludedProperties,h.push(...C.restricted)}else{const C=l[v],w=C?typeof C.scope<"u"?C.scope:3:void 0;C?.restricted&&h.push(v),!r.exclude?.includes(v)&&(r.include?.includes(v)||(w===void 0||r.scopes===void 0||r.scopes.includes(w))&&!(r.skipRestricted&&C?.restricted))?m[v]=u[v]:d=!0}return{raw:m,restricted:h,hasExcludedProperties:d}}toOverrides(u,l){const a=[];for(const r of Object.keys(u))if(_.OVERRIDE_PROPERTY_REGEX.test(r)){const d={};for(const m in u[r])d[m]=u[r][m];a.push({identifiers:(0,_.overrideIdentifiersFromKey)(r),keys:Object.keys(d),contents:(0,f.toValuesTree)(d,l)})}return a}}e.ConfigurationModelParser=s;class t{constructor(u,l,a,r,d,m,h,v,C,w,S,D,I){this.key=u,this.overrides=l,this._value=a,this.overrideIdentifiers=r,this.defaultConfiguration=d,this.policyConfiguration=m,this.applicationConfiguration=h,this.userConfiguration=v,this.localUserConfiguration=C,this.remoteUserConfiguration=w,this.workspaceConfiguration=S,this.folderConfigurationModel=D,this.memoryConfigurationModel=I}toInspectValue(u){return u?.value!==void 0||u?.override!==void 0||u?.overrides!==void 0?u:void 0}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get user(){return this.toInspectValue(this.userInspectValue)}}class i{constructor(u,l,a,r,d,m,h,v,C,w){this._defaultConfiguration=u,this._policyConfiguration=l,this._applicationConfiguration=a,this._localUserConfiguration=r,this._remoteUserConfiguration=d,this._workspaceConfiguration=m,this._folderConfigurations=h,this._memoryConfiguration=v,this._memoryConfigurationByResource=C,this.logService=w,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new k.ResourceMap,this._userConfiguration=null}getValue(u,l,a){return this.getConsolidatedConfigurationModel(u,l,a).getValue(u)}updateValue(u,l,a={}){let r;a.resource?(r=this._memoryConfigurationByResource.get(a.resource),r||(r=n.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(a.resource,r))):r=this._memoryConfiguration,l===void 0?r.removeValue(u):r.setValue(u,l),a.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(u,l,a){const r=this.getConsolidatedConfigurationModel(u,l,a),d=this.getFolderConfigurationModelForResource(l.resource,a),m=l.resource?this._memoryConfigurationByResource.get(l.resource)||this._memoryConfiguration:this._memoryConfiguration,h=new Set;for(const v of r.overrides)for(const C of v.identifiers)r.getOverrideValue(u,C)!==void 0&&h.add(C);return new t(u,l,r.getValue(u),h.size?[...h]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,a?this._workspaceConfiguration:void 0,d||void 0,m)}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}getConsolidatedConfigurationModel(u,l,a){let r=this.getConsolidatedConfigurationModelForResource(l,a);return l.overrideIdentifier&&(r=r.override(l.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(u)!==void 0&&(r=r.merge(this._policyConfiguration)),r}getConsolidatedConfigurationModelForResource({resource:u},l){let a=this.getWorkspaceConsolidatedConfiguration();if(l&&u){const r=l.getFolder(u);r&&(a=this.getFolderConsolidatedConfiguration(r.uri)||a);const d=this._memoryConfigurationByResource.get(u);d&&(a=a.merge(d))}return a}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(u){let l=this._foldersConsolidatedConfigurations.get(u);if(!l){const a=this.getWorkspaceConsolidatedConfiguration(),r=this._folderConfigurations.get(u);r?(l=a.merge(r),this._foldersConsolidatedConfigurations.set(u,l)):l=a}return l}getFolderConfigurationModelForResource(u,l){if(l&&u){const a=l.getFolder(u);if(a)return this._folderConfigurations.get(a.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((u,l)=>{const{contents:a,overrides:r,keys:d}=this._folderConfigurations.get(l);return u.push([l,{contents:a,overrides:r,keys:d}]),u},[])}}static parse(u,l){const a=this.parseConfigurationModel(u.defaults,l),r=this.parseConfigurationModel(u.policy,l),d=this.parseConfigurationModel(u.application,l),m=this.parseConfigurationModel(u.user,l),h=this.parseConfigurationModel(u.workspace,l),v=u.folders.reduce((C,w)=>(C.set(y.URI.revive(w[0]),this.parseConfigurationModel(w[1],l)),C),new k.ResourceMap);return new i(a,r,d,m,n.createEmptyModel(l),h,v,n.createEmptyModel(l),new k.ResourceMap,l)}static parseConfigurationModel(u,l){return new n(u.contents,u.keys,u.overrides,void 0,l)}}e.Configuration=i;class o{constructor(u,l,a,r,d){this.change=u,this.previous=l,this.currentConfiguraiton=a,this.currentWorkspace=r,this.logService=d,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const m of u.keys)this.affectedKeys.add(m);for(const[,m]of u.overrides)for(const h of m)this.affectedKeys.add(h);this._affectsConfigStr=this._marker;for(const m of this.affectedKeys)this._affectsConfigStr+=m+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=i.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(u,l){const a=this._marker+u,r=this._affectsConfigStr.indexOf(a);if(r<0)return!1;const d=r+a.length;if(d>=this._affectsConfigStr.length)return!1;const m=this._affectsConfigStr.charCodeAt(d);if(m!==this._markerCode1&&m!==this._markerCode2)return!1;if(l){const h=this.previousConfiguration?this.previousConfiguration.getValue(u,l,this.previous?.workspace):void 0,v=this.currentConfiguraiton.getValue(u,l,this.currentWorkspace);return!E.equals(h,v)}return!0}}e.ConfigurationChangeEvent=o}),define(oe[708],re([1,0,2,398,108,38]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultConfiguration=void 0;class y extends c.Disposable{get configurationModel(){return this._configurationModel}constructor(_){super(),this.logService=_,this._configurationModel=k.ConfigurationModel.createEmptyModel(this.logService)}reload(){return this.resetConfigurationModel(),this.configurationModel}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=k.ConfigurationModel.createEmptyModel(this.logService);const _=L.Registry.as(E.Extensions.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(_),_)}updateConfigurationModel(_,b){const p=this.getConfigurationDefaultOverrides();for(const n of _){const s=p[n],t=b[n];s!==void 0?this._configurationModel.setValue(n,s):t?this._configurationModel.setValue(n,t.default):this._configurationModel.removeValue(n)}}}e.DefaultConfiguration=y}),define(oe[121],re([1,0,139,16,24,38,2,73]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Extensions=e.KeybindingsRegistry=void 0;class _{constructor(){this._coreKeybindings=new f.LinkedList,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(n){if(k.OS===1){if(n&&n.win)return n.win}else if(k.OS===2){if(n&&n.mac)return n.mac}else if(n&&n.linux)return n.linux;return n}registerKeybindingRule(n){const s=_.bindToCurrentPlatform(n),t=new y.DisposableStore;if(s&&s.primary){const i=(0,c.decodeKeybinding)(s.primary,k.OS);i&&t.add(this._registerDefaultKeybinding(i,n.id,n.args,n.weight,0,n.when))}if(s&&Array.isArray(s.secondary))for(let i=0,o=s.secondary.length;i<o;i++){const g=s.secondary[i],u=(0,c.decodeKeybinding)(g,k.OS);u&&t.add(this._registerDefaultKeybinding(u,n.id,n.args,n.weight,-i-1,n.when))}return t}registerCommandAndKeybindingRule(n){return(0,y.combinedDisposable)(this.registerKeybindingRule(n),E.CommandsRegistry.registerCommand(n))}_registerDefaultKeybinding(n,s,t,i,o,g){const u=this._coreKeybindings.push({keybinding:n,command:s,commandArgs:t,when:g,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,(0,y.toDisposable)(()=>{u(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(b)),this._cachedMergedKeybindings.slice(0)}}e.KeybindingsRegistry=new _,e.Extensions={EditorModes:"platform.keybindingsRegistry"},L.Registry.add(e.Extensions.EditorModes,e.KeybindingsRegistry);function b(p,n){if(p.weight1!==n.weight1)return p.weight1-n.weight1;if(p.command&&n.command){if(p.command<n.command)return-1;if(p.command>n.command)return 1}return p.weight2-n.weight2}}),define(oe[29],re([1,0,41,30,6,2,73,24,12,7,121]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.Action2=e.MenuItemAction=e.SubmenuItemAction=e.MenuRegistry=e.IMenuService=e.MenuId=void 0,e.isIMenuItem=s,e.isISubmenuItem=t,e.registerAction2=a;function s(r){return r.command!==void 0}function t(r){return r.submenu!==void 0}class i{static{this._instances=new Map}static{this.CommandPalette=new i("CommandPalette")}static{this.DebugBreakpointsContext=new i("DebugBreakpointsContext")}static{this.DebugCallStackContext=new i("DebugCallStackContext")}static{this.DebugConsoleContext=new i("DebugConsoleContext")}static{this.DebugVariablesContext=new i("DebugVariablesContext")}static{this.NotebookVariablesContext=new i("NotebookVariablesContext")}static{this.DebugHoverContext=new i("DebugHoverContext")}static{this.DebugWatchContext=new i("DebugWatchContext")}static{this.DebugToolBar=new i("DebugToolBar")}static{this.DebugToolBarStop=new i("DebugToolBarStop")}static{this.DebugCallStackToolbar=new i("DebugCallStackToolbar")}static{this.EditorContext=new i("EditorContext")}static{this.SimpleEditorContext=new i("SimpleEditorContext")}static{this.EditorContent=new i("EditorContent")}static{this.EditorLineNumberContext=new i("EditorLineNumberContext")}static{this.EditorContextCopy=new i("EditorContextCopy")}static{this.EditorContextPeek=new i("EditorContextPeek")}static{this.EditorContextShare=new i("EditorContextShare")}static{this.EditorTitle=new i("EditorTitle")}static{this.EditorTitleRun=new i("EditorTitleRun")}static{this.EditorTitleContext=new i("EditorTitleContext")}static{this.EditorTitleContextShare=new i("EditorTitleContextShare")}static{this.EmptyEditorGroup=new i("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new i("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new i("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new i("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new i("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new i("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new i("ExplorerContext")}static{this.ExplorerContextShare=new i("ExplorerContextShare")}static{this.ExtensionContext=new i("ExtensionContext")}static{this.GlobalActivity=new i("GlobalActivity")}static{this.CommandCenter=new i("CommandCenter")}static{this.CommandCenterCenter=new i("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new i("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new i("LayoutControlMenu")}static{this.MenubarMainMenu=new i("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new i("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new i("MenubarDebugMenu")}static{this.MenubarEditMenu=new i("MenubarEditMenu")}static{this.MenubarCopy=new i("MenubarCopy")}static{this.MenubarFileMenu=new i("MenubarFileMenu")}static{this.MenubarGoMenu=new i("MenubarGoMenu")}static{this.MenubarHelpMenu=new i("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new i("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new i("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new i("PanelAlignmentMenu")}static{this.PanelPositionMenu=new i("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new i("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new i("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new i("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new i("MenubarSelectionMenu")}static{this.MenubarShare=new i("MenubarShare")}static{this.MenubarSwitchEditorMenu=new i("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new i("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new i("MenubarTerminalMenu")}static{this.MenubarViewMenu=new i("MenubarViewMenu")}static{this.MenubarHomeMenu=new i("MenubarHomeMenu")}static{this.OpenEditorsContext=new i("OpenEditorsContext")}static{this.OpenEditorsContextShare=new i("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new i("ProblemsPanelContext")}static{this.SCMInputBox=new i("SCMInputBox")}static{this.SCMChangesSeparator=new i("SCMChangesSeparator")}static{this.SCMChangesContext=new i("SCMChangesContext")}static{this.SCMIncomingChanges=new i("SCMIncomingChanges")}static{this.SCMIncomingChangesContext=new i("SCMIncomingChangesContext")}static{this.SCMIncomingChangesSetting=new i("SCMIncomingChangesSetting")}static{this.SCMOutgoingChanges=new i("SCMOutgoingChanges")}static{this.SCMOutgoingChangesContext=new i("SCMOutgoingChangesContext")}static{this.SCMOutgoingChangesSetting=new i("SCMOutgoingChangesSetting")}static{this.SCMIncomingChangesAllChangesContext=new i("SCMIncomingChangesAllChangesContext")}static{this.SCMIncomingChangesHistoryItemContext=new i("SCMIncomingChangesHistoryItemContext")}static{this.SCMOutgoingChangesAllChangesContext=new i("SCMOutgoingChangesAllChangesContext")}static{this.SCMOutgoingChangesHistoryItemContext=new i("SCMOutgoingChangesHistoryItemContext")}static{this.SCMChangeContext=new i("SCMChangeContext")}static{this.SCMResourceContext=new i("SCMResourceContext")}static{this.SCMResourceContextShare=new i("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new i("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new i("SCMResourceGroupContext")}static{this.SCMSourceControl=new i("SCMSourceControl")}static{this.SCMSourceControlInline=new i("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new i("SCMSourceControlTitle")}static{this.SCMTitle=new i("SCMTitle")}static{this.SearchContext=new i("SearchContext")}static{this.SearchActionMenu=new i("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new i("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new i("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new i("StickyScrollContext")}static{this.TestItem=new i("TestItem")}static{this.TestItemGutter=new i("TestItemGutter")}static{this.TestProfilesContext=new i("TestProfilesContext")}static{this.TestMessageContext=new i("TestMessageContext")}static{this.TestMessageContent=new i("TestMessageContent")}static{this.TestPeekElement=new i("TestPeekElement")}static{this.TestPeekTitle=new i("TestPeekTitle")}static{this.TestCallStack=new i("TestCallStack")}static{this.TouchBarContext=new i("TouchBarContext")}static{this.TitleBarContext=new i("TitleBarContext")}static{this.TitleBarTitleContext=new i("TitleBarTitleContext")}static{this.TunnelContext=new i("TunnelContext")}static{this.TunnelPrivacy=new i("TunnelPrivacy")}static{this.TunnelProtocol=new i("TunnelProtocol")}static{this.TunnelPortInline=new i("TunnelInline")}static{this.TunnelTitle=new i("TunnelTitle")}static{this.TunnelLocalAddressInline=new i("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new i("TunnelOriginInline")}static{this.ViewItemContext=new i("ViewItemContext")}static{this.ViewContainerTitle=new i("ViewContainerTitle")}static{this.ViewContainerTitleContext=new i("ViewContainerTitleContext")}static{this.ViewTitle=new i("ViewTitle")}static{this.ViewTitleContext=new i("ViewTitleContext")}static{this.CommentEditorActions=new i("CommentEditorActions")}static{this.CommentThreadTitle=new i("CommentThreadTitle")}static{this.CommentThreadActions=new i("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new i("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new i("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new i("CommentThreadCommentContext")}static{this.CommentTitle=new i("CommentTitle")}static{this.CommentActions=new i("CommentActions")}static{this.CommentsViewThreadActions=new i("CommentsViewThreadActions")}static{this.InteractiveToolbar=new i("InteractiveToolbar")}static{this.InteractiveCellTitle=new i("InteractiveCellTitle")}static{this.InteractiveCellDelete=new i("InteractiveCellDelete")}static{this.InteractiveCellExecute=new i("InteractiveCellExecute")}static{this.InteractiveInputExecute=new i("InteractiveInputExecute")}static{this.InteractiveInputConfig=new i("InteractiveInputConfig")}static{this.ReplInputExecute=new i("ReplInputExecute")}static{this.IssueReporter=new i("IssueReporter")}static{this.NotebookToolbar=new i("NotebookToolbar")}static{this.NotebookStickyScrollContext=new i("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new i("NotebookCellTitle")}static{this.NotebookCellDelete=new i("NotebookCellDelete")}static{this.NotebookCellInsert=new i("NotebookCellInsert")}static{this.NotebookCellBetween=new i("NotebookCellBetween")}static{this.NotebookCellListTop=new i("NotebookCellTop")}static{this.NotebookCellExecute=new i("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new i("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new i("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new i("NotebookDiffCellInputTitle")}static{this.NotebookDiffCellMetadataTitle=new i("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new i("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new i("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new i("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new i("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new i("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new i("NotebookKernelSource")}static{this.BulkEditTitle=new i("BulkEditTitle")}static{this.BulkEditContext=new i("BulkEditContext")}static{this.TimelineItemContext=new i("TimelineItemContext")}static{this.TimelineTitle=new i("TimelineTitle")}static{this.TimelineTitleContext=new i("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new i("TimelineFilterSubMenu")}static{this.AccountsContext=new i("AccountsContext")}static{this.SidebarTitle=new i("SidebarTitle")}static{this.PanelTitle=new i("PanelTitle")}static{this.AuxiliaryBarTitle=new i("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new i("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new i("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new i("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new i("TerminalNewDropdownContext")}static{this.TerminalTabContext=new i("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new i("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new i("TerminalStickyScrollContext")}static{this.WebviewContext=new i("WebviewContext")}static{this.InlineCompletionsActions=new i("InlineCompletionsActions")}static{this.InlineEditsActions=new i("InlineEditsActions")}static{this.InlineEditActions=new i("InlineEditActions")}static{this.NewFile=new i("NewFile")}static{this.MergeInput1Toolbar=new i("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new i("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new i("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new i("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new i("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new i("InlineEditToolbar")}static{this.ChatContext=new i("ChatContext")}static{this.ChatCodeBlock=new i("ChatCodeblock")}static{this.ChatCompareBlock=new i("ChatCompareBlock")}static{this.ChatMessageTitle=new i("ChatMessageTitle")}static{this.ChatExecute=new i("ChatExecute")}static{this.ChatExecuteSecondary=new i("ChatExecuteSecondary")}static{this.ChatInputSide=new i("ChatInputSide")}static{this.AccessibleView=new i("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new i("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new i("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new i("DiffEditorSelectionToolbar")}constructor(d){if(i._instances.has(d))throw new TypeError(`MenuId with identifier '${d}' already exists. Use MenuId.for(ident) or a unique identifier`);i._instances.set(d,this),this.id=d}}e.MenuId=i,e.IMenuService=(0,b.createDecorator)("menuService");class o{static{this._all=new Map}static for(d){let m=this._all.get(d);return m||(m=new o(d),this._all.set(d,m)),m}static merge(d){const m=new Set;for(const h of d)h instanceof o&&m.add(h.id);return m}constructor(d){this.id=d,this.has=m=>m===d}}e.MenuRegistry=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new E.MicrotaskEmitter({merge:o.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(r){return this._commands.set(r.id,r),this._onDidChangeMenu.fire(o.for(i.CommandPalette)),(0,L.toDisposable)(()=>{this._commands.delete(r.id)&&this._onDidChangeMenu.fire(o.for(i.CommandPalette))})}getCommand(r){return this._commands.get(r)}getCommands(){const r=new Map;return this._commands.forEach((d,m)=>r.set(m,d)),r}appendMenuItem(r,d){let m=this._menuItems.get(r);m||(m=new y.LinkedList,this._menuItems.set(r,m));const h=m.push(d);return this._onDidChangeMenu.fire(o.for(r)),(0,L.toDisposable)(()=>{h(),this._onDidChangeMenu.fire(o.for(r))})}appendMenuItems(r){const d=new L.DisposableStore;for(const{id:m,item:h}of r)d.add(this.appendMenuItem(m,h));return d}getMenuItems(r){let d;return this._menuItems.has(r)?d=[...this._menuItems.get(r)]:d=[],r===i.CommandPalette&&this._appendImplicitItems(d),d}_appendImplicitItems(r){const d=new Set;for(const m of r)s(m)&&(d.add(m.command.id),m.alt&&d.add(m.alt.id));this._commands.forEach((m,h)=>{d.has(h)||r.push({command:m})})}};class g extends c.SubmenuAction{constructor(d,m,h){super(`submenuitem.${d.submenu.id}`,typeof d.title=="string"?d.title:d.title.value,h,"submenu"),this.item=d,this.hideActions=m}}e.SubmenuItemAction=g;let u=n=class{static label(d,m){return m?.renderShortTitle&&d.shortTitle?typeof d.shortTitle=="string"?d.shortTitle:d.shortTitle.value:typeof d.title=="string"?d.title:d.title.value}constructor(d,m,h,v,C,w,S){this.hideActions=v,this.menuKeybinding=C,this._commandService=S,this.id=d.id,this.label=n.label(d,h),this.tooltip=(typeof d.tooltip=="string"?d.tooltip:d.tooltip?.value)??"",this.enabled=!d.precondition||w.contextMatchesRules(d.precondition),this.checked=void 0;let D;if(d.toggled){const I=d.toggled.condition?d.toggled:{condition:d.toggled};this.checked=w.contextMatchesRules(I.condition),this.checked&&I.tooltip&&(this.tooltip=typeof I.tooltip=="string"?I.tooltip:I.tooltip.value),this.checked&&k.ThemeIcon.isThemeIcon(I.icon)&&(D=I.icon),this.checked&&I.title&&(this.label=typeof I.title=="string"?I.title:I.title.value)}D||(D=k.ThemeIcon.isThemeIcon(d.icon)?d.icon:void 0),this.item=d,this.alt=m?new n(m,void 0,h,v,void 0,w,S):void 0,this._options=h,this.class=D&&k.ThemeIcon.asClassName(D)}run(...d){let m=[];return this._options?.arg&&(m=[...m,this._options.arg]),this._options?.shouldForwardArgs&&(m=[...m,...d]),this._commandService.executeCommand(this.id,...m)}};e.MenuItemAction=u,e.MenuItemAction=u=n=De([he(5,_.IContextKeyService),he(6,f.ICommandService)],u);class l{constructor(d){this.desc=d}}e.Action2=l;function a(r){const d=[],m=new r,{f1:h,menu:v,keybinding:C,...w}=m.desc;if(f.CommandsRegistry.getCommand(w.id))throw new Error(`Cannot register two commands with the same id: ${w.id}`);if(d.push(f.CommandsRegistry.registerCommand({id:w.id,handler:(S,...D)=>m.run(S,...D),metadata:w.metadata})),Array.isArray(v))for(const S of v)d.push(e.MenuRegistry.appendMenuItem(S.id,{command:{...w,precondition:S.precondition===null?void 0:w.precondition},...S}));else v&&d.push(e.MenuRegistry.appendMenuItem(v.id,{command:{...w,precondition:v.precondition===null?void 0:w.precondition},...v}));if(h&&(d.push(e.MenuRegistry.appendMenuItem(i.CommandPalette,{command:w,when:w.precondition})),d.push(e.MenuRegistry.addCommand(w))),Array.isArray(C))for(const S of C)d.push(p.KeybindingsRegistry.registerKeybindingRule({...S,id:w.id,when:w.precondition?_.ContextKeyExpr.and(w.precondition,S.when):S.when}));else C&&d.push(p.KeybindingsRegistry.registerKeybindingRule({...C,id:w.id,when:w.precondition?_.ContextKeyExpr.and(w.precondition,C.when):C.when}));return{dispose(){(0,L.dispose)(d)}}}}),define(oe[709],re([1,0,48,239,3,29]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleTabFocusModeAction=void 0;class y extends L.Action2{static{this.ID="editor.action.toggleTabFocusMode"}constructor(){super({id:y.ID,title:E.localize2(323,"Toggle Tab Key Moves Focus"),precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},metadata:{description:E.localize2(324,"Determines whether the tab key moves focus around the workbench or inserts the tab character in the current editor. This is also called tab trapping, tab navigation, or tab focus mode.")},f1:!0})}run(){const b=!k.TabFocus.getTabFocusMode();k.TabFocus.setTabFocusMode(b),b?(0,c.alert)(E.localize(321,"Pressing Tab will now move focus to the next focusable element")):(0,c.alert)(E.localize(322,"Pressing Tab will now insert the tab character"))}}e.ToggleTabFocusModeAction=y,(0,L.registerAction2)(y)}),define(oe[399],re([1,0,259,652,12,121,3,2,5]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextScopedReplaceInput=e.ContextScopedFindInput=e.historyNavigationVisible=void 0,e.registerAndCreateHistoryNavigationContext=i,e.historyNavigationVisible=new E.RawContextKey("suggestWidgetVisible",!1,(0,y.localize)(1130,"Whether suggestion are visible"));const b="historyNavigationWidgetFocus",p="historyNavigationForwardsEnabled",n="historyNavigationBackwardsEnabled";let s;const t=[];function i(u,l){if(t.includes(l))throw new Error("Cannot register the same widget multiple times");t.push(l);const a=new f.DisposableStore,r=new E.RawContextKey(b,!1).bindTo(u),d=new E.RawContextKey(p,!0).bindTo(u),m=new E.RawContextKey(n,!0).bindTo(u),h=()=>{r.set(!0),s=l},v=()=>{r.set(!1),s===l&&(s=void 0)};return(0,_.isActiveElement)(l.element)&&h(),a.add(l.onDidFocus(()=>h())),a.add(l.onDidBlur(()=>v())),a.add((0,f.toDisposable)(()=>{t.splice(t.indexOf(l),1),v()})),{historyNavigationForwardsEnablement:d,historyNavigationBackwardsEnablement:m,dispose(){a.dispose()}}}let o=class extends c.FindInput{constructor(l,a,r,d){super(l,a,r);const m=this._register(d.createScoped(this.inputBox.element));this._register(i(m,this.inputBox))}};e.ContextScopedFindInput=o,e.ContextScopedFindInput=o=De([he(3,E.IContextKeyService)],o);let g=class extends k.ReplaceInput{constructor(l,a,r,d,m=!1){super(l,a,m,r);const h=this._register(d.createScoped(this.inputBox.element));this._register(i(h,this.inputBox))}};e.ContextScopedReplaceInput=g,e.ContextScopedReplaceInput=g=De([he(3,E.IContextKeyService)],g),L.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:E.ContextKeyExpr.and(E.ContextKeyExpr.has(b),E.ContextKeyExpr.equals(n,!0),E.ContextKeyExpr.not("isComposing"),e.historyNavigationVisible.isEqualTo(!1)),primary:16,secondary:[528],handler:u=>{s?.showPreviousValue()}}),L.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:E.ContextKeyExpr.and(E.ContextKeyExpr.has(b),E.ContextKeyExpr.equals(p,!0),E.ContextKeyExpr.not("isComposing"),e.historyNavigationVisible.isEqualTo(!1)),primary:18,secondary:[530],handler:u=>{s?.showNextValue()}})}),define(oe[153],re([1,0,18,8,82,2,59,19,22,9,4,78,134,3,29,24,12,17,399]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickSuggestionsOptions=e.CompletionItemModel=e.CompletionOptions=e.CompletionItem=e.suggestWidgetStatusbarMenu=e.Context=void 0,e.getSnippetSuggestSupport=m,e.provideSuggestionItems=v,e.getSuggestionComparator=I,e.showSimpleSuggestions=T,e.Context={Visible:l.historyNavigationVisible,HasFocusedSuggestion:new g.RawContextKey("suggestWidgetHasFocusedSuggestion",!1,(0,t.localize)(388,"Whether any suggestion is focused")),DetailsVisible:new g.RawContextKey("suggestWidgetDetailsVisible",!1,(0,t.localize)(389,"Whether suggestion details are visible")),MultipleSuggestions:new g.RawContextKey("suggestWidgetMultipleSuggestions",!1,(0,t.localize)(390,"Whether there are multiple suggestions to pick from")),MakesTextEdit:new g.RawContextKey("suggestionMakesTextEdit",!0,(0,t.localize)(391,"Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new g.RawContextKey("acceptSuggestionOnEnter",!0,(0,t.localize)(392,"Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new g.RawContextKey("suggestionHasInsertAndReplaceRange",!1,(0,t.localize)(393,"Whether the current suggestion has insert and replace behaviour")),InsertMode:new g.RawContextKey("suggestionInsertMode",void 0,{type:"string",description:(0,t.localize)(394,"Whether the default behaviour is to insert or replace")}),CanResolve:new g.RawContextKey("suggestionCanResolve",!1,(0,t.localize)(395,"Whether the current suggestion supports to resolve further details"))},e.suggestWidgetStatusbarMenu=new i.MenuId("suggestWidgetStatusBar");class a{constructor(R,N,O,x){this.position=R,this.completion=N,this.container=O,this.provider=x,this.isInvalid=!1,this.score=E.FuzzyScore.Default,this.distance=0,this.textLabel=typeof N.label=="string"?N.label:N.label?.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=N.sortText&&N.sortText.toLowerCase(),this.filterTextLow=N.filterText&&N.filterText.toLowerCase(),this.extensionId=N.extensionId,p.Range.isIRange(N.range)?(this.editStart=new b.Position(N.range.startLineNumber,N.range.startColumn),this.editInsertEnd=new b.Position(N.range.endLineNumber,N.range.endColumn),this.editReplaceEnd=new b.Position(N.range.endLineNumber,N.range.endColumn),this.isInvalid=this.isInvalid||p.Range.spansMultipleLines(N.range)||N.range.startLineNumber!==R.lineNumber):(this.editStart=new b.Position(N.range.insert.startLineNumber,N.range.insert.startColumn),this.editInsertEnd=new b.Position(N.range.insert.endLineNumber,N.range.insert.endColumn),this.editReplaceEnd=new b.Position(N.range.replace.endLineNumber,N.range.replace.endColumn),this.isInvalid=this.isInvalid||p.Range.spansMultipleLines(N.range.insert)||p.Range.spansMultipleLines(N.range.replace)||N.range.insert.startLineNumber!==R.lineNumber||N.range.replace.startLineNumber!==R.lineNumber||N.range.insert.startColumn!==N.range.replace.startColumn),typeof x.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(R){if(!this._resolveCache){const N=R.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),O=new y.StopWatch(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,R)).then(x=>{Object.assign(this.completion,x),this._resolveDuration=O.elapsed()},x=>{(0,k.isCancellationError)(x)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{N.dispose()})}return this._resolveCache}}e.CompletionItem=a;class r{static{this.default=new r}constructor(R=2,N=new Set,O=new Set,x=new Map,F=!0){this.snippetSortOrder=R,this.kindFilter=N,this.providerFilter=O,this.providerItemsToReuse=x,this.showDeprecated=F}}e.CompletionOptions=r;let d;function m(){return d}class h{constructor(R,N,O,x){this.items=R,this.needsClipboard=N,this.durations=O,this.disposable=x}}e.CompletionItemModel=h;async function v(A,R,N,O=r.default,x={triggerKind:0},F=c.CancellationToken.None){const W=new y.StopWatch;N=N.clone();const z=R.getWordAtPosition(N),q=z?new p.Range(N.lineNumber,z.startColumn,N.lineNumber,z.endColumn):p.Range.fromPositions(N),H={replace:q,insert:q.setEndPosition(N.lineNumber,N.column)},K=[],U=new L.DisposableStore,Y=[];let Q=!1;const X=(P,te,se)=>{let ue=!1;if(!te)return ue;for(const ge of te.suggestions)if(!O.kindFilter.has(ge.kind)){if(!O.showDeprecated&&ge?.tags?.includes(1))continue;ge.range||(ge.range=H),ge.sortText||(ge.sortText=typeof ge.label=="string"?ge.label:ge.label.label),!Q&&ge.insertTextRules&&ge.insertTextRules&4&&(Q=s.SnippetParser.guessNeedsClipboard(ge.insertText)),K.push(new a(N,ge,te,P)),ue=!0}return(0,L.isDisposable)(te)&&U.add(te),Y.push({providerName:P._debugDisplayName??"unknown_provider",elapsedProvider:te.duration??-1,elapsedOverall:se.elapsed()}),ue},G=(async()=>{if(!d||O.kindFilter.has(27))return;const P=O.providerItemsToReuse.get(d);if(P){P.forEach(ue=>K.push(ue));return}if(O.providerFilter.size>0&&!O.providerFilter.has(d))return;const te=new y.StopWatch,se=await d.provideCompletionItems(R,N,x,F);X(d,se,te)})();for(const P of A.orderedGroups(R)){let te=!1;if(await Promise.all(P.map(async se=>{if(O.providerItemsToReuse.has(se)){const ue=O.providerItemsToReuse.get(se);ue.forEach(ge=>K.push(ge)),te=te||ue.length>0;return}if(!(O.providerFilter.size>0&&!O.providerFilter.has(se)))try{const ue=new y.StopWatch,ge=await se.provideCompletionItems(R,N,x,F);te=X(se,ge,ue)||te}catch(ue){(0,k.onUnexpectedExternalError)(ue)}})),te||F.isCancellationRequested)break}return await G,F.isCancellationRequested?(U.dispose(),Promise.reject(new k.CancellationError)):new h(K.sort(I(O.snippetSortOrder)),Q,{entries:Y,elapsed:W.elapsed()},U)}function C(A,R){if(A.sortTextLow&&R.sortTextLow){if(A.sortTextLow<R.sortTextLow)return-1;if(A.sortTextLow>R.sortTextLow)return 1}return A.textLabel<R.textLabel?-1:A.textLabel>R.textLabel?1:A.completion.kind-R.completion.kind}function w(A,R){if(A.completion.kind!==R.completion.kind){if(A.completion.kind===27)return-1;if(R.completion.kind===27)return 1}return C(A,R)}function S(A,R){if(A.completion.kind!==R.completion.kind){if(A.completion.kind===27)return 1;if(R.completion.kind===27)return-1}return C(A,R)}const D=new Map;D.set(0,w),D.set(2,S),D.set(1,C);function I(A){return D.get(A)}o.CommandsRegistry.registerCommand("_executeCompletionItemProvider",async(A,...R)=>{const[N,O,x,F]=R;(0,f.assertType)(_.URI.isUri(N)),(0,f.assertType)(b.Position.isIPosition(O)),(0,f.assertType)(typeof x=="string"||!x),(0,f.assertType)(typeof F=="number"||!F);const{completionProvider:W}=A.get(u.ILanguageFeaturesService),z=await A.get(n.ITextModelService).createModelReference(N);try{const q={incomplete:!1,suggestions:[]},H=[],K=z.object.textEditorModel.validatePosition(O),U=await v(W,z.object.textEditorModel,K,void 0,{triggerCharacter:x??void 0,triggerKind:x?1:0});for(const Y of U.items)H.length<(F??0)&&H.push(Y.resolve(c.CancellationToken.None)),q.incomplete=q.incomplete||Y.container.incomplete,q.suggestions.push(Y.completion);try{return await Promise.all(H),q}finally{setTimeout(()=>U.disposable.dispose(),100)}}finally{z.dispose()}});function T(A,R){A.getContribution("editor.contrib.suggestController")?.triggerSuggest(new Set().add(R),void 0,!0)}class M{static isAllOff(R){return R.other==="off"&&R.comments==="off"&&R.strings==="off"}static isAllOn(R){return R.other==="on"&&R.comments==="on"&&R.strings==="on"}static valueFor(R,N){switch(N){case 1:return R.comments;case 2:return R.strings;default:return R.other}}}e.QuickSuggestionsOptions=M}),define(oe[710],re([1,0,16,3,12,178,121,270,63]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const b={weight:200,when:E.ContextKeyExpr.and(E.ContextKeyExpr.equals(f.quickInputTypeContextKeyValue,"quickPick"),f.inQuickInputContext),metadata:{description:(0,k.localize)(1078,"Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function p(g,u={}){y.KeybindingsRegistry.registerCommandAndKeybindingRule({...b,...g,secondary:s(g.primary,g.secondary??[],u)})}const n=c.isMacintosh?256:2048;function s(g,u,l={}){return l.withAltMod&&u.push(512+g),l.withCtrlMod&&(u.push(n+g),l.withAltMod&&u.push(512+n+g)),l.withCmdMod&&c.isMacintosh&&(u.push(2048+g),l.withCtrlMod&&u.push(2304+g),l.withAltMod&&(u.push(2560+g),l.withCtrlMod&&u.push(2816+g))),u}function t(g,u){return l=>{const a=l.get(_.IQuickInputService).currentQuickInput;if(a)return u&&a.quickNavigate?a.focus(u):a.focus(g)}}p({id:"quickInput.pageNext",primary:12,handler:t(_.QuickPickFocus.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),p({id:"quickInput.pagePrevious",primary:11,handler:t(_.QuickPickFocus.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0}),p({id:"quickInput.first",primary:n+14,handler:t(_.QuickPickFocus.First)},{withAltMod:!0,withCmdMod:!0}),p({id:"quickInput.last",primary:n+13,handler:t(_.QuickPickFocus.Last)},{withAltMod:!0,withCmdMod:!0}),p({id:"quickInput.next",primary:18,handler:t(_.QuickPickFocus.Next)},{withCtrlMod:!0}),p({id:"quickInput.previous",primary:16,handler:t(_.QuickPickFocus.Previous)},{withCtrlMod:!0});const i=(0,k.localize)(1079,"If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),o=(0,k.localize)(1080,"If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");c.isMacintosh?(p({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:2066,handler:t(_.QuickPickFocus.NextSeparator,_.QuickPickFocus.Next),metadata:{description:i}}),p({id:"quickInput.nextSeparator",primary:2578,secondary:[2322],handler:t(_.QuickPickFocus.NextSeparator)},{withCtrlMod:!0}),p({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:2064,handler:t(_.QuickPickFocus.PreviousSeparator,_.QuickPickFocus.Previous),metadata:{description:o}}),p({id:"quickInput.previousSeparator",primary:2576,secondary:[2320],handler:t(_.QuickPickFocus.PreviousSeparator)},{withCtrlMod:!0})):(p({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:530,handler:t(_.QuickPickFocus.NextSeparator,_.QuickPickFocus.Next),metadata:{description:i}}),p({id:"quickInput.nextSeparator",primary:2578,handler:t(_.QuickPickFocus.NextSeparator)}),p({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:528,handler:t(_.QuickPickFocus.PreviousSeparator,_.QuickPickFocus.Previous),metadata:{description:o}}),p({id:"quickInput.previousSeparator",primary:2576,handler:t(_.QuickPickFocus.PreviousSeparator)})),p({id:"quickInput.acceptInBackground",when:E.ContextKeyExpr.and(b.when,E.ContextKeyExpr.or(L.InputFocusedContext.negate(),f.endOfQuickInputBoxContext)),primary:17,weight:250,handler:g=>{g.get(_.IQuickInputService).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0})}),define(oe[154],re([1,0,13,2,38]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickAccessRegistry=e.Extensions=e.DefaultQuickAccessFilterValue=void 0;var L;(function(f){f[f.PRESERVE=0]="PRESERVE",f[f.LAST=1]="LAST"})(L||(e.DefaultQuickAccessFilterValue=L={})),e.Extensions={Quickaccess:"workbench.contributions.quickaccess"};class y{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(_){return _.prefix.length===0?this.defaultProvider=_:this.providers.push(_),this.providers.sort((b,p)=>p.prefix.length-b.prefix.length),(0,k.toDisposable)(()=>{this.providers.splice(this.providers.indexOf(_),1),this.defaultProvider===_&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return(0,c.coalesce)([this.defaultProvider,...this.providers])}getQuickAccessProvider(_){return _&&this.providers.find(p=>_.startsWith(p.prefix))||void 0||this.defaultProvider}}e.QuickAccessRegistry=y,E.Registry.add(e.Extensions.Quickaccess,new y)}),define(oe[711],re([1,0,3,38,2,31,154,63]),function(ae,e,c,k,E,L,y,f){"use strict";var _;Object.defineProperty(e,"__esModule",{value:!0}),e.HelpQuickAccessProvider=void 0;let b=class{static{_=this}static{this.PREFIX="?"}constructor(n,s){this.quickInputService=n,this.keybindingService=s,this.registry=k.Registry.as(y.Extensions.Quickaccess)}provide(n){const s=new E.DisposableStore;return s.add(n.onDidAccept(()=>{const[t]=n.selectedItems;t&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})})),s.add(n.onDidChangeValue(t=>{const i=this.registry.getQuickAccessProvider(t.substr(_.PREFIX.length));i&&i.prefix&&i.prefix!==_.PREFIX&&this.quickInputService.quickAccess.show(i.prefix,{preserveValue:!0})})),n.items=this.getQuickAccessProviders().filter(t=>t.prefix!==_.PREFIX),s}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort((s,t)=>s.prefix.localeCompare(t.prefix)).flatMap(s=>this.createPicks(s))}createPicks(n){return n.helpEntries.map(s=>{const t=s.prefix||n.prefix,i=t||"\u2026";return{prefix:t,label:i,keybinding:s.commandId?this.keybindingService.lookupKeybinding(s.commandId):void 0,ariaLabel:(0,c.localize)(1088,"{0}, {1}",i,s.description),description:s.description}})}};e.HelpQuickAccessProvider=b,e.HelpQuickAccessProvider=b=_=De([he(0,f.IQuickInputService),he(1,L.IKeybindingService)],b)}),define(oe[712],re([1,0,38,154,106,711]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),c.Registry.as(k.Extensions.Quickaccess).registerQuickAccessProvider({ctor:L.HelpQuickAccessProvider,prefix:"",helpEntries:[{description:E.QuickHelpNLS.helpQuickAccessActionLabel}]})}),define(oe[713],re([1,0,14,18,6,2,7,154,63,38]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickAccessController=void 0;let p=class extends L.Disposable{constructor(s,t){super(),this.quickInputService=s,this.instantiationService=t,this.registry=b.Registry.as(f.Extensions.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0}show(s="",t){this.doShowOrPick(s,!1,t)}doShowOrPick(s,t,i){const[o,g]=this.getOrInstantiateProvider(s,i?.enabledProviderPrefixes),u=this.visibleQuickAccess,l=u?.descriptor;if(u&&g&&l===g){s!==g.prefix&&!i?.preserveValue&&(u.picker.value=s),this.adjustValueSelection(u.picker,g,i);return}if(g&&!i?.preserveValue){let C;if(u&&l&&l!==g){const w=u.value.substr(l.prefix.length);w&&(C=`${g.prefix}${w}`)}if(!C){const w=o?.defaultFilterValue;w===f.DefaultQuickAccessFilterValue.LAST?C=this.lastAcceptedPickerValues.get(g):typeof w=="string"&&(C=`${g.prefix}${w}`)}typeof C=="string"&&(s=C)}const a=u?.picker?.valueSelection,r=u?.picker?.value,d=new L.DisposableStore,m=d.add(this.quickInputService.createQuickPick());m.value=s,this.adjustValueSelection(m,g,i),m.placeholder=i?.placeholder??g?.placeholder,m.quickNavigate=i?.quickNavigateConfiguration,m.hideInput=!!m.quickNavigate&&!u,(typeof i?.itemActivation=="number"||i?.quickNavigateConfiguration)&&(m.itemActivation=i?.itemActivation??_.ItemActivation.SECOND),m.contextKey=g?.contextKey,m.filterValue=C=>C.substring(g?g.prefix.length:0);let h;t&&(h=new c.DeferredPromise,d.add(E.Event.once(m.onWillAccept)(C=>{C.veto(),m.hide()}))),d.add(this.registerPickerListeners(m,o,g,s,i));const v=d.add(new k.CancellationTokenSource);if(o&&d.add(o.provide(m,v.token,i?.providerOptions)),E.Event.once(m.onDidHide)(()=>{m.selectedItems.length===0&&v.cancel(),d.dispose(),h?.complete(m.selectedItems.slice(0))}),m.show(),a&&r===s&&(m.valueSelection=a),t)return h?.p}adjustValueSelection(s,t,i){let o;i?.preserveValue?o=[s.value.length,s.value.length]:o=[t?.prefix.length??0,s.value.length],s.valueSelection=o}registerPickerListeners(s,t,i,o,g){const u=new L.DisposableStore,l=this.visibleQuickAccess={picker:s,descriptor:i,value:o};return u.add((0,L.toDisposable)(()=>{l===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),u.add(s.onDidChangeValue(a=>{const[r]=this.getOrInstantiateProvider(a,g?.enabledProviderPrefixes);r!==t?this.show(a,{enabledProviderPrefixes:g?.enabledProviderPrefixes,preserveValue:!0,providerOptions:g?.providerOptions}):l.value=a})),i&&u.add(s.onDidAccept(()=>{this.lastAcceptedPickerValues.set(i,s.value)})),u}getOrInstantiateProvider(s,t){const i=this.registry.getQuickAccessProvider(s);if(!i||t&&!t?.includes(i.prefix))return[void 0,void 0];let o=this.mapProviderToDescriptor.get(i);return o||(o=this.instantiationService.createInstance(i.ctor),this.mapProviderToDescriptor.set(i,o)),[o,i]}};e.QuickAccessController=p,e.QuickAccessController=p=De([he(0,_.IQuickInputService),he(1,y.IInstantiationService)],p)}),define(oe[714],re([1,0,26,30,110,553]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SeverityIcon=void 0;var L;(function(y){function f(_){switch(_){case E.default.Ignore:return"severity-ignore "+k.ThemeIcon.asClassName(c.Codicon.info);case E.default.Info:return k.ThemeIcon.asClassName(c.Codicon.info);case E.default.Warning:return k.ThemeIcon.asClassName(c.Codicon.warning);case E.default.Error:return k.ThemeIcon.asClassName(c.Codicon.error);default:return""}}y.className=f})(L||(e.SeverityIcon=L={}))}),define(oe[100],re([1,0,6,2,19,463,7]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStorageService=e.AbstractStorageService=e.WillSaveStateReason=e.IStorageService=e.TARGET_KEY=void 0,e.loadKeyTargets=_,e.TARGET_KEY="__$__targetStorageMarker",e.IStorageService=(0,y.createDecorator)("storageService");var f;(function(n){n[n.NONE=0]="NONE",n[n.SHUTDOWN=1]="SHUTDOWN"})(f||(e.WillSaveStateReason=f={}));function _(n){const s=n.get(e.TARGET_KEY);if(s)try{return JSON.parse(s)}catch{}return Object.create(null)}class b extends k.Disposable{static{this.DEFAULT_FLUSH_INTERVAL=60*1e3}constructor(s={flushInterval:b.DEFAULT_FLUSH_INTERVAL}){super(),this.options=s,this._onDidChangeValue=this._register(new c.PauseableEmitter),this._onDidChangeTarget=this._register(new c.PauseableEmitter),this._onWillSaveState=this._register(new c.Emitter),this.onWillSaveState=this._onWillSaveState.event,this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0}onDidChangeValue(s,t,i){return c.Event.filter(this._onDidChangeValue.event,o=>o.scope===s&&(t===void 0||o.key===t),i)}emitDidChangeValue(s,t){const{key:i,external:o}=t;if(i===e.TARGET_KEY){switch(s){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:s})}else this._onDidChangeValue.fire({scope:s,key:i,target:this.getKeyTargets(s)[i],external:o})}get(s,t,i){return this.getStorage(t)?.get(s,i)}getBoolean(s,t,i){return this.getStorage(t)?.getBoolean(s,i)}getNumber(s,t,i){return this.getStorage(t)?.getNumber(s,i)}store(s,t,i,o,g=!1){if((0,E.isUndefinedOrNull)(t)){this.remove(s,i,g);return}this.withPausedEmitters(()=>{this.updateKeyTarget(s,i,o),this.getStorage(i)?.set(s,t,g)})}remove(s,t,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(s,t,void 0),this.getStorage(t)?.delete(s,i)})}withPausedEmitters(s){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{s()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}updateKeyTarget(s,t,i,o=!1){const g=this.getKeyTargets(t);typeof i=="number"?g[s]!==i&&(g[s]=i,this.getStorage(t)?.set(e.TARGET_KEY,JSON.stringify(g),o)):typeof g[s]=="number"&&(delete g[s],this.getStorage(t)?.set(e.TARGET_KEY,JSON.stringify(g),o))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(s){switch(s){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(s){const t=this.getStorage(s);return t?_(t):Object.create(null)}}e.AbstractStorageService=b;class p extends b{constructor(){super(),this.applicationStorage=this._register(new L.Storage(new L.InMemoryStorageDatabase,{hint:L.StorageHint.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new L.Storage(new L.InMemoryStorageDatabase,{hint:L.StorageHint.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new L.Storage(new L.InMemoryStorageDatabase,{hint:L.StorageHint.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(s=>this.emitDidChangeValue(1,s))),this._register(this.profileStorage.onDidChangeStorage(s=>this.emitDidChangeValue(0,s))),this._register(this.applicationStorage.onDidChangeStorage(s=>this.emitDidChangeValue(-1,s)))}getStorage(s){switch(s){case-1:return this.applicationStorage;case 0:return this.profileStorage;default:return this.workspaceStorage}}}e.InMemoryStorageService=p}),define(oe[715],re([1,0,6,45,4,380,49,7,100,52,5]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeLensCache=e.ICodeLensCache=void 0,e.ICodeLensCache=(0,f.createDecorator)("ICodeLensCache");class n{constructor(i,o){this.lineCount=i,this.data=o}}let s=class{constructor(i){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new k.LRUCache(20,.75);const o="codelens/cache";(0,p.runWhenWindowIdle)(b.mainWindow,()=>i.remove(o,1));const g="codelens/cache2",u=i.get(g,1,"{}");this._deserialize(u);const l=c.Event.filter(i.onWillSaveState,a=>a.reason===_.WillSaveStateReason.SHUTDOWN);c.Event.once(l)(a=>{i.store(g,this._serialize(),1,1)})}put(i,o){const g=o.lenses.map(a=>({range:a.symbol.range,command:a.symbol.command&&{id:"",title:a.symbol.command?.title}})),u=new L.CodeLensModel;u.add({lenses:g,dispose:()=>{}},this._fakeProvider);const l=new n(i.getLineCount(),u);this._cache.set(i.uri.toString(),l)}get(i){const o=this._cache.get(i.uri.toString());return o&&o.lineCount===i.getLineCount()?o.data:void 0}delete(i){this._cache.delete(i.uri.toString())}_serialize(){const i=Object.create(null);for(const[o,g]of this._cache){const u=new Set;for(const l of g.data.lenses)u.add(l.symbol.range.startLineNumber);i[o]={lineCount:g.lineCount,lines:[...u.values()]}}return JSON.stringify(i)}_deserialize(i){try{const o=JSON.parse(i);for(const g in o){const u=o[g],l=[];for(const r of u.lines)l.push({range:new E.Range(r,1,r,11)});const a=new L.CodeLensModel;a.add({lenses:l,dispose(){}},this._fakeProvider),this._cache.set(g,new n(u.lineCount,a))}}catch{}}};e.CodeLensCache=s,e.CodeLensCache=s=De([he(0,_.IStorageService)],s),(0,y.registerSingleton)(e.ICodeLensCache,s,1)}),define(oe[400],re([1,0,14,2,45,227,28,27,49,7,100]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.ISuggestMemoryService=e.SuggestMemoryService=e.PrefixMemory=e.LRUMemory=e.NoMemory=e.Memory=void 0;class s{constructor(l){this.name=l}select(l,a,r){if(r.length===0)return 0;const d=r[0].score[0];for(let m=0;m<r.length;m++){const{score:h,completion:v}=r[m];if(h[0]!==d)break;if(v.preselect)return m}return 0}}e.Memory=s;class t extends s{constructor(){super("first")}memorize(l,a,r){}toJSON(){}fromJSON(){}}e.NoMemory=t;class i extends s{constructor(){super("recentlyUsed"),this._cache=new E.LRUCache(300,.66),this._seq=0}memorize(l,a,r){const d=`${l.getLanguageId()}/${r.textLabel}`;this._cache.set(d,{touch:this._seq++,type:r.completion.kind,insertText:r.completion.insertText})}select(l,a,r){if(r.length===0)return 0;const d=l.getLineContent(a.lineNumber).substr(a.column-10,a.column-1);if(/\s$/.test(d))return super.select(l,a,r);const m=r[0].score[0];let h=-1,v=-1,C=-1;for(let w=0;w<r.length&&r[w].score[0]===m;w++){const S=`${l.getLanguageId()}/${r[w].textLabel}`,D=this._cache.peek(S);if(D&&D.touch>C&&D.type===r[w].completion.kind&&D.insertText===r[w].completion.insertText&&(C=D.touch,v=w),r[w].completion.preselect&&h===-1)return h=w}return v!==-1?v:h!==-1?h:0}toJSON(){return this._cache.toJSON()}fromJSON(l){this._cache.clear();const a=0;for(const[r,d]of l)d.touch=a,d.type=typeof d.type=="number"?d.type:y.CompletionItemKinds.fromString(d.type),this._cache.set(r,d);this._seq=this._cache.size}}e.LRUMemory=i;class o extends s{constructor(){super("recentlyUsedByPrefix"),this._trie=L.TernarySearchTree.forStrings(),this._seq=0}memorize(l,a,r){const{word:d}=l.getWordUntilPosition(a),m=`${l.getLanguageId()}/${d}`;this._trie.set(m,{type:r.completion.kind,insertText:r.completion.insertText,touch:this._seq++})}select(l,a,r){const{word:d}=l.getWordUntilPosition(a);if(!d)return super.select(l,a,r);const m=`${l.getLanguageId()}/${d}`;let h=this._trie.get(m);if(h||(h=this._trie.findSubstr(m)),h)for(let v=0;v<r.length;v++){const{kind:C,insertText:w}=r[v].completion;if(C===h.type&&w===h.insertText)return v}return super.select(l,a,r)}toJSON(){const l=[];return this._trie.forEach((a,r)=>l.push([r,a])),l.sort((a,r)=>-(a[1].touch-r[1].touch)).forEach((a,r)=>a[1].touch=r),l.slice(0,200)}fromJSON(l){if(this._trie.clear(),l.length>0){this._seq=l[0][1].touch+1;for(const[a,r]of l)r.type=typeof r.type=="number"?r.type:y.CompletionItemKinds.fromString(r.type),this._trie.set(a,r)}}}e.PrefixMemory=o;let g=class{static{n=this}static{this._strategyCtors=new Map([["recentlyUsedByPrefix",o],["recentlyUsed",i],["first",t]])}static{this._storagePrefix="suggest/memories"}constructor(l,a){this._storageService=l,this._configService=a,this._disposables=new k.DisposableStore,this._persistSoon=new c.RunOnceScheduler(()=>this._saveState(),500),this._disposables.add(l.onWillSaveState(r=>{r.reason===p.WillSaveStateReason.SHUTDOWN&&this._saveState()}))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(l,a,r){this._withStrategy(l,a).memorize(l,a,r),this._persistSoon.schedule()}select(l,a,r){return this._withStrategy(l,a).select(l,a,r)}_withStrategy(l,a){const r=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:l.getLanguageIdAtPosition(a.lineNumber,a.column),resource:l.uri});if(this._strategy?.name!==r){this._saveState();const d=n._strategyCtors.get(r)||t;this._strategy=new d;try{const h=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,v=this._storageService.get(`${n._storagePrefix}/${r}`,h);v&&this._strategy.fromJSON(JSON.parse(v))}catch{}}return this._strategy}_saveState(){if(this._strategy){const a=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,r=JSON.stringify(this._strategy);this._storageService.store(`${n._storagePrefix}/${this._strategy.name}`,r,a,1)}}};e.SuggestMemoryService=g,e.SuggestMemoryService=g=n=De([he(0,p.IStorageService),he(1,f.IConfigurationService)],g),e.ISuggestMemoryService=(0,b.createDecorator)("ISuggestMemories"),(0,_.registerSingleton)(e.ISuggestMemoryService,g,1)}),define(oe[401],re([1,0,14,6,2,29,24,12,41,100,13,3,31]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";var t,i;Object.defineProperty(e,"__esModule",{value:!0}),e.MenuService=void 0,e.createConfigureKeybindingAction=d;let o=class{constructor(h,v,C){this._commandService=h,this._keybindingService=v,this._hiddenStates=new g(C)}createMenu(h,v,C){return new a(h,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...C},this._commandService,this._keybindingService,v)}getMenuActions(h,v,C){const w=new a(h,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...C},this._commandService,this._keybindingService,v),S=w.getActions(C);return w.dispose(),S}resetHiddenStates(h){this._hiddenStates.reset(h)}};e.MenuService=o,e.MenuService=o=De([he(0,y.ICommandService),he(1,s.IKeybindingService),he(2,b.IStorageService)],o);let g=class{static{t=this}static{this._key="menu.hiddenCommands"}constructor(h){this._storageService=h,this._disposables=new E.DisposableStore,this._onDidChange=new k.Emitter,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const v=h.get(t._key,0,"{}");this._data=JSON.parse(v)}catch{this._data=Object.create(null)}this._disposables.add(h.onDidChangeValue(0,t._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const v=h.get(t._key,0,"{}");this._data=JSON.parse(v)}catch(v){console.log("FAILED to read storage after UPDATE",v)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(h,v){return this._hiddenByDefaultCache.get(`${h.id}/${v}`)??!1}setDefaultState(h,v,C){this._hiddenByDefaultCache.set(`${h.id}/${v}`,C)}isHidden(h,v){const C=this._isHiddenByDefault(h,v),w=this._data[h.id]?.includes(v)??!1;return C?!w:w}updateHidden(h,v,C){this._isHiddenByDefault(h,v)&&(C=!C);const S=this._data[h.id];if(C)S?S.indexOf(v)<0&&S.push(v):this._data[h.id]=[v];else if(S){const D=S.indexOf(v);D>=0&&(0,p.removeFastWithoutKeepingOrder)(S,D),S.length===0&&delete this._data[h.id]}this._persist()}reset(h){if(h===void 0)this._data=Object.create(null),this._persist();else{for(const{id:v}of h)this._data[v]&&delete this._data[v];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const h=JSON.stringify(this._data);this._storageService.store(t._key,h,0,0)}finally{this._ignoreChangeEvent=!1}}};g=t=De([he(0,b.IStorageService)],g);class u{constructor(h,v){this._id=h,this._collectContextKeysForSubmenus=v,this._menuGroups=[],this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const h=this._sort(L.MenuRegistry.getMenuItems(this._id));let v;for(const C of h){const w=C.group||"";(!v||v[0]!==w)&&(v=[w,[]],this._menuGroups.push(v)),v[1].push(C),this._collectContextKeys(C)}}_sort(h){return h}_collectContextKeys(h){if(u._fillInKbExprKeys(h.when,this._structureContextKeys),(0,L.isIMenuItem)(h)){if(h.command.precondition&&u._fillInKbExprKeys(h.command.precondition,this._preconditionContextKeys),h.command.toggled){const v=h.command.toggled.condition||h.command.toggled;u._fillInKbExprKeys(v,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&L.MenuRegistry.getMenuItems(h.submenu).forEach(this._collectContextKeys,this)}static _fillInKbExprKeys(h,v){if(h)for(const C of h.keys())v.add(C)}}let l=i=class extends u{constructor(h,v,C,w,S,D){super(h,C),this._hiddenStates=v,this._commandService=w,this._keybindingService=S,this._contextKeyService=D,this.refresh()}createActionGroups(h){const v=[];for(const C of this._menuGroups){const[w,S]=C;let D;for(const I of S)if(this._contextKeyService.contextMatchesRules(I.when)){const T=(0,L.isIMenuItem)(I);T&&this._hiddenStates.setDefaultState(this._id,I.command.id,!!I.isHiddenByDefault);const M=r(this._id,T?I.command:I,this._hiddenStates);if(T){const A=d(this._commandService,this._keybindingService,I.command.id,I.when);(D??=[]).push(new L.MenuItemAction(I.command,I.alt,h,M,A,this._contextKeyService,this._commandService))}else{const A=new i(I.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(h),R=_.Separator.join(...A.map(N=>N[1]));R.length>0&&(D??=[]).push(new L.SubmenuItemAction(I,M,R))}}D&&D.length>0&&v.push([w,D])}return v}_sort(h){return h.sort(i._compareMenuItems)}static _compareMenuItems(h,v){const C=h.group,w=v.group;if(C!==w){if(C){if(!w)return-1}else return 1;if(C==="navigation")return-1;if(w==="navigation")return 1;const I=C.localeCompare(w);if(I!==0)return I}const S=h.order||0,D=v.order||0;return S<D?-1:S>D?1:i._compareTitles((0,L.isIMenuItem)(h)?h.command.title:h.title,(0,L.isIMenuItem)(v)?v.command.title:v.title)}static _compareTitles(h,v){const C=typeof h=="string"?h:h.original,w=typeof v=="string"?v:v.original;return C.localeCompare(w)}};l=i=De([he(3,y.ICommandService),he(4,s.IKeybindingService),he(5,f.IContextKeyService)],l);let a=class{constructor(h,v,C,w,S,D){this._disposables=new E.DisposableStore,this._menuInfo=new l(h,v,C.emitEventsForSubmenuChanges,w,S,D);const I=new c.RunOnceScheduler(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},C.eventDebounceDelay);this._disposables.add(I),this._disposables.add(L.MenuRegistry.onDidChangeMenu(R=>{R.has(h)&&I.schedule()}));const T=this._disposables.add(new E.DisposableStore),M=R=>{let N=!1,O=!1,x=!1;for(const F of R)if(N=N||F.isStructuralChange,O=O||F.isEnablementChange,x=x||F.isToggleChange,N&&O&&x)break;return{menu:this,isStructuralChange:N,isEnablementChange:O,isToggleChange:x}},A=()=>{T.add(D.onDidChangeContext(R=>{const N=R.affectsSome(this._menuInfo.structureContextKeys),O=R.affectsSome(this._menuInfo.preconditionContextKeys),x=R.affectsSome(this._menuInfo.toggledContextKeys);(N||O||x)&&this._onDidChange.fire({menu:this,isStructuralChange:N,isEnablementChange:O,isToggleChange:x})})),T.add(v.onDidChange(R=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new k.DebounceEmitter({onWillAddFirstListener:A,onDidRemoveLastListener:T.clear.bind(T),delay:C.eventDebounceDelay,merge:M}),this.onDidChange=this._onDidChange.event}getActions(h){return this._menuInfo.createActionGroups(h)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};a=De([he(3,y.ICommandService),he(4,s.IKeybindingService),he(5,f.IContextKeyService)],a);function r(m,h,v){const C=(0,L.isISubmenuItem)(h)?h.submenu.id:h.id,w=typeof h.title=="string"?h.title:h.title.value,S=(0,_.toAction)({id:`hide/${m.id}/${C}`,label:(0,n.localize)(1165,"Hide '{0}'",w),run(){v.updateHidden(m,C,!0)}}),D=(0,_.toAction)({id:`toggle/${m.id}/${C}`,label:w,get checked(){return!v.isHidden(m,C)},run(){v.updateHidden(m,C,!!this.checked)}});return{hide:S,toggle:D,get isHidden(){return!D.checked}}}function d(m,h,v,C=void 0,w=!0){return(0,_.toAction)({id:`configureKeybinding/${v}`,label:(0,n.localize)(1166,"Configure Keybinding"),enabled:w,run(){const D=!!!h.lookupKeybinding(v)&&C?C.serialize():void 0;m.executeCommand("workbench.action.openGlobalKeybindings",`@command:${v}`+(D?` +when:${D}`:""))}})}}),define(oe[66],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ITelemetryService=void 0,e.ITelemetryService=(0,c.createDecorator)("telemetryService")}),define(oe[15],re([1,0,3,22,35,9,44,78,29,24,12,7,121,38,66,19,61,5]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectAllCommand=e.RedoCommand=e.UndoCommand=e.EditorExtensionsRegistry=e.EditorAction2=e.MultiEditorAction=e.EditorAction=e.EditorCommand=e.ProxyCommand=e.MultiCommand=e.Command=void 0,e.registerModelAndPositionCommand=C,e.registerEditorCommand=w,e.registerEditorAction=S,e.registerMultiEditorAction=D,e.registerInstantiatedEditorAction=I,e.registerEditorContribution=T;class l{constructor(x){this.id=x.id,this.precondition=x.precondition,this._kbOpts=x.kbOpts,this._menuOpts=x.menuOpts,this.metadata=x.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const x=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const F of x){let W=F.kbExpr;this.precondition&&(W?W=p.ContextKeyExpr.and(W,this.precondition):W=this.precondition);const z={id:this.id,weight:F.weight,args:F.args,when:W,primary:F.primary,secondary:F.secondary,win:F.win,linux:F.linux,mac:F.mac};s.KeybindingsRegistry.registerKeybindingRule(z)}}b.CommandsRegistry.registerCommand({id:this.id,handler:(x,F)=>this.runCommand(x,F),metadata:this.metadata})}_registerMenuItem(x){_.MenuRegistry.appendMenuItem(x.menuId,{group:x.group,command:{id:this.id,title:x.title,icon:x.icon,precondition:this.precondition},when:x.when,order:x.order})}}e.Command=l;class a extends l{constructor(){super(...arguments),this._implementations=[]}addImplementation(x,F,W,z){return this._implementations.push({priority:x,name:F,implementation:W,when:z}),this._implementations.sort((q,H)=>H.priority-q.priority),{dispose:()=>{for(let q=0;q<this._implementations.length;q++)if(this._implementations[q].implementation===W){this._implementations.splice(q,1);return}}}}runCommand(x,F){const W=x.get(g.ILogService),z=x.get(p.IContextKeyService);W.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const q of this._implementations){if(q.when){const K=z.getContext((0,u.getActiveElement)());if(!q.when.evaluate(K))continue}const H=q.implementation(x,F);if(H)return W.trace(`Command '${this.id}' was handled by '${q.name}'.`),typeof H=="boolean"?void 0:H}W.trace(`The Command '${this.id}' was not handled by any implementation.`)}}e.MultiCommand=a;class r extends l{constructor(x,F){super(F),this.command=x}runCommand(x,F){return this.command.runCommand(x,F)}}e.ProxyCommand=r;class d extends l{static bindToContribution(x){return class extends d{constructor(W){super(W),this._callback=W.handler}runEditorCommand(W,z,q){const H=x(z);H&&this._callback(H,q)}}}static runEditorCommand(x,F,W,z){const q=x.get(E.ICodeEditorService),H=q.getFocusedCodeEditor()||q.getActiveCodeEditor();if(H)return H.invokeWithinContext(K=>{if(K.get(p.IContextKeyService).contextMatchesRules(W??void 0))return z(K,H,F)})}runCommand(x,F){return d.runEditorCommand(x,F,this.precondition,(W,z,q)=>this.runEditorCommand(W,z,q))}}e.EditorCommand=d;class m extends d{static convertOptions(x){let F;Array.isArray(x.menuOpts)?F=x.menuOpts:x.menuOpts?F=[x.menuOpts]:F=[];function W(z){return z.menuId||(z.menuId=_.MenuId.EditorContext),z.title||(z.title=x.label),z.when=p.ContextKeyExpr.and(x.precondition,z.when),z}return Array.isArray(x.contextMenuOpts)?F.push(...x.contextMenuOpts.map(W)):x.contextMenuOpts&&F.push(W(x.contextMenuOpts)),x.menuOpts=F,x}constructor(x){super(m.convertOptions(x)),this.label=x.label,this.alias=x.alias}runEditorCommand(x,F,W){return this.reportTelemetry(x,F),this.run(x,F,W||{})}reportTelemetry(x,F){x.get(i.ITelemetryService).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}e.EditorAction=m;class h extends m{constructor(){super(...arguments),this._implementations=[]}addImplementation(x,F){return this._implementations.push([x,F]),this._implementations.sort((W,z)=>z[0]-W[0]),{dispose:()=>{for(let W=0;W<this._implementations.length;W++)if(this._implementations[W][1]===F){this._implementations.splice(W,1);return}}}}run(x,F,W){for(const z of this._implementations){const q=z[1](x,F,W);if(q)return typeof q=="boolean"?void 0:q}}}e.MultiEditorAction=h;class v extends _.Action2{run(x,...F){const W=x.get(E.ICodeEditorService),z=W.getFocusedCodeEditor()||W.getActiveCodeEditor();if(z)return z.invokeWithinContext(q=>{const H=q.get(p.IContextKeyService),K=q.get(g.ILogService);if(!H.contextMatchesRules(this.desc.precondition??void 0)){K.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,this.desc.precondition?.serialize());return}return this.runEditorCommand(q,z,...F)})}}e.EditorAction2=v;function C(O,x){b.CommandsRegistry.registerCommand(O,function(F,...W){const z=F.get(n.IInstantiationService),[q,H]=W;(0,o.assertType)(k.URI.isUri(q)),(0,o.assertType)(L.Position.isIPosition(H));const K=F.get(y.IModelService).getModel(q);if(K){const U=L.Position.lift(H);return z.invokeFunction(x,K,U,...W.slice(2))}return F.get(f.ITextModelService).createModelReference(q).then(U=>new Promise((Y,Q)=>{try{const X=z.invokeFunction(x,U.object.textEditorModel,L.Position.lift(H),W.slice(2));Y(X)}catch(X){Q(X)}}).finally(()=>{U.dispose()}))})}function w(O){return R.INSTANCE.registerEditorCommand(O),O}function S(O){const x=new O;return R.INSTANCE.registerEditorAction(x),x}function D(O){return R.INSTANCE.registerEditorAction(O),O}function I(O){R.INSTANCE.registerEditorAction(O)}function T(O,x,F){R.INSTANCE.registerEditorContribution(O,x,F)}var M;(function(O){function x(H){return R.INSTANCE.getEditorCommand(H)}O.getEditorCommand=x;function F(){return R.INSTANCE.getEditorActions()}O.getEditorActions=F;function W(){return R.INSTANCE.getEditorContributions()}O.getEditorContributions=W;function z(H){return R.INSTANCE.getEditorContributions().filter(K=>H.indexOf(K.id)>=0)}O.getSomeEditorContributions=z;function q(){return R.INSTANCE.getDiffEditorContributions()}O.getDiffEditorContributions=q})(M||(e.EditorExtensionsRegistry=M={}));const A={EditorCommonContributions:"editor.contributions"};class R{static{this.INSTANCE=new R}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(x,F,W){this.editorContributions.push({id:x,ctor:F,instantiation:W})}getEditorContributions(){return this.editorContributions.slice(0)}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(x){x.register(),this.editorActions.push(x)}getEditorActions(){return this.editorActions}registerEditorCommand(x){x.register(),this.editorCommands[x.id]=x}getEditorCommand(x){return this.editorCommands[x]||null}}t.Registry.add(A.EditorCommonContributions,R.INSTANCE);function N(O){return O.register(),O}e.UndoCommand=N(new a({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:_.MenuId.MenubarEditMenu,group:"1_do",title:c.localize(1822,"&&Undo"),order:1},{menuId:_.MenuId.CommandPalette,group:"",title:c.localize(1823,"Undo"),order:1}]})),N(new r(e.UndoCommand,{id:"default:undo",precondition:void 0})),e.RedoCommand=N(new a({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:_.MenuId.MenubarEditMenu,group:"1_do",title:c.localize(1824,"&&Redo"),order:2},{menuId:_.MenuId.CommandPalette,group:"",title:c.localize(1825,"Redo"),order:1}]})),N(new r(e.RedoCommand,{id:"default:redo",precondition:void 0})),e.SelectAllCommand=N(new a({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:_.MenuId.MenubarSelectionMenu,group:"1_basic",title:c.localize(1826,"&&Select All"),order:1},{menuId:_.MenuId.CommandPalette,group:"",title:c.localize(1827,"Select All"),order:1}]}))}),define(oe[212],re([1,0,3,64,19,48,15,35,576,77,245,246,275,9,4,20,12,121,5,211]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CoreEditingCommands=e.CoreNavigationCommands=e.RevealLine_=e.EditorScroll_=e.CoreEditorCommand=void 0;const r=0;class d extends y.EditorCommand{runEditorCommand(R,N,O){const x=N._getViewModel();x&&this.runCoreEditorCommand(x,O||{})}}e.CoreEditorCommand=d;var m;(function(A){const R=function(O){if(!E.isObject(O))return!1;const x=O;return!(!E.isString(x.to)||!E.isUndefined(x.by)&&!E.isString(x.by)||!E.isUndefined(x.value)&&!E.isNumber(x.value)||!E.isUndefined(x.revealCursor)&&!E.isBoolean(x.revealCursor))};A.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:R,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},A.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},A.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function N(O){let x;switch(O.to){case A.RawDirection.Up:x=1;break;case A.RawDirection.Right:x=2;break;case A.RawDirection.Down:x=3;break;case A.RawDirection.Left:x=4;break;default:return null}let F;switch(O.by){case A.RawUnit.Line:F=1;break;case A.RawUnit.WrappedLine:F=2;break;case A.RawUnit.Page:F=3;break;case A.RawUnit.HalfPage:F=4;break;case A.RawUnit.Editor:F=5;break;case A.RawUnit.Column:F=6;break;default:F=2}const W=Math.floor(O.value||1),z=!!O.revealCursor;return{direction:x,unit:F,value:W,revealCursor:z,select:!!O.select}}A.parse=N})(m||(e.EditorScroll_=m={}));var h;(function(A){const R=function(N){if(!E.isObject(N))return!1;const O=N;return!(!E.isNumber(O.lineNumber)&&!E.isString(O.lineNumber)||!E.isUndefined(O.at)&&!E.isString(O.at))};A.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:R,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},A.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(h||(e.RevealLine_=h={}));class v{constructor(R){R.addImplementation(1e4,"code-editor",(N,O)=>{const x=N.get(f.ICodeEditorService).getFocusedCodeEditor();return x&&x.hasTextFocus()?this._runEditorCommand(N,x,O):!1}),R.addImplementation(1e3,"generic-dom-input-textarea",(N,O)=>{const x=(0,l.getActiveElement)();return x&&["input","textarea"].indexOf(x.tagName.toLowerCase())>=0?(this.runDOMCommand(x),!0):!1}),R.addImplementation(0,"generic-dom",(N,O)=>{const x=N.get(f.ICodeEditorService).getActiveCodeEditor();return x?(x.focus(),this._runEditorCommand(N,x,O)):!1})}_runEditorCommand(R,N,O){const x=this.runEditorCommand(R,N,O);return x||!0}}var C;(function(A){class R extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){if(!ue.position)return;se.model.pushStackElement(),se.setCursorStates(ue.source,3,[n.CursorMoveCommands.moveTo(se,se.getPrimaryCursorState(),this._inSelectionMode,ue.position,ue.viewPosition)])&&ue.revealType!==2&&se.revealAllCursors(ue.source,!0,!0)}}A.MoveTo=(0,y.registerEditorCommand)(new R({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),A.MoveToSelect=(0,y.registerEditorCommand)(new R({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class N extends d{runCoreEditorCommand(se,ue){se.model.pushStackElement();const ge=this._getColumnSelectResult(se,se.getPrimaryCursorState(),se.getCursorColumnSelectData(),ue);ge!==null&&(se.setCursorStates(ue.source,3,ge.viewStates.map(pe=>b.CursorState.fromViewState(pe))),se.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:ge.fromLineNumber,fromViewVisualColumn:ge.fromVisualColumn,toViewLineNumber:ge.toLineNumber,toViewVisualColumn:ge.toVisualColumn}),ge.reversed?se.revealTopMostCursor(ue.source):se.revealBottomMostCursor(ue.source))}}A.ColumnSelect=(0,y.registerEditorCommand)(new class extends N{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(te,se,ue,ge){if(typeof ge.position>"u"||typeof ge.viewPosition>"u"||typeof ge.mouseColumn>"u")return null;const pe=te.model.validatePosition(ge.position),ce=te.coordinatesConverter.validateViewPosition(new t.Position(ge.viewPosition.lineNumber,ge.viewPosition.column),pe),ie=ge.doColumnSelect?ue.fromViewLineNumber:ce.lineNumber,ne=ge.doColumnSelect?ue.fromViewVisualColumn:ge.mouseColumn-1;return _.ColumnSelection.columnSelect(te.cursorConfig,te,ie,ne,ce.lineNumber,ge.mouseColumn-1)}}),A.CursorColumnSelectLeft=(0,y.registerEditorCommand)(new class extends N{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(te,se,ue,ge){return _.ColumnSelection.columnSelectLeft(te.cursorConfig,te,ue)}}),A.CursorColumnSelectRight=(0,y.registerEditorCommand)(new class extends N{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(te,se,ue,ge){return _.ColumnSelection.columnSelectRight(te.cursorConfig,te,ue)}});class O extends N{constructor(se){super(se),this._isPaged=se.isPaged}_getColumnSelectResult(se,ue,ge,pe){return _.ColumnSelection.columnSelectUp(se.cursorConfig,se,ge,this._isPaged)}}A.CursorColumnSelectUp=(0,y.registerEditorCommand)(new O({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3600,linux:{primary:0}}})),A.CursorColumnSelectPageUp=(0,y.registerEditorCommand)(new O({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3595,linux:{primary:0}}}));class x extends N{constructor(se){super(se),this._isPaged=se.isPaged}_getColumnSelectResult(se,ue,ge,pe){return _.ColumnSelection.columnSelectDown(se.cursorConfig,se,ge,this._isPaged)}}A.CursorColumnSelectDown=(0,y.registerEditorCommand)(new x({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3602,linux:{primary:0}}})),A.CursorColumnSelectPageDown=(0,y.registerEditorCommand)(new x({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3596,linux:{primary:0}}}));class F extends d{constructor(){super({id:"cursorMove",precondition:void 0,metadata:n.CursorMove.metadata})}runCoreEditorCommand(se,ue){const ge=n.CursorMove.parse(ue);ge&&this._runCursorMove(se,ue.source,ge)}_runCursorMove(se,ue,ge){se.model.pushStackElement(),se.setCursorStates(ue,3,F._move(se,se.getCursorStates(),ge)),se.revealAllCursors(ue,!0)}static _move(se,ue,ge){const pe=ge.select,ce=ge.value;switch(ge.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return n.CursorMoveCommands.simpleMove(se,ue,ge.direction,pe,ce,ge.unit);case 11:case 13:case 12:case 14:return n.CursorMoveCommands.viewportMove(se,ue,ge.direction,pe,ce);default:return null}}}A.CursorMoveImpl=F,A.CursorMove=(0,y.registerEditorCommand)(new F);class W extends d{constructor(se){super(se),this._staticArgs=se.args}runCoreEditorCommand(se,ue){let ge=this._staticArgs;this._staticArgs.value===-1&&(ge={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:ue.pageSize||se.cursorConfig.pageSize}),se.model.pushStackElement(),se.setCursorStates(ue.source,3,n.CursorMoveCommands.simpleMove(se,se.getCursorStates(),ge.direction,ge.select,ge.value,ge.unit)),se.revealAllCursors(ue.source,!0)}}A.CursorLeft=(0,y.registerEditorCommand)(new W({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),A.CursorLeftSelect=(0,y.registerEditorCommand)(new W({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1039}})),A.CursorRight=(0,y.registerEditorCommand)(new W({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),A.CursorRightSelect=(0,y.registerEditorCommand)(new W({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1041}})),A.CursorUp=(0,y.registerEditorCommand)(new W({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),A.CursorUpSelect=(0,y.registerEditorCommand)(new W({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),A.CursorPageUp=(0,y.registerEditorCommand)(new W({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:11}})),A.CursorPageUpSelect=(0,y.registerEditorCommand)(new W({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1035}})),A.CursorDown=(0,y.registerEditorCommand)(new W({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),A.CursorDownSelect=(0,y.registerEditorCommand)(new W({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),A.CursorPageDown=(0,y.registerEditorCommand)(new W({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:12}})),A.CursorPageDownSelect=(0,y.registerEditorCommand)(new W({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1036}})),A.CreateCursor=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(te,se){if(!se.position)return;let ue;se.wholeLine?ue=n.CursorMoveCommands.line(te,te.getPrimaryCursorState(),!1,se.position,se.viewPosition):ue=n.CursorMoveCommands.moveTo(te,te.getPrimaryCursorState(),!1,se.position,se.viewPosition);const ge=te.getCursorStates();if(ge.length>1){const pe=ue.modelState?ue.modelState.position:null,ce=ue.viewState?ue.viewState.position:null;for(let ie=0,ne=ge.length;ie<ne;ie++){const J=ge[ie];if(!(pe&&!J.modelState.selection.containsPosition(pe))&&!(ce&&!J.viewState.selection.containsPosition(ce))){ge.splice(ie,1),te.model.pushStackElement(),te.setCursorStates(se.source,3,ge);return}}}ge.push(ue),te.model.pushStackElement(),te.setCursorStates(se.source,3,ge)}}),A.LastCursorMoveToSelect=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(te,se){if(!se.position)return;const ue=te.getLastAddedCursorIndex(),ge=te.getCursorStates(),pe=ge.slice(0);pe[ue]=n.CursorMoveCommands.moveTo(te,ge[ue],!0,se.position,se.viewPosition),te.model.pushStackElement(),te.setCursorStates(se.source,3,pe)}});class z extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,n.CursorMoveCommands.moveToBeginningOfLine(se,se.getCursorStates(),this._inSelectionMode)),se.revealAllCursors(ue.source,!0)}}A.CursorHome=(0,y.registerEditorCommand)(new z({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),A.CursorHomeSelect=(0,y.registerEditorCommand)(new z({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class q extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,this._exec(se.getCursorStates())),se.revealAllCursors(ue.source,!0)}_exec(se){const ue=[];for(let ge=0,pe=se.length;ge<pe;ge++){const ce=se[ge],ie=ce.modelState.position.lineNumber;ue[ge]=b.CursorState.fromModelState(ce.modelState.move(this._inSelectionMode,ie,1,0))}return ue}}A.CursorLineStart=(0,y.registerEditorCommand)(new q({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:0,mac:{primary:287}}})),A.CursorLineStartSelect=(0,y.registerEditorCommand)(new q({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1311}}}));class H extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,n.CursorMoveCommands.moveToEndOfLine(se,se.getCursorStates(),this._inSelectionMode,ue.sticky||!1)),se.revealAllCursors(ue.source,!0)}}A.CursorEnd=(0,y.registerEditorCommand)(new H({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c.localize(1828,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),A.CursorEndSelect=(0,y.registerEditorCommand)(new H({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:c.localize(1829,"Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class K extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,this._exec(se,se.getCursorStates())),se.revealAllCursors(ue.source,!0)}_exec(se,ue){const ge=[];for(let pe=0,ce=ue.length;pe<ce;pe++){const ie=ue[pe],ne=ie.modelState.position.lineNumber,J=se.model.getLineMaxColumn(ne);ge[pe]=b.CursorState.fromModelState(ie.modelState.move(this._inSelectionMode,ne,J,0))}return ge}}A.CursorLineEnd=(0,y.registerEditorCommand)(new K({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:0,mac:{primary:291}}})),A.CursorLineEndSelect=(0,y.registerEditorCommand)(new K({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1315}}}));class U extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,n.CursorMoveCommands.moveToBeginningOfBuffer(se,se.getCursorStates(),this._inSelectionMode)),se.revealAllCursors(ue.source,!0)}}A.CursorTop=(0,y.registerEditorCommand)(new U({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2062,mac:{primary:2064}}})),A.CursorTopSelect=(0,y.registerEditorCommand)(new U({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3086,mac:{primary:3088}}}));class Y extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){se.model.pushStackElement(),se.setCursorStates(ue.source,3,n.CursorMoveCommands.moveToEndOfBuffer(se,se.getCursorStates(),this._inSelectionMode)),se.revealAllCursors(ue.source,!0)}}A.CursorBottom=(0,y.registerEditorCommand)(new Y({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2061,mac:{primary:2066}}})),A.CursorBottomSelect=(0,y.registerEditorCommand)(new Y({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:3085,mac:{primary:3090}}}));class Q extends d{constructor(){super({id:"editorScroll",precondition:void 0,metadata:m.metadata})}determineScrollMethod(se){const ue=[6],ge=[1,2,3,4,5,6],pe=[4,2],ce=[1,3];return ue.includes(se.unit)&&pe.includes(se.direction)?this._runHorizontalEditorScroll.bind(this):ge.includes(se.unit)&&ce.includes(se.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(se,ue){const ge=m.parse(ue);if(!ge)return;const pe=this.determineScrollMethod(ge);pe&&pe(se,ue.source,ge)}_runVerticalEditorScroll(se,ue,ge){const pe=this._computeDesiredScrollTop(se,ge);if(ge.revealCursor){const ce=se.getCompletelyVisibleViewRangeAtScrollTop(pe);se.setCursorStates(ue,3,[n.CursorMoveCommands.findPositionInViewportIfOutside(se,se.getPrimaryCursorState(),ce,ge.select)])}se.viewLayout.setScrollPosition({scrollTop:pe},0)}_computeDesiredScrollTop(se,ue){if(ue.unit===1){const ce=se.viewLayout.getFutureViewport(),ie=se.getCompletelyVisibleViewRangeAtScrollTop(ce.top),ne=se.coordinatesConverter.convertViewRangeToModelRange(ie);let J;ue.direction===1?J=Math.max(1,ne.startLineNumber-ue.value):J=Math.min(se.model.getLineCount(),ne.startLineNumber+ue.value);const B=se.coordinatesConverter.convertModelPositionToViewPosition(new t.Position(J,1));return se.viewLayout.getVerticalOffsetForLineNumber(B.lineNumber)}if(ue.unit===5){let ce=0;return ue.direction===3&&(ce=se.model.getLineCount()-se.cursorConfig.pageSize),se.viewLayout.getVerticalOffsetForLineNumber(ce)}let ge;ue.unit===3?ge=se.cursorConfig.pageSize*ue.value:ue.unit===4?ge=Math.round(se.cursorConfig.pageSize/2)*ue.value:ge=ue.value;const pe=(ue.direction===1?-1:1)*ge;return se.viewLayout.getCurrentScrollTop()+pe*se.cursorConfig.lineHeight}_runHorizontalEditorScroll(se,ue,ge){const pe=this._computeDesiredScrollLeft(se,ge);se.viewLayout.setScrollPosition({scrollLeft:pe},0)}_computeDesiredScrollLeft(se,ue){const ge=(ue.direction===4?-1:1)*ue.value;return se.viewLayout.getCurrentScrollLeft()+ge*se.cursorConfig.typicalHalfwidthCharacterWidth}}A.EditorScrollImpl=Q,A.EditorScroll=(0,y.registerEditorCommand)(new Q),A.ScrollLineUp=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Up,by:m.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollPageUp=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Up,by:m.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollEditorTop=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Up,by:m.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollLineDown=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Down,by:m.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollPageDown=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Down,by:m.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollEditorBottom=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Down,by:m.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollLeft=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Left,by:m.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:se.source})}}),A.ScrollRight=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus}})}runCoreEditorCommand(te,se){A.EditorScroll.runCoreEditorCommand(te,{to:m.RawDirection.Right,by:m.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:se.source})}});class X extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){ue.position&&(se.model.pushStackElement(),se.setCursorStates(ue.source,3,[n.CursorMoveCommands.word(se,se.getPrimaryCursorState(),this._inSelectionMode,ue.position)]),ue.revealType!==2&&se.revealAllCursors(ue.source,!0,!0))}}A.WordSelect=(0,y.registerEditorCommand)(new X({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),A.WordSelectDrag=(0,y.registerEditorCommand)(new X({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),A.LastCursorWordSelect=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(te,se){if(!se.position)return;const ue=te.getLastAddedCursorIndex(),ge=te.getCursorStates(),pe=ge.slice(0),ce=ge[ue];pe[ue]=n.CursorMoveCommands.word(te,ce,ce.modelState.hasSelection(),se.position),te.model.pushStackElement(),te.setCursorStates(se.source,3,pe)}});class G extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){ue.position&&(se.model.pushStackElement(),se.setCursorStates(ue.source,3,[n.CursorMoveCommands.line(se,se.getPrimaryCursorState(),this._inSelectionMode,ue.position,ue.viewPosition)]),ue.revealType!==2&&se.revealAllCursors(ue.source,!1,!0))}}A.LineSelect=(0,y.registerEditorCommand)(new G({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),A.LineSelectDrag=(0,y.registerEditorCommand)(new G({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class P extends d{constructor(se){super(se),this._inSelectionMode=se.inSelectionMode}runCoreEditorCommand(se,ue){if(!ue.position)return;const ge=se.getLastAddedCursorIndex(),pe=se.getCursorStates(),ce=pe.slice(0);ce[ge]=n.CursorMoveCommands.line(se,pe[ge],this._inSelectionMode,ue.position,ue.viewPosition),se.model.pushStackElement(),se.setCursorStates(ue.source,3,ce)}}A.LastCursorLineSelect=(0,y.registerEditorCommand)(new P({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),A.LastCursorLineSelectDrag=(0,y.registerEditorCommand)(new P({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),A.CancelSelection=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"cancelSelection",precondition:o.EditorContextKeys.hasNonEmptySelection,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(te,se){te.model.pushStackElement(),te.setCursorStates(se.source,3,[n.CursorMoveCommands.cancelSelection(te,te.getPrimaryCursorState())]),te.revealAllCursors(se.source,!0)}}),A.RemoveSecondaryCursors=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"removeSecondaryCursors",precondition:o.EditorContextKeys.hasMultipleSelections,kbOpts:{weight:r+1,kbExpr:o.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(te,se){te.model.pushStackElement(),te.setCursorStates(se.source,3,[te.getPrimaryCursorState()]),te.revealAllCursors(se.source,!0),(0,L.status)(c.localize(1830,"Removed secondary cursors"))}}),A.RevealLine=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"revealLine",precondition:void 0,metadata:h.metadata})}runCoreEditorCommand(te,se){const ue=se,ge=ue.lineNumber||0;let pe=typeof ge=="number"?ge+1:parseInt(ge)+1;pe<1&&(pe=1);const ce=te.model.getLineCount();pe>ce&&(pe=ce);const ie=new i.Range(pe,1,pe,te.model.getLineMaxColumn(pe));let ne=0;if(ue.at)switch(ue.at){case h.RawAtArgument.Top:ne=3;break;case h.RawAtArgument.Center:ne=1;break;case h.RawAtArgument.Bottom:ne=4;break;default:break}const J=te.coordinatesConverter.convertModelRangeToViewRange(ie);te.revealRange(se.source,!1,J,ne,0)}}),A.SelectAll=new class extends v{constructor(){super(y.SelectAllCommand)}runDOMCommand(te){k.isFirefox&&(te.focus(),te.select()),te.ownerDocument.execCommand("selectAll")}runEditorCommand(te,se,ue){const ge=se._getViewModel();ge&&this.runCoreEditorCommand(ge,ue)}runCoreEditorCommand(te,se){te.model.pushStackElement(),te.setCursorStates("keyboard",3,[n.CursorMoveCommands.selectAll(te,te.getPrimaryCursorState())])}},A.SetSelection=(0,y.registerEditorCommand)(new class extends d{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(te,se){se.selection&&(te.model.pushStackElement(),te.setCursorStates(se.source,3,[b.CursorState.fromModelSelection(se.selection)]))}})})(C||(e.CoreNavigationCommands=C={}));const w=g.ContextKeyExpr.and(o.EditorContextKeys.textInputFocus,o.EditorContextKeys.columnSelection);function S(A,R){u.KeybindingsRegistry.registerKeybindingRule({id:A,primary:R,when:w,weight:r+1})}S(C.CursorColumnSelectLeft.id,1039),S(C.CursorColumnSelectRight.id,1041),S(C.CursorColumnSelectUp.id,1040),S(C.CursorColumnSelectPageUp.id,1035),S(C.CursorColumnSelectDown.id,1042),S(C.CursorColumnSelectPageDown.id,1036);function D(A){return A.register(),A}var I;(function(A){class R extends y.EditorCommand{runEditorCommand(O,x,F){const W=x._getViewModel();W&&this.runCoreEditingCommand(x,W,F||{})}}A.CoreEditingCommand=R,A.LineBreakInsert=(0,y.registerEditorCommand)(new class extends R{constructor(){super({id:"lineBreakInsert",precondition:o.EditorContextKeys.writable,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(N,O,x){N.pushUndoStop(),N.executeCommands(this.id,a.EnterOperation.lineBreakInsert(O.cursorConfig,O.model,O.getCursorStates().map(F=>F.modelState.selection)))}}),A.Outdent=(0,y.registerEditorCommand)(new class extends R{constructor(){super({id:"outdent",precondition:o.EditorContextKeys.writable,kbOpts:{weight:r,kbExpr:g.ContextKeyExpr.and(o.EditorContextKeys.editorTextFocus,o.EditorContextKeys.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(N,O,x){N.pushUndoStop(),N.executeCommands(this.id,s.TypeOperations.outdent(O.cursorConfig,O.model,O.getCursorStates().map(F=>F.modelState.selection))),N.pushUndoStop()}}),A.Tab=(0,y.registerEditorCommand)(new class extends R{constructor(){super({id:"tab",precondition:o.EditorContextKeys.writable,kbOpts:{weight:r,kbExpr:g.ContextKeyExpr.and(o.EditorContextKeys.editorTextFocus,o.EditorContextKeys.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(N,O,x){N.pushUndoStop(),N.executeCommands(this.id,s.TypeOperations.tab(O.cursorConfig,O.model,O.getCursorStates().map(F=>F.modelState.selection))),N.pushUndoStop()}}),A.DeleteLeft=(0,y.registerEditorCommand)(new class extends R{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(N,O,x){const[F,W]=p.DeleteOperations.deleteLeft(O.getPrevEditOperationType(),O.cursorConfig,O.model,O.getCursorStates().map(z=>z.modelState.selection),O.getCursorAutoClosedCharacters());F&&N.pushUndoStop(),N.executeCommands(this.id,W),O.setPrevEditOperationType(2)}}),A.DeleteRight=(0,y.registerEditorCommand)(new class extends R{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:r,kbExpr:o.EditorContextKeys.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(N,O,x){const[F,W]=p.DeleteOperations.deleteRight(O.getPrevEditOperationType(),O.cursorConfig,O.model,O.getCursorStates().map(z=>z.modelState.selection));F&&N.pushUndoStop(),N.executeCommands(this.id,W),O.setPrevEditOperationType(3)}}),A.Undo=new class extends v{constructor(){super(y.UndoCommand)}runDOMCommand(N){N.ownerDocument.execCommand("undo")}runEditorCommand(N,O,x){if(!(!O.hasModel()||O.getOption(92)===!0))return O.getModel().undo()}},A.Redo=new class extends v{constructor(){super(y.RedoCommand)}runDOMCommand(N){N.ownerDocument.execCommand("redo")}runEditorCommand(N,O,x){if(!(!O.hasModel()||O.getOption(92)===!0))return O.getModel().redo()}}})(I||(e.CoreEditingCommands=I={}));class T extends y.Command{constructor(R,N,O){super({id:R,precondition:void 0,metadata:O}),this._handlerId=N}runCommand(R,N){const O=R.get(f.ICodeEditorService).getFocusedCodeEditor();O&&O.trigger("keyboard",this._handlerId,N)}}function M(A,R){D(new T("default:"+A,A)),D(new T(A,A,R))}M("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),M("replacePreviousChar"),M("compositionType"),M("compositionStart"),M("compositionEnd"),M("paste"),M("cut")}),define(oe[716],re([1,0,264,15]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerDecorationsContribution=void 0;let E=class{static{this.ID="editor.contrib.markerDecorations"}constructor(y,f){}dispose(){}};e.MarkerDecorationsContribution=E,e.MarkerDecorationsContribution=E=De([he(1,c.IMarkerDecorationsService)],E),(0,k.registerEditorContribution)(E.ID,E,0)}),define(oe[717],re([1,0,212,9,16]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewController=void 0;class L{constructor(f,_,b,p){this.configuration=f,this.viewModel=_,this.userInputEvents=b,this.commandDelegate=p}paste(f,_,b,p){this.commandDelegate.paste(f,_,b,p)}type(f){this.commandDelegate.type(f)}compositionType(f,_,b,p){this.commandDelegate.compositionType(f,_,b,p)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(f){c.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:f})}_validateViewColumn(f){const _=this.viewModel.getLineMinColumn(f.lineNumber);return f.column<_?new k.Position(f.lineNumber,_):f}_hasMulticursorModifier(f){switch(this.configuration.options.get(78)){case"altKey":return f.altKey;case"ctrlKey":return f.ctrlKey;case"metaKey":return f.metaKey;default:return!1}}_hasNonMulticursorModifier(f){switch(this.configuration.options.get(78)){case"altKey":return f.ctrlKey||f.metaKey;case"ctrlKey":return f.altKey||f.metaKey;case"metaKey":return f.ctrlKey||f.altKey;default:return!1}}dispatchMouse(f){const _=this.configuration.options,b=E.isLinux&&_.get(108),p=_.get(22);f.middleButton&&!b?this._columnSelect(f.position,f.mouseColumn,f.inSelectionMode):f.startedOnLineNumbers?this._hasMulticursorModifier(f)?f.inSelectionMode?this._lastCursorLineSelect(f.position,f.revealType):this._createCursor(f.position,!0):f.inSelectionMode?this._lineSelectDrag(f.position,f.revealType):this._lineSelect(f.position,f.revealType):f.mouseDownCount>=4?this._selectAll():f.mouseDownCount===3?this._hasMulticursorModifier(f)?f.inSelectionMode?this._lastCursorLineSelectDrag(f.position,f.revealType):this._lastCursorLineSelect(f.position,f.revealType):f.inSelectionMode?this._lineSelectDrag(f.position,f.revealType):this._lineSelect(f.position,f.revealType):f.mouseDownCount===2?f.onInjectedText||(this._hasMulticursorModifier(f)?this._lastCursorWordSelect(f.position,f.revealType):f.inSelectionMode?this._wordSelectDrag(f.position,f.revealType):this._wordSelect(f.position,f.revealType)):this._hasMulticursorModifier(f)?this._hasNonMulticursorModifier(f)||(f.shiftKey?this._columnSelect(f.position,f.mouseColumn,!0):f.inSelectionMode?this._lastCursorMoveToSelect(f.position,f.revealType):this._createCursor(f.position,!1)):f.inSelectionMode?f.altKey?this._columnSelect(f.position,f.mouseColumn,!0):p?this._columnSelect(f.position,f.mouseColumn,!0):this._moveToSelect(f.position,f.revealType):this.moveTo(f.position,f.revealType)}_usualArgs(f,_){return f=this._validateViewColumn(f),{source:"mouse",position:this._convertViewToModelPosition(f),viewPosition:f,revealType:_}}moveTo(f,_){c.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_moveToSelect(f,_){c.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_columnSelect(f,_,b){f=this._validateViewColumn(f),c.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(f),viewPosition:f,mouseColumn:_,doColumnSelect:b})}_createCursor(f,_){f=this._validateViewColumn(f),c.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(f),viewPosition:f,wholeLine:_})}_lastCursorMoveToSelect(f,_){c.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_wordSelect(f,_){c.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_wordSelectDrag(f,_){c.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_lastCursorWordSelect(f,_){c.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_lineSelect(f,_){c.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_lineSelectDrag(f,_){c.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_lastCursorLineSelect(f,_){c.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_lastCursorLineSelectDrag(f,_){c.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(f,_))}_selectAll(){c.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(f){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(f)}emitKeyDown(f){this.userInputEvents.emitKeyDown(f)}emitKeyUp(f){this.userInputEvents.emitKeyUp(f)}emitContextMenu(f){this.userInputEvents.emitContextMenu(f)}emitMouseMove(f){this.userInputEvents.emitMouseMove(f)}emitMouseLeave(f){this.userInputEvents.emitMouseLeave(f)}emitMouseUp(f){this.userInputEvents.emitMouseUp(f)}emitMouseDown(f){this.userInputEvents.emitMouseDown(f)}emitMouseDrag(f){this.userInputEvents.emitMouseDrag(f)}emitMouseDrop(f){this.userInputEvents.emitMouseDrop(f)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(f){this.userInputEvents.emitMouseWheel(f)}}e.ViewController=L}),define(oe[213],re([1,0,49,7,6,59,56,104,116,66]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";var p;Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerBasedDocumentDiffProvider=e.WorkerBasedDiffProviderFactoryService=e.IDiffProviderFactoryService=void 0,e.IDiffProviderFactoryService=(0,k.createDecorator)("diffProviderFactoryService");let n=class{constructor(i){this.instantiationService=i}createDiffProvider(i){return this.instantiationService.createInstance(s,i)}};e.WorkerBasedDiffProviderFactoryService=n,e.WorkerBasedDiffProviderFactoryService=n=De([he(0,k.IInstantiationService)],n),(0,c.registerSingleton)(e.IDiffProviderFactoryService,n,1);let s=class{static{p=this}static{this.diffCache=new Map}constructor(i,o,g){this.editorWorkerService=o,this.telemetryService=g,this.onDidChangeEventEmitter=new E.Emitter,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(i)}dispose(){this.diffAlgorithmOnDidChangeSubscription?.dispose()}async computeDiff(i,o,g,u){if(typeof this.diffAlgorithm!="string")return this.diffAlgorithm.computeDiff(i,o,g,u);if(i.isDisposed()||o.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(i.getLineCount()===1&&i.getLineMaxColumn(1)===1)return o.getLineCount()===1&&o.getLineMaxColumn(1)===1?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new f.DetailedLineRangeMapping(new y.LineRange(1,2),new y.LineRange(1,o.getLineCount()+1),[new f.RangeMapping(i.getFullModelRange(),o.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const l=JSON.stringify([i.uri.toString(),o.uri.toString()]),a=JSON.stringify([i.id,o.id,i.getAlternativeVersionId(),o.getAlternativeVersionId(),JSON.stringify(g)]),r=p.diffCache.get(l);if(r&&r.context===a)return r.result;const d=L.StopWatch.create(),m=await this.editorWorkerService.computeDiff(i.uri,o.uri,g,this.diffAlgorithm),h=d.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:h,timedOut:m?.quitEarly??!0,detectedMoves:g.computeMoves?m?.moves.length??0:-1}),u.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!m)throw new Error("no diff result available");return p.diffCache.size>10&&p.diffCache.delete(p.diffCache.keys().next().value),p.diffCache.set(l,{result:m,context:a}),m}setOptions(i){let o=!1;i.diffAlgorithm&&this.diffAlgorithm!==i.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription?.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=i.diffAlgorithm,typeof i.diffAlgorithm!="string"&&(this.diffAlgorithmOnDidChangeSubscription=i.diffAlgorithm.onDidChange(()=>this.onDidChangeEventEmitter.fire())),o=!0),o&&this.onDidChangeEventEmitter.fire()}};e.WorkerBasedDocumentDiffProvider=s,e.WorkerBasedDocumentDiffProvider=s=p=De([he(1,_.IEditorWorkerService),he(2,b.ITelemetryService)],s)}),define(oe[402],re([1,0,14,18,2,21,213,85,161,56,331,104,201,334,329,19,13,89]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnchangedRegion=e.DiffMapping=e.DiffState=e.DiffEditorViewModel=void 0;let l=class extends E.Disposable{setActiveMovedText(S){this._activeMovedText.set(S,void 0)}constructor(S,D,I){super(),this.model=S,this._options=D,this._diffProviderFactoryService=I,this._isDiffUpToDate=(0,L.observableValue)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,L.observableValue)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,L.observableValue)(this,void 0),this.unchangedRegions=(0,L.derived)(this,R=>this._options.hideUnchangedRegions.read(R)?this._unchangedRegions.read(R)?.regions??[]:((0,L.transaction)(N=>{for(const O of this._unchangedRegions.get()?.regions||[])O.collapseAll(N)}),[])),this.movedTextToCompare=(0,L.observableValue)(this,void 0),this._activeMovedText=(0,L.observableValue)(this,void 0),this._hoveredMovedText=(0,L.observableValue)(this,void 0),this.activeMovedText=(0,L.derived)(this,R=>this.movedTextToCompare.read(R)??this._hoveredMovedText.read(R)??this._activeMovedText.read(R)),this._cancellationTokenSource=new k.CancellationTokenSource,this._diffProvider=(0,L.derived)(this,R=>{const N=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(R)}),O=(0,L.observableSignalFromEvent)("onDidChange",N.onDidChange);return{diffProvider:N,onChangeSignal:O}}),this._register((0,E.toDisposable)(()=>this._cancellationTokenSource.cancel()));const T=(0,L.observableSignal)("contentChangedSignal"),M=this._register(new c.RunOnceScheduler(()=>T.trigger(void 0),200));this._register((0,L.autorun)(R=>{const N=this._unchangedRegions.read(R);if(!N||N.regions.some(q=>q.isDragged.read(R)))return;const O=N.originalDecorationIds.map(q=>S.original.getDecorationRange(q)).map(q=>q?b.LineRange.fromRangeInclusive(q):void 0),x=N.modifiedDecorationIds.map(q=>S.modified.getDecorationRange(q)).map(q=>q?b.LineRange.fromRangeInclusive(q):void 0),F=N.regions.map((q,H)=>!O[H]||!x[H]?void 0:new h(O[H].startLineNumber,x[H].startLineNumber,O[H].length,q.visibleLineCountTop.read(R),q.visibleLineCountBottom.read(R))).filter(o.isDefined),W=[];let z=!1;for(const q of(0,g.groupAdjacentBy)(F,(H,K)=>H.getHiddenModifiedRange(R).endLineNumberExclusive===K.getHiddenModifiedRange(R).startLineNumber))if(q.length>1){z=!0;const H=q.reduce((U,Y)=>U+Y.lineCount,0),K=new h(q[0].originalLineNumber,q[0].modifiedLineNumber,H,q[0].visibleLineCountTop.get(),q[q.length-1].visibleLineCountBottom.get());W.push(K)}else W.push(q[0]);if(z){const q=S.original.deltaDecorations(N.originalDecorationIds,W.map(K=>({range:K.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),H=S.modified.deltaDecorations(N.modifiedDecorationIds,W.map(K=>({range:K.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));(0,L.transaction)(K=>{this._unchangedRegions.set({regions:W,originalDecorationIds:q,modifiedDecorationIds:H},K)})}}));const A=(R,N,O)=>{const x=h.fromDiffs(R.changes,S.original.getLineCount(),S.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(O),this._options.hideUnchangedRegionsContextLineCount.read(O));let F;const W=this._unchangedRegions.get();if(W){const K=W.originalDecorationIds.map(X=>S.original.getDecorationRange(X)).map(X=>X?b.LineRange.fromRangeInclusive(X):void 0),U=W.modifiedDecorationIds.map(X=>S.modified.getDecorationRange(X)).map(X=>X?b.LineRange.fromRangeInclusive(X):void 0);let Q=(0,f.filterWithPrevious)(W.regions.map((X,G)=>{if(!K[G]||!U[G])return;const P=K[G].length;return new h(K[G].startLineNumber,U[G].startLineNumber,P,Math.min(X.visibleLineCountTop.get(),P),Math.min(X.visibleLineCountBottom.get(),P-X.visibleLineCountTop.get()))}).filter(o.isDefined),(X,G)=>!G||X.modifiedLineNumber>=G.modifiedLineNumber+G.lineCount&&X.originalLineNumber>=G.originalLineNumber+G.lineCount).map(X=>new n.LineRangeMapping(X.getHiddenOriginalRange(O),X.getHiddenModifiedRange(O)));Q=n.LineRangeMapping.clip(Q,b.LineRange.ofLength(1,S.original.getLineCount()),b.LineRange.ofLength(1,S.modified.getLineCount())),F=n.LineRangeMapping.inverse(Q,S.original.getLineCount(),S.modified.getLineCount())}const z=[];if(F)for(const K of x){const U=F.filter(Y=>Y.original.intersectsStrict(K.originalUnchangedRange)&&Y.modified.intersectsStrict(K.modifiedUnchangedRange));z.push(...K.setVisibleRanges(U,N))}else z.push(...x);const q=S.original.deltaDecorations(W?.originalDecorationIds||[],z.map(K=>({range:K.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))),H=S.modified.deltaDecorations(W?.modifiedDecorationIds||[],z.map(K=>({range:K.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})));this._unchangedRegions.set({regions:z,originalDecorationIds:q,modifiedDecorationIds:H},N)};this._register(S.modified.onDidChangeContent(R=>{if(this._diff.get()){const O=s.TextEditInfo.fromModelContentChanges(R.changes),x=(this._lastDiff,S.original,S.modified,void 0);x&&(this._lastDiff=x,(0,L.transaction)(F=>{this._diff.set(d.fromDiffResult(this._lastDiff),F),A(x,F);const W=this.movedTextToCompare.get();this.movedTextToCompare.set(W?this._lastDiff.moves.find(z=>z.lineRangeMapping.modified.intersect(W.lineRangeMapping.modified)):void 0,F)}))}this._isDiffUpToDate.set(!1,void 0),M.schedule()})),this._register(S.original.onDidChangeContent(R=>{if(this._diff.get()){const O=s.TextEditInfo.fromModelContentChanges(R.changes),x=(this._lastDiff,S.original,S.modified,void 0);x&&(this._lastDiff=x,(0,L.transaction)(F=>{this._diff.set(d.fromDiffResult(this._lastDiff),F),A(x,F);const W=this.movedTextToCompare.get();this.movedTextToCompare.set(W?this._lastDiff.moves.find(z=>z.lineRangeMapping.modified.intersect(W.lineRangeMapping.modified)):void 0,F)}))}this._isDiffUpToDate.set(!1,void 0),M.schedule()})),this._register((0,L.autorunWithStore)(async(R,N)=>{this._options.hideUnchangedRegionsMinimumLineCount.read(R),this._options.hideUnchangedRegionsContextLineCount.read(R),M.cancel(),T.read(R);const O=this._diffProvider.read(R);O.onChangeSignal.read(R),(0,_.readHotReloadableExport)(p.DefaultLinesDiffComputer,R),(0,_.readHotReloadableExport)(i.optimizeSequenceDiffs,R),this._isDiffUpToDate.set(!1,void 0);let x=[];N.add(S.original.onDidChangeContent(z=>{const q=s.TextEditInfo.fromModelContentChanges(z.changes);x=(0,t.combineTextEditInfos)(x,q)}));let F=[];N.add(S.modified.onDidChangeContent(z=>{const q=s.TextEditInfo.fromModelContentChanges(z.changes);F=(0,t.combineTextEditInfos)(F,q)}));let W=await O.diffProvider.computeDiff(S.original,S.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(R),maxComputationTimeMs:this._options.maxComputationTimeMs.read(R),computeMoves:this._options.showMoves.read(R)},this._cancellationTokenSource.token);this._cancellationTokenSource.token.isCancellationRequested||S.original.isDisposed()||S.modified.isDisposed()||(W=a(W,S.original,S.modified),W=(S.original,S.modified,void 0)??W,W=(S.original,S.modified,void 0)??W,(0,L.transaction)(z=>{A(W,z),this._lastDiff=W;const q=d.fromDiffResult(W);this._diff.set(q,z),this._isDiffUpToDate.set(!0,z);const H=this.movedTextToCompare.get();this.movedTextToCompare.set(H?this._lastDiff.moves.find(K=>K.lineRangeMapping.modified.intersect(H.lineRangeMapping.modified)):void 0,z)}))}))}ensureModifiedLineIsVisible(S,D,I){if(this.diff.get()?.mappings.length===0)return;const T=this._unchangedRegions.get()?.regions||[];for(const M of T)if(M.getHiddenModifiedRange(void 0).contains(S)){M.showModifiedLine(S,D,I);return}}ensureOriginalLineIsVisible(S,D,I){if(this.diff.get()?.mappings.length===0)return;const T=this._unchangedRegions.get()?.regions||[];for(const M of T)if(M.getHiddenOriginalRange(void 0).contains(S)){M.showOriginalLine(S,D,I);return}}async waitForDiff(){await(0,L.waitForState)(this.isDiffUpToDate,S=>S)}serializeState(){return{collapsedRegions:this._unchangedRegions.get()?.regions.map(D=>({range:D.getHiddenModifiedRange(void 0).serialize()}))}}restoreSerializedState(S){const D=S.collapsedRegions?.map(T=>b.LineRange.deserialize(T.range)),I=this._unchangedRegions.get();!I||!D||(0,L.transaction)(T=>{for(const M of I.regions)for(const A of D)if(M.modifiedUnchangedRange.intersect(A)){M.setHiddenModifiedRange(A,T);break}})}};e.DiffEditorViewModel=l,e.DiffEditorViewModel=l=De([he(2,y.IDiffProviderFactoryService)],l);function a(w,S,D){return{changes:w.changes.map(I=>new n.DetailedLineRangeMapping(I.original,I.modified,I.innerChanges?I.innerChanges.map(T=>r(T,S,D)):void 0)),moves:w.moves,identical:w.identical,quitEarly:w.quitEarly}}function r(w,S,D){let I=w.originalRange,T=w.modifiedRange;return I.startColumn===1&&T.startColumn===1&&(I.endColumn!==1||T.endColumn!==1)&&I.endColumn===S.getLineMaxColumn(I.endLineNumber)&&T.endColumn===D.getLineMaxColumn(T.endLineNumber)&&I.endLineNumber<S.getLineCount()&&T.endLineNumber<D.getLineCount()&&(I=I.setEndPosition(I.endLineNumber+1,1),T=T.setEndPosition(T.endLineNumber+1,1)),new n.RangeMapping(I,T)}class d{static fromDiffResult(S){return new d(S.changes.map(D=>new m(D)),S.moves||[],S.identical,S.quitEarly)}constructor(S,D,I,T){this.mappings=S,this.movedTexts=D,this.identical=I,this.quitEarly=T}}e.DiffState=d;class m{constructor(S){this.lineRangeMapping=S}}e.DiffMapping=m;class h{static fromDiffs(S,D,I,T,M){const A=n.DetailedLineRangeMapping.inverse(S,D,I),R=[];for(const N of A){let O=N.original.startLineNumber,x=N.modified.startLineNumber,F=N.original.length;const W=O===1&&x===1,z=O+F===D+1&&x+F===I+1;(W||z)&&F>=M+T?(W&&!z&&(F-=M),z&&!W&&(O+=M,x+=M,F-=M),R.push(new h(O,x,F,0,0))):F>=M*2+T&&(O+=M,x+=M,F-=M*2,R.push(new h(O,x,F,0,0)))}return R}get originalUnchangedRange(){return b.LineRange.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return b.LineRange.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(S,D,I,T,M){this.originalLineNumber=S,this.modifiedLineNumber=D,this.lineCount=I,this._visibleLineCountTop=(0,L.observableValue)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,L.observableValue)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,L.derived)(this,N=>this.visibleLineCountTop.read(N)+this.visibleLineCountBottom.read(N)===this.lineCount&&!this.isDragged.read(N)),this.isDragged=(0,L.observableValue)(this,void 0);const A=Math.max(Math.min(T,this.lineCount),0),R=Math.max(Math.min(M,this.lineCount-T),0);(0,u.softAssert)(T===A),(0,u.softAssert)(M===R),this._visibleLineCountTop.set(A,void 0),this._visibleLineCountBottom.set(R,void 0)}setVisibleRanges(S,D){const I=[],T=new b.LineRangeSet(S.map(N=>N.modified)).subtractFrom(this.modifiedUnchangedRange);let M=this.originalLineNumber,A=this.modifiedLineNumber;const R=this.modifiedLineNumber+this.lineCount;if(T.ranges.length===0)this.showAll(D),I.push(this);else{let N=0;for(const O of T.ranges){const x=N===T.ranges.length-1;N++;const F=(x?R:O.endLineNumberExclusive)-A,W=new h(M,A,F,0,0);W.setHiddenModifiedRange(O,D),I.push(W),M=W.originalUnchangedRange.endLineNumberExclusive,A=W.modifiedUnchangedRange.endLineNumberExclusive}}return I}shouldHideControls(S){return this._shouldHideControls.read(S)}getHiddenOriginalRange(S){return b.LineRange.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(S),this.lineCount-this._visibleLineCountTop.read(S)-this._visibleLineCountBottom.read(S))}getHiddenModifiedRange(S){return b.LineRange.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(S),this.lineCount-this._visibleLineCountTop.read(S)-this._visibleLineCountBottom.read(S))}setHiddenModifiedRange(S,D){const I=S.startLineNumber-this.modifiedLineNumber,T=this.modifiedLineNumber+this.lineCount-S.endLineNumberExclusive;this.setState(I,T,D)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(S=10,D){const I=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+S,I),D)}showMoreBelow(S=10,D){const I=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+S,I),D)}showAll(S){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),S)}showModifiedLine(S,D,I){const T=S+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),M=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-S;D===0&&T<M||D===1?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+T,I):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+M,I)}showOriginalLine(S,D,I){const T=S-this.originalLineNumber,M=this.originalLineNumber+this.lineCount-S;D===0&&T<M||D===1?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+M-T,this.getMaxVisibleLineCountTop()),I):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+T-M,this.getMaxVisibleLineCountBottom()),I)}collapseAll(S){this._visibleLineCountTop.set(0,S),this._visibleLineCountBottom.set(0,S)}setState(S,D,I){S=Math.max(Math.min(S,this.lineCount),0),D=Math.max(Math.min(D,this.lineCount-S),0),this._visibleLineCountTop.set(S,I),this._visibleLineCountBottom.set(D,I)}}e.UnchangedRegion=h;function v(w,S,D,I){}function C(w,S,D,I){}}),define(oe[718],re([1,0,48,55,72,15,23,20,3,12,512]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";var p;Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionAnchorSet=void 0,e.SelectionAnchorSet=new b.RawContextKey("selectionAnchorSet",!1);let n=class{static{p=this}static{this.ID="editor.contrib.selectionAnchorController"}static get(u){return u.getContribution(p.ID)}constructor(u,l){this.editor=u,this.selectionAnchorSetContextKey=e.SelectionAnchorSet.bindTo(l),this.modelChangeListener=u.onDidChangeModel(()=>this.selectionAnchorSetContextKey.reset())}setSelectionAnchor(){if(this.editor.hasModel()){const u=this.editor.getPosition();this.editor.changeDecorations(l=>{this.decorationId&&l.removeDecoration(this.decorationId),this.decorationId=l.addDecoration(y.Selection.fromPositions(u,u),{description:"selection-anchor",stickiness:1,hoverMessage:new k.MarkdownString().appendText((0,_.localize)(980,"Selection Anchor")),className:"selection-anchor"})}),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,c.alert)((0,_.localize)(981,"Anchor set at {0}:{1}",u.lineNumber,u.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const u=this.editor.getModel().getDecorationRange(this.decorationId);u&&this.editor.setPosition(u.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const u=this.editor.getModel().getDecorationRange(this.decorationId);if(u){const l=this.editor.getPosition();this.editor.setSelection(y.Selection.fromPositions(u.getStartPosition(),l)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const u=this.decorationId;this.editor.changeDecorations(l=>{l.removeDecoration(u),this.decorationId=void 0}),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};n=p=De([he(1,b.IContextKeyService)],n);class s extends L.EditorAction{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,_.localize)(982,"Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:f.EditorContextKeys.editorTextFocus,primary:(0,E.KeyChord)(2089,2080),weight:100}})}async run(u,l){n.get(l)?.setSelectionAnchor()}}class t extends L.EditorAction{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,_.localize)(983,"Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:e.SelectionAnchorSet})}async run(u,l){n.get(l)?.goToSelectionAnchor()}}class i extends L.EditorAction{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,_.localize)(984,"Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:e.SelectionAnchorSet,kbOpts:{kbExpr:f.EditorContextKeys.editorTextFocus,primary:(0,E.KeyChord)(2089,2089),weight:100}})}async run(u,l){n.get(l)?.selectFromAnchorToCursor()}}class o extends L.EditorAction{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,_.localize)(985,"Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:e.SelectionAnchorSet,kbOpts:{kbExpr:f.EditorContextKeys.editorTextFocus,primary:9,weight:100}})}async run(u,l){n.get(l)?.cancelSelectionAnchor()}}(0,L.registerEditorContribution)(n.ID,n,4),(0,L.registerEditorAction)(s),(0,L.registerEditorAction)(t),(0,L.registerEditorAction)(i),(0,L.registerEditorAction)(o)}),define(oe[719],re([1,0,15,20,628,3]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class y extends c.EditorAction{constructor(p,n){super(n),this.left=p}run(p,n){if(!n.hasModel())return;const s=[],t=n.getSelections();for(const i of t)s.push(new E.MoveCaretCommand(i,this.left));n.pushUndoStop(),n.executeCommands(this.id,s),n.pushUndoStop()}}class f extends y{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:L.localize(972,"Move Selected Text Left"),alias:"Move Selected Text Left",precondition:k.EditorContextKeys.writable})}}class _ extends y{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:L.localize(973,"Move Selected Text Right"),alias:"Move Selected Text Right",precondition:k.EditorContextKeys.writable})}}(0,c.registerEditorAction)(f),(0,c.registerEditorAction)(_)}),define(oe[720],re([1,0,15,145,244,4,20,3]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class _ extends c.EditorAction{constructor(){super({id:"editor.action.transposeLetters",label:f.localize(971,"Transpose Letters"),alias:"Transpose Letters",precondition:y.EditorContextKeys.writable,kbOpts:{kbExpr:y.EditorContextKeys.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(p,n){if(!n.hasModel())return;const s=n.getModel(),t=[],i=n.getSelections();for(const o of i){if(!o.isEmpty())continue;const g=o.startLineNumber,u=o.startColumn,l=s.getLineMaxColumn(g);if(g===1&&(u===1||u===2&&l===2))continue;const a=u===l?o.getPosition():E.MoveOperations.rightPosition(s,o.getPosition().lineNumber,o.getPosition().column),r=E.MoveOperations.leftPosition(s,a),d=E.MoveOperations.leftPosition(s,r),m=s.getValueInRange(L.Range.fromPositions(d,r)),h=s.getValueInRange(L.Range.fromPositions(r,a)),v=L.Range.fromPositions(d,a);t.push(new k.ReplaceCommand(v,h+m))}t.length>0&&(n.pushUndoStop(),n.executeCommands(this.id,t),n.pushUndoStop())}}(0,c.registerEditorAction)(_)}),define(oe[721],re([1,0,72,15,4,20,34,348,630,3,29]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n extends k.EditorAction{constructor(u,l){super(l),this._type=u}run(u,l){const a=u.get(y.ILanguageConfigurationService);if(!l.hasModel())return;const r=l.getModel(),d=[],m=r.getOptions(),h=l.getOption(23),v=l.getSelections().map((w,S)=>({selection:w,index:S,ignoreFirstLine:!1}));v.sort((w,S)=>E.Range.compareRangesUsingStarts(w.selection,S.selection));let C=v[0];for(let w=1;w<v.length;w++){const S=v[w];C.selection.endLineNumber===S.selection.startLineNumber&&(C.index<S.index?S.ignoreFirstLine=!0:(C.ignoreFirstLine=!0,C=S))}for(const w of v)d.push(new _.LineCommentCommand(a,w.selection,m.indentSize,this._type,h.insertSpace,h.ignoreEmptyLines,w.ignoreFirstLine));l.pushUndoStop(),l.executeCommands(this.id,d),l.pushUndoStop()}}class s extends n{constructor(){super(0,{id:"editor.action.commentLine",label:b.localize(885,"Toggle Line Comment"),alias:"Toggle Line Comment",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:p.MenuId.MenubarEditMenu,group:"5_insert",title:b.localize(886,"&&Toggle Line Comment"),order:1}})}}class t extends n{constructor(){super(1,{id:"editor.action.addCommentLine",label:b.localize(887,"Add Line Comment"),alias:"Add Line Comment",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.editorTextFocus,primary:(0,c.KeyChord)(2089,2081),weight:100}})}}class i extends n{constructor(){super(2,{id:"editor.action.removeCommentLine",label:b.localize(888,"Remove Line Comment"),alias:"Remove Line Comment",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.editorTextFocus,primary:(0,c.KeyChord)(2089,2099),weight:100}})}}class o extends k.EditorAction{constructor(){super({id:"editor.action.blockComment",label:b.localize(889,"Toggle Block Comment"),alias:"Toggle Block Comment",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:p.MenuId.MenubarEditMenu,group:"5_insert",title:b.localize(890,"Toggle &&Block Comment"),order:2}})}run(u,l){const a=u.get(y.ILanguageConfigurationService);if(!l.hasModel())return;const r=l.getOption(23),d=[],m=l.getSelections();for(const h of m)d.push(new f.BlockCommentCommand(h,r.insertSpace,a));l.pushUndoStop(),l.executeCommands(this.id,d),l.pushUndoStop()}}(0,k.registerEditorAction)(s),(0,k.registerEditorAction)(t),(0,k.registerEditorAction)(i),(0,k.registerEditorAction)(o)}),define(oe[722],re([1,0,2,15,20,3]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRedo=e.CursorUndo=e.CursorUndoRedoController=void 0;class y{constructor(s){this.selections=s}equals(s){const t=this.selections.length,i=s.selections.length;if(t!==i)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(s.selections[o]))return!1;return!0}}class f{constructor(s,t,i){this.cursorState=s,this.scrollTop=t,this.scrollLeft=i}}class _ extends c.Disposable{static{this.ID="editor.contrib.cursorUndoRedoController"}static get(s){return s.getContribution(_.ID)}constructor(s){super(),this._editor=s,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(s.onDidChangeModel(t=>{this._undoStack=[],this._redoStack=[]})),this._register(s.onDidChangeModelContent(t=>{this._undoStack=[],this._redoStack=[]})),this._register(s.onDidChangeCursorSelection(t=>{if(this._isCursorUndoRedo||!t.oldSelections||t.oldModelVersionId!==t.modelVersionId)return;const i=new y(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(i)||(this._undoStack.push(new f(i,s.getScrollTop(),s.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())}))}cursorUndo(){!this._editor.hasModel()||this._undoStack.length===0||(this._redoStack.push(new f(new y(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){!this._editor.hasModel()||this._redoStack.length===0||(this._undoStack.push(new f(new y(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(s){this._isCursorUndoRedo=!0,this._editor.setSelections(s.cursorState.selections),this._editor.setScrollPosition({scrollTop:s.scrollTop,scrollLeft:s.scrollLeft}),this._isCursorUndoRedo=!1}}e.CursorUndoRedoController=_;class b extends k.EditorAction{constructor(){super({id:"cursorUndo",label:L.localize(873,"Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:E.EditorContextKeys.textInputFocus,primary:2099,weight:100}})}run(s,t,i){_.get(t)?.cursorUndo()}}e.CursorUndo=b;class p extends k.EditorAction{constructor(){super({id:"cursorRedo",label:L.localize(874,"Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(s,t,i){_.get(t)?.cursorRedo()}}e.CursorRedo=p,(0,k.registerEditorContribution)(_.ID,_,0),(0,k.registerEditorAction)(b),(0,k.registerEditorAction)(p)}),define(oe[723],re([1,0,15,12,18,73,7,49,3]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorKeybindingCancellationTokenSource=void 0;const b=(0,y.createDecorator)("IEditorCancelService"),p=new k.RawContextKey("cancellableOperation",!1,(0,_.localize)(848,"Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,f.registerSingleton)(b,class{constructor(){this._tokens=new WeakMap}add(s,t){let i=this._tokens.get(s);i||(i=s.invokeWithinContext(g=>{const u=p.bindTo(g.get(k.IContextKeyService)),l=new L.LinkedList;return{key:u,tokens:l}}),this._tokens.set(s,i));let o;return i.key.set(!0),o=i.tokens.push(t),()=>{o&&(o(),i.key.set(!i.tokens.isEmpty()),o=void 0)}}cancel(s){const t=this._tokens.get(s);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);class n extends E.CancellationTokenSource{constructor(t,i){super(i),this.editor=t,this._unregister=t.invokeWithinContext(o=>o.get(b).add(t,this))}dispose(){this._unregister(),super.dispose()}}e.EditorKeybindingCancellationTokenSource=n,(0,c.registerEditorCommand)(new class extends c.EditorCommand{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:p})}runEditorCommand(s,t){s.get(b).cancel(t)}})}),define(oe[122],re([1,0,11,4,18,2,723]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextModelCancellationTokenSource=e.EditorStateCancellationTokenSource=e.EditorState=void 0;class f{constructor(n,s){if(this.flags=s,this.flags&1){const t=n.getModel();this.modelVersionId=t?c.format("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=n.getPosition():this.position=null,this.flags&2?this.selection=n.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=n.getScrollLeft(),this.scrollTop=n.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(n){if(!(n instanceof f))return!1;const s=n;return!(this.modelVersionId!==s.modelVersionId||this.scrollLeft!==s.scrollLeft||this.scrollTop!==s.scrollTop||!this.position&&s.position||this.position&&!s.position||this.position&&s.position&&!this.position.equals(s.position)||!this.selection&&s.selection||this.selection&&!s.selection||this.selection&&s.selection&&!this.selection.equalsRange(s.selection))}validate(n){return this._equals(new f(n,this.flags))}}e.EditorState=f;class _ extends y.EditorKeybindingCancellationTokenSource{constructor(n,s,t,i){super(n,i),this._listener=new L.DisposableStore,s&4&&this._listener.add(n.onDidChangeCursorPosition(o=>{(!t||!k.Range.containsPosition(t,o.position))&&this.cancel()})),s&2&&this._listener.add(n.onDidChangeCursorSelection(o=>{(!t||!k.Range.containsRange(t,o.selection))&&this.cancel()})),s&8&&this._listener.add(n.onDidScrollChange(o=>this.cancel())),s&1&&(this._listener.add(n.onDidChangeModel(o=>this.cancel())),this._listener.add(n.onDidChangeModelContent(o=>this.cancel())))}dispose(){this._listener.dispose(),super.dispose()}}e.EditorStateCancellationTokenSource=_;class b extends E.CancellationTokenSource{constructor(n,s){super(s),this._listener=n.onDidChangeContent(()=>this.cancel())}dispose(){this._listener.dispose(),super.dispose()}}e.TextModelCancellationTokenSource=b}),define(oe[155],re([1,0,13,18,8,2,22,151,4,23,17,44,122,3,24,50,96,66,133,90]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ApplyCodeActionReason=e.fixAllCommandId=e.organizeImportsCommandId=e.sourceActionCommandId=e.refactorCommandId=e.autoFixCommandId=e.quickFixCommandId=e.codeActionCommandId=void 0,e.getCodeActions=m,e.applyCodeAction=S,e.codeActionCommandId="editor.action.codeAction",e.quickFixCommandId="editor.action.quickFix",e.autoFixCommandId="editor.action.autoFix",e.refactorCommandId="editor.action.refactor",e.sourceActionCommandId="editor.action.sourceAction",e.organizeImportsCommandId="editor.action.organizeImports",e.fixAllCommandId="editor.action.fixAll";class r extends L.Disposable{static codeActionsPreferredComparator(T,M){return T.isPreferred&&!M.isPreferred?-1:!T.isPreferred&&M.isPreferred?1:0}static codeActionsComparator({action:T},{action:M}){return T.isAI&&!M.isAI?1:!T.isAI&&M.isAI?-1:(0,c.isNonEmptyArray)(T.diagnostics)?(0,c.isNonEmptyArray)(M.diagnostics)?r.codeActionsPreferredComparator(T,M):-1:(0,c.isNonEmptyArray)(M.diagnostics)?1:r.codeActionsPreferredComparator(T,M)}constructor(T,M,A){super(),this.documentation=M,this._register(A),this.allActions=[...T].sort(r.codeActionsComparator),this.validActions=this.allActions.filter(({action:R})=>!R.disabled)}get hasAutoFix(){return this.validActions.some(({action:T})=>!!T.kind&&l.CodeActionKind.QuickFix.contains(new a.HierarchicalKind(T.kind))&&!!T.isPreferred)}get hasAIFix(){return this.validActions.some(({action:T})=>!!T.isAI)}get allAIFixes(){return this.validActions.every(({action:T})=>!!T.isAI)}}const d={actions:[],documentation:void 0};async function m(I,T,M,A,R,N){const O=A.filter||{},x={...O,excludes:[...O.excludes||[],l.CodeActionKind.Notebook]},F={only:O.include?.value,trigger:A.type},W=new s.TextModelCancellationTokenSource(T,N),z=A.type===2,q=h(I,T,z?x:O),H=new L.DisposableStore,K=q.map(async Y=>{try{R.report(Y);const Q=await Y.provideCodeActions(T,M,F,W.token);if(Q&&H.add(Q),W.token.isCancellationRequested)return d;const X=(Q?.actions||[]).filter(P=>P&&(0,l.filtersAction)(O,P)),G=C(Y,X,O.include);return{actions:X.map(P=>new l.CodeActionItem(P,Y)),documentation:G}}catch(Q){if((0,E.isCancellationError)(Q))throw Q;return(0,E.onUnexpectedExternalError)(Q),d}}),U=I.onDidChange(()=>{const Y=I.all(T);(0,c.equals)(Y,q)||W.cancel()});try{const Y=await Promise.all(K),Q=Y.map(G=>G.actions).flat(),X=[...(0,c.coalesce)(Y.map(G=>G.documentation)),...v(I,T,A,Q)];return new r(Q,X,H)}finally{U.dispose(),W.dispose()}}function h(I,T,M){return I.all(T).filter(A=>A.providedCodeActionKinds?A.providedCodeActionKinds.some(R=>(0,l.mayIncludeActionsOfKind)(M,new a.HierarchicalKind(R))):!0)}function*v(I,T,M,A){if(T&&A.length)for(const R of I.all(T))R._getAdditionalMenuItems&&(yield*R._getAdditionalMenuItems?.({trigger:M.type,only:M.filter?.include?.value},A.map(N=>N.action)))}function C(I,T,M){if(!I.documentation)return;const A=I.documentation.map(R=>({kind:new a.HierarchicalKind(R.kind),command:R.command}));if(M){let R;for(const N of A)N.kind.contains(M)&&(R?R.kind.contains(N.kind)&&(R=N):R=N);if(R)return R?.command}for(const R of T)if(R.kind){for(const N of A)if(N.kind.contains(new a.HierarchicalKind(R.kind)))return N.command}}var w;(function(I){I.OnSave="onSave",I.FromProblemsView="fromProblemsView",I.FromCodeActions="fromCodeActions",I.FromAILightbulb="fromAILightbulb"})(w||(e.ApplyCodeActionReason=w={}));async function S(I,T,M,A,R=k.CancellationToken.None){const N=I.get(f.IBulkEditService),O=I.get(i.ICommandService),x=I.get(u.ITelemetryService),F=I.get(o.INotificationService);if(x.publicLog2("codeAction.applyCodeAction",{codeActionTitle:T.action.title,codeActionKind:T.action.kind,codeActionIsPreferred:!!T.action.isPreferred,reason:M}),await T.resolve(R),!R.isCancellationRequested&&!(T.action.edit?.edits.length&&!(await N.apply(T.action.edit,{editor:A?.editor,label:T.action.title,quotableLabel:T.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:M!==w.OnSave,showPreview:A?.preview})).isApplied)&&T.action.command)try{await O.executeCommand(T.action.command.id,...T.action.command.arguments||[])}catch(W){const z=D(W);F.error(typeof z=="string"?z:t.localize(953,"An unknown error occurred while applying the code action"))}}function D(I){return typeof I=="string"?I:I instanceof Error&&typeof I.message=="string"?I.message:void 0}i.CommandsRegistry.registerCommand("_executeCodeActionProvider",async function(I,T,M,A,R){if(!(T instanceof y.URI))throw(0,E.illegalArgument)();const{codeActionProvider:N}=I.get(p.ILanguageFeaturesService),O=I.get(n.IModelService).getModel(T);if(!O)throw(0,E.illegalArgument)();const x=b.Selection.isISelection(M)?b.Selection.liftSelection(M):_.Range.isIRange(M)?O.validateRange(M):void 0;if(!x)throw(0,E.illegalArgument)();const F=typeof A=="string"?new a.HierarchicalKind(A):void 0,W=await m(N,O,x,{type:1,triggerAction:l.CodeActionTriggerSource.Default,filter:{includeSourceActions:!0,include:F}},g.Progress.None,k.CancellationToken.None),z=[],q=Math.min(W.validActions.length,typeof R=="number"?R:0);for(let H=0;H<q;H++)z.push(W.validActions[H].resolve(k.CancellationToken.None));try{return await Promise.all(z),W.validActions.map(H=>H.action)}finally{setTimeout(()=>W.dispose(),100)}})}),define(oe[724],re([1,0,90,98,155,133,31]),function(ae,e,c,k,E,L,y){"use strict";var f;Object.defineProperty(e,"__esModule",{value:!0}),e.CodeActionKeybindingResolver=void 0;let _=class{static{f=this}static{this.codeActionCommands=[E.refactorCommandId,E.codeActionCommandId,E.sourceActionCommandId,E.organizeImportsCommandId,E.fixAllCommandId]}constructor(p){this.keybindingService=p}getResolver(){const p=new k.Lazy(()=>this.keybindingService.getKeybindings().filter(n=>f.codeActionCommands.indexOf(n.command)>=0).filter(n=>n.resolvedKeybinding).map(n=>{let s=n.commandArgs;return n.command===E.organizeImportsCommandId?s={kind:L.CodeActionKind.SourceOrganizeImports.value}:n.command===E.fixAllCommandId&&(s={kind:L.CodeActionKind.SourceFixAll.value}),{resolvedKeybinding:n.resolvedKeybinding,...L.CodeActionCommandArgs.fromUser(s,{kind:c.HierarchicalKind.None,apply:"never"})}}));return n=>{if(n.kind)return this.bestKeybindingForCodeAction(n,p.value)?.resolvedKeybinding}}bestKeybindingForCodeAction(p,n){if(!p.kind)return;const s=new c.HierarchicalKind(p.kind);return n.filter(t=>t.kind.contains(s)).filter(t=>t.preferred?p.isPreferred:!0).reduceRight((t,i)=>t?t.kind.contains(i.kind)?i:t:i,void 0)}};e.CodeActionKeybindingResolver=_,e.CodeActionKeybindingResolver=_=f=De([he(0,y.IKeybindingService)],_)}),define(oe[403],re([1,0,14,8,6,2,51,37,9,23,12,96,133,155,90]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeActionModel=e.CodeActionsState=e.APPLY_FIX_ALL_COMMAND_ID=e.SUPPORTED_CODE_ACTIONS=void 0,e.SUPPORTED_CODE_ACTIONS=new p.RawContextKey("supportedCodeAction",""),e.APPLY_FIX_ALL_COMMAND_ID="_typescript.applyFixAllCodeAction";class o extends L.Disposable{constructor(r,d,m,h=250){super(),this._editor=r,this._markerService=d,this._signalChange=m,this._delay=h,this._autoTriggerTimer=this._register(new c.TimeoutTimer),this._register(this._markerService.onMarkerChanged(v=>this._onMarkerChanges(v))),this._register(this._editor.onDidChangeCursorPosition(()=>this._tryAutoTrigger()))}trigger(r){const d=this._getRangeOfSelectionUnlessWhitespaceEnclosed(r);this._signalChange(d?{trigger:r,selection:d}:void 0)}_onMarkerChanges(r){const d=this._editor.getModel();d&&r.some(m=>(0,y.isEqual)(m,d.uri))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet(()=>{this.trigger({type:2,triggerAction:s.CodeActionTriggerSource.Default})},this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(r){if(!this._editor.hasModel())return;const d=this._editor.getSelection();if(r.type===1)return d;const m=this._editor.getOption(65).enabled;if(m!==f.ShowLightbulbIconMode.Off){{if(m===f.ShowLightbulbIconMode.On)return d;if(m===f.ShowLightbulbIconMode.OnCode){if(!d.isEmpty())return d;const v=this._editor.getModel(),{lineNumber:C,column:w}=d.getPosition(),S=v.getLineContent(C);if(S.length===0)return;if(w===1){if(/\s/.test(S[0]))return}else if(w===v.getLineMaxColumn(C)){if(/\s/.test(S[S.length-1]))return}else if(/\s/.test(S[w-2])&&/\s/.test(S[w-1]))return}}return d}}}var g;(function(a){a.Empty={type:0};class r{constructor(m,h,v){this.trigger=m,this.position=h,this._cancellablePromise=v,this.type=1,this.actions=v.catch(C=>{if((0,k.isCancellationError)(C))return u;throw C})}cancel(){this._cancellablePromise.cancel()}}a.Triggered=r})(g||(e.CodeActionsState=g={}));const u=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1,hasAIFix:!1,allAIFixes:!1});class l extends L.Disposable{constructor(r,d,m,h,v,C){super(),this._editor=r,this._registry=d,this._markerService=m,this._progressService=v,this._configurationService=C,this._codeActionOracle=this._register(new L.MutableDisposable),this._state=g.Empty,this._onDidChangeState=this._register(new E.Emitter),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=e.SUPPORTED_CODE_ACTIONS.bindTo(h),this._register(this._editor.onDidChangeModel(()=>this._update())),this._register(this._editor.onDidChangeModelLanguage(()=>this._update())),this._register(this._registry.onDidChange(()=>this._update())),this._register(this._editor.onDidChangeConfiguration(w=>{w.hasChanged(65)&&this._update()})),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(g.Empty,!0))}_settingEnabledNearbyQuickfixes(){const r=this._editor?.getModel();return this._configurationService?this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickFixes",{resource:r?.uri}):!1}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(g.Empty);const r=this._editor.getModel();if(r&&this._registry.has(r)&&!this._editor.getOption(92)){const d=this._registry.all(r).flatMap(m=>m.providedCodeActionKinds??[]);this._supportedCodeActions.set(d.join(" ")),this._codeActionOracle.value=new o(this._editor,this._markerService,m=>{if(!m){this.setState(g.Empty);return}const h=m.selection.getStartPosition(),v=(0,c.createCancelablePromise)(async S=>{if(this._settingEnabledNearbyQuickfixes()&&m.trigger.type===1&&(m.trigger.triggerAction===s.CodeActionTriggerSource.QuickFix||m.trigger.filter?.include?.contains(s.CodeActionKind.QuickFix))){const D=await(0,t.getCodeActions)(this._registry,r,m.selection,m.trigger,n.Progress.None,S),I=[...D.allActions];if(S.isCancellationRequested)return u;const T=D.validActions?.some(A=>A.action.kind?s.CodeActionKind.QuickFix.contains(new i.HierarchicalKind(A.action.kind)):!1),M=this._markerService.read({resource:r.uri});if(T){for(const A of D.validActions)A.action.command?.arguments?.some(R=>typeof R=="string"&&R.includes(e.APPLY_FIX_ALL_COMMAND_ID))&&(A.action.diagnostics=[...M.filter(R=>R.relatedInformation)]);return{validActions:D.validActions,allActions:I,documentation:D.documentation,hasAutoFix:D.hasAutoFix,hasAIFix:D.hasAIFix,allAIFixes:D.allAIFixes,dispose:()=>{D.dispose()}}}else if(!T&&M.length>0){const A=m.selection.getPosition();let R=A,N=Number.MAX_VALUE;const O=[...D.validActions];for(const F of M){const W=F.endColumn,z=F.endLineNumber,q=F.startLineNumber;if(z===A.lineNumber||q===A.lineNumber){R=new _.Position(z,W);const H={type:m.trigger.type,triggerAction:m.trigger.triggerAction,filter:{include:m.trigger.filter?.include?m.trigger.filter?.include:s.CodeActionKind.QuickFix},autoApply:m.trigger.autoApply,context:{notAvailableMessage:m.trigger.context?.notAvailableMessage||"",position:R}},K=new b.Selection(R.lineNumber,R.column,R.lineNumber,R.column),U=await(0,t.getCodeActions)(this._registry,r,K,H,n.Progress.None,S);if(U.validActions.length!==0){for(const Y of U.validActions)Y.action.command?.arguments?.some(Q=>typeof Q=="string"&&Q.includes(e.APPLY_FIX_ALL_COMMAND_ID))&&(Y.action.diagnostics=[...M.filter(Q=>Q.relatedInformation)]);D.allActions.length===0&&I.push(...U.allActions),Math.abs(A.column-W)<N?O.unshift(...U.validActions):O.push(...U.validActions)}N=Math.abs(A.column-W)}}const x=O.filter((F,W,z)=>z.findIndex(q=>q.action.title===F.action.title)===W);return x.sort((F,W)=>F.action.isPreferred&&!W.action.isPreferred?-1:!F.action.isPreferred&&W.action.isPreferred||F.action.isAI&&!W.action.isAI?1:!F.action.isAI&&W.action.isAI?-1:0),{validActions:x,allActions:I,documentation:D.documentation,hasAutoFix:D.hasAutoFix,hasAIFix:D.hasAIFix,allAIFixes:D.allAIFixes,dispose:()=>{D.dispose()}}}}return(0,t.getCodeActions)(this._registry,r,m.selection,m.trigger,n.Progress.None,S)});m.trigger.type===1&&this._progressService?.showWhile(v,250);const C=new g.Triggered(m.trigger,h,v);let w=!1;this._state.type===1&&(w=this._state.trigger.type===1&&C.type===1&&C.trigger.type===2&&this._state.position!==C.position),w?setTimeout(()=>{this.setState(C)},500):this.setState(C)},void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:s.CodeActionTriggerSource.Default})}else this._supportedCodeActions.reset()}trigger(r){this._codeActionOracle.value?.trigger(r)}setState(r,d){r!==this._state&&(this._state.type===1&&this._state.cancel(),this._state=r,!d&&!this._disposed&&this._onDidChangeState.fire(r))}}e.CodeActionModel=l}),define(oe[725],re([1,0,15,167,3]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class L extends c.EditorAction{constructor(){super({id:"editor.action.fontZoomIn",label:E.localize(774,"Increase Editor Font Size"),alias:"Increase Editor Font Size",precondition:void 0})}run(b,p){k.EditorZoom.setZoomLevel(k.EditorZoom.getZoomLevel()+1)}}class y extends c.EditorAction{constructor(){super({id:"editor.action.fontZoomOut",label:E.localize(775,"Decrease Editor Font Size"),alias:"Decrease Editor Font Size",precondition:void 0})}run(b,p){k.EditorZoom.setZoomLevel(k.EditorZoom.getZoomLevel()-1)}}class f extends c.EditorAction{constructor(){super({id:"editor.action.fontZoomReset",label:E.localize(776,"Reset Editor Font Size"),alias:"Reset Editor Font Size",precondition:void 0})}run(b,p){k.EditorZoom.setZoomLevel(0)}}(0,c.registerEditorAction)(L),(0,c.registerEditorAction)(y),(0,c.registerEditorAction)(f)}),define(oe[404],re([1,0,13,18,8,53,73,19,22,122,171,9,4,23,116,78,352,24,668,7,17,61,136]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingConflicts=void 0,e.getRealAndSyntheticDocumentFormattersOrdered=h,e.formatDocumentRangesWithSelectedProvider=C,e.formatDocumentRangesWithProvider=w,e.formatDocumentWithSelectedProvider=S,e.formatDocumentWithProvider=D,e.getDocumentRangeFormattingEditsUntilResult=I,e.getDocumentFormattingEditsUntilResult=T,e.getOnTypeFormattingEdits=M;function h(A,R,N){const O=[],x=new l.ExtensionIdentifierSet,F=A.ordered(N);for(const z of F)O.push(z),z.extensionId&&x.add(z.extensionId);const W=R.ordered(N);for(const z of W){if(z.extensionId){if(x.has(z.extensionId))continue;x.add(z.extensionId)}O.push({displayName:z.displayName,extensionId:z.extensionId,provideDocumentFormattingEdits(q,H,K){return z.provideDocumentRangeFormattingEdits(q,q.getFullModelRange(),H,K)}})}return O}class v{static{this._selectors=new y.LinkedList}static setFormatterSelector(R){return{dispose:v._selectors.unshift(R)}}static async select(R,N,O,x){if(R.length===0)return;const F=L.Iterable.first(v._selectors);if(F)return await F(R,N,O,x)}}e.FormattingConflicts=v;async function C(A,R,N,O,x,F,W){const z=A.get(a.IInstantiationService),{documentRangeFormattingEditProvider:q}=A.get(r.ILanguageFeaturesService),H=(0,p.isCodeEditor)(R)?R.getModel():R,K=q.ordered(H),U=await v.select(K,H,O,2);U&&(x.report(U),await z.invokeFunction(w,U,R,N,F,W))}async function w(A,R,N,O,x,F){const W=A.get(i.IEditorWorkerService),z=A.get(d.ILogService),q=A.get(m.IAccessibilitySignalService);let H,K;(0,p.isCodeEditor)(N)?(H=N.getModel(),K=new b.EditorStateCancellationTokenSource(N,5,void 0,x)):(H=N,K=new b.TextModelCancellationTokenSource(N,x));const U=[];let Y=0;for(const te of(0,c.asArray)(O).sort(s.Range.compareRangesUsingStarts))Y>0&&s.Range.areIntersectingOrTouching(U[Y-1],te)?U[Y-1]=s.Range.fromPositions(U[Y-1].getStartPosition(),te.getEndPosition()):Y=U.push(te);const Q=async te=>{z.trace("[format][provideDocumentRangeFormattingEdits] (request)",R.extensionId?.value,te);const se=await R.provideDocumentRangeFormattingEdits(H,te,H.getFormattingOptions(),K.token)||[];return z.trace("[format][provideDocumentRangeFormattingEdits] (response)",R.extensionId?.value,se),se},X=(te,se)=>{if(!te.length||!se.length)return!1;const ue=te.reduce((ge,pe)=>s.Range.plusRange(ge,pe.range),te[0].range);if(!se.some(ge=>s.Range.intersectRanges(ue,ge.range)))return!1;for(const ge of te)for(const pe of se)if(s.Range.intersectRanges(ge.range,pe.range))return!0;return!1},G=[],P=[];try{if(typeof R.provideDocumentRangesFormattingEdits=="function"){z.trace("[format][provideDocumentRangeFormattingEdits] (request)",R.extensionId?.value,U);const te=await R.provideDocumentRangesFormattingEdits(H,U,H.getFormattingOptions(),K.token)||[];z.trace("[format][provideDocumentRangeFormattingEdits] (response)",R.extensionId?.value,te),P.push(te)}else{for(const te of U){if(K.token.isCancellationRequested)return!0;P.push(await Q(te))}for(let te=0;te<U.length;++te)for(let se=te+1;se<U.length;++se){if(K.token.isCancellationRequested)return!0;if(X(P[te],P[se])){const ue=s.Range.plusRange(U[te],U[se]),ge=await Q(ue);U.splice(se,1),U.splice(te,1),U.push(ue),P.splice(se,1),P.splice(te,1),P.push(ge),te=0,se=0}}}for(const te of P){if(K.token.isCancellationRequested)return!0;const se=await W.computeMoreMinimalEdits(H.uri,te);se&&G.push(...se)}}finally{K.dispose()}if(G.length===0)return!1;if((0,p.isCodeEditor)(N))g.FormattingEdit.execute(N,G,!0),N.revealPositionInCenterIfOutsideViewport(N.getPosition(),1);else{const[{range:te}]=G,se=new t.Selection(te.startLineNumber,te.startColumn,te.endLineNumber,te.endColumn);H.pushEditOperations([se],G.map(ue=>({text:ue.text,range:s.Range.lift(ue.range),forceMoveMarkers:!0})),ue=>{for(const{range:ge}of ue)if(s.Range.areIntersectingOrTouching(ge,se))return[new t.Selection(ge.startLineNumber,ge.startColumn,ge.endLineNumber,ge.endColumn)];return null})}return q.playSignal(m.AccessibilitySignal.format,{userGesture:F}),!0}async function S(A,R,N,O,x,F){const W=A.get(a.IInstantiationService),z=A.get(r.ILanguageFeaturesService),q=(0,p.isCodeEditor)(R)?R.getModel():R,H=h(z.documentFormattingEditProvider,z.documentRangeFormattingEditProvider,q),K=await v.select(H,q,N,1);K&&(O.report(K),await W.invokeFunction(D,K,R,N,x,F))}async function D(A,R,N,O,x,F){const W=A.get(i.IEditorWorkerService),z=A.get(m.IAccessibilitySignalService);let q,H;(0,p.isCodeEditor)(N)?(q=N.getModel(),H=new b.EditorStateCancellationTokenSource(N,5,void 0,x)):(q=N,H=new b.TextModelCancellationTokenSource(N,x));let K;try{const U=await R.provideDocumentFormattingEdits(q,q.getFormattingOptions(),H.token);if(K=await W.computeMoreMinimalEdits(q.uri,U),H.token.isCancellationRequested)return!0}finally{H.dispose()}if(!K||K.length===0)return!1;if((0,p.isCodeEditor)(N))g.FormattingEdit.execute(N,K,O!==2),O!==2&&N.revealPositionInCenterIfOutsideViewport(N.getPosition(),1);else{const[{range:U}]=K,Y=new t.Selection(U.startLineNumber,U.startColumn,U.endLineNumber,U.endColumn);q.pushEditOperations([Y],K.map(Q=>({text:Q.text,range:s.Range.lift(Q.range),forceMoveMarkers:!0})),Q=>{for(const{range:X}of Q)if(s.Range.areIntersectingOrTouching(X,Y))return[new t.Selection(X.startLineNumber,X.startColumn,X.endLineNumber,X.endColumn)];return null})}return z.playSignal(m.AccessibilitySignal.format,{userGesture:F}),!0}async function I(A,R,N,O,x,F){const W=R.documentRangeFormattingEditProvider.ordered(N);for(const z of W){const q=await Promise.resolve(z.provideDocumentRangeFormattingEdits(N,O,x,F)).catch(E.onUnexpectedExternalError);if((0,c.isNonEmptyArray)(q))return await A.computeMoreMinimalEdits(N.uri,q)}}async function T(A,R,N,O,x){const F=h(R.documentFormattingEditProvider,R.documentRangeFormattingEditProvider,N);for(const W of F){const z=await Promise.resolve(W.provideDocumentFormattingEdits(N,O,x)).catch(E.onUnexpectedExternalError);if((0,c.isNonEmptyArray)(z))return await A.computeMoreMinimalEdits(N.uri,z)}}function M(A,R,N,O,x,F,W){const z=R.onTypeFormattingEditProvider.ordered(N);return z.length===0||z[0].autoFormatTriggerCharacters.indexOf(x)<0?Promise.resolve(void 0):Promise.resolve(z[0].provideOnTypeFormattingEdits(N,O,x,F,W)).catch(E.onUnexpectedExternalError).then(q=>A.computeMoreMinimalEdits(N.uri,q))}u.CommandsRegistry.registerCommand("_executeFormatRangeProvider",async function(A,...R){const[N,O,x]=R;(0,f.assertType)(_.URI.isUri(N)),(0,f.assertType)(s.Range.isIRange(O));const F=A.get(o.ITextModelService),W=A.get(i.IEditorWorkerService),z=A.get(r.ILanguageFeaturesService),q=await F.createModelReference(N);try{return I(W,z,q.object.textEditorModel,s.Range.lift(O),x,k.CancellationToken.None)}finally{q.dispose()}}),u.CommandsRegistry.registerCommand("_executeFormatDocumentProvider",async function(A,...R){const[N,O]=R;(0,f.assertType)(_.URI.isUri(N));const x=A.get(o.ITextModelService),F=A.get(i.IEditorWorkerService),W=A.get(r.ILanguageFeaturesService),z=await x.createModelReference(N);try{return T(F,W,z.object.textEditorModel,O,k.CancellationToken.None)}finally{z.dispose()}}),u.CommandsRegistry.registerCommand("_executeFormatOnTypeProvider",async function(A,...R){const[N,O,x,F]=R;(0,f.assertType)(_.URI.isUri(N)),(0,f.assertType)(n.Position.isIPosition(O)),(0,f.assertType)(typeof x=="string");const W=A.get(o.ITextModelService),z=A.get(i.IEditorWorkerService),q=A.get(r.ILanguageFeaturesService),H=await W.createModelReference(N);try{return M(z,q,H.object.textEditorModel,n.Position.lift(O),x,F,k.CancellationToken.None)}finally{H.dispose()}})}),define(oe[726],re([1,0,13,18,8,72,2,15,35,143,4,20,116,17,404,352,3,136,24,12,7,96]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormatOnType=void 0;let m=class{static{this.ID="editor.contrib.autoFormat"}constructor(S,D,I,T){this._editor=S,this._languageFeaturesService=D,this._workerService=I,this._accessibilitySignalService=T,this._disposables=new y.DisposableStore,this._sessionDisposables=new y.DisposableStore,this._disposables.add(D.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(S.onDidChangeModel(()=>this._update())),this._disposables.add(S.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(S.onDidChangeConfiguration(M=>{M.hasChanged(56)&&this._update()})),this._update()}dispose(){this._disposables.dispose(),this._sessionDisposables.dispose()}_update(){if(this._sessionDisposables.clear(),!this._editor.getOption(56)||!this._editor.hasModel())return;const S=this._editor.getModel(),[D]=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(S);if(!D||!D.autoFormatTriggerCharacters)return;const I=new b.CharacterSet;for(const T of D.autoFormatTriggerCharacters)I.add(T.charCodeAt(0));this._sessionDisposables.add(this._editor.onDidType(T=>{const M=T.charCodeAt(T.length-1);I.has(M)&&this._trigger(String.fromCharCode(M))}))}_trigger(S){if(!this._editor.hasModel()||this._editor.getSelections().length>1||!this._editor.getSelection().isEmpty())return;const D=this._editor.getModel(),I=this._editor.getPosition(),T=new k.CancellationTokenSource,M=this._editor.onDidChangeModelContent(A=>{if(A.isFlush){T.cancel(),M.dispose();return}for(let R=0,N=A.changes.length;R<N;R++)if(A.changes[R].range.endLineNumber<=I.lineNumber){T.cancel(),M.dispose();return}});(0,i.getOnTypeFormattingEdits)(this._workerService,this._languageFeaturesService,D,I,S,D.getFormattingOptions(),T.token).then(A=>{T.token.isCancellationRequested||(0,c.isNonEmptyArray)(A)&&(this._accessibilitySignalService.playSignal(u.AccessibilitySignal.format,{userGesture:!1}),o.FormattingEdit.execute(this._editor,A,!0))}).finally(()=>{M.dispose()})}};e.FormatOnType=m,e.FormatOnType=m=De([he(1,t.ILanguageFeaturesService),he(2,s.IEditorWorkerService),he(3,u.IAccessibilitySignalService)],m);let h=class{static{this.ID="editor.contrib.formatOnPaste"}constructor(S,D,I){this.editor=S,this._languageFeaturesService=D,this._instantiationService=I,this._callOnDispose=new y.DisposableStore,this._callOnModel=new y.DisposableStore,this._callOnDispose.add(S.onDidChangeConfiguration(()=>this._update())),this._callOnDispose.add(S.onDidChangeModel(()=>this._update())),this._callOnDispose.add(S.onDidChangeModelLanguage(()=>this._update())),this._callOnDispose.add(D.documentRangeFormattingEditProvider.onDidChange(this._update,this))}dispose(){this._callOnDispose.dispose(),this._callOnModel.dispose()}_update(){this._callOnModel.clear(),this.editor.getOption(55)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste(({range:S})=>this._trigger(S)))}_trigger(S){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(i.formatDocumentRangesWithSelectedProvider,this.editor,S,2,d.Progress.None,k.CancellationToken.None,!1).catch(E.onUnexpectedError))}};h=De([he(1,t.ILanguageFeaturesService),he(2,r.IInstantiationService)],h);class v extends f.EditorAction{constructor(){super({id:"editor.action.formatDocument",label:g.localize(772,"Format Document"),alias:"Format Document",precondition:a.ContextKeyExpr.and(n.EditorContextKeys.notInCompositeEditor,n.EditorContextKeys.writable,n.EditorContextKeys.hasDocumentFormattingProvider),kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}async run(S,D){if(D.hasModel()){const I=S.get(r.IInstantiationService);await S.get(d.IEditorProgressService).showWhile(I.invokeFunction(i.formatDocumentWithSelectedProvider,D,1,d.Progress.None,k.CancellationToken.None,!0),250)}}}class C extends f.EditorAction{constructor(){super({id:"editor.action.formatSelection",label:g.localize(773,"Format Selection"),alias:"Format Selection",precondition:a.ContextKeyExpr.and(n.EditorContextKeys.writable,n.EditorContextKeys.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2084),weight:100},contextMenuOpts:{when:n.EditorContextKeys.hasNonEmptySelection,group:"1_modification",order:1.31}})}async run(S,D){if(!D.hasModel())return;const I=S.get(r.IInstantiationService),T=D.getModel(),M=D.getSelections().map(R=>R.isEmpty()?new p.Range(R.startLineNumber,1,R.startLineNumber,T.getLineMaxColumn(R.startLineNumber)):R);await S.get(d.IEditorProgressService).showWhile(I.invokeFunction(i.formatDocumentRangesWithSelectedProvider,D,M,1,d.Progress.None,k.CancellationToken.None,!0),250)}}(0,f.registerEditorContribution)(m.ID,m,2),(0,f.registerEditorContribution)(h.ID,h,2),(0,f.registerEditorAction)(v),(0,f.registerEditorAction)(C),l.CommandsRegistry.registerCommand("editor.action.format",async w=>{const S=w.get(_.ICodeEditorService).getFocusedCodeEditor();if(!S||!S.hasModel())return;const D=w.get(l.ICommandService);S.getSelection().isEmpty()?await D.executeCommand("editor.action.formatDocument"):await D.executeCommand("editor.action.formatSelection")})}),define(oe[276],re([1,0,13,18,8,47,15,17,177]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefinitionsAtPosition=n,e.getDeclarationsAtPosition=s,e.getImplementationsAtPosition=t,e.getTypeDefinitionsAtPosition=i,e.getReferencesAtPosition=o;function b(u,l){return l.uri.scheme===u.uri.scheme?!0:!(0,L.matchesSomeScheme)(l.uri,L.Schemas.walkThroughSnippet,L.Schemas.vscodeChatCodeBlock,L.Schemas.vscodeChatCodeCompareBlock,L.Schemas.vscodeCopilotBackingChatCodeBlock)}async function p(u,l,a,r,d){const h=a.ordered(u,r).map(C=>Promise.resolve(d(C,u,l)).then(void 0,w=>{(0,E.onUnexpectedExternalError)(w)})),v=await Promise.all(h);return(0,c.coalesce)(v.flat()).filter(C=>b(u,C))}function n(u,l,a,r,d){return p(l,a,u,r,(m,h,v)=>m.provideDefinition(h,v,d))}function s(u,l,a,r,d){return p(l,a,u,r,(m,h,v)=>m.provideDeclaration(h,v,d))}function t(u,l,a,r,d){return p(l,a,u,r,(m,h,v)=>m.provideImplementation(h,v,d))}function i(u,l,a,r,d){return p(l,a,u,r,(m,h,v)=>m.provideTypeDefinition(h,v,d))}function o(u,l,a,r,d,m){return p(l,a,u,d,async(h,v,C)=>{const w=(await h.provideReferences(v,C,{includeDeclaration:!0},m))?.filter(D=>b(v,D));if(!r||!w||w.length!==2)return w;const S=(await h.provideReferences(v,C,{includeDeclaration:!1},m))?.filter(D=>b(v,D));return S&&S.length===1?S:w})}async function g(u){const l=await u(),a=new _.ReferencesModel(l,""),r=a.references.map(d=>d.link);return a.dispose(),r}(0,y.registerModelAndPositionCommand)("_executeDefinitionProvider",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=n(r.definitionProvider,l,a,!1,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeDefinitionProvider_recursive",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=n(r.definitionProvider,l,a,!0,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeTypeDefinitionProvider",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=i(r.typeDefinitionProvider,l,a,!1,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeTypeDefinitionProvider_recursive",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=i(r.typeDefinitionProvider,l,a,!0,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeDeclarationProvider",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=s(r.declarationProvider,l,a,!1,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeDeclarationProvider_recursive",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=s(r.declarationProvider,l,a,!0,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeReferenceProvider",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=o(r.referenceProvider,l,a,!1,!1,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeReferenceProvider_recursive",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=o(r.referenceProvider,l,a,!1,!0,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeImplementationProvider",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=t(r.implementationProvider,l,a,!1,k.CancellationToken.None);return g(()=>d)}),(0,y.registerModelAndPositionCommand)("_executeImplementationProvider_recursive",(u,l,a)=>{const r=u.get(f.ILanguageFeaturesService),d=t(r.implementationProvider,l,a,!0,k.CancellationToken.None);return g(()=>d)})}),define(oe[727],re([1,0,6,2,51,15,35,4,3,12,49,7,31,121,50]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ISymbolNavigationService=e.ctxHasSymbols=void 0,e.ctxHasSymbols=new b.RawContextKey("hasSymbols",!1,(0,_.localize)(700,"Whether there are symbol locations that can be navigated via keyboard-only.")),e.ISymbolNavigationService=(0,n.createDecorator)("ISymbolNavigationService");let o=class{constructor(l,a,r,d){this._editorService=a,this._notificationService=r,this._keybindingService=d,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=e.ctxHasSymbols.bindTo(l)}reset(){this._ctxHasSymbols.reset(),this._currentState?.dispose(),this._currentMessage?.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(l){const a=l.parent.parent;if(a.references.length<=1){this.reset();return}this._currentModel=a,this._currentIdx=a.references.indexOf(l),this._ctxHasSymbols.set(!0),this._showMessage();const r=new g(this._editorService),d=r.onDidChange(m=>{if(this._ignoreEditorChange)return;const h=this._editorService.getActiveCodeEditor();if(!h)return;const v=h.getModel(),C=h.getPosition();if(!v||!C)return;let w=!1,S=!1;for(const D of a.references)if((0,E.isEqual)(D.uri,v.uri))w=!0,S=S||f.Range.containsPosition(D.range,C);else if(w)break;(!w||!S)&&this.reset()});this._currentState=(0,k.combinedDisposable)(r,d)}revealNext(l){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const a=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:a.uri,options:{selection:f.Range.collapseToStart(a.range),selectionRevealType:3}},l).finally(()=>{this._ignoreEditorChange=!1})}_showMessage(){this._currentMessage?.dispose();const l=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),a=l?(0,_.localize)(701,"Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,l.getLabel()):(0,_.localize)(702,"Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(a)}};o=De([he(0,b.IContextKeyService),he(1,y.ICodeEditorService),he(2,i.INotificationService),he(3,s.IKeybindingService)],o),(0,p.registerSingleton)(e.ISymbolNavigationService,o,1),(0,L.registerEditorCommand)(new class extends L.EditorCommand{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:e.ctxHasSymbols,kbOpts:{weight:100,primary:70}})}runEditorCommand(u,l){return u.get(e.ISymbolNavigationService).revealNext(l)}}),t.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:e.ctxHasSymbols,primary:9,handler(u){u.get(e.ISymbolNavigationService).reset()}});let g=class{constructor(l){this._listener=new Map,this._disposables=new k.DisposableStore,this._onDidChange=new c.Emitter,this.onDidChange=this._onDidChange.event,this._disposables.add(l.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(l.onCodeEditorAdd(this._onDidAddEditor,this)),l.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,k.dispose)(this._listener.values())}_onDidAddEditor(l){this._listener.set(l,(0,k.combinedDisposable)(l.onDidChangeCursorPosition(a=>this._onDidChange.fire({editor:l})),l.onDidChangeModelContent(a=>this._onDidChange.fire({editor:l}))))}_onDidRemoveEditor(l){this._listener.get(l)?.dispose(),this._listener.delete(l)}};g=De([he(0,y.ICodeEditorService)],g)}),define(oe[405],re([1,0,14,18,8,15,17]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverProviderResult=void 0,e.getHoverProviderResultsAsAsyncIterable=b,e.getHoversPromise=p;class f{constructor(t,i,o){this.provider=t,this.hover=i,this.ordinal=o}}e.HoverProviderResult=f;async function _(s,t,i,o,g){const u=await Promise.resolve(s.provideHover(i,o,g)).catch(E.onUnexpectedExternalError);if(!(!u||!n(u)))return new f(s,u,t)}function b(s,t,i,o,g=!1){const l=s.ordered(t,g).map((a,r)=>_(a,r,t,i,o));return c.AsyncIterableObject.fromPromises(l).coalesce()}function p(s,t,i,o,g=!1){return b(s,t,i,o,g).map(u=>u.hover).toPromise()}(0,L.registerModelAndPositionCommand)("_executeHoverProvider",(s,t,i)=>{const o=s.get(y.ILanguageFeaturesService);return p(o.hoverProvider,t,i,k.CancellationToken.None)}),(0,L.registerModelAndPositionCommand)("_executeHoverProvider_recursive",(s,t,i)=>{const o=s.get(y.ILanguageFeaturesService);return p(o.hoverProvider,t,i,k.CancellationToken.None,!0)});function n(s){const t=typeof s.range<"u",i=typeof s.contents<"u"&&s.contents&&s.contents.length>0;return t&&i}}),define(oe[728],re([1,0,2,11,15,183,4,20,34,44,354,3,63,252,705,94]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentationToTabsCommand=e.IndentationToSpacesCommand=e.AutoIndentOnPaste=e.AutoIndentOnPasteCommand=e.ReindentSelectedLinesAction=e.ReindentLinesAction=e.DetectIndentation=e.ChangeTabDisplaySize=e.IndentUsingSpaces=e.IndentUsingTabs=e.ChangeIndentationSizeAction=e.IndentationToTabsAction=e.IndentationToSpacesAction=void 0;class g extends E.EditorAction{static{this.ID="editor.action.indentationToSpaces"}constructor(){super({id:g.ID,label:n.localize(639,"Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:f.EditorContextKeys.writable,metadata:{description:n.localize2(651,"Convert the tab indentation to spaces.")}})}run(A,R){const N=R.getModel();if(!N)return;const O=N.getOptions(),x=R.getSelection();if(!x)return;const F=new I(x,O.tabSize);R.pushUndoStop(),R.executeCommands(this.id,[F]),R.pushUndoStop(),N.updateOptions({insertSpaces:!0})}}e.IndentationToSpacesAction=g;class u extends E.EditorAction{static{this.ID="editor.action.indentationToTabs"}constructor(){super({id:u.ID,label:n.localize(640,"Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:f.EditorContextKeys.writable,metadata:{description:n.localize2(652,"Convert the spaces indentation to tabs.")}})}run(A,R){const N=R.getModel();if(!N)return;const O=N.getOptions(),x=R.getSelection();if(!x)return;const F=new T(x,O.tabSize);R.pushUndoStop(),R.executeCommands(this.id,[F]),R.pushUndoStop(),N.updateOptions({insertSpaces:!1})}}e.IndentationToTabsAction=u;class l extends E.EditorAction{constructor(A,R,N){super(N),this.insertSpaces=A,this.displaySizeOnly=R}run(A,R){const N=A.get(s.IQuickInputService),O=A.get(b.IModelService),x=R.getModel();if(!x)return;const F=O.getCreationOptions(x.getLanguageId(),x.uri,x.isForSimpleWidget),W=x.getOptions(),z=[1,2,3,4,5,6,7,8].map(H=>({id:H.toString(),label:H.toString(),description:H===F.tabSize&&H===W.tabSize?n.localize(641,"Configured Tab Size"):H===F.tabSize?n.localize(642,"Default Tab Size"):H===W.tabSize?n.localize(643,"Current Tab Size"):void 0})),q=Math.min(x.getOptions().tabSize-1,7);setTimeout(()=>{N.pick(z,{placeHolder:n.localize(644,"Select Tab Size for Current File"),activeItem:z[q]}).then(H=>{if(H&&x&&!x.isDisposed()){const K=parseInt(H.label,10);this.displaySizeOnly?x.updateOptions({tabSize:K}):x.updateOptions({tabSize:K,indentSize:K,insertSpaces:this.insertSpaces})}})},50)}}e.ChangeIndentationSizeAction=l;class a extends l{static{this.ID="editor.action.indentUsingTabs"}constructor(){super(!1,!1,{id:a.ID,label:n.localize(645,"Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:n.localize2(653,"Use indentation with tabs.")}})}}e.IndentUsingTabs=a;class r extends l{static{this.ID="editor.action.indentUsingSpaces"}constructor(){super(!0,!1,{id:r.ID,label:n.localize(646,"Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:n.localize2(654,"Use indentation with spaces.")}})}}e.IndentUsingSpaces=r;class d extends l{static{this.ID="editor.action.changeTabDisplaySize"}constructor(){super(!0,!0,{id:d.ID,label:n.localize(647,"Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:n.localize2(655,"Change the space size equivalent of the tab.")}})}}e.ChangeTabDisplaySize=d;class m extends E.EditorAction{static{this.ID="editor.action.detectIndentation"}constructor(){super({id:m.ID,label:n.localize(648,"Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:n.localize2(656,"Detect the indentation from content.")}})}run(A,R){const N=A.get(b.IModelService),O=R.getModel();if(!O)return;const x=N.getCreationOptions(O.getLanguageId(),O.uri,O.isForSimpleWidget);O.detectIndentation(x.insertSpaces,x.tabSize)}}e.DetectIndentation=m;class h extends E.EditorAction{constructor(){super({id:"editor.action.reindentlines",label:n.localize(649,"Reindent Lines"),alias:"Reindent Lines",precondition:f.EditorContextKeys.writable,metadata:{description:n.localize2(657,"Reindent the lines of the editor.")}})}run(A,R){const N=A.get(_.ILanguageConfigurationService),O=R.getModel();if(!O)return;const x=(0,i.getReindentEditOperations)(O,N,1,O.getLineCount());x.length>0&&(R.pushUndoStop(),R.executeEdits(this.id,x),R.pushUndoStop())}}e.ReindentLinesAction=h;class v extends E.EditorAction{constructor(){super({id:"editor.action.reindentselectedlines",label:n.localize(650,"Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:f.EditorContextKeys.writable,metadata:{description:n.localize2(658,"Reindent the selected lines of the editor.")}})}run(A,R){const N=A.get(_.ILanguageConfigurationService),O=R.getModel();if(!O)return;const x=R.getSelections();if(x===null)return;const F=[];for(const W of x){let z=W.startLineNumber,q=W.endLineNumber;if(z!==q&&W.endColumn===1&&q--,z===1){if(z===q)continue}else z--;const H=(0,i.getReindentEditOperations)(O,N,z,q);F.push(...H)}F.length>0&&(R.pushUndoStop(),R.executeEdits(this.id,F),R.pushUndoStop())}}e.ReindentSelectedLinesAction=v;class C{constructor(A,R){this._initialSelection=R,this._edits=[],this._selectionId=null;for(const N of A)N.range&&typeof N.text=="string"&&this._edits.push(N)}getEditOperations(A,R){for(const O of this._edits)R.addEditOperation(y.Range.lift(O.range),O.text);let N=!1;Array.isArray(this._edits)&&this._edits.length===1&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(N=!0,this._selectionId=R.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(N=!0,this._selectionId=R.trackSelection(this._initialSelection,!1))),N||(this._selectionId=R.trackSelection(this._initialSelection))}computeCursorState(A,R){return R.getTrackedSelection(this._selectionId)}}e.AutoIndentOnPasteCommand=C;let w=class{static{this.ID="editor.contrib.autoIndentOnPaste"}constructor(A,R){this.editor=A,this._languageConfigurationService=R,this.callOnDispose=new c.DisposableStore,this.callOnModel=new c.DisposableStore,this.callOnDispose.add(A.onDidChangeConfiguration(()=>this.update())),this.callOnDispose.add(A.onDidChangeModel(()=>this.update())),this.callOnDispose.add(A.onDidChangeModelLanguage(()=>this.update()))}update(){this.callOnModel.clear(),!(this.editor.getOption(12)<4||this.editor.getOption(55))&&this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste(({range:A})=>{this.trigger(A)}))}trigger(A){const R=this.editor.getSelections();if(R===null||R.length>1)return;const N=this.editor.getModel();if(!N||this.rangeContainsOnlyWhitespaceCharacters(N,A)||S(N,A)||!N.tokenization.isCheapToTokenize(A.getStartPosition().lineNumber))return;const x=this.editor.getOption(12),{tabSize:F,indentSize:W,insertSpaces:z}=N.getOptions(),q=[],H={shiftIndent:Q=>L.ShiftCommand.shiftIndent(Q,Q.length+1,F,W,z),unshiftIndent:Q=>L.ShiftCommand.unshiftIndent(Q,Q.length+1,F,W,z)};let K=A.startLineNumber;for(;K<=A.endLineNumber;){if(this.shouldIgnoreLine(N,K)){K++;continue}break}if(K>A.endLineNumber)return;let U=N.getLineContent(K);if(!/\S/.test(U.substring(0,A.startColumn-1))){const Q=(0,t.getGoodIndentForLine)(x,N,N.getLanguageId(),K,H,this._languageConfigurationService);if(Q!==null){const X=k.getLeadingWhitespace(U),G=p.getSpaceCnt(Q,F),P=p.getSpaceCnt(X,F);if(G!==P){const te=p.generateIndent(G,F,z);q.push({range:new y.Range(K,1,K,X.length+1),text:te}),U=te+U.substring(X.length)}else{const te=(0,t.getIndentMetadata)(N,K,this._languageConfigurationService);if(te===0||te===8)return}}}const Y=K;for(;K<A.endLineNumber;){if(!/\S/.test(N.getLineContent(K+1))){K++;continue}break}if(K!==A.endLineNumber){const Q={tokenization:{getLineTokens:G=>N.tokenization.getLineTokens(G),getLanguageId:()=>N.getLanguageId(),getLanguageIdAtPosition:(G,P)=>N.getLanguageIdAtPosition(G,P)},getLineContent:G=>G===Y?U:N.getLineContent(G)},X=(0,t.getGoodIndentForLine)(x,Q,N.getLanguageId(),K+1,H,this._languageConfigurationService);if(X!==null){const G=p.getSpaceCnt(X,F),P=p.getSpaceCnt(k.getLeadingWhitespace(N.getLineContent(K+1)),F);if(G!==P){const te=G-P;for(let se=K+1;se<=A.endLineNumber;se++){const ue=N.getLineContent(se),ge=k.getLeadingWhitespace(ue),ce=p.getSpaceCnt(ge,F)+te,ie=p.generateIndent(ce,F,z);ie!==ge&&q.push({range:new y.Range(se,1,se,ge.length+1),text:ie})}}}}if(q.length>0){this.editor.pushUndoStop();const Q=new C(q,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",Q),this.editor.pushUndoStop()}}rangeContainsOnlyWhitespaceCharacters(A,R){const N=x=>x.trim().length===0;let O=!0;if(R.startLineNumber===R.endLineNumber){const F=A.getLineContent(R.startLineNumber).substring(R.startColumn-1,R.endColumn-1);O=N(F)}else for(let x=R.startLineNumber;x<=R.endLineNumber;x++){const F=A.getLineContent(x);if(x===R.startLineNumber){const W=F.substring(R.startColumn-1);O=N(W)}else if(x===R.endLineNumber){const W=F.substring(0,R.endColumn-1);O=N(W)}else O=A.getLineFirstNonWhitespaceColumn(x)===0;if(!O)break}return O}shouldIgnoreLine(A,R){A.tokenization.forceTokenization(R);const N=A.getLineFirstNonWhitespaceColumn(R);if(N===0)return!0;const O=A.tokenization.getLineTokens(R);if(O.getCount()>0){const x=O.findTokenIndexAtOffset(N);if(x>=0&&O.getStandardTokenType(x)===1)return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};e.AutoIndentOnPaste=w,e.AutoIndentOnPaste=w=De([he(1,_.ILanguageConfigurationService)],w);function S(M,A){const R=N=>(0,o.getStandardTokenTypeAtPosition)(M,N)===2;return R(A.getStartPosition())||R(A.getEndPosition())}function D(M,A,R,N){if(M.getLineCount()===1&&M.getLineMaxColumn(1)===1)return;let O="";for(let F=0;F<R;F++)O+=" ";const x=new RegExp(O,"gi");for(let F=1,W=M.getLineCount();F<=W;F++){let z=M.getLineFirstNonWhitespaceColumn(F);if(z===0&&(z=M.getLineMaxColumn(F)),z===1)continue;const q=new y.Range(F,1,F,z),H=M.getValueInRange(q),K=N?H.replace(/\t/ig,O):H.replace(x,"	");A.addEditOperation(q,K)}}class I{constructor(A,R){this.selection=A,this.tabSize=R,this.selectionId=null}getEditOperations(A,R){this.selectionId=R.trackSelection(this.selection),D(A,R,this.tabSize,!0)}computeCursorState(A,R){return R.getTrackedSelection(this.selectionId)}}e.IndentationToSpacesCommand=I;class T{constructor(A,R){this.selection=A,this.tabSize=R,this.selectionId=null}getEditOperations(A,R){this.selectionId=R.trackSelection(this.selection),D(A,R,this.tabSize,!1)}computeCursorState(A,R){return R.getTrackedSelection(this.selectionId)}}e.IndentationToTabsCommand=T,(0,E.registerEditorContribution)(w.ID,w,2),(0,E.registerEditorAction)(g),(0,E.registerEditorAction)(u),(0,E.registerEditorAction)(a),(0,E.registerEditorAction)(r),(0,E.registerEditorAction)(d),(0,E.registerEditorAction)(m),(0,E.registerEditorAction)(h),(0,E.registerEditorAction)(v)}),define(oe[729],re([1,0,15,246,20,3]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpandLineSelectionAction=void 0;class y extends c.EditorAction{constructor(){super({id:"expandLineSelection",label:L.localize(600,"Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:E.EditorContextKeys.textInputFocus,primary:2090}})}run(_,b,p){if(p=p||{},!b.hasModel())return;const n=b._getViewModel();n.model.pushStackElement(),n.setCursorStates(p.source,3,k.CursorMoveCommands.expandLineSelection(n,n.getCursorStates())),n.revealAllCursors(p.source,!0)}}e.ExpandLineSelectionAction=y,(0,c.registerEditorAction)(y)}),define(oe[730],re([1,0,72,212,15,145,564,275,211,76,9,4,23,20,643,707,644,3,29,34,27]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.KebabCaseAction=e.PascalCaseAction=e.CamelCaseAction=e.SnakeCaseAction=e.TitleCaseAction=e.LowerCaseAction=e.UpperCaseAction=e.AbstractCaseAction=e.TransposeAction=e.JoinLinesAction=e.DeleteAllRightAction=e.DeleteAllLeftAction=e.AbstractDeleteAllToBoundaryAction=e.InsertLineAfterAction=e.InsertLineBeforeAction=e.IndentLinesAction=e.DeleteLinesAction=e.TrimTrailingWhitespaceAction=e.DeleteDuplicateLinesAction=e.SortLinesDescendingAction=e.SortLinesAscendingAction=e.AbstractSortLinesAction=e.DuplicateSelectionAction=void 0;class d extends E.EditorAction{constructor(pe,ce){super(ce),this.down=pe}run(pe,ce){if(!ce.hasModel())return;const ie=ce.getSelections().map((B,j)=>({selection:B,index:j,ignore:!1}));ie.sort((B,j)=>n.Range.compareRangesUsingStarts(B.selection,j.selection));let ne=ie[0];for(let B=1;B<ie.length;B++){const j=ie[B];ne.selection.endLineNumber===j.selection.startLineNumber&&(ne.index<j.index?j.ignore=!0:(ne.ignore=!0,ne=j))}const J=[];for(const B of ie)J.push(new i.CopyLinesCommand(B.selection,this.down,B.ignore));ce.pushUndoStop(),ce.executeCommands(this.id,J),ce.pushUndoStop()}}class m extends d{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:u.localize(570,"Copy Line Up"),alias:"Copy Line Up",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:l.MenuId.MenubarSelectionMenu,group:"2_line",title:u.localize(571,"&&Copy Line Up"),order:1}})}}class h extends d{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:u.localize(572,"Copy Line Down"),alias:"Copy Line Down",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:l.MenuId.MenubarSelectionMenu,group:"2_line",title:u.localize(573,"Co&&py Line Down"),order:2}})}}class v extends E.EditorAction{constructor(){super({id:"editor.action.duplicateSelection",label:u.localize(574,"Duplicate Selection"),alias:"Duplicate Selection",precondition:t.EditorContextKeys.writable,menuOpts:{menuId:l.MenuId.MenubarSelectionMenu,group:"2_line",title:u.localize(575,"&&Duplicate Selection"),order:5}})}run(pe,ce,ie){if(!ce.hasModel())return;const ne=[],J=ce.getSelections(),B=ce.getModel();for(const j of J)if(j.isEmpty())ne.push(new i.CopyLinesCommand(j,!0));else{const V=new s.Selection(j.endLineNumber,j.endColumn,j.endLineNumber,j.endColumn);ne.push(new L.ReplaceCommandThatSelectsText(V,B.getValueInRange(j)))}ce.pushUndoStop(),ce.executeCommands(this.id,ne),ce.pushUndoStop()}}e.DuplicateSelectionAction=v;class C extends E.EditorAction{constructor(pe,ce){super(ce),this.down=pe}run(pe,ce){const ie=pe.get(a.ILanguageConfigurationService),ne=[],J=ce.getSelections()||[],B=ce.getOption(12);for(const j of J)ne.push(new o.MoveLinesCommand(j,this.down,B,ie));ce.pushUndoStop(),ce.executeCommands(this.id,ne),ce.pushUndoStop()}}class w extends C{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:u.localize(576,"Move Line Up"),alias:"Move Line Up",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:l.MenuId.MenubarSelectionMenu,group:"2_line",title:u.localize(577,"Mo&&ve Line Up"),order:3}})}}class S extends C{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:u.localize(578,"Move Line Down"),alias:"Move Line Down",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:l.MenuId.MenubarSelectionMenu,group:"2_line",title:u.localize(579,"Move &&Line Down"),order:4}})}}class D extends E.EditorAction{constructor(pe,ce){super(ce),this.descending=pe}run(pe,ce){if(!ce.hasModel())return;const ie=ce.getModel();let ne=ce.getSelections();ne.length===1&&ne[0].isEmpty()&&(ne=[new s.Selection(1,1,ie.getLineCount(),ie.getLineMaxColumn(ie.getLineCount()))]);for(const B of ne)if(!g.SortLinesCommand.canRun(ce.getModel(),B,this.descending))return;const J=[];for(let B=0,j=ne.length;B<j;B++)J[B]=new g.SortLinesCommand(ne[B],this.descending);ce.pushUndoStop(),ce.executeCommands(this.id,J),ce.pushUndoStop()}}e.AbstractSortLinesAction=D;class I extends D{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:u.localize(580,"Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:t.EditorContextKeys.writable})}}e.SortLinesAscendingAction=I;class T extends D{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:u.localize(581,"Sort Lines Descending"),alias:"Sort Lines Descending",precondition:t.EditorContextKeys.writable})}}e.SortLinesDescendingAction=T;class M extends E.EditorAction{constructor(){super({id:"editor.action.removeDuplicateLines",label:u.localize(582,"Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:t.EditorContextKeys.writable})}run(pe,ce){if(!ce.hasModel())return;const ie=ce.getModel();if(ie.getLineCount()===1&&ie.getLineMaxColumn(1)===1)return;const ne=[],J=[];let B=0,j=!0,V=ce.getSelections();V.length===1&&V[0].isEmpty()&&(V=[new s.Selection(1,1,ie.getLineCount(),ie.getLineMaxColumn(ie.getLineCount()))],j=!1);for(const $ of V){const Z=new Set,ee=[];for(let be=$.startLineNumber;be<=$.endLineNumber;be++){const ve=ie.getLineContent(be);Z.has(ve)||(ee.push(ve),Z.add(ve))}const le=new s.Selection($.startLineNumber,1,$.endLineNumber,ie.getLineMaxColumn($.endLineNumber)),de=$.startLineNumber-B,me=new s.Selection(de,1,de+ee.length-1,ee[ee.length-1].length);ne.push(b.EditOperation.replace(le,ee.join(`
`))),J.push(me),B+=$.endLineNumber-$.startLineNumber+1-ee.length}ce.pushUndoStop(),ce.executeEdits(this.id,ne,j?J:void 0),ce.pushUndoStop()}}e.DeleteDuplicateLinesAction=M;class A extends E.EditorAction{static{this.ID="editor.action.trimTrailingWhitespace"}constructor(){super({id:A.ID,label:u.localize(583,"Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:(0,c.KeyChord)(2089,2102),weight:100}})}run(pe,ce,ie){let ne=[];ie.reason==="auto-save"&&(ne=(ce.getSelections()||[]).map(Z=>new p.Position(Z.positionLineNumber,Z.positionColumn)));const J=ce.getSelection();if(J===null)return;const B=pe.get(r.IConfigurationService),j=ce.getModel(),V=B.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:j?.getLanguageId(),resource:j?.uri}),$=new y.TrimTrailingWhitespaceCommand(J,ne,V);ce.pushUndoStop(),ce.executeCommands(this.id,[$]),ce.pushUndoStop()}}e.TrimTrailingWhitespaceAction=A;class R extends E.EditorAction{constructor(){super({id:"editor.action.deleteLines",label:u.localize(584,"Delete Line"),alias:"Delete Line",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.textInputFocus,primary:3113,weight:100}})}run(pe,ce){if(!ce.hasModel())return;const ie=this._getLinesToRemove(ce),ne=ce.getModel();if(ne.getLineCount()===1&&ne.getLineMaxColumn(1)===1)return;let J=0;const B=[],j=[];for(let V=0,$=ie.length;V<$;V++){const Z=ie[V];let ee=Z.startLineNumber,le=Z.endLineNumber,de=1,me=ne.getLineMaxColumn(le);le<ne.getLineCount()?(le+=1,me=1):ee>1&&(ee-=1,de=ne.getLineMaxColumn(ee)),B.push(b.EditOperation.replace(new s.Selection(ee,de,le,me),"")),j.push(new s.Selection(ee-J,Z.positionColumn,ee-J,Z.positionColumn)),J+=Z.endLineNumber-Z.startLineNumber+1}ce.pushUndoStop(),ce.executeEdits(this.id,B,j),ce.pushUndoStop()}_getLinesToRemove(pe){const ce=pe.getSelections().map(J=>{let B=J.endLineNumber;return J.startLineNumber<J.endLineNumber&&J.endColumn===1&&(B-=1),{startLineNumber:J.startLineNumber,selectionStartColumn:J.selectionStartColumn,endLineNumber:B,positionColumn:J.positionColumn}});ce.sort((J,B)=>J.startLineNumber===B.startLineNumber?J.endLineNumber-B.endLineNumber:J.startLineNumber-B.startLineNumber);const ie=[];let ne=ce[0];for(let J=1;J<ce.length;J++)ne.endLineNumber+1>=ce[J].startLineNumber?ne.endLineNumber=ce[J].endLineNumber:(ie.push(ne),ne=ce[J]);return ie.push(ne),ie}}e.DeleteLinesAction=R;class N extends E.EditorAction{constructor(){super({id:"editor.action.indentLines",label:u.localize(585,"Indent Line"),alias:"Indent Line",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:2142,weight:100}})}run(pe,ce){const ie=ce._getViewModel();ie&&(ce.pushUndoStop(),ce.executeCommands(this.id,f.TypeOperations.indent(ie.cursorConfig,ce.getModel(),ce.getSelections())),ce.pushUndoStop())}}e.IndentLinesAction=N;class O extends E.EditorAction{constructor(){super({id:"editor.action.outdentLines",label:u.localize(586,"Outdent Line"),alias:"Outdent Line",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:2140,weight:100}})}run(pe,ce){k.CoreEditingCommands.Outdent.runEditorCommand(pe,ce,null)}}class x extends E.EditorAction{constructor(){super({id:"editor.action.insertLineBefore",label:u.localize(587,"Insert Line Above"),alias:"Insert Line Above",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:3075,weight:100}})}run(pe,ce){const ie=ce._getViewModel();ie&&(ce.pushUndoStop(),ce.executeCommands(this.id,_.EnterOperation.lineInsertBefore(ie.cursorConfig,ce.getModel(),ce.getSelections())))}}e.InsertLineBeforeAction=x;class F extends E.EditorAction{constructor(){super({id:"editor.action.insertLineAfter",label:u.localize(588,"Insert Line Below"),alias:"Insert Line Below",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:2051,weight:100}})}run(pe,ce){const ie=ce._getViewModel();ie&&(ce.pushUndoStop(),ce.executeCommands(this.id,_.EnterOperation.lineInsertAfter(ie.cursorConfig,ce.getModel(),ce.getSelections())))}}e.InsertLineAfterAction=F;class W extends E.EditorAction{run(pe,ce){if(!ce.hasModel())return;const ie=ce.getSelection(),ne=this._getRangesToDelete(ce),J=[];for(let V=0,$=ne.length-1;V<$;V++){const Z=ne[V],ee=ne[V+1];n.Range.intersectRanges(Z,ee)===null?J.push(Z):ne[V+1]=n.Range.plusRange(Z,ee)}J.push(ne[ne.length-1]);const B=this._getEndCursorState(ie,J),j=J.map(V=>b.EditOperation.replace(V,""));ce.pushUndoStop(),ce.executeEdits(this.id,j,B),ce.pushUndoStop()}}e.AbstractDeleteAllToBoundaryAction=W;class z extends W{constructor(){super({id:"deleteAllLeft",label:u.localize(589,"Delete All Left"),alias:"Delete All Left",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(pe,ce){let ie=null;const ne=[];let J=0;return ce.forEach(B=>{let j;if(B.endColumn===1&&J>0){const V=B.startLineNumber-J;j=new s.Selection(V,B.startColumn,V,B.startColumn)}else j=new s.Selection(B.startLineNumber,B.startColumn,B.startLineNumber,B.startColumn);J+=B.endLineNumber-B.startLineNumber,B.intersectRanges(pe)?ie=j:ne.push(j)}),ie&&ne.unshift(ie),ne}_getRangesToDelete(pe){const ce=pe.getSelections();if(ce===null)return[];let ie=ce;const ne=pe.getModel();return ne===null?[]:(ie.sort(n.Range.compareRangesUsingStarts),ie=ie.map(J=>{if(J.isEmpty())if(J.startColumn===1){const B=Math.max(1,J.startLineNumber-1),j=J.startLineNumber===1?1:ne.getLineLength(B)+1;return new n.Range(B,j,J.startLineNumber,1)}else return new n.Range(J.startLineNumber,1,J.startLineNumber,J.startColumn);else return new n.Range(J.startLineNumber,1,J.endLineNumber,J.endColumn)}),ie)}}e.DeleteAllLeftAction=z;class q extends W{constructor(){super({id:"deleteAllRight",label:u.localize(590,"Delete All Right"),alias:"Delete All Right",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(pe,ce){let ie=null;const ne=[];for(let J=0,B=ce.length,j=0;J<B;J++){const V=ce[J],$=new s.Selection(V.startLineNumber-j,V.startColumn,V.startLineNumber-j,V.startColumn);V.intersectRanges(pe)?ie=$:ne.push($)}return ie&&ne.unshift(ie),ne}_getRangesToDelete(pe){const ce=pe.getModel();if(ce===null)return[];const ie=pe.getSelections();if(ie===null)return[];const ne=ie.map(J=>{if(J.isEmpty()){const B=ce.getLineMaxColumn(J.startLineNumber);return J.startColumn===B?new n.Range(J.startLineNumber,J.startColumn,J.startLineNumber+1,1):new n.Range(J.startLineNumber,J.startColumn,J.startLineNumber,B)}return J});return ne.sort(n.Range.compareRangesUsingStarts),ne}}e.DeleteAllRightAction=q;class H extends E.EditorAction{constructor(){super({id:"editor.action.joinLines",label:u.localize(591,"Join Lines"),alias:"Join Lines",precondition:t.EditorContextKeys.writable,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(pe,ce){const ie=ce.getSelections();if(ie===null)return;let ne=ce.getSelection();if(ne===null)return;ie.sort(n.Range.compareRangesUsingStarts);const J=[],B=ie.reduce((le,de)=>le.isEmpty()?le.endLineNumber===de.startLineNumber?(ne.equalsSelection(le)&&(ne=de),de):de.startLineNumber>le.endLineNumber+1?(J.push(le),de):new s.Selection(le.startLineNumber,le.startColumn,de.endLineNumber,de.endColumn):de.startLineNumber>le.endLineNumber?(J.push(le),de):new s.Selection(le.startLineNumber,le.startColumn,de.endLineNumber,de.endColumn));J.push(B);const j=ce.getModel();if(j===null)return;const V=[],$=[];let Z=ne,ee=0;for(let le=0,de=J.length;le<de;le++){const me=J[le],be=me.startLineNumber,ve=1;let Le=0,Se,ye;const Ee=j.getLineLength(me.endLineNumber)-me.endColumn;if(me.isEmpty()||me.startLineNumber===me.endLineNumber){const Pe=me.getStartPosition();Pe.lineNumber<j.getLineCount()?(Se=be+1,ye=j.getLineMaxColumn(Se)):(Se=Pe.lineNumber,ye=j.getLineMaxColumn(Pe.lineNumber))}else Se=me.endLineNumber,ye=j.getLineMaxColumn(Se);let ke=j.getLineContent(be);for(let Pe=be+1;Pe<=Se;Pe++){const Fe=j.getLineContent(Pe),je=j.getLineFirstNonWhitespaceColumn(Pe);if(je>=1){let Te=!0;ke===""&&(Te=!1),Te&&(ke.charAt(ke.length-1)===" "||ke.charAt(ke.length-1)==="	")&&(Te=!1,ke=ke.replace(/[\s\uFEFF\xA0]+$/g," "));const Ne=Fe.substr(je-1);ke+=(Te?" ":"")+Ne,Te?Le=Ne.length+1:Le=Ne.length}else Le=0}const Re=new n.Range(be,ve,Se,ye);if(!Re.isEmpty()){let Pe;me.isEmpty()?(V.push(b.EditOperation.replace(Re,ke)),Pe=new s.Selection(Re.startLineNumber-ee,ke.length-Le+1,be-ee,ke.length-Le+1)):me.startLineNumber===me.endLineNumber?(V.push(b.EditOperation.replace(Re,ke)),Pe=new s.Selection(me.startLineNumber-ee,me.startColumn,me.endLineNumber-ee,me.endColumn)):(V.push(b.EditOperation.replace(Re,ke)),Pe=new s.Selection(me.startLineNumber-ee,me.startColumn,me.startLineNumber-ee,ke.length-Ee)),n.Range.intersectRanges(Re,ne)!==null?Z=Pe:$.push(Pe)}ee+=Re.endLineNumber-Re.startLineNumber}$.unshift(Z),ce.pushUndoStop(),ce.executeEdits(this.id,V,$),ce.pushUndoStop()}}e.JoinLinesAction=H;class K extends E.EditorAction{constructor(){super({id:"editor.action.transpose",label:u.localize(592,"Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:t.EditorContextKeys.writable})}run(pe,ce){const ie=ce.getSelections();if(ie===null)return;const ne=ce.getModel();if(ne===null)return;const J=[];for(let B=0,j=ie.length;B<j;B++){const V=ie[B];if(!V.isEmpty())continue;const $=V.getStartPosition(),Z=ne.getLineMaxColumn($.lineNumber);if($.column>=Z){if($.lineNumber===ne.getLineCount())continue;const ee=new n.Range($.lineNumber,Math.max(1,$.column-1),$.lineNumber+1,1),le=ne.getValueInRange(ee).split("").reverse().join("");J.push(new L.ReplaceCommand(new s.Selection($.lineNumber,Math.max(1,$.column-1),$.lineNumber+1,1),le))}else{const ee=new n.Range($.lineNumber,Math.max(1,$.column-1),$.lineNumber,$.column+1),le=ne.getValueInRange(ee).split("").reverse().join("");J.push(new L.ReplaceCommandThatPreservesSelection(ee,le,new s.Selection($.lineNumber,$.column+1,$.lineNumber,$.column+1)))}}ce.pushUndoStop(),ce.executeCommands(this.id,J),ce.pushUndoStop()}}e.TransposeAction=K;class U extends E.EditorAction{run(pe,ce){const ie=ce.getSelections();if(ie===null)return;const ne=ce.getModel();if(ne===null)return;const J=ce.getOption(132),B=[];for(const j of ie)if(j.isEmpty()){const V=j.getStartPosition(),$=ce.getConfiguredWordAtPosition(V);if(!$)continue;const Z=new n.Range(V.lineNumber,$.startColumn,V.lineNumber,$.endColumn),ee=ne.getValueInRange(Z);B.push(b.EditOperation.replace(Z,this._modifyText(ee,J)))}else{const V=ne.getValueInRange(j);B.push(b.EditOperation.replace(j,this._modifyText(V,J)))}ce.pushUndoStop(),ce.executeEdits(this.id,B),ce.pushUndoStop()}}e.AbstractCaseAction=U;class Y extends U{constructor(){super({id:"editor.action.transformToUppercase",label:u.localize(593,"Transform to Uppercase"),alias:"Transform to Uppercase",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){return pe.toLocaleUpperCase()}}e.UpperCaseAction=Y;class Q extends U{constructor(){super({id:"editor.action.transformToLowercase",label:u.localize(594,"Transform to Lowercase"),alias:"Transform to Lowercase",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){return pe.toLocaleLowerCase()}}e.LowerCaseAction=Q;class X{constructor(pe,ce){this._pattern=pe,this._flags=ce,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch{}}return this._actual}isSupported(){return this.get()!==null}}class G extends U{static{this.titleBoundary=new X("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu")}constructor(){super({id:"editor.action.transformToTitlecase",label:u.localize(595,"Transform to Title Case"),alias:"Transform to Title Case",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){const ie=G.titleBoundary.get();return ie?pe.toLocaleLowerCase().replace(ie,ne=>ne.toLocaleUpperCase()):pe}}e.TitleCaseAction=G;class P extends U{static{this.caseBoundary=new X("(\\p{Ll})(\\p{Lu})","gmu")}static{this.singleLetters=new X("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu")}constructor(){super({id:"editor.action.transformToSnakecase",label:u.localize(596,"Transform to Snake Case"),alias:"Transform to Snake Case",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){const ie=P.caseBoundary.get(),ne=P.singleLetters.get();return!ie||!ne?pe:pe.replace(ie,"$1_$2").replace(ne,"$1_$2$3").toLocaleLowerCase()}}e.SnakeCaseAction=P;class te extends U{static{this.wordBoundary=new X("[_\\s-]","gm")}constructor(){super({id:"editor.action.transformToCamelcase",label:u.localize(597,"Transform to Camel Case"),alias:"Transform to Camel Case",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){const ie=te.wordBoundary.get();if(!ie)return pe;const ne=pe.split(ie);return ne.shift()+ne.map(B=>B.substring(0,1).toLocaleUpperCase()+B.substring(1)).join("")}}e.CamelCaseAction=te;class se extends U{static{this.wordBoundary=new X("[_\\s-]","gm")}static{this.wordBoundaryToMaintain=new X("(?<=\\.)","gm")}constructor(){super({id:"editor.action.transformToPascalcase",label:u.localize(598,"Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){const ie=se.wordBoundary.get(),ne=se.wordBoundaryToMaintain.get();return!ie||!ne?pe:pe.split(ne).map(j=>j.split(ie)).flat().map(j=>j.substring(0,1).toLocaleUpperCase()+j.substring(1)).join("")}}e.PascalCaseAction=se;class ue extends U{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every(ce=>ce.isSupported())}static{this.caseBoundary=new X("(\\p{Ll})(\\p{Lu})","gmu")}static{this.singleLetters=new X("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu")}static{this.underscoreBoundary=new X("(\\S)(_)(\\S)","gm")}constructor(){super({id:"editor.action.transformToKebabcase",label:u.localize(599,"Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:t.EditorContextKeys.writable})}_modifyText(pe,ce){const ie=ue.caseBoundary.get(),ne=ue.singleLetters.get(),J=ue.underscoreBoundary.get();return!ie||!ne||!J?pe:pe.replace(J,"$1-$3").replace(ie,"$1-$2").replace(ne,"$1-$2").toLocaleLowerCase()}}e.KebabCaseAction=ue,(0,E.registerEditorAction)(m),(0,E.registerEditorAction)(h),(0,E.registerEditorAction)(v),(0,E.registerEditorAction)(w),(0,E.registerEditorAction)(S),(0,E.registerEditorAction)(I),(0,E.registerEditorAction)(T),(0,E.registerEditorAction)(M),(0,E.registerEditorAction)(A),(0,E.registerEditorAction)(R),(0,E.registerEditorAction)(N),(0,E.registerEditorAction)(O),(0,E.registerEditorAction)(x),(0,E.registerEditorAction)(F),(0,E.registerEditorAction)(z),(0,E.registerEditorAction)(q),(0,E.registerEditorAction)(H),(0,E.registerEditorAction)(K),(0,E.registerEditorAction)(Y),(0,E.registerEditorAction)(Q),P.caseBoundary.isSupported()&&P.singleLetters.isSupported()&&(0,E.registerEditorAction)(P),te.wordBoundary.isSupported()&&(0,E.registerEditorAction)(te),se.wordBoundary.isSupported()&&(0,E.registerEditorAction)(se),G.titleBoundary.isSupported()&&(0,E.registerEditorAction)(G),ue.isSupported()&&(0,E.registerEditorAction)(ue)}),define(oe[731],re([1,0,2,15]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class E extends c.Disposable{static{this.ID="editor.contrib.longLinesHelper"}constructor(y){super(),this._editor=y,this._register(this._editor.onMouseDown(f=>{const _=this._editor.getOption(118);_>=0&&f.target.type===6&&f.target.position.column>=_&&this._editor.updateOptions({stopRenderingLineAfter:-1})}))}}(0,k.registerEditorContribution)(E.ID,E,2)}),define(oe[184],re([1,0,193,48,6,55,2,15,4,120,3,12,62,5,534]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.MessageController=void 0;let o=class{static{i=this}static{this.ID="editor.contrib.messageController"}static{this.MESSAGE_VISIBLE=new n.RawContextKey("messageVisible",!1,p.localize(557,"Whether the editor is currently showing an inline message"))}static get(a){return a.getContribution(i.ID)}constructor(a,r,d){this._openerService=d,this._messageWidget=new y.MutableDisposable,this._messageListeners=new y.DisposableStore,this._mouseOverMessage=!1,this._editor=a,this._visible=i.MESSAGE_VISIBLE.bindTo(r)}dispose(){this._message?.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(a,r){(0,k.alert)((0,L.isMarkdownString)(a)?a.value:a),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,L.isMarkdownString)(a)?(0,c.renderMarkdown)(a,{actionHandler:{callback:m=>{this.closeMessage(),(0,b.openLinkFromMarkdown)(this._openerService,m,(0,L.isMarkdownString)(a)?a.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new u(this._editor,r,typeof a=="string"?a:this._message.element),this._messageListeners.add(E.Event.debounce(this._editor.onDidBlurEditorText,(m,h)=>h,0)(()=>{this._mouseOverMessage||this._messageWidget.value&&t.isAncestor(t.getActiveElement(),this._messageWidget.value.getDomNode())||this.closeMessage()})),this._messageListeners.add(this._editor.onDidChangeCursorPosition(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidDispose(()=>this.closeMessage())),this._messageListeners.add(this._editor.onDidChangeModel(()=>this.closeMessage())),this._messageListeners.add(t.addDisposableListener(this._messageWidget.value.getDomNode(),t.EventType.MOUSE_ENTER,()=>this._mouseOverMessage=!0,!0)),this._messageListeners.add(t.addDisposableListener(this._messageWidget.value.getDomNode(),t.EventType.MOUSE_LEAVE,()=>this._mouseOverMessage=!1,!0));let d;this._messageListeners.add(this._editor.onMouseMove(m=>{m.target.position&&(d?d.containsPosition(m.target.position)||this.closeMessage():d=new _.Range(r.lineNumber-3,1,m.target.position.lineNumber+3,1))}))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(u.fadeOut(this._messageWidget.value))}};e.MessageController=o,e.MessageController=o=i=De([he(1,n.IContextKeyService),he(2,s.IOpenerService)],o);const g=f.EditorCommand.bindToContribution(o.get);(0,f.registerEditorCommand)(new g({id:"leaveEditorMessage",precondition:o.MESSAGE_VISIBLE,handler:l=>l.closeMessage(),kbOpts:{weight:130,primary:9}}));class u{static fadeOut(a){const r=()=>{a.dispose(),clearTimeout(d),a.getDomNode().removeEventListener("animationend",r)},d=setTimeout(r,110);return a.getDomNode().addEventListener("animationend",r),a.getDomNode().classList.add("fadeOut"),{dispose:r}}constructor(a,{lineNumber:r,column:d},m){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=a,this._editor.revealLinesInCenterIfOutsideViewport(r,r,0),this._position={lineNumber:r,column:d},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const h=document.createElement("div");h.classList.add("anchor","top"),this._domNode.appendChild(h);const v=document.createElement("div");typeof m=="string"?(v.classList.add("message"),v.textContent=m):(m.classList.add("message"),v.appendChild(m)),this._domNode.appendChild(v);const C=document.createElement("div");C.classList.add("anchor","below"),this._domNode.appendChild(C),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(a){this._domNode.classList.toggle("below",a===2)}}(0,f.registerEditorContribution)(o.ID,o,4)}),define(oe[732],re([1,0,55,2,15,184,3]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReadOnlyMessageController=void 0;class f extends k.Disposable{static{this.ID="editor.contrib.readOnlyMessageController"}constructor(b){super(),this.editor=b,this._register(this.editor.onDidAttemptReadOnlyEdit(()=>this._onDidAttemptReadOnlyEdit()))}_onDidAttemptReadOnlyEdit(){const b=L.MessageController.get(this.editor);if(b&&this.editor.hasModel()){let p=this.editor.getOptions().get(93);p||(this.editor.isSimpleWidget?p=new c.MarkdownString(y.localize(471,"Cannot edit in read-only input")):p=new c.MarkdownString(y.localize(472,"Cannot edit in read-only editor"))),b.showMessage(p,this.editor.getPosition())}}}e.ReadOnlyMessageController=f,(0,E.registerEditorContribution)(f.ID,f,2)}),define(oe[733],re([1,0,13,18,8,15,9,4,23,20,358,645,3,29,24,17,78,19,22]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.SmartSelectController=void 0,e.provideSelectionRanges=C;class r{constructor(S,D){this.index=S,this.ranges=D}mov(S){const D=this.index+(S?1:-1);if(D<0||D>=this.ranges.length)return this;const I=new r(D,this.ranges);return I.ranges[D].equalsRange(this.ranges[this.index])?I.mov(S):I}}let d=class{static{a=this}static{this.ID="editor.contrib.smartSelectController"}static get(S){return S.getContribution(a.ID)}constructor(S,D){this._editor=S,this._languageFeaturesService=D,this._ignoreSelection=!1}dispose(){this._selectionListener?.dispose()}async run(S){if(!this._editor.hasModel())return;const D=this._editor.getSelections(),I=this._editor.getModel();if(this._state||await C(this._languageFeaturesService.selectionRangeProvider,I,D.map(M=>M.getPosition()),this._editor.getOption(114),k.CancellationToken.None).then(M=>{if(!(!c.isNonEmptyArray(M)||M.length!==D.length)&&!(!this._editor.hasModel()||!c.equals(this._editor.getSelections(),D,(A,R)=>A.equalsSelection(R)))){for(let A=0;A<M.length;A++)M[A]=M[A].filter(R=>R.containsPosition(D[A].getStartPosition())&&R.containsPosition(D[A].getEndPosition())),M[A].unshift(D[A]);this._state=M.map(A=>new r(0,A)),this._selectionListener?.dispose(),this._selectionListener=this._editor.onDidChangeCursorPosition(()=>{this._ignoreSelection||(this._selectionListener?.dispose(),this._state=void 0)})}}),!this._state)return;this._state=this._state.map(M=>M.mov(S));const T=this._state.map(M=>_.Selection.fromPositions(M.ranges[M.index].getStartPosition(),M.ranges[M.index].getEndPosition()));this._ignoreSelection=!0;try{this._editor.setSelections(T)}finally{this._ignoreSelection=!1}}};e.SmartSelectController=d,e.SmartSelectController=d=a=De([he(1,o.ILanguageFeaturesService)],d);class m extends L.EditorAction{constructor(S,D){super(D),this._forward=S}async run(S,D){const I=d.get(D);I&&await I.run(this._forward)}}class h extends m{constructor(){super(!0,{id:"editor.action.smartSelect.expand",label:s.localize(449,"Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:b.EditorContextKeys.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"1_basic",title:s.localize(450,"&&Expand Selection"),order:2}})}}i.CommandsRegistry.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");class v extends m{constructor(){super(!1,{id:"editor.action.smartSelect.shrink",label:s.localize(451,"Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:b.EditorContextKeys.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"1_basic",title:s.localize(452,"&&Shrink Selection"),order:3}})}}(0,L.registerEditorContribution)(d.ID,d,4),(0,L.registerEditorAction)(h),(0,L.registerEditorAction)(v);async function C(w,S,D,I,T){const M=w.all(S).concat(new n.WordSelectionRangeProvider(I.selectSubwords));M.length===1&&M.unshift(new p.BracketSelectionRangeProvider);const A=[],R=[];for(const N of M)A.push(Promise.resolve(N.provideSelectionRanges(S,D,T)).then(O=>{if(c.isNonEmptyArray(O)&&O.length===D.length)for(let x=0;x<D.length;x++){R[x]||(R[x]=[]);for(const F of O[x])f.Range.isIRange(F.range)&&f.Range.containsPosition(F.range,D[x])&&R[x].push(f.Range.lift(F.range))}},E.onUnexpectedExternalError));return await Promise.all(A),R.map(N=>{if(N.length===0)return[];N.sort((W,z)=>y.Position.isBefore(W.getStartPosition(),z.getStartPosition())?1:y.Position.isBefore(z.getStartPosition(),W.getStartPosition())||y.Position.isBefore(W.getEndPosition(),z.getEndPosition())?-1:y.Position.isBefore(z.getEndPosition(),W.getEndPosition())?1:0);const O=[];let x;for(const W of N)(!x||f.Range.containsRange(W,x)&&!f.Range.equalsRange(W,x))&&(O.push(W),x=W);if(!I.selectLeadingAndTrailingWhitespace)return O;const F=[O[0]];for(let W=1;W<O.length;W++){const z=O[W-1],q=O[W];if(q.startLineNumber!==z.startLineNumber||q.endLineNumber!==z.endLineNumber){const H=new f.Range(z.startLineNumber,S.getLineFirstNonWhitespaceColumn(z.startLineNumber),z.endLineNumber,S.getLineLastNonWhitespaceColumn(z.endLineNumber));H.containsRange(z)&&!H.equalsRange(z)&&q.containsRange(H)&&!q.equalsRange(H)&&F.push(H);const K=new f.Range(z.startLineNumber,1,z.endLineNumber,S.getLineMaxColumn(z.endLineNumber));K.containsRange(z)&&!K.equalsRange(H)&&q.containsRange(K)&&!q.equalsRange(K)&&F.push(K)}F.push(q)}return F})}i.CommandsRegistry.registerCommand("_executeSelectionRangeProvider",async function(w,...S){const[D,I]=S;(0,u.assertType)(l.URI.isUri(D));const T=w.get(o.ILanguageFeaturesService).selectionRangeProvider,M=await w.get(g.ITextModelService).createModelReference(D);try{return C(T,M.object.textEditorModel,I,{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},k.CancellationToken.None)}finally{M.dispose()}})}),define(oe[734],re([1,0,59,15,3]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class L extends k.EditorAction{constructor(){super({id:"editor.action.forceRetokenize",label:E.localize(320,"Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}run(f,_){if(!_.hasModel())return;const b=_.getModel();b.tokenization.resetTokenization();const p=new c.StopWatch;b.tokenization.forceTokenization(b.getLineCount()),p.stop(),console.log(`tokenization took ${p.elapsed()}`)}}(0,k.registerEditorAction)(L)}),define(oe[735],re([1,0,2,51,15,35,3,179]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnusualLineTerminatorsDetector=void 0;const _="ignoreUnusualLineTerminators";function b(s,t,i){s.setModelProperty(t.uri,_,i)}function p(s,t){return s.getModelProperty(t.uri,_)}let n=class extends c.Disposable{static{this.ID="editor.contrib.unusualLineTerminatorsDetector"}constructor(t,i,o){super(),this._editor=t,this._dialogService=i,this._codeEditorService=o,this._isPresentingDialog=!1,this._config=this._editor.getOption(127),this._register(this._editor.onDidChangeConfiguration(g=>{g.hasChanged(127)&&(this._config=this._editor.getOption(127),this._checkForUnusualLineTerminators())})),this._register(this._editor.onDidChangeModel(()=>{this._checkForUnusualLineTerminators()})),this._register(this._editor.onDidChangeModelContent(g=>{g.isUndoing||this._checkForUnusualLineTerminators()})),this._checkForUnusualLineTerminators()}async _checkForUnusualLineTerminators(){if(this._config==="off"||!this._editor.hasModel())return;const t=this._editor.getModel();if(!t.mightContainUnusualLineTerminators()||p(this._codeEditorService,t)===!0||this._editor.getOption(92))return;if(this._config==="auto"){t.removeUnusualLineTerminators(this._editor.getSelections());return}if(this._isPresentingDialog)return;let o;try{this._isPresentingDialog=!0,o=await this._dialogService.confirm({title:y.localize(291,"Unusual Line Terminators"),message:y.localize(292,"Detected unusual line terminators"),detail:y.localize(293,"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,k.basename)(t.uri)),primaryButton:y.localize(294,"&&Remove Unusual Line Terminators"),cancelButton:y.localize(295,"Ignore")})}finally{this._isPresentingDialog=!1}if(!o.confirmed){b(this._codeEditorService,t,!0);return}t.removeUnusualLineTerminators(this._editor.getSelections())}};e.UnusualLineTerminatorsDetector=n,e.UnusualLineTerminatorsDetector=n=De([he(1,f.IDialogService),he(2,L.ICodeEditorService)],n),(0,E.registerEditorContribution)(n.ID,n,1)}),define(oe[406],re([1,0,15,145,37,77,199,168,9,4,23,20,34,3,60,12,178]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteInsideWord=e.DeleteWordRight=e.DeleteWordEndRight=e.DeleteWordStartRight=e.DeleteWordLeft=e.DeleteWordEndLeft=e.DeleteWordStartLeft=e.DeleteWordRightCommand=e.DeleteWordLeftCommand=e.DeleteWordCommand=e.CursorWordAccessibilityRightSelect=e.CursorWordAccessibilityRight=e.CursorWordRightSelect=e.CursorWordEndRightSelect=e.CursorWordStartRightSelect=e.CursorWordRight=e.CursorWordEndRight=e.CursorWordStartRight=e.CursorWordAccessibilityLeftSelect=e.CursorWordAccessibilityLeft=e.CursorWordLeftSelect=e.CursorWordEndLeftSelect=e.CursorWordStartLeftSelect=e.CursorWordLeft=e.CursorWordEndLeft=e.CursorWordStartLeft=e.WordRightCommand=e.WordLeftCommand=e.MoveWordCommand=void 0;class u extends c.EditorCommand{constructor(G){super(G),this._inSelectionMode=G.inSelectionMode,this._wordNavigationType=G.wordNavigationType}runEditorCommand(G,P,te){if(!P.hasModel())return;const se=(0,f.getMapForWordSeparators)(P.getOption(132),P.getOption(131)),ue=P.getModel(),ge=P.getSelections(),pe=ge.length>1,ce=ge.map(ie=>{const ne=new _.Position(ie.positionLineNumber,ie.positionColumn),J=this._move(se,ue,ne,this._wordNavigationType,pe);return this._moveTo(ie,J,this._inSelectionMode)});if(ue.pushStackElement(),P._getViewModel().setCursorStates("moveWordCommand",3,ce.map(ie=>L.CursorState.fromModelSelection(ie))),ce.length===1){const ie=new _.Position(ce[0].positionLineNumber,ce[0].positionColumn);P.revealPosition(ie,0)}}_moveTo(G,P,te){return te?new p.Selection(G.selectionStartLineNumber,G.selectionStartColumn,P.lineNumber,P.column):new p.Selection(P.lineNumber,P.column,P.lineNumber,P.column)}}e.MoveWordCommand=u;class l extends u{_move(G,P,te,se,ue){return y.WordOperations.moveWordLeft(G,P,te,se,ue)}}e.WordLeftCommand=l;class a extends u{_move(G,P,te,se,ue){return y.WordOperations.moveWordRight(G,P,te,se)}}e.WordRightCommand=a;class r extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartLeft",precondition:void 0})}}e.CursorWordStartLeft=r;class d extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndLeft",precondition:void 0})}}e.CursorWordEndLeft=d;class m extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:1,id:"cursorWordLeft",precondition:void 0,kbOpts:{kbExpr:o.ContextKeyExpr.and(n.EditorContextKeys.textInputFocus,o.ContextKeyExpr.and(i.CONTEXT_ACCESSIBILITY_MODE_ENABLED,g.IsWindowsContext)?.negate()),primary:2063,mac:{primary:527},weight:100}})}}e.CursorWordLeft=m;class h extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartLeftSelect",precondition:void 0})}}e.CursorWordStartLeftSelect=h;class v extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndLeftSelect",precondition:void 0})}}e.CursorWordEndLeftSelect=v;class C extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:1,id:"cursorWordLeftSelect",precondition:void 0,kbOpts:{kbExpr:o.ContextKeyExpr.and(n.EditorContextKeys.textInputFocus,o.ContextKeyExpr.and(i.CONTEXT_ACCESSIBILITY_MODE_ENABLED,g.IsWindowsContext)?.negate()),primary:3087,mac:{primary:1551},weight:100}})}}e.CursorWordLeftSelect=C;class w extends l{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityLeft",precondition:void 0})}_move(G,P,te,se,ue){return super._move((0,f.getMapForWordSeparators)(E.EditorOptions.wordSeparators.defaultValue,G.intlSegmenterLocales),P,te,se,ue)}}e.CursorWordAccessibilityLeft=w;class S extends l{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityLeftSelect",precondition:void 0})}_move(G,P,te,se,ue){return super._move((0,f.getMapForWordSeparators)(E.EditorOptions.wordSeparators.defaultValue,G.intlSegmenterLocales),P,te,se,ue)}}e.CursorWordAccessibilityLeftSelect=S;class D extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordStartRight",precondition:void 0})}}e.CursorWordStartRight=D;class I extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordEndRight",precondition:void 0,kbOpts:{kbExpr:o.ContextKeyExpr.and(n.EditorContextKeys.textInputFocus,o.ContextKeyExpr.and(i.CONTEXT_ACCESSIBILITY_MODE_ENABLED,g.IsWindowsContext)?.negate()),primary:2065,mac:{primary:529},weight:100}})}}e.CursorWordEndRight=I;class T extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordRight",precondition:void 0})}}e.CursorWordRight=T;class M extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordStartRightSelect",precondition:void 0})}}e.CursorWordStartRightSelect=M;class A extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordEndRightSelect",precondition:void 0,kbOpts:{kbExpr:o.ContextKeyExpr.and(n.EditorContextKeys.textInputFocus,o.ContextKeyExpr.and(i.CONTEXT_ACCESSIBILITY_MODE_ENABLED,g.IsWindowsContext)?.negate()),primary:3089,mac:{primary:1553},weight:100}})}}e.CursorWordEndRightSelect=A;class R extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordRightSelect",precondition:void 0})}}e.CursorWordRightSelect=R;class N extends a{constructor(){super({inSelectionMode:!1,wordNavigationType:3,id:"cursorWordAccessibilityRight",precondition:void 0})}_move(G,P,te,se,ue){return super._move((0,f.getMapForWordSeparators)(E.EditorOptions.wordSeparators.defaultValue,G.intlSegmenterLocales),P,te,se,ue)}}e.CursorWordAccessibilityRight=N;class O extends a{constructor(){super({inSelectionMode:!0,wordNavigationType:3,id:"cursorWordAccessibilityRightSelect",precondition:void 0})}_move(G,P,te,se,ue){return super._move((0,f.getMapForWordSeparators)(E.EditorOptions.wordSeparators.defaultValue,G.intlSegmenterLocales),P,te,se,ue)}}e.CursorWordAccessibilityRightSelect=O;class x extends c.EditorCommand{constructor(G){super(G),this._whitespaceHeuristics=G.whitespaceHeuristics,this._wordNavigationType=G.wordNavigationType}runEditorCommand(G,P,te){const se=G.get(s.ILanguageConfigurationService);if(!P.hasModel())return;const ue=(0,f.getMapForWordSeparators)(P.getOption(132),P.getOption(131)),ge=P.getModel(),pe=P.getSelections(),ce=P.getOption(6),ie=P.getOption(11),ne=se.getLanguageConfiguration(ge.getLanguageId()).getAutoClosingPairs(),J=P._getViewModel(),B=pe.map(j=>{const V=this._delete({wordSeparators:ue,model:ge,selection:j,whitespaceHeuristics:this._whitespaceHeuristics,autoClosingDelete:P.getOption(9),autoClosingBrackets:ce,autoClosingQuotes:ie,autoClosingPairs:ne,autoClosedCharacters:J.getCursorAutoClosedCharacters()},this._wordNavigationType);return new k.ReplaceCommand(V,"")});P.pushUndoStop(),P.executeCommands(this.id,B),P.pushUndoStop()}}e.DeleteWordCommand=x;class F extends x{_delete(G,P){const te=y.WordOperations.deleteWordLeft(G,P);return te||new b.Range(1,1,1,1)}}e.DeleteWordLeftCommand=F;class W extends x{_delete(G,P){const te=y.WordOperations.deleteWordRight(G,P);if(te)return te;const se=G.model.getLineCount(),ue=G.model.getLineMaxColumn(se);return new b.Range(se,ue,se,ue)}}e.DeleteWordRightCommand=W;class z extends F{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartLeft",precondition:n.EditorContextKeys.writable})}}e.DeleteWordStartLeft=z;class q extends F{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndLeft",precondition:n.EditorContextKeys.writable})}}e.DeleteWordEndLeft=q;class H extends F{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordLeft",precondition:n.EditorContextKeys.writable,kbOpts:{kbExpr:n.EditorContextKeys.textInputFocus,primary:2049,mac:{primary:513},weight:100}})}}e.DeleteWordLeft=H;class K extends W{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:0,id:"deleteWordStartRight",precondition:n.EditorContextKeys.writable})}}e.DeleteWordStartRight=K;class U extends W{constructor(){super({whitespaceHeuristics:!1,wordNavigationType:2,id:"deleteWordEndRight",precondition:n.EditorContextKeys.writable})}}e.DeleteWordEndRight=U;class Y extends W{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordRight",precondition:n.EditorContextKeys.writable,kbOpts:{kbExpr:n.EditorContextKeys.textInputFocus,primary:2068,mac:{primary:532},weight:100}})}}e.DeleteWordRight=Y;class Q extends c.EditorAction{constructor(){super({id:"deleteInsideWord",precondition:n.EditorContextKeys.writable,label:t.localize(278,"Delete Word"),alias:"Delete Word"})}run(G,P,te){if(!P.hasModel())return;const se=(0,f.getMapForWordSeparators)(P.getOption(132),P.getOption(131)),ue=P.getModel(),pe=P.getSelections().map(ce=>{const ie=y.WordOperations.deleteInsideWord(se,ue,ce);return new k.ReplaceCommand(ie,"")});P.pushUndoStop(),P.executeCommands(this.id,pe),P.pushUndoStop()}}e.DeleteInsideWord=Q,(0,c.registerEditorCommand)(new r),(0,c.registerEditorCommand)(new d),(0,c.registerEditorCommand)(new m),(0,c.registerEditorCommand)(new h),(0,c.registerEditorCommand)(new v),(0,c.registerEditorCommand)(new C),(0,c.registerEditorCommand)(new D),(0,c.registerEditorCommand)(new I),(0,c.registerEditorCommand)(new T),(0,c.registerEditorCommand)(new M),(0,c.registerEditorCommand)(new A),(0,c.registerEditorCommand)(new R),(0,c.registerEditorCommand)(new w),(0,c.registerEditorCommand)(new S),(0,c.registerEditorCommand)(new N),(0,c.registerEditorCommand)(new O),(0,c.registerEditorCommand)(new z),(0,c.registerEditorCommand)(new q),(0,c.registerEditorCommand)(new H),(0,c.registerEditorCommand)(new K),(0,c.registerEditorCommand)(new U),(0,c.registerEditorCommand)(new Y),(0,c.registerEditorAction)(Q)}),define(oe[736],re([1,0,15,199,4,20,406,24]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CursorWordPartRightSelect=e.CursorWordPartRight=e.WordPartRightCommand=e.CursorWordPartLeftSelect=e.CursorWordPartLeft=e.WordPartLeftCommand=e.DeleteWordPartRight=e.DeleteWordPartLeft=void 0;class _ extends y.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:0,id:"deleteWordPartLeft",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:769},weight:100}})}_delete(u,l){const a=k.WordPartOperations.deleteWordPartLeft(u);return a||new E.Range(1,1,1,1)}}e.DeleteWordPartLeft=_;class b extends y.DeleteWordCommand{constructor(){super({whitespaceHeuristics:!0,wordNavigationType:2,id:"deleteWordPartRight",precondition:L.EditorContextKeys.writable,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:788},weight:100}})}_delete(u,l){const a=k.WordPartOperations.deleteWordPartRight(u);if(a)return a;const r=u.model.getLineCount(),d=u.model.getLineMaxColumn(r);return new E.Range(r,d,r,d)}}e.DeleteWordPartRight=b;class p extends y.MoveWordCommand{_move(u,l,a,r,d){return k.WordPartOperations.moveWordPartLeft(u,l,a,d)}}e.WordPartLeftCommand=p;class n extends p{constructor(){super({inSelectionMode:!1,wordNavigationType:0,id:"cursorWordPartLeft",precondition:void 0,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:783},weight:100}})}}e.CursorWordPartLeft=n,f.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeft","cursorWordPartLeft");class s extends p{constructor(){super({inSelectionMode:!0,wordNavigationType:0,id:"cursorWordPartLeftSelect",precondition:void 0,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1807},weight:100}})}}e.CursorWordPartLeftSelect=s,f.CommandsRegistry.registerCommandAlias("cursorWordPartStartLeftSelect","cursorWordPartLeftSelect");class t extends y.MoveWordCommand{_move(u,l,a,r,d){return k.WordPartOperations.moveWordPartRight(u,l,a)}}e.WordPartRightCommand=t;class i extends t{constructor(){super({inSelectionMode:!1,wordNavigationType:2,id:"cursorWordPartRight",precondition:void 0,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:785},weight:100}})}}e.CursorWordPartRight=i;class o extends t{constructor(){super({inSelectionMode:!0,wordNavigationType:2,id:"cursorWordPartRightSelect",precondition:void 0,kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:0,mac:{primary:1809},weight:100}})}}e.CursorWordPartRightSelect=o,(0,c.registerEditorCommand)(new _),(0,c.registerEditorCommand)(new b),(0,c.registerEditorCommand)(new n),(0,c.registerEditorCommand)(new s),(0,c.registerEditorCommand)(new i),(0,c.registerEditorCommand)(new o)}),define(oe[737],re([1,0,5,2,15,16,547]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IPadShowKeyboard=void 0;class y extends k.Disposable{static{this.ID="editor.contrib.iPadShowKeyboard"}constructor(b){super(),this.editor=b,this.widget=null,L.isIOS&&(this._register(b.onDidChangeConfiguration(()=>this.update())),this.update())}update(){const b=!this.editor.getOption(92);!this.widget&&b?this.widget=new f(this.editor):this.widget&&!b&&(this.widget.dispose(),this.widget=null)}dispose(){super.dispose(),this.widget&&(this.widget.dispose(),this.widget=null)}}e.IPadShowKeyboard=y;class f extends k.Disposable{static{this.ID="editor.contrib.ShowKeyboardWidget"}constructor(b){super(),this.editor=b,this._domNode=document.createElement("textarea"),this._domNode.className="iPadShowKeyboard",this._register(c.addDisposableListener(this._domNode,"touchstart",p=>{this.editor.focus()})),this._register(c.addDisposableListener(this._domNode,"focus",p=>{this.editor.focus()})),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}getId(){return f.ID}getDomNode(){return this._domNode}getPosition(){return{preference:1}}}(0,E.registerEditorContribution)(y.ID,y,3)}),define(oe[738],re([1,0,5,33,2,15,28,147,176,42,152,106,548]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0});let t=class extends E.Disposable{static{s=this}static{this.ID="editor.contrib.inspectTokens"}static get(a){return a.getContribution(s.ID)}constructor(a,r,d){super(),this._editor=a,this._languageService=d,this._widget=null,this._register(this._editor.onDidChangeModel(m=>this.stop())),this._register(this._editor.onDidChangeModelLanguage(m=>this.stop())),this._register(y.TokenizationRegistry.onDidChange(m=>this.stop())),this._register(this._editor.onKeyUp(m=>m.keyCode===9&&this.stop()))}dispose(){this.stop(),super.dispose()}launch(){this._widget||this._editor.hasModel()&&(this._widget=new u(this._editor,this._languageService))}stop(){this._widget&&(this._widget.dispose(),this._widget=null)}};t=s=De([he(1,p.IStandaloneThemeService),he(2,b.ILanguageService)],t);class i extends L.EditorAction{constructor(){super({id:"editor.action.inspectTokens",label:n.InspectTokensNLS.inspectTokensAction,alias:"Developer: Inspect Tokens",precondition:void 0})}run(a,r){t.get(r)?.launch()}}function o(l){let a="";for(let r=0,d=l.length;r<d;r++){const m=l.charCodeAt(r);switch(m){case 9:a+="\u2192";break;case 32:a+="\xB7";break;default:a+=String.fromCharCode(m)}}return a}function g(l,a){const r=y.TokenizationRegistry.get(a);if(r)return r;const d=l.encodeLanguageId(a);return{getInitialState:()=>_.NullState,tokenize:(m,h,v)=>(0,_.nullTokenize)(a,v),tokenizeEncoded:(m,h,v)=>(0,_.nullTokenizeEncoded)(d,v)}}class u extends E.Disposable{static{this._ID="editor.contrib.inspectTokensWidget"}constructor(a,r){super(),this.allowEditorOverflow=!0,this._editor=a,this._languageService=r,this._model=this._editor.getModel(),this._domNode=document.createElement("div"),this._domNode.className="tokens-inspect-widget",this._tokenizationSupport=g(this._languageService.languageIdCodec,this._model.getLanguageId()),this._compute(this._editor.getPosition()),this._register(this._editor.onDidChangeCursorPosition(d=>this._compute(this._editor.getPosition()))),this._editor.addContentWidget(this)}dispose(){this._editor.removeContentWidget(this),super.dispose()}getId(){return u._ID}_compute(a){const r=this._getTokensAtLine(a.lineNumber);let d=0;for(let w=r.tokens1.length-1;w>=0;w--){const S=r.tokens1[w];if(a.column-1>=S.offset){d=w;break}}let m=0;for(let w=r.tokens2.length>>>1;w>=0;w--)if(a.column-1>=r.tokens2[w<<1]){m=w;break}const h=this._model.getLineContent(a.lineNumber);let v="";if(d<r.tokens1.length){const w=r.tokens1[d].offset,S=d+1<r.tokens1.length?r.tokens1[d+1].offset:h.length;v=h.substring(w,S)}(0,c.reset)(this._domNode,(0,c.$)("h2.tm-token",void 0,o(v),(0,c.$)("span.tm-token-length",void 0,`${v.length} ${v.length===1?"char":"chars"}`))),(0,c.append)(this._domNode,(0,c.$)("hr.tokens-inspect-separator",{style:"clear:both"}));const C=(m<<1)+1<r.tokens2.length?this._decodeMetadata(r.tokens2[(m<<1)+1]):null;(0,c.append)(this._domNode,(0,c.$)("table.tm-metadata-table",void 0,(0,c.$)("tbody",void 0,(0,c.$)("tr",void 0,(0,c.$)("td.tm-metadata-key",void 0,"language"),(0,c.$)("td.tm-metadata-value",void 0,`${C?C.languageId:"-?-"}`)),(0,c.$)("tr",void 0,(0,c.$)("td.tm-metadata-key",void 0,"token type"),(0,c.$)("td.tm-metadata-value",void 0,`${C?this._tokenTypeToString(C.tokenType):"-?-"}`)),(0,c.$)("tr",void 0,(0,c.$)("td.tm-metadata-key",void 0,"font style"),(0,c.$)("td.tm-metadata-value",void 0,`${C?this._fontStyleToString(C.fontStyle):"-?-"}`)),(0,c.$)("tr",void 0,(0,c.$)("td.tm-metadata-key",void 0,"foreground"),(0,c.$)("td.tm-metadata-value",void 0,`${C?k.Color.Format.CSS.formatHex(C.foreground):"-?-"}`)),(0,c.$)("tr",void 0,(0,c.$)("td.tm-metadata-key",void 0,"background"),(0,c.$)("td.tm-metadata-value",void 0,`${C?k.Color.Format.CSS.formatHex(C.background):"-?-"}`))))),(0,c.append)(this._domNode,(0,c.$)("hr.tokens-inspect-separator")),d<r.tokens1.length&&(0,c.append)(this._domNode,(0,c.$)("span.tm-token-type",void 0,r.tokens1[d].type)),this._editor.layoutContentWidget(this)}_decodeMetadata(a){const r=y.TokenizationRegistry.getColorMap(),d=f.TokenMetadata.getLanguageId(a),m=f.TokenMetadata.getTokenType(a),h=f.TokenMetadata.getFontStyle(a),v=f.TokenMetadata.getForeground(a),C=f.TokenMetadata.getBackground(a);return{languageId:this._languageService.languageIdCodec.decodeLanguageId(d),tokenType:m,fontStyle:h,foreground:r[v],background:r[C]}}_tokenTypeToString(a){switch(a){case 0:return"Other";case 1:return"Comment";case 2:return"String";case 3:return"RegEx";default:return"??"}}_fontStyleToString(a){let r="";return a&1&&(r+="italic "),a&2&&(r+="bold "),a&4&&(r+="underline "),a&8&&(r+="strikethrough "),r.length===0&&(r="---"),r}_getTokensAtLine(a){const r=this._getStateBeforeLine(a),d=this._tokenizationSupport.tokenize(this._model.getLineContent(a),!0,r),m=this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(a),!0,r);return{startState:r,tokens1:d.tokens,tokens2:m.tokens,endState:d.endState}}_getStateBeforeLine(a){let r=this._tokenizationSupport.getInitialState();for(let d=1;d<a;d++)r=this._tokenizationSupport.tokenize(this._model.getLineContent(d),!0,r).endState;return r}getDomNode(){return this._domNode}getPosition(){return{position:this._editor.getPosition(),preference:[2,1]}}}(0,L.registerEditorContribution)(t.ID,t,4),(0,L.registerEditorAction)(i)}),define(oe[739],re([1,0,367,8,82,127,2,45,455,3,24,27,179,7,31,61,695,100,66]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";var a,r;Object.defineProperty(e,"__esModule",{value:!0}),e.CommandsHistory=e.AbstractCommandsQuickAccessProvider=void 0;let d=class extends g.PickerQuickAccessProvider{static{a=this}static{this.PREFIX=">"}static{this.TFIDF_THRESHOLD=.5}static{this.TFIDF_MAX_RESULTS=5}static{this.WORD_FILTER=(0,E.or)(E.matchesPrefix,E.matchesWords,E.matchesContiguousSubString)}constructor(v,C,w,S,D,I){super(a.PREFIX,v),this.instantiationService=C,this.keybindingService=w,this.commandService=S,this.telemetryService=D,this.dialogService=I,this.commandsHistory=this._register(this.instantiationService.createInstance(m)),this.options=v}async _getPicks(v,C,w,S){const D=await this.getCommandPicks(w);if(w.isCancellationRequested)return[];const I=(0,L.createSingleCallFunction)(()=>{const x=new _.TfIdfCalculator;x.updateDocuments(D.map(W=>({key:W.commandId,textChunks:[this.getTfIdfChunk(W)]})));const F=x.calculateScores(v,w);return(0,_.normalizeTfIdfScores)(F).filter(W=>W.score>a.TFIDF_THRESHOLD).slice(0,a.TFIDF_MAX_RESULTS)}),T=[];for(const x of D){const F=a.WORD_FILTER(v,x.label)??void 0,W=x.commandAlias?a.WORD_FILTER(v,x.commandAlias)??void 0:void 0;if(F||W)x.highlights={label:F,detail:this.options.showAlias?W:void 0},T.push(x);else if(v===x.commandId)T.push(x);else if(v.length>=3){const z=I();if(w.isCancellationRequested)return[];const q=z.find(H=>H.key===x.commandId);q&&(x.tfIdfScore=q.score,T.push(x))}}const M=new Map;for(const x of T){const F=M.get(x.label);F?(x.description=x.commandId,F.description=F.commandId):M.set(x.label,x)}T.sort((x,F)=>{if(x.tfIdfScore&&F.tfIdfScore)return x.tfIdfScore===F.tfIdfScore?x.label.localeCompare(F.label):F.tfIdfScore-x.tfIdfScore;if(x.tfIdfScore)return 1;if(F.tfIdfScore)return-1;const W=this.commandsHistory.peek(x.commandId),z=this.commandsHistory.peek(F.commandId);if(W&&z)return W>z?-1:1;if(W)return-1;if(z)return 1;if(this.options.suggestedCommandIds){const q=this.options.suggestedCommandIds.has(x.commandId),H=this.options.suggestedCommandIds.has(F.commandId);if(q&&H)return 0;if(q)return-1;if(H)return 1}return x.label.localeCompare(F.label)});const A=[];let R=!1,N=!0,O=!!this.options.suggestedCommandIds;for(let x=0;x<T.length;x++){const F=T[x];x===0&&this.commandsHistory.peek(F.commandId)&&(A.push({type:"separator",label:(0,b.localize)(1089,"recently used")}),R=!0),N&&F.tfIdfScore!==void 0&&(A.push({type:"separator",label:(0,b.localize)(1090,"similar commands")}),N=!1),O&&F.tfIdfScore===void 0&&!this.commandsHistory.peek(F.commandId)&&this.options.suggestedCommandIds?.has(F.commandId)&&(A.push({type:"separator",label:(0,b.localize)(1091,"commonly used")}),R=!0,O=!1),R&&F.tfIdfScore===void 0&&!this.commandsHistory.peek(F.commandId)&&!this.options.suggestedCommandIds?.has(F.commandId)&&(A.push({type:"separator",label:(0,b.localize)(1092,"other commands")}),R=!1),A.push(this.toCommandPick(F,S))}return this.hasAdditionalCommandPicks(v,w)?{picks:A,additionalPicks:(async()=>{const x=await this.getAdditionalCommandPicks(D,T,v,w);if(w.isCancellationRequested)return[];const F=x.map(W=>this.toCommandPick(W,S));return N&&F[0]?.type!=="separator"&&F.unshift({type:"separator",label:(0,b.localize)(1093,"similar commands")}),F})()}:A}toCommandPick(v,C){if(v.type==="separator")return v;const w=this.keybindingService.lookupKeybinding(v.commandId),S=w?(0,b.localize)(1094,"{0}, {1}",v.label,w.getAriaLabel()):v.label;return{...v,ariaLabel:S,detail:this.options.showAlias&&v.commandAlias!==v.label?v.commandAlias:void 0,keybinding:w,accept:async()=>{this.commandsHistory.push(v.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:v.commandId,from:C?.from??"quick open"});try{v.args?.length?await this.commandService.executeCommand(v.commandId,...v.args):await this.commandService.executeCommand(v.commandId)}catch(D){(0,k.isCancellationError)(D)||this.dialogService.error((0,b.localize)(1095,"Command '{0}' resulted in an error",v.label),(0,c.toErrorMessage)(D))}}}}getTfIdfChunk({label:v,commandAlias:C,commandDescription:w}){let S=v;return C&&C!==v&&(S+=` - ${C}`),w&&w.value!==v&&(S+=` - ${w.value===w.original?w.value:`${w.value} (${w.original})`}`),S}};e.AbstractCommandsQuickAccessProvider=d,e.AbstractCommandsQuickAccessProvider=d=a=De([he(1,t.IInstantiationService),he(2,i.IKeybindingService),he(3,p.ICommandService),he(4,l.ITelemetryService),he(5,s.IDialogService)],d);let m=class extends y.Disposable{static{r=this}static{this.DEFAULT_COMMANDS_HISTORY_LENGTH=50}static{this.PREF_KEY_CACHE="commandPalette.mru.cache"}static{this.PREF_KEY_COUNTER="commandPalette.mru.counter"}static{this.counter=1}static{this.hasChanges=!1}constructor(v,C,w){super(),this.storageService=v,this.configurationService=C,this.logService=w,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(v=>this.updateConfiguration(v))),this._register(this.storageService.onWillSaveState(v=>{v.reason===u.WillSaveStateReason.SHUTDOWN&&this.saveState()}))}updateConfiguration(v){v&&!v.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=r.getConfiguredCommandHistoryLength(this.configurationService),r.cache&&r.cache.limit!==this.configuredCommandsHistoryLength&&(r.cache.limit=this.configuredCommandsHistoryLength,r.hasChanges=!0))}load(){const v=this.storageService.get(r.PREF_KEY_CACHE,0);let C;if(v)try{C=JSON.parse(v)}catch(S){this.logService.error(`[CommandsHistory] invalid data: ${S}`)}const w=r.cache=new f.LRUCache(this.configuredCommandsHistoryLength,1);if(C){let S;C.usesLRU?S=C.entries:S=C.entries.sort((D,I)=>D.value-I.value),S.forEach(D=>w.set(D.key,D.value))}r.counter=this.storageService.getNumber(r.PREF_KEY_COUNTER,0,r.counter)}push(v){r.cache&&(r.cache.set(v,r.counter++),r.hasChanges=!0)}peek(v){return r.cache?.peek(v)}saveState(){if(!r.cache||!r.hasChanges)return;const v={usesLRU:!0,entries:[]};r.cache.forEach((C,w)=>v.entries.push({key:w,value:C})),this.storageService.store(r.PREF_KEY_CACHE,JSON.stringify(v),0,0),this.storageService.store(r.PREF_KEY_COUNTER,r.counter,0,0),r.hasChanges=!1}static getConfiguredCommandHistoryLength(v){const w=v.getValue().workbench?.commandPalette?.history;return typeof w=="number"?w:r.DEFAULT_COMMANDS_HISTORY_LENGTH}};e.CommandsHistory=m,e.CommandsHistory=m=r=De([he(0,u.IStorageService),he(1,n.IConfigurationService),he(2,o.ILogService)],m)}),define(oe[740],re([1,0,141,377,739]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEditorCommandsQuickAccessProvider=void 0;class L extends E.AbstractCommandsQuickAccessProvider{constructor(f,_,b,p,n,s){super(f,_,b,p,n,s)}getCodeEditorCommandPicks(){const f=this.activeTextEditorControl;if(!f)return[];const _=[];for(const b of f.getSupportedActions()){let p;b.metadata?.description&&((0,k.isLocalizedString)(b.metadata.description)?p=b.metadata.description:p={original:b.metadata.description,value:b.metadata.description}),_.push({commandId:b.id,commandAlias:b.alias,commandDescription:p,label:(0,c.stripIcons)(b.label)||b.id})}return _}}e.AbstractEditorCommandsQuickAccessProvider=L}),define(oe[741],re([1,0,38,154,106,35,740,7,31,24,66,179,15,20,63]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GotoLineAction=e.StandaloneCommandsQuickAccessProvider=void 0;let o=class extends y.AbstractEditorCommandsQuickAccessProvider{get activeTextEditorControl(){return this.codeEditorService.getFocusedCodeEditor()??void 0}constructor(l,a,r,d,m,h){super({showAlias:!1},l,r,d,m,h),this.codeEditorService=a}async getCommandPicks(){return this.getCodeEditorCommandPicks()}hasAdditionalCommandPicks(){return!1}async getAdditionalCommandPicks(){return[]}};e.StandaloneCommandsQuickAccessProvider=o,e.StandaloneCommandsQuickAccessProvider=o=De([he(0,f.IInstantiationService),he(1,L.ICodeEditorService),he(2,_.IKeybindingService),he(3,b.ICommandService),he(4,p.ITelemetryService),he(5,n.IDialogService)],o);class g extends s.EditorAction{static{this.ID="editor.action.quickCommand"}constructor(){super({id:g.ID,label:E.QuickCommandNLS.quickCommandActionLabel,alias:"Command Palette",precondition:void 0,kbOpts:{kbExpr:t.EditorContextKeys.focus,primary:59,weight:100},contextMenuOpts:{group:"z_commands",order:1}})}run(l){l.get(i.IQuickInputService).quickAccess.show(o.PREFIX)}}e.GotoLineAction=g,(0,s.registerEditorAction)(g),c.Registry.as(k.Extensions.Quickaccess).registerQuickAccessProvider({ctor:o,prefix:o.PREFIX,helpEntries:[{description:E.QuickCommandNLS.quickCommandHelp,commandId:g.ID}]})}),define(oe[88],re([1,0,89,14,33,6,271,38,3]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.workbenchColorsSchemaId=e.DEFAULT_COLOR_CONFIG_VALUE=e.Extensions=void 0,e.asCssVariableName=b,e.asCssVariable=p,e.asCssVariableWithDefault=n,e.isColorDefaults=s,e.registerColor=o,e.executeTransform=g,e.darken=u,e.lighten=l,e.transparent=a,e.oneOf=r,e.ifDefinedThenElse=d,e.lessProminent=m,e.resolveColorValue=h;function b(w){return`--vscode-${w.replace(/\./g,"-")}`}function p(w){return`var(${b(w)})`}function n(w,S){return`var(${b(w)}, ${S})`}function s(w){return w!==null&&typeof w=="object"&&"light"in w&&"dark"in w}e.Extensions={ColorContribution:"base.contributions.colors"},e.DEFAULT_COLOR_CONFIG_VALUE="default";class t{constructor(){this._onDidChangeSchema=new L.Emitter,this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}registerColor(S,D,I,T=!1,M){const A={id:S,description:I,defaults:D,needsTransparency:T,deprecationMessage:M};this.colorsById[S]=A;const R={type:"string",description:I,format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return M&&(R.deprecationMessage=M),T&&(R.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",R.patternErrorMessage=_.localize(1067,"This color must be transparent or it will obscure content")),this.colorSchema.properties[S]={oneOf:[R,{type:"string",const:e.DEFAULT_COLOR_CONFIG_VALUE,description:_.localize(1068,"Use the default color.")}]},this.colorReferenceSchema.enum.push(S),this.colorReferenceSchema.enumDescriptions.push(I),this._onDidChangeSchema.fire(),S}getColors(){return Object.keys(this.colorsById).map(S=>this.colorsById[S])}resolveDefaultColor(S,D){const I=this.colorsById[S];if(I?.defaults){const T=s(I.defaults)?I.defaults[D.type]:I.defaults;return h(T,D)}}getColorSchema(){return this.colorSchema}toString(){const S=(D,I)=>{const T=D.indexOf(".")===-1?0:1,M=I.indexOf(".")===-1?0:1;return T!==M?T-M:D.localeCompare(I)};return Object.keys(this.colorsById).sort(S).map(D=>`- \`${D}\`: ${this.colorsById[D].description}`).join(`
`)}}const i=new t;f.Registry.add(e.Extensions.ColorContribution,i);function o(w,S,D,I,T){return i.registerColor(w,S,D,I,T)}function g(w,S){switch(w.op){case 0:return h(w.value,S)?.darken(w.factor);case 1:return h(w.value,S)?.lighten(w.factor);case 2:return h(w.value,S)?.transparent(w.factor);case 3:{const D=h(w.background,S);return D?h(w.value,S)?.makeOpaque(D):h(w.value,S)}case 4:for(const D of w.values){const I=h(D,S);if(I)return I}return;case 6:return h(S.defines(w.if)?w.then:w.else,S);case 5:{const D=h(w.value,S);if(!D)return;const I=h(w.background,S);return I?D.isDarkerThan(I)?E.Color.getLighterColor(D,I,w.factor).transparent(w.transparency):E.Color.getDarkerColor(D,I,w.factor).transparent(w.transparency):D.transparent(w.factor*w.transparency)}default:throw(0,c.assertNever)(w)}}function u(w,S){return{op:0,value:w,factor:S}}function l(w,S){return{op:1,value:w,factor:S}}function a(w,S){return{op:2,value:w,factor:S}}function r(...w){return{op:4,values:w}}function d(w,S,D){return{op:6,if:w,then:S,else:D}}function m(w,S,D,I){return{op:5,value:w,background:S,factor:D,transparency:I}}function h(w,S){if(w!==null){if(typeof w=="string")return w[0]==="#"?E.Color.fromHex(w):S.getColor(w);if(w instanceof E.Color)return w;if(typeof w=="object")return g(w,S)}}e.workbenchColorsSchemaId="vscode://schemas/workbench-colors";const v=f.Registry.as(y.Extensions.JSONContribution);v.registerSchema(e.workbenchColorsSchemaId,i.getColorSchema());const C=new k.RunOnceScheduler(()=>v.notifySchemaChanged(e.workbenchColorsSchemaId),200);i.onDidChangeSchema(()=>{C.isScheduled()||C.schedule()})}),define(oe[123],re([1,0,3,33,88]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.textCodeBlockBackground=e.textBlockQuoteBorder=e.textBlockQuoteBackground=e.textPreformatBackground=e.textPreformatForeground=e.textSeparatorForeground=e.textLinkActiveForeground=e.textLinkForeground=e.selectionBackground=e.activeContrastBorder=e.contrastBorder=e.focusBorder=e.iconForeground=e.descriptionForeground=e.errorForeground=e.disabledForeground=e.foreground=void 0,e.foreground=(0,E.registerColor)("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},c.localize(261,"Overall foreground color. This color is only used if not overridden by a component.")),e.disabledForeground=(0,E.registerColor)("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},c.localize(262,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),e.errorForeground=(0,E.registerColor)("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},c.localize(263,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),e.descriptionForeground=(0,E.registerColor)("descriptionForeground",{light:"#717171",dark:(0,E.transparent)(e.foreground,.7),hcDark:(0,E.transparent)(e.foreground,.7),hcLight:(0,E.transparent)(e.foreground,.7)},c.localize(264,"Foreground color for description text providing additional information, for example for a label.")),e.iconForeground=(0,E.registerColor)("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},c.localize(265,"The default color for icons in the workbench.")),e.focusBorder=(0,E.registerColor)("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},c.localize(266,"Overall border color for focused elements. This color is only used if not overridden by a component.")),e.contrastBorder=(0,E.registerColor)("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},c.localize(267,"An extra border around elements to separate them from others for greater contrast.")),e.activeContrastBorder=(0,E.registerColor)("contrastActiveBorder",{light:null,dark:null,hcDark:e.focusBorder,hcLight:e.focusBorder},c.localize(268,"An extra border around active elements to separate them from others for greater contrast.")),e.selectionBackground=(0,E.registerColor)("selection.background",null,c.localize(269,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),e.textLinkForeground=(0,E.registerColor)("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c.localize(270,"Foreground color for links in text.")),e.textLinkActiveForeground=(0,E.registerColor)("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c.localize(271,"Foreground color for links in text when clicked on and on mouse hover.")),e.textSeparatorForeground=(0,E.registerColor)("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:k.Color.black,hcLight:"#292929"},c.localize(272,"Color for text separators.")),e.textPreformatForeground=(0,E.registerColor)("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},c.localize(273,"Foreground color for preformatted text segments.")),e.textPreformatBackground=(0,E.registerColor)("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},c.localize(274,"Background color for preformatted text segments.")),e.textBlockQuoteBackground=(0,E.registerColor)("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},c.localize(275,"Background color for block quotes in text.")),e.textBlockQuoteBorder=(0,E.registerColor)("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:k.Color.white,hcLight:"#292929"},c.localize(276,"Border color for block quotes in text.")),e.textCodeBlockBackground=(0,E.registerColor)("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:k.Color.black,hcLight:"#F2F2F2"},c.localize(277,"Background color for code blocks in text."))}),define(oe[277],re([1,0,3,33,88,123]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.progressBarBackground=e.scrollbarSliderActiveBackground=e.scrollbarSliderHoverBackground=e.scrollbarSliderBackground=e.scrollbarShadow=e.badgeForeground=e.badgeBackground=e.sashHoverBorder=void 0,e.sashHoverBorder=(0,E.registerColor)("sash.hoverBorder",L.focusBorder,c.localize(57,"Border color of active sashes.")),e.badgeBackground=(0,E.registerColor)("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:k.Color.black,hcLight:"#0F4A85"},c.localize(58,"Badge background color. Badges are small information labels, e.g. for search results count.")),e.badgeForeground=(0,E.registerColor)("badge.foreground",{dark:k.Color.white,light:"#333",hcDark:k.Color.white,hcLight:k.Color.white},c.localize(59,"Badge foreground color. Badges are small information labels, e.g. for search results count.")),e.scrollbarShadow=(0,E.registerColor)("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},c.localize(60,"Scrollbar shadow to indicate that the view is scrolled.")),e.scrollbarSliderBackground=(0,E.registerColor)("scrollbarSlider.background",{dark:k.Color.fromHex("#797979").transparent(.4),light:k.Color.fromHex("#646464").transparent(.4),hcDark:(0,E.transparent)(L.contrastBorder,.6),hcLight:(0,E.transparent)(L.contrastBorder,.4)},c.localize(61,"Scrollbar slider background color.")),e.scrollbarSliderHoverBackground=(0,E.registerColor)("scrollbarSlider.hoverBackground",{dark:k.Color.fromHex("#646464").transparent(.7),light:k.Color.fromHex("#646464").transparent(.7),hcDark:(0,E.transparent)(L.contrastBorder,.8),hcLight:(0,E.transparent)(L.contrastBorder,.8)},c.localize(62,"Scrollbar slider background color when hovering.")),e.scrollbarSliderActiveBackground=(0,E.registerColor)("scrollbarSlider.activeBackground",{dark:k.Color.fromHex("#BFBFBF").transparent(.4),light:k.Color.fromHex("#000000").transparent(.6),hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(63,"Scrollbar slider background color when clicked on.")),e.progressBarBackground=(0,E.registerColor)("progressBar.background",{dark:k.Color.fromHex("#0E70C0"),light:k.Color.fromHex("#0E70C0"),hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(64,"Background color of the progress bar that can show for long running operations."))}),define(oe[137],re([1,0,3,33,88,123,277]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.problemsInfoIconForeground=e.problemsWarningIconForeground=e.problemsErrorIconForeground=e.overviewRulerSelectionHighlightForeground=e.overviewRulerFindMatchForeground=e.overviewRulerCommonContentForeground=e.overviewRulerIncomingContentForeground=e.overviewRulerCurrentContentForeground=e.mergeBorder=e.mergeCommonContentBackground=e.mergeCommonHeaderBackground=e.mergeIncomingContentBackground=e.mergeIncomingHeaderBackground=e.mergeCurrentContentBackground=e.mergeCurrentHeaderBackground=e.breadcrumbsPickerBackground=e.breadcrumbsActiveSelectionForeground=e.breadcrumbsFocusForeground=e.breadcrumbsBackground=e.breadcrumbsForeground=e.toolbarActiveBackground=e.toolbarHoverOutline=e.toolbarHoverBackground=e.widgetBorder=e.widgetShadow=e.diffUnchangedTextBackground=e.diffUnchangedRegionForeground=e.diffUnchangedRegionBackground=e.diffDiagonalFill=e.diffBorder=e.diffRemovedOutline=e.diffInsertedOutline=e.diffOverviewRulerRemoved=e.diffOverviewRulerInserted=e.diffRemovedLineGutter=e.diffInsertedLineGutter=e.diffRemovedLine=e.diffInsertedLine=e.diffRemoved=e.diffInserted=e.defaultRemoveColor=e.defaultInsertColor=e.snippetFinalTabstopHighlightBorder=e.snippetFinalTabstopHighlightBackground=e.snippetTabstopHighlightBorder=e.snippetTabstopHighlightBackground=e.editorLightBulbAiForeground=e.editorLightBulbAutoFixForeground=e.editorLightBulbForeground=e.editorInlayHintParameterBackground=e.editorInlayHintParameterForeground=e.editorInlayHintTypeBackground=e.editorInlayHintTypeForeground=e.editorInlayHintBackground=e.editorInlayHintForeground=e.editorHoverStatusBarBackground=e.editorHoverBorder=e.editorHoverForeground=e.editorHoverBackground=e.editorHoverHighlight=e.editorFindRangeHighlightBorder=e.editorFindMatchHighlightBorder=e.editorFindMatchBorder=e.editorFindRangeHighlight=e.editorFindMatchHighlightForeground=e.editorFindMatchHighlight=e.editorFindMatchForeground=e.editorFindMatch=e.editorSelectionHighlightBorder=e.editorSelectionHighlight=e.editorInactiveSelection=e.editorSelectionForeground=e.editorSelectionBackground=e.editorActiveLinkForeground=e.editorHintBorder=e.editorHintForeground=e.editorInfoBorder=e.editorInfoForeground=e.editorInfoBackground=e.editorWarningBorder=e.editorWarningForeground=e.editorWarningBackground=e.editorErrorBorder=e.editorErrorForeground=e.editorErrorBackground=e.editorWidgetResizeBorder=e.editorWidgetBorder=e.editorWidgetForeground=e.editorWidgetBackground=e.editorStickyScrollShadow=e.editorStickyScrollBorder=e.editorStickyScrollHoverBackground=e.editorStickyScrollBackground=e.editorForeground=e.editorBackground=void 0,e.editorBackground=(0,E.registerColor)("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:k.Color.black,hcLight:k.Color.white},c.localize(160,"Editor background color.")),e.editorForeground=(0,E.registerColor)("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:k.Color.white,hcLight:L.foreground},c.localize(161,"Editor default foreground color.")),e.editorStickyScrollBackground=(0,E.registerColor)("editorStickyScroll.background",e.editorBackground,c.localize(162,"Background color of sticky scroll in the editor")),e.editorStickyScrollHoverBackground=(0,E.registerColor)("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:k.Color.fromHex("#0F4A85").transparent(.1)},c.localize(163,"Background color of sticky scroll on hover in the editor")),e.editorStickyScrollBorder=(0,E.registerColor)("editorStickyScroll.border",{dark:null,light:null,hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(164,"Border color of sticky scroll in the editor")),e.editorStickyScrollShadow=(0,E.registerColor)("editorStickyScroll.shadow",y.scrollbarShadow,c.localize(165," Shadow color of sticky scroll in the editor")),e.editorWidgetBackground=(0,E.registerColor)("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:k.Color.white},c.localize(166,"Background color of editor widgets, such as find/replace.")),e.editorWidgetForeground=(0,E.registerColor)("editorWidget.foreground",L.foreground,c.localize(167,"Foreground color of editor widgets, such as find/replace.")),e.editorWidgetBorder=(0,E.registerColor)("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(168,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),e.editorWidgetResizeBorder=(0,E.registerColor)("editorWidget.resizeBorder",null,c.localize(169,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),e.editorErrorBackground=(0,E.registerColor)("editorError.background",null,c.localize(170,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorErrorForeground=(0,E.registerColor)("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},c.localize(171,"Foreground color of error squigglies in the editor.")),e.editorErrorBorder=(0,E.registerColor)("editorError.border",{dark:null,light:null,hcDark:k.Color.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},c.localize(172,"If set, color of double underlines for errors in the editor.")),e.editorWarningBackground=(0,E.registerColor)("editorWarning.background",null,c.localize(173,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorWarningForeground=(0,E.registerColor)("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},c.localize(174,"Foreground color of warning squigglies in the editor.")),e.editorWarningBorder=(0,E.registerColor)("editorWarning.border",{dark:null,light:null,hcDark:k.Color.fromHex("#FFCC00").transparent(.8),hcLight:k.Color.fromHex("#FFCC00").transparent(.8)},c.localize(175,"If set, color of double underlines for warnings in the editor.")),e.editorInfoBackground=(0,E.registerColor)("editorInfo.background",null,c.localize(176,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorInfoForeground=(0,E.registerColor)("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},c.localize(177,"Foreground color of info squigglies in the editor.")),e.editorInfoBorder=(0,E.registerColor)("editorInfo.border",{dark:null,light:null,hcDark:k.Color.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},c.localize(178,"If set, color of double underlines for infos in the editor.")),e.editorHintForeground=(0,E.registerColor)("editorHint.foreground",{dark:k.Color.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},c.localize(179,"Foreground color of hint squigglies in the editor.")),e.editorHintBorder=(0,E.registerColor)("editorHint.border",{dark:null,light:null,hcDark:k.Color.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},c.localize(180,"If set, color of double underlines for hints in the editor.")),e.editorActiveLinkForeground=(0,E.registerColor)("editorLink.activeForeground",{dark:"#4E94CE",light:k.Color.blue,hcDark:k.Color.cyan,hcLight:"#292929"},c.localize(181,"Color of active links.")),e.editorSelectionBackground=(0,E.registerColor)("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},c.localize(182,"Color of the editor selection.")),e.editorSelectionForeground=(0,E.registerColor)("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:k.Color.white},c.localize(183,"Color of the selected text for high contrast.")),e.editorInactiveSelection=(0,E.registerColor)("editor.inactiveSelectionBackground",{light:(0,E.transparent)(e.editorSelectionBackground,.5),dark:(0,E.transparent)(e.editorSelectionBackground,.5),hcDark:(0,E.transparent)(e.editorSelectionBackground,.7),hcLight:(0,E.transparent)(e.editorSelectionBackground,.5)},c.localize(184,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorSelectionHighlight=(0,E.registerColor)("editor.selectionHighlightBackground",{light:(0,E.lessProminent)(e.editorSelectionBackground,e.editorBackground,.3,.6),dark:(0,E.lessProminent)(e.editorSelectionBackground,e.editorBackground,.3,.6),hcDark:null,hcLight:null},c.localize(185,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorSelectionHighlightBorder=(0,E.registerColor)("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:L.activeContrastBorder,hcLight:L.activeContrastBorder},c.localize(186,"Border color for regions with the same content as the selection.")),e.editorFindMatch=(0,E.registerColor)("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},c.localize(187,"Color of the current search match.")),e.editorFindMatchForeground=(0,E.registerColor)("editor.findMatchForeground",null,c.localize(188,"Text color of the current search match.")),e.editorFindMatchHighlight=(0,E.registerColor)("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},c.localize(189,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorFindMatchHighlightForeground=(0,E.registerColor)("editor.findMatchHighlightForeground",null,c.localize(190,"Foreground color of the other search matches."),!0),e.editorFindRangeHighlight=(0,E.registerColor)("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},c.localize(191,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorFindMatchBorder=(0,E.registerColor)("editor.findMatchBorder",{light:null,dark:null,hcDark:L.activeContrastBorder,hcLight:L.activeContrastBorder},c.localize(192,"Border color of the current search match.")),e.editorFindMatchHighlightBorder=(0,E.registerColor)("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:L.activeContrastBorder,hcLight:L.activeContrastBorder},c.localize(193,"Border color of the other search matches.")),e.editorFindRangeHighlightBorder=(0,E.registerColor)("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:(0,E.transparent)(L.activeContrastBorder,.4),hcLight:(0,E.transparent)(L.activeContrastBorder,.4)},c.localize(194,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorHoverHighlight=(0,E.registerColor)("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},c.localize(195,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorHoverBackground=(0,E.registerColor)("editorHoverWidget.background",e.editorWidgetBackground,c.localize(196,"Background color of the editor hover.")),e.editorHoverForeground=(0,E.registerColor)("editorHoverWidget.foreground",e.editorWidgetForeground,c.localize(197,"Foreground color of the editor hover.")),e.editorHoverBorder=(0,E.registerColor)("editorHoverWidget.border",e.editorWidgetBorder,c.localize(198,"Border color of the editor hover.")),e.editorHoverStatusBarBackground=(0,E.registerColor)("editorHoverWidget.statusBarBackground",{dark:(0,E.lighten)(e.editorHoverBackground,.2),light:(0,E.darken)(e.editorHoverBackground,.05),hcDark:e.editorWidgetBackground,hcLight:e.editorWidgetBackground},c.localize(199,"Background color of the editor hover status bar.")),e.editorInlayHintForeground=(0,E.registerColor)("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:k.Color.white,hcLight:k.Color.black},c.localize(200,"Foreground color of inline hints")),e.editorInlayHintBackground=(0,E.registerColor)("editorInlayHint.background",{dark:(0,E.transparent)(y.badgeBackground,.1),light:(0,E.transparent)(y.badgeBackground,.1),hcDark:(0,E.transparent)(k.Color.white,.1),hcLight:(0,E.transparent)(y.badgeBackground,.1)},c.localize(201,"Background color of inline hints")),e.editorInlayHintTypeForeground=(0,E.registerColor)("editorInlayHint.typeForeground",e.editorInlayHintForeground,c.localize(202,"Foreground color of inline hints for types")),e.editorInlayHintTypeBackground=(0,E.registerColor)("editorInlayHint.typeBackground",e.editorInlayHintBackground,c.localize(203,"Background color of inline hints for types")),e.editorInlayHintParameterForeground=(0,E.registerColor)("editorInlayHint.parameterForeground",e.editorInlayHintForeground,c.localize(204,"Foreground color of inline hints for parameters")),e.editorInlayHintParameterBackground=(0,E.registerColor)("editorInlayHint.parameterBackground",e.editorInlayHintBackground,c.localize(205,"Background color of inline hints for parameters")),e.editorLightBulbForeground=(0,E.registerColor)("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},c.localize(206,"The color used for the lightbulb actions icon.")),e.editorLightBulbAutoFixForeground=(0,E.registerColor)("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},c.localize(207,"The color used for the lightbulb auto fix actions icon.")),e.editorLightBulbAiForeground=(0,E.registerColor)("editorLightBulbAi.foreground",e.editorLightBulbForeground,c.localize(208,"The color used for the lightbulb AI icon.")),e.snippetTabstopHighlightBackground=(0,E.registerColor)("editor.snippetTabstopHighlightBackground",{dark:new k.Color(new k.RGBA(124,124,124,.3)),light:new k.Color(new k.RGBA(10,50,100,.2)),hcDark:new k.Color(new k.RGBA(124,124,124,.3)),hcLight:new k.Color(new k.RGBA(10,50,100,.2))},c.localize(209,"Highlight background color of a snippet tabstop.")),e.snippetTabstopHighlightBorder=(0,E.registerColor)("editor.snippetTabstopHighlightBorder",null,c.localize(210,"Highlight border color of a snippet tabstop.")),e.snippetFinalTabstopHighlightBackground=(0,E.registerColor)("editor.snippetFinalTabstopHighlightBackground",null,c.localize(211,"Highlight background color of the final tabstop of a snippet.")),e.snippetFinalTabstopHighlightBorder=(0,E.registerColor)("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new k.Color(new k.RGBA(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},c.localize(212,"Highlight border color of the final tabstop of a snippet.")),e.defaultInsertColor=new k.Color(new k.RGBA(155,185,85,.2)),e.defaultRemoveColor=new k.Color(new k.RGBA(255,0,0,.2)),e.diffInserted=(0,E.registerColor)("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},c.localize(213,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),e.diffRemoved=(0,E.registerColor)("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},c.localize(214,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),e.diffInsertedLine=(0,E.registerColor)("diffEditor.insertedLineBackground",{dark:e.defaultInsertColor,light:e.defaultInsertColor,hcDark:null,hcLight:null},c.localize(215,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),e.diffRemovedLine=(0,E.registerColor)("diffEditor.removedLineBackground",{dark:e.defaultRemoveColor,light:e.defaultRemoveColor,hcDark:null,hcLight:null},c.localize(216,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),e.diffInsertedLineGutter=(0,E.registerColor)("diffEditorGutter.insertedLineBackground",null,c.localize(217,"Background color for the margin where lines got inserted.")),e.diffRemovedLineGutter=(0,E.registerColor)("diffEditorGutter.removedLineBackground",null,c.localize(218,"Background color for the margin where lines got removed.")),e.diffOverviewRulerInserted=(0,E.registerColor)("diffEditorOverview.insertedForeground",null,c.localize(219,"Diff overview ruler foreground for inserted content.")),e.diffOverviewRulerRemoved=(0,E.registerColor)("diffEditorOverview.removedForeground",null,c.localize(220,"Diff overview ruler foreground for removed content.")),e.diffInsertedOutline=(0,E.registerColor)("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},c.localize(221,"Outline color for the text that got inserted.")),e.diffRemovedOutline=(0,E.registerColor)("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},c.localize(222,"Outline color for text that got removed.")),e.diffBorder=(0,E.registerColor)("diffEditor.border",{dark:null,light:null,hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(223,"Border color between the two text editors.")),e.diffDiagonalFill=(0,E.registerColor)("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},c.localize(224,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),e.diffUnchangedRegionBackground=(0,E.registerColor)("diffEditor.unchangedRegionBackground","sideBar.background",c.localize(225,"The background color of unchanged blocks in the diff editor.")),e.diffUnchangedRegionForeground=(0,E.registerColor)("diffEditor.unchangedRegionForeground","foreground",c.localize(226,"The foreground color of unchanged blocks in the diff editor.")),e.diffUnchangedTextBackground=(0,E.registerColor)("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},c.localize(227,"The background color of unchanged code in the diff editor.")),e.widgetShadow=(0,E.registerColor)("widget.shadow",{dark:(0,E.transparent)(k.Color.black,.36),light:(0,E.transparent)(k.Color.black,.16),hcDark:null,hcLight:null},c.localize(228,"Shadow color of widgets such as find/replace inside the editor.")),e.widgetBorder=(0,E.registerColor)("widget.border",{dark:null,light:null,hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(229,"Border color of widgets such as find/replace inside the editor.")),e.toolbarHoverBackground=(0,E.registerColor)("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},c.localize(230,"Toolbar background when hovering over actions using the mouse")),e.toolbarHoverOutline=(0,E.registerColor)("toolbar.hoverOutline",{dark:null,light:null,hcDark:L.activeContrastBorder,hcLight:L.activeContrastBorder},c.localize(231,"Toolbar outline when hovering over actions using the mouse")),e.toolbarActiveBackground=(0,E.registerColor)("toolbar.activeBackground",{dark:(0,E.lighten)(e.toolbarHoverBackground,.1),light:(0,E.darken)(e.toolbarHoverBackground,.1),hcDark:null,hcLight:null},c.localize(232,"Toolbar background when holding the mouse over actions")),e.breadcrumbsForeground=(0,E.registerColor)("breadcrumb.foreground",(0,E.transparent)(L.foreground,.8),c.localize(233,"Color of focused breadcrumb items.")),e.breadcrumbsBackground=(0,E.registerColor)("breadcrumb.background",e.editorBackground,c.localize(234,"Background color of breadcrumb items.")),e.breadcrumbsFocusForeground=(0,E.registerColor)("breadcrumb.focusForeground",{light:(0,E.darken)(L.foreground,.2),dark:(0,E.lighten)(L.foreground,.1),hcDark:(0,E.lighten)(L.foreground,.1),hcLight:(0,E.lighten)(L.foreground,.1)},c.localize(235,"Color of focused breadcrumb items.")),e.breadcrumbsActiveSelectionForeground=(0,E.registerColor)("breadcrumb.activeSelectionForeground",{light:(0,E.darken)(L.foreground,.2),dark:(0,E.lighten)(L.foreground,.1),hcDark:(0,E.lighten)(L.foreground,.1),hcLight:(0,E.lighten)(L.foreground,.1)},c.localize(236,"Color of selected breadcrumb items.")),e.breadcrumbsPickerBackground=(0,E.registerColor)("breadcrumbPicker.background",e.editorWidgetBackground,c.localize(237,"Background color of breadcrumb item picker."));const f=.5,_=k.Color.fromHex("#40C8AE").transparent(f),b=k.Color.fromHex("#40A6FF").transparent(f),p=k.Color.fromHex("#606060").transparent(.4),n=.4,s=1;e.mergeCurrentHeaderBackground=(0,E.registerColor)("merge.currentHeaderBackground",{dark:_,light:_,hcDark:null,hcLight:null},c.localize(238,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeCurrentContentBackground=(0,E.registerColor)("merge.currentContentBackground",(0,E.transparent)(e.mergeCurrentHeaderBackground,n),c.localize(239,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeIncomingHeaderBackground=(0,E.registerColor)("merge.incomingHeaderBackground",{dark:b,light:b,hcDark:null,hcLight:null},c.localize(240,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeIncomingContentBackground=(0,E.registerColor)("merge.incomingContentBackground",(0,E.transparent)(e.mergeIncomingHeaderBackground,n),c.localize(241,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeCommonHeaderBackground=(0,E.registerColor)("merge.commonHeaderBackground",{dark:p,light:p,hcDark:null,hcLight:null},c.localize(242,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeCommonContentBackground=(0,E.registerColor)("merge.commonContentBackground",(0,E.transparent)(e.mergeCommonHeaderBackground,n),c.localize(243,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),e.mergeBorder=(0,E.registerColor)("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},c.localize(244,"Border color on headers and the splitter in inline merge-conflicts.")),e.overviewRulerCurrentContentForeground=(0,E.registerColor)("editorOverviewRuler.currentContentForeground",{dark:(0,E.transparent)(e.mergeCurrentHeaderBackground,s),light:(0,E.transparent)(e.mergeCurrentHeaderBackground,s),hcDark:e.mergeBorder,hcLight:e.mergeBorder},c.localize(245,"Current overview ruler foreground for inline merge-conflicts.")),e.overviewRulerIncomingContentForeground=(0,E.registerColor)("editorOverviewRuler.incomingContentForeground",{dark:(0,E.transparent)(e.mergeIncomingHeaderBackground,s),light:(0,E.transparent)(e.mergeIncomingHeaderBackground,s),hcDark:e.mergeBorder,hcLight:e.mergeBorder},c.localize(246,"Incoming overview ruler foreground for inline merge-conflicts.")),e.overviewRulerCommonContentForeground=(0,E.registerColor)("editorOverviewRuler.commonContentForeground",{dark:(0,E.transparent)(e.mergeCommonHeaderBackground,s),light:(0,E.transparent)(e.mergeCommonHeaderBackground,s),hcDark:e.mergeBorder,hcLight:e.mergeBorder},c.localize(247,"Common ancestor overview ruler foreground for inline merge-conflicts.")),e.overviewRulerFindMatchForeground=(0,E.registerColor)("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:""},c.localize(248,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),e.overviewRulerSelectionHighlightForeground=(0,E.registerColor)("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",c.localize(249,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),e.problemsErrorIconForeground=(0,E.registerColor)("problemsErrorIcon.foreground",e.editorErrorForeground,c.localize(250,"The color used for the problems error icon.")),e.problemsWarningIconForeground=(0,E.registerColor)("problemsWarningIcon.foreground",e.editorWarningForeground,c.localize(251,"The color used for the problems warning icon.")),e.problemsInfoIconForeground=(0,E.registerColor)("problemsInfoIcon.foreground",e.editorInfoForeground,c.localize(252,"The color used for the problems info icon."))}),define(oe[407],re([1,0,3,33,88,123,137]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.keybindingLabelBottomBorder=e.keybindingLabelBorder=e.keybindingLabelForeground=e.keybindingLabelBackground=e.checkboxSelectBorder=e.checkboxBorder=e.checkboxForeground=e.checkboxSelectBackground=e.checkboxBackground=e.radioInactiveHoverBackground=e.radioInactiveBorder=e.radioInactiveBackground=e.radioInactiveForeground=e.radioActiveBorder=e.radioActiveBackground=e.radioActiveForeground=e.buttonSecondaryHoverBackground=e.buttonSecondaryBackground=e.buttonSecondaryForeground=e.buttonBorder=e.buttonHoverBackground=e.buttonBackground=e.buttonSeparator=e.buttonForeground=e.selectBorder=e.selectForeground=e.selectListBackground=e.selectBackground=e.inputValidationErrorBorder=e.inputValidationErrorForeground=e.inputValidationErrorBackground=e.inputValidationWarningBorder=e.inputValidationWarningForeground=e.inputValidationWarningBackground=e.inputValidationInfoBorder=e.inputValidationInfoForeground=e.inputValidationInfoBackground=e.inputPlaceholderForeground=e.inputActiveOptionForeground=e.inputActiveOptionBackground=e.inputActiveOptionHoverBackground=e.inputActiveOptionBorder=e.inputBorder=e.inputForeground=e.inputBackground=void 0,e.inputBackground=(0,E.registerColor)("input.background",{dark:"#3C3C3C",light:k.Color.white,hcDark:k.Color.black,hcLight:k.Color.white},c.localize(115,"Input box background.")),e.inputForeground=(0,E.registerColor)("input.foreground",L.foreground,c.localize(116,"Input box foreground.")),e.inputBorder=(0,E.registerColor)("input.border",{dark:null,light:null,hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(117,"Input box border.")),e.inputActiveOptionBorder=(0,E.registerColor)("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(118,"Border color of activated options in input fields.")),e.inputActiveOptionHoverBackground=(0,E.registerColor)("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},c.localize(119,"Background color of activated options in input fields.")),e.inputActiveOptionBackground=(0,E.registerColor)("inputOption.activeBackground",{dark:(0,E.transparent)(L.focusBorder,.4),light:(0,E.transparent)(L.focusBorder,.2),hcDark:k.Color.transparent,hcLight:k.Color.transparent},c.localize(120,"Background hover color of options in input fields.")),e.inputActiveOptionForeground=(0,E.registerColor)("inputOption.activeForeground",{dark:k.Color.white,light:k.Color.black,hcDark:L.foreground,hcLight:L.foreground},c.localize(121,"Foreground color of activated options in input fields.")),e.inputPlaceholderForeground=(0,E.registerColor)("input.placeholderForeground",{light:(0,E.transparent)(L.foreground,.5),dark:(0,E.transparent)(L.foreground,.5),hcDark:(0,E.transparent)(L.foreground,.7),hcLight:(0,E.transparent)(L.foreground,.7)},c.localize(122,"Input box foreground color for placeholder text.")),e.inputValidationInfoBackground=(0,E.registerColor)("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:k.Color.black,hcLight:k.Color.white},c.localize(123,"Input validation background color for information severity.")),e.inputValidationInfoForeground=(0,E.registerColor)("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:L.foreground},c.localize(124,"Input validation foreground color for information severity.")),e.inputValidationInfoBorder=(0,E.registerColor)("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(125,"Input validation border color for information severity.")),e.inputValidationWarningBackground=(0,E.registerColor)("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:k.Color.black,hcLight:k.Color.white},c.localize(126,"Input validation background color for warning severity.")),e.inputValidationWarningForeground=(0,E.registerColor)("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:L.foreground},c.localize(127,"Input validation foreground color for warning severity.")),e.inputValidationWarningBorder=(0,E.registerColor)("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(128,"Input validation border color for warning severity.")),e.inputValidationErrorBackground=(0,E.registerColor)("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:k.Color.black,hcLight:k.Color.white},c.localize(129,"Input validation background color for error severity.")),e.inputValidationErrorForeground=(0,E.registerColor)("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:L.foreground},c.localize(130,"Input validation foreground color for error severity.")),e.inputValidationErrorBorder=(0,E.registerColor)("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(131,"Input validation border color for error severity.")),e.selectBackground=(0,E.registerColor)("dropdown.background",{dark:"#3C3C3C",light:k.Color.white,hcDark:k.Color.black,hcLight:k.Color.white},c.localize(132,"Dropdown background.")),e.selectListBackground=(0,E.registerColor)("dropdown.listBackground",{dark:null,light:null,hcDark:k.Color.black,hcLight:k.Color.white},c.localize(133,"Dropdown list background.")),e.selectForeground=(0,E.registerColor)("dropdown.foreground",{dark:"#F0F0F0",light:L.foreground,hcDark:k.Color.white,hcLight:L.foreground},c.localize(134,"Dropdown foreground.")),e.selectBorder=(0,E.registerColor)("dropdown.border",{dark:e.selectBackground,light:"#CECECE",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(135,"Dropdown border.")),e.buttonForeground=(0,E.registerColor)("button.foreground",k.Color.white,c.localize(136,"Button foreground color.")),e.buttonSeparator=(0,E.registerColor)("button.separator",(0,E.transparent)(e.buttonForeground,.4),c.localize(137,"Button separator color.")),e.buttonBackground=(0,E.registerColor)("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},c.localize(138,"Button background color.")),e.buttonHoverBackground=(0,E.registerColor)("button.hoverBackground",{dark:(0,E.lighten)(e.buttonBackground,.2),light:(0,E.darken)(e.buttonBackground,.2),hcDark:e.buttonBackground,hcLight:e.buttonBackground},c.localize(139,"Button background color when hovering.")),e.buttonBorder=(0,E.registerColor)("button.border",L.contrastBorder,c.localize(140,"Button border color.")),e.buttonSecondaryForeground=(0,E.registerColor)("button.secondaryForeground",{dark:k.Color.white,light:k.Color.white,hcDark:k.Color.white,hcLight:L.foreground},c.localize(141,"Secondary button foreground color.")),e.buttonSecondaryBackground=(0,E.registerColor)("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:k.Color.white},c.localize(142,"Secondary button background color.")),e.buttonSecondaryHoverBackground=(0,E.registerColor)("button.secondaryHoverBackground",{dark:(0,E.lighten)(e.buttonSecondaryBackground,.2),light:(0,E.darken)(e.buttonSecondaryBackground,.2),hcDark:null,hcLight:null},c.localize(143,"Secondary button background color when hovering.")),e.radioActiveForeground=(0,E.registerColor)("radio.activeForeground",e.inputActiveOptionForeground,c.localize(144,"Foreground color of active radio option.")),e.radioActiveBackground=(0,E.registerColor)("radio.activeBackground",e.inputActiveOptionBackground,c.localize(145,"Background color of active radio option.")),e.radioActiveBorder=(0,E.registerColor)("radio.activeBorder",e.inputActiveOptionBorder,c.localize(146,"Border color of the active radio option.")),e.radioInactiveForeground=(0,E.registerColor)("radio.inactiveForeground",null,c.localize(147,"Foreground color of inactive radio option.")),e.radioInactiveBackground=(0,E.registerColor)("radio.inactiveBackground",null,c.localize(148,"Background color of inactive radio option.")),e.radioInactiveBorder=(0,E.registerColor)("radio.inactiveBorder",{light:(0,E.transparent)(e.radioActiveForeground,.2),dark:(0,E.transparent)(e.radioActiveForeground,.2),hcDark:(0,E.transparent)(e.radioActiveForeground,.4),hcLight:(0,E.transparent)(e.radioActiveForeground,.2)},c.localize(149,"Border color of the inactive radio option.")),e.radioInactiveHoverBackground=(0,E.registerColor)("radio.inactiveHoverBackground",e.inputActiveOptionHoverBackground,c.localize(150,"Background color of inactive active radio option when hovering.")),e.checkboxBackground=(0,E.registerColor)("checkbox.background",e.selectBackground,c.localize(151,"Background color of checkbox widget.")),e.checkboxSelectBackground=(0,E.registerColor)("checkbox.selectBackground",y.editorWidgetBackground,c.localize(152,"Background color of checkbox widget when the element it's in is selected.")),e.checkboxForeground=(0,E.registerColor)("checkbox.foreground",e.selectForeground,c.localize(153,"Foreground color of checkbox widget.")),e.checkboxBorder=(0,E.registerColor)("checkbox.border",e.selectBorder,c.localize(154,"Border color of checkbox widget.")),e.checkboxSelectBorder=(0,E.registerColor)("checkbox.selectBorder",L.iconForeground,c.localize(155,"Border color of checkbox widget when the element it's in is selected.")),e.keybindingLabelBackground=(0,E.registerColor)("keybindingLabel.background",{dark:new k.Color(new k.RGBA(128,128,128,.17)),light:new k.Color(new k.RGBA(221,221,221,.4)),hcDark:k.Color.transparent,hcLight:k.Color.transparent},c.localize(156,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),e.keybindingLabelForeground=(0,E.registerColor)("keybindingLabel.foreground",{dark:k.Color.fromHex("#CCCCCC"),light:k.Color.fromHex("#555555"),hcDark:k.Color.white,hcLight:L.foreground},c.localize(157,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),e.keybindingLabelBorder=(0,E.registerColor)("keybindingLabel.border",{dark:new k.Color(new k.RGBA(51,51,51,.6)),light:new k.Color(new k.RGBA(204,204,204,.4)),hcDark:new k.Color(new k.RGBA(111,195,223)),hcLight:L.contrastBorder},c.localize(158,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),e.keybindingLabelBottomBorder=(0,E.registerColor)("keybindingLabel.bottomBorder",{dark:new k.Color(new k.RGBA(68,68,68,.6)),light:new k.Color(new k.RGBA(187,187,187,.4)),hcDark:new k.Color(new k.RGBA(111,195,223)),hcLight:L.foreground},c.localize(159,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."))}),define(oe[278],re([1,0,3,33,88,123,137]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tableOddRowsBackgroundColor=e.tableColumnsBorder=e.treeInactiveIndentGuidesStroke=e.treeIndentGuidesStroke=e.listDeemphasizedForeground=e.listFilterMatchHighlightBorder=e.listFilterMatchHighlight=e.listFilterWidgetShadow=e.listFilterWidgetNoMatchesOutline=e.listFilterWidgetOutline=e.listFilterWidgetBackground=e.listWarningForeground=e.listErrorForeground=e.listInvalidItemForeground=e.listFocusHighlightForeground=e.listHighlightForeground=e.listDropBetweenBackground=e.listDropOverBackground=e.listHoverForeground=e.listHoverBackground=e.listInactiveFocusOutline=e.listInactiveFocusBackground=e.listInactiveSelectionIconForeground=e.listInactiveSelectionForeground=e.listInactiveSelectionBackground=e.listActiveSelectionIconForeground=e.listActiveSelectionForeground=e.listActiveSelectionBackground=e.listFocusAndSelectionOutline=e.listFocusOutline=e.listFocusForeground=e.listFocusBackground=void 0,e.listFocusBackground=(0,E.registerColor)("list.focusBackground",null,c.localize(83,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listFocusForeground=(0,E.registerColor)("list.focusForeground",null,c.localize(84,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listFocusOutline=(0,E.registerColor)("list.focusOutline",{dark:L.focusBorder,light:L.focusBorder,hcDark:L.activeContrastBorder,hcLight:L.activeContrastBorder},c.localize(85,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listFocusAndSelectionOutline=(0,E.registerColor)("list.focusAndSelectionOutline",null,c.localize(86,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),e.listActiveSelectionBackground=(0,E.registerColor)("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:k.Color.fromHex("#0F4A85").transparent(.1)},c.localize(87,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listActiveSelectionForeground=(0,E.registerColor)("list.activeSelectionForeground",{dark:k.Color.white,light:k.Color.white,hcDark:null,hcLight:null},c.localize(88,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listActiveSelectionIconForeground=(0,E.registerColor)("list.activeSelectionIconForeground",null,c.localize(89,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),e.listInactiveSelectionBackground=(0,E.registerColor)("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:k.Color.fromHex("#0F4A85").transparent(.1)},c.localize(90,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e.listInactiveSelectionForeground=(0,E.registerColor)("list.inactiveSelectionForeground",null,c.localize(91,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e.listInactiveSelectionIconForeground=(0,E.registerColor)("list.inactiveSelectionIconForeground",null,c.localize(92,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e.listInactiveFocusBackground=(0,E.registerColor)("list.inactiveFocusBackground",null,c.localize(93,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e.listInactiveFocusOutline=(0,E.registerColor)("list.inactiveFocusOutline",null,c.localize(94,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e.listHoverBackground=(0,E.registerColor)("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:k.Color.white.transparent(.1),hcLight:k.Color.fromHex("#0F4A85").transparent(.1)},c.localize(95,"List/Tree background when hovering over items using the mouse.")),e.listHoverForeground=(0,E.registerColor)("list.hoverForeground",null,c.localize(96,"List/Tree foreground when hovering over items using the mouse.")),e.listDropOverBackground=(0,E.registerColor)("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},c.localize(97,"List/Tree drag and drop background when moving items over other items when using the mouse.")),e.listDropBetweenBackground=(0,E.registerColor)("list.dropBetweenBackground",{dark:L.iconForeground,light:L.iconForeground,hcDark:null,hcLight:null},c.localize(98,"List/Tree drag and drop border color when moving items between items when using the mouse.")),e.listHighlightForeground=(0,E.registerColor)("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:L.focusBorder,hcLight:L.focusBorder},c.localize(99,"List/Tree foreground color of the match highlights when searching inside the list/tree.")),e.listFocusHighlightForeground=(0,E.registerColor)("list.focusHighlightForeground",{dark:e.listHighlightForeground,light:(0,E.ifDefinedThenElse)(e.listActiveSelectionBackground,e.listHighlightForeground,"#BBE7FF"),hcDark:e.listHighlightForeground,hcLight:e.listHighlightForeground},c.localize(100,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),e.listInvalidItemForeground=(0,E.registerColor)("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},c.localize(101,"List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),e.listErrorForeground=(0,E.registerColor)("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},c.localize(102,"Foreground color of list items containing errors.")),e.listWarningForeground=(0,E.registerColor)("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},c.localize(103,"Foreground color of list items containing warnings.")),e.listFilterWidgetBackground=(0,E.registerColor)("listFilterWidget.background",{light:(0,E.darken)(y.editorWidgetBackground,0),dark:(0,E.lighten)(y.editorWidgetBackground,0),hcDark:y.editorWidgetBackground,hcLight:y.editorWidgetBackground},c.localize(104,"Background color of the type filter widget in lists and trees.")),e.listFilterWidgetOutline=(0,E.registerColor)("listFilterWidget.outline",{dark:k.Color.transparent,light:k.Color.transparent,hcDark:"#f38518",hcLight:"#007ACC"},c.localize(105,"Outline color of the type filter widget in lists and trees.")),e.listFilterWidgetNoMatchesOutline=(0,E.registerColor)("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:L.contrastBorder,hcLight:L.contrastBorder},c.localize(106,"Outline color of the type filter widget in lists and trees, when there are no matches.")),e.listFilterWidgetShadow=(0,E.registerColor)("listFilterWidget.shadow",y.widgetShadow,c.localize(107,"Shadow color of the type filter widget in lists and trees.")),e.listFilterMatchHighlight=(0,E.registerColor)("list.filterMatchBackground",{dark:y.editorFindMatchHighlight,light:y.editorFindMatchHighlight,hcDark:null,hcLight:null},c.localize(108,"Background color of the filtered match.")),e.listFilterMatchHighlightBorder=(0,E.registerColor)("list.filterMatchBorder",{dark:y.editorFindMatchHighlightBorder,light:y.editorFindMatchHighlightBorder,hcDark:L.contrastBorder,hcLight:L.activeContrastBorder},c.localize(109,"Border color of the filtered match.")),e.listDeemphasizedForeground=(0,E.registerColor)("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},c.localize(110,"List/Tree foreground color for items that are deemphasized.")),e.treeIndentGuidesStroke=(0,E.registerColor)("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},c.localize(111,"Tree stroke color for the indentation guides.")),e.treeInactiveIndentGuidesStroke=(0,E.registerColor)("tree.inactiveIndentGuidesStroke",(0,E.transparent)(e.treeIndentGuidesStroke,.4),c.localize(112,"Tree stroke color for the indentation guides that are not active.")),e.tableColumnsBorder=(0,E.registerColor)("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},c.localize(113,"Table border color between columns.")),e.tableOddRowsBackgroundColor=(0,E.registerColor)("tree.tableOddRowsBackground",{dark:(0,E.transparent)(L.foreground,.04),light:(0,E.transparent)(L.foreground,.04),hcDark:null,hcLight:null},c.localize(114,"Background color for odd table rows."))}),define(oe[742],re([1,0,3,88,123,407,278]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.menuSeparatorBackground=e.menuSelectionBorder=e.menuSelectionBackground=e.menuSelectionForeground=e.menuBackground=e.menuForeground=e.menuBorder=void 0,e.menuBorder=(0,k.registerColor)("menu.border",{dark:null,light:null,hcDark:E.contrastBorder,hcLight:E.contrastBorder},c.localize(76,"Border color of menus.")),e.menuForeground=(0,k.registerColor)("menu.foreground",L.selectForeground,c.localize(77,"Foreground color of menu items.")),e.menuBackground=(0,k.registerColor)("menu.background",L.selectBackground,c.localize(78,"Background color of menu items.")),e.menuSelectionForeground=(0,k.registerColor)("menu.selectionForeground",y.listActiveSelectionForeground,c.localize(79,"Foreground color of the selected menu item in menus.")),e.menuSelectionBackground=(0,k.registerColor)("menu.selectionBackground",y.listActiveSelectionBackground,c.localize(80,"Background color of the selected menu item in menus.")),e.menuSelectionBorder=(0,k.registerColor)("menu.selectionBorder",{dark:null,light:null,hcDark:E.activeContrastBorder,hcLight:E.activeContrastBorder},c.localize(81,"Border color of the selected menu item in menus.")),e.menuSeparatorBackground=(0,k.registerColor)("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:E.contrastBorder,hcLight:E.contrastBorder},c.localize(82,"Color of a separator menu item in menus."))}),define(oe[408],re([1,0,3,33,88,137,277]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.minimapSliderActiveBackground=e.minimapSliderHoverBackground=e.minimapSliderBackground=e.minimapForegroundOpacity=e.minimapBackground=e.minimapError=e.minimapWarning=e.minimapInfo=e.minimapSelection=e.minimapSelectionOccurrenceHighlight=e.minimapFindMatch=void 0,e.minimapFindMatch=(0,E.registerColor)("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},c.localize(65,"Minimap marker color for find matches."),!0),e.minimapSelectionOccurrenceHighlight=(0,E.registerColor)("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},c.localize(66,"Minimap marker color for repeating editor selections."),!0),e.minimapSelection=(0,E.registerColor)("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},c.localize(67,"Minimap marker color for the editor selection."),!0),e.minimapInfo=(0,E.registerColor)("minimap.infoHighlight",{dark:L.editorInfoForeground,light:L.editorInfoForeground,hcDark:L.editorInfoBorder,hcLight:L.editorInfoBorder},c.localize(68,"Minimap marker color for infos.")),e.minimapWarning=(0,E.registerColor)("minimap.warningHighlight",{dark:L.editorWarningForeground,light:L.editorWarningForeground,hcDark:L.editorWarningBorder,hcLight:L.editorWarningBorder},c.localize(69,"Minimap marker color for warnings.")),e.minimapError=(0,E.registerColor)("minimap.errorHighlight",{dark:new k.Color(new k.RGBA(255,18,18,.7)),light:new k.Color(new k.RGBA(255,18,18,.7)),hcDark:new k.Color(new k.RGBA(255,50,50,1)),hcLight:"#B5200D"},c.localize(70,"Minimap marker color for errors.")),e.minimapBackground=(0,E.registerColor)("minimap.background",null,c.localize(71,"Minimap background color.")),e.minimapForegroundOpacity=(0,E.registerColor)("minimap.foregroundOpacity",k.Color.fromHex("#000f"),c.localize(72,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),e.minimapSliderBackground=(0,E.registerColor)("minimapSlider.background",(0,E.transparent)(y.scrollbarSliderBackground,.5),c.localize(73,"Minimap slider background color.")),e.minimapSliderHoverBackground=(0,E.registerColor)("minimapSlider.hoverBackground",(0,E.transparent)(y.scrollbarSliderHoverBackground,.5),c.localize(74,"Minimap slider background color when hovering.")),e.minimapSliderActiveBackground=(0,E.registerColor)("minimapSlider.activeBackground",(0,E.transparent)(y.scrollbarSliderActiveBackground,.5),c.localize(75,"Minimap slider background color when clicked on."))}),define(oe[743],re([1,0,3,88,123,137,408]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chartsPurple=e.chartsGreen=e.chartsOrange=e.chartsYellow=e.chartsBlue=e.chartsRed=e.chartsLines=e.chartsForeground=void 0,e.chartsForeground=(0,k.registerColor)("charts.foreground",E.foreground,c.localize(253,"The foreground color used in charts.")),e.chartsLines=(0,k.registerColor)("charts.lines",(0,k.transparent)(E.foreground,.5),c.localize(254,"The color used for horizontal lines in charts.")),e.chartsRed=(0,k.registerColor)("charts.red",L.editorErrorForeground,c.localize(255,"The red color used in chart visualizations.")),e.chartsBlue=(0,k.registerColor)("charts.blue",L.editorInfoForeground,c.localize(256,"The blue color used in chart visualizations.")),e.chartsYellow=(0,k.registerColor)("charts.yellow",L.editorWarningForeground,c.localize(257,"The yellow color used in chart visualizations.")),e.chartsOrange=(0,k.registerColor)("charts.orange",y.minimapFindMatch,c.localize(258,"The orange color used in chart visualizations.")),e.chartsGreen=(0,k.registerColor)("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},c.localize(259,"The green color used in chart visualizations.")),e.chartsPurple=(0,k.registerColor)("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},c.localize(260,"The purple color used in chart visualizations."))}),define(oe[744],re([1,0,3,33,88,137,278]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.quickInputListFocusBackground=e.quickInputListFocusIconForeground=e.quickInputListFocusForeground=e._deprecatedQuickInputListFocusBackground=e.pickerGroupBorder=e.pickerGroupForeground=e.quickInputTitleBackground=e.quickInputForeground=e.quickInputBackground=void 0,e.quickInputBackground=(0,E.registerColor)("quickInput.background",L.editorWidgetBackground,c.localize(48,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),e.quickInputForeground=(0,E.registerColor)("quickInput.foreground",L.editorWidgetForeground,c.localize(49,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),e.quickInputTitleBackground=(0,E.registerColor)("quickInputTitle.background",{dark:new k.Color(new k.RGBA(255,255,255,.105)),light:new k.Color(new k.RGBA(0,0,0,.06)),hcDark:"#000000",hcLight:k.Color.white},c.localize(50,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),e.pickerGroupForeground=(0,E.registerColor)("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:k.Color.white,hcLight:"#0F4A85"},c.localize(51,"Quick picker color for grouping labels.")),e.pickerGroupBorder=(0,E.registerColor)("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:k.Color.white,hcLight:"#0F4A85"},c.localize(52,"Quick picker color for grouping borders.")),e._deprecatedQuickInputListFocusBackground=(0,E.registerColor)("quickInput.list.focusBackground",null,"",void 0,c.localize(53,"Please use quickInputList.focusBackground instead")),e.quickInputListFocusForeground=(0,E.registerColor)("quickInputList.focusForeground",y.listActiveSelectionForeground,c.localize(54,"Quick picker foreground color for the focused item.")),e.quickInputListFocusIconForeground=(0,E.registerColor)("quickInputList.focusIconForeground",y.listActiveSelectionIconForeground,c.localize(55,"Quick picker icon foreground color for the focused item.")),e.quickInputListFocusBackground=(0,E.registerColor)("quickInputList.focusBackground",{dark:(0,E.oneOf)(e._deprecatedQuickInputListFocusBackground,y.listActiveSelectionBackground),light:(0,E.oneOf)(e._deprecatedQuickInputListFocusBackground,y.listActiveSelectionBackground),hcDark:null,hcLight:null},c.localize(56,"Quick picker background color for the focused item."))}),define(oe[745],re([1,0,3,88,123,137]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.searchEditorFindMatchBorder=e.searchEditorFindMatch=e.searchResultsInfoForeground=void 0,e.searchResultsInfoForeground=(0,k.registerColor)("search.resultsInfoForeground",{light:E.foreground,dark:(0,k.transparent)(E.foreground,.65),hcDark:E.foreground,hcLight:E.foreground},c.localize(45,"Color of the text in the search viewlet's completion message.")),e.searchEditorFindMatch=(0,k.registerColor)("searchEditor.findMatchBackground",{light:(0,k.transparent)(L.editorFindMatchHighlight,.66),dark:(0,k.transparent)(L.editorFindMatchHighlight,.66),hcDark:L.editorFindMatchHighlight,hcLight:L.editorFindMatchHighlight},c.localize(46,"Color of the Search Editor query matches.")),e.searchEditorFindMatchBorder=(0,k.registerColor)("searchEditor.findMatchBorder",{light:(0,k.transparent)(L.editorFindMatchHighlightBorder,.66),dark:(0,k.transparent)(L.editorFindMatchHighlightBorder,.66),hcDark:L.editorFindMatchHighlightBorder,hcLight:L.editorFindMatchHighlightBorder},c.localize(47,"Border color of the Search Editor query matches."))});var ti=this&&this.__createBinding||(Object.create?function(ae,e,c,k){k===void 0&&(k=c);var E=Object.getOwnPropertyDescriptor(e,c);(!E||("get"in E?!e.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return e[c]}}),Object.defineProperty(ae,k,E)}:function(ae,e,c,k){k===void 0&&(k=c),ae[k]=e[c]}),bt=this&&this.__exportStar||function(ae,e){for(var c in ae)c!=="default"&&!Object.prototype.hasOwnProperty.call(e,c)&&ti(e,ae,c)};define(oe[32],re([1,0,88,123,743,137,407,278,742,408,277,744,745]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),bt(c,e),bt(k,e),bt(E,e),bt(L,e),bt(y,e),bt(f,e),bt(_,e),bt(b,e),bt(p,e),bt(n,e),bt(s,e)}),define(oe[185],re([1,0,5,163,74,14,2,32]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicCssRules=e.GlobalEditorPointerMoveMonitor=e.EditorPointerEventFactory=e.EditorMouseEventFactory=e.EditorMouseEvent=e.CoordinatesRelativeToEditor=e.EditorPagePosition=e.ClientCoordinates=e.PageCoordinates=void 0,e.createEditorPagePosition=s,e.createCoordinatesRelativeToEditor=t;class _{constructor(m,h){this.x=m,this.y=h,this._pageCoordinatesBrand=void 0}toClientCoordinates(m){return new b(this.x-m.scrollX,this.y-m.scrollY)}}e.PageCoordinates=_;class b{constructor(m,h){this.clientX=m,this.clientY=h,this._clientCoordinatesBrand=void 0}toPageCoordinates(m){return new _(this.clientX+m.scrollX,this.clientY+m.scrollY)}}e.ClientCoordinates=b;class p{constructor(m,h,v,C){this.x=m,this.y=h,this.width=v,this.height=C,this._editorPagePositionBrand=void 0}}e.EditorPagePosition=p;class n{constructor(m,h){this.x=m,this.y=h,this._positionRelativeToEditorBrand=void 0}}e.CoordinatesRelativeToEditor=n;function s(d){const m=c.getDomNodePagePosition(d);return new p(m.left,m.top,m.width,m.height)}function t(d,m,h){const v=m.width/d.offsetWidth,C=m.height/d.offsetHeight,w=(h.x-m.x)/v,S=(h.y-m.y)/C;return new n(w,S)}class i extends E.StandardMouseEvent{constructor(m,h,v){super(c.getWindow(v),m),this._editorMouseEventBrand=void 0,this.isFromPointerCapture=h,this.pos=new _(this.posx,this.posy),this.editorPos=s(v),this.relativePos=t(v,this.editorPos,this.pos)}}e.EditorMouseEvent=i;class o{constructor(m){this._editorViewDomNode=m}_create(m){return new i(m,!1,this._editorViewDomNode)}onContextMenu(m,h){return c.addDisposableListener(m,"contextmenu",v=>{h(this._create(v))})}onMouseUp(m,h){return c.addDisposableListener(m,"mouseup",v=>{h(this._create(v))})}onMouseDown(m,h){return c.addDisposableListener(m,c.EventType.MOUSE_DOWN,v=>{h(this._create(v))})}onPointerDown(m,h){return c.addDisposableListener(m,c.EventType.POINTER_DOWN,v=>{h(this._create(v),v.pointerId)})}onMouseLeave(m,h){return c.addDisposableListener(m,c.EventType.MOUSE_LEAVE,v=>{h(this._create(v))})}onMouseMove(m,h){return c.addDisposableListener(m,"mousemove",v=>h(this._create(v)))}}e.EditorMouseEventFactory=o;class g{constructor(m){this._editorViewDomNode=m}_create(m){return new i(m,!1,this._editorViewDomNode)}onPointerUp(m,h){return c.addDisposableListener(m,"pointerup",v=>{h(this._create(v))})}onPointerDown(m,h){return c.addDisposableListener(m,c.EventType.POINTER_DOWN,v=>{h(this._create(v),v.pointerId)})}onPointerLeave(m,h){return c.addDisposableListener(m,c.EventType.POINTER_LEAVE,v=>{h(this._create(v))})}onPointerMove(m,h){return c.addDisposableListener(m,"pointermove",v=>h(this._create(v)))}}e.EditorPointerEventFactory=g;class u extends y.Disposable{constructor(m){super(),this._editorViewDomNode=m,this._globalPointerMoveMonitor=this._register(new k.GlobalPointerMoveMonitor),this._keydownListener=null}startMonitoring(m,h,v,C,w){this._keydownListener=c.addStandardDisposableListener(m.ownerDocument,"keydown",S=>{S.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,S.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(m,h,v,S=>{C(new i(S,!0,this._editorViewDomNode))},S=>{this._keydownListener.dispose(),w(S)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}}e.GlobalEditorPointerMoveMonitor=u;class l{static{this._idPool=0}constructor(m){this._editor=m,this._instanceId=++l._idPool,this._counter=0,this._rules=new Map,this._garbageCollectionScheduler=new L.RunOnceScheduler(()=>this.garbageCollect(),1e3)}createClassNameRef(m){const h=this.getOrCreateRule(m);return h.increaseRefCount(),{className:h.className,dispose:()=>{h.decreaseRefCount(),this._garbageCollectionScheduler.schedule()}}}getOrCreateRule(m){const h=this.computeUniqueKey(m);let v=this._rules.get(h);if(!v){const C=this._counter++;v=new a(h,`dyn-rule-${this._instanceId}-${C}`,c.isInShadowDOM(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0,m),this._rules.set(h,v)}return v}computeUniqueKey(m){return JSON.stringify(m)}garbageCollect(){for(const m of this._rules.values())m.hasReferences()||(this._rules.delete(m.key),m.dispose())}}e.DynamicCssRules=l;class a{constructor(m,h,v,C){this.key=m,this.className=h,this.properties=C,this._referenceCount=0,this._styleElementDisposables=new y.DisposableStore,this._styleElement=c.createStyleSheet(v,void 0,this._styleElementDisposables),this._styleElement.textContent=this.getCssText(this.className,this.properties)}getCssText(m,h){let v=`.${m} {`;for(const C in h){const w=h[C];let S;typeof w=="object"?S=(0,f.asCssVariable)(w.id):S=w;const D=r(C);v+=`
	${D}: ${S};`}return v+=`
}`,v}dispose(){this._styleElementDisposables.dispose(),this._styleElement=void 0}increaseRefCount(){this._referenceCount++}decreaseRefCount(){this._referenceCount--}hasReferences(){return this._referenceCount>0}}function r(d){return d.replace(/(^[A-Z])/,([m])=>m.toLowerCase()).replace(/([A-Z])/g,([m])=>`-${m.toLowerCase()}`)}}),define(oe[746],re([1,0,5,39,163,2,16,11,241,57,37,4,324,374,95,32,23,68,560,127,45,299,500]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Minimap=void 0;const m=140,h=2;class v{constructor(N,O,x){const F=N.options,W=F.get(144),z=F.get(146),q=z.minimap,H=F.get(50),K=F.get(73);this.renderMinimap=q.renderMinimap,this.size=K.size,this.minimapHeightIsEditorHeight=q.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=F.get(106),this.paddingTop=F.get(84).top,this.paddingBottom=F.get(84).bottom,this.showSlider=K.showSlider,this.autohide=K.autohide,this.pixelRatio=W,this.typicalHalfwidthCharacterWidth=H.typicalHalfwidthCharacterWidth,this.lineHeight=F.get(67),this.minimapLeft=q.minimapLeft,this.minimapWidth=q.minimapWidth,this.minimapHeight=z.height,this.canvasInnerWidth=q.minimapCanvasInnerWidth,this.canvasInnerHeight=q.minimapCanvasInnerHeight,this.canvasOuterWidth=q.minimapCanvasOuterWidth,this.canvasOuterHeight=q.minimapCanvasOuterHeight,this.isSampling=q.minimapIsSampling,this.editorHeight=z.height,this.fontScale=q.minimapScale,this.minimapLineHeight=q.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=d.DEFAULT_FONT_FAMILY,this.sectionHeaderFontSize=K.sectionHeaderFontSize*W,this.sectionHeaderLetterSpacing=K.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=v._getSectionHeaderColor(O,x.getColor(1)),this.charRenderer=(0,a.createSingleCallFunction)(()=>l.MinimapCharRendererFactory.create(this.fontScale,H.fontFamily)),this.defaultBackgroundColor=x.getColor(2),this.backgroundColor=v._getMinimapBackground(O,this.defaultBackgroundColor),this.foregroundAlpha=v._getMinimapForegroundOpacity(O)}static _getMinimapBackground(N,O){const x=N.getColor(o.minimapBackground);return x?new s.RGBA8(x.rgba.r,x.rgba.g,x.rgba.b,Math.round(255*x.rgba.a)):O}static _getMinimapForegroundOpacity(N){const O=N.getColor(o.minimapForegroundOpacity);return O?s.RGBA8._clamp(Math.round(255*O.rgba.a)):255}static _getSectionHeaderColor(N,O){const x=N.getColor(o.editorForeground);return x?new s.RGBA8(x.rgba.r,x.rgba.g,x.rgba.b,Math.round(255*x.rgba.a)):O}equals(N){return this.renderMinimap===N.renderMinimap&&this.size===N.size&&this.minimapHeightIsEditorHeight===N.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===N.scrollBeyondLastLine&&this.paddingTop===N.paddingTop&&this.paddingBottom===N.paddingBottom&&this.showSlider===N.showSlider&&this.autohide===N.autohide&&this.pixelRatio===N.pixelRatio&&this.typicalHalfwidthCharacterWidth===N.typicalHalfwidthCharacterWidth&&this.lineHeight===N.lineHeight&&this.minimapLeft===N.minimapLeft&&this.minimapWidth===N.minimapWidth&&this.minimapHeight===N.minimapHeight&&this.canvasInnerWidth===N.canvasInnerWidth&&this.canvasInnerHeight===N.canvasInnerHeight&&this.canvasOuterWidth===N.canvasOuterWidth&&this.canvasOuterHeight===N.canvasOuterHeight&&this.isSampling===N.isSampling&&this.editorHeight===N.editorHeight&&this.fontScale===N.fontScale&&this.minimapLineHeight===N.minimapLineHeight&&this.minimapCharWidth===N.minimapCharWidth&&this.sectionHeaderFontSize===N.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===N.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(N.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(N.backgroundColor)&&this.foregroundAlpha===N.foregroundAlpha}}class C{constructor(N,O,x,F,W,z,q,H,K){this.scrollTop=N,this.scrollHeight=O,this.sliderNeeded=x,this._computedSliderRatio=F,this.sliderTop=W,this.sliderHeight=z,this.topPaddingLineCount=q,this.startLineNumber=H,this.endLineNumber=K}getDesiredScrollTopFromDelta(N){return Math.round(this.scrollTop+N/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(N){return Math.round((N-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(N){const O=Math.max(this.startLineNumber,N.startLineNumber),x=Math.min(this.endLineNumber,N.endLineNumber);return O>x?null:[O,x]}getYForLineNumber(N,O){return+(N-this.startLineNumber+this.topPaddingLineCount)*O}static create(N,O,x,F,W,z,q,H,K,U,Y){const Q=N.pixelRatio,X=N.minimapLineHeight,G=Math.floor(N.canvasInnerHeight/X),P=N.lineHeight;if(N.minimapHeightIsEditorHeight){let ie=H*N.lineHeight+N.paddingTop+N.paddingBottom;N.scrollBeyondLastLine&&(ie+=Math.max(0,W-N.lineHeight-N.paddingBottom));const ne=Math.max(1,Math.floor(W*W/ie)),J=Math.max(0,N.minimapHeight-ne),B=J/(U-W),j=K*B,V=J>0,$=Math.floor(N.canvasInnerHeight/N.minimapLineHeight),Z=Math.floor(N.paddingTop/N.lineHeight);return new C(K,U,V,B,j,ne,Z,1,Math.min(q,$))}let te;if(z&&x!==q){const ie=x-O+1;te=Math.floor(ie*X/Q)}else{const ie=W/P;te=Math.floor(ie*X/Q)}const se=Math.floor(N.paddingTop/P);let ue=Math.floor(N.paddingBottom/P);if(N.scrollBeyondLastLine){const ie=W/P;ue=Math.max(ue,ie-1)}let ge;if(ue>0){const ie=W/P;ge=(se+q+ue-ie-1)*X/Q}else ge=Math.max(0,(se+q)*X/Q-te);ge=Math.min(N.minimapHeight-te,ge);const pe=ge/(U-W),ce=K*pe;if(G>=se+q+ue){const ie=ge>0;return new C(K,U,ie,pe,ce,te,se,1,q)}else{let ie;O>1?ie=O+se:ie=Math.max(1,K/P);let ne,J=Math.max(1,Math.floor(ie-ce*Q/X));J<se?(ne=se-J+1,J=1):(ne=0,J=Math.max(1,J-se)),Y&&Y.scrollHeight===U&&(Y.scrollTop>K&&(J=Math.min(J,Y.startLineNumber),ne=Math.max(ne,Y.topPaddingLineCount)),Y.scrollTop<K&&(J=Math.max(J,Y.startLineNumber),ne=Math.min(ne,Y.topPaddingLineCount)));const B=Math.min(q,J-ne+G-1),j=(K-F)/P;let V;return K>=N.paddingTop?V=(O-J+ne+j)*X/Q:V=K/N.paddingTop*(ne+j)*X/Q,new C(K,U,!0,pe,V,te,ne,J,B)}}}class w{static{this.INVALID=new w(-1)}constructor(N){this.dy=N}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}}class S{constructor(N,O,x){this.renderedLayout=N,this._imageData=O,this._renderedLines=new _.RenderedLinesCollection(()=>w.INVALID),this._renderedLines._set(N.startLineNumber,x)}linesEquals(N){if(!this.scrollEquals(N))return!1;const x=this._renderedLines._get().lines;for(let F=0,W=x.length;F<W;F++)if(x[F].dy===-1)return!1;return!0}scrollEquals(N){return this.renderedLayout.startLineNumber===N.startLineNumber&&this.renderedLayout.endLineNumber===N.endLineNumber}_get(){const N=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:N.rendLineNumberStart,lines:N.lines}}onLinesChanged(N,O){return this._renderedLines.onLinesChanged(N,O)}onLinesDeleted(N,O){this._renderedLines.onLinesDeleted(N,O)}onLinesInserted(N,O){this._renderedLines.onLinesInserted(N,O)}onTokensChanged(N){return this._renderedLines.onTokensChanged(N)}}class D{constructor(N,O,x,F){this._backgroundFillData=D._createBackgroundFillData(O,x,F),this._buffers=[N.createImageData(O,x),N.createImageData(O,x)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;const N=this._buffers[this._lastUsedBuffer];return N.data.set(this._backgroundFillData),N}static _createBackgroundFillData(N,O,x){const F=x.r,W=x.g,z=x.b,q=x.a,H=new Uint8ClampedArray(N*O*4);let K=0;for(let U=0;U<O;U++)for(let Y=0;Y<N;Y++)H[K]=F,H[K+1]=W,H[K+2]=z,H[K+3]=q,K+=4;return H}}class I{static compute(N,O,x){if(N.renderMinimap===0||!N.isSampling)return[null,[]];const{minimapLineCount:F}=p.EditorLayoutInfoComputer.computeContainedMinimapLineCount({viewLineCount:O,scrollBeyondLastLine:N.scrollBeyondLastLine,paddingTop:N.paddingTop,paddingBottom:N.paddingBottom,height:N.editorHeight,lineHeight:N.lineHeight,pixelRatio:N.pixelRatio}),W=O/F,z=W/2;if(!x||x.minimapLines.length===0){const te=[];if(te[0]=1,F>1){for(let se=0,ue=F-1;se<ue;se++)te[se]=Math.round(se*W+z);te[F-1]=O}return[new I(W,te),[]]}const q=x.minimapLines,H=q.length,K=[];let U=0,Y=0,Q=1;const X=10;let G=[],P=null;for(let te=0;te<F;te++){const se=Math.max(Q,Math.round(te*W)),ue=Math.max(se,Math.round((te+1)*W));for(;U<H&&q[U]<se;){if(G.length<X){const pe=U+1+Y;P&&P.type==="deleted"&&P._oldIndex===U-1?P.deleteToLineNumber++:(P={type:"deleted",_oldIndex:U,deleteFromLineNumber:pe,deleteToLineNumber:pe},G.push(P)),Y--}U++}let ge;if(U<H&&q[U]<=ue)ge=q[U],U++;else if(te===0?ge=1:te+1===F?ge=O:ge=Math.round(te*W+z),G.length<X){const pe=U+1+Y;P&&P.type==="inserted"&&P._i===te-1?P.insertToLineNumber++:(P={type:"inserted",_i:te,insertFromLineNumber:pe,insertToLineNumber:pe},G.push(P)),Y++}K[te]=ge,Q=ge}if(G.length<X)for(;U<H;){const te=U+1+Y;P&&P.type==="deleted"&&P._oldIndex===U-1?P.deleteToLineNumber++:(P={type:"deleted",_oldIndex:U,deleteFromLineNumber:te,deleteToLineNumber:te},G.push(P)),Y--,U++}else G=[{type:"flush"}];return[new I(W,K),G]}constructor(N,O){this.samplingRatio=N,this.minimapLines=O}modelLineToMinimapLine(N){return Math.min(this.minimapLines.length,Math.max(1,Math.round(N/this.samplingRatio)))}modelLineRangeToMinimapLineRange(N,O){let x=this.modelLineToMinimapLine(N)-1;for(;x>0&&this.minimapLines[x-1]>=N;)x--;let F=this.modelLineToMinimapLine(O)-1;for(;F+1<this.minimapLines.length&&this.minimapLines[F+1]<=O;)F++;if(x===F){const W=this.minimapLines[x];if(W<N||W>O)return null}return[x+1,F+1]}decorationLineRangeToMinimapLineRange(N,O){let x=this.modelLineToMinimapLine(N),F=this.modelLineToMinimapLine(O);return N!==O&&F===x&&(F===this.minimapLines.length?x>1&&x--:F++),[x,F]}onLinesDeleted(N){const O=N.toLineNumber-N.fromLineNumber+1;let x=this.minimapLines.length,F=0;for(let W=this.minimapLines.length-1;W>=0&&!(this.minimapLines[W]<N.fromLineNumber);W--)this.minimapLines[W]<=N.toLineNumber?(this.minimapLines[W]=Math.max(1,N.fromLineNumber-1),x=Math.min(x,W),F=Math.max(F,W)):this.minimapLines[W]-=O;return[x,F]}onLinesInserted(N){const O=N.toLineNumber-N.fromLineNumber+1;for(let x=this.minimapLines.length-1;x>=0&&!(this.minimapLines[x]<N.fromLineNumber);x--)this.minimapLines[x]+=O}}class T extends b.ViewPart{constructor(N){super(N),this._sectionHeaderCache=new r.LRUCache(10,1.5),this.tokensColorTracker=t.MinimapTokensColorTracker.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new v(this._context.configuration,this._context.theme,this.tokensColorTracker);const[O]=I.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=O,this._shouldCheckSampling=!1,this._actual=new M(N.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){const N=new v(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(N)?!1:(this.options=N,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(N){return this._onOptionsMaybeChanged()}onCursorStateChanged(N){return this._selections=N.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(N){return N.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(N){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(N){if(this._samplingState){const O=this._samplingState.modelLineRangeToMinimapLineRange(N.fromLineNumber,N.fromLineNumber+N.count-1);return O?this._actual.onLinesChanged(O[0],O[1]-O[0]+1):!1}else return this._actual.onLinesChanged(N.fromLineNumber,N.count)}onLinesDeleted(N){if(this._samplingState){const[O,x]=this._samplingState.onLinesDeleted(N);return O<=x&&this._actual.onLinesChanged(O+1,x-O+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(N.fromLineNumber,N.toLineNumber)}onLinesInserted(N){return this._samplingState?(this._samplingState.onLinesInserted(N),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(N.fromLineNumber,N.toLineNumber)}onScrollChanged(N){return this._actual.onScrollChanged()}onThemeChanged(N){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(N){if(this._samplingState){const O=[];for(const x of N.ranges){const F=this._samplingState.modelLineRangeToMinimapLineRange(x.fromLineNumber,x.toLineNumber);F&&O.push({fromLineNumber:F[0],toLineNumber:F[1]})}return O.length?this._actual.onTokensChanged(O):!1}else return this._actual.onTokensChanged(N.ranges)}onTokensColorsChanged(N){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(N){return this._actual.onZonesChanged()}prepareRender(N){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(N){let O=N.visibleRange.startLineNumber,x=N.visibleRange.endLineNumber;this._samplingState&&(O=this._samplingState.modelLineToMinimapLine(O),x=this._samplingState.modelLineToMinimapLine(x));const F={viewportContainsWhitespaceGaps:N.viewportData.whitespaceViewportData.length>0,scrollWidth:N.scrollWidth,scrollHeight:N.scrollHeight,viewportStartLineNumber:O,viewportEndLineNumber:x,viewportStartLineNumberVerticalOffset:N.getVerticalOffsetForLineNumber(O),scrollTop:N.scrollTop,scrollLeft:N.scrollLeft,viewportWidth:N.viewportWidth,viewportHeight:N.viewportHeight};this._actual.render(F)}_recreateLineSampling(){this._minimapSelections=null;const N=!!this._samplingState,[O,x]=I.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=O,N&&this._samplingState)for(const F of x)switch(F.type){case"deleted":this._actual.onLinesDeleted(F.deleteFromLineNumber,F.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(F.insertFromLineNumber,F.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(N){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[N-1]):this._context.viewModel.getLineContent(N)}getLineMaxColumn(N){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[N-1]):this._context.viewModel.getLineMaxColumn(N)}getMinimapLinesRenderingData(N,O,x){if(this._samplingState){const F=[];for(let W=0,z=O-N+1;W<z;W++)x[W]?F[W]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[N+W-1]):F[W]=null;return F}return this._context.viewModel.getMinimapLinesRenderingData(N,O,x).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(const N of this._selections){const[O,x]=this._samplingState.decorationLineRangeToMinimapLineRange(N.startLineNumber,N.endLineNumber);this._minimapSelections.push(new g.Selection(O,N.startColumn,x,N.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(N,O){const x=this._getMinimapDecorationsInViewport(N,O).filter(F=>!F.options.minimap?.sectionHeaderStyle);if(this._samplingState){const F=[];for(const W of x){if(!W.options.minimap)continue;const z=W.range,q=this._samplingState.modelLineToMinimapLine(z.startLineNumber),H=this._samplingState.modelLineToMinimapLine(z.endLineNumber);F.push(new i.ViewModelDecoration(new n.Range(q,z.startColumn,H,z.endColumn),W.options))}return F}return x}getSectionHeaderDecorationsInViewport(N,O){const x=this.options.minimapLineHeight,W=this.options.sectionHeaderFontSize/x;return N=Math.floor(Math.max(1,N-W)),this._getMinimapDecorationsInViewport(N,O).filter(z=>!!z.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(N,O){let x;if(this._samplingState){const F=this._samplingState.minimapLines[N-1],W=this._samplingState.minimapLines[O-1];x=new n.Range(F,1,W,this._context.viewModel.getLineMaxColumn(W))}else x=new n.Range(N,1,O,this._context.viewModel.getLineMaxColumn(O));return this._context.viewModel.getMinimapDecorationsInRange(x)}getSectionHeaderText(N,O){const x=N.options.minimap?.sectionHeaderText;if(!x)return null;const F=this._sectionHeaderCache.get(x);if(F)return F;const W=O(x);return this._sectionHeaderCache.set(x,W),W}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(N){this._samplingState&&(N=this._samplingState.minimapLines[N-1]),this._context.viewModel.revealRange("mouse",!1,new n.Range(N,1,N,1),1,0)}setScrollTop(N){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:N},1)}}e.Minimap=T;class M extends L.Disposable{constructor(N,O){super(),this._renderDecorations=!1,this._gestureInProgress=!1,this._theme=N,this._model=O,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(o.minimapSelection),this._domNode=(0,k.createFastDomNode)(document.createElement("div")),b.PartFingerprints.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=(0,k.createFastDomNode)(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=(0,k.createFastDomNode)(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=(0,k.createFastDomNode)(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=(0,k.createFastDomNode)(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=(0,k.createFastDomNode)(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=c.addStandardDisposableListener(this._domNode.domNode,c.EventType.POINTER_DOWN,x=>{if(x.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(x.button===0&&this._lastRenderData){const K=c.getDomNodePagePosition(this._slider.domNode),U=K.top+K.height/2;this._startSliderDragging(x,U,this._lastRenderData.renderedLayout)}return}const W=this._model.options.minimapLineHeight,z=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*x.offsetY;let H=Math.floor(z/W)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;H=Math.min(H,this._model.getLineCount()),this._model.revealLineNumber(H)}),this._sliderPointerMoveMonitor=new E.GlobalPointerMoveMonitor,this._sliderPointerDownListener=c.addStandardDisposableListener(this._slider.domNode,c.EventType.POINTER_DOWN,x=>{x.preventDefault(),x.stopPropagation(),x.button===0&&this._lastRenderData&&this._startSliderDragging(x,x.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=u.Gesture.addTarget(this._domNode.domNode),this._sliderTouchStartListener=c.addDisposableListener(this._domNode.domNode,u.EventType.Start,x=>{x.preventDefault(),x.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(x))},{passive:!1}),this._sliderTouchMoveListener=c.addDisposableListener(this._domNode.domNode,u.EventType.Change,x=>{x.preventDefault(),x.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(x)},{passive:!1}),this._sliderTouchEndListener=c.addStandardDisposableListener(this._domNode.domNode,u.EventType.End,x=>{x.preventDefault(),x.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(N,O,x){if(!N.target||!(N.target instanceof Element))return;const F=N.pageX;this._slider.toggleClassName("active",!0);const W=(z,q)=>{const H=c.getDomNodePagePosition(this._domNode.domNode),K=Math.min(Math.abs(q-F),Math.abs(q-H.left),Math.abs(q-H.left-H.width));if(y.isWindows&&K>m){this._model.setScrollTop(x.scrollTop);return}const U=z-O;this._model.setScrollTop(x.getDesiredScrollTopFromDelta(U))};N.pageY!==O&&W(N.pageY,F),this._sliderPointerMoveMonitor.startMonitoring(N.target,N.pointerId,N.buttons,z=>W(z.pageY,z.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(N){const O=this._domNode.domNode.getBoundingClientRect().top,x=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(N.pageY-O);this._model.setScrollTop(x)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){const N=["minimap"];return this._model.options.showSlider==="always"?N.push("slider-always"):N.push("slider-mouseover"),this._model.options.autohide&&N.push("autohide"),N.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new D(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(N,O){return this._lastRenderData?this._lastRenderData.onLinesChanged(N,O):!1}onLinesDeleted(N,O){return this._lastRenderData?.onLinesDeleted(N,O),!0}onLinesInserted(N,O){return this._lastRenderData?.onLinesInserted(N,O),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(o.minimapSelection),this._renderDecorations=!0,!0}onTokensChanged(N){return this._lastRenderData?this._lastRenderData.onTokensChanged(N):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(N){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}N.scrollLeft+N.viewportWidth>=N.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");const x=C.create(this._model.options,N.viewportStartLineNumber,N.viewportEndLineNumber,N.viewportStartLineNumberVerticalOffset,N.viewportHeight,N.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),N.scrollTop,N.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(x.sliderNeeded?"block":"none"),this._slider.setTop(x.sliderTop),this._slider.setHeight(x.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(x.sliderHeight),this.renderDecorations(x),this._lastRenderData=this.renderLines(x)}renderDecorations(N){if(this._renderDecorations){this._renderDecorations=!1;const O=this._model.getSelections();O.sort(n.Range.compareRangesUsingStarts);const x=this._model.getMinimapDecorationsInViewport(N.startLineNumber,N.endLineNumber);x.sort((Q,X)=>(Q.options.zIndex||0)-(X.options.zIndex||0));const{canvasInnerWidth:F,canvasInnerHeight:W}=this._model.options,z=this._model.options.minimapLineHeight,q=this._model.options.minimapCharWidth,H=this._model.getOptions().tabSize,K=this._decorationsCanvas.domNode.getContext("2d");K.clearRect(0,0,F,W);const U=new A(N.startLineNumber,N.endLineNumber,!1);this._renderSelectionLineHighlights(K,O,U,N,z),this._renderDecorationsLineHighlights(K,x,U,N,z);const Y=new A(N.startLineNumber,N.endLineNumber,null);this._renderSelectionsHighlights(K,O,Y,N,z,H,q,F),this._renderDecorationsHighlights(K,x,Y,N,z,H,q,F),this._renderSectionHeaders(N)}}_renderSelectionLineHighlights(N,O,x,F,W){if(!this._selectionColor||this._selectionColor.isTransparent())return;N.fillStyle=this._selectionColor.transparent(.5).toString();let z=0,q=0;for(const H of O){const K=F.intersectWithViewport(H);if(!K)continue;const[U,Y]=K;for(let G=U;G<=Y;G++)x.set(G,!0);const Q=F.getYForLineNumber(U,W),X=F.getYForLineNumber(Y,W);q>=Q||(q>z&&N.fillRect(p.MINIMAP_GUTTER_WIDTH,z,N.canvas.width,q-z),z=Q),q=X}q>z&&N.fillRect(p.MINIMAP_GUTTER_WIDTH,z,N.canvas.width,q-z)}_renderDecorationsLineHighlights(N,O,x,F,W){const z=new Map;for(let q=O.length-1;q>=0;q--){const H=O[q],K=H.options.minimap;if(!K||K.position!==1)continue;const U=F.intersectWithViewport(H.range);if(!U)continue;const[Y,Q]=U,X=K.getColor(this._theme.value);if(!X||X.isTransparent())continue;let G=z.get(X.toString());G||(G=X.transparent(.5).toString(),z.set(X.toString(),G)),N.fillStyle=G;for(let P=Y;P<=Q;P++){if(x.has(P))continue;x.set(P,!0);const te=F.getYForLineNumber(Y,W);N.fillRect(p.MINIMAP_GUTTER_WIDTH,te,N.canvas.width,W)}}}_renderSelectionsHighlights(N,O,x,F,W,z,q,H){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(const K of O){const U=F.intersectWithViewport(K);if(!U)continue;const[Y,Q]=U;for(let X=Y;X<=Q;X++)this.renderDecorationOnLine(N,x,K,this._selectionColor,F,X,W,W,z,q,H)}}_renderDecorationsHighlights(N,O,x,F,W,z,q,H){for(const K of O){const U=K.options.minimap;if(!U)continue;const Y=F.intersectWithViewport(K.range);if(!Y)continue;const[Q,X]=Y,G=U.getColor(this._theme.value);if(!(!G||G.isTransparent()))for(let P=Q;P<=X;P++)switch(U.position){case 1:this.renderDecorationOnLine(N,x,K.range,G,F,P,W,W,z,q,H);continue;case 2:{const te=F.getYForLineNumber(P,W);this.renderDecoration(N,G,2,te,h,W);continue}}}}renderDecorationOnLine(N,O,x,F,W,z,q,H,K,U,Y){const Q=W.getYForLineNumber(z,H);if(Q+q<0||Q>this._model.options.canvasInnerHeight)return;const{startLineNumber:X,endLineNumber:G}=x,P=X===z?x.startColumn:1,te=G===z?x.endColumn:this._model.getLineMaxColumn(z),se=this.getXOffsetForPosition(O,z,P,K,U,Y),ue=this.getXOffsetForPosition(O,z,te,K,U,Y);this.renderDecoration(N,F,se,Q,ue-se,q)}getXOffsetForPosition(N,O,x,F,W,z){if(x===1)return p.MINIMAP_GUTTER_WIDTH;if((x-1)*W>=z)return z;let H=N.get(O);if(!H){const K=this._model.getLineContent(O);H=[p.MINIMAP_GUTTER_WIDTH];let U=p.MINIMAP_GUTTER_WIDTH;for(let Y=1;Y<K.length+1;Y++){const Q=K.charCodeAt(Y-1),X=Q===9?F*W:f.isFullWidthCharacter(Q)?2*W:W,G=U+X;if(G>=z){H[Y]=z;break}H[Y]=G,U=G}N.set(O,H)}return x-1<H.length?H[x-1]:z}renderDecoration(N,O,x,F,W,z){N.fillStyle=O&&O.toString()||"",N.fillRect(x,F,W,z)}_renderSectionHeaders(N){const O=this._model.options.minimapLineHeight,x=this._model.options.sectionHeaderFontSize,F=this._model.options.sectionHeaderLetterSpacing,W=x*1.5,{canvasInnerWidth:z}=this._model.options,q=this._model.options.backgroundColor,H=`rgb(${q.r} ${q.g} ${q.b} / .7)`,K=this._model.options.sectionHeaderFontColor,U=`rgb(${K.r} ${K.g} ${K.b})`,Y=U,Q=this._decorationsCanvas.domNode.getContext("2d");Q.letterSpacing=F+"px",Q.font="500 "+x+"px "+this._model.options.sectionHeaderFontFamily,Q.strokeStyle=Y,Q.lineWidth=.2;const X=this._model.getSectionHeaderDecorationsInViewport(N.startLineNumber,N.endLineNumber);X.sort((P,te)=>P.range.startLineNumber-te.range.startLineNumber);const G=M._fitSectionHeader.bind(null,Q,z-p.MINIMAP_GUTTER_WIDTH);for(const P of X){const te=N.getYForLineNumber(P.range.startLineNumber,O)+x,se=te-x,ue=se+2,ge=this._model.getSectionHeaderText(P,G);M._renderSectionLabel(Q,ge,P.options.minimap?.sectionHeaderStyle===2,H,U,z,se,W,te,ue)}}static _fitSectionHeader(N,O,x){if(!x)return x;const F="\u2026",W=N.measureText(x).width,z=N.measureText(F).width;if(W<=O||W<=z)return x;const q=x.length,H=W/x.length,K=Math.floor((O-z)/H)-1;let U=Math.ceil(K/2);for(;U>0&&/\s/.test(x[U-1]);)--U;return x.substring(0,U)+F+x.substring(q-(K-U))}static _renderSectionLabel(N,O,x,F,W,z,q,H,K,U){O&&(N.fillStyle=F,N.fillRect(0,q,z,H),N.fillStyle=W,N.fillText(O,p.MINIMAP_GUTTER_WIDTH,K)),x&&(N.beginPath(),N.moveTo(0,U),N.lineTo(z,U),N.closePath(),N.stroke())}renderLines(N){const O=N.startLineNumber,x=N.endLineNumber,F=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(N)){const le=this._lastRenderData._get();return new S(N,le.imageData,le.lines)}const W=this._getBuffer();if(!W)return null;const[z,q,H]=M._renderUntouchedLines(W,N.topPaddingLineCount,O,x,F,this._lastRenderData),K=this._model.getMinimapLinesRenderingData(O,x,H),U=this._model.getOptions().tabSize,Y=this._model.options.defaultBackgroundColor,Q=this._model.options.backgroundColor,X=this._model.options.foregroundAlpha,G=this._model.tokensColorTracker,P=G.backgroundIsLight(),te=this._model.options.renderMinimap,se=this._model.options.charRenderer(),ue=this._model.options.fontScale,ge=this._model.options.minimapCharWidth,ce=(te===1?2:3)*ue,ie=F>ce?Math.floor((F-ce)/2):0,ne=Q.a/255,J=new s.RGBA8(Math.round((Q.r-Y.r)*ne+Y.r),Math.round((Q.g-Y.g)*ne+Y.g),Math.round((Q.b-Y.b)*ne+Y.b),255);let B=N.topPaddingLineCount*F;const j=[];for(let le=0,de=x-O+1;le<de;le++)H[le]&&M._renderLine(W,J,Q.a,P,te,ge,G,X,se,B,ie,U,K[le],ue,F),j[le]=new w(B),B+=F;const V=z===-1?0:z,Z=(q===-1?W.height:q)-V;return this._canvas.domNode.getContext("2d").putImageData(W,0,0,0,V,W.width,Z),new S(N,W,j)}static _renderUntouchedLines(N,O,x,F,W,z){const q=[];if(!z){for(let B=0,j=F-x+1;B<j;B++)q[B]=!0;return[-1,-1,q]}const H=z._get(),K=H.imageData.data,U=H.rendLineNumberStart,Y=H.lines,Q=Y.length,X=N.width,G=N.data,P=(F-x+1)*W*X*4;let te=-1,se=-1,ue=-1,ge=-1,pe=-1,ce=-1,ie=O*W;for(let B=x;B<=F;B++){const j=B-x,V=B-U,$=V>=0&&V<Q?Y[V].dy:-1;if($===-1){q[j]=!0,ie+=W;continue}const Z=$*X*4,ee=($+W)*X*4,le=ie*X*4,de=(ie+W)*X*4;ge===Z&&ce===le?(ge=ee,ce=de):(ue!==-1&&(G.set(K.subarray(ue,ge),pe),te===-1&&ue===0&&ue===pe&&(te=ge),se===-1&&ge===P&&ue===pe&&(se=ue)),ue=Z,ge=ee,pe=le,ce=de),q[j]=!1,ie+=W}ue!==-1&&(G.set(K.subarray(ue,ge),pe),te===-1&&ue===0&&ue===pe&&(te=ge),se===-1&&ge===P&&ue===pe&&(se=ue));const ne=te===-1?-1:te/(X*4),J=se===-1?-1:se/(X*4);return[ne,J,q]}static _renderLine(N,O,x,F,W,z,q,H,K,U,Y,Q,X,G,P){const te=X.content,se=X.tokens,ue=N.width-z,ge=P===1;let pe=p.MINIMAP_GUTTER_WIDTH,ce=0,ie=0;for(let ne=0,J=se.getCount();ne<J;ne++){const B=se.getEndOffset(ne),j=se.getForeground(ne),V=q.getColor(j);for(;ce<B;ce++){if(pe>ue)return;const $=te.charCodeAt(ce);if($===9){const Z=Q-(ce+ie)%Q;ie+=Z-1,pe+=Z*z}else if($===32)pe+=z;else{const Z=f.isFullWidthCharacter($)?2:1;for(let ee=0;ee<Z;ee++)if(W===2?K.blockRenderChar(N,pe,U+Y,V,H,O,x,ge):K.renderChar(N,pe,U+Y,$,V,H,O,x,G,F,ge),pe+=z,pe>ue)return}}}}}class A{constructor(N,O,x){this._startLineNumber=N,this._endLineNumber=O,this._defaultValue=x,this._values=[];for(let F=0,W=this._endLineNumber-this._startLineNumber+1;F<W;F++)this._values[F]=x}has(N){return this.get(N)!==this._defaultValue}set(N,O){N<this._startLineNumber||N>this._endLineNumber||(this._values[N-this._startLineNumber]=O)}get(N){return N<this._startLineNumber||N>this._endLineNumber?this._defaultValue:this._values[N-this._startLineNumber]}}}),define(oe[747],re([1,0,3,32]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiDiffEditorBorder=e.multiDiffEditorBackground=e.multiDiffEditorHeaderBackground=void 0,e.multiDiffEditorHeaderBackground=(0,k.registerColor)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,c.localize)(987,"The background color of the diff editor's header")),e.multiDiffEditorBackground=(0,k.registerColor)("multiDiffEditor.background","editorBackground",(0,c.localize)(988,"The background color of the multi file diff editor")),e.multiDiffEditorBorder=(0,k.registerColor)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,c.localize)(989,"The border color of the multi file diff editor"))}),define(oe[279],re([1,0,3,32,542]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SYMBOL_ICON_VARIABLE_FOREGROUND=e.SYMBOL_ICON_UNIT_FOREGROUND=e.SYMBOL_ICON_TYPEPARAMETER_FOREGROUND=e.SYMBOL_ICON_TEXT_FOREGROUND=e.SYMBOL_ICON_STRUCT_FOREGROUND=e.SYMBOL_ICON_STRING_FOREGROUND=e.SYMBOL_ICON_SNIPPET_FOREGROUND=e.SYMBOL_ICON_REFERENCE_FOREGROUND=e.SYMBOL_ICON_PROPERTY_FOREGROUND=e.SYMBOL_ICON_PACKAGE_FOREGROUND=e.SYMBOL_ICON_OPERATOR_FOREGROUND=e.SYMBOL_ICON_OBJECT_FOREGROUND=e.SYMBOL_ICON_NUMBER_FOREGROUND=e.SYMBOL_ICON_NULL_FOREGROUND=e.SYMBOL_ICON_NAMESPACE_FOREGROUND=e.SYMBOL_ICON_MODULE_FOREGROUND=e.SYMBOL_ICON_METHOD_FOREGROUND=e.SYMBOL_ICON_KEYWORD_FOREGROUND=e.SYMBOL_ICON_KEY_FOREGROUND=e.SYMBOL_ICON_INTERFACE_FOREGROUND=e.SYMBOL_ICON_FUNCTION_FOREGROUND=e.SYMBOL_ICON_FOLDER_FOREGROUND=e.SYMBOL_ICON_FILE_FOREGROUND=e.SYMBOL_ICON_FIELD_FOREGROUND=e.SYMBOL_ICON_EVENT_FOREGROUND=e.SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND=e.SYMBOL_ICON_ENUMERATOR_FOREGROUND=e.SYMBOL_ICON_CONSTRUCTOR_FOREGROUND=e.SYMBOL_ICON_CONSTANT_FOREGROUND=e.SYMBOL_ICON_COLOR_FOREGROUND=e.SYMBOL_ICON_CLASS_FOREGROUND=e.SYMBOL_ICON_BOOLEAN_FOREGROUND=e.SYMBOL_ICON_ARRAY_FOREGROUND=void 0,e.SYMBOL_ICON_ARRAY_FOREGROUND=(0,k.registerColor)("symbolIcon.arrayForeground",k.foreground,(0,c.localize)(325,"The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_BOOLEAN_FOREGROUND=(0,k.registerColor)("symbolIcon.booleanForeground",k.foreground,(0,c.localize)(326,"The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_CLASS_FOREGROUND=(0,k.registerColor)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,c.localize)(327,"The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_COLOR_FOREGROUND=(0,k.registerColor)("symbolIcon.colorForeground",k.foreground,(0,c.localize)(328,"The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_CONSTANT_FOREGROUND=(0,k.registerColor)("symbolIcon.constantForeground",k.foreground,(0,c.localize)(329,"The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_CONSTRUCTOR_FOREGROUND=(0,k.registerColor)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,c.localize)(330,"The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_ENUMERATOR_FOREGROUND=(0,k.registerColor)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,c.localize)(331,"The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND=(0,k.registerColor)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,c.localize)(332,"The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_EVENT_FOREGROUND=(0,k.registerColor)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,c.localize)(333,"The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_FIELD_FOREGROUND=(0,k.registerColor)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,c.localize)(334,"The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_FILE_FOREGROUND=(0,k.registerColor)("symbolIcon.fileForeground",k.foreground,(0,c.localize)(335,"The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_FOLDER_FOREGROUND=(0,k.registerColor)("symbolIcon.folderForeground",k.foreground,(0,c.localize)(336,"The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_FUNCTION_FOREGROUND=(0,k.registerColor)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,c.localize)(337,"The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_INTERFACE_FOREGROUND=(0,k.registerColor)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,c.localize)(338,"The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_KEY_FOREGROUND=(0,k.registerColor)("symbolIcon.keyForeground",k.foreground,(0,c.localize)(339,"The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_KEYWORD_FOREGROUND=(0,k.registerColor)("symbolIcon.keywordForeground",k.foreground,(0,c.localize)(340,"The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_METHOD_FOREGROUND=(0,k.registerColor)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,c.localize)(341,"The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_MODULE_FOREGROUND=(0,k.registerColor)("symbolIcon.moduleForeground",k.foreground,(0,c.localize)(342,"The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_NAMESPACE_FOREGROUND=(0,k.registerColor)("symbolIcon.namespaceForeground",k.foreground,(0,c.localize)(343,"The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_NULL_FOREGROUND=(0,k.registerColor)("symbolIcon.nullForeground",k.foreground,(0,c.localize)(344,"The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_NUMBER_FOREGROUND=(0,k.registerColor)("symbolIcon.numberForeground",k.foreground,(0,c.localize)(345,"The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_OBJECT_FOREGROUND=(0,k.registerColor)("symbolIcon.objectForeground",k.foreground,(0,c.localize)(346,"The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_OPERATOR_FOREGROUND=(0,k.registerColor)("symbolIcon.operatorForeground",k.foreground,(0,c.localize)(347,"The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_PACKAGE_FOREGROUND=(0,k.registerColor)("symbolIcon.packageForeground",k.foreground,(0,c.localize)(348,"The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_PROPERTY_FOREGROUND=(0,k.registerColor)("symbolIcon.propertyForeground",k.foreground,(0,c.localize)(349,"The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_REFERENCE_FOREGROUND=(0,k.registerColor)("symbolIcon.referenceForeground",k.foreground,(0,c.localize)(350,"The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_SNIPPET_FOREGROUND=(0,k.registerColor)("symbolIcon.snippetForeground",k.foreground,(0,c.localize)(351,"The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_STRING_FOREGROUND=(0,k.registerColor)("symbolIcon.stringForeground",k.foreground,(0,c.localize)(352,"The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_STRUCT_FOREGROUND=(0,k.registerColor)("symbolIcon.structForeground",k.foreground,(0,c.localize)(353,"The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_TEXT_FOREGROUND=(0,k.registerColor)("symbolIcon.textForeground",k.foreground,(0,c.localize)(354,"The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_TYPEPARAMETER_FOREGROUND=(0,k.registerColor)("symbolIcon.typeParameterForeground",k.foreground,(0,c.localize)(355,"The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_UNIT_FOREGROUND=(0,k.registerColor)("symbolIcon.unitForeground",k.foreground,(0,c.localize)(356,"The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e.SYMBOL_ICON_VARIABLE_FOREGROUND=(0,k.registerColor)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,c.localize)(357,"The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."))}),define(oe[748],re([1,0,26,133,3,90,196,279]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toMenuItems=_;const y=Object.freeze({kind:L.HierarchicalKind.Empty,title:(0,E.localize)(911,"More Actions...")}),f=Object.freeze([{kind:k.CodeActionKind.QuickFix,title:(0,E.localize)(912,"Quick Fix")},{kind:k.CodeActionKind.RefactorExtract,title:(0,E.localize)(913,"Extract"),icon:c.Codicon.wrench},{kind:k.CodeActionKind.RefactorInline,title:(0,E.localize)(914,"Inline"),icon:c.Codicon.wrench},{kind:k.CodeActionKind.RefactorRewrite,title:(0,E.localize)(915,"Rewrite"),icon:c.Codicon.wrench},{kind:k.CodeActionKind.RefactorMove,title:(0,E.localize)(916,"Move"),icon:c.Codicon.wrench},{kind:k.CodeActionKind.SurroundWith,title:(0,E.localize)(917,"Surround With"),icon:c.Codicon.surroundWith},{kind:k.CodeActionKind.Source,title:(0,E.localize)(918,"Source Action"),icon:c.Codicon.symbolFile},y]);function _(b,p,n){if(!p)return b.map(i=>({kind:"action",item:i,group:y,disabled:!!i.action.disabled,label:i.action.disabled||i.action.title,canPreview:!!i.action.edit?.edits.length}));const s=f.map(i=>({group:i,actions:[]}));for(const i of b){const o=i.action.kind?new L.HierarchicalKind(i.action.kind):L.HierarchicalKind.None;for(const g of s)if(g.group.kind.contains(o)){g.actions.push(i);break}}const t=[];for(const i of s)if(i.actions.length){t.push({kind:"header",group:i.group});for(const o of i.actions){const g=i.group;t.push({kind:"action",item:o,group:o.action.isAI?{title:g.title,kind:g.kind,icon:c.Codicon.sparkle}:g,label:o.action.title,disabled:!!o.action.disabled,keybinding:n(o.action)})}}return t}}),define(oe[109],re([1,0,32,33]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultMenuStyles=e.defaultSelectBoxStyles=e.defaultListStyles=e.defaultBreadcrumbsWidgetStyles=e.defaultCountBadgeStyles=e.defaultFindWidgetStyles=e.defaultInputBoxStyles=e.defaultDialogStyles=e.defaultCheckboxStyles=e.defaultRadioStyles=e.defaultToggleStyles=e.defaultProgressBarStyles=e.defaultButtonStyles=e.defaultKeybindingLabelStyles=void 0,e.getListStyles=L;function E(y,f){const _={...f};for(const b in y){const p=y[b];_[b]=p!==void 0?(0,c.asCssVariable)(p):void 0}return _}e.defaultKeybindingLabelStyles={keybindingLabelBackground:(0,c.asCssVariable)(c.keybindingLabelBackground),keybindingLabelForeground:(0,c.asCssVariable)(c.keybindingLabelForeground),keybindingLabelBorder:(0,c.asCssVariable)(c.keybindingLabelBorder),keybindingLabelBottomBorder:(0,c.asCssVariable)(c.keybindingLabelBottomBorder),keybindingLabelShadow:(0,c.asCssVariable)(c.widgetShadow)},e.defaultButtonStyles={buttonForeground:(0,c.asCssVariable)(c.buttonForeground),buttonSeparator:(0,c.asCssVariable)(c.buttonSeparator),buttonBackground:(0,c.asCssVariable)(c.buttonBackground),buttonHoverBackground:(0,c.asCssVariable)(c.buttonHoverBackground),buttonSecondaryForeground:(0,c.asCssVariable)(c.buttonSecondaryForeground),buttonSecondaryBackground:(0,c.asCssVariable)(c.buttonSecondaryBackground),buttonSecondaryHoverBackground:(0,c.asCssVariable)(c.buttonSecondaryHoverBackground),buttonBorder:(0,c.asCssVariable)(c.buttonBorder)},e.defaultProgressBarStyles={progressBarBackground:(0,c.asCssVariable)(c.progressBarBackground)},e.defaultToggleStyles={inputActiveOptionBorder:(0,c.asCssVariable)(c.inputActiveOptionBorder),inputActiveOptionForeground:(0,c.asCssVariable)(c.inputActiveOptionForeground),inputActiveOptionBackground:(0,c.asCssVariable)(c.inputActiveOptionBackground)},e.defaultRadioStyles={activeForeground:(0,c.asCssVariable)(c.radioActiveForeground),activeBackground:(0,c.asCssVariable)(c.radioActiveBackground),activeBorder:(0,c.asCssVariable)(c.radioActiveBorder),inactiveForeground:(0,c.asCssVariable)(c.radioInactiveForeground),inactiveBackground:(0,c.asCssVariable)(c.radioInactiveBackground),inactiveBorder:(0,c.asCssVariable)(c.radioInactiveBorder),inactiveHoverBackground:(0,c.asCssVariable)(c.radioInactiveHoverBackground)},e.defaultCheckboxStyles={checkboxBackground:(0,c.asCssVariable)(c.checkboxBackground),checkboxBorder:(0,c.asCssVariable)(c.checkboxBorder),checkboxForeground:(0,c.asCssVariable)(c.checkboxForeground)},e.defaultDialogStyles={dialogBackground:(0,c.asCssVariable)(c.editorWidgetBackground),dialogForeground:(0,c.asCssVariable)(c.editorWidgetForeground),dialogShadow:(0,c.asCssVariable)(c.widgetShadow),dialogBorder:(0,c.asCssVariable)(c.contrastBorder),errorIconForeground:(0,c.asCssVariable)(c.problemsErrorIconForeground),warningIconForeground:(0,c.asCssVariable)(c.problemsWarningIconForeground),infoIconForeground:(0,c.asCssVariable)(c.problemsInfoIconForeground),textLinkForeground:(0,c.asCssVariable)(c.textLinkForeground)},e.defaultInputBoxStyles={inputBackground:(0,c.asCssVariable)(c.inputBackground),inputForeground:(0,c.asCssVariable)(c.inputForeground),inputBorder:(0,c.asCssVariable)(c.inputBorder),inputValidationInfoBorder:(0,c.asCssVariable)(c.inputValidationInfoBorder),inputValidationInfoBackground:(0,c.asCssVariable)(c.inputValidationInfoBackground),inputValidationInfoForeground:(0,c.asCssVariable)(c.inputValidationInfoForeground),inputValidationWarningBorder:(0,c.asCssVariable)(c.inputValidationWarningBorder),inputValidationWarningBackground:(0,c.asCssVariable)(c.inputValidationWarningBackground),inputValidationWarningForeground:(0,c.asCssVariable)(c.inputValidationWarningForeground),inputValidationErrorBorder:(0,c.asCssVariable)(c.inputValidationErrorBorder),inputValidationErrorBackground:(0,c.asCssVariable)(c.inputValidationErrorBackground),inputValidationErrorForeground:(0,c.asCssVariable)(c.inputValidationErrorForeground)},e.defaultFindWidgetStyles={listFilterWidgetBackground:(0,c.asCssVariable)(c.listFilterWidgetBackground),listFilterWidgetOutline:(0,c.asCssVariable)(c.listFilterWidgetOutline),listFilterWidgetNoMatchesOutline:(0,c.asCssVariable)(c.listFilterWidgetNoMatchesOutline),listFilterWidgetShadow:(0,c.asCssVariable)(c.listFilterWidgetShadow),inputBoxStyles:e.defaultInputBoxStyles,toggleStyles:e.defaultToggleStyles},e.defaultCountBadgeStyles={badgeBackground:(0,c.asCssVariable)(c.badgeBackground),badgeForeground:(0,c.asCssVariable)(c.badgeForeground),badgeBorder:(0,c.asCssVariable)(c.contrastBorder)},e.defaultBreadcrumbsWidgetStyles={breadcrumbsBackground:(0,c.asCssVariable)(c.breadcrumbsBackground),breadcrumbsForeground:(0,c.asCssVariable)(c.breadcrumbsForeground),breadcrumbsHoverForeground:(0,c.asCssVariable)(c.breadcrumbsFocusForeground),breadcrumbsFocusForeground:(0,c.asCssVariable)(c.breadcrumbsFocusForeground),breadcrumbsFocusAndSelectionForeground:(0,c.asCssVariable)(c.breadcrumbsActiveSelectionForeground)},e.defaultListStyles={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:(0,c.asCssVariable)(c.listFocusBackground),listFocusForeground:(0,c.asCssVariable)(c.listFocusForeground),listFocusOutline:(0,c.asCssVariable)(c.listFocusOutline),listActiveSelectionBackground:(0,c.asCssVariable)(c.listActiveSelectionBackground),listActiveSelectionForeground:(0,c.asCssVariable)(c.listActiveSelectionForeground),listActiveSelectionIconForeground:(0,c.asCssVariable)(c.listActiveSelectionIconForeground),listFocusAndSelectionOutline:(0,c.asCssVariable)(c.listFocusAndSelectionOutline),listFocusAndSelectionBackground:(0,c.asCssVariable)(c.listActiveSelectionBackground),listFocusAndSelectionForeground:(0,c.asCssVariable)(c.listActiveSelectionForeground),listInactiveSelectionBackground:(0,c.asCssVariable)(c.listInactiveSelectionBackground),listInactiveSelectionIconForeground:(0,c.asCssVariable)(c.listInactiveSelectionIconForeground),listInactiveSelectionForeground:(0,c.asCssVariable)(c.listInactiveSelectionForeground),listInactiveFocusBackground:(0,c.asCssVariable)(c.listInactiveFocusBackground),listInactiveFocusOutline:(0,c.asCssVariable)(c.listInactiveFocusOutline),listHoverBackground:(0,c.asCssVariable)(c.listHoverBackground),listHoverForeground:(0,c.asCssVariable)(c.listHoverForeground),listDropOverBackground:(0,c.asCssVariable)(c.listDropOverBackground),listDropBetweenBackground:(0,c.asCssVariable)(c.listDropBetweenBackground),listSelectionOutline:(0,c.asCssVariable)(c.activeContrastBorder),listHoverOutline:(0,c.asCssVariable)(c.activeContrastBorder),treeIndentGuidesStroke:(0,c.asCssVariable)(c.treeIndentGuidesStroke),treeInactiveIndentGuidesStroke:(0,c.asCssVariable)(c.treeInactiveIndentGuidesStroke),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:(0,c.asCssVariable)(c.scrollbarShadow),tableColumnsBorder:(0,c.asCssVariable)(c.tableColumnsBorder),tableOddRowsBackgroundColor:(0,c.asCssVariable)(c.tableOddRowsBackgroundColor)};function L(y){return E(y,e.defaultListStyles)}e.defaultSelectBoxStyles={selectBackground:(0,c.asCssVariable)(c.selectBackground),selectListBackground:(0,c.asCssVariable)(c.selectListBackground),selectForeground:(0,c.asCssVariable)(c.selectForeground),decoratorRightForeground:(0,c.asCssVariable)(c.pickerGroupForeground),selectBorder:(0,c.asCssVariable)(c.selectBorder),focusBorder:(0,c.asCssVariable)(c.focusBorder),listFocusBackground:(0,c.asCssVariable)(c.quickInputListFocusBackground),listInactiveSelectionIconForeground:(0,c.asCssVariable)(c.quickInputListFocusIconForeground),listFocusForeground:(0,c.asCssVariable)(c.quickInputListFocusForeground),listFocusOutline:(0,c.asCssVariableWithDefault)(c.activeContrastBorder,k.Color.transparent.toString()),listHoverBackground:(0,c.asCssVariable)(c.listHoverBackground),listHoverForeground:(0,c.asCssVariable)(c.listHoverForeground),listHoverOutline:(0,c.asCssVariable)(c.activeContrastBorder),selectListBorder:(0,c.asCssVariable)(c.editorWidgetBorder),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},e.defaultMenuStyles={shadowColor:(0,c.asCssVariable)(c.widgetShadow),borderColor:(0,c.asCssVariable)(c.menuBorder),foregroundColor:(0,c.asCssVariable)(c.menuForeground),backgroundColor:(0,c.asCssVariable)(c.menuBackground),selectionForegroundColor:(0,c.asCssVariable)(c.menuSelectionForeground),selectionBackgroundColor:(0,c.asCssVariable)(c.menuSelectionBackground),selectionBorderColor:(0,c.asCssVariable)(c.menuSelectionBorder),separatorColor:(0,c.asCssVariable)(c.menuSeparatorBackground),scrollbarShadow:(0,c.asCssVariable)(c.scrollbarShadow),scrollbarSliderBackground:(0,c.asCssVariable)(c.scrollbarSliderBackground),scrollbarSliderHoverBackground:(0,c.asCssVariable)(c.scrollbarSliderHoverBackground),scrollbarSliderActiveBackground:(0,c.asCssVariable)(c.scrollbarSliderActiveBackground)}}),define(oe[749],re([1,0,5,312,307,232,82,2,51,78,3,7,31,181,109,177]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityProvider=e.OneReferenceRenderer=e.FileReferencesRenderer=e.IdentityProvider=e.StringRepresentationProvider=e.Delegate=e.DataSource=void 0;let u=class{constructor(S){this._resolverService=S}hasChildren(S){return S instanceof o.ReferencesModel||S instanceof o.FileReferences}getChildren(S){if(S instanceof o.ReferencesModel)return S.groups;if(S instanceof o.FileReferences)return S.resolve(this._resolverService).then(D=>D.children);throw new Error("bad tree")}};e.DataSource=u,e.DataSource=u=De([he(0,b.ITextModelService)],u);class l{getHeight(){return 23}getTemplateId(S){return S instanceof o.FileReferences?m.id:v.id}}e.Delegate=l;let a=class{constructor(S){this._keybindingService=S}getKeyboardNavigationLabel(S){if(S instanceof o.OneReference){const D=S.parent.getPreview(S)?.preview(S.range);if(D)return D.value}return(0,_.basename)(S.uri)}};e.StringRepresentationProvider=a,e.StringRepresentationProvider=a=De([he(0,s.IKeybindingService)],a);class r{getId(S){return S instanceof o.OneReference?S.id:S.uri}}e.IdentityProvider=r;let d=class extends f.Disposable{constructor(S,D){super(),this._labelService=D;const I=document.createElement("div");I.classList.add("reference-file"),this.file=this._register(new L.IconLabel(I,{supportHighlights:!0})),this.badge=new k.CountBadge(c.append(I,c.$(".count")),{},i.defaultCountBadgeStyles),S.appendChild(I)}set(S,D){const I=(0,_.dirname)(S.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(S.uri),this._labelService.getUriLabel(I,{relative:!0}),{title:this._labelService.getUriLabel(S.uri),matches:D});const T=S.children.length;this.badge.setCount(T),T>1?this.badge.setTitleFormat((0,p.localize)(10,"{0} references",T)):this.badge.setTitleFormat((0,p.localize)(11,"{0} reference",T))}};d=De([he(1,t.ILabelService)],d);let m=class{static{g=this}static{this.id="FileReferencesRenderer"}constructor(S){this._instantiationService=S,this.templateId=g.id}renderTemplate(S){return this._instantiationService.createInstance(d,S)}renderElement(S,D,I){I.set(S.element,(0,y.createMatches)(S.filterData))}disposeTemplate(S){S.dispose()}};e.FileReferencesRenderer=m,e.FileReferencesRenderer=m=g=De([he(0,n.IInstantiationService)],m);class h extends f.Disposable{constructor(S){super(),this.label=this._register(new E.HighlightedLabel(S))}set(S,D){const I=S.parent.getPreview(S)?.preview(S.range);if(!I||!I.value)this.label.set(`${(0,_.basename)(S.uri)}:${S.range.startLineNumber+1}:${S.range.startColumn+1}`);else{const{value:T,highlight:M}=I;D&&!y.FuzzyScore.isDefault(D)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(T,(0,y.createMatches)(D))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(T,[M]))}}}class v{constructor(){this.templateId=v.id}static{this.id="OneReferenceRenderer"}renderTemplate(S){return new h(S)}renderElement(S,D,I){I.set(S.element,S.filterData)}disposeTemplate(S){S.dispose()}}e.OneReferenceRenderer=v;class C{getWidgetAriaLabel(){return(0,p.localize)(12,"References")}getAriaLabel(S){return S.ariaMessage}}e.AccessibilityProvider=C}),define(oe[750],re([1,0,5,208,112,18,26,2,16,30,3,58,31,109,32,317]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionList=e.previewSelectedActionCommand=e.acceptSelectedActionCommand=void 0,e.acceptSelectedActionCommand="acceptSelectedCodeAction",e.previewSelectedActionCommand="previewSelectedCodeAction";class o{get templateId(){return"header"}renderTemplate(h){h.classList.add("group-header");const v=document.createElement("span");return h.append(v),{container:h,text:v}}renderElement(h,v,C){C.text.textContent=h.group?.title??""}disposeTemplate(h){}}let g=class{get templateId(){return"action"}constructor(h,v){this._supportsPreview=h,this._keybindingService=v}renderTemplate(h){h.classList.add(this.templateId);const v=document.createElement("div");v.className="icon",h.append(v);const C=document.createElement("span");C.className="title",h.append(C);const w=new k.KeybindingLabel(h,_.OS);return{container:h,icon:v,text:C,keybinding:w}}renderElement(h,v,C){if(h.group?.icon?(C.icon.className=b.ThemeIcon.asClassName(h.group.icon),h.group.icon.color&&(C.icon.style.color=(0,i.asCssVariable)(h.group.icon.color.id))):(C.icon.className=b.ThemeIcon.asClassName(y.Codicon.lightBulb),C.icon.style.color="var(--vscode-editorLightBulb-foreground)"),!h.item||!h.label)return;C.text.textContent=d(h.label),C.keybinding.set(h.keybinding),c.setVisibility(!!h.keybinding,C.keybinding.element);const w=this._keybindingService.lookupKeybinding(e.acceptSelectedActionCommand)?.getLabel(),S=this._keybindingService.lookupKeybinding(e.previewSelectedActionCommand)?.getLabel();C.container.classList.toggle("option-disabled",h.disabled),h.disabled?C.container.title=h.label:w&&S?this._supportsPreview&&h.canPreview?C.container.title=(0,p.localize)(1181,"{0} to Apply, {1} to Preview",w,S):C.container.title=(0,p.localize)(1182,"{0} to Apply",w):C.container.title=""}disposeTemplate(h){h.keybinding.dispose()}};g=De([he(1,s.IKeybindingService)],g);class u extends UIEvent{constructor(){super("acceptSelectedAction")}}class l extends UIEvent{constructor(){super("previewSelectedAction")}}function a(m){if(m.kind==="action")return m.label}let r=class extends f.Disposable{constructor(h,v,C,w,S,D){super(),this._delegate=w,this._contextViewService=S,this._keybindingService=D,this._actionLineHeight=24,this._headerLineHeight=26,this.cts=this._register(new L.CancellationTokenSource),this.domNode=document.createElement("div"),this.domNode.classList.add("actionList");const I={getHeight:T=>T.kind==="header"?this._headerLineHeight:this._actionLineHeight,getTemplateId:T=>T.kind};this._list=this._register(new E.List(h,this.domNode,I,[new g(v,this._keybindingService),new o],{keyboardSupport:!1,typeNavigationEnabled:!0,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:a},accessibilityProvider:{getAriaLabel:T=>{if(T.kind==="action"){let M=T.label?d(T?.label):"";return T.disabled&&(M=(0,p.localize)(1183,"{0}, Disabled Reason: {1}",M,T.disabled)),M}return null},getWidgetAriaLabel:()=>(0,p.localize)(1184,"Action Widget"),getRole:T=>T.kind==="action"?"option":"separator",getWidgetRole:()=>"listbox"}})),this._list.style(t.defaultListStyles),this._register(this._list.onMouseClick(T=>this.onListClick(T))),this._register(this._list.onMouseOver(T=>this.onListHover(T))),this._register(this._list.onDidChangeFocus(()=>this.onFocus())),this._register(this._list.onDidChangeSelection(T=>this.onListSelection(T))),this._allMenuItems=C,this._list.splice(0,this._list.length,this._allMenuItems),this._list.length&&this.focusNext()}focusCondition(h){return!h.disabled&&h.kind==="action"}hide(h){this._delegate.onHide(h),this.cts.cancel(),this._contextViewService.hideContextView()}layout(h){const v=this._allMenuItems.filter(T=>T.kind==="header").length,w=this._allMenuItems.length*this._actionLineHeight+v*this._headerLineHeight-v*this._actionLineHeight;this._list.layout(w);let S=h;if(this._allMenuItems.length>=50)S=380;else{const T=this._allMenuItems.map((M,A)=>{const R=this.domNode.ownerDocument.getElementById(this._list.getElementID(A));if(R){R.style.width="auto";const N=R.getBoundingClientRect().width;return R.style.width="",N}return 0});S=Math.max(...T,h)}const I=Math.min(w,this.domNode.ownerDocument.body.clientHeight*.7);return this._list.layout(I,S),this.domNode.style.height=`${I}px`,this._list.domFocus(),S}focusPrevious(){this._list.focusPrevious(1,!0,void 0,this.focusCondition)}focusNext(){this._list.focusNext(1,!0,void 0,this.focusCondition)}acceptSelected(h){const v=this._list.getFocus();if(v.length===0)return;const C=v[0],w=this._list.element(C);if(!this.focusCondition(w))return;const S=h?new l:new u;this._list.setSelection([C],S)}onListSelection(h){if(!h.elements.length)return;const v=h.elements[0];v.item&&this.focusCondition(v)?this._delegate.onSelect(v.item,h.browserEvent instanceof l):this._list.setSelection([])}onFocus(){const h=this._list.getFocus();if(h.length===0)return;const v=h[0],C=this._list.element(v);this._delegate.onFocus?.(C.item)}async onListHover(h){const v=h.element;if(v&&v.item&&this.focusCondition(v)){if(this._delegate.onHover&&!v.disabled&&v.kind==="action"){const C=await this._delegate.onHover(v.item,this.cts.token);v.canPreview=C?C.canPreview:void 0}h.index&&this._list.splice(h.index,1,[v])}this._list.setFocus(typeof h.index=="number"?[h.index]:[])}onListClick(h){h.element&&this.focusCondition(h.element)&&this._list.setFocus([])}};e.ActionList=r,e.ActionList=r=De([he(4,n.IContextViewService),he(5,s.IKeybindingService)],r);function d(m){return m.replace(/\r\n|\r|\n/g," ")}}),define(oe[751],re([1,0,5,87,2,3,750,29,12,58,49,7,32,317]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IActionWidgetService=void 0,(0,s.registerColor)("actionBar.toggledBackground",s.inputActiveOptionBackground,(0,L.localize)(1174,"Background color for toggled action items in action bar."));const t={Visible:new _.RawContextKey("codeActionMenuVisible",!1,(0,L.localize)(1175,"Whether the action widget list is visible"))};e.IActionWidgetService=(0,n.createDecorator)("actionWidgetService");let i=class extends E.Disposable{get isVisible(){return t.Visible.getValue(this._contextKeyService)||!1}constructor(u,l,a){super(),this._contextViewService=u,this._contextKeyService=l,this._instantiationService=a,this._list=this._register(new E.MutableDisposable)}show(u,l,a,r,d,m,h){const v=t.Visible.bindTo(this._contextKeyService),C=this._instantiationService.createInstance(y.ActionList,u,l,a,r);this._contextViewService.showContextView({getAnchor:()=>d,render:w=>(v.set(!0),this._renderWidget(w,C,h??[])),onHide:w=>{v.reset(),this._onWidgetClosed(w)}},m,!1)}acceptSelected(u){this._list.value?.acceptSelected(u)}focusPrevious(){this._list?.value?.focusPrevious()}focusNext(){this._list?.value?.focusNext()}hide(u){this._list.value?.hide(u),this._list.clear()}_renderWidget(u,l,a){const r=document.createElement("div");if(r.classList.add("action-widget"),u.appendChild(r),this._list.value=l,this._list.value)r.appendChild(this._list.value.domNode);else throw new Error("List has no value");const d=new E.DisposableStore,m=document.createElement("div"),h=u.appendChild(m);h.classList.add("context-view-block"),d.add(c.addDisposableListener(h,c.EventType.MOUSE_DOWN,I=>I.stopPropagation()));const v=document.createElement("div"),C=u.appendChild(v);C.classList.add("context-view-pointerBlock"),d.add(c.addDisposableListener(C,c.EventType.POINTER_MOVE,()=>C.remove())),d.add(c.addDisposableListener(C,c.EventType.MOUSE_DOWN,()=>C.remove()));let w=0;if(a.length){const I=this._createActionBar(".action-widget-action-bar",a);I&&(r.appendChild(I.getContainer().parentElement),d.add(I),w=I.getContainer().offsetWidth)}const S=this._list.value?.layout(w);r.style.width=`${S}px`;const D=d.add(c.trackFocus(u));return d.add(D.onDidBlur(()=>this.hide(!0))),d}_createActionBar(u,l){if(!l.length)return;const a=c.$(u),r=new k.ActionBar(a);return r.push(l,{icon:!1,label:!0}),r}_onWidgetClosed(u){this._list.value?.hide(u)}};i=De([he(0,b.IContextViewService),he(1,_.IContextKeyService),he(2,n.IInstantiationService)],i),(0,p.registerSingleton)(e.IActionWidgetService,i,1);const o=1100;(0,f.registerAction2)(class extends f.Action2{constructor(){super({id:"hideCodeActionWidget",title:(0,L.localize2)(1176,"Hide action widget"),precondition:t.Visible,keybinding:{weight:o,primary:9,secondary:[1033]}})}run(g){g.get(e.IActionWidgetService).hide(!0)}}),(0,f.registerAction2)(class extends f.Action2{constructor(){super({id:"selectPrevCodeAction",title:(0,L.localize2)(1177,"Select previous action"),precondition:t.Visible,keybinding:{weight:o,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})}run(g){const u=g.get(e.IActionWidgetService);u instanceof i&&u.focusPrevious()}}),(0,f.registerAction2)(class extends f.Action2{constructor(){super({id:"selectNextCodeAction",title:(0,L.localize2)(1178,"Select next action"),precondition:t.Visible,keybinding:{weight:o,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})}run(g){const u=g.get(e.IActionWidgetService);u instanceof i&&u.focusNext()}}),(0,f.registerAction2)(class extends f.Action2{constructor(){super({id:y.acceptSelectedActionCommand,title:(0,L.localize2)(1179,"Accept selected action"),precondition:t.Visible,keybinding:{weight:o,primary:3,secondary:[2137]}})}run(g){const u=g.get(e.IActionWidgetService);u instanceof i&&u.acceptSelected()}}),(0,f.registerAction2)(class extends f.Action2{constructor(){super({id:y.previewSelectedActionCommand,title:(0,L.localize2)(1180,"Preview selected action"),precondition:t.Visible,keybinding:{weight:o,primary:2051}})}run(g){const u=g.get(e.IActionWidgetService);u instanceof i&&u.acceptSelected(!0)}})}),define(oe[752],re([1,0,5,74,653,41,8,2,109]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenuHandler=void 0;class b{constructor(n,s,t,i){this.contextViewService=n,this.telemetryService=s,this.notificationService=t,this.keybindingService=i,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(n){this.options=n}showContextMenu(n){const s=n.getActions();if(!s.length)return;this.focusToReturn=(0,c.getActiveElement)();let t;const i=(0,c.isHTMLElement)(n.domForShadowRoot)?n.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>n.getAnchor(),canRelayout:!1,anchorAlignment:n.anchorAlignment,anchorAxisAlignment:n.anchorAxisAlignment,render:o=>{this.lastContainer=o;const g=n.getMenuClassName?n.getMenuClassName():"";g&&(o.className+=" "+g),this.options.blockMouse&&(this.block=o.appendChild((0,c.$)(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=(0,c.addDisposableListener)(this.block,c.EventType.MOUSE_DOWN,r=>r.stopPropagation()));const u=new f.DisposableStore,l=n.actionRunner||new L.ActionRunner;l.onWillRun(r=>this.onActionRun(r,!n.skipTelemetry),this,u),l.onDidRun(this.onDidActionRun,this,u),t=new E.Menu(o,s,{actionViewItemProvider:n.getActionViewItem,context:n.getActionsContext?n.getActionsContext():null,actionRunner:l,getKeyBinding:n.getKeyBinding?n.getKeyBinding:r=>this.keybindingService.lookupKeybinding(r.id)},_.defaultMenuStyles),t.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,u),t.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,u);const a=(0,c.getWindow)(o);return u.add((0,c.addDisposableListener)(a,c.EventType.BLUR,()=>this.contextViewService.hideContextView(!0))),u.add((0,c.addDisposableListener)(a,c.EventType.MOUSE_DOWN,r=>{if(r.defaultPrevented)return;const d=new k.StandardMouseEvent(a,r);let m=d.target;if(!d.rightButton){for(;m;){if(m===o)return;m=m.parentElement}this.contextViewService.hideContextView(!0)}})),(0,f.combinedDisposable)(u,t)},focus:()=>{t?.focus(!!n.autoSelectFirstItem)},onHide:o=>{n.onHide?.(!!o),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&((0,c.getActiveElement)()===this.lastContainer||(0,c.isAncestor)((0,c.getActiveElement)(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},i,!!i)}onActionRun(n,s){s&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:n.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(n){n.error&&!(0,y.isCancellationError)(n.error)&&this.notificationService.error(n.error)}}e.ContextMenuHandler=b}),define(oe[214],re([1,0,5,479,112,484,175,656,655,366,6,2,3,27,108,12,178,58,7,31,38,109]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkbenchCompressibleAsyncDataTree=e.WorkbenchAsyncDataTree=e.WorkbenchDataTree=e.WorkbenchCompressibleObjectTree=e.WorkbenchObjectTree=e.WorkbenchTable=e.WorkbenchPagedList=e.WorkbenchList=e.WorkbenchTreeFindOpen=e.WorkbenchTreeElementHasChild=e.WorkbenchTreeElementCanExpand=e.WorkbenchTreeElementHasParent=e.WorkbenchTreeElementCanCollapse=e.WorkbenchListSupportsFind=e.WorkbenchListSelectionNavigation=e.WorkbenchListMultiSelection=e.WorkbenchListDoubleSelection=e.WorkbenchListHasSelectionOrFocus=e.WorkbenchListFocusContextKey=e.WorkbenchListSupportsMultiSelectContextKey=e.WorkbenchTreeStickyScrollFocused=e.RawWorkbenchListFocusContextKey=e.WorkbenchListScrollAtBottomContextKey=e.WorkbenchListScrollAtTopContextKey=e.RawWorkbenchListScrollAtBoundaryContextKey=e.ListService=e.IListService=void 0,e.IListService=(0,l.createDecorator)("listService");class m{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new n.DisposableStore,this.lists=[],this._lastFocusedWidget=void 0,this._hasCreatedStyleController=!1}setLastFocusedList(de){de!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=de,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(de,me){if(this._hasCreatedStyleController||(this._hasCreatedStyleController=!0,new E.DefaultStyleController((0,c.createStyleSheet)(),"").style(d.defaultListStyles)),this.lists.some(ve=>ve.widget===de))throw new Error("Cannot register the same widget multiple times");const be={widget:de,extraContextKeys:me};return this.lists.push(be),(0,c.isActiveElement)(de.getHTMLElement())&&this.setLastFocusedList(de),(0,n.combinedDisposable)(de.onDidFocus(()=>this.setLastFocusedList(de)),(0,n.toDisposable)(()=>this.lists.splice(this.lists.indexOf(be),1)),de.onDidDispose(()=>{this.lists=this.lists.filter(ve=>ve!==be),this._lastFocusedWidget===de&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}e.ListService=m,e.RawWorkbenchListScrollAtBoundaryContextKey=new o.RawContextKey("listScrollAtBoundary","none"),e.WorkbenchListScrollAtTopContextKey=o.ContextKeyExpr.or(e.RawWorkbenchListScrollAtBoundaryContextKey.isEqualTo("top"),e.RawWorkbenchListScrollAtBoundaryContextKey.isEqualTo("both")),e.WorkbenchListScrollAtBottomContextKey=o.ContextKeyExpr.or(e.RawWorkbenchListScrollAtBoundaryContextKey.isEqualTo("bottom"),e.RawWorkbenchListScrollAtBoundaryContextKey.isEqualTo("both")),e.RawWorkbenchListFocusContextKey=new o.RawContextKey("listFocus",!0),e.WorkbenchTreeStickyScrollFocused=new o.RawContextKey("treestickyScrollFocused",!1),e.WorkbenchListSupportsMultiSelectContextKey=new o.RawContextKey("listSupportsMultiselect",!0),e.WorkbenchListFocusContextKey=o.ContextKeyExpr.and(e.RawWorkbenchListFocusContextKey,o.ContextKeyExpr.not(g.InputFocusedContextKey),e.WorkbenchTreeStickyScrollFocused.negate()),e.WorkbenchListHasSelectionOrFocus=new o.RawContextKey("listHasSelectionOrFocus",!1),e.WorkbenchListDoubleSelection=new o.RawContextKey("listDoubleSelection",!1),e.WorkbenchListMultiSelection=new o.RawContextKey("listMultiSelection",!1),e.WorkbenchListSelectionNavigation=new o.RawContextKey("listSelectionNavigation",!1),e.WorkbenchListSupportsFind=new o.RawContextKey("listSupportsFind",!0),e.WorkbenchTreeElementCanCollapse=new o.RawContextKey("treeElementCanCollapse",!1),e.WorkbenchTreeElementHasParent=new o.RawContextKey("treeElementHasParent",!1),e.WorkbenchTreeElementCanExpand=new o.RawContextKey("treeElementCanExpand",!1),e.WorkbenchTreeElementHasChild=new o.RawContextKey("treeElementHasChild",!1),e.WorkbenchTreeFindOpen=new o.RawContextKey("treeFindOpen",!1);const h="listTypeNavigationMode",v="listAutomaticKeyboardNavigation";function C(le,de){const me=le.createScoped(de.getHTMLElement());return e.RawWorkbenchListFocusContextKey.bindTo(me),me}function w(le,de){const me=e.RawWorkbenchListScrollAtBoundaryContextKey.bindTo(le),be=()=>{const ve=de.scrollTop===0,Le=de.scrollHeight-de.renderHeight-de.scrollTop<1;ve&&Le?me.set("both"):ve?me.set("top"):Le?me.set("bottom"):me.set("none")};return be(),de.onDidScroll(be)}const S="workbench.list.multiSelectModifier",D="workbench.list.openMode",I="workbench.list.horizontalScrolling",T="workbench.list.defaultFindMode",M="workbench.list.typeNavigationMode",A="workbench.list.keyboardNavigation",R="workbench.list.scrollByPage",N="workbench.list.defaultFindMatchType",O="workbench.tree.indent",x="workbench.tree.renderIndentGuides",F="workbench.list.smoothScrolling",W="workbench.list.mouseWheelScrollSensitivity",z="workbench.list.fastScrollSensitivity",q="workbench.tree.expandMode",H="workbench.tree.enableStickyScroll",K="workbench.tree.stickyScrollMaxItemCount";function U(le){return le.getValue(S)==="alt"}class Y extends n.Disposable{constructor(de){super(),this.configurationService=de,this.useAltAsMultipleSelectionModifier=U(de),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(de=>{de.affectsConfiguration(S)&&(this.useAltAsMultipleSelectionModifier=U(this.configurationService))}))}isSelectionSingleChangeEvent(de){return this.useAltAsMultipleSelectionModifier?de.browserEvent.altKey:(0,E.isSelectionSingleChangeEvent)(de)}isSelectionRangeChangeEvent(de){return(0,E.isSelectionRangeChangeEvent)(de)}}function Q(le,de){const me=le.get(t.IConfigurationService),be=le.get(a.IKeybindingService),ve=new n.DisposableStore;return[{...de,keyboardNavigationDelegate:{mightProducePrintableCharacter(Se){return be.mightProducePrintableCharacter(Se)}},smoothScrolling:!!me.getValue(F),mouseWheelScrollSensitivity:me.getValue(W),fastScrollSensitivity:me.getValue(z),multipleSelectionController:de.multipleSelectionController??ve.add(new Y(me)),keyboardNavigationEventFilter:pe(be),scrollByPage:!!me.getValue(R)},ve]}let X=class extends E.List{constructor(de,me,be,ve,Le,Se,ye,Ee,ke){const Re=typeof Le.horizontalScrolling<"u"?Le.horizontalScrolling:!!Ee.getValue(I),[Pe,Fe]=ke.invokeFunction(Q,Le);super(de,me,be,ve,{keyboardSupport:!1,...Pe,horizontalScrolling:Re}),this.disposables.add(Fe),this.contextKeyService=C(Se,this),this.disposables.add(w(this.contextKeyService,this)),this.listSupportsMultiSelect=e.WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Le.multipleSelectionSupport!==!1),e.WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(!!Le.selectionNavigation),this.listHasSelectionOrFocus=e.WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.listDoubleSelection=e.WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.listMultiSelection=e.WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.horizontalScrolling=Le.horizontalScrolling,this._useAltAsMultipleSelectionModifier=U(Ee),this.disposables.add(this.contextKeyService),this.disposables.add(ye.register(this)),this.updateStyles(Le.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const Te=this.getSelection(),Ne=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(Te.length>0||Ne.length>0),this.listMultiSelection.set(Te.length>1),this.listDoubleSelection.set(Te.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const Te=this.getSelection(),Ne=this.getFocus();this.listHasSelectionOrFocus.set(Te.length>0||Ne.length>0)})),this.disposables.add(Ee.onDidChangeConfiguration(Te=>{Te.affectsConfiguration(S)&&(this._useAltAsMultipleSelectionModifier=U(Ee));let Ne={};if(Te.affectsConfiguration(I)&&this.horizontalScrolling===void 0){const fe=!!Ee.getValue(I);Ne={...Ne,horizontalScrolling:fe}}if(Te.affectsConfiguration(R)){const fe=!!Ee.getValue(R);Ne={...Ne,scrollByPage:fe}}if(Te.affectsConfiguration(F)){const fe=!!Ee.getValue(F);Ne={...Ne,smoothScrolling:fe}}if(Te.affectsConfiguration(W)){const fe=Ee.getValue(W);Ne={...Ne,mouseWheelScrollSensitivity:fe}}if(Te.affectsConfiguration(z)){const fe=Ee.getValue(z);Ne={...Ne,fastScrollSensitivity:fe}}Object.keys(Ne).length>0&&this.updateOptions(Ne)})),this.navigator=new se(this,{configurationService:Ee,...Le}),this.disposables.add(this.navigator)}updateOptions(de){super.updateOptions(de),de.overrideStyles!==void 0&&this.updateStyles(de.overrideStyles),de.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!de.multipleSelectionSupport)}updateStyles(de){this.style(de?(0,d.getListStyles)(de):d.defaultListStyles)}};e.WorkbenchList=X,e.WorkbenchList=X=De([he(5,o.IContextKeyService),he(6,e.IListService),he(7,t.IConfigurationService),he(8,l.IInstantiationService)],X);let G=class extends k.PagedList{constructor(de,me,be,ve,Le,Se,ye,Ee,ke){const Re=typeof Le.horizontalScrolling<"u"?Le.horizontalScrolling:!!Ee.getValue(I),[Pe,Fe]=ke.invokeFunction(Q,Le);super(de,me,be,ve,{keyboardSupport:!1,...Pe,horizontalScrolling:Re}),this.disposables=new n.DisposableStore,this.disposables.add(Fe),this.contextKeyService=C(Se,this),this.disposables.add(w(this.contextKeyService,this.widget)),this.horizontalScrolling=Le.horizontalScrolling,this.listSupportsMultiSelect=e.WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Le.multipleSelectionSupport!==!1),e.WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(!!Le.selectionNavigation),this._useAltAsMultipleSelectionModifier=U(Ee),this.disposables.add(this.contextKeyService),this.disposables.add(ye.register(this)),this.updateStyles(Le.overrideStyles),this.disposables.add(Ee.onDidChangeConfiguration(Te=>{Te.affectsConfiguration(S)&&(this._useAltAsMultipleSelectionModifier=U(Ee));let Ne={};if(Te.affectsConfiguration(I)&&this.horizontalScrolling===void 0){const fe=!!Ee.getValue(I);Ne={...Ne,horizontalScrolling:fe}}if(Te.affectsConfiguration(R)){const fe=!!Ee.getValue(R);Ne={...Ne,scrollByPage:fe}}if(Te.affectsConfiguration(F)){const fe=!!Ee.getValue(F);Ne={...Ne,smoothScrolling:fe}}if(Te.affectsConfiguration(W)){const fe=Ee.getValue(W);Ne={...Ne,mouseWheelScrollSensitivity:fe}}if(Te.affectsConfiguration(z)){const fe=Ee.getValue(z);Ne={...Ne,fastScrollSensitivity:fe}}Object.keys(Ne).length>0&&this.updateOptions(Ne)})),this.navigator=new se(this,{configurationService:Ee,...Le}),this.disposables.add(this.navigator)}updateOptions(de){super.updateOptions(de),de.overrideStyles!==void 0&&this.updateStyles(de.overrideStyles),de.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!de.multipleSelectionSupport)}updateStyles(de){this.style(de?(0,d.getListStyles)(de):d.defaultListStyles)}dispose(){this.disposables.dispose(),super.dispose()}};e.WorkbenchPagedList=G,e.WorkbenchPagedList=G=De([he(5,o.IContextKeyService),he(6,e.IListService),he(7,t.IConfigurationService),he(8,l.IInstantiationService)],G);let P=class extends L.Table{constructor(de,me,be,ve,Le,Se,ye,Ee,ke,Re){const Pe=typeof Se.horizontalScrolling<"u"?Se.horizontalScrolling:!!ke.getValue(I),[Fe,je]=Re.invokeFunction(Q,Se);super(de,me,be,ve,Le,{keyboardSupport:!1,...Fe,horizontalScrolling:Pe}),this.disposables.add(je),this.contextKeyService=C(ye,this),this.disposables.add(w(this.contextKeyService,this)),this.listSupportsMultiSelect=e.WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(Se.multipleSelectionSupport!==!1),e.WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(!!Se.selectionNavigation),this.listHasSelectionOrFocus=e.WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.listDoubleSelection=e.WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.listMultiSelection=e.WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.horizontalScrolling=Se.horizontalScrolling,this._useAltAsMultipleSelectionModifier=U(ke),this.disposables.add(this.contextKeyService),this.disposables.add(Ee.register(this)),this.updateStyles(Se.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const Ne=this.getSelection(),fe=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(Ne.length>0||fe.length>0),this.listMultiSelection.set(Ne.length>1),this.listDoubleSelection.set(Ne.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const Ne=this.getSelection(),fe=this.getFocus();this.listHasSelectionOrFocus.set(Ne.length>0||fe.length>0)})),this.disposables.add(ke.onDidChangeConfiguration(Ne=>{Ne.affectsConfiguration(S)&&(this._useAltAsMultipleSelectionModifier=U(ke));let fe={};if(Ne.affectsConfiguration(I)&&this.horizontalScrolling===void 0){const we=!!ke.getValue(I);fe={...fe,horizontalScrolling:we}}if(Ne.affectsConfiguration(R)){const we=!!ke.getValue(R);fe={...fe,scrollByPage:we}}if(Ne.affectsConfiguration(F)){const we=!!ke.getValue(F);fe={...fe,smoothScrolling:we}}if(Ne.affectsConfiguration(W)){const we=ke.getValue(W);fe={...fe,mouseWheelScrollSensitivity:we}}if(Ne.affectsConfiguration(z)){const we=ke.getValue(z);fe={...fe,fastScrollSensitivity:we}}Object.keys(fe).length>0&&this.updateOptions(fe)})),this.navigator=new ue(this,{configurationService:ke,...Se}),this.disposables.add(this.navigator)}updateOptions(de){super.updateOptions(de),de.overrideStyles!==void 0&&this.updateStyles(de.overrideStyles),de.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!de.multipleSelectionSupport)}updateStyles(de){this.style(de?(0,d.getListStyles)(de):d.defaultListStyles)}dispose(){this.disposables.dispose(),super.dispose()}};e.WorkbenchTable=P,e.WorkbenchTable=P=De([he(6,o.IContextKeyService),he(7,e.IListService),he(8,t.IConfigurationService),he(9,l.IInstantiationService)],P);class te extends n.Disposable{constructor(de,me){super(),this.widget=de,this._onDidOpen=this._register(new p.Emitter),this.onDidOpen=this._onDidOpen.event,this._register(p.Event.filter(this.widget.onDidChangeSelection,be=>(0,c.isKeyboardEvent)(be.browserEvent))(be=>this.onSelectionFromKeyboard(be))),this._register(this.widget.onPointer(be=>this.onPointer(be.element,be.browserEvent))),this._register(this.widget.onMouseDblClick(be=>this.onMouseDblClick(be.element,be.browserEvent))),typeof me?.openOnSingleClick!="boolean"&&me?.configurationService?(this.openOnSingleClick=me?.configurationService.getValue(D)!=="doubleClick",this._register(me?.configurationService.onDidChangeConfiguration(be=>{be.affectsConfiguration(D)&&(this.openOnSingleClick=me?.configurationService.getValue(D)!=="doubleClick")}))):this.openOnSingleClick=me?.openOnSingleClick??!0}onSelectionFromKeyboard(de){if(de.elements.length!==1)return;const me=de.browserEvent,be=typeof me.preserveFocus=="boolean"?me.preserveFocus:!0,ve=typeof me.pinned=="boolean"?me.pinned:!be;this._open(this.getSelectedElement(),be,ve,!1,de.browserEvent)}onPointer(de,me){if(!this.openOnSingleClick||me.detail===2)return;const ve=me.button===1,Le=!0,Se=ve,ye=me.ctrlKey||me.metaKey||me.altKey;this._open(de,Le,Se,ye,me)}onMouseDblClick(de,me){if(!me)return;const be=me.target;if(be.classList.contains("monaco-tl-twistie")||be.classList.contains("monaco-icon-label")&&be.classList.contains("folder-icon")&&me.offsetX<16)return;const Le=!1,Se=!0,ye=me.ctrlKey||me.metaKey||me.altKey;this._open(de,Le,Se,ye,me)}_open(de,me,be,ve,Le){de&&this._onDidOpen.fire({editorOptions:{preserveFocus:me,pinned:be,revealIfVisible:!0},sideBySide:ve,element:de,browserEvent:Le})}}class se extends te{constructor(de,me){super(de,me),this.widget=de}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class ue extends te{constructor(de,me){super(de,me)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class ge extends te{constructor(de,me){super(de,me)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function pe(le){let de=!1;return me=>{if(me.toKeyCodeChord().isModifierKey())return!1;if(de)return de=!1,!1;const be=le.softDispatch(me,me.target);return be.kind===1?(de=!0,!1):(de=!1,be.kind===0)}}let ce=class extends b.ObjectTree{constructor(de,me,be,ve,Le,Se,ye,Ee,ke){const{options:Re,getTypeNavigationMode:Pe,disposable:Fe}=Se.invokeFunction($,Le);super(de,me,be,ve,Re),this.disposables.add(Fe),this.internals=new Z(this,Le,Pe,Le.overrideStyles,ye,Ee,ke),this.disposables.add(this.internals)}updateOptions(de){super.updateOptions(de),this.internals.updateOptions(de)}};e.WorkbenchObjectTree=ce,e.WorkbenchObjectTree=ce=De([he(5,l.IInstantiationService),he(6,o.IContextKeyService),he(7,e.IListService),he(8,t.IConfigurationService)],ce);let ie=class extends b.CompressibleObjectTree{constructor(de,me,be,ve,Le,Se,ye,Ee,ke){const{options:Re,getTypeNavigationMode:Pe,disposable:Fe}=Se.invokeFunction($,Le);super(de,me,be,ve,Re),this.disposables.add(Fe),this.internals=new Z(this,Le,Pe,Le.overrideStyles,ye,Ee,ke),this.disposables.add(this.internals)}updateOptions(de={}){super.updateOptions(de),de.overrideStyles&&this.internals.updateStyleOverrides(de.overrideStyles),this.internals.updateOptions(de)}};e.WorkbenchCompressibleObjectTree=ie,e.WorkbenchCompressibleObjectTree=ie=De([he(5,l.IInstantiationService),he(6,o.IContextKeyService),he(7,e.IListService),he(8,t.IConfigurationService)],ie);let ne=class extends _.DataTree{constructor(de,me,be,ve,Le,Se,ye,Ee,ke,Re){const{options:Pe,getTypeNavigationMode:Fe,disposable:je}=ye.invokeFunction($,Se);super(de,me,be,ve,Le,Pe),this.disposables.add(je),this.internals=new Z(this,Se,Fe,Se.overrideStyles,Ee,ke,Re),this.disposables.add(this.internals)}updateOptions(de={}){super.updateOptions(de),de.overrideStyles!==void 0&&this.internals.updateStyleOverrides(de.overrideStyles),this.internals.updateOptions(de)}};e.WorkbenchDataTree=ne,e.WorkbenchDataTree=ne=De([he(6,l.IInstantiationService),he(7,o.IContextKeyService),he(8,e.IListService),he(9,t.IConfigurationService)],ne);let J=class extends f.AsyncDataTree{get onDidOpen(){return this.internals.onDidOpen}constructor(de,me,be,ve,Le,Se,ye,Ee,ke,Re){const{options:Pe,getTypeNavigationMode:Fe,disposable:je}=ye.invokeFunction($,Se);super(de,me,be,ve,Le,Pe),this.disposables.add(je),this.internals=new Z(this,Se,Fe,Se.overrideStyles,Ee,ke,Re),this.disposables.add(this.internals)}updateOptions(de={}){super.updateOptions(de),de.overrideStyles&&this.internals.updateStyleOverrides(de.overrideStyles),this.internals.updateOptions(de)}};e.WorkbenchAsyncDataTree=J,e.WorkbenchAsyncDataTree=J=De([he(6,l.IInstantiationService),he(7,o.IContextKeyService),he(8,e.IListService),he(9,t.IConfigurationService)],J);let B=class extends f.CompressibleAsyncDataTree{constructor(de,me,be,ve,Le,Se,ye,Ee,ke,Re,Pe){const{options:Fe,getTypeNavigationMode:je,disposable:Te}=Ee.invokeFunction($,ye);super(de,me,be,ve,Le,Se,Fe),this.disposables.add(Te),this.internals=new Z(this,ye,je,ye.overrideStyles,ke,Re,Pe),this.disposables.add(this.internals)}updateOptions(de){super.updateOptions(de),this.internals.updateOptions(de)}};e.WorkbenchCompressibleAsyncDataTree=B,e.WorkbenchCompressibleAsyncDataTree=B=De([he(7,l.IInstantiationService),he(8,o.IContextKeyService),he(9,e.IListService),he(10,t.IConfigurationService)],B);function j(le){const de=le.getValue(T);if(de==="highlight")return y.TreeFindMode.Highlight;if(de==="filter")return y.TreeFindMode.Filter;const me=le.getValue(A);if(me==="simple"||me==="highlight")return y.TreeFindMode.Highlight;if(me==="filter")return y.TreeFindMode.Filter}function V(le){const de=le.getValue(N);if(de==="fuzzy")return y.TreeFindMatchType.Fuzzy;if(de==="contiguous")return y.TreeFindMatchType.Contiguous}function $(le,de){const me=le.get(t.IConfigurationService),be=le.get(u.IContextViewService),ve=le.get(o.IContextKeyService),Le=le.get(l.IInstantiationService),Se=()=>{const Fe=ve.getContextKeyValue(h);if(Fe==="automatic")return E.TypeNavigationMode.Automatic;if(Fe==="trigger"||ve.getContextKeyValue(v)===!1)return E.TypeNavigationMode.Trigger;const Te=me.getValue(M);if(Te==="automatic")return E.TypeNavigationMode.Automatic;if(Te==="trigger")return E.TypeNavigationMode.Trigger},ye=de.horizontalScrolling!==void 0?de.horizontalScrolling:!!me.getValue(I),[Ee,ke]=Le.invokeFunction(Q,de),Re=de.paddingBottom,Pe=de.renderIndentGuides!==void 0?de.renderIndentGuides:me.getValue(x);return{getTypeNavigationMode:Se,disposable:ke,options:{keyboardSupport:!1,...Ee,indent:typeof me.getValue(O)=="number"?me.getValue(O):void 0,renderIndentGuides:Pe,smoothScrolling:!!me.getValue(F),defaultFindMode:j(me),defaultFindMatchType:V(me),horizontalScrolling:ye,scrollByPage:!!me.getValue(R),paddingBottom:Re,hideTwistiesOfChildlessElements:de.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:de.expandOnlyOnTwistieClick??me.getValue(q)==="doubleClick",contextViewProvider:be,findWidgetStyles:d.defaultFindWidgetStyles,enableStickyScroll:!!me.getValue(H),stickyScrollMaxItemCount:Number(me.getValue(K))}}}let Z=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(de,me,be,ve,Le,Se,ye){this.tree=de,this.disposables=[],this.contextKeyService=C(Le,de),this.disposables.push(w(this.contextKeyService,de)),this.listSupportsMultiSelect=e.WorkbenchListSupportsMultiSelectContextKey.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(me.multipleSelectionSupport!==!1),e.WorkbenchListSelectionNavigation.bindTo(this.contextKeyService).set(!!me.selectionNavigation),this.listSupportFindWidget=e.WorkbenchListSupportsFind.bindTo(this.contextKeyService),this.listSupportFindWidget.set(me.findWidgetEnabled??!0),this.hasSelectionOrFocus=e.WorkbenchListHasSelectionOrFocus.bindTo(this.contextKeyService),this.hasDoubleSelection=e.WorkbenchListDoubleSelection.bindTo(this.contextKeyService),this.hasMultiSelection=e.WorkbenchListMultiSelection.bindTo(this.contextKeyService),this.treeElementCanCollapse=e.WorkbenchTreeElementCanCollapse.bindTo(this.contextKeyService),this.treeElementHasParent=e.WorkbenchTreeElementHasParent.bindTo(this.contextKeyService),this.treeElementCanExpand=e.WorkbenchTreeElementCanExpand.bindTo(this.contextKeyService),this.treeElementHasChild=e.WorkbenchTreeElementHasChild.bindTo(this.contextKeyService),this.treeFindOpen=e.WorkbenchTreeFindOpen.bindTo(this.contextKeyService),this.treeStickyScrollFocused=e.WorkbenchTreeStickyScrollFocused.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=U(ye),this.updateStyleOverrides(ve);const ke=()=>{const Pe=de.getFocus()[0];if(!Pe)return;const Fe=de.getNode(Pe);this.treeElementCanCollapse.set(Fe.collapsible&&!Fe.collapsed),this.treeElementHasParent.set(!!de.getParentElement(Pe)),this.treeElementCanExpand.set(Fe.collapsible&&Fe.collapsed),this.treeElementHasChild.set(!!de.getFirstElementChild(Pe))},Re=new Set;Re.add(h),Re.add(v),this.disposables.push(this.contextKeyService,Se.register(de),de.onDidChangeSelection(()=>{const Pe=de.getSelection(),Fe=de.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(Pe.length>0||Fe.length>0),this.hasMultiSelection.set(Pe.length>1),this.hasDoubleSelection.set(Pe.length===2)})}),de.onDidChangeFocus(()=>{const Pe=de.getSelection(),Fe=de.getFocus();this.hasSelectionOrFocus.set(Pe.length>0||Fe.length>0),ke()}),de.onDidChangeCollapseState(ke),de.onDidChangeModel(ke),de.onDidChangeFindOpenState(Pe=>this.treeFindOpen.set(Pe)),de.onDidChangeStickyScrollFocused(Pe=>this.treeStickyScrollFocused.set(Pe)),ye.onDidChangeConfiguration(Pe=>{let Fe={};if(Pe.affectsConfiguration(S)&&(this._useAltAsMultipleSelectionModifier=U(ye)),Pe.affectsConfiguration(O)){const je=ye.getValue(O);Fe={...Fe,indent:je}}if(Pe.affectsConfiguration(x)&&me.renderIndentGuides===void 0){const je=ye.getValue(x);Fe={...Fe,renderIndentGuides:je}}if(Pe.affectsConfiguration(F)){const je=!!ye.getValue(F);Fe={...Fe,smoothScrolling:je}}if(Pe.affectsConfiguration(T)||Pe.affectsConfiguration(A)){const je=j(ye);Fe={...Fe,defaultFindMode:je}}if(Pe.affectsConfiguration(M)||Pe.affectsConfiguration(A)){const je=be();Fe={...Fe,typeNavigationMode:je}}if(Pe.affectsConfiguration(N)){const je=V(ye);Fe={...Fe,defaultFindMatchType:je}}if(Pe.affectsConfiguration(I)&&me.horizontalScrolling===void 0){const je=!!ye.getValue(I);Fe={...Fe,horizontalScrolling:je}}if(Pe.affectsConfiguration(R)){const je=!!ye.getValue(R);Fe={...Fe,scrollByPage:je}}if(Pe.affectsConfiguration(q)&&me.expandOnlyOnTwistieClick===void 0&&(Fe={...Fe,expandOnlyOnTwistieClick:ye.getValue(q)==="doubleClick"}),Pe.affectsConfiguration(H)){const je=ye.getValue(H);Fe={...Fe,enableStickyScroll:je}}if(Pe.affectsConfiguration(K)){const je=Math.max(1,ye.getValue(K));Fe={...Fe,stickyScrollMaxItemCount:je}}if(Pe.affectsConfiguration(W)){const je=ye.getValue(W);Fe={...Fe,mouseWheelScrollSensitivity:je}}if(Pe.affectsConfiguration(z)){const je=ye.getValue(z);Fe={...Fe,fastScrollSensitivity:je}}Object.keys(Fe).length>0&&de.updateOptions(Fe)}),this.contextKeyService.onDidChangeContext(Pe=>{Pe.affectsSome(Re)&&de.updateOptions({typeNavigationMode:be()})})),this.navigator=new ge(de,{configurationService:ye,...me}),this.disposables.push(this.navigator)}updateOptions(de){de.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!de.multipleSelectionSupport)}updateStyleOverrides(de){this.tree.style(de?(0,d.getListStyles)(de):d.defaultListStyles)}dispose(){this.disposables=(0,n.dispose)(this.disposables)}};Z=De([he(4,o.IContextKeyService),he(5,e.IListService),he(6,t.IConfigurationService)],Z),r.Registry.as(i.Extensions.Configuration).registerConfiguration({id:"workbench",order:7,title:(0,s.localize)(1099,"Workbench"),type:"object",properties:{[S]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[(0,s.localize)(1100,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),(0,s.localize)(1101,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:(0,s.localize)(1102,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[D]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,s.localize)(1103,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[I]:{type:"boolean",default:!1,description:(0,s.localize)(1104,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[R]:{type:"boolean",default:!1,description:(0,s.localize)(1105,"Controls whether clicks in the scrollbar scroll page by page.")},[O]:{type:"number",default:8,minimum:4,maximum:40,description:(0,s.localize)(1106,"Controls tree indentation in pixels.")},[x]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:(0,s.localize)(1107,"Controls whether the tree should render indent guides.")},[F]:{type:"boolean",default:!1,description:(0,s.localize)(1108,"Controls whether lists and trees have smooth scrolling.")},[W]:{type:"number",default:1,markdownDescription:(0,s.localize)(1109,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[z]:{type:"number",default:5,markdownDescription:(0,s.localize)(1110,"Scrolling speed multiplier when pressing `Alt`.")},[T]:{type:"string",enum:["highlight","filter"],enumDescriptions:[(0,s.localize)(1111,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),(0,s.localize)(1112,"Filter elements when searching.")],default:"highlight",description:(0,s.localize)(1113,"Controls the default find mode for lists and trees in the workbench.")},[A]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[(0,s.localize)(1114,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),(0,s.localize)(1115,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),(0,s.localize)(1116,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:(0,s.localize)(1117,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:(0,s.localize)(1118,"Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[N]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[(0,s.localize)(1119,"Use fuzzy matching when searching."),(0,s.localize)(1120,"Use contiguous matching when searching.")],default:"fuzzy",description:(0,s.localize)(1121,"Controls the type of matching used when searching lists and trees in the workbench.")},[q]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:(0,s.localize)(1122,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[H]:{type:"boolean",default:!0,description:(0,s.localize)(1123,"Controls whether sticky scrolling is enabled in trees.")},[K]:{type:"number",minimum:1,default:7,markdownDescription:(0,s.localize)(1124,"Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[M]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:(0,s.localize)(1125,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}})}),define(oe[71],re([1,0,14,26,191,30,6,19,22,3,271,38]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.spinningLoading=e.syncing=e.gotoNextLocation=e.gotoPreviousLocation=e.widgetClose=e.iconsSchemaId=e.IconFontDefinition=e.IconContribution=e.Extensions=void 0,e.registerIcon=g,e.getIconRegistry=u,e.Extensions={IconContribution:"base.contributions.icons"};var s;(function(d){function m(h,v){let C=h.defaults;for(;L.ThemeIcon.isThemeIcon(C);){const w=o.getIcon(C.id);if(!w)return;C=w.defaults}return C}d.getDefinition=m})(s||(e.IconContribution=s={}));var t;(function(d){function m(v){return{weight:v.weight,style:v.style,src:v.src.map(C=>({format:C.format,location:C.location.toString()}))}}d.toJSONObject=m;function h(v){const C=w=>(0,f.isString)(w)?w:void 0;if(v&&Array.isArray(v.src)&&v.src.every(w=>(0,f.isString)(w.format)&&(0,f.isString)(w.location)))return{weight:C(v.weight),style:C(v.style),src:v.src.map(w=>({format:w.format,location:_.URI.parse(w.location)}))}}d.fromJSONObject=h})(t||(e.IconFontDefinition=t={}));class i{constructor(){this._onDidChange=new y.Emitter,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:(0,b.localize)(1062,"The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:(0,b.localize)(1063,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${L.ThemeIcon.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(m,h,v,C){const w=this.iconsById[m];if(w){if(v&&!w.description){w.description=v,this.iconSchema.properties[m].markdownDescription=`${v} $(${m})`;const I=this.iconReferenceSchema.enum.indexOf(m);I!==-1&&(this.iconReferenceSchema.enumDescriptions[I]=v),this._onDidChange.fire()}return w}const S={id:m,description:v,defaults:h,deprecationMessage:C};this.iconsById[m]=S;const D={$ref:"#/definitions/icons"};return C&&(D.deprecationMessage=C),v&&(D.markdownDescription=`${v}: $(${m})`),this.iconSchema.properties[m]=D,this.iconReferenceSchema.enum.push(m),this.iconReferenceSchema.enumDescriptions.push(v||""),this._onDidChange.fire(),{id:m}}getIcons(){return Object.keys(this.iconsById).map(m=>this.iconsById[m])}getIcon(m){return this.iconsById[m]}getIconSchema(){return this.iconSchema}toString(){const m=(w,S)=>w.id.localeCompare(S.id),h=w=>{for(;L.ThemeIcon.isThemeIcon(w.defaults);)w=this.iconsById[w.defaults.id];return`codicon codicon-${w?w.id:""}`},v=[];v.push("| preview     | identifier                        | default codicon ID                | description"),v.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const C=Object.keys(this.iconsById).map(w=>this.iconsById[w]);for(const w of C.filter(S=>!!S.description).sort(m))v.push(`|<i class="${h(w)}"></i>|${w.id}|${L.ThemeIcon.isThemeIcon(w.defaults)?w.defaults.id:w.id}|${w.description||""}|`);v.push("| preview     | identifier                        "),v.push("| ----------- | --------------------------------- |");for(const w of C.filter(S=>!L.ThemeIcon.isThemeIcon(S.defaults)).sort(m))v.push(`|<i class="${h(w)}"></i>|${w.id}|`);return v.join(`
`)}}const o=new i;n.Registry.add(e.Extensions.IconContribution,o);function g(d,m,h,v){return o.registerIcon(d,m,h,v)}function u(){return o}function l(){const d=(0,E.getCodiconFontCharacters)();for(const m in d){const h="\\"+d[m].toString(16);o.registerIcon(m,{fontCharacter:h})}}l(),e.iconsSchemaId="vscode://schemas/icons";const a=n.Registry.as(p.Extensions.JSONContribution);a.registerSchema(e.iconsSchemaId,o.getIconSchema());const r=new c.RunOnceScheduler(()=>a.notifySchemaChanged(e.iconsSchemaId),200);o.onDidChange(()=>{r.isScheduled()||r.schedule()}),e.widgetClose=g("widget-close",k.Codicon.close,(0,b.localize)(1064,"Icon for the close action in widgets.")),e.gotoPreviousLocation=g("goto-previous-location",k.Codicon.arrowUp,(0,b.localize)(1065,"Icon for goto previous editor location.")),e.gotoNextLocation=g("goto-next-location",k.Codicon.arrowDown,(0,b.localize)(1066,"Icon for goto next editor location.")),e.syncing=L.ThemeIcon.modify(k.Codicon.sync,"spin"),e.spinningLoading=L.ThemeIcon.modify(k.Codicon.loading,"spin")}),define(oe[753],re([1,0,5,102,87,84,41,13,26,2,21,30,75,85,37,56,69,9,4,104,42,94,135,95,3,136,7,71,508]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibleDiffViewerModelFromEditors=e.AccessibleDiffViewer=void 0;const D=(0,S.registerIcon)("diff-review-insert",_.Codicon.add,(0,v.localize)(31,"Icon for 'Insert' in accessible diff viewer.")),I=(0,S.registerIcon)("diff-review-remove",_.Codicon.remove,(0,v.localize)(32,"Icon for 'Remove' in accessible diff viewer.")),T=(0,S.registerIcon)("diff-review-close",_.Codicon.close,(0,v.localize)(33,"Icon for 'Close' in accessible diff viewer."));let M=class extends b.Disposable{static{this._ttPolicy=(0,k.createTrustedTypesPolicy)("diffReview",{createHTML:Y=>Y})}constructor(Y,Q,X,G,P,te,se,ue,ge){super(),this._parentNode=Y,this._visible=Q,this._setVisible=X,this._canClose=G,this._width=P,this._height=te,this._diffs=se,this._models=ue,this._instantiationService=ge,this._state=(0,p.derivedWithStore)(this,(pe,ce)=>{const ie=this._visible.read(pe);if(this._parentNode.style.visibility=ie?"visible":"hidden",!ie)return null;const ne=ce.add(this._instantiationService.createInstance(A,this._diffs,this._models,this._setVisible,this._canClose)),J=ce.add(this._instantiationService.createInstance(H,this._parentNode,ne,this._width,this._height,this._models));return{model:ne,view:J}}).recomputeInitiallyAndOnChange(this._store)}next(){(0,p.transaction)(Y=>{const Q=this._visible.get();this._setVisible(!0,Y),Q&&this._state.get().model.nextGroup(Y)})}prev(){(0,p.transaction)(Y=>{this._setVisible(!0,Y),this._state.get().model.previousGroup(Y)})}close(){(0,p.transaction)(Y=>{this._setVisible(!1,Y)})}};e.AccessibleDiffViewer=M,e.AccessibleDiffViewer=M=De([he(8,w.IInstantiationService)],M);let A=class extends b.Disposable{constructor(Y,Q,X,G,P){super(),this._diffs=Y,this._models=Q,this._setVisible=X,this.canClose=G,this._accessibilitySignalService=P,this._groups=(0,p.observableValue)(this,[]),this._currentGroupIdx=(0,p.observableValue)(this,0),this._currentElementIdx=(0,p.observableValue)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map((te,se)=>this._groups.read(se)[te]),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map((te,se)=>this.currentGroup.read(se)?.lines[te]),this._register((0,p.autorun)(te=>{const se=this._diffs.read(te);if(!se){this._groups.set([],void 0);return}const ue=N(se,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,p.transaction)(ge=>{const pe=this._models.getModifiedPosition();if(pe){const ce=ue.findIndex(ie=>pe?.lineNumber<ie.range.modified.endLineNumberExclusive);ce!==-1&&this._currentGroupIdx.set(ce,ge)}this._groups.set(ue,ge)})})),this._register((0,p.autorun)(te=>{const se=this.currentElement.read(te);se?.type===O.Deleted?this._accessibilitySignalService.playSignal(C.AccessibilitySignal.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):se?.type===O.Added&&this._accessibilitySignalService.playSignal(C.AccessibilitySignal.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})})),this._register((0,p.autorun)(te=>{const se=this.currentElement.read(te);if(se&&se.type!==O.Header){const ue=se.modifiedLineNumber??se.diff.modified.startLineNumber;this._models.modifiedSetSelection(l.Range.fromPositions(new u.Position(ue,1)))}}))}_goToGroupDelta(Y,Q){const X=this.groups.get();!X||X.length<=1||(0,p.subtransaction)(Q,G=>{this._currentGroupIdx.set(g.OffsetRange.ofLength(X.length).clipCyclic(this._currentGroupIdx.get()+Y),G),this._currentElementIdx.set(0,G)})}nextGroup(Y){this._goToGroupDelta(1,Y)}previousGroup(Y){this._goToGroupDelta(-1,Y)}_goToLineDelta(Y){const Q=this.currentGroup.get();!Q||Q.lines.length<=1||(0,p.transaction)(X=>{this._currentElementIdx.set(g.OffsetRange.ofLength(Q.lines.length).clip(this._currentElementIdx.get()+Y),X)})}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(Y){const Q=this.currentGroup.get();if(!Q)return;const X=Q.lines.indexOf(Y);X!==-1&&(0,p.transaction)(G=>{this._currentElementIdx.set(X,G)})}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const Y=this.currentElement.get();Y&&(Y.type===O.Deleted?this._models.originalReveal(l.Range.fromPositions(new u.Position(Y.originalLineNumber,1))):this._models.modifiedReveal(Y.type!==O.Header?l.Range.fromPositions(new u.Position(Y.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};A=De([he(4,C.IAccessibilitySignalService)],A);const R=3;function N(U,Y,Q){const X=[];for(const G of(0,f.groupAdjacentBy)(U,(P,te)=>te.modified.startLineNumber-P.modified.endLineNumberExclusive<2*R)){const P=[];P.push(new F);const te=new o.LineRange(Math.max(1,G[0].original.startLineNumber-R),Math.min(G[G.length-1].original.endLineNumberExclusive+R,Y+1)),se=new o.LineRange(Math.max(1,G[0].modified.startLineNumber-R),Math.min(G[G.length-1].modified.endLineNumberExclusive+R,Q+1));(0,f.forEachAdjacent)(G,(pe,ce)=>{const ie=new o.LineRange(pe?pe.original.endLineNumberExclusive:te.startLineNumber,ce?ce.original.startLineNumber:te.endLineNumberExclusive),ne=new o.LineRange(pe?pe.modified.endLineNumberExclusive:se.startLineNumber,ce?ce.modified.startLineNumber:se.endLineNumberExclusive);ie.forEach(J=>{P.push(new q(J,ne.startLineNumber+(J-ie.startLineNumber)))}),ce&&(ce.original.forEach(J=>{P.push(new W(ce,J))}),ce.modified.forEach(J=>{P.push(new z(ce,J))}))});const ue=G[0].modified.join(G[G.length-1].modified),ge=G[0].original.join(G[G.length-1].original);X.push(new x(new a.LineRangeMapping(ue,ge),P))}return X}var O;(function(U){U[U.Header=0]="Header",U[U.Unchanged=1]="Unchanged",U[U.Deleted=2]="Deleted",U[U.Added=3]="Added"})(O||(O={}));class x{constructor(Y,Q){this.range=Y,this.lines=Q}}class F{constructor(){this.type=O.Header}}class W{constructor(Y,Q){this.diff=Y,this.originalLineNumber=Q,this.type=O.Deleted,this.modifiedLineNumber=void 0}}class z{constructor(Y,Q){this.diff=Y,this.modifiedLineNumber=Q,this.type=O.Added,this.originalLineNumber=void 0}}class q{constructor(Y,Q){this.originalLineNumber=Y,this.modifiedLineNumber=Q,this.type=O.Unchanged}}let H=class extends b.Disposable{constructor(Y,Q,X,G,P,te){super(),this._element=Y,this._model=Q,this._width=X,this._height=G,this._models=P,this._languageService=te,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const se=document.createElement("div");se.className="diff-review-actions",this._actionBar=this._register(new E.ActionBar(se)),this._register((0,p.autorun)(ue=>{this._actionBar.clear(),this._model.canClose.read(ue)&&this._actionBar.push(new y.Action("diffreview.close",(0,v.localize)(34,"Close"),"close-diff-review "+n.ThemeIcon.asClassName(T),!0,async()=>Q.close()),{label:!1,icon:!0})})),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new L.DomScrollableElement(this._content,{})),(0,c.reset)(this.domNode,this._scrollbar.getDomNode(),se),this._register((0,p.autorun)(ue=>{this._height.read(ue),this._width.read(ue),this._scrollbar.scanDomNode()})),this._register((0,b.toDisposable)(()=>{(0,c.reset)(this.domNode)})),this._register((0,t.applyStyle)(this.domNode,{width:this._width,height:this._height})),this._register((0,t.applyStyle)(this._content,{width:this._width,height:this._height})),this._register((0,p.autorunWithStore)((ue,ge)=>{this._model.currentGroup.read(ue),this._render(ge)})),this._register((0,c.addStandardDisposableListener)(this.domNode,"keydown",ue=>{(ue.equals(18)||ue.equals(2066)||ue.equals(530))&&(ue.preventDefault(),this._model.goToNextLine()),(ue.equals(16)||ue.equals(2064)||ue.equals(528))&&(ue.preventDefault(),this._model.goToPreviousLine()),(ue.equals(9)||ue.equals(2057)||ue.equals(521)||ue.equals(1033))&&(ue.preventDefault(),this._model.close()),(ue.equals(10)||ue.equals(3))&&(ue.preventDefault(),this._model.revealCurrentElementInEditor())}))}_render(Y){const Q=this._models.getOriginalOptions(),X=this._models.getModifiedOptions(),G=document.createElement("div");G.className="diff-review-table",G.setAttribute("role","list"),G.setAttribute("aria-label",(0,v.localize)(35,"Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,s.applyFontInfo)(G,X.get(50)),(0,c.reset)(this._content,G);const P=this._models.getOriginalModel(),te=this._models.getModifiedModel();if(!P||!te)return;const se=P.getOptions(),ue=te.getOptions(),ge=X.get(67),pe=this._model.currentGroup.get();for(const ce of pe?.lines||[]){if(!pe)break;let ie;if(ce.type===O.Header){const J=document.createElement("div");J.className="diff-review-row",J.setAttribute("role","listitem");const B=pe.range,j=this._model.currentGroupIndex.get(),V=this._model.groups.get().length,$=de=>de===0?(0,v.localize)(36,"no lines changed"):de===1?(0,v.localize)(37,"1 line changed"):(0,v.localize)(38,"{0} lines changed",de),Z=$(B.original.length),ee=$(B.modified.length);J.setAttribute("aria-label",(0,v.localize)(39,"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",j+1,V,B.original.startLineNumber,Z,B.modified.startLineNumber,ee));const le=document.createElement("div");le.className="diff-review-cell diff-review-summary",le.appendChild(document.createTextNode(`${j+1}/${V}: @@ -${B.original.startLineNumber},${B.original.length} +${B.modified.startLineNumber},${B.modified.length} @@`)),J.appendChild(le),ie=J}else ie=this._createRow(ce,ge,this._width.get(),Q,P,se,X,te,ue);G.appendChild(ie);const ne=(0,p.derived)(J=>this._model.currentElement.read(J)===ce);Y.add((0,p.autorun)(J=>{const B=ne.read(J);ie.tabIndex=B?0:-1,B&&ie.focus()})),Y.add((0,c.addDisposableListener)(ie,"focus",()=>{this._model.goToLine(ce)}))}this._scrollbar.scanDomNode()}_createRow(Y,Q,X,G,P,te,se,ue,ge){const pe=G.get(146),ce=pe.glyphMarginWidth+pe.lineNumbersWidth,ie=se.get(146),ne=10+ie.glyphMarginWidth+ie.lineNumbersWidth;let J="diff-review-row",B="";const j="diff-review-spacer";let V=null;switch(Y.type){case O.Added:J="diff-review-row line-insert",B=" char-insert",V=D;break;case O.Deleted:J="diff-review-row line-delete",B=" char-delete",V=I;break}const $=document.createElement("div");$.style.minWidth=X+"px",$.className=J,$.setAttribute("role","listitem"),$.ariaLevel="";const Z=document.createElement("div");Z.className="diff-review-cell",Z.style.height=`${Q}px`,$.appendChild(Z);const ee=document.createElement("span");ee.style.width=ce+"px",ee.style.minWidth=ce+"px",ee.className="diff-review-line-number"+B,Y.originalLineNumber!==void 0?ee.appendChild(document.createTextNode(String(Y.originalLineNumber))):ee.innerText="\xA0",Z.appendChild(ee);const le=document.createElement("span");le.style.width=ne+"px",le.style.minWidth=ne+"px",le.style.paddingRight="10px",le.className="diff-review-line-number"+B,Y.modifiedLineNumber!==void 0?le.appendChild(document.createTextNode(String(Y.modifiedLineNumber))):le.innerText="\xA0",Z.appendChild(le);const de=document.createElement("span");if(de.className=j,V){const ve=document.createElement("span");ve.className=n.ThemeIcon.asClassName(V),ve.innerText="\xA0\xA0",de.appendChild(ve)}else de.innerText="\xA0\xA0";Z.appendChild(de);let me;if(Y.modifiedLineNumber!==void 0){let ve=this._getLineHtml(ue,se,ge.tabSize,Y.modifiedLineNumber,this._languageService.languageIdCodec);M._ttPolicy&&(ve=M._ttPolicy.createHTML(ve)),Z.insertAdjacentHTML("beforeend",ve),me=ue.getLineContent(Y.modifiedLineNumber)}else{let ve=this._getLineHtml(P,G,te.tabSize,Y.originalLineNumber,this._languageService.languageIdCodec);M._ttPolicy&&(ve=M._ttPolicy.createHTML(ve)),Z.insertAdjacentHTML("beforeend",ve),me=P.getLineContent(Y.originalLineNumber)}me.length===0&&(me=(0,v.localize)(40,"blank"));let be="";switch(Y.type){case O.Unchanged:Y.originalLineNumber===Y.modifiedLineNumber?be=(0,v.localize)(41,"{0} unchanged line {1}",me,Y.originalLineNumber):be=(0,v.localize)(42,"{0} original line {1} modified line {2}",me,Y.originalLineNumber,Y.modifiedLineNumber);break;case O.Added:be=(0,v.localize)(43,"+ {0} modified line {1}",me,Y.modifiedLineNumber);break;case O.Deleted:be=(0,v.localize)(44,"- {0} original line {1}",me,Y.originalLineNumber);break}return $.setAttribute("aria-label",be),$}_getLineHtml(Y,Q,X,G,P){const te=Y.getLineContent(G),se=Q.get(50),ue=d.LineTokens.createEmpty(te,P),ge=h.ViewLineRenderingData.isBasicASCII(te,Y.mightContainNonBasicASCII()),pe=h.ViewLineRenderingData.containsRTL(te,ge,Y.mightContainRTL());return(0,m.renderViewLine2)(new m.RenderLineInput(se.isMonospace&&!Q.get(33),se.canUseHalfwidthRightwardsArrow,te,!1,ge,pe,0,ue,[],X,0,se.spaceWidth,se.middotWidth,se.wsmiddotWidth,Q.get(118),Q.get(100),Q.get(95),Q.get(51)!==i.EditorFontLigatures.OFF,null)).html}};H=De([he(5,r.ILanguageService)],H);class K{constructor(Y){this.editors=Y}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(Y){this.editors.original.revealRange(Y),this.editors.original.setSelection(Y),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(Y){Y&&(this.editors.modified.revealRange(Y),this.editors.modified.setSelection(Y)),this.editors.modified.focus()}modifiedSetSelection(Y){this.editors.modified.setSelection(Y)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){return this.editors.modified.getPosition()??void 0}}e.AccessibleDiffViewerModelFromEditors=K}),define(oe[754],re([1,0,229,5,163,83,26,33,6,2,30,3,32,71,236]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPickerWidget=e.InsertButton=e.ColorPickerBody=e.ColorPickerHeader=void 0;const i=k.$;class o extends b.Disposable{constructor(C,w,S,D=!1){super(),this.model=w,this.showingStandaloneColorPicker=D,this._closeButton=null,this._domNode=i(".colorpicker-header"),k.append(C,this._domNode),this._pickedColorNode=k.append(this._domNode,i(".picked-color")),k.append(this._pickedColorNode,i("span.codicon.codicon-color-mode")),this._pickedColorPresentation=k.append(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const I=(0,n.localize)(898,"Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",I),this._originalColorNode=k.append(this._domNode,i(".original-color")),this._originalColorNode.style.backgroundColor=f.Color.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=S.getColorTheme().getColor(s.editorHoverBackground)||f.Color.white,this._register(S.onDidColorThemeChange(T=>{this.backgroundColor=T.getColor(s.editorHoverBackground)||f.Color.white})),this._register(k.addDisposableListener(this._pickedColorNode,k.EventType.CLICK,()=>this.model.selectNextColorPresentation())),this._register(k.addDisposableListener(this._originalColorNode,k.EventType.CLICK,()=>{this.model.color=this.model.originalColor,this.model.flushColor()})),this._register(w.onDidChangeColor(this.onDidChangeColor,this)),this._register(w.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=f.Color.Format.CSS.format(w.color)||"",this._pickedColorNode.classList.toggle("light",w.color.rgba.a<.5?this.backgroundColor.isLighter():w.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new g(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(C){this._pickedColorNode.style.backgroundColor=f.Color.Format.CSS.format(C)||"",this._pickedColorNode.classList.toggle("light",C.rgba.a<.5?this.backgroundColor.isLighter():C.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}e.ColorPickerHeader=o;class g extends b.Disposable{constructor(C){super(),this._onClicked=this._register(new _.Emitter),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),k.append(C,this._button);const w=document.createElement("div");w.classList.add("close-button-inner-div"),k.append(this._button,w),k.append(w,i(".button"+p.ThemeIcon.asCSSSelector((0,t.registerIcon)("color-picker-close",y.Codicon.close,(0,n.localize)(899,"Icon to close the color picker"))))).classList.add("close-icon"),this._register(k.addDisposableListener(this._button,k.EventType.CLICK,()=>{this._onClicked.fire()}))}}class u extends b.Disposable{constructor(C,w,S,D=!1){super(),this.model=w,this.pixelRatio=S,this._insertButton=null,this._domNode=i(".colorpicker-body"),k.append(C,this._domNode),this._saturationBox=new l(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new r(this._domNode,this.model,D),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new d(this._domNode,this.model,D),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),D&&(this._insertButton=this._register(new m(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:C,v:w}){const S=this.model.color.hsva;this.model.color=new f.Color(new f.HSVA(S.h,C,w,S.a))}onDidOpacityChange(C){const w=this.model.color.hsva;this.model.color=new f.Color(new f.HSVA(w.h,w.s,w.v,C))}onDidHueChange(C){const w=this.model.color.hsva,S=(1-C)*360;this.model.color=new f.Color(new f.HSVA(S===360?0:S,w.s,w.v,w.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}e.ColorPickerBody=u;class l extends b.Disposable{constructor(C,w,S){super(),this.model=w,this.pixelRatio=S,this._onDidChange=new _.Emitter,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new _.Emitter,this.onColorFlushed=this._onColorFlushed.event,this._domNode=i(".saturation-wrap"),k.append(C,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",k.append(this._domNode,this._canvas),this.selection=i(".saturation-selection"),k.append(this._domNode,this.selection),this.layout(),this._register(k.addDisposableListener(this._domNode,k.EventType.POINTER_DOWN,D=>this.onPointerDown(D))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(C){if(!C.target||!(C.target instanceof Element))return;this.monitor=this._register(new E.GlobalPointerMoveMonitor);const w=k.getDomNodePagePosition(this._domNode);C.target!==this.selection&&this.onDidChangePosition(C.offsetX,C.offsetY),this.monitor.startMonitoring(C.target,C.pointerId,C.buttons,D=>this.onDidChangePosition(D.pageX-w.left,D.pageY-w.top),()=>null);const S=k.addDisposableListener(C.target.ownerDocument,k.EventType.POINTER_UP,()=>{this._onColorFlushed.fire(),S.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)},!0)}onDidChangePosition(C,w){const S=Math.max(0,Math.min(1,C/this.width)),D=Math.max(0,Math.min(1,1-w/this.height));this.paintSelection(S,D),this._onDidChange.fire({s:S,v:D})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const C=this.model.color.hsva;this.paintSelection(C.s,C.v)}paint(){const C=this.model.color.hsva,w=new f.Color(new f.HSVA(C.h,1,1,1)),S=this._canvas.getContext("2d"),D=S.createLinearGradient(0,0,this._canvas.width,0);D.addColorStop(0,"rgba(255, 255, 255, 1)"),D.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),D.addColorStop(1,"rgba(255, 255, 255, 0)");const I=S.createLinearGradient(0,0,0,this._canvas.height);I.addColorStop(0,"rgba(0, 0, 0, 0)"),I.addColorStop(1,"rgba(0, 0, 0, 1)"),S.rect(0,0,this._canvas.width,this._canvas.height),S.fillStyle=f.Color.Format.CSS.format(w),S.fill(),S.fillStyle=D,S.fill(),S.fillStyle=I,S.fill()}paintSelection(C,w){this.selection.style.left=`${C*this.width}px`,this.selection.style.top=`${this.height-w*this.height}px`}onDidChangeColor(C){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const w=C.hsva;this.paintSelection(w.s,w.v)}}class a extends b.Disposable{constructor(C,w,S=!1){super(),this.model=w,this._onDidChange=new _.Emitter,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new _.Emitter,this.onColorFlushed=this._onColorFlushed.event,S?(this.domNode=k.append(C,i(".standalone-strip")),this.overlay=k.append(this.domNode,i(".standalone-overlay"))):(this.domNode=k.append(C,i(".strip")),this.overlay=k.append(this.domNode,i(".overlay"))),this.slider=k.append(this.domNode,i(".slider")),this.slider.style.top="0px",this._register(k.addDisposableListener(this.domNode,k.EventType.POINTER_DOWN,D=>this.onPointerDown(D))),this._register(w.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const C=this.getValue(this.model.color);this.updateSliderPosition(C)}onDidChangeColor(C){const w=this.getValue(C);this.updateSliderPosition(w)}onPointerDown(C){if(!C.target||!(C.target instanceof Element))return;const w=this._register(new E.GlobalPointerMoveMonitor),S=k.getDomNodePagePosition(this.domNode);this.domNode.classList.add("grabbing"),C.target!==this.slider&&this.onDidChangeTop(C.offsetY),w.startMonitoring(C.target,C.pointerId,C.buttons,I=>this.onDidChangeTop(I.pageY-S.top),()=>null);const D=k.addDisposableListener(C.target.ownerDocument,k.EventType.POINTER_UP,()=>{this._onColorFlushed.fire(),D.dispose(),w.stopMonitoring(!0),this.domNode.classList.remove("grabbing")},!0)}onDidChangeTop(C){const w=Math.max(0,Math.min(1,1-C/this.height));this.updateSliderPosition(w),this._onDidChange.fire(w)}updateSliderPosition(C){this.slider.style.top=`${(1-C)*this.height}px`}}class r extends a{constructor(C,w,S=!1){super(C,w,S),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(C){super.onDidChangeColor(C);const{r:w,g:S,b:D}=C.rgba,I=new f.Color(new f.RGBA(w,S,D,1)),T=new f.Color(new f.RGBA(w,S,D,0));this.overlay.style.background=`linear-gradient(to bottom, ${I} 0%, ${T} 100%)`}getValue(C){return C.hsva.a}}class d extends a{constructor(C,w,S=!1){super(C,w,S),this.domNode.classList.add("hue-strip")}getValue(C){return 1-C.hsva.h/360}}class m extends b.Disposable{constructor(C){super(),this._onClicked=this._register(new _.Emitter),this.onClicked=this._onClicked.event,this._button=k.append(C,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(k.addDisposableListener(this._button,k.EventType.CLICK,()=>{this._onClicked.fire()}))}get button(){return this._button}}e.InsertButton=m;class h extends L.Widget{constructor(C,w,S,D,I=!1){super(),this.model=w,this.pixelRatio=S,this._register(c.PixelRatio.getInstance(k.getWindow(C)).onDidChange(()=>this.layout())),this._domNode=i(".colorpicker-widget"),C.appendChild(this._domNode),this.header=this._register(new o(this._domNode,this.model,D,I)),this.body=this._register(new u(this._domNode,this.model,this.pixelRatio,I))}layout(){this.body.layout()}get domNode(){return this._domNode}}e.ColorPickerWidget=h}),define(oe[215],re([1,0,5,13,18,55,2,120,262,4,42,86,3,27,62,17,28,71,26,30,8,31,174,118,14,405,24]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkdownHoverParticipant=e.MarkdownHover=void 0,e.renderMarkdownHovers=O,e.labelForHoverVerbosityAction=F;const S=c.$,D=(0,u.registerIcon)("hover-increase-verbosity",l.Codicon.add,s.localize(666,"Icon for increaseing hover verbosity.")),I=(0,u.registerIcon)("hover-decrease-verbosity",l.Codicon.remove,s.localize(667,"Icon for decreasing hover verbosity."));class T{constructor(z,q,H,K,U,Y=void 0){this.owner=z,this.range=q,this.contents=H,this.isBeforeContent=K,this.ordinal=U,this.source=Y}isValidForHoverAnchor(z){return z.type===1&&this.range.startColumn<=z.range.startColumn&&this.range.endColumn>=z.range.endColumn}}e.MarkdownHover=T;class M{constructor(z,q,H){this.hover=z,this.hoverProvider=q,this.hoverPosition=H}supportsVerbosityAction(z){switch(z){case g.HoverVerbosityAction.Increase:return this.hover.canIncreaseVerbosity??!1;case g.HoverVerbosityAction.Decrease:return this.hover.canDecreaseVerbosity??!1}}}let A=class{constructor(z,q,H,K,U,Y,Q,X){this._editor=z,this._languageService=q,this._openerService=H,this._configurationService=K,this._languageFeaturesService=U,this._keybindingService=Y,this._hoverService=Q,this._commandService=X,this.hoverOrdinal=3}createLoadingMessage(z){return new T(this,z.range,[new L.MarkdownString().appendText(s.localize(668,"Loading..."))],!1,2e3)}computeSync(z,q){if(!this._editor.hasModel()||z.type!==1)return[];const H=this._editor.getModel(),K=z.range.startLineNumber,U=H.getLineMaxColumn(K),Y=[];let Q=1e3;const X=H.getLineLength(K),G=H.getLanguageIdAtPosition(z.range.startLineNumber,z.range.startColumn),P=this._editor.getOption(118),te=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:G});let se=!1;P>=0&&X>P&&z.range.startColumn>=P&&(se=!0,Y.push(new T(this,z.range,[{value:s.localize(669,"Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,Q++))),!se&&typeof te=="number"&&X>=te&&Y.push(new T(this,z.range,[{value:s.localize(670,"Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,Q++));let ue=!1;for(const ge of q){const pe=ge.range.startLineNumber===K?ge.range.startColumn:1,ce=ge.range.endLineNumber===K?ge.range.endColumn:U,ie=ge.options.hoverMessage;if(!ie||(0,L.isEmptyMarkdownString)(ie))continue;ge.options.beforeContentClassName&&(ue=!0);const ne=new b.Range(z.range.startLineNumber,pe,z.range.startLineNumber,ce);Y.push(new T(this,ne,(0,k.asArray)(ie),ue,Q++))}return Y}computeAsync(z,q,H){if(!this._editor.hasModel()||z.type!==1)return v.AsyncIterableObject.EMPTY;const K=this._editor.getModel(),U=this._languageFeaturesService.hoverProvider;return U.has(K)?this._getMarkdownHovers(U,K,z,H):v.AsyncIterableObject.EMPTY}_getMarkdownHovers(z,q,H,K){const U=H.range.getStartPosition();return(0,C.getHoverProviderResultsAsAsyncIterable)(z,q,U,K).filter(X=>!(0,L.isEmptyMarkdownString)(X.hover.contents)).map(X=>{const G=X.hover.range?b.Range.lift(X.hover.range):H.range,P=new M(X.hover,X.provider,U);return new T(this,G,X.hover.contents,!1,X.ordinal,P)})}renderHoverParts(z,q){return this._renderedHoverParts=new N(q,z.fragment,this,this._editor,this._languageService,this._openerService,this._commandService,this._keybindingService,this._hoverService,this._configurationService,z.onContentsChanged),this._renderedHoverParts}updateMarkdownHoverVerbosityLevel(z,q,H){return Promise.resolve(this._renderedHoverParts?.updateMarkdownHoverPartVerbosityLevel(z,q,H))}};e.MarkdownHoverParticipant=A,e.MarkdownHoverParticipant=A=De([he(1,p.ILanguageService),he(2,i.IOpenerService),he(3,t.IConfigurationService),he(4,o.ILanguageFeaturesService),he(5,d.IKeybindingService),he(6,h.IHoverService),he(7,w.ICommandService)],A);class R{constructor(z,q,H){this.hoverPart=z,this.hoverElement=q,this.disposables=H}dispose(){this.disposables.dispose()}}class N{constructor(z,q,H,K,U,Y,Q,X,G,P,te){this._hoverParticipant=H,this._editor=K,this._languageService=U,this._openerService=Y,this._commandService=Q,this._keybindingService=X,this._hoverService=G,this._configurationService=P,this._onFinishedRendering=te,this._ongoingHoverOperations=new Map,this._disposables=new y.DisposableStore,this.renderedHoverParts=this._renderHoverParts(z,q,this._onFinishedRendering),this._disposables.add((0,y.toDisposable)(()=>{this.renderedHoverParts.forEach(se=>{se.dispose()}),this._ongoingHoverOperations.forEach(se=>{se.tokenSource.dispose(!0)})}))}_renderHoverParts(z,q,H){return z.sort((0,k.compareBy)(K=>K.ordinal,k.numberComparator)),z.map(K=>{const U=this._renderHoverPart(K,H);return q.appendChild(U.hoverElement),U})}_renderHoverPart(z,q){const H=this._renderMarkdownHover(z,q),K=H.hoverElement,U=z.source,Y=new y.DisposableStore;if(Y.add(H),!U)return new R(z,K,Y);const Q=U.supportsVerbosityAction(g.HoverVerbosityAction.Increase),X=U.supportsVerbosityAction(g.HoverVerbosityAction.Decrease);if(!Q&&!X)return new R(z,K,Y);const G=S("div.verbosity-actions");return K.prepend(G),Y.add(this._renderHoverExpansionAction(G,g.HoverVerbosityAction.Increase,Q)),Y.add(this._renderHoverExpansionAction(G,g.HoverVerbosityAction.Decrease,X)),new R(z,K,Y)}_renderMarkdownHover(z,q){return x(this._editor,z,this._languageService,this._openerService,q)}_renderHoverExpansionAction(z,q,H){const K=new y.DisposableStore,U=q===g.HoverVerbosityAction.Increase,Y=c.append(z,S(a.ThemeIcon.asCSSSelector(U?D:I)));Y.tabIndex=0;const Q=new h.WorkbenchHoverDelegate("mouse",!1,{target:z,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(K.add(this._hoverService.setupManagedHover(Q,Y,F(this._keybindingService,q))),!H)return Y.classList.add("disabled"),K;Y.classList.add("enabled");const X=()=>this._commandService.executeCommand(q===g.HoverVerbosityAction.Increase?_.INCREASE_HOVER_VERBOSITY_ACTION_ID:_.DECREASE_HOVER_VERBOSITY_ACTION_ID);return K.add(new m.ClickAction(Y,X)),K.add(new m.KeyDownAction(Y,X,[3,10])),K}async updateMarkdownHoverPartVerbosityLevel(z,q,H=!0){const K=this._editor.getModel();if(!K)return;const U=this._getRenderedHoverPartAtIndex(q),Y=U?.hoverPart.source;if(!U||!Y?.supportsVerbosityAction(z))return;const Q=await this._fetchHover(Y,K,z);if(!Q)return;const X=new M(Q,Y.hoverProvider,Y.hoverPosition),G=U.hoverPart,P=new T(this._hoverParticipant,G.range,Q.contents,G.isBeforeContent,G.ordinal,X),te=this._renderHoverPart(P,this._onFinishedRendering);return this._replaceRenderedHoverPartAtIndex(q,te,P),H&&this._focusOnHoverPartWithIndex(q),{hoverPart:P,hoverElement:te.hoverElement}}async _fetchHover(z,q,H){let K=H===g.HoverVerbosityAction.Increase?1:-1;const U=z.hoverProvider,Y=this._ongoingHoverOperations.get(U);Y&&(Y.tokenSource.cancel(),K+=Y.verbosityDelta);const Q=new E.CancellationTokenSource;this._ongoingHoverOperations.set(U,{verbosityDelta:K,tokenSource:Q});const X={verbosityRequest:{verbosityDelta:K,previousHover:z.hover}};let G;try{G=await Promise.resolve(U.provideHover(q,z.hoverPosition,Q.token,X))}catch(P){(0,r.onUnexpectedExternalError)(P)}return Q.dispose(),this._ongoingHoverOperations.delete(U),G}_replaceRenderedHoverPartAtIndex(z,q,H){if(z>=this.renderedHoverParts.length||z<0)return;const K=this.renderedHoverParts[z],U=K.hoverElement,Y=q.hoverElement,Q=Array.from(Y.children);U.replaceChildren(...Q);const X=new R(H,U,q.disposables);U.focus(),K.dispose(),this.renderedHoverParts[z]=X}_focusOnHoverPartWithIndex(z){this.renderedHoverParts[z].hoverElement.focus()}_getRenderedHoverPartAtIndex(z){return this.renderedHoverParts[z]}dispose(){this._disposables.dispose()}}function O(W,z,q,H,K){z.sort((0,k.compareBy)(Y=>Y.ordinal,k.numberComparator));const U=[];for(const Y of z)U.push(x(q,Y,H,K,W.onContentsChanged));return new n.RenderedHoverParts(U)}function x(W,z,q,H,K){const U=new y.DisposableStore,Y=S("div.hover-row"),Q=S("div.hover-row-contents");Y.appendChild(Q);const X=z.contents;for(const P of X){if((0,L.isEmptyMarkdownString)(P))continue;const te=S("div.markdown-hover"),se=c.append(te,S("div.hover-contents")),ue=U.add(new f.MarkdownRenderer({editor:W},q,H));U.add(ue.onDidRenderAsync(()=>{se.className="hover-contents code-hover-contents",K()}));const ge=U.add(ue.render(P));se.appendChild(ge.element),Q.appendChild(te)}return{hoverPart:z,hoverElement:Y,dispose(){U.dispose()}}}function F(W,z){switch(z){case g.HoverVerbosityAction.Increase:{const q=W.lookupKeybinding(_.INCREASE_HOVER_VERBOSITY_ACTION_ID);return q?s.localize(671,"Increase Hover Verbosity ({0})",q.getLabel()):s.localize(672,"Increase Hover Verbosity")}case g.HoverVerbosityAction.Decrease:{const q=W.lookupKeybinding(_.DECREASE_HOVER_VERBOSITY_ACTION_ID);return q?s.localize(673,"Decrease Hover Verbosity ({0})",q.getLabel()):s.localize(674,"Decrease Hover Verbosity")}}}}),define(oe[755],re([1,0,5,48,84,26,6,2,11,19,37,42,120,268,3,12,62,32,71,30,59,66,535]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";var m;Object.defineProperty(e,"__esModule",{value:!0}),e.ParameterHintsWidget=void 0;const h=c.$,v=(0,l.registerIcon)("parameter-hints-next",L.Codicon.chevronDown,i.localize(529,"Icon for show next parameter hint.")),C=(0,l.registerIcon)("parameter-hints-previous",L.Codicon.chevronUp,i.localize(530,"Icon for show previous parameter hint."));let w=class extends f.Disposable{static{m=this}static{this.ID="editor.widget.parameterHintsWidget"}constructor(D,I,T,M,A,R){super(),this.editor=D,this.model=I,this.telemetryService=R,this.renderDisposeables=this._register(new f.DisposableStore),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new s.MarkdownRenderer({editor:D},A,M)),this.keyVisible=t.Context.Visible.bindTo(T),this.keyMultipleSignatures=t.Context.MultipleSignatures.bindTo(T)}createParameterHintDOMNodes(){const D=h(".editor-widget.parameter-hints-widget"),I=c.append(D,h(".phwrapper"));I.tabIndex=-1;const T=c.append(I,h(".controls")),M=c.append(T,h(".button"+a.ThemeIcon.asCSSSelector(C))),A=c.append(T,h(".overloads")),R=c.append(T,h(".button"+a.ThemeIcon.asCSSSelector(v)));this._register(c.addDisposableListener(M,"click",z=>{c.EventHelper.stop(z),this.previous()})),this._register(c.addDisposableListener(R,"click",z=>{c.EventHelper.stop(z),this.next()}));const N=h(".body"),O=new E.DomScrollableElement(N,{alwaysConsumeMouseWheel:!0});this._register(O),I.appendChild(O.getDomNode());const x=c.append(N,h(".signature")),F=c.append(N,h(".docs"));D.style.userSelect="text",this.domNodes={element:D,signature:x,overloads:A,docs:F,scrollbar:O},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection(z=>{this.visible&&this.editor.layoutContentWidget(this)}));const W=()=>{if(!this.domNodes)return;const z=this.editor.getOption(50),q=this.domNodes.element;q.style.fontSize=`${z.fontSize}px`,q.style.lineHeight=`${z.lineHeight/z.fontSize}`,q.style.setProperty("--vscode-parameterHintsWidget-editorFontFamily",z.fontFamily),q.style.setProperty("--vscode-parameterHintsWidget-editorFontFamilyDefault",p.EDITOR_FONT_DEFAULTS.fontFamily)};W(),this._register(y.Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor),z=>z.filter(q=>q.hasChanged(50)))(W)),this._register(this.editor.onDidLayoutChange(z=>this.updateMaxHeight())),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout(()=>{this.domNodes?.element.classList.add("visible")},100),this.editor.layoutContentWidget(this))}hide(){this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,this.domNodes?.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(D){if(this.renderDisposeables.clear(),!this.domNodes)return;const I=D.signatures.length>1;this.domNodes.element.classList.toggle("multiple",I),this.keyMultipleSignatures.set(I),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const T=D.signatures[D.activeSignature];if(!T)return;const M=c.append(this.domNodes.signature,h(".code")),A=T.parameters.length>0,R=T.activeParameter??D.activeParameter;if(A)this.renderParameters(M,T,R);else{const x=c.append(M,h("span"));x.textContent=T.label}const N=T.parameters[R];if(N?.documentation){const x=h("span.documentation");if(typeof N.documentation=="string")x.textContent=N.documentation;else{const F=this.renderMarkdownDocs(N.documentation);x.appendChild(F.element)}c.append(this.domNodes.docs,h("p",{},x))}if(T.documentation!==void 0)if(typeof T.documentation=="string")c.append(this.domNodes.docs,h("p",{},T.documentation));else{const x=this.renderMarkdownDocs(T.documentation);c.append(this.domNodes.docs,x.element)}const O=this.hasDocs(T,N);if(this.domNodes.signature.classList.toggle("has-docs",O),this.domNodes.docs.classList.toggle("empty",!O),this.domNodes.overloads.textContent=String(D.activeSignature+1).padStart(D.signatures.length.toString().length,"0")+"/"+D.signatures.length,N){let x="";const F=T.parameters[R];Array.isArray(F.label)?x=T.label.substring(F.label[0],F.label[1]):x=F.label,F.documentation&&(x+=typeof F.documentation=="string"?`, ${F.documentation}`:`, ${F.documentation.value}`),T.documentation&&(x+=typeof T.documentation=="string"?`, ${T.documentation}`:`, ${T.documentation.value}`),this.announcedLabel!==x&&(k.alert(i.localize(531,"{0}, hint",x)),this.announcedLabel=x)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(D){const I=new r.StopWatch,T=this.renderDisposeables.add(this.markdownRenderer.render(D,{asyncRenderCallback:()=>{this.domNodes?.scrollbar.scanDomNode()}}));T.element.classList.add("markdown-docs");const M=I.elapsed();return M>300&&this.telemetryService.publicLog2("parameterHints.parseMarkdown",{renderDuration:M}),T}hasDocs(D,I){return!!(I&&typeof I.documentation=="string"&&(0,b.assertIsDefined)(I.documentation).length>0||I&&typeof I.documentation=="object"&&(0,b.assertIsDefined)(I.documentation).value.length>0||D.documentation&&typeof D.documentation=="string"&&(0,b.assertIsDefined)(D.documentation).length>0||D.documentation&&typeof D.documentation=="object"&&(0,b.assertIsDefined)(D.documentation.value).length>0)}renderParameters(D,I,T){const[M,A]=this.getParameterLabelOffsets(I,T),R=document.createElement("span");R.textContent=I.label.substring(0,M);const N=document.createElement("span");N.textContent=I.label.substring(M,A),N.className="parameter active";const O=document.createElement("span");O.textContent=I.label.substring(A),c.append(D,R,N,O)}getParameterLabelOffsets(D,I){const T=D.parameters[I];if(T){if(Array.isArray(T.label))return T.label;if(T.label.length){const M=new RegExp(`(\\W|^)${(0,_.escapeRegExpCharacters)(T.label)}(?=\\W|$)`,"g");M.test(D.label);const A=M.lastIndex-T.label.length;return A>=0?[A,M.lastIndex]:[0,0]}else return[0,0]}else return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return m.ID}updateMaxHeight(){if(!this.domNodes)return;const I=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=I;const T=this.domNodes.element.getElementsByClassName("phwrapper");T.length&&(T[0].style.maxHeight=I)}};e.ParameterHintsWidget=w,e.ParameterHintsWidget=w=m=De([he(2,o.IContextKeyService),he(3,g.IOpenerService),he(4,n.ILanguageService),he(5,d.ITelemetryService)],w),(0,u.registerColor)("editorHoverWidget.highlightForeground",u.listHighlightForeground,i.localize(532,"Foreground color of the active item in the parameter hint."))}),define(oe[756],re([1,0,98,2,15,20,28,17,676,268,3,12,7,755]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.TriggerParameterHintsAction=e.ParameterHintsController=void 0;let o=class extends k.Disposable{static{i=this}static{this.ID="editor.controller.parameterHints"}static get(r){return r.getContribution(i.ID)}constructor(r,d,m){super(),this.editor=r,this.model=this._register(new _.ParameterHintsModel(r,m.signatureHelpProvider)),this._register(this.model.onChangedHints(h=>{h?(this.widget.value.show(),this.widget.value.render(h)):this.widget.rawValue?.hide()})),this.widget=new c.Lazy(()=>this._register(d.createInstance(t.ParameterHintsWidget,this.editor,this.model)))}cancel(){this.model.cancel()}previous(){this.widget.rawValue?.previous()}next(){this.widget.rawValue?.next()}trigger(r){this.model.trigger(r,0)}};e.ParameterHintsController=o,e.ParameterHintsController=o=i=De([he(1,s.IInstantiationService),he(2,f.ILanguageFeaturesService)],o);class g extends E.EditorAction{constructor(){super({id:"editor.action.triggerParameterHints",label:p.localize(533,"Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:L.EditorContextKeys.hasSignatureHelpProvider,kbOpts:{kbExpr:L.EditorContextKeys.editorTextFocus,primary:3082,weight:100}})}run(r,d){o.get(d)?.trigger({triggerKind:y.SignatureHelpTriggerKind.Invoke})}}e.TriggerParameterHintsAction=g,(0,E.registerEditorContribution)(o.ID,o,2),(0,E.registerEditorAction)(g);const u=175,l=E.EditorCommand.bindToContribution(o.get);(0,E.registerEditorCommand)(new l({id:"closeParameterHints",precondition:b.Context.Visible,handler:a=>a.cancel(),kbOpts:{weight:u,kbExpr:L.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,E.registerEditorCommand)(new l({id:"showPrevParameterHint",precondition:n.ContextKeyExpr.and(b.Context.Visible,b.Context.MultipleSignatures),handler:a=>a.previous(),kbOpts:{weight:u,kbExpr:L.EditorContextKeys.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,E.registerEditorCommand)(new l({id:"showNextParameterHint",precondition:n.ContextKeyExpr.and(b.Context.Visible,b.Context.MultipleSignatures),handler:a=>a.next(),kbOpts:{weight:u,kbExpr:L.EditorContextKeys.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))}),define(oe[757],re([1,0,5,87,41,2,120,7,694,71,30,543]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BannerController=void 0;const n=26;let s=class extends L.Disposable{constructor(o,g){super(),this._editor=o,this.instantiationService=g,this.banner=this._register(this.instantiationService.createInstance(t))}hide(){this._editor.setBanner(null,0),this.banner.clear()}show(o){this.banner.show({...o,onClose:()=>{this.hide(),o.onClose?.()}}),this._editor.setBanner(this.banner.element,n)}};e.BannerController=s,e.BannerController=s=De([he(1,f.IInstantiationService)],s);let t=class extends L.Disposable{constructor(o){super(),this.instantiationService=o,this.markdownRenderer=this.instantiationService.createInstance(y.MarkdownRenderer,{}),this.element=(0,c.$)("div.editor-banner"),this.element.tabIndex=0}getAriaLabel(o){if(o.ariaLabel)return o.ariaLabel;if(typeof o.message=="string")return o.message}getBannerMessage(o){if(typeof o=="string"){const g=(0,c.$)("span");return g.innerText=o,g}return this.markdownRenderer.render(o).element}clear(){(0,c.clearNode)(this.element)}show(o){(0,c.clearNode)(this.element);const g=this.getAriaLabel(o);g&&this.element.setAttribute("aria-label",g);const u=(0,c.append)(this.element,(0,c.$)("div.icon-container"));u.setAttribute("aria-hidden","true"),o.icon&&u.appendChild((0,c.$)(`div${p.ThemeIcon.asCSSSelector(o.icon)}`));const l=(0,c.append)(this.element,(0,c.$)("div.message-container"));if(l.setAttribute("aria-hidden","true"),l.appendChild(this.getBannerMessage(o.message)),this.messageActionsContainer=(0,c.append)(this.element,(0,c.$)("div.message-actions-container")),o.actions)for(const r of o.actions)this._register(this.instantiationService.createInstance(_.Link,this.messageActionsContainer,{...r,tabIndex:-1},{}));const a=(0,c.append)(this.element,(0,c.$)("div.action-container"));this.actionBar=this._register(new k.ActionBar(a)),this.actionBar.push(this._register(new E.Action("banner.close","Close Banner",p.ThemeIcon.asClassName(b.widgetClose),!0,()=>{typeof o.onClose=="function"&&o.onClose()})),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}};t=De([he(0,f.IInstantiationService)],t)}),define(oe[758],re([1,0,5,6,2,30,71]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnthemedProductIconTheme=void 0,e.getIconsStyleSheet=f;function f(b){const p=new E.DisposableStore,n=p.add(new k.Emitter),s=(0,y.getIconRegistry)();return p.add(s.onDidChange(()=>n.fire())),b&&p.add(b.onDidProductIconThemeChange(()=>n.fire())),{dispose:()=>p.dispose(),onDidChange:n.event,getCSS(){const t=b?b.getProductIconTheme():new _,i={},o=[],g=[];for(const u of s.getIcons()){const l=t.getIcon(u);if(!l)continue;const a=l.font,r=`--vscode-icon-${u.id}-font-family`,d=`--vscode-icon-${u.id}-content`;a?(i[a.id]=a.definition,g.push(`${r}: ${(0,c.asCSSPropertyValue)(a.id)};`,`${d}: '${l.fontCharacter}';`),o.push(`.codicon-${u.id}:before { content: '${l.fontCharacter}'; font-family: ${(0,c.asCSSPropertyValue)(a.id)}; }`)):(g.push(`${d}: '${l.fontCharacter}'; ${r}: 'codicon';`),o.push(`.codicon-${u.id}:before { content: '${l.fontCharacter}'; }`))}for(const u in i){const l=i[u],a=l.weight?`font-weight: ${l.weight};`:"",r=l.style?`font-style: ${l.style};`:"",d=l.src.map(m=>`${(0,c.asCSSUrl)(m.location)} format('${m.format}')`).join(", ");o.push(`@font-face { src: ${d}; font-family: ${(0,c.asCSSPropertyValue)(u)};${a}${r} font-display: block; }`)}return o.push(`:root { ${g.join(" ")} }`),o.join(`
`)}}}class _{getIcon(p){const n=(0,y.getIconRegistry)();let s=p.defaults;for(;L.ThemeIcon.isThemeIcon(s);){const t=n.getIcon(s.id);if(!t)return;s=t.defaults}return s}}e.UnthemedProductIconTheme=_}),define(oe[97],re([1,0]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorScheme=void 0,e.isHighContrast=k,e.isDark=E;var c;(function(L){L.DARK="dark",L.LIGHT="light",L.HIGH_CONTRAST_DARK="hcDark",L.HIGH_CONTRAST_LIGHT="hcLight"})(c||(e.ColorScheme=c={}));function k(L){return L===c.HIGH_CONTRAST_DARK||L===c.HIGH_CONTRAST_LIGHT}function E(L){return L===c.DARK||L===c.HIGH_CONTRAST_DARK}}),define(oe[280],re([1,0,64,39,16,557,166,149,135,97,37]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewLine=e.ViewLineOptions=void 0,e.getColumnOfNodeOffset=d;const n=function(){return E.isNative?!0:!(E.isLinux||c.isFirefox||c.isSafari)}();let s=!0;class t{constructor(h,v){this.themeType=v;const C=h.options,w=C.get(50);C.get(38)==="off"?this.renderWhitespace=C.get(100):this.renderWhitespace="none",this.renderControlCharacters=C.get(95),this.spaceWidth=w.spaceWidth,this.middotWidth=w.middotWidth,this.wsmiddotWidth=w.wsmiddotWidth,this.useMonospaceOptimizations=w.isMonospace&&!C.get(33),this.canUseHalfwidthRightwardsArrow=w.canUseHalfwidthRightwardsArrow,this.lineHeight=C.get(67),this.stopRenderingLineAfter=C.get(118),this.fontLigatures=C.get(51)}equals(h){return this.themeType===h.themeType&&this.renderWhitespace===h.renderWhitespace&&this.renderControlCharacters===h.renderControlCharacters&&this.spaceWidth===h.spaceWidth&&this.middotWidth===h.middotWidth&&this.wsmiddotWidth===h.wsmiddotWidth&&this.useMonospaceOptimizations===h.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===h.canUseHalfwidthRightwardsArrow&&this.lineHeight===h.lineHeight&&this.stopRenderingLineAfter===h.stopRenderingLineAfter&&this.fontLigatures===h.fontLigatures}}e.ViewLineOptions=t;class i{static{this.CLASS_NAME="view-line"}constructor(h){this._options=h,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(h){if(this._renderedViewLine)this._renderedViewLine.domNode=(0,k.createFastDomNode)(h);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(h){this._isMaybeInvalid=!0,this._options=h}onSelectionChanged(){return(0,b.isHighContrast)(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(h,v,C,w,S){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;const D=w.getViewLineRenderingData(h),I=this._options,T=f.LineDecoration.filter(D.inlineDecorations,h,D.minColumn,D.maxColumn);let M=null;if((0,b.isHighContrast)(I.themeType)||this._options.renderWhitespace==="selection"){const O=w.selections;for(const x of O){if(x.endLineNumber<h||x.startLineNumber>h)continue;const F=x.startLineNumber===h?x.startColumn:D.minColumn,W=x.endLineNumber===h?x.endColumn:D.maxColumn;F<W&&((0,b.isHighContrast)(I.themeType)&&T.push(new f.LineDecoration(F,W,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(M||(M=[]),M.push(new _.LineRange(F-1,W-1))))}}const A=new _.RenderLineInput(I.useMonospaceOptimizations,I.canUseHalfwidthRightwardsArrow,D.content,D.continuesWithWrappedLine,D.isBasicASCII,D.containsRTL,D.minColumn-1,D.tokens,T,D.tabSize,D.startVisibleColumn,I.spaceWidth,I.middotWidth,I.wsmiddotWidth,I.stopRenderingLineAfter,I.renderWhitespace,I.renderControlCharacters,I.fontLigatures!==p.EditorFontLigatures.OFF,M);if(this._renderedViewLine&&this._renderedViewLine.input.equals(A))return!1;S.appendString('<div style="top:'),S.appendString(String(v)),S.appendString("px;height:"),S.appendString(String(C)),S.appendString('px;" class="'),S.appendString(i.CLASS_NAME),S.appendString('">');const R=(0,_.renderViewLine)(A,S);S.appendString("</div>");let N=null;return s&&n&&D.isBasicASCII&&I.useMonospaceOptimizations&&R.containsForeignElements===0&&(N=new o(this._renderedViewLine?this._renderedViewLine.domNode:null,A,R.characterMapping)),N||(N=l(this._renderedViewLine?this._renderedViewLine.domNode:null,A,R.characterMapping,R.containsRTL,R.containsForeignElements)),this._renderedViewLine=N,!0}layoutLine(h,v,C){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(v),this._renderedViewLine.domNode.setHeight(C))}getWidth(h){return this._renderedViewLine?this._renderedViewLine.getWidth(h):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof o:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof o?this._renderedViewLine.monospaceAssumptionsAreValid():s}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof o&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(h,v,C,w){if(!this._renderedViewLine)return null;v=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,v)),C=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,C));const S=this._renderedViewLine.input.stopRenderingLineAfter;if(S!==-1&&v>S+1&&C>S+1)return new y.VisibleRanges(!0,[new y.FloatHorizontalRange(this.getWidth(w),0)]);S!==-1&&v>S+1&&(v=S+1),S!==-1&&C>S+1&&(C=S+1);const D=this._renderedViewLine.getVisibleRangesForRange(h,v,C,w);return D&&D.length>0?new y.VisibleRanges(!1,D):null}getColumnOfNodeOffset(h,v){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(h,v):1}}e.ViewLine=i;class o{constructor(h,v,C){this._cachedWidth=-1,this.domNode=h,this.input=v;const w=Math.floor(v.lineContent.length/300);if(w>0){this._keyColumnPixelOffsetCache=new Float32Array(w);for(let S=0;S<w;S++)this._keyColumnPixelOffsetCache[S]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=C,this._charWidth=v.spaceWidth}getWidth(h){if(!this.domNode||this.input.lineContent.length<300){const v=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*v)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,h?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return s;if(this.input.lineContent.length<300){const h=this.getWidth(null),v=this.domNode.domNode.firstChild.offsetWidth;Math.abs(h-v)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),s=!1)}return s}toSlowRenderedLine(){return l(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(h,v,C,w){const S=this._getColumnPixelOffset(h,v,w),D=this._getColumnPixelOffset(h,C,w);return[new y.FloatHorizontalRange(S,D-S)]}_getColumnPixelOffset(h,v,C){if(v<=300){const M=this._characterMapping.getHorizontalOffset(v);return this._charWidth*M}const w=Math.floor((v-1)/300)-1,S=(w+1)*300+1;let D=-1;if(this._keyColumnPixelOffsetCache&&(D=this._keyColumnPixelOffsetCache[w],D===-1&&(D=this._actualReadPixelOffset(h,S,C),this._keyColumnPixelOffsetCache[w]=D)),D===-1){const M=this._characterMapping.getHorizontalOffset(v);return this._charWidth*M}const I=this._characterMapping.getHorizontalOffset(S),T=this._characterMapping.getHorizontalOffset(v);return D+this._charWidth*(T-I)}_getReadingTarget(h){return h.domNode.firstChild}_actualReadPixelOffset(h,v,C){if(!this.domNode)return-1;const w=this._characterMapping.getDomPosition(v),S=L.RangeUtil.readHorizontalRanges(this._getReadingTarget(this.domNode),w.partIndex,w.charIndex,w.partIndex,w.charIndex,C);return!S||S.length===0?-1:S[0].left}getColumnOfNodeOffset(h,v){return d(this._characterMapping,h,v)}}class g{constructor(h,v,C,w,S){if(this.domNode=h,this.input=v,this._characterMapping=C,this._isWhitespaceOnly=/^\s*$/.test(v.lineContent),this._containsForeignElements=S,this._cachedWidth=-1,this._pixelOffsetCache=null,!w||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let D=0,I=this._characterMapping.length;D<=I;D++)this._pixelOffsetCache[D]=-1}}_getReadingTarget(h){return h.domNode.firstChild}getWidth(h){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,h?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(h,v,C,w){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){const S=this._readPixelOffset(this.domNode,h,v,w);if(S===-1)return null;const D=this._readPixelOffset(this.domNode,h,C,w);return D===-1?null:[new y.FloatHorizontalRange(S,D-S)]}return this._readVisibleRangesForRange(this.domNode,h,v,C,w)}_readVisibleRangesForRange(h,v,C,w,S){if(C===w){const D=this._readPixelOffset(h,v,C,S);return D===-1?null:[new y.FloatHorizontalRange(D,0)]}else return this._readRawVisibleRangesForRange(h,C,w,S)}_readPixelOffset(h,v,C,w){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(w);const S=this._getReadingTarget(h);return S.firstChild?(w.markDidDomLayout(),S.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){const S=this._pixelOffsetCache[C];if(S!==-1)return S;const D=this._actualReadPixelOffset(h,v,C,w);return this._pixelOffsetCache[C]=D,D}return this._actualReadPixelOffset(h,v,C,w)}_actualReadPixelOffset(h,v,C,w){if(this._characterMapping.length===0){const T=L.RangeUtil.readHorizontalRanges(this._getReadingTarget(h),0,0,0,0,w);return!T||T.length===0?-1:T[0].left}if(C===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(w);const S=this._characterMapping.getDomPosition(C),D=L.RangeUtil.readHorizontalRanges(this._getReadingTarget(h),S.partIndex,S.charIndex,S.partIndex,S.charIndex,w);if(!D||D.length===0)return-1;const I=D[0].left;if(this.input.isBasicASCII){const T=this._characterMapping.getHorizontalOffset(C),M=Math.round(this.input.spaceWidth*T);if(Math.abs(M-I)<=1)return M}return I}_readRawVisibleRangesForRange(h,v,C,w){if(v===1&&C===this._characterMapping.length)return[new y.FloatHorizontalRange(0,this.getWidth(w))];const S=this._characterMapping.getDomPosition(v),D=this._characterMapping.getDomPosition(C);return L.RangeUtil.readHorizontalRanges(this._getReadingTarget(h),S.partIndex,S.charIndex,D.partIndex,D.charIndex,w)}getColumnOfNodeOffset(h,v){return d(this._characterMapping,h,v)}}class u extends g{_readVisibleRangesForRange(h,v,C,w,S){const D=super._readVisibleRangesForRange(h,v,C,w,S);if(!D||D.length===0||C===w||C===1&&w===this._characterMapping.length)return D;if(!this.input.containsRTL){const I=this._readPixelOffset(h,v,w,S);if(I!==-1){const T=D[D.length-1];T.left<I&&(T.width=I-T.left)}}return D}}const l=function(){return c.isWebKit?a:r}();function a(m,h,v,C,w){return new u(m,h,v,C,w)}function r(m,h,v,C,w){return new g(m,h,v,C,w)}function d(m,h,v){const C=h.textContent.length;let w=-1;for(;h;)h=h.previousSibling,w++;return m.getColumn(new _.DomPosition(w,v),C)}}),define(oe[409],re([1,0,185,57,280,9,4,93,5,327,98]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseTargetFactory=e.HitTestContext=e.MouseTarget=e.PointerHandlerLastRenderData=void 0;class n{constructor(w=null){this.hitTarget=w,this.type=0}}class s{get hitTarget(){return this.spanNode}constructor(w,S,D){this.position=w,this.spanNode=S,this.injectedText=D,this.type=1}}var t;(function(C){function w(S,D,I){const T=S.getPositionFromDOMInfo(D,I);return T?new s(T,D,null):new n(D)}C.createFromDOMInfo=w})(t||(t={}));class i{constructor(w,S){this.lastViewCursorsRenderData=w,this.lastTextareaPosition=S}}e.PointerHandlerLastRenderData=i;class o{static _deduceRage(w,S=null){return!S&&w?new y.Range(w.lineNumber,w.column,w.lineNumber,w.column):S??null}static createUnknown(w,S,D){return{type:0,element:w,mouseColumn:S,position:D,range:this._deduceRage(D)}}static createTextarea(w,S){return{type:1,element:w,mouseColumn:S,position:null,range:null}}static createMargin(w,S,D,I,T,M){return{type:w,element:S,mouseColumn:D,position:I,range:T,detail:M}}static createViewZone(w,S,D,I,T){return{type:w,element:S,mouseColumn:D,position:I,range:this._deduceRage(I),detail:T}}static createContentText(w,S,D,I,T){return{type:6,element:w,mouseColumn:S,position:D,range:this._deduceRage(D,I),detail:T}}static createContentEmpty(w,S,D,I){return{type:7,element:w,mouseColumn:S,position:D,range:this._deduceRage(D),detail:I}}static createContentWidget(w,S,D){return{type:9,element:w,mouseColumn:S,position:null,range:null,detail:D}}static createScrollbar(w,S,D){return{type:11,element:w,mouseColumn:S,position:D,range:this._deduceRage(D)}}static createOverlayWidget(w,S,D){return{type:12,element:w,mouseColumn:S,position:null,range:null,detail:D}}static createOutsideEditor(w,S,D,I){return{type:13,element:null,mouseColumn:w,position:S,range:this._deduceRage(S),outsidePosition:D,outsideDistance:I}}static _typeToString(w){return w===1?"TEXTAREA":w===2?"GUTTER_GLYPH_MARGIN":w===3?"GUTTER_LINE_NUMBERS":w===4?"GUTTER_LINE_DECORATIONS":w===5?"GUTTER_VIEW_ZONE":w===6?"CONTENT_TEXT":w===7?"CONTENT_EMPTY":w===8?"CONTENT_VIEW_ZONE":w===9?"CONTENT_WIDGET":w===10?"OVERVIEW_RULER":w===11?"SCROLLBAR":w===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(w){return this._typeToString(w.type)+": "+w.position+" - "+w.range+" - "+JSON.stringify(w.detail)}}e.MouseTarget=o;class g{static isTextArea(w){return w.length===2&&w[0]===3&&w[1]===7}static isChildOfViewLines(w){return w.length>=4&&w[0]===3&&w[3]===8}static isStrictChildOfViewLines(w){return w.length>4&&w[0]===3&&w[3]===8}static isChildOfScrollableElement(w){return w.length>=2&&w[0]===3&&w[1]===6}static isChildOfMinimap(w){return w.length>=2&&w[0]===3&&w[1]===9}static isChildOfContentWidgets(w){return w.length>=4&&w[0]===3&&w[3]===1}static isChildOfOverflowGuard(w){return w.length>=1&&w[0]===3}static isChildOfOverflowingContentWidgets(w){return w.length>=1&&w[0]===2}static isChildOfOverlayWidgets(w){return w.length>=2&&w[0]===3&&w[1]===4}static isChildOfOverflowingOverlayWidgets(w){return w.length>=1&&w[0]===5}}class u{constructor(w,S,D){this.viewModel=w.viewModel;const I=w.configuration.options;this.layoutInfo=I.get(146),this.viewDomNode=S.viewDomNode,this.overflowWidgetsDomNode=S.overflowWidgetsDomNode??null,this.lineHeight=I.get(67),this.stickyTabStops=I.get(117),this.typicalHalfwidthCharacterWidth=I.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=D,this._context=w,this._viewHelper=S}getZoneAtCoord(w){return u.getZoneAtCoord(this._context,w)}static getZoneAtCoord(w,S){const D=w.viewLayout.getWhitespaceAtVerticalOffset(S);if(D){const I=D.verticalOffset+D.height/2,T=w.viewModel.getLineCount();let M=null,A,R=null;return D.afterLineNumber!==T&&(R=new L.Position(D.afterLineNumber+1,1)),D.afterLineNumber>0&&(M=new L.Position(D.afterLineNumber,w.viewModel.getLineMaxColumn(D.afterLineNumber))),R===null?A=M:M===null?A=R:S<I?A=M:A=R,{viewZoneId:D.id,afterLineNumber:D.afterLineNumber,positionBefore:M,positionAfter:R,position:A}}return null}getFullLineRangeAtCoord(w){if(this._context.viewLayout.isAfterLines(w)){const I=this._context.viewModel.getLineCount(),T=this._context.viewModel.getLineMaxColumn(I);return{range:new y.Range(I,T,I,T),isAfterLines:!0}}const S=this._context.viewLayout.getLineNumberAtVerticalOffset(w),D=this._context.viewModel.getLineMaxColumn(S);return{range:new y.Range(S,1,S,D),isAfterLines:!1}}getLineNumberAtVerticalOffset(w){return this._context.viewLayout.getLineNumberAtVerticalOffset(w)}isAfterLines(w){return this._context.viewLayout.isAfterLines(w)}isInTopPadding(w){return this._context.viewLayout.isInTopPadding(w)}isInBottomPadding(w){return this._context.viewLayout.isInBottomPadding(w)}getVerticalOffsetForLineNumber(w){return this._context.viewLayout.getVerticalOffsetForLineNumber(w)}findAttribute(w,S){return u._findAttribute(w,S,this._viewHelper.viewDomNode)}static _findAttribute(w,S,D){for(;w&&w!==w.ownerDocument.body;){if(w.hasAttribute&&w.hasAttribute(S))return w.getAttribute(S);if(w===D)return null;w=w.parentNode}return null}getLineWidth(w){return this._viewHelper.getLineWidth(w)}visibleRangeForPosition(w,S){return this._viewHelper.visibleRangeForPosition(w,S)}getPositionFromDOMInfo(w,S){return this._viewHelper.getPositionFromDOMInfo(w,S)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}e.HitTestContext=u;class l{constructor(w,S,D,I){this.editorPos=S,this.pos=D,this.relativePos=I,this.mouseVerticalOffset=Math.max(0,w.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=w.getCurrentScrollLeft()+this.relativePos.x-w.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<w.layoutInfo.contentLeft&&this.relativePos.x>=w.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,m._getMouseColumn(this.mouseContentHorizontalOffset,w.typicalHalfwidthCharacterWidth))}}class a extends l{get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&this._targetElement&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=k.PartFingerprints.collect(this.target,this._targetElement)),this._targetPathCacheValue}constructor(w,S,D,I,T,M=null){super(w,S,D,I),this.hitTestResult=new p.Lazy(()=>m.doHitTest(this._ctx,this)),this._targetPathCacheElement=null,this._targetPathCacheValue=new Uint8Array(0),this._targetElement=null,this._ctx=w,this._eventTarget=T,this._targetElement=M;const A=!!this._eventTarget;this._useHitTestTarget=!A}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(w=null){return w&&w.column<this._ctx.viewModel.getLineMaxColumn(w.lineNumber)?f.CursorColumns.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(w.lineNumber),w.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(w=null){return o.createUnknown(this.target,this._getMouseColumn(w),w)}fulfillTextarea(){return o.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(w,S,D,I){return o.createMargin(w,this.target,this._getMouseColumn(S),S,D,I)}fulfillViewZone(w,S,D){return o.createViewZone(w,this.target,this._getMouseColumn(S),S,D)}fulfillContentText(w,S,D){return o.createContentText(this.target,this._getMouseColumn(w),w,S,D)}fulfillContentEmpty(w,S){return o.createContentEmpty(this.target,this._getMouseColumn(w),w,S)}fulfillContentWidget(w){return o.createContentWidget(this.target,this._getMouseColumn(),w)}fulfillScrollbar(w){return o.createScrollbar(this.target,this._getMouseColumn(w),w)}fulfillOverlayWidget(w){return o.createOverlayWidget(this.target,this._getMouseColumn(),w)}}const r={isAfterLines:!0};function d(C){return{isAfterLines:!1,horizontalDistanceToText:C}}class m{constructor(w,S){this._context=w,this._viewHelper=S}mouseTargetIsWidget(w){const S=w.target,D=k.PartFingerprints.collect(S,this._viewHelper.viewDomNode);return!!(g.isChildOfContentWidgets(D)||g.isChildOfOverflowingContentWidgets(D)||g.isChildOfOverlayWidgets(D)||g.isChildOfOverflowingOverlayWidgets(D))}createMouseTargetForView(w,S,D,I,T){const M=new u(this._context,this._viewHelper,w),A=new a(M,S,D,I,T,M.viewDomNode);try{const R=m._createMouseTarget(M,A);if(R.type===6&&M.stickyTabStops&&R.position!==null){const N=m._snapToSoftTabBoundary(R.position,M.viewModel),O=y.Range.fromPositions(N,N).plusRange(R.range);return A.fulfillContentText(N,O,R.detail)}return R}catch{return A.fulfillUnknown()}}createMouseTargetForOverflowWidgetsDomNode(w,S,D,I,T){const M=new u(this._context,this._viewHelper,w),A=new a(M,S,D,I,T,M.overflowWidgetsDomNode);try{return m._createMouseTarget(M,A)}catch{return A.fulfillUnknown()}}static _createMouseTarget(w,S){if(S.target===null)return S.fulfillUnknown();const D=S;let I=null;return!g.isChildOfOverflowGuard(S.targetPath)&&!g.isChildOfOverflowingContentWidgets(S.targetPath)&&!g.isChildOfOverflowingOverlayWidgets(S.targetPath)&&(I=I||S.fulfillUnknown()),I=I||m._hitTestContentWidget(w,D),I=I||m._hitTestOverlayWidget(w,D),I=I||m._hitTestMinimap(w,D),I=I||m._hitTestScrollbarSlider(w,D),I=I||m._hitTestViewZone(w,D),I=I||m._hitTestMargin(w,D),I=I||m._hitTestViewCursor(w,D),I=I||m._hitTestTextArea(w,D),I=I||m._hitTestViewLines(w,D),I=I||m._hitTestScrollbar(w,D),I||S.fulfillUnknown()}static _hitTestContentWidget(w,S){if(g.isChildOfContentWidgets(S.targetPath)||g.isChildOfOverflowingContentWidgets(S.targetPath)){const D=w.findAttribute(S.target,"widgetId");return D?S.fulfillContentWidget(D):S.fulfillUnknown()}return null}static _hitTestOverlayWidget(w,S){if(g.isChildOfOverlayWidgets(S.targetPath)||g.isChildOfOverflowingOverlayWidgets(S.targetPath)){const D=w.findAttribute(S.target,"widgetId");return D?S.fulfillOverlayWidget(D):S.fulfillUnknown()}return null}static _hitTestViewCursor(w,S){if(S.target){const D=w.lastRenderData.lastViewCursorsRenderData;for(const I of D)if(S.target===I.domNode)return S.fulfillContentText(I.position,null,{mightBeForeignElement:!1,injectedText:null})}if(S.isInContentArea){const D=w.lastRenderData.lastViewCursorsRenderData,I=S.mouseContentHorizontalOffset,T=S.mouseVerticalOffset;for(const M of D){if(I<M.contentLeft||I>M.contentLeft+M.width)continue;const A=w.getVerticalOffsetForLineNumber(M.position.lineNumber);if(A<=T&&T<=A+M.height)return S.fulfillContentText(M.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(w,S){const D=w.getZoneAtCoord(S.mouseVerticalOffset);if(D){const I=S.isInContentArea?8:5;return S.fulfillViewZone(I,D.position,D)}return null}static _hitTestTextArea(w,S){return g.isTextArea(S.targetPath)?w.lastRenderData.lastTextareaPosition?S.fulfillContentText(w.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):S.fulfillTextarea():null}static _hitTestMargin(w,S){if(S.isInMarginArea){const D=w.getFullLineRangeAtCoord(S.mouseVerticalOffset),I=D.range.getStartPosition();let T=Math.abs(S.relativePos.x);const M={isAfterLines:D.isAfterLines,glyphMarginLeft:w.layoutInfo.glyphMarginLeft,glyphMarginWidth:w.layoutInfo.glyphMarginWidth,lineNumbersWidth:w.layoutInfo.lineNumbersWidth,offsetX:T};if(T-=w.layoutInfo.glyphMarginLeft,T<=w.layoutInfo.glyphMarginWidth){const A=w.viewModel.coordinatesConverter.convertViewPositionToModelPosition(D.range.getStartPosition()),R=w.viewModel.glyphLanes.getLanesAtLine(A.lineNumber);return M.glyphMarginLane=R[Math.floor(T/w.lineHeight)],S.fulfillMargin(2,I,D.range,M)}return T-=w.layoutInfo.glyphMarginWidth,T<=w.layoutInfo.lineNumbersWidth?S.fulfillMargin(3,I,D.range,M):(T-=w.layoutInfo.lineNumbersWidth,S.fulfillMargin(4,I,D.range,M))}return null}static _hitTestViewLines(w,S){if(!g.isChildOfViewLines(S.targetPath))return null;if(w.isInTopPadding(S.mouseVerticalOffset))return S.fulfillContentEmpty(new L.Position(1,1),r);if(w.isAfterLines(S.mouseVerticalOffset)||w.isInBottomPadding(S.mouseVerticalOffset)){const I=w.viewModel.getLineCount(),T=w.viewModel.getLineMaxColumn(I);return S.fulfillContentEmpty(new L.Position(I,T),r)}if(g.isStrictChildOfViewLines(S.targetPath)){const I=w.getLineNumberAtVerticalOffset(S.mouseVerticalOffset);if(w.viewModel.getLineLength(I)===0){const M=w.getLineWidth(I),A=d(S.mouseContentHorizontalOffset-M);return S.fulfillContentEmpty(new L.Position(I,1),A)}const T=w.getLineWidth(I);if(S.mouseContentHorizontalOffset>=T){const M=d(S.mouseContentHorizontalOffset-T),A=new L.Position(I,w.viewModel.getLineMaxColumn(I));return S.fulfillContentEmpty(A,M)}}const D=S.hitTestResult.value;return D.type===1?m.createMouseTargetFromHitTestPosition(w,S,D.spanNode,D.position,D.injectedText):S.wouldBenefitFromHitTestTargetSwitch?(S.switchToHitTestTarget(),this._createMouseTarget(w,S)):S.fulfillUnknown()}static _hitTestMinimap(w,S){if(g.isChildOfMinimap(S.targetPath)){const D=w.getLineNumberAtVerticalOffset(S.mouseVerticalOffset),I=w.viewModel.getLineMaxColumn(D);return S.fulfillScrollbar(new L.Position(D,I))}return null}static _hitTestScrollbarSlider(w,S){if(g.isChildOfScrollableElement(S.targetPath)&&S.target&&S.target.nodeType===1){const D=S.target.className;if(D&&/\b(slider|scrollbar)\b/.test(D)){const I=w.getLineNumberAtVerticalOffset(S.mouseVerticalOffset),T=w.viewModel.getLineMaxColumn(I);return S.fulfillScrollbar(new L.Position(I,T))}}return null}static _hitTestScrollbar(w,S){if(g.isChildOfScrollableElement(S.targetPath)){const D=w.getLineNumberAtVerticalOffset(S.mouseVerticalOffset),I=w.viewModel.getLineMaxColumn(D);return S.fulfillScrollbar(new L.Position(D,I))}return null}getMouseColumn(w){const S=this._context.configuration.options,D=S.get(146),I=this._context.viewLayout.getCurrentScrollLeft()+w.x-D.contentLeft;return m._getMouseColumn(I,S.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(w,S){return w<0?1:Math.round(w/S)+1}static createMouseTargetFromHitTestPosition(w,S,D,I,T){const M=I.lineNumber,A=I.column,R=w.getLineWidth(M);if(S.mouseContentHorizontalOffset>R){const K=d(S.mouseContentHorizontalOffset-R);return S.fulfillContentEmpty(I,K)}const N=w.visibleRangeForPosition(M,A);if(!N)return S.fulfillUnknown(I);const O=N.left;if(Math.abs(S.mouseContentHorizontalOffset-O)<1)return S.fulfillContentText(I,null,{mightBeForeignElement:!!T,injectedText:T});const x=[];if(x.push({offset:N.left,column:A}),A>1){const K=w.visibleRangeForPosition(M,A-1);K&&x.push({offset:K.left,column:A-1})}const F=w.viewModel.getLineMaxColumn(M);if(A<F){const K=w.visibleRangeForPosition(M,A+1);K&&x.push({offset:K.left,column:A+1})}x.sort((K,U)=>K.offset-U.offset);const W=S.pos.toClientCoordinates(_.getWindow(w.viewDomNode)),z=D.getBoundingClientRect(),q=z.left<=W.clientX&&W.clientX<=z.right;let H=null;for(let K=1;K<x.length;K++){const U=x[K-1],Y=x[K];if(U.offset<=S.mouseContentHorizontalOffset&&S.mouseContentHorizontalOffset<=Y.offset){H=new y.Range(M,U.column,M,Y.column);const Q=Math.abs(U.offset-S.mouseContentHorizontalOffset),X=Math.abs(Y.offset-S.mouseContentHorizontalOffset);I=Q<X?new L.Position(M,U.column):new L.Position(M,Y.column);break}}return S.fulfillContentText(I,H,{mightBeForeignElement:!q||!!T,injectedText:T})}static _doHitTestWithCaretRangeFromPoint(w,S){const D=w.getLineNumberAtVerticalOffset(S.mouseVerticalOffset),I=w.getVerticalOffsetForLineNumber(D),T=I+w.lineHeight;if(!(D===w.viewModel.getLineCount()&&S.mouseVerticalOffset>T)){const A=Math.floor((I+T)/2);let R=S.pos.y+(A-S.mouseVerticalOffset);R<=S.editorPos.y&&(R=S.editorPos.y+1),R>=S.editorPos.y+S.editorPos.height&&(R=S.editorPos.y+S.editorPos.height-1);const N=new c.PageCoordinates(S.pos.x,R),O=this._actualDoHitTestWithCaretRangeFromPoint(w,N.toClientCoordinates(_.getWindow(w.viewDomNode)));if(O.type===1)return O}return this._actualDoHitTestWithCaretRangeFromPoint(w,S.pos.toClientCoordinates(_.getWindow(w.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(w,S){const D=_.getShadowRoot(w.viewDomNode);let I;if(D?typeof D.caretRangeFromPoint>"u"?I=h(D,S.clientX,S.clientY):I=D.caretRangeFromPoint(S.clientX,S.clientY):I=w.viewDomNode.ownerDocument.caretRangeFromPoint(S.clientX,S.clientY),!I||!I.startContainer)return new n;const T=I.startContainer;if(T.nodeType===T.TEXT_NODE){const M=T.parentNode,A=M?M.parentNode:null,R=A?A.parentNode:null;return(R&&R.nodeType===R.ELEMENT_NODE?R.className:null)===E.ViewLine.CLASS_NAME?t.createFromDOMInfo(w,M,I.startOffset):new n(T.parentNode)}else if(T.nodeType===T.ELEMENT_NODE){const M=T.parentNode,A=M?M.parentNode:null;return(A&&A.nodeType===A.ELEMENT_NODE?A.className:null)===E.ViewLine.CLASS_NAME?t.createFromDOMInfo(w,T,T.textContent.length):new n(T)}return new n}static _doHitTestWithCaretPositionFromPoint(w,S){const D=w.viewDomNode.ownerDocument.caretPositionFromPoint(S.clientX,S.clientY);if(D.offsetNode.nodeType===D.offsetNode.TEXT_NODE){const I=D.offsetNode.parentNode,T=I?I.parentNode:null,M=T?T.parentNode:null;return(M&&M.nodeType===M.ELEMENT_NODE?M.className:null)===E.ViewLine.CLASS_NAME?t.createFromDOMInfo(w,D.offsetNode.parentNode,D.offset):new n(D.offsetNode.parentNode)}if(D.offsetNode.nodeType===D.offsetNode.ELEMENT_NODE){const I=D.offsetNode.parentNode,T=I&&I.nodeType===I.ELEMENT_NODE?I.className:null,M=I?I.parentNode:null,A=M&&M.nodeType===M.ELEMENT_NODE?M.className:null;if(T===E.ViewLine.CLASS_NAME){const R=D.offsetNode.childNodes[Math.min(D.offset,D.offsetNode.childNodes.length-1)];if(R)return t.createFromDOMInfo(w,R,0)}else if(A===E.ViewLine.CLASS_NAME)return t.createFromDOMInfo(w,D.offsetNode,0)}return new n(D.offsetNode)}static _snapToSoftTabBoundary(w,S){const D=S.getLineContent(w.lineNumber),{tabSize:I}=S.model.getOptions(),T=b.AtomicTabMoveOperations.atomicPosition(D,w.column-1,I,2);return T!==-1?new L.Position(w.lineNumber,T+1):w}static doHitTest(w,S){let D=new n;if(typeof w.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?D=this._doHitTestWithCaretRangeFromPoint(w,S):w.viewDomNode.ownerDocument.caretPositionFromPoint&&(D=this._doHitTestWithCaretPositionFromPoint(w,S.pos.toClientCoordinates(_.getWindow(w.viewDomNode)))),D.type===1){const I=w.viewModel.getInjectedTextAt(D.position),T=w.viewModel.normalizePosition(D.position,2);(I||!T.equals(D.position))&&(D=new s(T,D.spanNode,I))}return D}}e.MouseTargetFactory=m;function h(C,w,S){const D=document.createRange();let I=C.elementFromPoint(w,S);if(I!==null){for(;I&&I.firstChild&&I.firstChild.nodeType!==I.firstChild.TEXT_NODE&&I.lastChild&&I.lastChild.firstChild;)I=I.lastChild;const T=I.getBoundingClientRect(),M=_.getWindow(I),A=M.getComputedStyle(I,null).getPropertyValue("font-style"),R=M.getComputedStyle(I,null).getPropertyValue("font-variant"),N=M.getComputedStyle(I,null).getPropertyValue("font-weight"),O=M.getComputedStyle(I,null).getPropertyValue("font-size"),x=M.getComputedStyle(I,null).getPropertyValue("line-height"),F=M.getComputedStyle(I,null).getPropertyValue("font-family"),W=`${A} ${R} ${N} ${O}/${x} ${F}`,z=I.innerText;let q=T.left,H=0,K;if(w>T.left+T.width)H=z.length;else{const U=v.getInstance();for(let Y=0;Y<z.length+1;Y++){if(K=U.getCharWidth(z.charAt(Y),W)/2,q+=K,w<q){H=Y;break}q+=K}}D.setStart(I.firstChild,H),D.setEnd(I.firstChild,H)}return D}class v{static{this._INSTANCE=null}static getInstance(){return v._INSTANCE||(v._INSTANCE=new v),v._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(w,S){const D=w+S;if(this._cache[D])return this._cache[D];const I=this._canvas.getContext("2d");I.font=S;const M=I.measureText(w).width;return this._cache[D]=M,M}}}),define(oe[759],re([1,0,5,74,2,16,409,185,167,9,23,173,84]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MouseHandler=void 0;class t extends n.ViewEventHandler{constructor(a,r,d){super(),this._mouseLeaveMonitor=null,this._mouseOnOverflowWidgetsDomNode=!1,this._mouseOnViewDomNode=!1,this._context=a,this.viewController=r,this.viewHelper=d,this.mouseTargetFactory=new y.MouseTargetFactory(this._context,d),this._mouseDownOperation=this._register(new i(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(C,w)=>this._createMouseTargetForView(C,w),C=>this._getMouseColumn(C))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(146).height;const m=new f.EditorMouseEventFactory(this.viewHelper.viewDomNode);this._register(m.onContextMenu(this.viewHelper.viewDomNode,C=>this._onContextMenu(C,!0))),this._register(m.onMouseMove(this.viewHelper.viewDomNode,C=>{this._mouseOnViewDomNode=!0,this._onMouseMoveOverView(C),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=c.addDisposableListener(this.viewHelper.viewDomNode.ownerDocument,"mousemove",w=>{this.viewHelper.viewDomNode.contains(w.target)||(this._mouseOnViewDomNode=!1,setTimeout(()=>{this._mouseOnOverflowWidgetsDomNode||this._onMouseLeave(new f.EditorMouseEvent(w,!1,this.viewHelper.viewDomNode))},0))}))})),this._register(m.onMouseUp(this.viewHelper.viewDomNode,C=>this._onMouseUp(C))),this._register(m.onMouseLeave(this.viewHelper.viewDomNode,C=>{this._mouseOnViewDomNode=!1,setTimeout(()=>{this._mouseOnOverflowWidgetsDomNode||this._onMouseLeave(C)},0)}));const h=this.viewHelper.overflowWidgetsDomNode;h&&(this._register(m.onMouseMove(h,C=>{this._mouseOnOverflowWidgetsDomNode=!0,this._mouseLeaveMonitor?.dispose(),this._mouseLeaveMonitor=null,this._onMouseMoveOverOverflowWidgetsDomNode(C)})),this._register(m.onMouseLeave(h,C=>{this._mouseOnOverflowWidgetsDomNode=!1,setTimeout(()=>{this._mouseOnViewDomNode||this._onMouseLeave(C)},0)})));let v=0;this._register(m.onPointerDown(this.viewHelper.viewDomNode,(C,w)=>{v=w})),this._register(c.addDisposableListener(this.viewHelper.viewDomNode,c.EventType.POINTER_UP,C=>{this._mouseDownOperation.onPointerUp()})),this._register(m.onMouseDown(this.viewHelper.viewDomNode,C=>this._onMouseDown(C,v))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const a=s.MouseWheelClassifier.INSTANCE;let r=0,d=_.EditorZoom.getZoomLevel(),m=!1,h=0;const v=w=>{if(this.viewController.emitMouseWheel(w),!this._context.configuration.options.get(76))return;const S=new k.StandardWheelEvent(w);if(a.acceptStandardWheelEvent(S),a.isPhysicalMouseWheel()){if(C(w)){const D=_.EditorZoom.getZoomLevel(),I=S.deltaY>0?1:-1;_.EditorZoom.setZoomLevel(D+I),S.preventDefault(),S.stopPropagation()}}else Date.now()-r>50&&(d=_.EditorZoom.getZoomLevel(),m=C(w),h=0),r=Date.now(),h+=S.deltaY,m&&(_.EditorZoom.setZoomLevel(d+h/5),S.preventDefault(),S.stopPropagation())};this._register(c.addDisposableListener(this.viewHelper.viewDomNode,c.EventType.MOUSE_WHEEL,v,{capture:!0,passive:!1}));function C(w){return L.isMacintosh?(w.metaKey||w.ctrlKey)&&!w.shiftKey&&!w.altKey:w.ctrlKey&&!w.metaKey&&!w.shiftKey&&!w.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(a){if(a.hasChanged(146)){const r=this._context.configuration.options.get(146).height;this._height!==r&&(this._height=r,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(a){return this._mouseDownOperation.onCursorStateChanged(a),!1}onFocusChanged(a){return!1}getTargetAtClientPoint(a,r){const m=new f.ClientCoordinates(a,r).toPageCoordinates(c.getWindow(this.viewHelper.viewDomNode)),h=(0,f.createEditorPagePosition)(this.viewHelper.viewDomNode);if(m.y<h.y||m.y>h.y+h.height||m.x<h.x||m.x>h.x+h.width)return null;const v=(0,f.createCoordinatesRelativeToEditor)(this.viewHelper.viewDomNode,h,m);return this.mouseTargetFactory.createMouseTargetForView(this.viewHelper.getLastRenderData(),h,m,v,null)}_createMouseTargetForView(a,r){let d=a.target;if(!this.viewHelper.viewDomNode.contains(d)){const m=c.getShadowRoot(this.viewHelper.viewDomNode);m&&(d=m.elementsFromPoint(a.posx,a.posy).find(h=>this.viewHelper.viewDomNode.contains(h)))}return this.mouseTargetFactory.createMouseTargetForView(this.viewHelper.getLastRenderData(),a.editorPos,a.pos,a.relativePos,r?d:null)}_createMouseTargetForOverflowWidgetsDomNode(a){return this.mouseTargetFactory.createMouseTargetForOverflowWidgetsDomNode(this.viewHelper.getLastRenderData(),a.editorPos,a.pos,a.relativePos,a.target)}_getMouseColumn(a){return this.mouseTargetFactory.getMouseColumn(a.relativePos)}_onContextMenu(a,r){this.viewController.emitContextMenu({event:a,target:this._createMouseTargetForView(a,r)})}_onMouseMoveOverView(a){this._onMouseMove(a,this._createMouseTargetForView(a,!0))}_onMouseMoveOverOverflowWidgetsDomNode(a){this._onMouseMove(a,this._createMouseTargetForOverflowWidgetsDomNode(a))}_onMouseMove(a,r){this._shouldIgnoreMouseMoveEvent(a)||this.viewController.emitMouseMove({event:a,target:r})}_shouldIgnoreMouseMoveEvent(a){return this.mouseTargetFactory.mouseTargetIsWidget(a)||a.preventDefault(),!!(this._mouseDownOperation.isActive()||a.timestamp<this.lastMouseLeaveTime)}_onMouseLeave(a){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:a,target:null})}_onMouseUp(a){this.viewController.emitMouseUp({event:a,target:this._createMouseTargetForView(a,!0)})}_onMouseDown(a,r){const d=this._createMouseTargetForView(a,!0),m=d.type===6||d.type===7,h=d.type===2||d.type===3||d.type===4,v=d.type===3,C=this._context.configuration.options.get(110),w=d.type===8||d.type===5,S=d.type===9;let D=a.leftButton||a.middleButton;L.isMacintosh&&a.leftButton&&a.ctrlKey&&(D=!1);const I=()=>{a.preventDefault(),this.viewHelper.focusTextArea()};if(D&&(m||v&&C))I(),this._mouseDownOperation.start(d.type,a,r);else if(h)a.preventDefault();else if(w){const T=d.detail;D&&this.viewHelper.shouldSuppressMouseDownOnViewZone(T.viewZoneId)&&(I(),this._mouseDownOperation.start(d.type,a,r),a.preventDefault())}else S&&this.viewHelper.shouldSuppressMouseDownOnWidget(d.detail)&&(I(),a.preventDefault());this.viewController.emitMouseDown({event:a,target:d})}}e.MouseHandler=t;class i extends E.Disposable{constructor(a,r,d,m,h,v){super(),this._context=a,this._viewController=r,this._viewHelper=d,this._mouseTargetFactory=m,this._createMouseTarget=h,this._getMouseColumn=v,this._mouseMoveMonitor=this._register(new f.GlobalEditorPointerMoveMonitor(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new o(this._context,this._viewHelper,this._mouseTargetFactory,(C,w,S)=>this._dispatchMouse(C,w,S))),this._mouseState=new u,this._currentSelection=new p.Selection(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(a){this._lastMouseEvent=a,this._mouseState.setModifiers(a);const r=this._findMousePosition(a,!1);r&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:a,target:r}):r.type===13&&(r.outsidePosition==="above"||r.outsidePosition==="below")?this._topBottomDragScrolling.start(r,a):(this._topBottomDragScrolling.stop(),this._dispatchMouse(r,!0,1)))}start(a,r,d){this._lastMouseEvent=r,this._mouseState.setStartedOnLineNumbers(a===3),this._mouseState.setStartButtons(r),this._mouseState.setModifiers(r);const m=this._findMousePosition(r,!0);if(!m||!m.position)return;this._mouseState.trySetCount(r.detail,m.position),r.detail=this._mouseState.count;const h=this._context.configuration.options;if(!h.get(92)&&h.get(35)&&!h.get(22)&&!this._mouseState.altKey&&r.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&m.type===6&&m.position&&this._currentSelection.containsPosition(m.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,d,r.buttons,v=>this._onMouseDownThenMove(v),v=>{const C=this._findMousePosition(this._lastMouseEvent,!1);c.isKeyboardEvent(v)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:C?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(m,r.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,d,r.buttons,v=>this._onMouseDownThenMove(v),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(a){this._currentSelection=a.selections[0]}_getPositionOutsideEditor(a){const r=a.editorPos,d=this._context.viewModel,m=this._context.viewLayout,h=this._getMouseColumn(a);if(a.posy<r.y){const C=r.y-a.posy,w=Math.max(m.getCurrentScrollTop()-C,0),S=y.HitTestContext.getZoneAtCoord(this._context,w);if(S){const I=this._helpPositionJumpOverViewZone(S);if(I)return y.MouseTarget.createOutsideEditor(h,I,"above",C)}const D=m.getLineNumberAtVerticalOffset(w);return y.MouseTarget.createOutsideEditor(h,new b.Position(D,1),"above",C)}if(a.posy>r.y+r.height){const C=a.posy-r.y-r.height,w=m.getCurrentScrollTop()+a.relativePos.y,S=y.HitTestContext.getZoneAtCoord(this._context,w);if(S){const I=this._helpPositionJumpOverViewZone(S);if(I)return y.MouseTarget.createOutsideEditor(h,I,"below",C)}const D=m.getLineNumberAtVerticalOffset(w);return y.MouseTarget.createOutsideEditor(h,new b.Position(D,d.getLineMaxColumn(D)),"below",C)}const v=m.getLineNumberAtVerticalOffset(m.getCurrentScrollTop()+a.relativePos.y);if(a.posx<r.x){const C=r.x-a.posx;return y.MouseTarget.createOutsideEditor(h,new b.Position(v,1),"left",C)}if(a.posx>r.x+r.width){const C=a.posx-r.x-r.width;return y.MouseTarget.createOutsideEditor(h,new b.Position(v,d.getLineMaxColumn(v)),"right",C)}return null}_findMousePosition(a,r){const d=this._getPositionOutsideEditor(a);if(d)return d;const m=this._createMouseTarget(a,r);if(!m.position)return null;if(m.type===8||m.type===5){const v=this._helpPositionJumpOverViewZone(m.detail);if(v)return y.MouseTarget.createViewZone(m.type,m.element,m.mouseColumn,v,m.detail)}return m}_helpPositionJumpOverViewZone(a){const r=new b.Position(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),d=a.positionBefore,m=a.positionAfter;return d&&m?d.isBefore(r)?d:m:null}_dispatchMouse(a,r,d){a.position&&this._viewController.dispatchMouse({position:a.position,mouseColumn:a.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:d,inSelectionMode:r,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:a.type===6&&a.detail.injectedText!==null})}}class o extends E.Disposable{constructor(a,r,d,m){super(),this._context=a,this._viewHelper=r,this._mouseTargetFactory=d,this._dispatchMouse=m,this._operation=null}dispose(){super.dispose(),this.stop()}start(a,r){this._operation?this._operation.setPosition(a,r):this._operation=new g(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,a,r)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class g extends E.Disposable{constructor(a,r,d,m,h,v){super(),this._context=a,this._viewHelper=r,this._mouseTargetFactory=d,this._dispatchMouse=m,this._position=h,this._mouseEvent=v,this._lastTime=Date.now(),this._animationFrameDisposable=c.scheduleAtNextAnimationFrame(c.getWindow(v.browserEvent),()=>this._execute())}dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(a,r){this._position=a,this._mouseEvent=r}_tick(){const a=Date.now(),r=a-this._lastTime;return this._lastTime=a,r}_getScrollSpeed(){const a=this._context.configuration.options.get(67),r=this._context.configuration.options.get(146).height/a,d=this._position.outsideDistance/a;return d<=1.5?Math.max(30,r*(1+d)):d<=3?Math.max(60,r*(2+d)):Math.max(200,r*(7+d))}_execute(){const a=this._context.configuration.options.get(67),r=this._getScrollSpeed(),d=this._tick(),m=r*(d/1e3)*a,h=this._position.outsidePosition==="above"?-m:m;this._context.viewModel.viewLayout.deltaScrollNow(0,h),this._viewHelper.renderNow();const v=this._context.viewLayout.getLinesViewportData(),C=this._position.outsidePosition==="above"?v.startLineNumber:v.endLineNumber;let w;{const S=(0,f.createEditorPagePosition)(this._viewHelper.viewDomNode),D=this._context.configuration.options.get(146).horizontalScrollbarHeight,I=new f.PageCoordinates(this._mouseEvent.pos.x,S.y+S.height-D-.1),T=(0,f.createCoordinatesRelativeToEditor)(this._viewHelper.viewDomNode,S,I);w=this._mouseTargetFactory.createMouseTargetForView(this._viewHelper.getLastRenderData(),S,I,T,null)}(!w.position||w.position.lineNumber!==C)&&(this._position.outsidePosition==="above"?w=y.MouseTarget.createOutsideEditor(this._position.mouseColumn,new b.Position(C,1),"above",this._position.outsideDistance):w=y.MouseTarget.createOutsideEditor(this._position.mouseColumn,new b.Position(C,this._context.viewModel.getLineMaxColumn(C)),"below",this._position.outsideDistance)),this._dispatchMouse(w,!0,2),this._animationFrameDisposable=c.scheduleAtNextAnimationFrame(c.getWindow(w.element),()=>this._execute())}}class u{static{this.CLEAR_MOUSE_DOWN_COUNT_TIME=400}get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(a){this._altKey=a.altKey,this._ctrlKey=a.ctrlKey,this._metaKey=a.metaKey,this._shiftKey=a.shiftKey}setStartButtons(a){this._leftButton=a.leftButton,this._middleButton=a.middleButton}setStartedOnLineNumbers(a){this._startedOnLineNumbers=a}trySetCount(a,r){const d=new Date().getTime();d-this._lastSetMouseDownCountTime>u.CLEAR_MOUSE_DOWN_COUNT_TIME&&(a=1),this._lastSetMouseDownCountTime=d,a>this._lastMouseDownCount+1&&(a=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(r)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=r,this._lastMouseDownCount=Math.min(a,this._lastMouseDownPositionEqualCount)}}}),define(oe[760],re([1,0,223,5,68,52,2,16,759,210,185]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PointerHandler=e.PointerEventHandler=void 0;class n extends _.MouseHandler{constructor(o,g,u){super(o,g,u),this._register(E.Gesture.addTarget(this.viewHelper.linesContentDomNode)),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Tap,a=>this.onTap(a))),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Change,a=>this.onChange(a))),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Contextmenu,a=>this._onContextMenu(new p.EditorMouseEvent(a,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,"pointerdown",a=>{const r=a.pointerType;if(r==="mouse"){this._lastPointerType="mouse";return}else r==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));const l=new p.EditorPointerEventFactory(this.viewHelper.viewDomNode);this._register(l.onPointerMove(this.viewHelper.viewDomNode,a=>this._onMouseMoveOverView(a))),this._register(l.onPointerUp(this.viewHelper.viewDomNode,a=>this._onMouseUp(a))),this._register(l.onPointerLeave(this.viewHelper.viewDomNode,a=>this._onMouseLeave(a))),this._register(l.onPointerDown(this.viewHelper.viewDomNode,(a,r)=>this._onMouseDown(a,r)))}onTap(o){!o.initialTarget||!this.viewHelper.linesContentDomNode.contains(o.initialTarget)||(o.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(o,!1))}onChange(o){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-o.translationX,-o.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(o,!0)}_dispatchGesture(o,g){const u=this._createMouseTargetForView(new p.EditorMouseEvent(o,!1,this.viewHelper.viewDomNode),!1);u.position&&this.viewController.dispatchMouse({position:u.position,mouseColumn:u.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:o.tapCount,inSelectionMode:g,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:u.type===6&&u.detail.injectedText!==null})}_onMouseDown(o,g){o.browserEvent.pointerType!=="touch"&&super._onMouseDown(o,g)}}e.PointerEventHandler=n;class s extends _.MouseHandler{constructor(o,g,u){super(o,g,u),this._register(E.Gesture.addTarget(this.viewHelper.linesContentDomNode)),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Tap,l=>this.onTap(l))),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Change,l=>this.onChange(l))),this._register(k.addDisposableListener(this.viewHelper.linesContentDomNode,E.EventType.Contextmenu,l=>this._onContextMenu(new p.EditorMouseEvent(l,!1,this.viewHelper.viewDomNode),!1)))}onTap(o){o.preventDefault(),this.viewHelper.focusTextArea();const g=this._createMouseTargetForView(new p.EditorMouseEvent(o,!1,this.viewHelper.viewDomNode),!1);if(g.position){const u=document.createEvent("CustomEvent");u.initEvent(b.TextAreaSyntethicEvents.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(u),this.viewController.moveTo(g.position,1)}}onChange(o){this._context.viewModel.viewLayout.deltaScrollNow(-o.translationX,-o.translationY)}}class t extends y.Disposable{constructor(o,g,u){super(),(f.isIOS||f.isAndroid&&f.isMobile)&&c.BrowserFeatures.pointerEvents?this.handler=this._register(new n(o,g,u)):L.mainWindow.TouchEvent?this.handler=this._register(new s(o,g,u)):this.handler=this._register(new _.MouseHandler(o,g,u))}getTargetAtClientPoint(o,g){return this.handler.getTargetAtClientPoint(o,g)}}e.PointerHandler=t}),define(oe[761],re([1,0,233,14,16,75,166,241,57,556,280,9,4,496]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewLines=void 0;class t{constructor(){this._currentVisibleRange=new s.Range(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(l){this._currentVisibleRange=l}}class i{constructor(l,a,r,d,m,h,v){this.minimalReveal=l,this.lineNumber=a,this.startColumn=r,this.endColumn=d,this.startScrollTop=m,this.stopScrollTop=h,this.scrollType=v,this.type="range",this.minLineNumber=a,this.maxLineNumber=a}}class o{constructor(l,a,r,d,m){this.minimalReveal=l,this.selections=a,this.startScrollTop=r,this.stopScrollTop=d,this.scrollType=m,this.type="selections";let h=a[0].startLineNumber,v=a[0].endLineNumber;for(let C=1,w=a.length;C<w;C++){const S=a[C];h=Math.min(h,S.startLineNumber),v=Math.max(v,S.endLineNumber)}this.minLineNumber=h,this.maxLineNumber=v}}class g extends _.ViewPart{static{this.HORIZONTAL_EXTRA_PX=30}constructor(l,a){super(l),this._linesContent=a,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new f.VisibleLinesCollection(this),this.domNode=this._visibleLines.domNode;const r=this._context.configuration,d=this._context.configuration.options,m=d.get(50),h=d.get(147);this._lineHeight=d.get(67),this._typicalHalfwidthCharacterWidth=m.typicalHalfwidthCharacterWidth,this._isViewportWrapping=h.isViewportWrapping,this._revealHorizontalRightPadding=d.get(101),this._cursorSurroundingLines=d.get(29),this._cursorSurroundingLinesStyle=d.get(30),this._canUseLayerHinting=!d.get(32),this._viewLineOptions=new p.ViewLineOptions(r,this._context.theme.type),_.PartFingerprints.write(this.domNode,8),this.domNode.setClassName(`view-lines ${c.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),(0,L.applyFontInfo)(this.domNode,m),this._maxLineWidth=0,this._asyncUpdateLineWidths=new k.RunOnceScheduler(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new k.RunOnceScheduler(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new t,this._horizontalRevealRequest=null,this._stickyScrollEnabled=d.get(116).enabled,this._maxNumberStickyLines=d.get(116).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}createVisibleLine(){return new p.ViewLine(this._viewLineOptions)}onConfigurationChanged(l){this._visibleLines.onConfigurationChanged(l),l.hasChanged(147)&&(this._maxLineWidth=0);const a=this._context.configuration.options,r=a.get(50),d=a.get(147);return this._lineHeight=a.get(67),this._typicalHalfwidthCharacterWidth=r.typicalHalfwidthCharacterWidth,this._isViewportWrapping=d.isViewportWrapping,this._revealHorizontalRightPadding=a.get(101),this._cursorSurroundingLines=a.get(29),this._cursorSurroundingLinesStyle=a.get(30),this._canUseLayerHinting=!a.get(32),this._stickyScrollEnabled=a.get(116).enabled,this._maxNumberStickyLines=a.get(116).maxLineCount,(0,L.applyFontInfo)(this.domNode,r),this._onOptionsMaybeChanged(),l.hasChanged(146)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){const l=this._context.configuration,a=new p.ViewLineOptions(l,this._context.theme.type);if(!this._viewLineOptions.equals(a)){this._viewLineOptions=a;const r=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let m=r;m<=d;m++)this._visibleLines.getVisibleLine(m).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(l){const a=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();let d=!1;for(let m=a;m<=r;m++)d=this._visibleLines.getVisibleLine(m).onSelectionChanged()||d;return d}onDecorationsChanged(l){{const a=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let d=a;d<=r;d++)this._visibleLines.getVisibleLine(d).onDecorationsChanged()}return!0}onFlushed(l){const a=this._visibleLines.onFlushed(l);return this._maxLineWidth=0,a}onLinesChanged(l){return this._visibleLines.onLinesChanged(l)}onLinesDeleted(l){return this._visibleLines.onLinesDeleted(l)}onLinesInserted(l){return this._visibleLines.onLinesInserted(l)}onRevealRangeRequest(l){const a=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),l.source,l.minimalReveal,l.range,l.selections,l.verticalType);if(a===-1)return!1;let r=this._context.viewLayout.validateScrollPosition({scrollTop:a});l.revealHorizontal?l.range&&l.range.startLineNumber!==l.range.endLineNumber?r={scrollTop:r.scrollTop,scrollLeft:0}:l.range?this._horizontalRevealRequest=new i(l.minimalReveal,l.range.startLineNumber,l.range.startColumn,l.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),r.scrollTop,l.scrollType):l.selections&&l.selections.length>0&&(this._horizontalRevealRequest=new o(l.minimalReveal,l.selections,this._context.viewLayout.getCurrentScrollTop(),r.scrollTop,l.scrollType)):this._horizontalRevealRequest=null;const m=Math.abs(this._context.viewLayout.getCurrentScrollTop()-r.scrollTop)<=this._lineHeight?1:l.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(r,m),!0}onScrollChanged(l){if(this._horizontalRevealRequest&&l.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&l.scrollTopChanged){const a=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),r=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(l.scrollTop<a||l.scrollTop>r)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(l.scrollWidth),this._visibleLines.onScrollChanged(l)||!0}onTokensChanged(l){return this._visibleLines.onTokensChanged(l)}onZonesChanged(l){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(l)}onThemeChanged(l){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(l,a){const r=this._getViewLineDomNode(l);if(r===null)return null;const d=this._getLineNumberFor(r);if(d===-1||d<1||d>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(d)===1)return new n.Position(d,1);const m=this._visibleLines.getStartLineNumber(),h=this._visibleLines.getEndLineNumber();if(d<m||d>h)return null;let v=this._visibleLines.getVisibleLine(d).getColumnOfNodeOffset(l,a);const C=this._context.viewModel.getLineMinColumn(d);return v<C&&(v=C),new n.Position(d,v)}_getViewLineDomNode(l){for(;l&&l.nodeType===1;){if(l.className===p.ViewLine.CLASS_NAME)return l;l=l.parentElement}return null}_getLineNumberFor(l){const a=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();for(let d=a;d<=r;d++){const m=this._visibleLines.getVisibleLine(d);if(l===m.getDomNode())return d}return-1}getLineWidth(l){const a=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();if(l<a||l>r)return-1;const d=new b.DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),m=this._visibleLines.getVisibleLine(l).getWidth(d);return this._updateLineWidthsSlowIfDomDidLayout(d),m}linesVisibleRangesForRange(l,a){if(this.shouldRender())return null;const r=l.endLineNumber,d=s.Range.intersectRanges(l,this._lastRenderedData.getCurrentVisibleRange());if(!d)return null;const m=[];let h=0;const v=new b.DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot);let C=0;a&&(C=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new n.Position(d.startLineNumber,1)).lineNumber);const w=this._visibleLines.getStartLineNumber(),S=this._visibleLines.getEndLineNumber();for(let D=d.startLineNumber;D<=d.endLineNumber;D++){if(D<w||D>S)continue;const I=D===d.startLineNumber?d.startColumn:1,T=D!==d.endLineNumber,M=T?this._context.viewModel.getLineMaxColumn(D):d.endColumn,A=this._visibleLines.getVisibleLine(D).getVisibleRangesForRange(D,I,M,v);if(A){if(a&&D<r){const R=C;C=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new n.Position(D+1,1)).lineNumber,R!==C&&(A.ranges[A.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}m[h++]=new y.LineVisibleRanges(A.outsideRenderedLine,D,y.HorizontalRange.from(A.ranges),T)}}return this._updateLineWidthsSlowIfDomDidLayout(v),h===0?null:m}_visibleRangesForLineRange(l,a,r){if(this.shouldRender()||l<this._visibleLines.getStartLineNumber()||l>this._visibleLines.getEndLineNumber())return null;const d=new b.DomReadingContext(this.domNode.domNode,this._textRangeRestingSpot),m=this._visibleLines.getVisibleLine(l).getVisibleRangesForRange(l,a,r,d);return this._updateLineWidthsSlowIfDomDidLayout(d),m}visibleRangeForPosition(l){const a=this._visibleRangesForLineRange(l.lineNumber,l.column,l.column);return a?new y.HorizontalPosition(a.outsideRenderedLine,a.ranges[0].left):null}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(l){l.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(l){const a=this._visibleLines.getStartLineNumber(),r=this._visibleLines.getEndLineNumber();let d=1,m=!0;for(let h=a;h<=r;h++){const v=this._visibleLines.getVisibleLine(h);if(l&&!v.getWidthIsFast()){m=!1;continue}d=Math.max(d,v.getWidth(null))}return m&&a===1&&r===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(d),m}_checkMonospaceFontAssumptions(){let l=-1,a=-1;const r=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let m=r;m<=d;m++){const h=this._visibleLines.getVisibleLine(m);if(h.needsMonospaceFontCheck()){const v=h.getWidth(null);v>a&&(a=v,l=m)}}if(l!==-1&&!this._visibleLines.getVisibleLine(l).monospaceAssumptionsAreValid())for(let m=r;m<=d;m++)this._visibleLines.getVisibleLine(m).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(l){if(this._visibleLines.renderLines(l),this._lastRenderedData.setCurrentVisibleRange(l.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){const r=this._horizontalRevealRequest;if(l.startLineNumber<=r.minLineNumber&&r.maxLineNumber<=l.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();const d=this._computeScrollLeftToReveal(r);d&&(this._isViewportWrapping||this._ensureMaxLineWidth(d.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:d.scrollLeft},r.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),E.isLinux&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){const r=this._visibleLines.getStartLineNumber(),d=this._visibleLines.getEndLineNumber();for(let m=r;m<=d;m++)if(this._visibleLines.getVisibleLine(m).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");const a=this._context.viewLayout.getCurrentScrollTop()-l.bigNumbersDelta;this._linesContent.setTop(-a),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(l){const a=Math.ceil(l);this._maxLineWidth<a&&(this._maxLineWidth=a,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(l,a,r,d,m,h){const v=l.top,C=l.height,w=v+C;let S,D,I;if(m&&m.length>0){let N=m[0].startLineNumber,O=m[0].endLineNumber;for(let x=1,F=m.length;x<F;x++){const W=m[x];N=Math.min(N,W.startLineNumber),O=Math.max(O,W.endLineNumber)}S=!1,D=this._context.viewLayout.getVerticalOffsetForLineNumber(N),I=this._context.viewLayout.getVerticalOffsetForLineNumber(O)+this._lineHeight}else if(d)S=!0,D=this._context.viewLayout.getVerticalOffsetForLineNumber(d.startLineNumber),I=this._context.viewLayout.getVerticalOffsetForLineNumber(d.endLineNumber)+this._lineHeight;else return-1;const T=(a==="mouse"||r)&&this._cursorSurroundingLinesStyle==="default";let M=0,A=0;if(T)r||(M=this._lineHeight);else{const N=Math.min(C/this._lineHeight/2,this._cursorSurroundingLines);this._stickyScrollEnabled?M=Math.max(N,this._maxNumberStickyLines)*this._lineHeight:M=N*this._lineHeight,A=Math.max(0,N-1)*this._lineHeight}r||(h===0||h===4)&&(A+=this._lineHeight),D-=M,I+=A;let R;if(I-D>C){if(!S)return-1;R=D}else if(h===5||h===6)if(h===6&&v<=D&&I<=w)R=v;else{const N=Math.max(5*this._lineHeight,C*.2),O=D-N,x=I-C;R=Math.max(x,O)}else if(h===1||h===2)if(h===2&&v<=D&&I<=w)R=v;else{const N=(D+I)/2;R=Math.max(0,N-C/2)}else R=this._computeMinimumScrolling(v,w,D,I,h===3,h===4);return R}_computeScrollLeftToReveal(l){const a=this._context.viewLayout.getCurrentViewport(),r=this._context.configuration.options.get(146),d=a.left,m=d+a.width-r.verticalScrollbarWidth;let h=1073741824,v=0;if(l.type==="range"){const w=this._visibleRangesForLineRange(l.lineNumber,l.startColumn,l.endColumn);if(!w)return null;for(const S of w.ranges)h=Math.min(h,Math.round(S.left)),v=Math.max(v,Math.round(S.left+S.width))}else for(const w of l.selections){if(w.startLineNumber!==w.endLineNumber)return null;const S=this._visibleRangesForLineRange(w.startLineNumber,w.startColumn,w.endColumn);if(!S)return null;for(const D of S.ranges)h=Math.min(h,Math.round(D.left)),v=Math.max(v,Math.round(D.left+D.width))}return l.minimalReveal||(h=Math.max(0,h-g.HORIZONTAL_EXTRA_PX),v+=this._revealHorizontalRightPadding),l.type==="selections"&&v-h>a.width?null:{scrollLeft:this._computeMinimumScrolling(d,m,h,v),maxHorizontalOffset:v}}_computeMinimumScrolling(l,a,r,d,m,h){l=l|0,a=a|0,r=r|0,d=d|0,m=!!m,h=!!h;const v=a-l;if(d-r<v){if(m)return r;if(h)return Math.max(0,d-v);if(r<l)return r;if(d>a)return Math.max(0,d-v)}else return r;return l}}e.ViewLines=g}),define(oe[25],re([1,0,6,2,7,38,97]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Themable=e.Extensions=e.IThemeService=void 0,e.themeColorFromId=f,e.getThemeTypeSelector=_,e.registerThemingParticipant=n,e.IThemeService=(0,E.createDecorator)("themeService");function f(t){return{id:t}}function _(t){switch(t){case y.ColorScheme.DARK:return"vs-dark";case y.ColorScheme.HIGH_CONTRAST_DARK:return"hc-black";case y.ColorScheme.HIGH_CONTRAST_LIGHT:return"hc-light";default:return"vs"}}e.Extensions={ThemingContribution:"base.contributions.theming"};class b{constructor(){this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new c.Emitter}onColorThemeChange(i){return this.themingParticipants.push(i),this.onThemingParticipantAddedEmitter.fire(i),(0,k.toDisposable)(()=>{const o=this.themingParticipants.indexOf(i);this.themingParticipants.splice(o,1)})}getThemingParticipants(){return this.themingParticipants}}const p=new b;L.Registry.add(e.Extensions.ThemingContribution,p);function n(t){return p.onColorThemeChange(t)}class s extends k.Disposable{constructor(i){super(),this.themeService=i,this.theme=i.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(o=>this.onThemeChange(o)))}onThemeChange(i){this.theme=i,this.updateStyles()}updateStyles(){}}e.Themable=s}),define(oe[762],re([1,0,6,2,73,25]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalStyleSheet=e.AbstractCodeEditorService=void 0;let y=class extends k.Disposable{constructor(b){super(),this._themeService=b,this._onWillCreateCodeEditor=this._register(new c.Emitter),this._onCodeEditorAdd=this._register(new c.Emitter),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new c.Emitter),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new c.Emitter),this._onDiffEditorAdd=this._register(new c.Emitter),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new c.Emitter),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._decorationOptionProviders=new Map,this._codeEditorOpenHandlers=new E.LinkedList,this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(b){this._codeEditors[b.getId()]=b,this._onCodeEditorAdd.fire(b)}removeCodeEditor(b){delete this._codeEditors[b.getId()]&&this._onCodeEditorRemove.fire(b)}listCodeEditors(){return Object.keys(this._codeEditors).map(b=>this._codeEditors[b])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(b){this._diffEditors[b.getId()]=b,this._onDiffEditorAdd.fire(b)}listDiffEditors(){return Object.keys(this._diffEditors).map(b=>this._diffEditors[b])}getFocusedCodeEditor(){let b=null;const p=this.listCodeEditors();for(const n of p){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(b=n)}return b}removeDecorationType(b){const p=this._decorationOptionProviders.get(b);p&&(p.refCount--,p.refCount<=0&&(this._decorationOptionProviders.delete(b),p.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(b))))}setModelProperty(b,p,n){const s=b.toString();let t;this._modelProperties.has(s)?t=this._modelProperties.get(s):(t=new Map,this._modelProperties.set(s,t)),t.set(p,n)}getModelProperty(b,p){const n=b.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(p)}async openCodeEditor(b,p,n){for(const s of this._codeEditorOpenHandlers){const t=await s(b,p,n);if(t!==null)return t}return null}registerCodeEditorOpenHandler(b){const p=this._codeEditorOpenHandlers.unshift(b);return(0,k.toDisposable)(p)}};e.AbstractCodeEditorService=y,e.AbstractCodeEditorService=y=De([he(0,L.IThemeService)],y);class f{constructor(b){this._styleSheet=b}}e.GlobalStyleSheet=f}),define(oe[763],re([1,0,49,25,32,118,58,7,697,2,5,31,46,60,119,52,389,657,14]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HoverService=void 0;let a=class extends b.Disposable{constructor(v,C,w,S,D){super(),this._instantiationService=v,this._keybindingService=w,this._layoutService=S,this._accessibilityService=D,this._managedHovers=new Map,C.onDidShowContextMenu(()=>this.hideHover()),this._contextViewHandler=this._register(new g.ContextViewHandler(this._layoutService))}showHover(v,C,w){if(r(this._currentHoverOptions)===r(v)||this._currentHover&&this._currentHoverOptions?.persistence?.sticky)return;this._currentHoverOptions=v,this._lastHoverOptions=v;const S=v.trapFocus||this._accessibilityService.isScreenReaderOptimized(),D=(0,p.getActiveElement)();w||(S&&D?D.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=D):this._lastFocusedElementBeforeOpen=void 0);const I=new b.DisposableStore,T=this._instantiationService.createInstance(_.HoverWidget,v);if(v.persistence?.sticky&&(T.isLocked=!0),T.onDispose(()=>{this._currentHover?.domNode&&(0,p.isAncestorOfActiveElement)(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),this._currentHoverOptions===v&&(this._currentHoverOptions=void 0),I.dispose()},void 0,I),!v.container){const M=(0,p.isHTMLElement)(v.target)?v.target:v.target.targetElements[0];v.container=this._layoutService.getContainer((0,p.getWindow)(M))}if(this._contextViewHandler.showContextView(new d(T,C),v.container),T.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,I),v.persistence?.sticky)I.add((0,p.addDisposableListener)((0,p.getWindow)(v.container).document,p.EventType.MOUSE_DOWN,M=>{(0,p.isAncestor)(M.target,T.domNode)||this.doHideHover()}));else{if("targetElements"in v.target)for(const A of v.target.targetElements)I.add((0,p.addDisposableListener)(A,p.EventType.CLICK,()=>this.hideHover()));else I.add((0,p.addDisposableListener)(v.target,p.EventType.CLICK,()=>this.hideHover()));const M=(0,p.getActiveElement)();if(M){const A=(0,p.getWindow)(M).document;I.add((0,p.addDisposableListener)(M,p.EventType.KEY_DOWN,R=>this._keyDown(R,T,!!v.persistence?.hideOnKeyDown))),I.add((0,p.addDisposableListener)(A,p.EventType.KEY_DOWN,R=>this._keyDown(R,T,!!v.persistence?.hideOnKeyDown))),I.add((0,p.addDisposableListener)(M,p.EventType.KEY_UP,R=>this._keyUp(R,T))),I.add((0,p.addDisposableListener)(A,p.EventType.KEY_UP,R=>this._keyUp(R,T)))}}if("IntersectionObserver"in o.mainWindow){const M=new IntersectionObserver(R=>this._intersectionChange(R,T),{threshold:0}),A="targetElements"in v.target?v.target.targetElements[0]:v.target;M.observe(A),I.add((0,b.toDisposable)(()=>M.disconnect()))}return this._currentHover=T,T}hideHover(){this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(v,C){v[v.length-1].isIntersecting||C.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showHover(this._lastHoverOptions,!0,!0)}_keyDown(v,C,w){if(v.key==="Alt"){C.isLocked=!0;return}const S=new s.StandardKeyboardEvent(v);this._keybindingService.resolveKeyboardEvent(S).getSingleModifierDispatchChords().some(I=>!!I)||this._keybindingService.softDispatch(S,S.target).kind!==0||w&&(!this._currentHoverOptions?.trapFocus||v.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(v,C){v.key==="Alt"&&(C.isLocked=!1,C.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(v,C,w,S){C.setAttribute("custom-hover","true"),C.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",C.title),C.title="");let D,I;const T=(K,U)=>{const Y=I!==void 0;K&&(I?.dispose(),I=void 0),U&&(D?.dispose(),D=void 0),Y&&(v.onDidHideHover?.(),I=void 0)},M=(K,U,Y,Q)=>new l.TimeoutTimer(async()=>{(!I||I.isDisposed)&&(I=new u.ManagedHoverWidget(v,Y||C,K>0),await I.update(typeof w=="function"?w():w,U,{...S,trapFocus:Q}))},K);let A=!1;const R=(0,p.addDisposableListener)(C,p.EventType.MOUSE_DOWN,()=>{A=!0,T(!0,!0)},!0),N=(0,p.addDisposableListener)(C,p.EventType.MOUSE_UP,()=>{A=!1},!0),O=(0,p.addDisposableListener)(C,p.EventType.MOUSE_LEAVE,K=>{A=!1,T(!1,K.fromElement===C)},!0),x=K=>{if(D)return;const U=new b.DisposableStore,Y={targetElements:[C],dispose:()=>{}};if(v.placement===void 0||v.placement==="mouse"){const Q=X=>{Y.x=X.x+10,(0,p.isHTMLElement)(X.target)&&m(X.target,C)!==C&&T(!0,!0)};U.add((0,p.addDisposableListener)(C,p.EventType.MOUSE_MOVE,Q,!0))}D=U,!((0,p.isHTMLElement)(K.target)&&m(K.target,C)!==C)&&U.add(M(v.delay,!1,Y))},F=(0,p.addDisposableListener)(C,p.EventType.MOUSE_OVER,x,!0),W=()=>{if(A||D)return;const K={targetElements:[C],dispose:()=>{}},U=new b.DisposableStore,Y=()=>T(!0,!0);U.add((0,p.addDisposableListener)(C,p.EventType.BLUR,Y,!0)),U.add(M(v.delay,!1,K)),D=U};let z;const q=C.tagName.toLowerCase();q!=="input"&&q!=="textarea"&&(z=(0,p.addDisposableListener)(C,p.EventType.FOCUS,W,!0));const H={show:K=>{T(!1,!0),M(0,K,void 0,K)},hide:()=>{T(!0,!0)},update:async(K,U)=>{w=K,await I?.update(w,void 0,U)},dispose:()=>{this._managedHovers.delete(C),F.dispose(),O.dispose(),R.dispose(),N.dispose(),z?.dispose(),T(!0,!0)}};return this._managedHovers.set(C,H),H}showManagedHover(v){const C=this._managedHovers.get(v);C&&C.show(!0)}dispose(){this._managedHovers.forEach(v=>v.dispose()),super.dispose()}};e.HoverService=a,e.HoverService=a=De([he(0,f.IInstantiationService),he(1,y.IContextMenuService),he(2,n.IKeybindingService),he(3,i.ILayoutService),he(4,t.IAccessibilityService)],a);function r(h){if(h!==void 0)return h?.id??h}class d{get anchorPosition(){return this._hover.anchor}constructor(v,C=!1){this._hover=v,this._focus=C,this.layer=1}render(v){return this._hover.render(v),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function m(h,v){for(v=v??(0,p.getWindow)(h).document.body;!h.hasAttribute("custom-hover")&&h!==v;)h=h.parentElement;return h}(0,c.registerSingleton)(L.IHoverService,a,1),(0,k.registerThemingParticipant)((h,v)=>{const C=h.getColor(E.editorHoverBorder);C&&(v.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${C.transparent(.5)}; }`),v.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${C.transparent(.5)}; }`))})}),define(oe[764],re([1,0,5,39,84,57,25]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorScrollbar=void 0;class f extends L.ViewPart{constructor(b,p,n,s){super(b);const t=this._context.configuration.options,i=t.get(104),o=t.get(75),g=t.get(40),u=t.get(107),l={listenOnDomNode:n.domNode,className:"editor-scrollable "+(0,y.getThemeTypeSelector)(b.theme.type),useShadows:!1,lazyRender:!0,vertical:i.vertical,horizontal:i.horizontal,verticalHasArrows:i.verticalHasArrows,horizontalHasArrows:i.horizontalHasArrows,verticalScrollbarSize:i.verticalScrollbarSize,verticalSliderSize:i.verticalSliderSize,horizontalScrollbarSize:i.horizontalScrollbarSize,horizontalSliderSize:i.horizontalSliderSize,handleMouseWheel:i.handleMouseWheel,alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel,arrowSize:i.arrowSize,mouseWheelScrollSensitivity:o,fastScrollSensitivity:g,scrollPredominantAxis:u,scrollByPage:i.scrollByPage};this.scrollbar=this._register(new E.SmoothScrollableElement(p.domNode,l,this._context.viewLayout.getScrollable())),L.PartFingerprints.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=(0,k.createFastDomNode)(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();const a=(r,d,m)=>{const h={};if(d){const v=r.scrollTop;v&&(h.scrollTop=this._context.viewLayout.getCurrentScrollTop()+v,r.scrollTop=0)}if(m){const v=r.scrollLeft;v&&(h.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+v,r.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(h,1)};this._register(c.addDisposableListener(n.domNode,"scroll",r=>a(n.domNode,!0,!0))),this._register(c.addDisposableListener(p.domNode,"scroll",r=>a(p.domNode,!0,!1))),this._register(c.addDisposableListener(s.domNode,"scroll",r=>a(s.domNode,!0,!1))),this._register(c.addDisposableListener(this.scrollbarDomNode.domNode,"scroll",r=>a(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){const b=this._context.configuration.options,p=b.get(146);this.scrollbarDomNode.setLeft(p.contentLeft),b.get(73).side==="right"?this.scrollbarDomNode.setWidth(p.contentWidth+p.minimap.minimapWidth):this.scrollbarDomNode.setWidth(p.contentWidth),this.scrollbarDomNode.setHeight(p.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(b){this.scrollbar.delegateVerticalScrollbarPointerDown(b)}delegateScrollFromMouseWheelEvent(b){this.scrollbar.delegateScrollFromMouseWheelEvent(b)}onConfigurationChanged(b){if(b.hasChanged(104)||b.hasChanged(75)||b.hasChanged(40)){const p=this._context.configuration.options,n=p.get(104),s=p.get(75),t=p.get(40),i=p.get(107),o={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:s,fastScrollSensitivity:t,scrollPredominantAxis:i};this.scrollbar.updateOptions(o)}return b.hasChanged(146)&&this._setLayout(),!0}onScrollChanged(b){return!0}onThemeChanged(b){return this.scrollbar.updateClassName("editor-scrollable "+(0,y.getThemeTypeSelector)(this._context.theme.type)),!0}prepareRender(b){}render(b){this.scrollbar.renderNow()}}e.EditorScrollbar=f}),define(oe[765],re([1,0,132,32,25,504]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionsOverlay=void 0;class L{constructor(s){this.left=s.left,this.width=s.width,this.startStyle=null,this.endStyle=null}}class y{constructor(s,t){this.lineNumber=s,this.ranges=t}}function f(n){return new L(n)}function _(n){return new y(n.lineNumber,n.ranges.map(f))}class b extends c.DynamicViewOverlay{static{this.SELECTION_CLASS_NAME="selected-text"}static{this.SELECTION_TOP_LEFT="top-left-radius"}static{this.SELECTION_BOTTOM_LEFT="bottom-left-radius"}static{this.SELECTION_TOP_RIGHT="top-right-radius"}static{this.SELECTION_BOTTOM_RIGHT="bottom-right-radius"}static{this.EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background"}static{this.ROUNDED_PIECE_WIDTH=10}constructor(s){super(),this._previousFrameVisibleRangesWithStyle=[],this._context=s;const t=this._context.configuration.options;this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(s){const t=this._context.configuration.options;return this._roundedSelection=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(s){return this._selections=s.selections.slice(0),!0}onDecorationsChanged(s){return!0}onFlushed(s){return!0}onLinesChanged(s){return!0}onLinesDeleted(s){return!0}onLinesInserted(s){return!0}onScrollChanged(s){return s.scrollTopChanged}onZonesChanged(s){return!0}_visibleRangesHaveGaps(s){for(let t=0,i=s.length;t<i;t++)if(s[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(s,t,i){const o=this._typicalHalfwidthCharacterWidth/4;let g=null,u=null;if(i&&i.length>0&&t.length>0){const l=t[0].lineNumber;if(l===s.startLineNumber)for(let r=0;!g&&r<i.length;r++)i[r].lineNumber===l&&(g=i[r].ranges[0]);const a=t[t.length-1].lineNumber;if(a===s.endLineNumber)for(let r=i.length-1;!u&&r>=0;r--)i[r].lineNumber===a&&(u=i[r].ranges[0]);g&&!g.startStyle&&(g=null),u&&!u.startStyle&&(u=null)}for(let l=0,a=t.length;l<a;l++){const r=t[l].ranges[0],d=r.left,m=r.left+r.width,h={top:0,bottom:0},v={top:0,bottom:0};if(l>0){const C=t[l-1].ranges[0].left,w=t[l-1].ranges[0].left+t[l-1].ranges[0].width;p(d-C)<o?h.top=2:d>C&&(h.top=1),p(m-w)<o?v.top=2:C<m&&m<w&&(v.top=1)}else g&&(h.top=g.startStyle.top,v.top=g.endStyle.top);if(l+1<a){const C=t[l+1].ranges[0].left,w=t[l+1].ranges[0].left+t[l+1].ranges[0].width;p(d-C)<o?h.bottom=2:C<d&&d<w&&(h.bottom=1),p(m-w)<o?v.bottom=2:m<w&&(v.bottom=1)}else u&&(h.bottom=u.startStyle.bottom,v.bottom=u.endStyle.bottom);r.startStyle=h,r.endStyle=v}}_getVisibleRangesWithStyle(s,t,i){const g=(t.linesVisibleRangesForRange(s,!0)||[]).map(_);return!this._visibleRangesHaveGaps(g)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,g,i),g}_createSelectionPiece(s,t,i,o,g){return'<div class="cslr '+i+'" style="top:'+s.toString()+"px;bottom:"+t.toString()+"px;left:"+o.toString()+"px;width:"+g.toString()+'px;"></div>'}_actualRenderOneSelection(s,t,i,o){if(o.length===0)return;const g=!!o[0].ranges[0].startStyle,u=o[0].lineNumber,l=o[o.length-1].lineNumber;for(let a=0,r=o.length;a<r;a++){const d=o[a],m=d.lineNumber,h=m-t,v=i&&m===u?1:0,C=i&&m!==u&&m===l?1:0;let w="",S="";for(let D=0,I=d.ranges.length;D<I;D++){const T=d.ranges[D];if(g){const A=T.startStyle,R=T.endStyle;if(A.top===1||A.bottom===1){w+=this._createSelectionPiece(v,C,b.SELECTION_CLASS_NAME,T.left-b.ROUNDED_PIECE_WIDTH,b.ROUNDED_PIECE_WIDTH);let N=b.EDITOR_BACKGROUND_CLASS_NAME;A.top===1&&(N+=" "+b.SELECTION_TOP_RIGHT),A.bottom===1&&(N+=" "+b.SELECTION_BOTTOM_RIGHT),w+=this._createSelectionPiece(v,C,N,T.left-b.ROUNDED_PIECE_WIDTH,b.ROUNDED_PIECE_WIDTH)}if(R.top===1||R.bottom===1){w+=this._createSelectionPiece(v,C,b.SELECTION_CLASS_NAME,T.left+T.width,b.ROUNDED_PIECE_WIDTH);let N=b.EDITOR_BACKGROUND_CLASS_NAME;R.top===1&&(N+=" "+b.SELECTION_TOP_LEFT),R.bottom===1&&(N+=" "+b.SELECTION_BOTTOM_LEFT),w+=this._createSelectionPiece(v,C,N,T.left+T.width,b.ROUNDED_PIECE_WIDTH)}}let M=b.SELECTION_CLASS_NAME;if(g){const A=T.startStyle,R=T.endStyle;A.top===0&&(M+=" "+b.SELECTION_TOP_LEFT),A.bottom===0&&(M+=" "+b.SELECTION_BOTTOM_LEFT),R.top===0&&(M+=" "+b.SELECTION_TOP_RIGHT),R.bottom===0&&(M+=" "+b.SELECTION_BOTTOM_RIGHT)}S+=this._createSelectionPiece(v,C,M,T.left,T.width)}s[h][0]+=w,s[h][1]+=S}}prepareRender(s){const t=[],i=s.visibleRange.startLineNumber,o=s.visibleRange.endLineNumber;for(let u=i;u<=o;u++){const l=u-i;t[l]=["",""]}const g=[];for(let u=0,l=this._selections.length;u<l;u++){const a=this._selections[u];if(a.isEmpty()){g[u]=null;continue}const r=this._getVisibleRangesWithStyle(a,s,this._previousFrameVisibleRangesWithStyle[u]);g[u]=r,this._actualRenderOneSelection(t,i,this._selections.length>1,r)}this._previousFrameVisibleRangesWithStyle=g,this._renderResult=t.map(([u,l])=>u+l)}render(s,t){if(!this._renderResult)return"";const i=t-s;return i<0||i>=this._renderResult.length?"":this._renderResult[i]}}e.SelectionsOverlay=b,(0,E.registerThemingParticipant)((n,s)=>{const t=n.getColor(k.editorSelectionForeground);t&&!t.isTransparent()&&s.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function p(n){return n<0?-n:n}}),define(oe[410],re([1,0,5,39,221,2,21,85,9,347,32,25]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRulerFeature=void 0;let t=class extends L.Disposable{static{s=this}static{this.ONE_OVERVIEW_WIDTH=15}static{this.ENTIRE_DIFF_OVERVIEW_WIDTH=this.ONE_OVERVIEW_WIDTH*2}constructor(o,g,u,l,a,r,d){super(),this._editors=o,this._rootElement=g,this._diffModel=u,this._rootWidth=l,this._rootHeight=a,this._modifiedEditorLayoutInfo=r,this._themeService=d,this.width=s.ENTIRE_DIFF_OVERVIEW_WIDTH;const m=(0,y.observableFromEvent)(this._themeService.onDidColorThemeChange,()=>this._themeService.getColorTheme()),h=(0,y.derived)(w=>{const S=m.read(w),D=S.getColor(p.diffOverviewRulerInserted)||(S.getColor(p.diffInserted)||p.defaultInsertColor).transparent(2),I=S.getColor(p.diffOverviewRulerRemoved)||(S.getColor(p.diffRemoved)||p.defaultRemoveColor).transparent(2);return{insertColor:D,removeColor:I}}),v=(0,k.createFastDomNode)(document.createElement("div"));v.setClassName("diffViewport"),v.setPosition("absolute");const C=(0,c.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:s.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,f.appendRemoveOnDispose)(C,v.domNode)),this._register((0,c.addStandardDisposableListener)(C,c.EventType.POINTER_DOWN,w=>{this._editors.modified.delegateVerticalScrollbarPointerDown(w)})),this._register((0,c.addDisposableListener)(C,c.EventType.MOUSE_WHEEL,w=>{this._editors.modified.delegateScrollFromMouseWheelEvent(w)},{passive:!1})),this._register((0,f.appendRemoveOnDispose)(this._rootElement,C)),this._register((0,y.autorunWithStore)((w,S)=>{const D=this._diffModel.read(w),I=this._editors.original.createOverviewRuler("original diffOverviewRuler");I&&(S.add(I),S.add((0,f.appendRemoveOnDispose)(C,I.getDomNode())));const T=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(T&&(S.add(T),S.add((0,f.appendRemoveOnDispose)(C,T.getDomNode()))),!I||!T)return;const M=(0,y.observableSignalFromEvent)("viewZoneChanged",this._editors.original.onDidChangeViewZones),A=(0,y.observableSignalFromEvent)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),R=(0,y.observableSignalFromEvent)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),N=(0,y.observableSignalFromEvent)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);S.add((0,y.autorun)(O=>{M.read(O),A.read(O),R.read(O),N.read(O);const x=h.read(O),F=D?.diff.read(O)?.mappings;function W(H,K,U){const Y=U._getViewModel();return Y?H.filter(Q=>Q.length>0).map(Q=>{const X=Y.coordinatesConverter.convertModelPositionToViewPosition(new _.Position(Q.startLineNumber,1)),G=Y.coordinatesConverter.convertModelPositionToViewPosition(new _.Position(Q.endLineNumberExclusive,1)),P=G.lineNumber-X.lineNumber;return new b.OverviewRulerZone(X.lineNumber,G.lineNumber,P,K.toString())}):[]}const z=W((F||[]).map(H=>H.lineRangeMapping.original),x.removeColor,this._editors.original),q=W((F||[]).map(H=>H.lineRangeMapping.modified),x.insertColor,this._editors.modified);I?.setZones(z),T?.setZones(q)})),S.add((0,y.autorun)(O=>{const x=this._rootHeight.read(O),F=this._rootWidth.read(O),W=this._modifiedEditorLayoutInfo.read(O);if(W){const z=s.ENTIRE_DIFF_OVERVIEW_WIDTH-2*s.ONE_OVERVIEW_WIDTH;I.setLayout({top:0,height:x,right:z+s.ONE_OVERVIEW_WIDTH,width:s.ONE_OVERVIEW_WIDTH}),T.setLayout({top:0,height:x,right:0,width:s.ONE_OVERVIEW_WIDTH});const q=this._editors.modifiedScrollTop.read(O),H=this._editors.modifiedScrollHeight.read(O),K=this._editors.modified.getOption(104),U=new E.ScrollbarState(K.verticalHasArrows?K.arrowSize:0,K.verticalScrollbarSize,0,W.height,H,q);v.setTop(U.getSliderPosition()),v.setHeight(U.getSliderSize())}else v.setTop(0),v.setHeight(0);C.style.height=x+"px",C.style.left=F-s.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",v.setWidth(s.ENTIRE_DIFF_OVERVIEW_WIDTH)}))}))}};e.OverviewRulerFeature=t,e.OverviewRulerFeature=t=s=De([he(6,n.IThemeService)],t)}),define(oe[766],re([1,0,6,2,21,113,410,37,9,3,7,31]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorEditors=void 0;let s=class extends k.Disposable{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(i,o,g,u,l,a,r){super(),this.originalEditorElement=i,this.modifiedEditorElement=o,this._options=g,this._argCodeEditorWidgetOptions=u,this._createInnerEditor=l,this._instantiationService=a,this._keybindingService=r,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new c.Emitter),this.modifiedScrollTop=(0,E.observableFromEvent)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollTop()),this.modifiedScrollHeight=(0,E.observableFromEvent)(this,this.modified.onDidScrollChange,()=>this.modified.getScrollHeight()),this.modifiedObs=(0,L.observableCodeEditor)(this.modified),this.originalObs=(0,L.observableCodeEditor)(this.original),this.modifiedModel=this.modifiedObs.model,this.modifiedSelections=(0,E.observableFromEvent)(this,this.modified.onDidChangeCursorSelection,()=>this.modified.getSelections()??[]),this.modifiedCursor=(0,E.derivedOpts)({owner:this,equalsFn:_.Position.equals},d=>this.modifiedSelections.read(d)[0]?.getPosition()??new _.Position(1,1)),this.originalCursor=(0,E.observableFromEvent)(this,this.original.onDidChangeCursorPosition,()=>this.original.getPosition()??new _.Position(1,1)),this._argCodeEditorWidgetOptions=null,this._register((0,E.autorunHandleChanges)({createEmptyChangeSummary:()=>({}),handleChange:(d,m)=>(d.didChange(g.editorOptions)&&Object.assign(m,d.change.changedOptions),!0)},(d,m)=>{g.editorOptions.read(d),this._options.renderSideBySide.read(d),this.modified.updateOptions(this._adjustOptionsForRightHandSide(d,m)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(d,m))}))}_createLeftHandSideEditor(i,o){const g=this._adjustOptionsForLeftHandSide(void 0,i),u=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,g,o);return u.setContextValue("isInDiffLeftEditor",!0),u}_createRightHandSideEditor(i,o){const g=this._adjustOptionsForRightHandSide(void 0,i),u=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,g,o);return u.setContextValue("isInDiffRightEditor",!0),u}_constructInnerEditor(i,o,g,u){const l=this._createInnerEditor(i,o,g,u);return this._register(l.onDidContentSizeChange(a=>{const r=this.original.getContentWidth()+this.modified.getContentWidth()+y.OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH,d=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:d,contentWidth:r,contentHeightChanged:a.contentHeightChanged,contentWidthChanged:a.contentWidthChanged})})),l}_adjustOptionsForLeftHandSide(i,o){const g=this._adjustOptionsForSubEditor(o);return this._options.renderSideBySide.get()?(g.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},g.wordWrapOverride1=this._options.diffWordWrap.get()):(g.wordWrapOverride1="off",g.wordWrapOverride2="off",g.stickyScroll={enabled:!1},g.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),g.glyphMargin=this._options.renderSideBySide.get(),o.originalAriaLabel&&(g.ariaLabel=o.originalAriaLabel),g.ariaLabel=this._updateAriaLabel(g.ariaLabel),g.readOnly=!this._options.originalEditable.get(),g.dropIntoEditor={enabled:!g.readOnly},g.extraEditorClassName="original-in-monaco-diff-editor",g}_adjustOptionsForRightHandSide(i,o){const g=this._adjustOptionsForSubEditor(o);return o.modifiedAriaLabel&&(g.ariaLabel=o.modifiedAriaLabel),g.ariaLabel=this._updateAriaLabel(g.ariaLabel),g.wordWrapOverride1=this._options.diffWordWrap.get(),g.revealHorizontalRightPadding=f.EditorOptions.revealHorizontalRightPadding.defaultValue+y.OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH,g.scrollbar.verticalHasArrows=!1,g.extraEditorClassName="modified-in-monaco-diff-editor",g}_adjustOptionsForSubEditor(i){const o={...i,dimension:{height:0,width:0}};return o.inDiffEditor=!0,o.automaticLayout=!1,o.scrollbar={...o.scrollbar||{}},o.folding=!1,o.codeLens=this._options.diffCodeLens.get(),o.fixedOverflowWidgets=!0,o.minimap={...o.minimap||{}},o.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?o.stickyScroll={enabled:!1}:o.stickyScroll=this._options.editorOptions.get().stickyScroll,o}_updateAriaLabel(i){i||(i="");const o=(0,b.localize)(30," use {0} to open the accessibility help.",this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp")?.getAriaLabel());return this._options.accessibilityVerbose.get()?i+o:i?i.replaceAll(o,""):""}};e.DiffEditorEditors=s,e.DiffEditorEditors=s=De([he(5,p.IInstantiationService),he(6,n.IKeybindingService)],s)}),define(oe[80],re([1,0,3,33,32,25]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.editorUnicodeHighlightBackground=e.editorUnicodeHighlightBorder=e.editorBracketPairGuideActiveBackground6=e.editorBracketPairGuideActiveBackground5=e.editorBracketPairGuideActiveBackground4=e.editorBracketPairGuideActiveBackground3=e.editorBracketPairGuideActiveBackground2=e.editorBracketPairGuideActiveBackground1=e.editorBracketPairGuideBackground6=e.editorBracketPairGuideBackground5=e.editorBracketPairGuideBackground4=e.editorBracketPairGuideBackground3=e.editorBracketPairGuideBackground2=e.editorBracketPairGuideBackground1=e.editorBracketHighlightingUnexpectedBracketForeground=e.editorBracketHighlightingForeground6=e.editorBracketHighlightingForeground5=e.editorBracketHighlightingForeground4=e.editorBracketHighlightingForeground3=e.editorBracketHighlightingForeground2=e.editorBracketHighlightingForeground1=e.overviewRulerInfo=e.overviewRulerWarning=e.overviewRulerError=e.overviewRulerRangeHighlight=e.ghostTextBackground=e.ghostTextForeground=e.ghostTextBorder=e.editorUnnecessaryCodeOpacity=e.editorUnnecessaryCodeBorder=e.editorGutter=e.editorOverviewRulerBackground=e.editorOverviewRulerBorder=e.editorBracketMatchBorder=e.editorBracketMatchBackground=e.editorCodeLensForeground=e.editorRuler=e.editorDimmedLineNumber=e.editorActiveLineNumber=e.editorActiveIndentGuide6=e.editorActiveIndentGuide5=e.editorActiveIndentGuide4=e.editorActiveIndentGuide3=e.editorActiveIndentGuide2=e.editorActiveIndentGuide1=e.editorIndentGuide6=e.editorIndentGuide5=e.editorIndentGuide4=e.editorIndentGuide3=e.editorIndentGuide2=e.editorIndentGuide1=e.deprecatedEditorActiveIndentGuides=e.deprecatedEditorIndentGuides=e.editorLineNumbers=e.editorWhitespaces=e.editorMultiCursorSecondaryBackground=e.editorMultiCursorSecondaryForeground=e.editorMultiCursorPrimaryBackground=e.editorMultiCursorPrimaryForeground=e.editorCursorBackground=e.editorCursorForeground=e.editorSymbolHighlightBorder=e.editorSymbolHighlight=e.editorRangeHighlightBorder=e.editorRangeHighlight=e.editorLineHighlightBorder=e.editorLineHighlight=void 0,e.editorLineHighlight=(0,E.registerColor)("editor.lineHighlightBackground",null,c.localize(1244,"Background color for the highlight of line at the cursor position.")),e.editorLineHighlightBorder=(0,E.registerColor)("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:E.contrastBorder},c.localize(1245,"Background color for the border around the line at the cursor position.")),e.editorRangeHighlight=(0,E.registerColor)("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},c.localize(1246,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorRangeHighlightBorder=(0,E.registerColor)("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:E.activeContrastBorder,hcLight:E.activeContrastBorder},c.localize(1247,"Background color of the border around highlighted ranges.")),e.editorSymbolHighlight=(0,E.registerColor)("editor.symbolHighlightBackground",{dark:E.editorFindMatchHighlight,light:E.editorFindMatchHighlight,hcDark:null,hcLight:null},c.localize(1248,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),e.editorSymbolHighlightBorder=(0,E.registerColor)("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:E.activeContrastBorder,hcLight:E.activeContrastBorder},c.localize(1249,"Background color of the border around highlighted symbols.")),e.editorCursorForeground=(0,E.registerColor)("editorCursor.foreground",{dark:"#AEAFAD",light:k.Color.black,hcDark:k.Color.white,hcLight:"#0F4A85"},c.localize(1250,"Color of the editor cursor.")),e.editorCursorBackground=(0,E.registerColor)("editorCursor.background",null,c.localize(1251,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),e.editorMultiCursorPrimaryForeground=(0,E.registerColor)("editorMultiCursor.primary.foreground",e.editorCursorForeground,c.localize(1252,"Color of the primary editor cursor when multiple cursors are present.")),e.editorMultiCursorPrimaryBackground=(0,E.registerColor)("editorMultiCursor.primary.background",e.editorCursorBackground,c.localize(1253,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),e.editorMultiCursorSecondaryForeground=(0,E.registerColor)("editorMultiCursor.secondary.foreground",e.editorCursorForeground,c.localize(1254,"Color of secondary editor cursors when multiple cursors are present.")),e.editorMultiCursorSecondaryBackground=(0,E.registerColor)("editorMultiCursor.secondary.background",e.editorCursorBackground,c.localize(1255,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),e.editorWhitespaces=(0,E.registerColor)("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},c.localize(1256,"Color of whitespace characters in the editor.")),e.editorLineNumbers=(0,E.registerColor)("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:k.Color.white,hcLight:"#292929"},c.localize(1257,"Color of editor line numbers.")),e.deprecatedEditorIndentGuides=(0,E.registerColor)("editorIndentGuide.background",e.editorWhitespaces,c.localize(1258,"Color of the editor indentation guides."),!1,c.localize(1259,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),e.deprecatedEditorActiveIndentGuides=(0,E.registerColor)("editorIndentGuide.activeBackground",e.editorWhitespaces,c.localize(1260,"Color of the active editor indentation guides."),!1,c.localize(1261,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),e.editorIndentGuide1=(0,E.registerColor)("editorIndentGuide.background1",e.deprecatedEditorIndentGuides,c.localize(1262,"Color of the editor indentation guides (1).")),e.editorIndentGuide2=(0,E.registerColor)("editorIndentGuide.background2","#00000000",c.localize(1263,"Color of the editor indentation guides (2).")),e.editorIndentGuide3=(0,E.registerColor)("editorIndentGuide.background3","#00000000",c.localize(1264,"Color of the editor indentation guides (3).")),e.editorIndentGuide4=(0,E.registerColor)("editorIndentGuide.background4","#00000000",c.localize(1265,"Color of the editor indentation guides (4).")),e.editorIndentGuide5=(0,E.registerColor)("editorIndentGuide.background5","#00000000",c.localize(1266,"Color of the editor indentation guides (5).")),e.editorIndentGuide6=(0,E.registerColor)("editorIndentGuide.background6","#00000000",c.localize(1267,"Color of the editor indentation guides (6).")),e.editorActiveIndentGuide1=(0,E.registerColor)("editorIndentGuide.activeBackground1",e.deprecatedEditorActiveIndentGuides,c.localize(1268,"Color of the active editor indentation guides (1).")),e.editorActiveIndentGuide2=(0,E.registerColor)("editorIndentGuide.activeBackground2","#00000000",c.localize(1269,"Color of the active editor indentation guides (2).")),e.editorActiveIndentGuide3=(0,E.registerColor)("editorIndentGuide.activeBackground3","#00000000",c.localize(1270,"Color of the active editor indentation guides (3).")),e.editorActiveIndentGuide4=(0,E.registerColor)("editorIndentGuide.activeBackground4","#00000000",c.localize(1271,"Color of the active editor indentation guides (4).")),e.editorActiveIndentGuide5=(0,E.registerColor)("editorIndentGuide.activeBackground5","#00000000",c.localize(1272,"Color of the active editor indentation guides (5).")),e.editorActiveIndentGuide6=(0,E.registerColor)("editorIndentGuide.activeBackground6","#00000000",c.localize(1273,"Color of the active editor indentation guides (6)."));const y=(0,E.registerColor)("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:E.activeContrastBorder,hcLight:E.activeContrastBorder},c.localize(1274,"Color of editor active line number"),!1,c.localize(1275,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));e.editorActiveLineNumber=(0,E.registerColor)("editorLineNumber.activeForeground",y,c.localize(1276,"Color of editor active line number")),e.editorDimmedLineNumber=(0,E.registerColor)("editorLineNumber.dimmedForeground",null,c.localize(1277,"Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),e.editorRuler=(0,E.registerColor)("editorRuler.foreground",{dark:"#5A5A5A",light:k.Color.lightgrey,hcDark:k.Color.white,hcLight:"#292929"},c.localize(1278,"Color of the editor rulers.")),e.editorCodeLensForeground=(0,E.registerColor)("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},c.localize(1279,"Foreground color of editor CodeLens")),e.editorBracketMatchBackground=(0,E.registerColor)("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},c.localize(1280,"Background color behind matching brackets")),e.editorBracketMatchBorder=(0,E.registerColor)("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:E.contrastBorder,hcLight:E.contrastBorder},c.localize(1281,"Color for matching brackets boxes")),e.editorOverviewRulerBorder=(0,E.registerColor)("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},c.localize(1282,"Color of the overview ruler border.")),e.editorOverviewRulerBackground=(0,E.registerColor)("editorOverviewRuler.background",null,c.localize(1283,"Background color of the editor overview ruler.")),e.editorGutter=(0,E.registerColor)("editorGutter.background",E.editorBackground,c.localize(1284,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),e.editorUnnecessaryCodeBorder=(0,E.registerColor)("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:k.Color.fromHex("#fff").transparent(.8),hcLight:E.contrastBorder},c.localize(1285,"Border color of unnecessary (unused) source code in the editor.")),e.editorUnnecessaryCodeOpacity=(0,E.registerColor)("editorUnnecessaryCode.opacity",{dark:k.Color.fromHex("#000a"),light:k.Color.fromHex("#0007"),hcDark:null,hcLight:null},c.localize(1286,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),e.ghostTextBorder=(0,E.registerColor)("editorGhostText.border",{dark:null,light:null,hcDark:k.Color.fromHex("#fff").transparent(.8),hcLight:k.Color.fromHex("#292929").transparent(.8)},c.localize(1287,"Border color of ghost text in the editor.")),e.ghostTextForeground=(0,E.registerColor)("editorGhostText.foreground",{dark:k.Color.fromHex("#ffffff56"),light:k.Color.fromHex("#0007"),hcDark:null,hcLight:null},c.localize(1288,"Foreground color of the ghost text in the editor.")),e.ghostTextBackground=(0,E.registerColor)("editorGhostText.background",null,c.localize(1289,"Background color of the ghost text in the editor."));const f=new k.Color(new k.RGBA(0,122,204,.6));e.overviewRulerRangeHighlight=(0,E.registerColor)("editorOverviewRuler.rangeHighlightForeground",f,c.localize(1290,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),e.overviewRulerError=(0,E.registerColor)("editorOverviewRuler.errorForeground",{dark:new k.Color(new k.RGBA(255,18,18,.7)),light:new k.Color(new k.RGBA(255,18,18,.7)),hcDark:new k.Color(new k.RGBA(255,50,50,1)),hcLight:"#B5200D"},c.localize(1291,"Overview ruler marker color for errors.")),e.overviewRulerWarning=(0,E.registerColor)("editorOverviewRuler.warningForeground",{dark:E.editorWarningForeground,light:E.editorWarningForeground,hcDark:E.editorWarningBorder,hcLight:E.editorWarningBorder},c.localize(1292,"Overview ruler marker color for warnings.")),e.overviewRulerInfo=(0,E.registerColor)("editorOverviewRuler.infoForeground",{dark:E.editorInfoForeground,light:E.editorInfoForeground,hcDark:E.editorInfoBorder,hcLight:E.editorInfoBorder},c.localize(1293,"Overview ruler marker color for infos.")),e.editorBracketHighlightingForeground1=(0,E.registerColor)("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},c.localize(1294,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingForeground2=(0,E.registerColor)("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},c.localize(1295,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingForeground3=(0,E.registerColor)("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},c.localize(1296,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingForeground4=(0,E.registerColor)("editorBracketHighlight.foreground4","#00000000",c.localize(1297,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingForeground5=(0,E.registerColor)("editorBracketHighlight.foreground5","#00000000",c.localize(1298,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingForeground6=(0,E.registerColor)("editorBracketHighlight.foreground6","#00000000",c.localize(1299,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),e.editorBracketHighlightingUnexpectedBracketForeground=(0,E.registerColor)("editorBracketHighlight.unexpectedBracket.foreground",{dark:new k.Color(new k.RGBA(255,18,18,.8)),light:new k.Color(new k.RGBA(255,18,18,.8)),hcDark:new k.Color(new k.RGBA(255,50,50,1)),hcLight:""},c.localize(1300,"Foreground color of unexpected brackets.")),e.editorBracketPairGuideBackground1=(0,E.registerColor)("editorBracketPairGuide.background1","#00000000",c.localize(1301,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),e.editorBracketPairGuideBackground2=(0,E.registerColor)("editorBracketPairGuide.background2","#00000000",c.localize(1302,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),e.editorBracketPairGuideBackground3=(0,E.registerColor)("editorBracketPairGuide.background3","#00000000",c.localize(1303,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),e.editorBracketPairGuideBackground4=(0,E.registerColor)("editorBracketPairGuide.background4","#00000000",c.localize(1304,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),e.editorBracketPairGuideBackground5=(0,E.registerColor)("editorBracketPairGuide.background5","#00000000",c.localize(1305,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),e.editorBracketPairGuideBackground6=(0,E.registerColor)("editorBracketPairGuide.background6","#00000000",c.localize(1306,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground1=(0,E.registerColor)("editorBracketPairGuide.activeBackground1","#00000000",c.localize(1307,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground2=(0,E.registerColor)("editorBracketPairGuide.activeBackground2","#00000000",c.localize(1308,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground3=(0,E.registerColor)("editorBracketPairGuide.activeBackground3","#00000000",c.localize(1309,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground4=(0,E.registerColor)("editorBracketPairGuide.activeBackground4","#00000000",c.localize(1310,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground5=(0,E.registerColor)("editorBracketPairGuide.activeBackground5","#00000000",c.localize(1311,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),e.editorBracketPairGuideActiveBackground6=(0,E.registerColor)("editorBracketPairGuide.activeBackground6","#00000000",c.localize(1312,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),e.editorUnicodeHighlightBorder=(0,E.registerColor)("editorUnicodeHighlight.border",E.editorWarningForeground,c.localize(1313,"Border color used to highlight unicode characters.")),e.editorUnicodeHighlightBackground=(0,E.registerColor)("editorUnicodeHighlight.background",E.editorWarningBackground,c.localize(1314,"Background color used to highlight unicode characters.")),(0,L.registerThemingParticipant)((_,b)=>{const p=_.getColor(E.editorBackground),n=_.getColor(e.editorLineHighlight),s=n&&!n.isTransparent()?n:p;s&&b.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)})}),define(oe[767],re([1,0,132,80,13,25,23,97,9,491]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CurrentLineMarginHighlightOverlay=e.CurrentLineHighlightOverlay=e.AbstractLineHighlightOverlay=void 0;class b extends c.DynamicViewOverlay{constructor(t){super(),this._context=t;const i=this._context.configuration.options,o=i.get(146);this._renderLineHighlight=i.get(97),this._renderLineHighlightOnlyWhenFocus=i.get(98),this._wordWrap=o.isViewportWrapping,this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new y.Selection(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let t=!1;const i=new Set;for(const u of this._selections)i.add(u.positionLineNumber);const o=Array.from(i);o.sort((u,l)=>u-l),E.equals(this._cursorLineNumbers,o)||(this._cursorLineNumbers=o,t=!0);const g=this._selections.every(u=>u.isEmpty());return this._selectionIsEmpty!==g&&(this._selectionIsEmpty=g,t=!0),t}onThemeChanged(t){return this._readFromSelections()}onConfigurationChanged(t){const i=this._context.configuration.options,o=i.get(146);return this._renderLineHighlight=i.get(97),this._renderLineHighlightOnlyWhenFocus=i.get(98),this._wordWrap=o.isViewportWrapping,this._contentLeft=o.contentLeft,this._contentWidth=o.contentWidth,!0}onCursorStateChanged(t){return this._selections=t.selections,this._readFromSelections()}onFlushed(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollWidthChanged||t.scrollTopChanged}onZonesChanged(t){return!0}onFocusChanged(t){return this._renderLineHighlightOnlyWhenFocus?(this._focused=t.isFocused,!0):!1}prepareRender(t){if(!this._shouldRenderThis()){this._renderData=null;return}const i=t.visibleRange.startLineNumber,o=t.visibleRange.endLineNumber,g=[];for(let l=i;l<=o;l++){const a=l-i;g[a]=""}if(this._wordWrap){const l=this._renderOne(t,!1);for(const a of this._cursorLineNumbers){const r=this._context.viewModel.coordinatesConverter,d=r.convertViewPositionToModelPosition(new _.Position(a,1)).lineNumber,m=r.convertModelPositionToViewPosition(new _.Position(d,1)).lineNumber,h=r.convertModelPositionToViewPosition(new _.Position(d,this._context.viewModel.model.getLineMaxColumn(d))).lineNumber,v=Math.max(m,i),C=Math.min(h,o);for(let w=v;w<=C;w++){const S=w-i;g[S]=l}}}const u=this._renderOne(t,!0);for(const l of this._cursorLineNumbers){if(l<i||l>o)continue;const a=l-i;g[a]=u}this._renderData=g}render(t,i){if(!this._renderData)return"";const o=i-t;return o>=this._renderData.length?"":this._renderData[o]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}}e.AbstractLineHighlightOverlay=b;class p extends b{_renderOne(t,i){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(i?" current-line-exact":"")}" style="width:${Math.max(t.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}}e.CurrentLineHighlightOverlay=p;class n extends b{_renderOne(t,i){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&i?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}}e.CurrentLineMarginHighlightOverlay=n,(0,L.registerThemingParticipant)((s,t)=>{const i=s.getColor(k.editorLineHighlight);if(i&&(t.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${i}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${i}; border: none; }`)),!i||i.isTransparent()||s.defines(k.editorLineHighlightBorder)){const o=s.getColor(k.editorLineHighlightBorder);o&&(t.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${o}; }`),t.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${o}; }`),(0,f.isHighContrast)(s.type)&&(t.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),t.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}})}),define(oe[768],re([1,0,132,80,25,9,13,19,344,250,494]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IndentGuidesOverlay=void 0;class p extends c.DynamicViewOverlay{constructor(t){super(),this._context=t,this._primaryPosition=null;const i=this._context.configuration.options,o=i.get(147),g=i.get(50);this._spaceWidth=g.spaceWidth,this._maxIndentLeft=o.wrappingColumn===-1?-1:o.wrappingColumn*g.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(t){const i=this._context.configuration.options,o=i.get(147),g=i.get(50);return this._spaceWidth=g.spaceWidth,this._maxIndentLeft=o.wrappingColumn===-1?-1:o.wrappingColumn*g.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=i.get(16),!0}onCursorStateChanged(t){const o=t.selections[0].getPosition();return this._primaryPosition?.equals(o)?!1:(this._primaryPosition=o,!0)}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return t.scrollTopChanged}onZonesChanged(t){return!0}onLanguageConfigurationChanged(t){return!0}prepareRender(t){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}const i=t.visibleRange.startLineNumber,o=t.visibleRange.endLineNumber,g=t.scrollWidth,u=this._primaryPosition,l=this.getGuidesByLine(i,Math.min(o+1,this._context.viewModel.getLineCount()),u),a=[];for(let r=i;r<=o;r++){const d=r-i,m=l[d];let h="";const v=t.visibleRangeForPosition(new L.Position(r,1))?.left??0;for(const C of m){const w=C.column===-1?v+(C.visibleColumn-1)*this._spaceWidth:t.visibleRangeForPosition(new L.Position(r,C.column)).left;if(w>g||this._maxIndentLeft>0&&w>this._maxIndentLeft)break;const S=C.horizontalLine?C.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",D=C.horizontalLine?(t.visibleRangeForPosition(new L.Position(r,C.horizontalLine.endColumn))?.left??w+this._spaceWidth)-w:this._spaceWidth;h+=`<div class="core-guide ${C.className} ${S}" style="left:${w}px;width:${D}px"></div>`}a[d]=h}this._renderResult=a}getGuidesByLine(t,i,o){const g=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(t,i,o,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?b.HorizontalGuidesState.Enabled:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?b.HorizontalGuidesState.EnabledForActive:b.HorizontalGuidesState.Disabled,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,u=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(t,i):null;let l=0,a=0,r=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&o){const h=this._context.viewModel.getActiveIndentGuide(o.lineNumber,t,i);l=h.startLineNumber,a=h.endLineNumber,r=h.indent}const{indentSize:d}=this._context.viewModel.model.getOptions(),m=[];for(let h=t;h<=i;h++){const v=new Array;m.push(v);const C=g?g[h-t]:[],w=new y.ArrayQueue(C),S=u?u[h-t]:0;for(let D=1;D<=S;D++){const I=(D-1)*d+1,T=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||C.length===0)&&l<=h&&h<=a&&D===r;v.push(...w.takeWhile(A=>A.visibleColumn<I)||[]);const M=w.peek();(!M||M.visibleColumn!==I||M.horizontalLine)&&v.push(new b.IndentGuide(I,-1,`core-guide-indent lvl-${(D-1)%30}`+(T?" indent-active":""),null,-1,-1))}v.push(...w.takeWhile(D=>!0)||[])}return m}render(t,i){if(!this._renderResult)return"";const o=i-t;return o<0||o>=this._renderResult.length?"":this._renderResult[o]}}e.IndentGuidesOverlay=p;function n(s){if(!(s&&s.isTransparent()))return s}(0,E.registerThemingParticipant)((s,t)=>{const i=[{bracketColor:k.editorBracketHighlightingForeground1,guideColor:k.editorBracketPairGuideBackground1,guideColorActive:k.editorBracketPairGuideActiveBackground1},{bracketColor:k.editorBracketHighlightingForeground2,guideColor:k.editorBracketPairGuideBackground2,guideColorActive:k.editorBracketPairGuideActiveBackground2},{bracketColor:k.editorBracketHighlightingForeground3,guideColor:k.editorBracketPairGuideBackground3,guideColorActive:k.editorBracketPairGuideActiveBackground3},{bracketColor:k.editorBracketHighlightingForeground4,guideColor:k.editorBracketPairGuideBackground4,guideColorActive:k.editorBracketPairGuideActiveBackground4},{bracketColor:k.editorBracketHighlightingForeground5,guideColor:k.editorBracketPairGuideBackground5,guideColorActive:k.editorBracketPairGuideActiveBackground5},{bracketColor:k.editorBracketHighlightingForeground6,guideColor:k.editorBracketPairGuideBackground6,guideColorActive:k.editorBracketPairGuideActiveBackground6}],o=new _.BracketPairGuidesClassNames,g=[{indentColor:k.editorIndentGuide1,indentColorActive:k.editorActiveIndentGuide1},{indentColor:k.editorIndentGuide2,indentColorActive:k.editorActiveIndentGuide2},{indentColor:k.editorIndentGuide3,indentColorActive:k.editorActiveIndentGuide3},{indentColor:k.editorIndentGuide4,indentColorActive:k.editorActiveIndentGuide4},{indentColor:k.editorIndentGuide5,indentColorActive:k.editorActiveIndentGuide5},{indentColor:k.editorIndentGuide6,indentColorActive:k.editorActiveIndentGuide6}],u=i.map(a=>{const r=s.getColor(a.bracketColor),d=s.getColor(a.guideColor),m=s.getColor(a.guideColorActive),h=n(n(d)??r?.transparent(.3)),v=n(n(m)??r);if(!(!h||!v))return{guideColor:h,guideColorActive:v}}).filter(f.isDefined),l=g.map(a=>{const r=s.getColor(a.indentColor),d=s.getColor(a.indentColorActive),m=n(r),h=n(d);if(!(!m||!h))return{indentColor:m,indentColorActive:h}}).filter(f.isDefined);if(u.length>0){for(let a=0;a<30;a++){const r=u[a%u.length];t.addRule(`.monaco-editor .${o.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${r.guideColor}; --guide-color-active: ${r.guideColorActive}; }`)}t.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),t.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),t.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),t.addRule(`.monaco-editor .vertical.${o.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),t.addRule(`.monaco-editor .horizontal-top.${o.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),t.addRule(`.monaco-editor .horizontal-bottom.${o.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(l.length>0){for(let a=0;a<30;a++){const r=l[a%l.length];t.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${r.indentColor}; --indent-color-active: ${r.indentColorActive}; }`)}t.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),t.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}})}),define(oe[411],re([1,0,16,132,9,4,25,80,495]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LineNumbersOverlay=void 0;class _ extends k.DynamicViewOverlay{static{this.CLASS_NAME="line-numbers"}constructor(p){super(),this._context=p,this._readConfig(),this._lastCursorModelPosition=new E.Position(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){const p=this._context.configuration.options;this._lineHeight=p.get(67);const n=p.get(68);this._renderLineNumbers=n.renderType,this._renderCustomLineNumbers=n.renderFn,this._renderFinalNewline=p.get(96);const s=p.get(146);this._lineNumbersLeft=s.lineNumbersLeft,this._lineNumbersWidth=s.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(p){return this._readConfig(),!0}onCursorStateChanged(p){const n=p.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n);let s=!1;return this._activeLineNumber!==n.lineNumber&&(this._activeLineNumber=n.lineNumber,s=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(s=!0),s}onFlushed(p){return!0}onLinesChanged(p){return!0}onLinesDeleted(p){return!0}onLinesInserted(p){return!0}onScrollChanged(p){return p.scrollTopChanged}onZonesChanged(p){return!0}onDecorationsChanged(p){return p.affectsLineNumber}_getLineRenderLineNumber(p){const n=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new E.Position(p,1));if(n.column!==1)return"";const s=n.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(s);if(this._renderLineNumbers===2){const t=Math.abs(this._lastCursorModelPosition.lineNumber-s);return t===0?'<span class="relative-current-line-number">'+s+"</span>":String(t)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===s||s%10===0)return String(s);const t=this._context.viewModel.getLineCount();return s===t?String(s):""}return String(s)}prepareRender(p){if(this._renderLineNumbers===0){this._renderResult=null;return}const n=c.isLinux?this._lineHeight%2===0?" lh-even":" lh-odd":"",s=p.visibleRange.startLineNumber,t=p.visibleRange.endLineNumber,i=this._context.viewModel.getDecorationsInViewport(p.visibleRange).filter(l=>!!l.options.lineNumberClassName);i.sort((l,a)=>L.Range.compareRangesUsingEnds(l.range,a.range));let o=0;const g=this._context.viewModel.getLineCount(),u=[];for(let l=s;l<=t;l++){const a=l-s;let r=this._getLineRenderLineNumber(l),d="";for(;o<i.length&&i[o].range.endLineNumber<l;)o++;for(let m=o;m<i.length;m++){const{range:h,options:v}=i[m];h.startLineNumber<=l&&(d+=" "+v.lineNumberClassName)}if(!r&&!d){u[a]="";continue}l===g&&this._context.viewModel.getLineLength(l)===0&&(this._renderFinalNewline==="off"&&(r=""),this._renderFinalNewline==="dimmed"&&(d+=" dimmed-line-number")),l===this._activeLineNumber&&(d+=" active-line-number"),u[a]=`<div class="${_.CLASS_NAME}${n}${d}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${r}</div>`}this._renderResult=u}render(p,n){if(!this._renderResult)return"";const s=n-p;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}e.LineNumbersOverlay=_,(0,y.registerThemingParticipant)((b,p)=>{const n=b.getColor(f.editorLineNumbers),s=b.getColor(f.editorDimmedLineNumber);s?p.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${s}; }`):n&&p.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n.transparent(.4)}; }`)})}),define(oe[769],re([1,0,3,64,39,16,11,75,210,323,57,411,346,37,168,9,4,23,233,28,33,302,31,7,488]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextAreaHandler=void 0;class v{constructor(I,T,M,A,R){this._context=I,this.modelLineNumber=T,this.distanceToModelLineStart=M,this.widthOfHiddenLineTextBefore=A,this.distanceToModelLineEnd=R,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(I){const T=new o.Position(this.modelLineNumber,this.distanceToModelLineStart+1),M=new o.Position(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(T),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(M),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=I.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=I.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(I){return this._previousPresentation||(I?this._previousPresentation=I:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const C=k.isFirefox;let w=class extends p.ViewPart{constructor(I,T,M,A,R){super(I),this._keybindingService=A,this._instantiationService=R,this._primaryCursorPosition=new o.Position(1,1),this._primaryCursorVisibleRange=null,this._viewController=T,this._visibleRangeProvider=M,this._scrollLeft=0,this._scrollTop=0;const N=this._context.configuration.options,O=N.get(146);this._setAccessibilityOptions(N),this._contentLeft=O.contentLeft,this._contentWidth=O.contentWidth,this._contentHeight=O.height,this._fontInfo=N.get(50),this._lineHeight=N.get(67),this._emptySelectionClipboard=N.get(37),this._copyWithSyntaxHighlighting=N.get(25),this._visibleTextArea=null,this._selections=[new u.Selection(1,1,1,1)],this._modelSelections=[new u.Selection(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,E.createFastDomNode)(document.createElement("textarea")),p.PartFingerprints.write(this.textArea,7),this.textArea.setClassName(`inputarea ${l.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:x}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${x*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(N)),this.textArea.setAttribute("aria-required",N.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(N.get(125))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",c.localize(1732,"editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",N.get(92)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,E.createFastDomNode)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const F={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:q=>this._context.viewModel.getLineMaxColumn(q),getValueInRange:(q,H)=>this._context.viewModel.getValueInRange(q,H),getValueLengthInRange:(q,H)=>this._context.viewModel.getValueLengthInRange(q,H),modifyPosition:(q,H)=>this._context.viewModel.modifyPosition(q,H)},W={getDataToCopy:()=>{const q=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,L.isWindows),H=this._context.viewModel.model.getEOL(),K=this._emptySelectionClipboard&&this._modelSelections.length===1&&this._modelSelections[0].isEmpty(),U=Array.isArray(q)?q:null,Y=Array.isArray(q)?q.join(H):q;let Q,X=null;if(_.CopyOptions.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&Y.length<65536){const G=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);G&&(Q=G.html,X=G.mode)}return{isFromEmptySelection:K,multicursorText:U,text:Y,html:Q,mode:X}},getScreenReaderContent:()=>{if(this._accessibilitySupport===1){const q=this._selections[0];if(L.isMacintosh&&q.isEmpty()){const K=q.getStartPosition();let U=this._getWordBeforePosition(K);if(U.length===0&&(U=this._getCharacterBeforePosition(K)),U.length>0)return new b.TextAreaState(U,U.length,U.length,g.Range.fromPositions(K),0)}if(L.isMacintosh&&!q.isEmpty()&&F.getValueLengthInRange(q,0)<500){const K=F.getValueInRange(q,0);return new b.TextAreaState(K,0,K.length,q,0)}if(k.isSafari&&!q.isEmpty()){const K="vscode-placeholder";return new b.TextAreaState(K,0,K.length,null,void 0)}return b.TextAreaState.EMPTY}if(k.isAndroid){const q=this._selections[0];if(q.isEmpty()){const H=q.getStartPosition(),[K,U]=this._getAndroidWordAtPosition(H);if(K.length>0)return new b.TextAreaState(K,U,U,g.Range.fromPositions(H),0)}return b.TextAreaState.EMPTY}return b.PagedScreenReaderStrategy.fromEditorSelection(F,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0)},deduceModelPosition:(q,H,K)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(q,H,K)},z=this._register(new _.TextAreaWrapper(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(_.TextAreaInput,W,z,L.OS,{isAndroid:k.isAndroid,isChrome:k.isChrome,isFirefox:k.isFirefox,isSafari:k.isSafari})),this._register(this._textAreaInput.onKeyDown(q=>{this._viewController.emitKeyDown(q)})),this._register(this._textAreaInput.onKeyUp(q=>{this._viewController.emitKeyUp(q)})),this._register(this._textAreaInput.onPaste(q=>{let H=!1,K=null,U=null;q.metadata&&(H=this._emptySelectionClipboard&&!!q.metadata.isFromEmptySelection,K=typeof q.metadata.multicursorText<"u"?q.metadata.multicursorText:null,U=q.metadata.mode),this._viewController.paste(q.text,H,K,U)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(q=>{q.replacePrevCharCnt||q.replaceNextCharCnt||q.positionDelta?(b._debugComposition&&console.log(` => compositionType: <<${q.text}>>, ${q.replacePrevCharCnt}, ${q.replaceNextCharCnt}, ${q.positionDelta}`),this._viewController.compositionType(q.text,q.replacePrevCharCnt,q.replaceNextCharCnt,q.positionDelta)):(b._debugComposition&&console.log(` => type: <<${q.text}>>`),this._viewController.type(q.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(q=>{this._viewController.setSelection(q)})),this._register(this._textAreaInput.onCompositionStart(q=>{const H=this.textArea.domNode,K=this._modelSelections[0],{distanceToModelLineStart:U,widthOfHiddenTextBefore:Y}=(()=>{const X=H.value.substring(0,Math.min(H.selectionStart,H.selectionEnd)),G=X.lastIndexOf(`
`),P=X.substring(G+1),te=P.lastIndexOf("	"),se=P.length-te-1,ue=K.getStartPosition(),ge=Math.min(ue.column-1,se),pe=ue.column-1-ge,ce=P.substring(0,P.length-ge),{tabSize:ie}=this._context.viewModel.model.getOptions(),ne=S(this.textArea.domNode.ownerDocument,ce,this._fontInfo,ie);return{distanceToModelLineStart:pe,widthOfHiddenTextBefore:ne}})(),{distanceToModelLineEnd:Q}=(()=>{const X=H.value.substring(Math.max(H.selectionStart,H.selectionEnd)),G=X.indexOf(`
`),P=G===-1?X:X.substring(0,G),te=P.indexOf("	"),se=te===-1?P.length:P.length-te-1,ue=K.getEndPosition(),ge=Math.min(this._context.viewModel.model.getLineMaxColumn(ue.lineNumber)-ue.column,se);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(ue.lineNumber)-ue.column-ge}})();this._context.viewModel.revealRange("keyboard",!0,g.Range.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new v(this._context,K.startLineNumber,U,Y,Q),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${l.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(q=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${l.MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(d.IME.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}writeScreenReaderContent(I){this._textAreaInput.writeNativeTextAreaContent(I)}dispose(){super.dispose()}_getAndroidWordAtPosition(I){const T='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',M=this._context.viewModel.getLineContent(I.lineNumber),A=(0,i.getMapForWordSeparators)(T,[]);let R=!0,N=I.column,O=!0,x=I.column,F=0;for(;F<50&&(R||O);){if(R&&N<=1&&(R=!1),R){const W=M.charCodeAt(N-2);A.get(W)!==0?R=!1:N--}if(O&&x>M.length&&(O=!1),O){const W=M.charCodeAt(x-1);A.get(W)!==0?O=!1:x++}F++}return[M.substring(N-1,x-1),I.column-N]}_getWordBeforePosition(I){const T=this._context.viewModel.getLineContent(I.lineNumber),M=(0,i.getMapForWordSeparators)(this._context.configuration.options.get(132),[]);let A=I.column,R=0;for(;A>1;){const N=T.charCodeAt(A-2);if(M.get(N)!==0||R>50)return T.substring(A-1,I.column-1);R++,A--}return T.substring(0,I.column-1)}_getCharacterBeforePosition(I){if(I.column>1){const M=this._context.viewModel.getLineContent(I.lineNumber).charAt(I.column-2);if(!y.isHighSurrogate(M.charCodeAt(0)))return M}return""}_getAriaLabel(I){if(I.get(2)===1){const M=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),A=this._keybindingService.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),R=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),N=c.localize(1733,"The editor is not accessible at this time.");return M?c.localize(1734,"{0} To enable screen reader optimized mode, use {1}",N,M):A?c.localize(1735,"{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",N,A):R?c.localize(1736,"{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",N,R):N}return I.get(4)}_setAccessibilityOptions(I){this._accessibilitySupport=I.get(2);const T=I.get(3);this._accessibilitySupport===2&&T===t.EditorOptions.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=T;const A=I.get(146).wrappingColumn;if(A!==-1&&this._accessibilitySupport!==1){const R=I.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(A*R.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=C?0:1}onConfigurationChanged(I){const T=this._context.configuration.options,M=T.get(146);this._setAccessibilityOptions(T),this._contentLeft=M.contentLeft,this._contentWidth=M.contentWidth,this._contentHeight=M.height,this._fontInfo=T.get(50),this._lineHeight=T.get(67),this._emptySelectionClipboard=T.get(37),this._copyWithSyntaxHighlighting=T.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:A}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${A*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",this._getAriaLabel(T)),this.textArea.setAttribute("aria-required",T.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(T.get(125))),(I.hasChanged(34)||I.hasChanged(92))&&this._ensureReadOnlyAttribute(),I.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(I){return this._selections=I.selections.slice(0),this._modelSelections=I.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(I){return!0}onFlushed(I){return!0}onLinesChanged(I){return!0}onLinesDeleted(I){return!0}onLinesInserted(I){return!0}onScrollChanged(I){return this._scrollLeft=I.scrollLeft,this._scrollTop=I.scrollTop,!0}onZonesChanged(I){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(I){I.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",I.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),I.role&&this.textArea.setAttribute("role",I.role)}_ensureReadOnlyAttribute(){const I=this._context.configuration.options;!d.IME.enabled||I.get(34)&&I.get(92)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(I){this._primaryCursorPosition=new o.Position(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=I.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(I)}render(I){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){const M=this._visibleTextArea.visibleTextareaStart,A=this._visibleTextArea.visibleTextareaEnd,R=this._visibleTextArea.startPosition,N=this._visibleTextArea.endPosition;if(R&&N&&M&&A&&A.left>=this._scrollLeft&&M.left<=this._scrollLeft+this._contentWidth){const O=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,x=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let F=this._visibleTextArea.widthOfHiddenLineTextBefore,W=this._contentLeft+M.left-this._scrollLeft,z=A.left-M.left+1;if(W<this._contentLeft){const Q=this._contentLeft-W;W+=Q,F+=Q,z-=Q}z>this._contentWidth&&(z=this._contentWidth);const q=this._context.viewModel.getViewLineData(R.lineNumber),H=q.tokens.findTokenIndexAtOffset(R.column-1),K=q.tokens.findTokenIndexAtOffset(N.column-1),U=H===K,Y=this._visibleTextArea.definePresentation(U?q.tokens.getPresentation(H):null);this.textArea.domNode.scrollTop=x*this._lineHeight,this.textArea.domNode.scrollLeft=F,this._doRender({lastRenderPosition:null,top:O,left:W,width:z,height:this._lineHeight,useCover:!1,color:(a.TokenizationRegistry.getColorMap()||[])[Y.foreground],italic:Y.italic,bold:Y.bold,underline:Y.underline,strikethrough:Y.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}const I=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(I<this._contentLeft||I>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}const T=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(T<0||T>this._contentHeight){this._renderAtTopLeft();return}if(L.isMacintosh||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:T,left:this._textAreaWrapping?this._contentLeft:I,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const M=this._textAreaInput.textAreaState.newlineCountBeforeSelection??this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=M*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:T,left:this._textAreaWrapping?this._contentLeft:I,width:this._textAreaWidth,height:C?0:1,useCover:!1})}_newlinecount(I){let T=0,M=-1;do{if(M=I.indexOf(`
`,M+1),M===-1)break;T++}while(!0);return T}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:C?0:1,useCover:!0})}_doRender(I){this._lastRenderPosition=I.lastRenderPosition;const T=this.textArea,M=this.textAreaCover;(0,f.applyFontInfo)(T,this._fontInfo),T.setTop(I.top),T.setLeft(I.left),T.setWidth(I.width),T.setHeight(I.height),T.setColor(I.color?r.Color.Format.CSS.formatHex(I.color):""),T.setFontStyle(I.italic?"italic":""),I.bold&&T.setFontWeight("bold"),T.setTextDecoration(`${I.underline?" underline":""}${I.strikethrough?" line-through":""}`),M.setTop(I.useCover?I.top:0),M.setLeft(I.useCover?I.left:0),M.setWidth(I.useCover?I.width:0),M.setHeight(I.useCover?I.height:0);const A=this._context.configuration.options;A.get(57)?M.setClassName("monaco-editor-background textAreaCover "+s.Margin.OUTER_CLASS_NAME):A.get(68).renderType!==0?M.setClassName("monaco-editor-background textAreaCover "+n.LineNumbersOverlay.CLASS_NAME):M.setClassName("monaco-editor-background textAreaCover")}};e.TextAreaHandler=w,e.TextAreaHandler=w=De([he(3,m.IKeybindingService),he(4,h.IInstantiationService)],w);function S(D,I,T,M){if(I.length===0)return 0;const A=D.createElement("div");A.style.position="absolute",A.style.top="-50000px",A.style.width="50000px";const R=D.createElement("span");(0,f.applyFontInfo)(R,T),R.style.whiteSpace="pre",R.style.tabSize=`${M*T.spaceWidth}px`,R.append(I),A.appendChild(R),D.body.appendChild(A);const N=R.offsetWidth;return A.remove(),N}}),define(oe[770],re([1,0,39,33,57,9,28,80,95,13]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DecorationsOverviewRuler=void 0;class p{constructor(t,i){const o=t.options;this.lineHeight=o.get(67),this.pixelRatio=o.get(144),this.overviewRulerLanes=o.get(83),this.renderBorder=o.get(82);const g=i.getColor(f.editorOverviewRulerBorder);this.borderColor=g?g.toString():null,this.hideCursor=o.get(59);const u=i.getColor(f.editorCursorForeground);this.cursorColorSingle=u?u.transparent(.7).toString():null;const l=i.getColor(f.editorMultiCursorPrimaryForeground);this.cursorColorPrimary=l?l.transparent(.7).toString():null;const a=i.getColor(f.editorMultiCursorSecondaryForeground);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=i.type;const r=o.get(73),d=r.enabled,m=r.side,h=i.getColor(f.editorOverviewRulerBackground),v=y.TokenizationRegistry.getDefaultBackground();h?this.backgroundColor=h:d&&m==="right"?this.backgroundColor=v:this.backgroundColor=null;const w=o.get(146).overviewRuler;this.top=w.top,this.right=w.right,this.domWidth=w.width,this.domHeight=w.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[S,D]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=S,this.w=D}_initLanes(t,i,o){const g=i-t;if(o>=3){const u=Math.floor(g/3),l=Math.floor(g/3),a=g-u-l,r=t,d=r+u,m=r+u+a;return[[0,r,d,r,m,r,d,r],[0,u,a,u+a,l,u+a+l,a+l,u+a+l]]}else if(o===2){const u=Math.floor(g/2),l=g-u,a=t,r=a+u;return[[0,a,a,a,r,a,a,a],[0,u,u,u,l,u+l,u+l,u+l]]}else{const u=t,l=g;return[[0,u,u,u,u,u,u,u],[0,l,l,l,l,l,l,l]]}}equals(t){return this.lineHeight===t.lineHeight&&this.pixelRatio===t.pixelRatio&&this.overviewRulerLanes===t.overviewRulerLanes&&this.renderBorder===t.renderBorder&&this.borderColor===t.borderColor&&this.hideCursor===t.hideCursor&&this.cursorColorSingle===t.cursorColorSingle&&this.cursorColorPrimary===t.cursorColorPrimary&&this.cursorColorSecondary===t.cursorColorSecondary&&this.themeType===t.themeType&&k.Color.equals(this.backgroundColor,t.backgroundColor)&&this.top===t.top&&this.right===t.right&&this.domWidth===t.domWidth&&this.domHeight===t.domHeight&&this.canvasWidth===t.canvasWidth&&this.canvasHeight===t.canvasHeight}}class n extends E.ViewPart{constructor(t){super(t),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=(0,c.createFastDomNode)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=y.TokenizationRegistry.onDidChange(i=>{i.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new L.Position(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(t){const i=new p(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(i)?!1:(this._settings=i,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,t&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(t){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(t){this._cursorPositions=[];for(let i=0,o=t.selections.length;i<o;i++){let g=this._settings.cursorColorSingle;o>1&&(g=i===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:t.selections[i].getPosition(),color:g})}return this._cursorPositions.sort((i,o)=>L.Position.compare(i.position,o.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(t){return t.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(t){return this._markRenderingIsNeeded()}onScrollChanged(t){return t.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(t){return this._markRenderingIsNeeded()}onThemeChanged(t){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(t){}render(t){this._render(),this._actualShouldRender=0}_render(){const t=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(t?k.Color.Format.CSS.formatHexA(t):""),this._domNode.setDisplay("none");return}const i=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(i.sort(_.OverviewRulerDecorationsGroup.compareByRenderingProps),this._actualShouldRender===1&&!_.OverviewRulerDecorationsGroup.equalsArr(this._renderedDecorations,i)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!(0,b.equals)(this._renderedCursorPositions,this._cursorPositions,(w,S)=>w.position.lineNumber===S.position.lineNumber&&w.color===S.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=i,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const o=this._settings.canvasWidth,g=this._settings.canvasHeight,u=this._settings.lineHeight,l=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),r=g/a,d=6*this._settings.pixelRatio|0,m=d/2|0,h=this._domNode.domNode.getContext("2d");t?t.isOpaque()?(h.fillStyle=k.Color.Format.CSS.formatHexA(t),h.fillRect(0,0,o,g)):(h.clearRect(0,0,o,g),h.fillStyle=k.Color.Format.CSS.formatHexA(t),h.fillRect(0,0,o,g)):h.clearRect(0,0,o,g);const v=this._settings.x,C=this._settings.w;for(const w of i){const S=w.color,D=w.data;h.fillStyle=S;let I=0,T=0,M=0;for(let A=0,R=D.length/3;A<R;A++){const N=D[3*A],O=D[3*A+1],x=D[3*A+2];let F=l.getVerticalOffsetForLineNumber(O)*r|0,W=(l.getVerticalOffsetForLineNumber(x)+u)*r|0;if(W-F<d){let q=(F+W)/2|0;q<m?q=m:q+m>g&&(q=g-m),F=q-m,W=q+m}F>M+1||N!==I?(A!==0&&h.fillRect(v[I],T,C[I],M-T),I=N,T=F,M=W):W>M&&(M=W)}h.fillRect(v[I],T,C[I],M-T)}if(!this._settings.hideCursor){const w=2*this._settings.pixelRatio|0,S=w/2|0,D=this._settings.x[7],I=this._settings.w[7];let T=-100,M=-100,A=null;for(let R=0,N=this._cursorPositions.length;R<N;R++){const O=this._cursorPositions[R].color;if(!O)continue;const x=this._cursorPositions[R].position;let F=l.getVerticalOffsetForLineNumber(x.lineNumber)*r|0;F<S?F=S:F+S>g&&(F=g-S);const W=F-S,z=W+w;W>M+1||O!==A?(R!==0&&A&&h.fillRect(D,T,I,M-T),T=W,M=z):z>M&&(M=z),A=O,h.fillStyle=O}A&&h.fillRect(D,T,I,M-T)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(h.beginPath(),h.lineWidth=1,h.strokeStyle=this._settings.borderColor,h.moveTo(0,0),h.lineTo(0,g),h.moveTo(1,0),h.lineTo(o,0),h.stroke())}}e.DecorationsOverviewRuler=n}),define(oe[771],re([1,0,39,14,57,660,37,80,25,97,5,505]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewCursors=void 0;class n extends E.ViewPart{static{this.BLINK_INTERVAL=500}constructor(t){super(t);const i=this._context.configuration.options;this._readOnly=i.get(92),this._cursorBlinking=i.get(26),this._cursorStyle=i.get(28),this._cursorSmoothCaretAnimation=i.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new L.ViewCursor(this._context,L.CursorPlurality.Single),this._secondaryCursors=[],this._renderData=[],this._domNode=(0,c.createFastDomNode)(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new k.TimeoutTimer,this._cursorFlatBlinkInterval=new p.WindowIntervalTimer,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(t){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(t){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(t){const i=this._context.configuration.options;this._readOnly=i.get(92),this._cursorBlinking=i.get(26),this._cursorStyle=i.get(28),this._cursorSmoothCaretAnimation=i.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(t);for(let o=0,g=this._secondaryCursors.length;o<g;o++)this._secondaryCursors[o].onConfigurationChanged(t);return!0}_onCursorPositionChanged(t,i,o){const g=this._secondaryCursors.length!==i.length||this._cursorSmoothCaretAnimation==="explicit"&&o!==3;if(this._primaryCursor.setPlurality(i.length?L.CursorPlurality.MultiPrimary:L.CursorPlurality.Single),this._primaryCursor.onCursorPositionChanged(t,g),this._updateBlinking(),this._secondaryCursors.length<i.length){const u=i.length-this._secondaryCursors.length;for(let l=0;l<u;l++){const a=new L.ViewCursor(this._context,L.CursorPlurality.MultiSecondary);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>i.length){const u=this._secondaryCursors.length-i.length;for(let l=0;l<u;l++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let u=0;u<i.length;u++)this._secondaryCursors[u].onCursorPositionChanged(i[u],g)}onCursorStateChanged(t){const i=[];for(let g=0,u=t.selections.length;g<u;g++)i[g]=t.selections[g].getPosition();this._onCursorPositionChanged(i[0],i.slice(1),t.reason);const o=t.selections[0].isEmpty();return this._selectionIsEmpty!==o&&(this._selectionIsEmpty=o,this._updateDomClassName()),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onFocusChanged(t){return this._editorHasFocus=t.isFocused,this._updateBlinking(),!1}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return!0}onTokensChanged(t){const i=o=>{for(let g=0,u=t.ranges.length;g<u;g++)if(t.ranges[g].fromLineNumber<=o.lineNumber&&o.lineNumber<=t.ranges[g].toLineNumber)return!0;return!1};if(i(this._primaryCursor.getPosition()))return!0;for(const o of this._secondaryCursors)if(i(o.getPosition()))return!0;return!1}onZonesChanged(t){return!0}_getCursorBlinking(){return this._isComposingInput||!this._editorHasFocus?0:this._readOnly?5:this._cursorBlinking}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();const t=this._getCursorBlinking(),i=t===0,o=t===5;i?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!i&&!o&&(t===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},n.BLINK_INTERVAL,(0,p.getWindow)(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},n.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let t="cursors-layer";switch(this._selectionIsEmpty||(t+=" has-selection"),this._cursorStyle){case y.TextEditorCursorStyle.Line:t+=" cursor-line-style";break;case y.TextEditorCursorStyle.Block:t+=" cursor-block-style";break;case y.TextEditorCursorStyle.Underline:t+=" cursor-underline-style";break;case y.TextEditorCursorStyle.LineThin:t+=" cursor-line-thin-style";break;case y.TextEditorCursorStyle.BlockOutline:t+=" cursor-block-outline-style";break;case y.TextEditorCursorStyle.UnderlineThin:t+=" cursor-underline-thin-style";break;default:t+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:t+=" cursor-blink";break;case 2:t+=" cursor-smooth";break;case 3:t+=" cursor-phase";break;case 4:t+=" cursor-expand";break;case 5:t+=" cursor-solid";break;default:t+=" cursor-solid"}else t+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(t+=" cursor-smooth-caret-animation"),t}_show(){this._primaryCursor.show();for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let t=0,i=this._secondaryCursors.length;t<i;t++)this._secondaryCursors[t].hide();this._isVisible=!1}prepareRender(t){this._primaryCursor.prepareRender(t);for(let i=0,o=this._secondaryCursors.length;i<o;i++)this._secondaryCursors[i].prepareRender(t)}render(t){const i=[];let o=0;const g=this._primaryCursor.render(t);g&&(i[o++]=g);for(let u=0,l=this._secondaryCursors.length;u<l;u++){const a=this._secondaryCursors[u].render(t);a&&(i[o++]=a)}this._renderData=i}getLastRenderData(){return this._renderData}}e.ViewCursors=n,(0,_.registerThemingParticipant)((s,t)=>{const i=[{class:".cursor",foreground:f.editorCursorForeground,background:f.editorCursorBackground},{class:".cursor-primary",foreground:f.editorMultiCursorPrimaryForeground,background:f.editorMultiCursorPrimaryBackground},{class:".cursor-secondary",foreground:f.editorMultiCursorSecondaryForeground,background:f.editorMultiCursorSecondaryBackground}];for(const o of i){const g=s.getColor(o.foreground);if(g){let u=s.getColor(o.background);u||(u=g.opposite()),t.addRule(`.monaco-editor .cursors-layer ${o.class} { background-color: ${g}; border-color: ${g}; color: ${u}; }`),(0,b.isHighContrast)(s.type)&&t.addRule(`.monaco-editor .cursors-layer.has-selection ${o.class} { border-left: 1px solid ${u}; border-right: 1px solid ${u}; }`)}}})}),define(oe[772],re([1,0,132,11,135,9,80,506]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WhitespaceOverlay=void 0;class f extends c.DynamicViewOverlay{constructor(p){super(),this._context=p,this._options=new _(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(p){const n=new _(this._context.configuration);return this._options.equals(n)?p.hasChanged(146):(this._options=n,!0)}onCursorStateChanged(p){return this._selection=p.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(p){return!0}onFlushed(p){return!0}onLinesChanged(p){return!0}onLinesDeleted(p){return!0}onLinesInserted(p){return!0}onScrollChanged(p){return p.scrollTopChanged}onZonesChanged(p){return!0}prepareRender(p){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}const n=p.visibleRange.startLineNumber,t=p.visibleRange.endLineNumber-n+1,i=new Array(t);for(let g=0;g<t;g++)i[g]=!0;const o=this._context.viewModel.getMinimapLinesRenderingData(p.viewportData.startLineNumber,p.viewportData.endLineNumber,i);this._renderResult=[];for(let g=p.viewportData.startLineNumber;g<=p.viewportData.endLineNumber;g++){const u=g-p.viewportData.startLineNumber,l=o.data[u];let a=null;if(this._options.renderWhitespace==="selection"){const r=this._selection;for(const d of r){if(d.endLineNumber<g||d.startLineNumber>g)continue;const m=d.startLineNumber===g?d.startColumn:l.minColumn,h=d.endLineNumber===g?d.endColumn:l.maxColumn;m<h&&(a||(a=[]),a.push(new E.LineRange(m-1,h-1)))}}this._renderResult[u]=this._applyRenderWhitespace(p,g,a,l)}}_applyRenderWhitespace(p,n,s,t){if(this._options.renderWhitespace==="selection"&&!s||this._options.renderWhitespace==="trailing"&&t.continuesWithWrappedLine)return"";const i=this._context.theme.getColor(y.editorWhitespaces),o=this._options.renderWithSVG,g=t.content,u=this._options.stopRenderingLineAfter===-1?g.length:Math.min(this._options.stopRenderingLineAfter,g.length),l=t.continuesWithWrappedLine,a=t.minColumn-1,r=this._options.renderWhitespace==="boundary",d=this._options.renderWhitespace==="trailing",m=this._options.lineHeight,h=this._options.middotWidth,v=this._options.wsmiddotWidth,C=this._options.spaceWidth,w=Math.abs(v-C),S=Math.abs(h-C),D=w<S?11825:183,I=this._options.canUseHalfwidthRightwardsArrow;let T="",M=!1,A=k.firstNonWhitespaceIndex(g),R;A===-1?(M=!0,A=u,R=u):R=k.lastNonWhitespaceIndex(g);let N=0,O=s&&s[N],x=0;for(let F=a;F<u;F++){const W=g.charCodeAt(F);if(O&&F>=O.endOffset&&(N++,O=s&&s[N]),W!==9&&W!==32||d&&!M&&F<=R)continue;if(r&&F>=A&&F<=R&&W===32){const q=F-1>=0?g.charCodeAt(F-1):0,H=F+1<u?g.charCodeAt(F+1):0;if(q!==32&&H!==32)continue}if(r&&l&&F===u-1){const q=F-1>=0?g.charCodeAt(F-1):0;if(W===32&&q!==32&&q!==9)continue}if(s&&(!O||O.startOffset>F||O.endOffset<=F))continue;const z=p.visibleRangeForPosition(new L.Position(n,F+1));z&&(o?(x=Math.max(x,z.left),W===9?T+=this._renderArrow(m,C,z.left):T+=`<circle cx="${(z.left+C/2).toFixed(2)}" cy="${(m/2).toFixed(2)}" r="${(C/7).toFixed(2)}" />`):W===9?T+=`<div class="mwh" style="left:${z.left}px;height:${m}px;">${I?"\uFFEB":"\u2192"}</div>`:T+=`<div class="mwh" style="left:${z.left}px;height:${m}px;">${String.fromCharCode(D)}</div>`)}return o?(x=Math.round(x+C),`<svg style="bottom:0;position:absolute;width:${x}px;height:${m}px" viewBox="0 0 ${x} ${m}" xmlns="http://www.w3.org/2000/svg" fill="${i}">`+T+"</svg>"):T}_renderArrow(p,n,s){const t=n/7,i=n,o=p/2,g=s,u={x:0,y:t/2},l={x:100/125*i,y:u.y},a={x:l.x-.2*l.x,y:l.y+.2*l.x},r={x:a.x+.1*l.x,y:a.y+.1*l.x},d={x:r.x+.35*l.x,y:r.y-.35*l.x},m={x:d.x,y:-d.y},h={x:r.x,y:-r.y},v={x:a.x,y:-a.y},C={x:l.x,y:-l.y},w={x:u.x,y:-u.y};return`<path d="M ${[u,l,a,r,d,m,h,v,C,w].map(I=>`${(g+I.x).toFixed(2)} ${(o+I.y).toFixed(2)}`).join(" L ")}" />`}render(p,n){if(!this._renderResult)return"";const s=n-p;return s<0||s>=this._renderResult.length?"":this._renderResult[s]}}e.WhitespaceOverlay=f;class _{constructor(p){const n=p.options,s=n.get(50),t=n.get(38);t==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):t==="svg"?(this.renderWhitespace=n.get(100),this.renderWithSVG=!0):(this.renderWhitespace=n.get(100),this.renderWithSVG=!1),this.spaceWidth=s.spaceWidth,this.middotWidth=s.middotWidth,this.wsmiddotWidth=s.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=s.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(67),this.stopRenderingLineAfter=n.get(118)}equals(p){return this.renderWhitespace===p.renderWhitespace&&this.renderWithSVG===p.renderWithSVG&&this.spaceWidth===p.spaceWidth&&this.middotWidth===p.middotWidth&&this.wsmiddotWidth===p.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===p.canUseHalfwidthRightwardsArrow&&this.lineHeight===p.lineHeight&&this.stopRenderingLineAfter===p.stopRenderingLineAfter}}}),define(oe[773],re([1,0,5,39,295,8,409,760,769,166,717,609,57,322,610,611,767,612,764,253,768,411,761,613,346,614,746,615,770,625,616,617,765,771,618,772,9,4,23,40,173,621,626,7,25]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R,N,O,x,F,W,z,q,H,K,U,Y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.View=void 0;let Q=class extends q.ViewEventHandler{constructor(te,se,ue,ge,pe,ce,ie){super(),this._instantiationService=ie,this._shouldRecomputeGlyphMarginLanes=!1,this._selections=[new W.Selection(1,1,1,1)],this._renderAnimationFrame=null,this._overflowWidgetsDomNode=ce??null;const ne=new p.ViewController(se,ge,pe,te);this._context=new K.ViewContext(se,ue,ge),this._context.addEventHandler(this),this._viewParts=[],this._textAreaHandler=this._instantiationService.createInstance(_.TextAreaHandler,this._context,ne,this._createTextAreaHandlerHelper()),this._viewParts.push(this._textAreaHandler),this._linesContent=(0,k.createFastDomNode)(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=(0,k.createFastDomNode)(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=(0,k.createFastDomNode)(document.createElement("div")),s.PartFingerprints.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new l.EditorScrollbar(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new m.ViewLines(this._context,this._linesContent),this._viewZones=new N.ViewZones(this._context),this._viewParts.push(this._viewZones);const J=new D.DecorationsOverviewRuler(this._context);this._viewParts.push(J);const B=new M.ScrollDecorationViewPart(this._context);this._viewParts.push(B);const j=new n.ContentViewOverlays(this._context);this._viewParts.push(j),j.addDynamicOverlay(new g.CurrentLineHighlightOverlay(this._context)),j.addDynamicOverlay(new A.SelectionsOverlay(this._context)),j.addDynamicOverlay(new r.IndentGuidesOverlay(this._context)),j.addDynamicOverlay(new u.DecorationsOverlay(this._context)),j.addDynamicOverlay(new O.WhitespaceOverlay(this._context));const V=new n.MarginViewOverlays(this._context);this._viewParts.push(V),V.addDynamicOverlay(new g.CurrentLineMarginHighlightOverlay(this._context)),V.addDynamicOverlay(new C.MarginViewLineDecorationsOverlay(this._context)),V.addDynamicOverlay(new h.LinesDecorationsOverlay(this._context)),V.addDynamicOverlay(new d.LineNumbersOverlay(this._context)),this._glyphMarginWidgets=new a.GlyphMarginWidgets(this._context),this._viewParts.push(this._glyphMarginWidgets);const $=new v.Margin(this._context);$.getDomNode().appendChild(this._viewZones.marginDomNode),$.getDomNode().appendChild(V.getDomNode()),$.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push($),this._contentWidgets=new o.ViewContentWidgets(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new R.ViewCursors(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new S.ViewOverlayWidgets(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);const Z=new T.Rulers(this._context);this._viewParts.push(Z);const ee=new i.BlockDecorations(this._context);this._viewParts.push(ee);const le=new w.Minimap(this._context);if(this._viewParts.push(le),J){const de=this._scrollbar.getOverviewRulerLayoutInfo();de.parent.insertBefore(J.getDomNode(),de.insertBefore)}this._linesContent.appendChild(j.getDomNode()),this._linesContent.appendChild(Z.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild($.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(B.getDomNode()),this._overflowGuardContainer.appendChild(this._textAreaHandler.textArea),this._overflowGuardContainer.appendChild(this._textAreaHandler.textAreaCover),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(le.getDomNode()),this._overflowGuardContainer.appendChild(ee.domNode),this.domNode.appendChild(this._overflowGuardContainer),ce?(ce.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),ce.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new f.PointerHandler(this._context,ne,this._createPointerHandlerHelper()))}_computeGlyphMarginLanes(){const te=this._context.viewModel.model,se=this._context.viewModel.glyphLanes;let ue=[],ge=0;ue=ue.concat(te.getAllMarginDecorations().map(pe=>{const ce=pe.options.glyphMargin?.position??z.GlyphMarginLane.Center;return ge=Math.max(ge,pe.range.endLineNumber),{range:pe.range,lane:ce,persist:pe.options.glyphMargin?.persistLane}})),ue=ue.concat(this._glyphMarginWidgets.getWidgets().map(pe=>{const ce=te.validateRange(pe.preference.range);return ge=Math.max(ge,ce.endLineNumber),{range:ce,lane:pe.preference.lane}})),ue.sort((pe,ce)=>F.Range.compareRangesUsingStarts(pe.range,ce.range)),se.reset(ge);for(const pe of ue)se.push(pe.lane,pe.range,pe.persist);return se}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,overflowWidgetsDomNode:this._overflowWidgetsDomNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:te=>{this._textAreaHandler.textArea.domNode.dispatchEvent(te)},getLastRenderData:()=>{const te=this._viewCursors.getLastRenderData()||[],se=this._textAreaHandler.getLastRenderData();return new y.PointerHandlerLastRenderData(te,se)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:te=>this._viewZones.shouldSuppressMouseDownOnViewZone(te),shouldSuppressMouseDownOnWidget:te=>this._contentWidgets.shouldSuppressMouseDownOnWidget(te),getPositionFromDOMInfo:(te,se)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(te,se)),visibleRangeForPosition:(te,se)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new x.Position(te,se))),getLineWidth:te=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(te))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:te=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(te))}}_applyLayout(){const se=this._context.configuration.options.get(146);this.domNode.setWidth(se.width),this.domNode.setHeight(se.height),this._overflowGuardContainer.setWidth(se.width),this._overflowGuardContainer.setHeight(se.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){const te=this._textAreaHandler.isFocused()?" focused":"";return this._context.configuration.options.get(143)+" "+(0,Y.getThemeTypeSelector)(this._context.theme.type)+te}handleEvents(te){super.handleEvents(te),this._scheduleRender()}onConfigurationChanged(te){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(te){return this._selections=te.selections,!1}onDecorationsChanged(te){return te.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(te){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(te){return this._context.theme.update(te.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(const te of this._viewParts)te.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new L.BugIndicatingError;if(this._renderAnimationFrame===null){const te=this._createCoordinatedRendering();this._renderAnimationFrame=G.INSTANCE.scheduleCoordinatedRendering({window:c.getWindow(this.domNode.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new L.BugIndicatingError;try{return te.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new L.BugIndicatingError;return te.renderText()},prepareRender:(se,ue)=>{if(this._store.isDisposed)throw new L.BugIndicatingError;return te.prepareRender(se,ue)},render:(se,ue)=>{if(this._store.isDisposed)throw new L.BugIndicatingError;return te.render(se,ue)}})}}_flushAccumulatedAndRenderNow(){const te=this._createCoordinatedRendering();X(()=>te.prepareRenderText());const se=X(()=>te.renderText());if(se){const[ue,ge]=se;X(()=>te.prepareRender(ue,ge)),X(()=>te.render(ue,ge))}}_getViewPartsToRender(){const te=[];let se=0;for(const ue of this._viewParts)ue.shouldRender()&&(te[se++]=ue);return te}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;const te=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(te.requiredLanes)}E.inputLatency.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let te=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&te.length===0)return null;const se=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(se.startLineNumber,se.endLineNumber,se.centeredLineNumber);const ue=new H.ViewportData(this._selections,se,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(ue),this._viewLines.shouldRender()&&(this._viewLines.renderText(ue),this._viewLines.onDidRender(),te=this._getViewPartsToRender()),[te,new b.RenderingContext(this._context.viewLayout,ue,this._viewLines)]},prepareRender:(te,se)=>{for(const ue of te)ue.prepareRender(se)},render:(te,se)=>{for(const ue of te)ue.render(se),ue.onDidRender()}}}delegateVerticalScrollbarPointerDown(te){this._scrollbar.delegateVerticalScrollbarPointerDown(te)}delegateScrollFromMouseWheelEvent(te){this._scrollbar.delegateScrollFromMouseWheelEvent(te)}restoreState(te){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:te.scrollTop,scrollLeft:te.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(te,se){const ue=this._context.viewModel.model.validatePosition({lineNumber:te,column:se}),ge=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(ue);this._flushAccumulatedAndRenderNow();const pe=this._viewLines.visibleRangeForPosition(new x.Position(ge.lineNumber,ge.column));return pe?pe.left:-1}getTargetAtClientPoint(te,se){const ue=this._pointerHandler.getTargetAtClientPoint(te,se);return ue?t.ViewUserInputEvents.convertViewToModelMouseTarget(ue,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(te){return new I.OverviewRuler(this._context,te)}change(te){this._viewZones.changeViewZones(te),this._scheduleRender()}render(te,se){if(se){this._viewLines.forceShouldRender();for(const ue of this._viewParts)ue.forceShouldRender()}te?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(te){this._textAreaHandler.writeScreenReaderContent(te)}focus(){this._textAreaHandler.focusTextArea()}isFocused(){return this._textAreaHandler.isFocused()}setAriaOptions(te){this._textAreaHandler.setAriaOptions(te)}addContentWidget(te){this._contentWidgets.addWidget(te.widget),this.layoutContentWidget(te),this._scheduleRender()}layoutContentWidget(te){this._contentWidgets.setWidgetPosition(te.widget,te.position?.position??null,te.position?.secondaryPosition??null,te.position?.preference??null,te.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(te){this._contentWidgets.removeWidget(te.widget),this._scheduleRender()}addOverlayWidget(te){this._overlayWidgets.addWidget(te.widget),this.layoutOverlayWidget(te),this._scheduleRender()}layoutOverlayWidget(te){this._overlayWidgets.setWidgetPosition(te.widget,te.position)&&this._scheduleRender()}removeOverlayWidget(te){this._overlayWidgets.removeWidget(te.widget),this._scheduleRender()}addGlyphMarginWidget(te){this._glyphMarginWidgets.addWidget(te.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(te){const se=te.position;this._glyphMarginWidgets.setWidgetPosition(te.widget,se)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(te){this._glyphMarginWidgets.removeWidget(te.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};e.View=Q,e.View=Q=De([he(6,U.IInstantiationService)],Q);function X(P){try{return P()}catch(te){return(0,L.onUnexpectedError)(te),null}}class G{static{this.INSTANCE=new G}constructor(){this._coordinatedRenderings=[],this._animationFrameRunners=new Map}scheduleCoordinatedRendering(te){return this._coordinatedRenderings.push(te),this._scheduleRender(te.window),{dispose:()=>{const se=this._coordinatedRenderings.indexOf(te);if(se!==-1&&(this._coordinatedRenderings.splice(se,1),this._coordinatedRenderings.length===0)){for(const[ue,ge]of this._animationFrameRunners)ge.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(te){if(!this._animationFrameRunners.has(te)){const se=()=>{this._animationFrameRunners.delete(te),this._onRenderScheduled()};this._animationFrameRunners.set(te,c.runAtThisOrScheduleAtNextAnimationFrame(te,se,100))}}_onRenderScheduled(){const te=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(const ue of te)X(()=>ue.prepareRenderText());const se=[];for(let ue=0,ge=te.length;ue<ge;ue++){const pe=te[ue];se[ue]=X(()=>pe.renderText())}for(let ue=0,ge=te.length;ue<ge;ue++){const pe=te[ue],ce=se[ue];if(!ce)continue;const[ie,ne]=ce;X(()=>pe.prepareRender(ie,ne))}for(let ue=0,ge=te.length;ue<ge;ue++){const pe=te[ue],ce=se[ue];if(!ce)continue;const[ie,ne]=ce;X(()=>pe.render(ie,ne))}}}}),define(oe[774],re([1,0,6,2,4,80,25]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorizedBracketPairsDecorationProvider=void 0;class f extends k.Disposable{constructor(p){super(),this.textModel=p,this.colorProvider=new _,this.onDidChangeEmitter=new c.Emitter,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=p.getOptions().bracketPairColorizationOptions,this._register(p.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(p){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(p,n,s,t){return t?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(p,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(p,n){return p===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new E.Range(1,1,this.textModel.getLineCount(),1),p,n):[]}}e.ColorizedBracketPairsDecorationProvider=f;class _{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(p,n){return p.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(n?p.nestingLevelOfEqualBracketType:p.nestingLevel)}getInlineClassNameOfLevel(p){return`bracket-highlighting-${p%30}`}}(0,y.registerThemingParticipant)((b,p)=>{const n=[L.editorBracketHighlightingForeground1,L.editorBracketHighlightingForeground2,L.editorBracketHighlightingForeground3,L.editorBracketHighlightingForeground4,L.editorBracketHighlightingForeground5,L.editorBracketHighlightingForeground6],s=new _;p.addRule(`.monaco-editor .${s.unexpectedClosingBracketClassName} { color: ${b.getColor(L.editorBracketHighlightingUnexpectedBracketForeground)}; }`);const t=n.map(i=>b.getColor(i)).filter(i=>!!i).filter(i=>!i.isTransparent());for(let i=0;i<30;i++){const o=t[i%t.length];p.addRule(`.monaco-editor .${s.getInlineClassNameOfLevel(i)} { color: ${o}; }`)}})}),define(oe[775],re([1,0,107,2,40,25,80,44,4,47,6,32,45,297]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerDecorationsService=void 0;let i=class extends k.Disposable{constructor(u,l){super(),this._markerService=l,this._onDidChangeMarker=this._register(new p.Emitter),this._markerDecorations=new s.ResourceMap,u.getModels().forEach(a=>this._onModelAdded(a)),this._register(u.onModelAdded(this._onModelAdded,this)),this._register(u.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(u=>u.dispose()),this._markerDecorations.clear()}getMarker(u,l){const a=this._markerDecorations.get(u);return a&&a.getMarker(l)||null}_handleMarkerChange(u){u.forEach(l=>{const a=this._markerDecorations.get(l);a&&this._updateDecorations(a)})}_onModelAdded(u){const l=new o(u);this._markerDecorations.set(u.uri,l),this._updateDecorations(l)}_onModelRemoved(u){const l=this._markerDecorations.get(u.uri);l&&(l.dispose(),this._markerDecorations.delete(u.uri)),(u.uri.scheme===b.Schemas.inMemory||u.uri.scheme===b.Schemas.internal||u.uri.scheme===b.Schemas.vscode)&&this._markerService?.read({resource:u.uri}).map(a=>a.owner).forEach(a=>this._markerService.remove(a,[u.uri]))}_updateDecorations(u){const l=this._markerService.read({resource:u.model.uri,take:500});u.update(l)&&this._onDidChangeMarker.fire(u.model)}};e.MarkerDecorationsService=i,e.MarkerDecorationsService=i=De([he(0,f.IModelService),he(1,c.IMarkerService)],i);class o extends k.Disposable{constructor(u){super(),this.model=u,this._map=new s.BidirectionalMap,this._register((0,k.toDisposable)(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(u){const{added:l,removed:a}=(0,t.diffSets)(new Set(this._map.keys()),new Set(u));if(l.length===0&&a.length===0)return!1;const r=a.map(h=>this._map.get(h)),d=l.map(h=>({range:this._createDecorationRange(this.model,h),options:this._createDecorationOption(h)})),m=this.model.deltaDecorations(r,d);for(const h of a)this._map.delete(h);for(let h=0;h<m.length;h++)this._map.set(l[h],m[h]);return!0}getMarker(u){return this._map.getKey(u.id)}_createDecorationRange(u,l){let a=_.Range.lift(l);if(l.severity===c.MarkerSeverity.Hint&&!this._hasMarkerTag(l,1)&&!this._hasMarkerTag(l,2)&&(a=a.setEndPosition(a.startLineNumber,a.startColumn+2)),a=u.validateRange(a),a.isEmpty()){const r=u.getLineLastNonWhitespaceColumn(a.startLineNumber)||u.getLineMaxColumn(a.startLineNumber);if(r===1||a.endColumn>=r)return a;const d=u.getWordAtPosition(a.getStartPosition());d&&(a=new _.Range(a.startLineNumber,d.startColumn,a.endLineNumber,d.endColumn))}else if(l.endColumn===Number.MAX_VALUE&&l.startColumn===1&&a.startLineNumber===a.endLineNumber){const r=u.getLineFirstNonWhitespaceColumn(l.startLineNumber);r<a.endColumn&&(a=new _.Range(a.startLineNumber,r,a.endLineNumber,a.endColumn),l.startColumn=r)}return a}_createDecorationOption(u){let l,a,r,d,m;switch(u.severity){case c.MarkerSeverity.Hint:this._hasMarkerTag(u,2)?l=void 0:this._hasMarkerTag(u,1)?l="squiggly-unnecessary":l="squiggly-hint",r=0;break;case c.MarkerSeverity.Info:l="squiggly-info",a=(0,L.themeColorFromId)(y.overviewRulerInfo),r=10,m={color:(0,L.themeColorFromId)(n.minimapInfo),position:1};break;case c.MarkerSeverity.Warning:l="squiggly-warning",a=(0,L.themeColorFromId)(y.overviewRulerWarning),r=20,m={color:(0,L.themeColorFromId)(n.minimapWarning),position:1};break;case c.MarkerSeverity.Error:default:l="squiggly-error",a=(0,L.themeColorFromId)(y.overviewRulerError),r=30,m={color:(0,L.themeColorFromId)(n.minimapError),position:1};break}return u.tags&&(u.tags.indexOf(1)!==-1&&(d="squiggly-inline-unnecessary"),u.tags.indexOf(2)!==-1&&(d="squiggly-inline-deprecated")),{description:"marker-decoration",stickiness:1,className:l,showIfCollapsed:!0,overviewRuler:{color:a,position:E.OverviewRulerLane.Right},minimap:m,zIndex:r,inlineClassName:d}}_hasMarkerTag(u,l){return u.tags?u.tags.indexOf(l)>=0:!1}}}),define(oe[281],re([1,0,147,25,61,607,42]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensProviderStyling=void 0,e.toMultilineTokens2=b;const f=!1;let _=class{constructor(t,i,o,g){this._legend=t,this._themeService=i,this._languageService=o,this._logService=g,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new n}getMetadata(t,i,o){const g=this._languageService.languageIdCodec.encodeLanguageId(o),u=this._hashTable.get(t,i,g);let l;if(u)l=u.metadata,f&&this._logService.getLevel()===E.LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling [CACHED] ${t} / ${i}: foreground ${c.TokenMetadata.getForeground(l)}, fontStyle ${c.TokenMetadata.getFontStyle(l).toString(2)}`);else{let a=this._legend.tokenTypes[t];const r=[];if(a){let d=i;for(let h=0;d>0&&h<this._legend.tokenModifiers.length;h++)d&1&&r.push(this._legend.tokenModifiers[h]),d=d>>1;f&&d>0&&this._logService.getLevel()===E.LogLevel.Trace&&(this._logService.trace(`SemanticTokensProviderStyling: unknown token modifier index: ${i.toString(2)} for legend: ${JSON.stringify(this._legend.tokenModifiers)}`),r.push("not-in-legend"));const m=this._themeService.getColorTheme().getTokenStyleMetadata(a,r,o);if(typeof m>"u")l=2147483647;else{if(l=0,typeof m.italic<"u"){const h=(m.italic?1:0)<<11;l|=h|1}if(typeof m.bold<"u"){const h=(m.bold?2:0)<<11;l|=h|2}if(typeof m.underline<"u"){const h=(m.underline?4:0)<<11;l|=h|4}if(typeof m.strikethrough<"u"){const h=(m.strikethrough?8:0)<<11;l|=h|8}if(m.foreground){const h=m.foreground<<15;l|=h|16}l===0&&(l=2147483647)}}else f&&this._logService.getLevel()===E.LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling: unknown token type index: ${t} for legend: ${JSON.stringify(this._legend.tokenTypes)}`),l=2147483647,a="not-in-legend";this._hashTable.add(t,i,g,l),f&&this._logService.getLevel()===E.LogLevel.Trace&&this._logService.trace(`SemanticTokensProviderStyling ${t} (${a}) / ${i} (${r.join(" ")}): foreground ${c.TokenMetadata.getForeground(l)}, fontStyle ${c.TokenMetadata.getFontStyle(l).toString(2)}`)}return l}warnOverlappingSemanticTokens(t,i){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${t}, column ${i}`))}warnInvalidLengthSemanticTokens(t,i){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${t}, column ${i}`))}warnInvalidEditStart(t,i,o,g,u){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${t}, resultId: ${i}) at edit #${o}: The provided start offset ${g} is outside the previous data (length ${u}).`))}};e.SemanticTokensProviderStyling=_,e.SemanticTokensProviderStyling=_=De([he(1,k.IThemeService),he(2,y.ILanguageService),he(3,E.ILogService)],_);function b(s,t,i){const o=s.data,g=s.data.length/5|0,u=Math.max(Math.ceil(g/1024),400),l=[];let a=0,r=1,d=0;for(;a<g;){const m=a;let h=Math.min(m+u,g);if(h<g){let T=h;for(;T-1>m&&o[5*T]===0;)T--;if(T-1===m){let M=h;for(;M+1<g&&o[5*M]===0;)M++;h=M}else h=T}let v=new Uint32Array((h-m)*4),C=0,w=0,S=0,D=0;for(;a<h;){const T=5*a,M=o[T],A=o[T+1],R=r+M|0,N=M===0?d+A|0:A,O=o[T+2],x=N+O|0,F=o[T+3],W=o[T+4];if(x<=N)t.warnInvalidLengthSemanticTokens(R,N+1);else if(S===R&&D>N)t.warnOverlappingSemanticTokens(R,N+1);else{const z=t.getMetadata(F,W,i);z!==2147483647&&(w===0&&(w=R),v[C]=R-w,v[C+1]=N,v[C+2]=x,v[C+3]=z,C+=4,S=R,D=x)}r=R,d=N,a++}C!==v.length&&(v=v.subarray(0,C));const I=L.SparseMultilineTokens.create(w,v);l.push(I)}return l}class p{constructor(t,i,o,g){this.tokenTypeIndex=t,this.tokenModifierSet=i,this.languageId=o,this.metadata=g,this.next=null}}class n{static{this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]}constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=n._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<n._SIZES.length?2/3*this._currentLength:0),this._elements=[],n._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(t,i){for(let o=0;o<i;o++)t[o]=null}_hash2(t,i){return(t<<5)-t+i|0}_hashFunc(t,i,o){return this._hash2(this._hash2(t,i),o)%this._currentLength}get(t,i,o){const g=this._hashFunc(t,i,o);let u=this._elements[g];for(;u;){if(u.tokenTypeIndex===t&&u.tokenModifierSet===i&&u.languageId===o)return u;u=u.next}return null}add(t,i,o,g){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const u=this._elements;this._currentLengthIndex++,this._currentLength=n._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<n._SIZES.length?2/3*this._currentLength:0),this._elements=[],n._nullOutEntries(this._elements,this._currentLength);for(const l of u){let a=l;for(;a;){const r=a.next;a.next=null,this._add(a),a=r}}}this._add(new p(t,i,o,g))}_add(t){const i=this._hashFunc(t.tokenTypeIndex,t.tokenModifierSet,t.languageId);t.next=this._elements[i],this._elements[i]=t}}}),define(oe[776],re([1,0,2,42,25,61,281,265,49]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensStylingService=void 0;let b=class extends c.Disposable{constructor(n,s,t){super(),this._themeService=n,this._logService=s,this._languageService=t,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(n){return this._caches.has(n)||this._caches.set(n,new y.SemanticTokensProviderStyling(n.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(n)}};e.SemanticTokensStylingService=b,e.SemanticTokensStylingService=b=De([he(0,E.IThemeService),he(1,L.ILogService),he(2,k.ILanguageService)],b),(0,_.registerSingleton)(f.ISemanticTokensStylingService,b,1)}),define(oe[777],re([1,0,15,80,3,88,356,692,537]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(y.PlaceholderTextContribution.ID,(0,f.wrapInReloadableClass1)(()=>y.PlaceholderTextContribution),0),(0,L.registerColor)("editor.placeholder.foreground",k.ghostTextForeground,(0,E.localize)(511,"Foreground color of the placeholder text in the editor."))}),define(oe[412],re([1,0,127,2,171,40,80,25,48]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractEditorNavigationQuickAccessProvider=void 0;class b{constructor(n){this.options=n,this.rangeHighlightDecorationId=void 0}provide(n,s,t){const i=new k.DisposableStore;n.canAcceptInBackground=!!this.options?.canAcceptInBackground,n.matchOnLabel=n.matchOnDescription=n.matchOnDetail=n.sortByLabel=!1;const o=i.add(new k.MutableDisposable);return o.value=this.doProvide(n,s,t),i.add(this.onDidActiveTextEditorControlChange(()=>{o.value=void 0,o.value=this.doProvide(n,s)})),i}doProvide(n,s,t){const i=new k.DisposableStore,o=this.activeTextEditorControl;if(o&&this.canProvideWithTextEditor(o)){const g={editor:o},u=(0,E.getCodeEditor)(o);if(u){let l=o.saveViewState()??void 0;i.add(u.onDidChangeCursorPosition(()=>{l=o.saveViewState()??void 0})),g.restoreViewState=()=>{l&&o===this.activeTextEditorControl&&o.restoreViewState(l)},i.add((0,c.createSingleCallFunction)(s.onCancellationRequested)(()=>g.restoreViewState?.()))}i.add((0,k.toDisposable)(()=>this.clearDecorations(o))),i.add(this.provideWithTextEditor(g,n,s,t))}else i.add(this.provideWithoutTextEditor(n,s));return i}canProvideWithTextEditor(n){return!0}gotoLocation({editor:n},s){n.setSelection(s.range,"code.jump"),n.revealRangeInCenter(s.range,0),s.preserveFocus||n.focus();const t=n.getModel();t&&"getLineContent"in t&&(0,_.status)(`${t.getLineContent(s.range.startLineNumber)}`)}getModel(n){return(0,E.isDiffEditor)(n)?n.getModel()?.modified:n.getModel()}addDecorations(n,s){n.changeDecorations(t=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const o=[{range:s,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:s,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,f.themeColorFromId)(y.overviewRulerRangeHighlight),position:L.OverviewRulerLane.Full}}}],[g,u]=t.deltaDecorations(i,o);this.rangeHighlightDecorationId={rangeHighlightId:g,overviewRulerDecorationId:u}})}clearDecorations(n){const s=this.rangeHighlightDecorationId;s&&(n.changeDecorations(t=>{t.deltaDecorations([s.overviewRulerDecorationId,s.rangeHighlightId],[])}),this.rangeHighlightDecorationId=void 0)}}e.AbstractEditorNavigationQuickAccessProvider=b}),define(oe[778],re([1,0,2,171,412,3]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractGotoLineQuickAccessProvider=void 0;class y extends E.AbstractEditorNavigationQuickAccessProvider{static{this.PREFIX=":"}constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(_){const b=(0,L.localize)(506,"Open a text editor first to go to a line.");return _.items=[{label:b}],_.ariaLabel=b,c.Disposable.None}provideWithTextEditor(_,b,p){const n=_.editor,s=new c.DisposableStore;s.add(b.onDidAccept(o=>{const[g]=b.selectedItems;if(g){if(!this.isValidLineNumber(n,g.lineNumber))return;this.gotoLocation(_,{range:this.toRange(g.lineNumber,g.column),keyMods:b.keyMods,preserveFocus:o.inBackground}),o.inBackground||b.hide()}}));const t=()=>{const o=this.parsePosition(n,b.value.trim().substr(y.PREFIX.length)),g=this.getPickLabel(n,o.lineNumber,o.column);if(b.items=[{lineNumber:o.lineNumber,column:o.column,label:g}],b.ariaLabel=g,!this.isValidLineNumber(n,o.lineNumber)){this.clearDecorations(n);return}const u=this.toRange(o.lineNumber,o.column);n.revealRangeInCenter(u,0),this.addDecorations(n,u)};t(),s.add(b.onDidChangeValue(()=>t()));const i=(0,k.getCodeEditor)(n);return i&&i.getOptions().get(68).renderType===2&&(i.updateOptions({lineNumbers:"on"}),s.add((0,c.toDisposable)(()=>i.updateOptions({lineNumbers:"relative"})))),s}toRange(_=1,b=1){return{startLineNumber:_,startColumn:b,endLineNumber:_,endColumn:b}}parsePosition(_,b){const p=b.split(/,|:|#/).map(s=>parseInt(s,10)).filter(s=>!isNaN(s)),n=this.lineCount(_)+1;return{lineNumber:p[0]>0?p[0]:n+p[0],column:p[1]}}getPickLabel(_,b,p){if(this.isValidLineNumber(_,b))return this.isValidColumn(_,b,p)?(0,L.localize)(507,"Go to line {0} and character {1}.",b,p):(0,L.localize)(508,"Go to line {0}.",b);const n=_.getPosition()||{lineNumber:1,column:1},s=this.lineCount(_);return s>1?(0,L.localize)(509,"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",n.lineNumber,n.column,s):(0,L.localize)(510,"Current Line: {0}, Character: {1}. Type a line number to navigate to.",n.lineNumber,n.column)}isValidLineNumber(_,b){return!b||typeof b!="number"?!1:b>0&&b<=this.lineCount(_)}isValidColumn(_,b,p){if(!p||typeof p!="number")return!1;const n=this.getModel(_);if(!n)return!1;const s={lineNumber:b,column:p};return n.validatePosition(s).equals(s)}lineCount(_){return this.getModel(_)?.getLineCount()??0}}e.AbstractGotoLineQuickAccessProvider=y}),define(oe[779],re([1,0,14,18,26,30,450,2,11,4,28,182,412,3,17,67]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractGotoSymbolQuickAccessProvider=void 0;let u=class extends s.AbstractEditorNavigationQuickAccessProvider{static{g=this}static{this.PREFIX="@"}static{this.SCOPE_PREFIX=":"}static{this.PREFIX_BY_CATEGORY=`${this.PREFIX}${this.SCOPE_PREFIX}`}constructor(d,m,h=Object.create(null)){super(h),this._languageFeaturesService=d,this._outlineModelService=m,this.options=h,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(d){return this.provideLabelPick(d,(0,t.localize)(473,"To go to a symbol, first open a text editor with symbol information.")),f.Disposable.None}provideWithTextEditor(d,m,h,v){const C=d.editor,w=this.getModel(C);return w?this._languageFeaturesService.documentSymbolProvider.has(w)?this.doProvideWithEditorSymbols(d,w,m,h,v):this.doProvideWithoutEditorSymbols(d,w,m,h):f.Disposable.None}doProvideWithoutEditorSymbols(d,m,h,v){const C=new f.DisposableStore;return this.provideLabelPick(h,(0,t.localize)(474,"The active text editor does not provide symbol information.")),(async()=>!await this.waitForLanguageSymbolRegistry(m,C)||v.isCancellationRequested||C.add(this.doProvideWithEditorSymbols(d,m,h,v)))(),C}provideLabelPick(d,m){d.items=[{label:m,index:0,kind:14}],d.ariaLabel=m}async waitForLanguageSymbolRegistry(d,m){if(this._languageFeaturesService.documentSymbolProvider.has(d))return!0;const h=new c.DeferredPromise,v=m.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>{this._languageFeaturesService.documentSymbolProvider.has(d)&&(v.dispose(),h.complete(!0))}));return m.add((0,f.toDisposable)(()=>h.complete(!1))),h.p}doProvideWithEditorSymbols(d,m,h,v,C){const w=d.editor,S=new f.DisposableStore;S.add(h.onDidAccept(M=>{const[A]=h.selectedItems;A&&A.range&&(this.gotoLocation(d,{range:A.range.selection,keyMods:h.keyMods,preserveFocus:M.inBackground}),C?.handleAccept?.(A),M.inBackground||h.hide())})),S.add(h.onDidTriggerItemButton(({item:M})=>{M&&M.range&&(this.gotoLocation(d,{range:M.range.selection,keyMods:h.keyMods,forceSideBySide:!0}),h.hide())}));const D=this.getDocumentSymbols(m,v);let I;const T=async M=>{I?.dispose(!0),h.busy=!1,I=new k.CancellationTokenSource(v),h.busy=!0;try{const A=(0,y.prepareQuery)(h.value.substr(g.PREFIX.length).trim()),R=await this.doGetSymbolPicks(D,A,void 0,I.token,m);if(v.isCancellationRequested)return;if(R.length>0){if(h.items=R,M&&A.original.length===0){const N=(0,o.findLast)(R,O=>!!(O.type!=="separator"&&O.range&&b.Range.containsPosition(O.range.decoration,M)));N&&(h.activeItems=[N])}}else A.original.length>0?this.provideLabelPick(h,(0,t.localize)(475,"No matching editor symbols")):this.provideLabelPick(h,(0,t.localize)(476,"No editor symbols"))}finally{v.isCancellationRequested||(h.busy=!1)}};return S.add(h.onDidChangeValue(()=>T(void 0))),T(w.getSelection()?.getPosition()),S.add(h.onDidChangeActive(()=>{const[M]=h.activeItems;M&&M.range&&(w.revealRangeInCenter(M.range.selection,0),this.addDecorations(w,M.range.decoration))})),S}async doGetSymbolPicks(d,m,h,v,C){const w=await d;if(v.isCancellationRequested)return[];const S=m.original.indexOf(g.SCOPE_PREFIX)===0,D=S?1:0;let I,T;m.values&&m.values.length>1?(I=(0,y.pieceToQuery)(m.values[0]),T=(0,y.pieceToQuery)(m.values.slice(1))):I=m;let M;const A=this.options?.openSideBySideDirection?.();A&&(M=[{iconClass:A==="right"?L.ThemeIcon.asClassName(E.Codicon.splitHorizontal):L.ThemeIcon.asClassName(E.Codicon.splitVertical),tooltip:A==="right"?(0,t.localize)(477,"Open to the Side"):(0,t.localize)(478,"Open to the Bottom")}]);const R=[];for(let x=0;x<w.length;x++){const F=w[x],W=(0,_.trim)(F.name),z=`$(${p.SymbolKinds.toIcon(F.kind).id}) ${W}`,q=z.length-W.length;let H=F.containerName;h?.extraContainerLabel&&(H?H=`${h.extraContainerLabel} \u2022 ${H}`:H=h.extraContainerLabel);let K,U,Y,Q;if(m.original.length>D){let G=!1;if(I!==m&&([K,U]=(0,y.scoreFuzzy2)(z,{...m,values:void 0},D,q),typeof K=="number"&&(G=!0)),typeof K!="number"&&([K,U]=(0,y.scoreFuzzy2)(z,I,D,q),typeof K!="number"))continue;if(!G&&T){if(H&&T.original.length>0&&([Y,Q]=(0,y.scoreFuzzy2)(H,T)),typeof Y!="number")continue;typeof K=="number"&&(K+=Y)}}const X=F.tags&&F.tags.indexOf(1)>=0;R.push({index:x,kind:F.kind,score:K,label:z,ariaLabel:(0,p.getAriaLabelForSymbol)(F.name,F.kind),description:H,highlights:X?void 0:{label:U,description:Q},range:{selection:b.Range.collapseToStart(F.selectionRange),decoration:F.range},uri:C.uri,symbolName:W,strikethrough:X,buttons:M})}const N=R.sort((x,F)=>S?this.compareByKindAndScore(x,F):this.compareByScore(x,F));let O=[];if(S){let z=function(){F&&typeof x=="number"&&W>0&&(F.label=(0,_.format)(a[x]||l,W))},x,F,W=0;for(const q of N)x!==q.kind?(z(),x=q.kind,W=1,F={type:"separator"},O.push(F)):W++,O.push(q);z()}else N.length>0&&(O=[{label:(0,t.localize)(479,"symbols ({0})",R.length),type:"separator"},...N]);return O}compareByScore(d,m){if(typeof d.score!="number"&&typeof m.score=="number")return 1;if(typeof d.score=="number"&&typeof m.score!="number")return-1;if(typeof d.score=="number"&&typeof m.score=="number"){if(d.score>m.score)return-1;if(d.score<m.score)return 1}return d.index<m.index?-1:d.index>m.index?1:0}compareByKindAndScore(d,m){const h=a[d.kind]||l,v=a[m.kind]||l,C=h.localeCompare(v);return C===0?this.compareByScore(d,m):C}async getDocumentSymbols(d,m){const h=await this._outlineModelService.getOrCreate(d,m);return m.isCancellationRequested?[]:h.asListOfDocumentSymbols()}};e.AbstractGotoSymbolQuickAccessProvider=u,e.AbstractGotoSymbolQuickAccessProvider=u=g=De([he(0,i.ILanguageFeaturesService),he(1,n.IOutlineModelService)],u);const l=(0,t.localize)(480,"properties ({0})"),a={5:(0,t.localize)(481,"methods ({0})"),11:(0,t.localize)(482,"functions ({0})"),8:(0,t.localize)(483,"constructors ({0})"),12:(0,t.localize)(484,"variables ({0})"),4:(0,t.localize)(485,"classes ({0})"),22:(0,t.localize)(486,"structs ({0})"),23:(0,t.localize)(487,"events ({0})"),24:(0,t.localize)(488,"operators ({0})"),10:(0,t.localize)(489,"interfaces ({0})"),2:(0,t.localize)(490,"namespaces ({0})"),3:(0,t.localize)(491,"packages ({0})"),25:(0,t.localize)(492,"type parameters ({0})"),1:(0,t.localize)(493,"modules ({0})"),6:(0,t.localize)(494,"properties ({0})"),9:(0,t.localize)(495,"enumerations ({0})"),21:(0,t.localize)(496,"enumeration members ({0})"),14:(0,t.localize)(497,"strings ({0})"),0:(0,t.localize)(498,"files ({0})"),17:(0,t.localize)(499,"arrays ({0})"),15:(0,t.localize)(500,"numbers ({0})"),16:(0,t.localize)(501,"booleans ({0})"),18:(0,t.localize)(502,"objects ({0})"),19:(0,t.localize)(503,"keys ({0})"),7:(0,t.localize)(504,"fields ({0})"),13:(0,t.localize)(505,"constants ({0})")}}),define(oe[780],re([1,0,5,46,48,81,43,111,112,13,14,18,26,6,2,59,19,75,9,4,28,3,12,31,61,109,32,25,538]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenameWidget=e.CONTEXT_RENAME_INPUT_FOCUSED=e.CONTEXT_RENAME_INPUT_VISIBLE=void 0;const D=!1;e.CONTEXT_RENAME_INPUT_VISIBLE=new m.RawContextKey("renameInputVisible",!1,d.localize(453,"Whether the rename input widget is visible")),e.CONTEXT_RENAME_INPUT_FOCUSED=new m.RawContextKey("renameInputFocused",!1,d.localize(454,"Whether the rename input widget is focused"));let I=class{constructor(N,O,x,F,W,z){this._editor=N,this._acceptKeybindings=O,this._themeService=x,this._keybindingService=F,this._logService=z,this.allowEditorOverflow=!0,this._disposables=new i.DisposableStore,this._visibleContextKey=e.CONTEXT_RENAME_INPUT_VISIBLE.bindTo(W),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new o.StopWatch,this._inputWithButton=new M,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration(q=>{q.hasChanged(50)&&this._updateFont()})),this._disposables.add(x.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new T(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:N=>{this._inputWithButton.input.value=N,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange(()=>{this._renameCandidateListView?.focusedCandidate!==void 0&&(this._isEditingRenameCandidate=!0),this._timeBeforeFirstInputFieldEdit??=this._beforeFirstInputFieldEditSW.elapsed(),this._renameCandidateProvidersCts?.token.isCancellationRequested===!1&&this._renameCandidateProvidersCts.cancel(),this._renameCandidateListView?.clearFocus()})),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(N){if(!this._domNode)return;const O=N.getColor(w.widgetShadow),x=N.getColor(w.widgetBorder);this._domNode.style.backgroundColor=String(N.getColor(w.editorWidgetBackground)??""),this._domNode.style.boxShadow=O?` 0 0 8px 2px ${O}`:"",this._domNode.style.border=x?`1px solid ${x}`:"",this._domNode.style.color=String(N.getColor(w.inputForeground)??"");const F=N.getColor(w.inputBorder);this._inputWithButton.domNode.style.backgroundColor=String(N.getColor(w.inputBackground)??""),this._inputWithButton.input.style.backgroundColor=String(N.getColor(w.inputBackground)??""),this._inputWithButton.domNode.style.borderWidth=F?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=F?"solid":"none",this._inputWithButton.domNode.style.borderColor=F?.toString()??"none"}_updateFont(){if(this._domNode===void 0)return;(0,g.assertType)(this._label!==void 0,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const N=this._editor.getOption(50);this._label.style.fontSize=`${this._computeLabelFontSize(N.fontSize)}px`}_computeLabelFontSize(N){return N*.8}getPosition(){if(!this._visible||!this._editor.hasModel()||!this._editor.getDomNode())return null;const N=c.getClientArea(this.getDomNode().ownerDocument.body),O=c.getDomNodePagePosition(this._editor.getDomNode()),x=this._getTopForPosition();this._nPxAvailableAbove=x+O.top,this._nPxAvailableBelow=N.height-this._nPxAvailableAbove;const F=this._editor.getOption(67),{totalHeight:W}=A.getLayoutInfo({lineHeight:F}),z=this._nPxAvailableBelow>W*6?[2,1]:[1,2];return{position:this._position,preference:z}}beforeRender(){const[N,O]=this._acceptKeybindings;return this._label.innerText=d.localize(455,"{0} to Rename, {1} to Preview",this._keybindingService.lookupKeybinding(N)?.getLabel(),this._keybindingService.lookupKeybinding(O)?.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(N){if(this._trace("invoking afterRender, position: ",N?"not null":"null"),N===null){this.cancelInput(!0,"afterRender (because position is null)");return}if(!this._editor.hasModel()||!this._editor.getDomNode())return;(0,g.assertType)(this._renameCandidateListView),(0,g.assertType)(this._nPxAvailableAbove!==void 0),(0,g.assertType)(this._nPxAvailableBelow!==void 0);const O=c.getTotalHeight(this._inputWithButton.domNode),x=c.getTotalHeight(this._label);let F;N===2?F=this._nPxAvailableBelow:F=this._nPxAvailableAbove,this._renameCandidateListView.layout({height:F-x-O,width:c.getTotalWidth(this._inputWithButton.domNode)})}acceptInput(N){this._trace("invoking acceptInput"),this._currentAcceptInput?.(N)}cancelInput(N,O){this._trace(`invoking cancelInput, caller: ${O}, _currentCancelInput: ${this._currentAcceptInput?"not undefined":"undefined"}`),this._currentCancelInput?.(N)}focusNextRenameSuggestion(){this._renameCandidateListView?.focusNext()||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){this._renameCandidateListView?.focusPrevious()||(this._inputWithButton.input.value=this._currentName)}getInput(N,O,x,F,W){const{start:z,end:q}=this._getSelection(N,O);this._renameCts=W;const H=new i.DisposableStore;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,F===void 0?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=F,this._requestRenameCandidates(O,!1),H.add(c.addDisposableListener(this._inputWithButton.button,"click",()=>this._requestRenameCandidates(O,!0))),H.add(c.addDisposableListener(this._inputWithButton.button,c.EventType.KEY_DOWN,U=>{const Y=new k.StandardKeyboardEvent(U);(Y.equals(3)||Y.equals(10))&&(Y.stopPropagation(),Y.preventDefault(),this._requestRenameCandidates(O,!0))}))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",x),this._position=new l.Position(N.startLineNumber,N.startColumn),this._currentName=O,this._inputWithButton.input.value=O,this._inputWithButton.input.setAttribute("selectionStart",z.toString()),this._inputWithButton.input.setAttribute("selectionEnd",q.toString()),this._inputWithButton.input.size=Math.max((N.endColumn-N.startColumn)*1.1,20),this._beforeFirstInputFieldEditSW.reset(),H.add((0,i.toDisposable)(()=>{this._renameCts=void 0,W.dispose(!0)})),H.add((0,i.toDisposable)(()=>{this._renameCandidateProvidersCts!==void 0&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)})),H.add((0,i.toDisposable)(()=>this._candidates.clear()));const K=new p.DeferredPromise;return K.p.finally(()=>{H.dispose(),this._hide()}),this._currentCancelInput=U=>(this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView?.clearCandidates(),K.complete(U),!0),this._currentAcceptInput=U=>{this._trace("invoking _currentAcceptInput"),(0,g.assertType)(this._renameCandidateListView!==void 0);const Y=this._renameCandidateListView.nCandidates;let Q,X;const G=this._renameCandidateListView.focusedCandidate;if(G!==void 0?(this._trace("using new name from renameSuggestion"),Q=G,X={k:"renameSuggestion"}):(this._trace("using new name from inputField"),Q=this._inputWithButton.input.value,X=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),Q===O||Q.trim().length===0){this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)");return}this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),K.complete({newName:Q,wantsPreview:x&&U,stats:{source:X,nRenameSuggestions:Y,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})},H.add(W.token.onCancellationRequested(()=>this.cancelInput(!0,"cts.token.onCancellationRequested"))),D||H.add(this._editor.onDidBlurEditorWidget(()=>this.cancelInput(!this._domNode?.ownerDocument.hasFocus(),"editor.onDidBlurEditorWidget"))),this._show(),K.p}_requestRenameCandidates(N,O){if(this._requestRenameCandidatesOnce!==void 0&&(this._renameCandidateProvidersCts!==void 0&&this._renameCandidateProvidersCts.dispose(!0),(0,g.assertType)(this._renameCts),this._inputWithButton.buttonState!=="stop")){this._renameCandidateProvidersCts=new n.CancellationTokenSource;const x=O?r.NewSymbolNameTriggerKind.Invoke:r.NewSymbolNameTriggerKind.Automatic,F=this._requestRenameCandidatesOnce(x,this._renameCandidateProvidersCts.token);if(F.length===0){this._inputWithButton.setSparkleButton();return}O||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(F,N,this._renameCts.token)}}_getSelection(N,O){(0,g.assertType)(this._editor.hasModel());const x=this._editor.getSelection();let F=0,W=O.length;return!a.Range.isEmpty(x)&&!a.Range.spansMultipleLines(x)&&a.Range.containsRange(N,x)&&(F=Math.max(0,x.startColumn-N.startColumn),W=Math.min(N.endColumn,x.endColumn)-N.startColumn),{start:F,end:W}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout(()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))},100)}async _updateRenameCandidates(N,O,x){const F=(...K)=>this._trace("_updateRenameCandidates",...K);F("start");const W=await(0,p.raceCancellation)(Promise.allSettled(N),x);if(this._inputWithButton.setSparkleButton(),W===void 0){F("returning early - received updateRenameCandidates results - undefined");return}const z=W.flatMap(K=>K.status==="fulfilled"&&(0,g.isDefined)(K.value)?K.value:[]);F(`received updateRenameCandidates results - total (unfiltered) ${z.length} candidates.`);const q=b.distinct(z,K=>K.newSymbolName);F(`distinct candidates - ${q.length} candidates.`);const H=q.filter(({newSymbolName:K})=>K.trim().length>0&&K!==this._inputWithButton.input.value&&K!==O&&!this._candidates.has(K));if(F(`valid distinct candidates - ${z.length} candidates.`),H.forEach(K=>this._candidates.add(K.newSymbolName)),H.length<1){F("returning early - no valid distinct candidates");return}F("setting candidates"),this._renameCandidateListView.setCandidates(H),F("asking editor to re-layout"),this._editor.layoutContentWidget(this)}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const N=this._editor.getVisibleRanges();let O;return N.length>0?O=N[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),O=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(O)}_trace(...N){this._logService.trace("RenameWidget",...N)}};e.RenameWidget=I,e.RenameWidget=I=De([he(2,S.IThemeService),he(3,h.IKeybindingService),he(4,m.IContextKeyService),he(5,v.ILogService)],I);class T{constructor(N,O){this._disposables=new i.DisposableStore,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=O.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=O.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",N.appendChild(this._listContainer),this._listWidget=T._createListWidget(this._listContainer,this._candidateViewHeight,O.fontInfo),this._listWidget.onDidChangeFocus(x=>{x.elements.length===1&&O.onFocusChange(x.elements[0].newSymbolName)},this._disposables),this._listWidget.onDidChangeSelection(x=>{x.elements.length===1&&O.onSelectionChange()},this._disposables),this._disposables.add(this._listWidget.onDidBlur(x=>{this._listWidget.setFocus([])})),this._listWidget.style((0,C.getListStyles)({listInactiveFocusForeground:w.quickInputListFocusForeground,listInactiveFocusBackground:w.quickInputListFocusBackground}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout({height:N,width:O}){this._availableHeight=N,this._minimumWidth=O}setCandidates(N){this._listWidget.splice(0,0,N);const O=this._pickListHeight(this._listWidget.length),x=this._pickListWidth(N);this._listWidget.layout(O,x),this._listContainer.style.height=`${O}px`,this._listContainer.style.width=`${x}px`,E.status(d.localize(456,"Received {0} rename suggestions",N.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(this._listWidget.length===0)return;const N=this._listWidget.getSelectedElements()[0];if(N!==void 0)return N.newSymbolName;const O=this._listWidget.getFocusedElements()[0];if(O!==void 0)return O.newSymbolName}focusNext(){if(this._listWidget.length===0)return!1;const N=this._listWidget.getFocus();if(N.length===0)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(N[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const O=this._listWidget.getFocus()[0];return this._listWidget.reveal(O),!0}}focusPrevious(){if(this._listWidget.length===0)return!1;const N=this._listWidget.getFocus();if(N.length===0){this._listWidget.focusLast();const O=this._listWidget.getFocus()[0];return this._listWidget.reveal(O),!0}else{if(N[0]===0)return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const O=this._listWidget.getFocus()[0];return this._listWidget.reveal(O),!0}}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:N}=A.getLayoutInfo({lineHeight:this._lineHeight});return N}_pickListHeight(N){const O=this._candidateViewHeight*N;return Math.min(O,this._availableHeight,this._candidateViewHeight*7)}_pickListWidth(N){const O=Math.ceil(Math.max(...N.map(F=>F.newSymbolName.length))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+O+10)}static _createListWidget(N,O,x){const F=new class{getTemplateId(z){return"candidate"}getHeight(z){return O}},W=new class{constructor(){this.templateId="candidate"}renderTemplate(z){return new A(z,x)}renderElement(z,q,H){H.populate(z)}disposeTemplate(z){z.dispose()}};return new _.List("NewSymbolNameCandidates",N,F,[W],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class M{constructor(){this._onDidInputChange=new t.Emitter,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new i.DisposableStore}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",d.localize(457,"Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=d.localize(458,"Generate new name suggestions"),this._buttonCancelHoverText=d.localize(459,"Cancel"),this._buttonHover=(0,L.getBaseLayerHoverDelegate)().setupManagedHover((0,y.getDefaultHoverDelegate)("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(c.addDisposableListener(this.input,c.EventType.INPUT,()=>this._onDidInputChange.fire())),this._disposables.add(c.addDisposableListener(this.input,c.EventType.KEY_DOWN,N=>{const O=new k.StandardKeyboardEvent(N);(O.keyCode===15||O.keyCode===17)&&this._onDidInputChange.fire()})),this._disposables.add(c.addDisposableListener(this.input,c.EventType.CLICK,()=>this._onDidInputChange.fire())),this._disposables.add(c.addDisposableListener(this.input,c.EventType.FOCUS,()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"})),this._disposables.add(c.addDisposableListener(this.input,c.EventType.BLUR,()=>{this.domNode.style.outline="none"}))),this._domNode}get input(){return(0,g.assertType)(this._inputNode),this._inputNode}get button(){return(0,g.assertType)(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){this._buttonState="sparkle",this._sparkleIcon??=(0,f.renderIcon)(s.Codicon.sparkle),c.clearNode(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),this._buttonHover?.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){this._buttonState="stop",this._stopIcon??=(0,f.renderIcon)(s.Codicon.primitiveSquare),c.clearNode(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),this._buttonHover?.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}class A{static{this._PADDING=2}constructor(N,O){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height=`${O.lineHeight}px`,this._domNode.style.padding=`${A._PADDING}px`;const x=document.createElement("div");x.style.display="flex",x.style.alignItems="center",x.style.width=x.style.height=`${O.lineHeight*.8}px`,this._domNode.appendChild(x),this._icon=(0,f.renderIcon)(s.Codicon.sparkle),this._icon.style.display="none",x.appendChild(this._icon),this._label=document.createElement("div"),u.applyFontInfo(this._label,O),this._domNode.appendChild(this._label),N.appendChild(this._domNode)}populate(N){this._updateIcon(N),this._updateLabel(N)}_updateIcon(N){const O=!!N.tags?.includes(r.NewSymbolNameTag.AIGenerated);this._icon.style.display=O?"inherit":"none"}_updateLabel(N){this._label.innerText=N.newSymbolName}static getLayoutInfo({lineHeight:N}){return{totalHeight:N+A._PADDING*2}}dispose(){}}}),define(oe[781],re([1,0,48,14,18,8,55,2,19,22,15,151,35,9,4,20,28,17,209,122,184,3,29,108,12,7,61,50,96,38,66,780]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M){"use strict";var A;Object.defineProperty(e,"__esModule",{value:!0}),e.RenameAction=void 0,e.rename=N;class R{constructor(z,q,H){this.model=z,this.position=q,this._providerRenameIdx=0,this._providers=H.ordered(z)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(z){const q=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const K=this._providers[this._providerRenameIdx];if(!K.resolveRenameLocation)break;const U=await K.resolveRenameLocation(this.model,this.position,z);if(U){if(U.rejectReason){q.push(U.rejectReason);continue}return U}}this._providerRenameIdx=0;const H=this.model.getWordAtPosition(this.position);return H?{range:new i.Range(this.position.lineNumber,H.startColumn,this.position.lineNumber,H.endColumn),text:H.word,rejectReason:q.length>0?q.join(`
`):void 0}:{range:i.Range.fromPositions(this.position),text:"",rejectReason:q.length>0?q.join(`
`):void 0}}async provideRenameEdits(z,q){return this._provideRenameEdits(z,this._providerRenameIdx,[],q)}async _provideRenameEdits(z,q,H,K){const U=this._providers[q];if(!U)return{edits:[],rejectReason:H.join(`
`)};const Y=await U.provideRenameEdits(this.model,this.position,z,K);if(Y){if(Y.rejectReason)return this._provideRenameEdits(z,q+1,H.concat(Y.rejectReason),K)}else return this._provideRenameEdits(z,q+1,H.concat(d.localize(460,"No result.")),K);return Y}}async function N(W,z,q,H){const K=new R(z,q,W),U=await K.resolveRenameLocation(E.CancellationToken.None);return U?.rejectReason?{edits:[],rejectReason:U.rejectReason}:K.provideRenameEdits(H,E.CancellationToken.None)}let O=class{static{A=this}static{this.ID="editor.contrib.renameController"}static get(z){return z.getContribution(A.ID)}constructor(z,q,H,K,U,Y,Q,X,G){this.editor=z,this._instaService=q,this._notificationService=H,this._bulkEditService=K,this._progressService=U,this._logService=Y,this._configService=Q,this._languageFeaturesService=X,this._telemetryService=G,this._disposableStore=new f.DisposableStore,this._cts=new E.CancellationTokenSource,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(M.RenameWidget,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){const z=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new E.CancellationTokenSource,!this.editor.hasModel()){z("editor has no model");return}const q=this.editor.getPosition(),H=new R(this.editor.getModel(),q,this._languageFeaturesService.renameProvider);if(!H.hasProvider()){z("skeleton has no provider");return}const K=new a.EditorStateCancellationTokenSource(this.editor,5,void 0,this._cts.token);let U;try{z("resolving rename location");const ge=H.resolveRenameLocation(K.token);this._progressService.showWhile(ge,250),U=await ge,z("resolved rename location")}catch(ge){ge instanceof L.CancellationError?z("resolve rename location cancelled",JSON.stringify(ge,null,"	")):(z("resolve rename location failed",ge instanceof Error?ge:JSON.stringify(ge,null,"	")),(typeof ge=="string"||(0,y.isMarkdownString)(ge))&&r.MessageController.get(this.editor)?.showMessage(ge||d.localize(461,"An unknown error occurred while resolving rename location"),q));return}finally{K.dispose()}if(!U){z("returning early - no loc");return}if(U.rejectReason){z(`returning early - rejected with reason: ${U.rejectReason}`,U.rejectReason),r.MessageController.get(this.editor)?.showMessage(U.rejectReason,q);return}if(K.token.isCancellationRequested){z("returning early - cts1 cancelled");return}const Y=new a.EditorStateCancellationTokenSource(this.editor,5,U.range,this._cts.token),Q=this.editor.getModel(),X=this._languageFeaturesService.newSymbolNamesProvider.all(Q),G=await Promise.all(X.map(async ge=>[ge,await ge.supportsAutomaticNewSymbolNamesTriggerKind??!1])),P=(ge,pe)=>{let ce=G.slice();return ge===g.NewSymbolNameTriggerKind.Automatic&&(ce=ce.filter(([ie,ne])=>ne)),ce.map(([ie])=>ie.provideNewSymbolNames(Q,U.range,ge,pe))};z("creating rename input field and awaiting its result");const te=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),se=await this._renameWidget.getInput(U.range,U.text,te,X.length>0?P:void 0,Y);if(z("received response from rename input field"),X.length>0&&this._reportTelemetry(X.length,Q.getLanguageId(),se),typeof se=="boolean"){z(`returning early - rename input field response - ${se}`),se&&this.editor.focus(),Y.dispose();return}this.editor.focus(),z("requesting rename edits");const ue=(0,k.raceCancellation)(H.provideRenameEdits(se.newName,Y.token),Y.token).then(async ge=>{if(!ge){z("returning early - no rename edits result");return}if(!this.editor.hasModel()){z("returning early - no model after rename edits are provided");return}if(ge.rejectReason){z(`returning early - rejected with reason: ${ge.rejectReason}`),this._notificationService.info(ge.rejectReason);return}this.editor.setSelection(i.Range.fromPositions(this.editor.getSelection().getPosition())),z("applying edits"),this._bulkEditService.apply(ge,{editor:this.editor,showPreview:se.wantsPreview,label:d.localize(462,"Renaming '{0}' to '{1}'",U?.text,se.newName),code:"undoredo.rename",quotableLabel:d.localize(463,"Renaming {0} to {1}",U?.text,se.newName),respectAutoSaveConfig:!0}).then(pe=>{z("edits applied"),pe.ariaSummary&&(0,c.alert)(d.localize(464,"Successfully renamed '{0}' to '{1}'. Summary: {2}",U.text,se.newName,pe.ariaSummary))}).catch(pe=>{z(`error when applying edits ${JSON.stringify(pe,null,"	")}`),this._notificationService.error(d.localize(465,"Rename failed to apply edits")),this._logService.error(pe)})},ge=>{z("error when providing rename edits",JSON.stringify(ge,null,"	")),this._notificationService.error(d.localize(466,"Rename failed to compute edits")),this._logService.error(ge)}).finally(()=>{Y.dispose()});return z("returning rename operation"),this._progressService.showWhile(ue,250),ue}acceptRenameInput(z){this._renameWidget.acceptInput(z)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(z,q,H){const K=typeof H=="boolean"?{kind:"cancelled",languageId:q,nRenameSuggestionProviders:z}:{kind:"accepted",languageId:q,nRenameSuggestionProviders:z,source:H.stats.source.k,nRenameSuggestions:H.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:H.stats.timeBeforeFirstInputFieldEdit,wantsPreview:H.wantsPreview,nRenameSuggestionsInvocations:H.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:H.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",K)}};O=A=De([he(1,C.IInstantiationService),he(2,S.INotificationService),he(3,n.IBulkEditService),he(4,D.IEditorProgressService),he(5,w.ILogService),he(6,l.ITextResourceConfigurationService),he(7,u.ILanguageFeaturesService),he(8,T.ITelemetryService)],O);class x extends p.EditorAction{constructor(){super({id:"editor.action.rename",label:d.localize(467,"Rename Symbol"),alias:"Rename Symbol",precondition:v.ContextKeyExpr.and(o.EditorContextKeys.writable,o.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:o.EditorContextKeys.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(z,q){const H=z.get(s.ICodeEditorService),[K,U]=Array.isArray(q)&&q||[void 0,void 0];return b.URI.isUri(K)&&t.Position.isIPosition(U)?H.openCodeEditor({resource:K},H.getActiveCodeEditor()).then(Y=>{Y&&(Y.setPosition(U),Y.invokeWithinContext(Q=>(this.reportTelemetry(Q,Y),this.run(Q,Y))))},L.onUnexpectedError):super.runCommand(z,q)}run(z,q){const H=z.get(w.ILogService),K=O.get(q);return K?(H.trace("[RenameAction] got controller, running..."),K.run()):(H.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}e.RenameAction=x,(0,p.registerEditorContribution)(O.ID,O,4),(0,p.registerEditorAction)(x);const F=p.EditorCommand.bindToContribution(O.get);(0,p.registerEditorCommand)(new F({id:"acceptRenameInput",precondition:M.CONTEXT_RENAME_INPUT_VISIBLE,handler:W=>W.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:v.ContextKeyExpr.and(o.EditorContextKeys.focus,v.ContextKeyExpr.not("isComposing")),primary:3}})),(0,p.registerEditorCommand)(new F({id:"acceptRenameInputWithPreview",precondition:v.ContextKeyExpr.and(M.CONTEXT_RENAME_INPUT_VISIBLE,v.ContextKeyExpr.has("config.editor.rename.enablePreview")),handler:W=>W.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:v.ContextKeyExpr.and(o.EditorContextKeys.focus,v.ContextKeyExpr.not("isComposing")),primary:2051}})),(0,p.registerEditorCommand)(new F({id:"cancelRenameInput",precondition:M.CONTEXT_RENAME_INPUT_VISIBLE,handler:W=>W.cancelRenameInput(),kbOpts:{weight:199,kbExpr:o.EditorContextKeys.focus,primary:9,secondary:[1033]}})),(0,m.registerAction2)(class extends m.Action2{constructor(){super({id:"focusNextRenameSuggestion",title:{...d.localize2(469,"Focus Next Rename Suggestion")},precondition:M.CONTEXT_RENAME_INPUT_VISIBLE,keybinding:[{primary:18,weight:199}]})}run(z){const q=z.get(s.ICodeEditorService).getFocusedCodeEditor();if(!q)return;const H=O.get(q);H&&H.focusNextRenameSuggestion()}}),(0,m.registerAction2)(class extends m.Action2{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...d.localize2(470,"Focus Previous Rename Suggestion")},precondition:M.CONTEXT_RENAME_INPUT_VISIBLE,keybinding:[{primary:16,weight:199}]})}run(z){const q=z.get(s.ICodeEditorService).getFocusedCodeEditor();if(!q)return;const H=O.get(q);H&&H.focusPreviousRenameSuggestion()}}),(0,p.registerModelAndPositionCommand)("_executeDocumentRenameProvider",function(W,z,q,...H){const[K]=H;(0,_.assertType)(typeof K=="string");const{renameProvider:U}=W.get(u.ILanguageFeaturesService);return N(U,z,q,K)}),(0,p.registerModelAndPositionCommand)("_executePrepareRename",async function(W,z,q){const{renameProvider:H}=W.get(u.ILanguageFeaturesService),U=await new R(z,q,H).resolveRenameLocation(E.CancellationToken.None);if(U?.rejectReason)throw new Error(U.rejectReason);return U}),I.Registry.as(h.Extensions.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:d.localize(468,"Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})}),define(oe[782],re([1,0,2,8,44,27,14,18,25,281,381,79,59,17,265,146,357]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentSemanticTokensFeature=void 0;let l=class extends c.Disposable{constructor(m,h,v,C,w,S){super(),this._watchers=Object.create(null);const D=M=>{this._watchers[M.uri.toString()]=new a(M,m,v,w,S)},I=(M,A)=>{A.dispose(),delete this._watchers[M.uri.toString()]},T=()=>{for(const M of h.getModels()){const A=this._watchers[M.uri.toString()];(0,g.isSemanticColoringEnabled)(M,v,C)?A||D(M):A&&I(M,A)}};h.getModels().forEach(M=>{(0,g.isSemanticColoringEnabled)(M,v,C)&&D(M)}),this._register(h.onModelAdded(M=>{(0,g.isSemanticColoringEnabled)(M,v,C)&&D(M)})),this._register(h.onModelRemoved(M=>{const A=this._watchers[M.uri.toString()];A&&I(M,A)})),this._register(C.onDidChangeConfiguration(M=>{M.affectsConfiguration(g.SEMANTIC_HIGHLIGHTING_SETTING_ID)&&T()})),this._register(v.onDidColorThemeChange(T))}dispose(){for(const m of Object.values(this._watchers))m.dispose();super.dispose()}};e.DocumentSemanticTokensFeature=l,e.DocumentSemanticTokensFeature=l=De([he(0,i.ISemanticTokensStylingService),he(1,E.IModelService),he(2,_.IThemeService),he(3,L.IConfigurationService),he(4,n.ILanguageFeatureDebounceService),he(5,t.ILanguageFeaturesService)],l);let a=class extends c.Disposable{static{u=this}static{this.REQUEST_MIN_DELAY=300}static{this.REQUEST_MAX_DELAY=2e3}constructor(m,h,v,C,w){super(),this._semanticTokensStylingService=h,this._isDisposed=!1,this._model=m,this._provider=w.documentSemanticTokensProvider,this._debounceInformation=C.for(this._provider,"DocumentSemanticTokens",{min:u.REQUEST_MIN_DELAY,max:u.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new y.RunOnceScheduler(()=>this._fetchDocumentSemanticTokensNow(),u.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeAttached(()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(this._model.onDidChangeLanguage(()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)}));const S=()=>{(0,c.dispose)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const D of this._provider.all(m))typeof D.onDidChange=="function"&&this._documentProvidersChangeListeners.push(D.onDidChange(()=>{if(this._currentDocumentRequestCancellationTokenSource){this._providersChangedDuringRequest=!0;return}this._fetchDocumentSemanticTokens.schedule(0)}))};S(),this._register(this._provider.onDidChange(()=>{S(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._register(v.onDidColorThemeChange(D=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))})),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),(0,c.dispose)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!(0,p.hasDocumentSemanticTokensProvider)(this._provider,this._model)){this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1);return}if(!this._model.isAttachedToEditor())return;const m=new f.CancellationTokenSource,h=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,v=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,C=(0,p.getDocumentSemanticTokens)(this._provider,this._model,h,v,m.token);this._currentDocumentRequestCancellationTokenSource=m,this._providersChangedDuringRequest=!1;const w=[],S=this._model.onDidChangeContent(I=>{w.push(I)}),D=new s.StopWatch(!1);C.then(I=>{if(this._debounceInformation.update(this._model,D.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,S.dispose(),!I)this._setDocumentSemanticTokens(null,null,null,w);else{const{provider:T,tokens:M}=I,A=this._semanticTokensStylingService.getStyling(T);this._setDocumentSemanticTokens(T,M||null,A,w)}},I=>{I&&(k.isCancellationError(I)||typeof I.message=="string"&&I.message.indexOf("busy")!==-1)||k.onUnexpectedError(I),this._currentDocumentRequestCancellationTokenSource=null,S.dispose(),(w.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))})}static _copy(m,h,v,C,w){w=Math.min(w,v.length-C,m.length-h);for(let S=0;S<w;S++)v[C+S]=m[h+S]}_setDocumentSemanticTokens(m,h,v,C){const w=this._currentDocumentResponse,S=()=>{(C.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed){m&&h&&m.releaseDocumentSemanticTokens(h.resultId);return}if(!m||!v){this._model.tokenization.setSemanticTokens(null,!1);return}if(!h){this._model.tokenization.setSemanticTokens(null,!0),S();return}if((0,p.isSemanticTokensEdits)(h)){if(!w){this._model.tokenization.setSemanticTokens(null,!0);return}if(h.edits.length===0)h={resultId:h.resultId,data:w.data};else{let D=0;for(const R of h.edits)D+=(R.data?R.data.length:0)-R.deleteCount;const I=w.data,T=new Uint32Array(I.length+D);let M=I.length,A=T.length;for(let R=h.edits.length-1;R>=0;R--){const N=h.edits[R];if(N.start>I.length){v.warnInvalidEditStart(w.resultId,h.resultId,R,N.start,I.length),this._model.tokenization.setSemanticTokens(null,!0);return}const O=M-(N.start+N.deleteCount);O>0&&(u._copy(I,M-O,T,A-O,O),A-=O),N.data&&(u._copy(N.data,0,T,A-N.data.length,N.data.length),A-=N.data.length),M=N.start}M>0&&u._copy(I,0,T,0,M),h={resultId:h.resultId,data:T}}}if((0,p.isSemanticTokens)(h)){this._currentDocumentResponse=new r(m,h.resultId,h.data);const D=(0,b.toMultilineTokens2)(h,v,this._model.getLanguageId());if(C.length>0)for(const I of C)for(const T of D)for(const M of I.changes)T.applyEdit(M.range,M.text);this._model.tokenization.setSemanticTokens(D,!0)}else this._model.tokenization.setSemanticTokens(null,!0);S()}};a=u=De([he(1,i.ISemanticTokensStylingService),he(2,_.IThemeService),he(3,n.ILanguageFeatureDebounceService),he(4,t.ILanguageFeaturesService)],a);class r{constructor(m,h,v){this.provider=m,this.resultId=h,this.data=v}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}(0,o.registerEditorFeature)(l)}),define(oe[783],re([1,0,14,2,15,381,357,281,27,25,79,59,17,265]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportSemanticTokensContribution=void 0;let i=class extends k.Disposable{static{this.ID="editor.contrib.viewportSemanticTokens"}constructor(g,u,l,a,r,d){super(),this._semanticTokensStylingService=u,this._themeService=l,this._configurationService=a,this._editor=g,this._provider=d.documentRangeSemanticTokensProvider,this._debounceInformation=r.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new c.RunOnceScheduler(()=>this._tokenizeViewportNow(),100)),this._outstandingRequests=[];const m=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange(()=>{m()})),this._register(this._editor.onDidChangeModel(()=>{this._cancelAll(),m()})),this._register(this._editor.onDidChangeModelContent(h=>{this._cancelAll(),m()})),this._register(this._provider.onDidChange(()=>{this._cancelAll(),m()})),this._register(this._configurationService.onDidChangeConfiguration(h=>{h.affectsConfiguration(y.SEMANTIC_HIGHLIGHTING_SETTING_ID)&&(this._cancelAll(),m())})),this._register(this._themeService.onDidColorThemeChange(()=>{this._cancelAll(),m()})),m()}_cancelAll(){for(const g of this._outstandingRequests)g.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(g){for(let u=0,l=this._outstandingRequests.length;u<l;u++)if(this._outstandingRequests[u]===g){this._outstandingRequests.splice(u,1);return}}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const g=this._editor.getModel();if(g.tokenization.hasCompleteSemanticTokens())return;if(!(0,y.isSemanticColoringEnabled)(g,this._themeService,this._configurationService)){g.tokenization.hasSomeSemanticTokens()&&g.tokenization.setSemanticTokens(null,!1);return}if(!(0,L.hasDocumentRangeSemanticTokensProvider)(this._provider,g)){g.tokenization.hasSomeSemanticTokens()&&g.tokenization.setSemanticTokens(null,!1);return}const u=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(u.map(l=>this._requestRange(g,l)))}_requestRange(g,u){const l=g.getVersionId(),a=(0,c.createCancelablePromise)(d=>Promise.resolve((0,L.getDocumentRangeSemanticTokens)(this._provider,g,u,d))),r=new n.StopWatch(!1);return a.then(d=>{if(this._debounceInformation.update(g,r.elapsed()),!d||!d.tokens||g.isDisposed()||g.getVersionId()!==l)return;const{provider:m,tokens:h}=d,v=this._semanticTokensStylingService.getStyling(m);g.tokenization.setPartialSemanticTokens(u,(0,f.toMultilineTokens2)(h,v,g.getLanguageId()))}).then(()=>this._removeOutstandingRequest(a),()=>this._removeOutstandingRequest(a)),a}};e.ViewportSemanticTokensContribution=i,e.ViewportSemanticTokensContribution=i=De([he(1,t.ISemanticTokensStylingService),he(2,b.IThemeService),he(3,_.IConfigurationService),he(4,p.ILanguageFeatureDebounceService),he(5,s.ILanguageFeaturesService)],i),(0,E.registerEditorContribution)(i.ID,i,1)}),define(oe[784],re([1,0,5,232,26,30,6,82,2,22,28,700,44,42,3,378,71,25,397]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ItemRenderer=void 0,e.getAriaId=a;function a(v){return`suggest-aria-id:${v}`}const r=(0,g.registerIcon)("suggest-more-info",E.Codicon.chevronRight,i.localize(358,"Icon for more information in the suggest widget.")),d=new class Nt{static{this._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/}static{this._regexStrict=new RegExp(`^${Nt._regexRelaxed.source}$`,"i")}extract(C,w){if(C.textLabel.match(Nt._regexStrict))return w[0]=C.textLabel,!0;if(C.completion.detail&&C.completion.detail.match(Nt._regexStrict))return w[0]=C.completion.detail,!0;if(C.completion.documentation){const S=typeof C.completion.documentation=="string"?C.completion.documentation:C.completion.documentation.value,D=Nt._regexRelaxed.exec(S);if(D&&(D.index===0||D.index+D[0].length===S.length))return w[0]=D[0],!0}return!1}};let m=class{constructor(C,w,S,D){this._editor=C,this._modelService=w,this._languageService=S,this._themeService=D,this._onDidToggleDetails=new y.Emitter,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(C){const w=new _.DisposableStore,S=C;S.classList.add("show-file-icons");const D=(0,c.append)(C,(0,c.$)(".icon")),I=(0,c.append)(D,(0,c.$)("span.colorspan")),T=(0,c.append)(C,(0,c.$)(".contents")),M=(0,c.append)(T,(0,c.$)(".main")),A=(0,c.append)(M,(0,c.$)(".icon-label.codicon")),R=(0,c.append)(M,(0,c.$)("span.left")),N=(0,c.append)(M,(0,c.$)("span.right")),O=new k.IconLabel(R,{supportHighlights:!0,supportIcons:!0});w.add(O);const x=(0,c.append)(R,(0,c.$)("span.signature-label")),F=(0,c.append)(R,(0,c.$)("span.qualifier-label")),W=(0,c.append)(N,(0,c.$)("span.details-label")),z=(0,c.append)(N,(0,c.$)("span.readMore"+L.ThemeIcon.asCSSSelector(r)));return z.title=i.localize(359,"Read More"),{root:S,left:R,right:N,icon:D,colorspan:I,iconLabel:O,iconContainer:A,parametersLabel:x,qualifierLabel:F,detailsLabel:W,readMore:z,disposables:w,configureFont:()=>{const H=this._editor.getOptions(),K=H.get(50),U=K.getMassagedFontFamily(),Y=K.fontFeatureSettings,Q=H.get(120)||K.fontSize,X=H.get(121)||K.lineHeight,G=K.fontWeight,P=K.letterSpacing,te=`${Q}px`,se=`${X}px`,ue=`${P}px`;S.style.fontSize=te,S.style.fontWeight=G,S.style.letterSpacing=ue,M.style.fontFamily=U,M.style.fontFeatureSettings=Y,M.style.lineHeight=se,D.style.height=se,D.style.width=se,z.style.height=se,z.style.width=se}}}renderElement(C,w,S){S.configureFont();const{completion:D}=C;S.root.id=a(w),S.colorspan.style.backgroundColor="";const I={labelEscapeNewLines:!0,matches:(0,f.createMatches)(C.score)},T=[];if(D.kind===19&&d.extract(C,T))S.icon.className="icon customcolor",S.iconContainer.className="icon hide",S.colorspan.style.backgroundColor=T[0];else if(D.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){S.icon.className="icon hide",S.iconContainer.className="icon hide";const M=(0,n.getIconClasses)(this._modelService,this._languageService,b.URI.from({scheme:"fake",path:C.textLabel}),o.FileKind.FILE),A=(0,n.getIconClasses)(this._modelService,this._languageService,b.URI.from({scheme:"fake",path:D.detail}),o.FileKind.FILE);I.extraClasses=M.length>A.length?M:A}else D.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(S.icon.className="icon hide",S.iconContainer.className="icon hide",I.extraClasses=[(0,n.getIconClasses)(this._modelService,this._languageService,b.URI.from({scheme:"fake",path:C.textLabel}),o.FileKind.FOLDER),(0,n.getIconClasses)(this._modelService,this._languageService,b.URI.from({scheme:"fake",path:D.detail}),o.FileKind.FOLDER)].flat()):(S.icon.className="icon hide",S.iconContainer.className="",S.iconContainer.classList.add("suggest-icon",...L.ThemeIcon.asClassNameArray(p.CompletionItemKinds.toIcon(D.kind))));D.tags&&D.tags.indexOf(1)>=0&&(I.extraClasses=(I.extraClasses||[]).concat(["deprecated"]),I.matches=[]),S.iconLabel.setLabel(C.textLabel,void 0,I),typeof D.label=="string"?(S.parametersLabel.textContent="",S.detailsLabel.textContent=h(D.detail||""),S.root.classList.add("string-label")):(S.parametersLabel.textContent=h(D.label.detail||""),S.detailsLabel.textContent=h(D.label.description||""),S.root.classList.remove("string-label")),this._editor.getOption(119).showInlineDetails?(0,c.show)(S.detailsLabel):(0,c.hide)(S.detailsLabel),(0,l.canExpandCompletionItem)(C)?(S.right.classList.add("can-expand-details"),(0,c.show)(S.readMore),S.readMore.onmousedown=M=>{M.stopPropagation(),M.preventDefault()},S.readMore.onclick=M=>{M.stopPropagation(),M.preventDefault(),this._onDidToggleDetails.fire()}):(S.right.classList.remove("can-expand-details"),(0,c.hide)(S.readMore),S.readMore.onmousedown=null,S.readMore.onclick=null)}disposeTemplate(C){C.disposables.dispose()}};e.ItemRenderer=m,e.ItemRenderer=m=De([he(1,s.IModelService),he(2,t.ILanguageService),he(3,u.IThemeService)],m);function h(v){return v.replace(/\r\n|\r|\n/g,"")}}),define(oe[785],re([1,0,778,38,154,35,106,6,15,20,63]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GotoLineAction=e.StandaloneGotoLineQuickAccessProvider=void 0;let n=class extends c.AbstractGotoLineQuickAccessProvider{constructor(i){super(),this.editorService=i,this.onDidActiveTextEditorControlChange=f.Event.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};e.StandaloneGotoLineQuickAccessProvider=n,e.StandaloneGotoLineQuickAccessProvider=n=De([he(0,L.ICodeEditorService)],n);class s extends _.EditorAction{static{this.ID="editor.action.gotoLine"}constructor(){super({id:s.ID,label:y.GoToLineNLS.gotoLineActionLabel,alias:"Go to Line/Column...",precondition:void 0,kbOpts:{kbExpr:b.EditorContextKeys.focus,primary:2085,mac:{primary:293},weight:100}})}run(i){i.get(p.IQuickInputService).quickAccess.show(n.PREFIX)}}e.GotoLineAction=s,(0,_.registerEditorAction)(s),k.Registry.as(E.Extensions.Quickaccess).registerQuickAccessProvider({ctor:n,prefix:n.PREFIX,helpEntries:[{description:y.GoToLineNLS.gotoLineActionLabel,commandId:s.ID}]})}),define(oe[786],re([1,0,779,38,154,35,106,6,15,20,63,182,17,196,279]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GotoSymbolAction=e.StandaloneGotoSymbolQuickAccessProvider=void 0;let t=class extends c.AbstractGotoSymbolQuickAccessProvider{constructor(g,u,l){super(u,l),this.editorService=g,this.onDidActiveTextEditorControlChange=f.Event.None}get activeTextEditorControl(){return this.editorService.getFocusedCodeEditor()??void 0}};e.StandaloneGotoSymbolQuickAccessProvider=t,e.StandaloneGotoSymbolQuickAccessProvider=t=De([he(0,L.ICodeEditorService),he(1,s.ILanguageFeaturesService),he(2,n.IOutlineModelService)],t);class i extends _.EditorAction{static{this.ID="editor.action.quickOutline"}constructor(){super({id:i.ID,label:y.QuickOutlineNLS.quickOutlineActionLabel,alias:"Go to Symbol...",precondition:b.EditorContextKeys.hasDocumentSymbolProvider,kbOpts:{kbExpr:b.EditorContextKeys.focus,primary:3117,weight:100},contextMenuOpts:{group:"navigation",order:3}})}run(g){g.get(p.IQuickInputService).quickAccess.show(c.AbstractGotoSymbolQuickAccessProvider.PREFIX,{itemActivation:p.ItemActivation.NONE})}}e.GotoSymbolAction=i,(0,_.registerEditorAction)(i),k.Registry.as(E.Extensions.Quickaccess).registerQuickAccessProvider({ctor:t,prefix:c.AbstractGotoSymbolQuickAccessProvider.PREFIX,helpEntries:[{description:y.QuickOutlineNLS.quickOutlineActionLabel,prefix:c.AbstractGotoSymbolQuickAccessProvider.PREFIX,commandId:i.ID},{description:y.QuickOutlineNLS.quickOutlineByCategoryActionLabel,prefix:c.AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY}]})}),define(oe[413],re([1,0,5,47,762,35,12,49,25]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneCodeEditorService=void 0;let b=class extends E.AbstractCodeEditorService{constructor(n,s){super(s),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=n.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(t,i,o)=>i?this.doOpenEditor(i,t):null))}_checkContextKey(){let n=!1;for(const s of this.listCodeEditors())if(!s.isSimpleWidget){n=!0;break}this._editorIsOpen.set(n)}setActiveCodeEditor(n){this._activeCodeEditor=n}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(n,s){if(!this.findModel(n,s.resource)){if(s.resource){const o=s.resource.scheme;if(o===k.Schemas.http||o===k.Schemas.https)return(0,c.windowOpenNoOpener)(s.resource.toString()),n}return null}const i=s.options?s.options.selection:null;if(i)if(typeof i.endLineNumber=="number"&&typeof i.endColumn=="number")n.setSelection(i),n.revealRangeInCenter(i,1);else{const o={lineNumber:i.startLineNumber,column:i.startColumn};n.setPosition(o),n.revealPositionInCenter(o,1)}return n}findModel(n,s){const t=n.getModel();return t&&t.uri.toString()!==s.toString()?null:t}};e.StandaloneCodeEditorService=b,e.StandaloneCodeEditorService=b=De([he(0,y.IContextKeyService),he(1,_.IThemeService)],b),(0,f.registerSingleton)(L.ICodeEditorService,b,0)}),define(oe[787],re([1,0,80,32]),function(ae,e,c,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hc_light=e.hc_black=e.vs_dark=e.vs=void 0,e.vs={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[k.editorBackground]:"#FFFFFE",[k.editorForeground]:"#000000",[k.editorInactiveSelection]:"#E5EBF1",[c.editorIndentGuide1]:"#D3D3D3",[c.editorActiveIndentGuide1]:"#939393",[k.editorSelectionHighlight]:"#ADD6FF4D"}},e.vs_dark={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[k.editorBackground]:"#1E1E1E",[k.editorForeground]:"#D4D4D4",[k.editorInactiveSelection]:"#3A3D41",[c.editorIndentGuide1]:"#404040",[c.editorActiveIndentGuide1]:"#707070",[k.editorSelectionHighlight]:"#ADD6FF26"}},e.hc_black={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[k.editorBackground]:"#000000",[k.editorForeground]:"#FFFFFF",[c.editorIndentGuide1]:"#FFFFFF",[c.editorActiveIndentGuide1]:"#FFFFFF"}},e.hc_light={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[k.editorBackground]:"#FFFFFF",[k.editorForeground]:"#292929",[c.editorIndentGuide1]:"#292929",[c.editorActiveIndentGuide1]:"#292929"}}}),define(oe[414],re([1,0,5,64,33,6,28,147,585,787,38,32,25,2,97,758,52]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneThemeService=e.HC_LIGHT_THEME_NAME=e.HC_BLACK_THEME_NAME=e.VS_DARK_THEME_NAME=e.VS_LIGHT_THEME_NAME=void 0,e.VS_LIGHT_THEME_NAME="vs",e.VS_DARK_THEME_NAME="vs-dark",e.HC_BLACK_THEME_NAME="hc-black",e.HC_LIGHT_THEME_NAME="hc-light";const u=p.Registry.as(n.Extensions.ColorContribution),l=p.Registry.as(s.Extensions.ThemingContribution);class a{constructor(C,w){this.semanticHighlighting=!1,this.themeData=w;const S=w.base;C.length>0?(r(C)?this.id=C:this.id=S+" "+C,this.themeName=C):(this.id=S,this.themeName=S),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const C=new Map;for(const w in this.themeData.colors)C.set(w,E.Color.fromHex(this.themeData.colors[w]));if(this.themeData.inherit){const w=d(this.themeData.base);for(const S in w.colors)C.has(S)||C.set(S,E.Color.fromHex(w.colors[S]))}this.colors=C}return this.colors}getColor(C,w){const S=this.getColors().get(C);if(S)return S;if(w!==!1)return this.getDefault(C)}getDefault(C){let w=this.defaultColors[C];return w||(w=u.resolveDefaultColor(C,this),this.defaultColors[C]=w,w)}defines(C){return this.getColors().has(C)}get type(){switch(this.base){case e.VS_LIGHT_THEME_NAME:return i.ColorScheme.LIGHT;case e.HC_BLACK_THEME_NAME:return i.ColorScheme.HIGH_CONTRAST_DARK;case e.HC_LIGHT_THEME_NAME:return i.ColorScheme.HIGH_CONTRAST_LIGHT;default:return i.ColorScheme.DARK}}get tokenTheme(){if(!this._tokenTheme){let C=[],w=[];if(this.themeData.inherit){const I=d(this.themeData.base);C=I.rules,I.encodedTokensColors&&(w=I.encodedTokensColors)}const S=this.themeData.colors["editor.foreground"],D=this.themeData.colors["editor.background"];if(S||D){const I={token:""};S&&(I.foreground=S),D&&(I.background=D),C.push(I)}C=C.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(w=this.themeData.encodedTokensColors),this._tokenTheme=_.TokenTheme.createFromRawTokenTheme(C,w)}return this._tokenTheme}getTokenStyleMetadata(C,w,S){const I=this.tokenTheme._match([C].concat(w).join(".")).metadata,T=f.TokenMetadata.getForeground(I),M=f.TokenMetadata.getFontStyle(I);return{foreground:T,italic:!!(M&1),bold:!!(M&2),underline:!!(M&4),strikethrough:!!(M&8)}}}function r(v){return v===e.VS_LIGHT_THEME_NAME||v===e.VS_DARK_THEME_NAME||v===e.HC_BLACK_THEME_NAME||v===e.HC_LIGHT_THEME_NAME}function d(v){switch(v){case e.VS_LIGHT_THEME_NAME:return b.vs;case e.VS_DARK_THEME_NAME:return b.vs_dark;case e.HC_BLACK_THEME_NAME:return b.hc_black;case e.HC_LIGHT_THEME_NAME:return b.hc_light}}function m(v){const C=d(v);return new a(v,C)}class h extends t.Disposable{constructor(){super(),this._onColorThemeChange=this._register(new L.Emitter),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onProductIconThemeChange=this._register(new L.Emitter),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new o.UnthemedProductIconTheme,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(e.VS_LIGHT_THEME_NAME,m(e.VS_LIGHT_THEME_NAME)),this._knownThemes.set(e.VS_DARK_THEME_NAME,m(e.VS_DARK_THEME_NAME)),this._knownThemes.set(e.HC_BLACK_THEME_NAME,m(e.HC_BLACK_THEME_NAME)),this._knownThemes.set(e.HC_LIGHT_THEME_NAME,m(e.HC_LIGHT_THEME_NAME));const C=this._register((0,o.getIconsStyleSheet)(this));this._codiconCSS=C.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(e.VS_LIGHT_THEME_NAME),this._onOSSchemeChanged(),this._register(C.onDidChange(()=>{this._codiconCSS=C.getCSS(),this._updateCSS()})),(0,k.addMatchMediaChangeListener)(g.mainWindow,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(C){return c.isInShadowDOM(C)?this._registerShadowDomContainer(C):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=c.createStyleSheet(void 0,C=>{C.className="monaco-colors",C.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),t.Disposable.None}_registerShadowDomContainer(C){const w=c.createStyleSheet(C,S=>{S.className="monaco-colors",S.textContent=this._allCSS});return this._styleElements.push(w),{dispose:()=>{for(let S=0;S<this._styleElements.length;S++)if(this._styleElements[S]===w){this._styleElements.splice(S,1);return}}}}defineTheme(C,w){if(!/^[a-z0-9\-]+$/i.test(C))throw new Error("Illegal theme name!");if(!r(w.base)&&!r(C))throw new Error("Illegal theme base!");this._knownThemes.set(C,new a(C,w)),r(C)&&this._knownThemes.forEach(S=>{S.base===C&&S.notifyBaseUpdated()}),this._theme.themeName===C&&this.setTheme(C)}getColorTheme(){return this._theme}setColorMapOverride(C){this._colorMapOverride=C,this._updateThemeOrColorMap()}setTheme(C){let w;this._knownThemes.has(C)?w=this._knownThemes.get(C):w=this._knownThemes.get(e.VS_LIGHT_THEME_NAME),this._updateActualTheme(w)}_updateActualTheme(C){!C||this._theme===C||(this._theme=C,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const C=g.mainWindow.matchMedia("(forced-colors: active)").matches;if(C!==(0,i.isHighContrast)(this._theme.type)){let w;(0,i.isDark)(this._theme.type)?w=C?e.HC_BLACK_THEME_NAME:e.VS_DARK_THEME_NAME:w=C?e.HC_LIGHT_THEME_NAME:e.VS_LIGHT_THEME_NAME,this._updateActualTheme(this._knownThemes.get(w))}}}setAutoDetectHighContrast(C){this._autoDetectHighContrast=C,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const C=[],w={},S={addRule:T=>{w[T]||(C.push(T),w[T]=!0)}};l.getThemingParticipants().forEach(T=>T(this._theme,S,this._environment));const D=[];for(const T of u.getColors()){const M=this._theme.getColor(T.id,!0);M&&D.push(`${(0,n.asCssVariableName)(T.id)}: ${M.toString()};`)}S.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${D.join(`
`)} }`);const I=this._colorMapOverride||this._theme.tokenTheme.getColorMap();S.addRule((0,_.generateTokensCSSForColorMap)(I)),this._themeCSS=C.join(`
`),this._updateCSS(),y.TokenizationRegistry.setColorMap(I),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(C=>C.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}e.StandaloneThemeService=h}),define(oe[788],re([1,0,15,152,106,97,414]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class f extends c.EditorAction{constructor(){super({id:"editor.action.toggleHighContrast",label:E.ToggleHighContrastNLS.toggleHighContrast,alias:"Toggle High Contrast Theme",precondition:void 0}),this._originalThemeName=null}run(b,p){const n=b.get(k.IStandaloneThemeService),s=n.getColorTheme();(0,L.isHighContrast)(s.type)?(n.setTheme(this._originalThemeName||((0,L.isDark)(s.type)?y.VS_DARK_THEME_NAME:y.VS_LIGHT_THEME_NAME)),this._originalThemeName=null):(n.setTheme((0,L.isDark)(s.type)?y.HC_BLACK_THEME_NAME:y.HC_LIGHT_THEME_NAME),this._originalThemeName=s.themeName)}}(0,c.registerEditorAction)(f)}),define(oe[124],re([1,0,5,46,150,365,41,260,2,16,3,29,377,12,58,7,31,50,100,25,30,97,19,32,109,60,551]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownWithDefaultActionViewItem=e.SubmenuEntryActionViewItem=e.TextOnlyMenuEntryActionViewItem=e.MenuEntryActionViewItem=void 0,e.createAndFillInContextMenuActions=w,e.createAndFillInActionBarActions=S,e.createActionViewItem=N;function w(O,x,F,W){let z,q,H;if(Array.isArray(O))H=O,z=x,q=F;else{const Y=x;H=O.getActions(Y),z=F,q=W}const K=c.ModifierKeyEmitter.getInstance(),U=K.keyStatus.altKey||(b.isWindows||b.isLinux)&&K.keyStatus.shiftKey;D(H,z,U,q?Y=>Y===q:Y=>Y==="navigation")}function S(O,x,F,W,z,q){let H,K,U,Y,Q;if(Array.isArray(O))Q=O,H=x,K=F,U=W,Y=z;else{const G=x;Q=O.getActions(G),H=F,K=W,U=z,Y=q}D(Q,H,!1,typeof K=="string"?G=>G===K:K,U,Y)}function D(O,x,F,W=H=>H==="navigation",z=()=>!1,q=!1){let H,K;Array.isArray(x)?(H=x,K=x):(H=x.primary,K=x.secondary);const U=new Set;for(const[Y,Q]of O){let X;W(Y)?(X=H,X.length>0&&q&&X.push(new y.Separator)):(X=K,X.length>0&&X.push(new y.Separator));for(let G of Q){F&&(G=G instanceof n.MenuItemAction&&G.alt?G.alt:G);const P=X.push(G);G instanceof y.SubmenuAction&&U.add({group:Y,action:G,index:P-1})}}for(const{group:Y,action:Q,index:X}of U){const G=W(Y)?H:K,P=Q.actions;z(Q,Y,G.length)&&G.splice(X,1,...P)}}let I=class extends E.ActionViewItem{constructor(x,F,W,z,q,H,K,U){super(void 0,x,{icon:!!(x.class||x.item.icon),label:!x.class&&!x.item.icon,draggable:F?.draggable,keybinding:F?.keybinding,hoverDelegate:F?.hoverDelegate}),this._options=F,this._keybindingService=W,this._notificationService=z,this._contextKeyService=q,this._themeService=H,this._contextMenuService=K,this._accessibilityService=U,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new _.MutableDisposable),this._altKey=c.ModifierKeyEmitter.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(x){x.preventDefault(),x.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(F){this._notificationService.error(F)}}render(x){if(super.render(x),x.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let F=!1;const W=()=>{const z=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||F)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&F);z!==this._wantsAltCommand&&(this._wantsAltCommand=z,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(W)),this._register((0,c.addDisposableListener)(x,"mouseleave",z=>{F=!1,W()})),this._register((0,c.addDisposableListener)(x,"mouseenter",z=>{F=!0,W()})),W()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const x=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),F=x&&x.getLabel(),W=this._commandAction.tooltip||this._commandAction.label;let z=F?(0,p.localize)(1169,"{0} ({1})",W,F):W;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const q=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,H=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),K=H&&H.getLabel(),U=K?(0,p.localize)(1170,"{0} ({1})",q,K):q;z=(0,p.localize)(1171,`{0}
[{1}] {2}`,z,f.UILabelProvider.modifierLabels[b.OS].altKey,U)}return z}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(x){this._itemClassDispose.value=void 0;const{element:F,label:W}=this;if(!F||!W)return;const z=this._commandAction.checked&&(0,s.isICommandActionToggleInfo)(x.toggled)&&x.toggled.icon?x.toggled.icon:x.icon;if(z)if(r.ThemeIcon.isThemeIcon(z)){const q=r.ThemeIcon.asClassNameArray(z);W.classList.add(...q),this._itemClassDispose.value=(0,_.toDisposable)(()=>{W.classList.remove(...q)})}else W.style.backgroundImage=(0,d.isDark)(this._themeService.getColorTheme().type)?(0,c.asCSSUrl)(z.dark):(0,c.asCSSUrl)(z.light),W.classList.add("icon"),this._itemClassDispose.value=(0,_.combinedDisposable)((0,_.toDisposable)(()=>{W.style.backgroundImage="",W.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};e.MenuEntryActionViewItem=I,e.MenuEntryActionViewItem=I=De([he(2,g.IKeybindingService),he(3,u.INotificationService),he(4,t.IContextKeyService),he(5,a.IThemeService),he(6,i.IContextMenuService),he(7,C.IAccessibilityService)],I);class T extends I{render(x){this.options.label=!0,this.options.icon=!1,super.render(x),x.classList.add("text-only"),x.classList.toggle("use-comma",this._options?.useComma??!1)}updateLabel(){const x=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!x)return super.updateLabel();if(this.label){const F=T._symbolPrintEnter(x);this._options?.conversational?this.label.textContent=(0,p.localize)(1172,"{1} to {0}",this._action.label,F):this.label.textContent=(0,p.localize)(1173,"{0} ({1})",this._action.label,F)}}static _symbolPrintEnter(x){return x.getLabel()?.replace(/\benter\b/gi,"\u23CE").replace(/\bEscape\b/gi,"Esc")}}e.TextOnlyMenuEntryActionViewItem=T;let M=class extends L.DropdownMenuActionViewItem{constructor(x,F,W,z,q){const H={...F,menuAsChild:F?.menuAsChild??!1,classNames:F?.classNames??(r.ThemeIcon.isThemeIcon(x.item.icon)?r.ThemeIcon.asClassName(x.item.icon):void 0),keybindingProvider:F?.keybindingProvider??(K=>W.lookupKeybinding(K.id))};super(x,{getActions:()=>x.actions},z,H),this._keybindingService=W,this._contextMenuService=z,this._themeService=q}render(x){super.render(x),(0,m.assertType)(this.element),x.classList.add("menu-entry");const F=this._action,{icon:W}=F.item;if(W&&!r.ThemeIcon.isThemeIcon(W)){this.element.classList.add("icon");const z=()=>{this.element&&(this.element.style.backgroundImage=(0,d.isDark)(this._themeService.getColorTheme().type)?(0,c.asCSSUrl)(W.dark):(0,c.asCSSUrl)(W.light))};z(),this._register(this._themeService.onDidColorThemeChange(()=>{z()}))}}};e.SubmenuEntryActionViewItem=M,e.SubmenuEntryActionViewItem=M=De([he(2,g.IKeybindingService),he(3,i.IContextMenuService),he(4,a.IThemeService)],M);let A=class extends E.BaseActionViewItem{constructor(x,F,W,z,q,H,K,U){super(null,x),this._keybindingService=W,this._notificationService=z,this._contextMenuService=q,this._menuService=H,this._instaService=K,this._storageService=U,this._container=null,this._options=F,this._storageKey=`${x.item.submenu.id}_lastActionId`;let Y;const Q=F?.persistLastActionId?U.get(this._storageKey,1):void 0;Q&&(Y=x.actions.find(G=>Q===G.id)),Y||(Y=x.actions[0]),this._defaultAction=this._instaService.createInstance(I,Y,{keybinding:this._getDefaultActionKeybindingLabel(Y)});const X={keybindingProvider:G=>this._keybindingService.lookupKeybinding(G.id),...F,menuAsChild:F?.menuAsChild??!0,classNames:F?.classNames??["codicon","codicon-chevron-down"],actionRunner:F?.actionRunner??new y.ActionRunner};this._dropdown=new L.DropdownMenuActionViewItem(x,x.actions,this._contextMenuService,X),this._register(this._dropdown.actionRunner.onDidRun(G=>{G.action instanceof n.MenuItemAction&&this.update(G.action)}))}update(x){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,x.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(I,x,{keybinding:this._getDefaultActionKeybindingLabel(x)}),this._defaultAction.actionRunner=new class extends y.ActionRunner{async runAction(F,W){await F.run(void 0)}},this._container&&this._defaultAction.render((0,c.prepend)(this._container,(0,c.$)(".action-container")))}_getDefaultActionKeybindingLabel(x){let F;if(this._options?.renderKeybindingWithDefaultActionLabel){const W=this._keybindingService.lookupKeybinding(x.id);W&&(F=`(${W.getLabel()})`)}return F}setActionContext(x){super.setActionContext(x),this._defaultAction.setActionContext(x),this._dropdown.setActionContext(x)}render(x){this._container=x,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const F=(0,c.$)(".action-container");this._defaultAction.render((0,c.append)(this._container,F)),this._register((0,c.addDisposableListener)(F,c.EventType.KEY_DOWN,z=>{const q=new k.StandardKeyboardEvent(z);q.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),q.stopPropagation())}));const W=(0,c.$)(".dropdown-action-container");this._dropdown.render((0,c.append)(this._container,W)),this._register((0,c.addDisposableListener)(W,c.EventType.KEY_DOWN,z=>{const q=new k.StandardKeyboardEvent(z);q.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),q.stopPropagation())}))}focus(x){x?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(x){x?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};e.DropdownWithDefaultActionViewItem=A,e.DropdownWithDefaultActionViewItem=A=De([he(2,g.IKeybindingService),he(3,u.INotificationService),he(4,i.IContextMenuService),he(5,n.IMenuService),he(6,o.IInstantiationService),he(7,l.IStorageService)],A);let R=class extends E.SelectActionViewItem{constructor(x,F){super(null,x,x.actions.map(W=>({text:W.id===y.Separator.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":W.label,isDisabled:!W.enabled})),0,F,v.defaultSelectBoxStyles,{ariaLabel:x.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,x.actions.findIndex(W=>W.checked)))}render(x){super.render(x),x.style.borderColor=(0,h.asCssVariable)(h.selectBorder)}runAction(x,F){const W=this.action.actions[F];W&&this.actionRunner.run(W)}};R=De([he(1,i.IContextViewService)],R);function N(O,x,F){return x instanceof n.MenuItemAction?O.createInstance(I,x,F):x instanceof n.SubmenuItemAction?x.item.isSelection?O.createInstance(R,x):x.item.rememberDefaultAction?O.createInstance(A,x,{...F,persistLastActionId:!0}):O.createInstance(M,x,F):void 0}}),define(oe[789],re([1,0,5,87,2,124,29,12,7]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestWidgetStatus=void 0;let b=class{constructor(n,s,t,i,o){this._menuId=s,this._menuService=i,this._contextKeyService=o,this._menuDisposables=new E.DisposableStore,this.element=c.append(n,c.$(".suggest-status-bar"));const g=u=>u instanceof y.MenuItemAction?t.createInstance(L.TextOnlyMenuEntryActionViewItem,u,{useComma:!0}):void 0;this._leftActions=new k.ActionBar(this.element,{actionViewItemProvider:g}),this._rightActions=new k.ActionBar(this.element,{actionViewItemProvider:g}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const n=this._menuService.createMenu(this._menuId,this._contextKeyService),s=()=>{const t=[],i=[];for(const[o,g]of n.getActions())o==="left"?t.push(...g):i.push(...g);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(n.onDidChange(()=>s())),this._menuDisposables.add(n)}hide(){this._menuDisposables.clear()}};e.SuggestWidgetStatus=b,e.SuggestWidgetStatus=b=De([he(2,_.IInstantiationService),he(3,y.IMenuService),he(4,f.IContextKeyService)],b)}),define(oe[216],re([1,0,5,74,654,41,13,297,8,6,53,2,3,124,29,401,24,12,58,31,66]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuWorkbenchToolBar=e.WorkbenchToolBar=void 0;let d=class extends E.ToolBar{constructor(v,C,w,S,D,I,T,M){super(v,D,{getKeyBinding:R=>I.lookupKeybinding(R.id)??void 0,...C,allowContextMenu:!0,skipTelemetry:typeof C?.telemetrySource=="string"}),this._options=C,this._menuService=w,this._contextKeyService=S,this._contextMenuService=D,this._keybindingService=I,this._commandService=T,this._sessionDisposables=this._store.add(new n.DisposableStore);const A=C?.telemetrySource;A&&this._store.add(this.actionBar.onDidRun(R=>M.publicLog2("workbenchActionExecuted",{id:R.action.id,from:A})))}setActions(v,C=[],w){this._sessionDisposables.clear();const S=v.slice(),D=C.slice(),I=[];let T=0;const M=[];let A=!1;if(this._options?.hiddenItemStrategy!==-1)for(let R=0;R<S.length;R++){const N=S[R];!(N instanceof i.MenuItemAction)&&!(N instanceof i.SubmenuItemAction)||N.hideActions&&(I.push(N.hideActions.toggle),N.hideActions.toggle.checked&&T++,N.hideActions.isHidden&&(A=!0,S[R]=void 0,this._options?.hiddenItemStrategy!==0&&(M[R]=N)))}if(this._options?.overflowBehavior!==void 0){const R=(0,f.intersection)(new Set(this._options.overflowBehavior.exempted),p.Iterable.map(S,x=>x?.id)),N=this._options.overflowBehavior.maxItems-R.size;let O=0;for(let x=0;x<S.length;x++){const F=S[x];F&&(O++,!R.has(F.id)&&O>=N&&(S[x]=void 0,M[x]=F))}}(0,y.coalesceInPlace)(S),(0,y.coalesceInPlace)(M),super.setActions(S,L.Separator.join(M,D)),(I.length>0||S.length>0)&&this._sessionDisposables.add((0,c.addDisposableListener)(this.getElement(),"contextmenu",R=>{const N=new k.StandardMouseEvent((0,c.getWindow)(this.getElement()),R),O=this.getItemAction(N.target);if(!O)return;N.preventDefault(),N.stopPropagation();const x=[];if(O instanceof i.MenuItemAction&&O.menuKeybinding)x.push(O.menuKeybinding);else if(!(O instanceof i.SubmenuItemAction||O instanceof E.ToggleMenuAction)){const W=!!this._keybindingService.lookupKeybinding(O.id);x.push((0,o.createConfigureKeybindingAction)(this._commandService,this._keybindingService,O.id,void 0,W))}if(I.length>0){let W=!1;if(T===1&&this._options?.hiddenItemStrategy===0){W=!0;for(let z=0;z<I.length;z++)if(I[z].checked){I[z]=(0,L.toAction)({id:O.id,label:O.label,checked:!0,enabled:!1,run(){}});break}}if(!W&&(O instanceof i.MenuItemAction||O instanceof i.SubmenuItemAction)){if(!O.hideActions)return;x.push(O.hideActions.hide)}else x.push((0,L.toAction)({id:"label",label:(0,s.localize)(1167,"Hide"),enabled:!1,run(){}}))}const F=L.Separator.join(x,I);this._options?.resetMenu&&!w&&(w=[this._options.resetMenu]),A&&w&&(F.push(new L.Separator),F.push((0,L.toAction)({id:"resetThisMenu",label:(0,s.localize)(1168,"Reset Menu"),run:()=>this._menuService.resetHiddenStates(w)}))),F.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>N,getActions:()=>F,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};e.WorkbenchToolBar=d,e.WorkbenchToolBar=d=De([he(2,i.IMenuService),he(3,u.IContextKeyService),he(4,l.IContextMenuService),he(5,a.IKeybindingService),he(6,g.ICommandService),he(7,r.ITelemetryService)],d);let m=class extends d{constructor(v,C,w,S,D,I,T,M,A){super(v,{resetMenu:C,...w},S,D,I,T,M,A),this._onDidChangeMenuItems=this._store.add(new b.Emitter),this.onDidChangeMenuItems=this._onDidChangeMenuItems.event;const R=this._store.add(S.createMenu(C,D,{emitEventsForSubmenuChanges:!0})),N=()=>{const O=[],x=[];(0,t.createAndFillInActionBarActions)(R,w?.menuOptions,{primary:O,secondary:x},w?.toolbarOptions?.primaryGroup,w?.toolbarOptions?.shouldInlineSubmenu,w?.toolbarOptions?.useSeparatorsInPrimaryActions),v.classList.toggle("has-no-actions",O.length===0&&x.length===0),super.setActions(O,x)};this._store.add(R.onDidChange(()=>{N(),this._onDidChangeMenuItems.fire(this)})),N()}setActions(){throw new _.BugIndicatingError("This toolbar is populated from a menu.")}};e.MenuWorkbenchToolBar=m,e.MenuWorkbenchToolBar=m=De([he(3,i.IMenuService),he(4,u.IContextKeyService),he(5,l.IContextMenuService),he(6,a.IKeybindingService),he(7,g.ICommandService),he(8,r.ITelemetryService)],m)}),define(oe[790],re([1,0,5,2,21,65,320,85,565,369,56,69,4,103,104,596,216,29,12,118,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorGutter=void 0;const d=[],m=35;let h=class extends k.Disposable{constructor(S,D,I,T,M,A,R,N,O){super(),this._diffModel=D,this._editors=I,this._options=T,this._sashLayout=M,this._boundarySashes=A,this._instantiationService=R,this._contextKeyService=N,this._menuService=O,this._menu=this._register(this._menuService.createMenu(u.MenuId.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,E.observableFromEvent)(this,this._menu.onDidChange,()=>this._menu.getActions()),this._hasActions=this._actions.map(x=>x.length>0),this._showSash=(0,E.derived)(this,x=>this._options.renderSideBySide.read(x)&&this._hasActions.read(x)),this.width=(0,E.derived)(this,x=>this._hasActions.read(x)?m:0),this.elements=(0,c.h)("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:m+"px"}},[]),this._currentDiff=(0,E.derived)(this,x=>{const F=this._diffModel.read(x);if(!F)return;const W=F.diff.read(x)?.mappings,z=this._editors.modifiedCursor.read(x);if(z)return W?.find(q=>q.lineRangeMapping.modified.contains(z.lineNumber))}),this._selectedDiffs=(0,E.derived)(this,x=>{const W=this._diffModel.read(x)?.diff.read(x);if(!W)return d;const z=this._editors.modifiedSelections.read(x);if(z.every(U=>U.isEmpty()))return d;const q=new p.LineRangeSet(z.map(U=>p.LineRange.fromRangeInclusive(U))),K=W.mappings.filter(U=>U.lineRangeMapping.innerChanges&&q.intersects(U.lineRangeMapping.modified)).map(U=>({mapping:U,rangeMappings:U.lineRangeMapping.innerChanges.filter(Y=>z.some(Q=>s.Range.areIntersecting(Y.modifiedRange,Q)))}));return K.length===0||K.every(U=>U.rangeMappings.length===0)?d:K}),this._register((0,f.prependRemoveOnDispose)(S,this.elements.root)),this._register((0,c.addDisposableListener)(this.elements.root,"click",()=>{this._editors.modified.focus()})),this._register((0,f.applyStyle)(this.elements.root,{display:this._hasActions.map(x=>x?"block":"none")})),(0,L.derivedDisposable)(this,x=>this._showSash.read(x)?new y.DiffEditorSash(S,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,(0,L.derivedWithSetter)(this,W=>this._sashLayout.sashLeft.read(W)-m,(W,z)=>this._sashLayout.sashLeft.set(W+m,z)),()=>this._sashLayout.resetSash()):void 0).recomputeInitiallyAndOnChange(this._store),this._register(new _.EditorGutter(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(x,F)=>{const W=this._diffModel.read(F);if(!W)return[];const z=W.diff.read(F);if(!z)return[];const q=this._selectedDiffs.read(F);if(q.length>0){const K=i.DetailedLineRangeMapping.fromRangeMappings(q.flatMap(U=>U.rangeMappings));return[new v(K,!0,u.MenuId.DiffEditorSelectionToolbar,void 0,W.model.original.uri,W.model.modified.uri)]}const H=this._currentDiff.read(F);return z.mappings.map(K=>new v(K.lineRangeMapping.withInnerChangesFromLineRanges(),K.lineRangeMapping===H?.lineRangeMapping,u.MenuId.DiffEditorHunkToolbar,void 0,W.model.original.uri,W.model.modified.uri))},createView:(x,F)=>this._instantiationService.createInstance(C,x,F,this)})),this._register((0,c.addDisposableListener)(this.elements.gutter,c.EventType.MOUSE_WHEEL,x=>{this._editors.modified.getOption(104).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(x)},{passive:!1}))}computeStagedValue(S){const D=S.innerChanges??[],I=new o.TextModelText(this._editors.modifiedModel.get()),T=new o.TextModelText(this._editors.original.getModel());return new t.TextEdit(D.map(R=>R.toTextEdit(I))).apply(T)}layout(S){this.elements.gutter.style.left=S+"px"}};e.DiffEditorGutter=h,e.DiffEditorGutter=h=De([he(6,r.IInstantiationService),he(7,l.IContextKeyService),he(8,u.IMenuService)],h);class v{constructor(S,D,I,T,M,A){this.mapping=S,this.showAlways=D,this.menuId=I,this.rangeOverride=T,this.originalUri=M,this.modifiedUri=A}get id(){return this.mapping.modified.toString()}get range(){return this.rangeOverride??this.mapping.modified}}let C=class extends k.Disposable{constructor(S,D,I,T){super(),this._item=S,this._elements=(0,c.h)("div.gutterItem",{style:{height:"20px",width:"34px"}},[(0,c.h)("div.background@background",{},[]),(0,c.h)("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,A=>A.showAlways),this._menuId=this._item.map(this,A=>A.menuId),this._isSmall=(0,E.observableValue)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const M=this._register(T.createInstance(a.WorkbenchHoverDelegate,"element",!0,{position:{hoverPosition:1}}));this._register((0,f.appendRemoveOnDispose)(D,this._elements.root)),this._register((0,E.autorun)(A=>{const R=this._showAlways.read(A);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",R),setTimeout(()=>{this._elements.root.classList.toggle("noTransition",!1)},0)})),this._register((0,E.autorunWithStore)((A,R)=>{this._elements.buttons.replaceChildren();const N=R.add(T.createInstance(g.MenuWorkbenchToolBar,this._elements.buttons,this._menuId.read(A),{orientation:1,hoverDelegate:M,toolbarOptions:{primaryGroup:O=>O.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(A)?1:3},hiddenItemStrategy:0,actionRunner:new b.ActionRunnerWithContext(()=>{const O=this._item.get(),x=O.mapping;return{mapping:x,originalWithModifiedChanges:I.computeStagedValue(x),originalUri:O.originalUri,modifiedUri:O.modifiedUri}}),menuOptions:{shouldForwardArgs:!0}}));R.add(N.onDidChangeMenuItems(()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)}))}))}layout(S,D){this._lastItemRange=S,this._lastViewRange=D;let I=this._elements.buttons.clientHeight;this._isSmall.set(this._item.get().mapping.original.startLineNumber===1&&S.length<30,void 0),I=this._elements.buttons.clientHeight;const T=S.length/2-I/2,M=I;let A=S.start+T;const R=n.OffsetRange.tryCreate(M,D.endExclusive-M-I),N=n.OffsetRange.tryCreate(S.start+M,S.endExclusive-I-M);N&&R&&N.start<N.endExclusive&&(A=R.clip(A),A=N.clip(A)),this._elements.buttons.style.top=`${A-S.start}px`}};C=De([he(3,r.IInstantiationService)],C)}),define(oe[282],re([1,0,5,150,208,41,13,14,26,2,21,65,16,30,9,28,256,3,124,216,29,24,12,58,7,31,66,71,526]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S){"use strict";var D;Object.defineProperty(e,"__esModule",{value:!0}),e.CustomizedMenuWorkbenchToolBar=e.InlineSuggestionHintsContentWidget=e.InlineCompletionsHintsWidget=void 0;let I=class extends b.Disposable{constructor(F,W,z){super(),this.editor=F,this.model=W,this.instantiationService=z,this.alwaysShowToolbar=(0,p.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).showToolbar==="always"),this.sessionPosition=void 0,this.position=(0,p.derived)(this,q=>{const H=this.model.read(q)?.primaryGhostText.read(q);if(!this.alwaysShowToolbar.read(q)||!H||H.parts.length===0)return this.sessionPosition=void 0,null;const K=H.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==H.lineNumber&&(this.sessionPosition=void 0);const U=new i.Position(H.lineNumber,Math.min(K,this.sessionPosition?.column??Number.MAX_SAFE_INTEGER));return this.sessionPosition=U,U}),this._register((0,p.autorunWithStore)((q,H)=>{const K=this.model.read(q);if(!K||!this.alwaysShowToolbar.read(q))return;const U=(0,n.derivedWithStore)((Q,X)=>{const G=X.add(this.instantiationService.createInstance(A,this.editor,!0,this.position,K.selectedInlineCompletionIndex,K.inlineCompletionsCount,K.activeCommands));return F.addContentWidget(G),X.add((0,b.toDisposable)(()=>F.removeContentWidget(G))),X.add((0,p.autorun)(P=>{this.position.read(P)&&K.lastTriggerKind.read(P)!==o.InlineCompletionTriggerKind.Explicit&&K.triggerExplicitly()})),G}),Y=(0,p.derivedObservableWithCache)(this,(Q,X)=>!!this.position.read(Q)||!!X);H.add((0,p.autorun)(Q=>{Y.read(Q)&&U.read(Q)}))}))}};e.InlineCompletionsHintsWidget=I,e.InlineCompletionsHintsWidget=I=De([he(2,v.IInstantiationService)],I);const T=(0,S.registerIcon)("inline-suggestion-hints-next",_.Codicon.chevronRight,(0,u.localize)(609,"Icon for show next parameter hint.")),M=(0,S.registerIcon)("inline-suggestion-hints-previous",_.Codicon.chevronLeft,(0,u.localize)(610,"Icon for show previous parameter hint."));let A=class extends b.Disposable{static{D=this}static{this._dropDownVisible=!1}static get dropDownVisible(){return this._dropDownVisible}static{this.id=0}createCommandAction(F,W,z){const q=new L.Action(F,W,z,!0,()=>this._commandService.executeCommand(F)),H=this.keybindingService.lookupKeybinding(F,this._contextKeyService);let K=W;return H&&(K=(0,u.localize)(611,"{0} ({1})",W,H.getLabel())),q.tooltip=K,q}constructor(F,W,z,q,H,K,U,Y,Q,X,G){super(),this.editor=F,this.withBorder=W,this._position=z,this._currentSuggestionIdx=q,this._suggestionCount=H,this._extraCommands=K,this._commandService=U,this.keybindingService=Q,this._contextKeyService=X,this._menuService=G,this.id=`InlineSuggestionHintsContentWidget${D.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,c.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,c.h)("div@toolBar")]),this.previousAction=this.createCommandAction(g.showPreviousInlineSuggestionActionId,(0,u.localize)(612,"Previous"),t.ThemeIcon.asClassName(M)),this.availableSuggestionCountAction=new L.Action("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(g.showNextInlineSuggestionActionId,(0,u.localize)(613,"Next"),t.ThemeIcon.asClassName(T)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(r.MenuId.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new f.RunOnceScheduler(()=>{this.availableSuggestionCountAction.label=""},100)),this.disableButtonsDebounced=this._register(new f.RunOnceScheduler(()=>{this.previousAction.enabled=this.nextAction.enabled=!1},100)),this.toolBar=this._register(Y.createInstance(O,this.nodes.toolBar,r.MenuId.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:P=>P.startsWith("primary")},actionViewItemProvider:(P,te)=>{if(P instanceof r.MenuItemAction)return Y.createInstance(N,P,void 0);if(P===this.availableSuggestionCountAction){const se=new R(void 0,P,{label:!0,icon:!1});return se.setClass("availableSuggestionCount"),se}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility(P=>{D._dropDownVisible=P})),this._register((0,p.autorun)(P=>{this._position.read(P),this.editor.layoutContentWidget(this)})),this._register((0,p.autorun)(P=>{const te=this._suggestionCount.read(P),se=this._currentSuggestionIdx.read(P);te!==void 0?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${se+1}/${te}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),te!==void 0&&te>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()})),this._register((0,p.autorun)(P=>{const se=this._extraCommands.read(P).map(ue=>({class:void 0,id:ue.id,enabled:!0,tooltip:ue.tooltip||"",label:ue.title,run:ge=>this._commandService.executeCommand(ue.id)}));for(const[ue,ge]of this.inlineCompletionsActionsMenus.getActions())for(const pe of ge)pe instanceof r.MenuItemAction&&se.push(pe);se.length>0&&se.unshift(new L.Separator),this.toolBar.setAdditionalSecondaryActions(se)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};e.InlineSuggestionHintsContentWidget=A,e.InlineSuggestionHintsContentWidget=A=D=De([he(6,d.ICommandService),he(7,v.IInstantiationService),he(8,C.IKeybindingService),he(9,m.IContextKeyService),he(10,r.IMenuService)],A);class R extends k.ActionViewItem{constructor(){super(...arguments),this._className=void 0}setClass(F){this._className=F}render(F){super.render(F),this._className&&F.classList.add(this._className)}updateTooltip(){}}class N extends l.MenuEntryActionViewItem{updateLabel(){const F=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!F)return super.updateLabel();if(this.label){const W=(0,c.h)("div.keybinding").root;this._register(new E.KeybindingLabel(W,s.OS,{disableTitle:!0,...E.unthemedKeybindingLabelOptions})).set(F),this.label.textContent=this._action.label,this.label.appendChild(W),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}}let O=class extends a.WorkbenchToolBar{constructor(F,W,z,q,H,K,U,Y,Q){super(F,{resetMenu:W,...z},q,H,K,U,Y,Q),this.menuId=W,this.options2=z,this.menuService=q,this.contextKeyService=H,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){const F=[],W=[];(0,l.createAndFillInActionBarActions)(this.menu,this.options2?.menuOptions,{primary:F,secondary:W},this.options2?.toolbarOptions?.primaryGroup,this.options2?.toolbarOptions?.shouldInlineSubmenu,this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions),W.push(...this.additionalActions),F.unshift(...this.prependedPrimaryActions),this.setActions(F,W)}setPrependedPrimaryActions(F){(0,y.equals)(this.prependedPrimaryActions,F,(W,z)=>W===z)||(this.prependedPrimaryActions=F,this.updateToolbar())}setAdditionalSecondaryActions(F){(0,y.equals)(this.additionalActions,F,(W,z)=>W===z)||(this.additionalActions=F,this.updateToolbar())}};e.CustomizedMenuWorkbenchToolBar=O,e.CustomizedMenuWorkbenchToolBar=O=De([he(3,r.IMenuService),he(4,m.IContextKeyService),he(5,h.IContextMenuService),he(6,C.IKeybindingService),he(7,d.ICommandService),he(8,w.ITelemetryService)],O)}),define(oe[791],re([1,0,5,208,41,13,2,21,16,9,124,216,29,24,12,58,7,31,66,528]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.CustomizedMenuWorkbenchToolBar=e.InlineEditHintsContentWidget=e.InlineEditHintsWidget=void 0;let r=class extends y.Disposable{constructor(C,w,S){super(),this.editor=C,this.model=w,this.instantiationService=S,this.alwaysShowToolbar=(0,f.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).showToolbar==="always"),this.sessionPosition=void 0,this.position=(0,f.derived)(this,D=>{const I=this.model.read(D)?.model.ghostText.read(D);if(!this.alwaysShowToolbar.read(D)||!I||I.parts.length===0)return this.sessionPosition=void 0,null;const T=I.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==I.lineNumber&&(this.sessionPosition=void 0);const M=new b.Position(I.lineNumber,Math.min(T,this.sessionPosition?.column??Number.MAX_SAFE_INTEGER));return this.sessionPosition=M,M}),this._register((0,f.autorunWithStore)((D,I)=>{if(!this.model.read(D)||!this.alwaysShowToolbar.read(D))return;const M=I.add(this.instantiationService.createInstance(d,this.editor,!0,this.position));C.addContentWidget(M),I.add((0,y.toDisposable)(()=>C.removeContentWidget(M)))}))}};e.InlineEditHintsWidget=r,e.InlineEditHintsWidget=r=De([he(2,g.IInstantiationService)],r);let d=class extends y.Disposable{static{a=this}static{this._dropDownVisible=!1}static{this.id=0}constructor(C,w,S,D,I,T){super(),this.editor=C,this.withBorder=w,this._position=S,this._contextKeyService=I,this._menuService=T,this.id=`InlineEditHintsContentWidget${a.id++}`,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,c.h)("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[(0,c.h)("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(s.MenuId.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(D.createInstance(h,this.nodes.toolBar,this.editor,s.MenuId.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:M=>M.startsWith("primary")},actionViewItemProvider:(M,A)=>{if(M instanceof s.MenuItemAction)return D.createInstance(m,M,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility(M=>{a._dropDownVisible=M})),this._register((0,f.autorun)(M=>{this._position.read(M),this.editor.layoutContentWidget(this)})),this._register((0,f.autorun)(M=>{const A=[];for(const[R,N]of this.inlineCompletionsActionsMenus.getActions())for(const O of N)O instanceof s.MenuItemAction&&A.push(O);A.length>0&&A.unshift(new E.Separator),this.toolBar.setAdditionalSecondaryActions(A)}))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};e.InlineEditHintsContentWidget=d,e.InlineEditHintsContentWidget=d=a=De([he(3,g.IInstantiationService),he(4,i.IContextKeyService),he(5,s.IMenuService)],d);class m extends p.MenuEntryActionViewItem{updateLabel(){const C=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!C)return super.updateLabel();if(this.label){const w=(0,c.h)("div.keybinding").root;this._register(new k.KeybindingLabel(w,_.OS,{disableTitle:!0,...k.unthemedKeybindingLabelOptions})).set(C),this.label.textContent=this._action.label,this.label.appendChild(w),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let h=class extends n.WorkbenchToolBar{constructor(C,w,S,D,I,T,M,A,R,N){super(C,{resetMenu:S,...D},I,T,M,A,R,N),this.editor=w,this.menuId=S,this.options2=D,this.menuService=I,this.contextKeyService=T,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange(()=>this.updateToolbar())),this._store.add(this.editor.onDidChangeCursorPosition(()=>this.updateToolbar())),this.updateToolbar()}updateToolbar(){const C=[],w=[];(0,p.createAndFillInActionBarActions)(this.menu,this.options2?.menuOptions,{primary:C,secondary:w},this.options2?.toolbarOptions?.primaryGroup,this.options2?.toolbarOptions?.shouldInlineSubmenu,this.options2?.toolbarOptions?.useSeparatorsInPrimaryActions),w.push(...this.additionalActions),C.unshift(...this.prependedPrimaryActions),this.setActions(C,w)}setAdditionalSecondaryActions(C){(0,L.equals)(this.additionalActions,C,(w,S)=>w===S)||(this.additionalActions=C,this.updateToolbar())}};e.CustomizedMenuWorkbenchToolBar=h,e.CustomizedMenuWorkbenchToolBar=h=De([he(4,s.IMenuService),he(5,i.IContextKeyService),he(6,o.IContextMenuService),he(7,u.IKeybindingService),he(8,t.ICommandService),he(9,l.ITelemetryService)],h)}),define(oe[792],re([1,0,5,41,6,2,124,29,12,31,50,66,752,58]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenuMenuDelegate=e.ContextMenuService=void 0;let i=class extends L.Disposable{get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new s.ContextMenuHandler(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(u,l,a,r,d,m){super(),this.telemetryService=u,this.notificationService=l,this.contextViewService=a,this.keybindingService=r,this.menuService=d,this.contextKeyService=m,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new E.Emitter),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new E.Emitter)}configure(u){this.contextMenuHandler.configure(u)}showContextMenu(u){u=o.transform(u,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...u,onHide:l=>{u.onHide?.(l),this._onDidHideContextMenu.fire()}}),c.ModifierKeyEmitter.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};e.ContextMenuService=i,e.ContextMenuService=i=De([he(0,n.ITelemetryService),he(1,p.INotificationService),he(2,t.IContextViewService),he(3,b.IKeybindingService),he(4,f.IMenuService),he(5,_.IContextKeyService)],i);var o;(function(g){function u(a){return a&&a.menuId instanceof f.MenuId}function l(a,r,d){if(!u(a))return a;const{menuId:m,menuActionOptions:h,contextKeyService:v}=a;return{...a,getActions:()=>{const C=[];if(m){const w=r.getMenuActions(m,v??d,h);(0,y.createAndFillInContextMenuActions)(w,C)}return a.getActions?k.Separator.join(a.getActions(),C):C}}}g.transform=l})(o||(e.ContextMenuMenuDelegate=o={}))}),define(oe[793],re([1,0,5,6,3,7,214,25,2,46,16,126,232,208,87,97,22,392,98,141,440,11,175,14,8,63,60,21,13]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D){"use strict";var I;Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputTree=void 0;const T=c.$;class M{constructor(Q,X,G){this.index=Q,this.hasCheckbox=X,this._hidden=!1,this._init=new l.Lazy(()=>{const P=G.label??"",te=(0,a.parseLabelWithIcons)(P).text.trim(),se=G.ariaLabel||[P,this.saneDescription,this.saneDetail].map(ue=>(0,a.getCodiconAriaLabel)(ue)).filter(ue=>!!ue).join(", ");return{saneLabel:P,saneSortLabel:te,saneAriaLabel:se}}),this._saneDescription=G.description,this._saneTooltip=G.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(Q){this._element=Q}get hidden(){return this._hidden}set hidden(Q){this._hidden=Q}get saneDescription(){return this._saneDescription}set saneDescription(Q){this._saneDescription=Q}get saneDetail(){return this._saneDetail}set saneDetail(Q){this._saneDetail=Q}get saneTooltip(){return this._saneTooltip}set saneTooltip(Q){this._saneTooltip=Q}get labelHighlights(){return this._labelHighlights}set labelHighlights(Q){this._labelHighlights=Q}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(Q){this._descriptionHighlights=Q}get detailHighlights(){return this._detailHighlights}set detailHighlights(Q){this._detailHighlights=Q}}class A extends M{constructor(Q,X,G,P,te,se){super(Q,X,te),this.fireButtonTriggered=G,this._onChecked=P,this.item=te,this._separator=se,this._checked=!1,this.onChecked=X?k.Event.map(k.Event.filter(this._onChecked.event,ue=>ue.element===this),ue=>ue.checked):k.Event.None,this._saneDetail=te.detail,this._labelHighlights=te.highlights?.label,this._descriptionHighlights=te.highlights?.description,this._detailHighlights=te.highlights?.detail}get separator(){return this._separator}set separator(Q){this._separator=Q}get checked(){return this._checked}set checked(Q){Q!==this._checked&&(this._checked=Q,this._onChecked.fire({element:this,checked:Q}))}get checkboxDisabled(){return!!this.item.disabled}}var R;(function(Y){Y[Y.NONE=0]="NONE",Y[Y.MOUSE_HOVER=1]="MOUSE_HOVER",Y[Y.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(R||(R={}));class N extends M{constructor(Q,X,G){super(Q,!1,G),this.fireSeparatorButtonTriggered=X,this.separator=G,this.children=new Array,this.focusInsideSeparator=R.NONE}}class O{getHeight(Q){return Q instanceof N?30:Q.saneDetail?44:22}getTemplateId(Q){return Q instanceof A?W.ID:z.ID}}class x{getWidgetAriaLabel(){return(0,E.localize)(1070,"Quick Input")}getAriaLabel(Q){return Q.separator?.label?`${Q.saneAriaLabel}, ${Q.separator.label}`:Q.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(Q){return Q.hasCheckbox?"checkbox":"option"}isChecked(Q){if(!(!Q.hasCheckbox||!(Q instanceof A)))return{get value(){return Q.checked},onDidChange:X=>Q.onChecked(()=>X())}}}class F{constructor(Q){this.hoverDelegate=Q}renderTemplate(Q){const X=Object.create(null);X.toDisposeElement=new _.DisposableStore,X.toDisposeTemplate=new _.DisposableStore,X.entry=c.append(Q,T(".quick-input-list-entry"));const G=c.append(X.entry,T("label.quick-input-list-label"));X.toDisposeTemplate.add(c.addStandardDisposableListener(G,c.EventType.CLICK,pe=>{X.checkbox.offsetParent||pe.preventDefault()})),X.checkbox=c.append(G,T("input.quick-input-list-checkbox")),X.checkbox.type="checkbox";const P=c.append(G,T(".quick-input-list-rows")),te=c.append(P,T(".quick-input-list-row")),se=c.append(P,T(".quick-input-list-row"));X.label=new s.IconLabel(te,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),X.toDisposeTemplate.add(X.label),X.icon=c.prepend(X.label.element,T(".quick-input-list-icon"));const ue=c.append(te,T(".quick-input-list-entry-keybinding"));X.keybinding=new t.KeybindingLabel(ue,p.OS),X.toDisposeTemplate.add(X.keybinding);const ge=c.append(se,T(".quick-input-list-label-meta"));return X.detail=new s.IconLabel(ge,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),X.toDisposeTemplate.add(X.detail),X.separator=c.append(X.entry,T(".quick-input-list-separator")),X.actionBar=new i.ActionBar(X.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),X.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),X.toDisposeTemplate.add(X.actionBar),X}disposeTemplate(Q){Q.toDisposeElement.dispose(),Q.toDisposeTemplate.dispose()}disposeElement(Q,X,G){G.toDisposeElement.clear(),G.actionBar.clear()}}let W=class extends F{static{I=this}static{this.ID="quickpickitem"}constructor(Q,X){super(Q),this.themeService=X,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return I.ID}renderTemplate(Q){const X=super.renderTemplate(Q);return X.toDisposeTemplate.add(c.addStandardDisposableListener(X.checkbox,c.EventType.CHANGE,G=>{X.element.checked=X.checkbox.checked})),X}renderElement(Q,X,G){const P=Q.element;G.element=P,P.element=G.entry??void 0;const te=P.item;G.checkbox.checked=P.checked,G.toDisposeElement.add(P.onChecked(ne=>G.checkbox.checked=ne)),G.checkbox.disabled=P.checkboxDisabled;const{labelHighlights:se,descriptionHighlights:ue,detailHighlights:ge}=P;if(te.iconPath){const ne=(0,o.isDark)(this.themeService.getColorTheme().type)?te.iconPath.dark:te.iconPath.light??te.iconPath.dark,J=g.URI.revive(ne);G.icon.className="quick-input-list-icon",G.icon.style.backgroundImage=c.asCSSUrl(J)}else G.icon.style.backgroundImage="",G.icon.className=te.iconClass?`quick-input-list-icon ${te.iconClass}`:"";let pe;!P.saneTooltip&&P.saneDescription&&(pe={markdown:{value:P.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:P.saneDescription});const ce={matches:se||[],descriptionTitle:pe,descriptionMatches:ue||[],labelEscapeNewLines:!0};if(ce.extraClasses=te.iconClasses,ce.italic=te.italic,ce.strikethrough=te.strikethrough,G.entry.classList.remove("quick-input-list-separator-as-item"),G.label.setLabel(P.saneLabel,P.saneDescription,ce),G.keybinding.set(te.keybinding),P.saneDetail){let ne;P.saneTooltip||(ne={markdown:{value:P.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:P.saneDetail}),G.detail.element.style.display="",G.detail.setLabel(P.saneDetail,void 0,{matches:ge,title:ne,labelEscapeNewLines:!0})}else G.detail.element.style.display="none";P.separator?.label?(G.separator.textContent=P.separator.label,G.separator.style.display="",this.addItemWithSeparator(P)):G.separator.style.display="none",G.entry.classList.toggle("quick-input-list-separator-border",!!P.separator);const ie=te.buttons;ie&&ie.length?(G.actionBar.push(ie.map((ne,J)=>(0,u.quickInputButtonToAction)(ne,`id-${J}`,()=>P.fireButtonTriggered({button:ne,item:P.item}))),{icon:!0,label:!1}),G.entry.classList.add("has-actions")):G.entry.classList.remove("has-actions")}disposeElement(Q,X,G){this.removeItemWithSeparator(Q.element),super.disposeElement(Q,X,G)}isItemWithSeparatorVisible(Q){return this._itemsWithSeparatorsFrequency.has(Q)}addItemWithSeparator(Q){this._itemsWithSeparatorsFrequency.set(Q,(this._itemsWithSeparatorsFrequency.get(Q)||0)+1)}removeItemWithSeparator(Q){const X=this._itemsWithSeparatorsFrequency.get(Q)||0;X>1?this._itemsWithSeparatorsFrequency.set(Q,X-1):this._itemsWithSeparatorsFrequency.delete(Q)}};W=I=De([he(1,f.IThemeService)],W);class z extends F{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static{this.ID="quickpickseparator"}get templateId(){return z.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(Q){return this._visibleSeparatorsFrequency.has(Q)}renderElement(Q,X,G){const P=Q.element;G.element=P,P.element=G.entry??void 0,P.element.classList.toggle("focus-inside",!!P.focusInsideSeparator);const te=P.separator,{labelHighlights:se,descriptionHighlights:ue,detailHighlights:ge}=P;G.icon.style.backgroundImage="",G.icon.className="";let pe;!P.saneTooltip&&P.saneDescription&&(pe={markdown:{value:P.saneDescription,supportThemeIcons:!0},markdownNotSupportedFallback:P.saneDescription});const ce={matches:se||[],descriptionTitle:pe,descriptionMatches:ue||[],labelEscapeNewLines:!0};if(G.entry.classList.add("quick-input-list-separator-as-item"),G.label.setLabel(P.saneLabel,P.saneDescription,ce),P.saneDetail){let ne;P.saneTooltip||(ne={markdown:{value:P.saneDetail,supportThemeIcons:!0},markdownNotSupportedFallback:P.saneDetail}),G.detail.element.style.display="",G.detail.setLabel(P.saneDetail,void 0,{matches:ge,title:ne,labelEscapeNewLines:!0})}else G.detail.element.style.display="none";G.separator.style.display="none",G.entry.classList.add("quick-input-list-separator-border");const ie=te.buttons;ie&&ie.length?(G.actionBar.push(ie.map((ne,J)=>(0,u.quickInputButtonToAction)(ne,`id-${J}`,()=>P.fireSeparatorButtonTriggered({button:ne,separator:P.separator}))),{icon:!0,label:!1}),G.entry.classList.add("has-actions")):G.entry.classList.remove("has-actions"),this.addSeparator(P)}disposeElement(Q,X,G){this.removeSeparator(Q.element),this.isSeparatorVisible(Q.element)||Q.element.element?.classList.remove("focus-inside"),super.disposeElement(Q,X,G)}addSeparator(Q){this._visibleSeparatorsFrequency.set(Q,(this._visibleSeparatorsFrequency.get(Q)||0)+1)}removeSeparator(Q){const X=this._visibleSeparatorsFrequency.get(Q)||0;X>1?this._visibleSeparatorsFrequency.set(Q,X-1):this._visibleSeparatorsFrequency.delete(Q)}}let q=class extends _.Disposable{constructor(Q,X,G,P,te,se){super(),this.parent=Q,this.hoverDelegate=X,this.linkOpenerDelegate=G,this.accessibilityService=se,this._onKeyDown=new k.Emitter,this._onLeave=new k.Emitter,this.onLeave=this._onLeave.event,this._visibleCountObservable=(0,S.observableValue)("VisibleCount",0),this.onChangedVisibleCount=k.Event.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=(0,S.observableValue)("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=k.Event.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=(0,S.observableValue)("CheckedCount",0),this.onChangedCheckedCount=k.Event.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=(0,S.observableValueOpts)({equalsFn:D.equals},new Array),this.onChangedCheckedElements=k.Event.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new k.Emitter,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new k.Emitter,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new k.Emitter,this._elementCheckedEventBufferer=new k.EventBufferer,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new _.DisposableStore),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._shouldLoop=!0,this._container=c.append(this.parent,T(".quick-input-list")),this._separatorRenderer=new z(X),this._itemRenderer=te.createInstance(W,X),this._tree=this._register(te.createInstance(y.WorkbenchObjectTree,"QuickInput",this._container,new O,[this._itemRenderer,this._separatorRenderer],{accessibilityProvider:new x,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:m.RenderIndentGuides.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=P,this._registerListeners()}get onDidChangeFocus(){return k.Event.map(this._tree.onDidChangeFocus,Q=>Q.elements.filter(X=>X instanceof A).map(X=>X.item),this._store)}get onDidChangeSelection(){return k.Event.map(this._tree.onDidChangeSelection,Q=>({items:Q.elements.filter(X=>X instanceof A).map(X=>X.item),event:Q.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(Q){this._container.style.display=Q?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(Q){this._tree.scrollTop=Q}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(Q){this._tree.ariaLabel=Q??""}set enabled(Q){this._tree.getHTMLElement().style.pointerEvents=Q?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(Q){this._matchOnDescription=Q}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(Q){this._matchOnDetail=Q}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(Q){this._matchOnLabel=Q}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(Q){this._matchOnLabelMode=Q}get sortByLabel(){return this._sortByLabel}set sortByLabel(Q){this._sortByLabel=Q}get shouldLoop(){return this._shouldLoop}set shouldLoop(Q){this._shouldLoop=Q}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(Q=>{const X=new b.StandardKeyboardEvent(Q);switch(X.keyCode){case 10:this.toggleCheckbox();break}this._onKeyDown.fire(X)}))}_registerOnContainerClick(){this._register(c.addDisposableListener(this._container,c.EventType.CLICK,Q=>{(Q.x||Q.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(c.addDisposableListener(this._container,c.EventType.AUXCLICK,Q=>{Q.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const Q=this._itemElements.filter(X=>!X.hidden).length;this._visibleCountObservable.set(Q,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(Q,X)=>X)(Q=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(Q=>{Q.element&&(Q.browserEvent.preventDefault(),this._tree.setSelection([Q.element]))}))}_registerHoverListeners(){const Q=this._register(new h.ThrottledDelayer(this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async X=>{if(c.isHTMLAnchorElement(X.browserEvent.target)){Q.cancel();return}if(!(!c.isHTMLAnchorElement(X.browserEvent.relatedTarget)&&c.isAncestor(X.browserEvent.relatedTarget,X.element?.element)))try{await Q.trigger(async()=>{X.element instanceof A&&this.showHover(X.element)})}catch(G){if(!(0,v.isCancellationError)(G))throw G}})),this._register(this._tree.onMouseOut(X=>{c.isAncestor(X.browserEvent.relatedTarget,X.element?.element)||Q.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(Q=>{const X=Q.elements[0]?this._tree.getParentElement(Q.elements[0]):null;for(const G of this._separatorRenderer.visibleSeparators){const P=G===X;!!(G.focusInsideSeparator&R.ACTIVE_ITEM)!==P&&(P?G.focusInsideSeparator|=R.ACTIVE_ITEM:G.focusInsideSeparator&=~R.ACTIVE_ITEM,this._tree.rerender(G))}})),this._register(this._tree.onMouseOver(Q=>{const X=Q.element?this._tree.getParentElement(Q.element):null;for(const G of this._separatorRenderer.visibleSeparators){if(G!==X)continue;!!(G.focusInsideSeparator&R.MOUSE_HOVER)||(G.focusInsideSeparator|=R.MOUSE_HOVER,this._tree.rerender(G))}})),this._register(this._tree.onMouseOut(Q=>{const X=Q.element?this._tree.getParentElement(Q.element):null;for(const G of this._separatorRenderer.visibleSeparators){if(G!==X)continue;!!(G.focusInsideSeparator&R.MOUSE_HOVER)&&(G.focusInsideSeparator&=~R.MOUSE_HOVER,this._tree.rerender(G))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(Q=>{const X=Q.elements.filter(G=>G instanceof A);X.length!==Q.elements.length&&(Q.elements.length===1&&Q.elements[0]instanceof N&&(this._tree.setFocus([Q.elements[0].children[0]]),this._tree.reveal(Q.elements[0],0)),this._tree.setSelection(X))}))}setAllVisibleChecked(Q){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(X=>{!X.hidden&&!X.checkboxDisabled&&(X.checked=Q)})})}setElements(Q){this._elementDisposable.clear(),this._inputElements=Q,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let X;this._itemElements=new Array,this._elementTree=Q.reduce((G,P,te)=>{let se;if(P.type==="separator"){if(!P.buttons)return G;X=new N(te,ue=>this._onSeparatorButtonTriggered.fire(ue),P),se=X}else{const ue=te>0?Q[te-1]:void 0;let ge;ue&&ue.type==="separator"&&!ue.buttons&&(X=void 0,ge=ue);const pe=new A(te,this._hasCheckboxes,ce=>this._onButtonTriggered.fire(ce),this._elementChecked,P,ge);if(this._itemElements.push(pe),X)return X.children.push(pe),G;se=pe}return G.push(se),G},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const G=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),P=G?.parentNode;if(G&&P){const te=G.nextSibling;G.remove(),P.insertBefore(G,te)}},0)}setFocusedElements(Q){const X=Q.map(G=>this._itemElements.find(P=>P.item===G)).filter(G=>!!G).filter(G=>!G.hidden);if(this._tree.setFocus(X),Q.length>0){const G=this._tree.getFocus()[0];G&&this._tree.reveal(G)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(Q){const X=Q.map(G=>this._itemElements.find(P=>P.item===G)).filter(G=>!!G);this._tree.setSelection(X)}getCheckedElements(){return this._itemElements.filter(Q=>Q.checked).map(Q=>Q.item)}setCheckedElements(Q){this._elementCheckedEventBufferer.bufferEvents(()=>{const X=new Set;for(const G of Q)X.add(G);for(const G of this._itemElements)G.checked=X.has(G.item)})}focus(Q){if(this._itemElements.length)switch(Q===C.QuickPickFocus.Second&&this._itemElements.length<2&&(Q=C.QuickPickFocus.First),Q){case C.QuickPickFocus.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,X=>X.element instanceof A);break;case C.QuickPickFocus.Second:{this._tree.scrollTop=0;let X=!1;this._tree.focusFirst(void 0,G=>G.element instanceof A?X?!0:(X=!X,!1):!1);break}case C.QuickPickFocus.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,X=>X.element instanceof A);break;case C.QuickPickFocus.Next:{const X=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,P=>P.element instanceof A?(this._tree.reveal(P.element),!0):!1);const G=this._tree.getFocus();X.length&&X[0]===G[0]&&X[0]===this._itemElements[this._itemElements.length-1]&&this._onLeave.fire();break}case C.QuickPickFocus.Previous:{const X=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,P=>{if(!(P.element instanceof A))return!1;const te=this._tree.getParentElement(P.element);return te===null||te.children[0]!==P.element?this._tree.reveal(P.element):this._tree.reveal(te),!0});const G=this._tree.getFocus();X.length&&X[0]===G[0]&&X[0]===this._itemElements[0]&&this._onLeave.fire();break}case C.QuickPickFocus.NextPage:this._tree.focusNextPage(void 0,X=>X.element instanceof A?(this._tree.reveal(X.element),!0):!1);break;case C.QuickPickFocus.PreviousPage:this._tree.focusPreviousPage(void 0,X=>{if(!(X.element instanceof A))return!1;const G=this._tree.getParentElement(X.element);return G===null||G.children[0]!==X.element?this._tree.reveal(X.element):this._tree.reveal(G),!0});break;case C.QuickPickFocus.NextSeparator:{let X=!1;const G=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,te=>{if(X)return!0;if(te.element instanceof N)X=!0,this._separatorRenderer.isSeparatorVisible(te.element)?this._tree.reveal(te.element.children[0]):this._tree.reveal(te.element,0);else if(te.element instanceof A){if(te.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(te.element)?this._tree.reveal(te.element):this._tree.reveal(te.element,0),!0;if(te.element===this._elementTree[0])return this._tree.reveal(te.element,0),!0}return!1});const P=this._tree.getFocus()[0];G===P&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,te=>te.element instanceof A));break}case C.QuickPickFocus.PreviousSeparator:{let X,G=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,P=>{if(P.element instanceof N)G?X||(this._separatorRenderer.isSeparatorVisible(P.element)?this._tree.reveal(P.element):this._tree.reveal(P.element,0),X=P.element.children[0]):G=!0;else if(P.element instanceof A&&!X){if(P.element.separator)this._itemRenderer.isItemWithSeparatorVisible(P.element)?this._tree.reveal(P.element):this._tree.reveal(P.element,0),X=P.element;else if(P.element===this._elementTree[0])return this._tree.reveal(P.element,0),!0}return!1}),X&&this._tree.setFocus([X]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(Q){this._tree.getHTMLElement().style.maxHeight=Q?`${Math.floor(Q/44)*44+6}px`:"",this._tree.layout()}filter(Q){if(!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const X=Q;if(Q=Q.trim(),!Q||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(se=>{se.labelHighlights=void 0,se.descriptionHighlights=void 0,se.detailHighlights=void 0,se.hidden=!1;const ue=se.index&&this._inputElements[se.index-1];se.item&&(se.separator=ue&&ue.type==="separator"&&!ue.buttons?ue:void 0)});else{let se;this._elementTree.forEach(ue=>{let ge;this.matchOnLabelMode==="fuzzy"?ge=this.matchOnLabel?(0,a.matchesFuzzyIconAware)(Q,(0,a.parseLabelWithIcons)(ue.saneLabel))??void 0:void 0:ge=this.matchOnLabel?H(X,(0,a.parseLabelWithIcons)(ue.saneLabel))??void 0:void 0;const pe=this.matchOnDescription?(0,a.matchesFuzzyIconAware)(Q,(0,a.parseLabelWithIcons)(ue.saneDescription||""))??void 0:void 0,ce=this.matchOnDetail?(0,a.matchesFuzzyIconAware)(Q,(0,a.parseLabelWithIcons)(ue.saneDetail||""))??void 0:void 0;if(ge||pe||ce?(ue.labelHighlights=ge,ue.descriptionHighlights=pe,ue.detailHighlights=ce,ue.hidden=!1):(ue.labelHighlights=void 0,ue.descriptionHighlights=void 0,ue.detailHighlights=void 0,ue.hidden=ue.item?!ue.item.alwaysShow:!0),ue.item?ue.separator=void 0:ue.separator&&(ue.hidden=!0),!this.sortByLabel){const ie=ue.index&&this._inputElements[ue.index-1];se=ie&&ie.type==="separator"?ie:se,se&&!ue.hidden&&(ue.separator=se,se=void 0)}})}const G=this._elementTree.filter(se=>!se.hidden);if(this.sortByLabel&&Q){const se=Q.toLowerCase();G.sort((ue,ge)=>U(ue,ge,se))}let P;const te=G.reduce((se,ue,ge)=>(ue instanceof A?P?P.children.push(ue):se.push(ue):ue instanceof N&&(ue.children=[],P=ue,se.push(ue)),se),new Array);return this._setElementsToTree(te),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const Q=this._tree.getFocus().filter(G=>G instanceof A),X=this._allVisibleChecked(Q);for(const G of Q)G.checkboxDisabled||(G.checked=!X)})}style(Q){this._tree.style(Q)}toggleHover(){const Q=this._tree.getFocus()[0];if(!Q?.saneTooltip||!(Q instanceof A))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(Q);const X=new _.DisposableStore;X.add(this._tree.onDidChangeFocus(G=>{G.elements[0]instanceof A&&this.showHover(G.elements[0])})),this._lastHover&&X.add(this._lastHover),this._elementDisposable.add(X)}_setElementsToTree(Q){const X=new Array;for(const G of Q)G instanceof N?X.push({element:G,collapsible:!1,collapsed:!1,children:G.children.map(P=>({element:P,collapsible:!1,collapsed:!1}))}):X.push({element:G,collapsible:!1,collapsed:!1});this._tree.setChildren(null,X)}_allVisibleChecked(Q,X=!0){for(let G=0,P=Q.length;G<P;G++){const te=Q[G];if(!te.hidden)if(te.checked)X=!0;else return!1}return X}_updateCheckedObservables(){this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),void 0);const Q=this._itemElements.filter(X=>X.checked).length;this._checkedCountObservable.set(Q,void 0),this._checkedElementsObservable.set(this.getCheckedElements(),void 0)}showHover(Q){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!Q.element||!Q.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:Q.saneTooltip,target:Q.element,linkHandler:X=>{this.linkOpenerDelegate(X)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:1}},!1))}};e.QuickInputTree=q,De([n.memoize],q.prototype,"onDidChangeFocus",null),De([n.memoize],q.prototype,"onDidChangeSelection",null),e.QuickInputTree=q=De([he(4,L.IInstantiationService),he(5,w.IAccessibilityService)],q);function H(Y,Q){const{text:X,iconOffsets:G}=Q;if(!G||G.length===0)return K(Y,X);const P=(0,d.ltrim)(X," "),te=X.length-P.length,se=K(Y,P);if(se)for(const ue of se){const ge=G[ue.start+te]+te;ue.start+=ge,ue.end+=ge}return se}function K(Y,Q){const X=Q.toLowerCase().indexOf(Y.toLowerCase());return X!==-1?[{start:X,end:X+Y.length}]:null}function U(Y,Q,X){const G=Y.labelHighlights||[],P=Q.labelHighlights||[];return G.length&&!P.length?-1:!G.length&&P.length?1:G.length===0&&P.length===0?0:(0,r.compareAnything)(Y.saneSortLabel,Q.saneSortLabel,X)}}),define(oe[794],re([1,0,5,87,231,312,476,18,6,2,110,3,63,696,270,119,52,7,793,12,710]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputController=void 0;const d=c.$;let m=class extends b.Disposable{static{r=this}static{this.MAX_WIDTH=600}get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(v,C,w,S){super(),this.options=v,this.layoutService=C,this.instantiationService=w,this.contextKeyService=S,this.enabled=!0,this.onDidAcceptEmitter=this._register(new _.Emitter),this.onDidCustomEmitter=this._register(new _.Emitter),this.onDidTriggerButtonEmitter=this._register(new _.Emitter),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new _.Emitter),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new _.Emitter),this.onHide=this.onHideEmitter.event,this.inQuickInputContext=i.InQuickInputContextKey.bindTo(this.contextKeyService),this.quickInputTypeContext=i.QuickInputTypeContextKey.bindTo(this.contextKeyService),this.endOfQuickInputBoxContext=i.EndOfQuickInputBoxContextKey.bindTo(this.contextKeyService),this.idPrefix=v.idPrefix,this._container=v.container,this.styles=v.styles,this._register(_.Event.runAndSubscribe(c.onDidRegisterWindow,({window:D,disposables:I})=>this.registerKeyModsListeners(D,I),{window:g.mainWindow,disposables:this._store})),this._register(c.onWillUnregisterWindow(D=>{this.ui&&c.getWindow(this.ui.container)===D&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))}))}registerKeyModsListeners(v,C){const w=S=>{this.keyMods.ctrlCmd=S.ctrlKey||S.metaKey,this.keyMods.alt=S.altKey};for(const S of[c.EventType.KEY_DOWN,c.EventType.KEY_UP,c.EventType.MOUSE_DOWN])C.add(c.addDisposableListener(v,S,w,!0))}getUI(v){if(this.ui)return v&&c.getWindow(this._container)!==c.getWindow(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const C=c.append(this._container,d(".quick-input-widget.show-file-icons"));C.tabIndex=-1,C.style.display="none";const w=c.createStyleSheet(C),S=c.append(C,d(".quick-input-titlebar")),D=this._register(new k.ActionBar(S,{hoverDelegate:this.options.hoverDelegate}));D.domNode.classList.add("quick-input-left-action-bar");const I=c.append(S,d(".quick-input-title")),T=this._register(new k.ActionBar(S,{hoverDelegate:this.options.hoverDelegate}));T.domNode.classList.add("quick-input-right-action-bar");const M=c.append(C,d(".quick-input-header")),A=c.append(M,d("input.quick-input-check-all"));A.type="checkbox",A.setAttribute("aria-label",(0,n.localize)(1071,"Toggle all checkboxes")),this._register(c.addStandardDisposableListener(A,c.EventType.CHANGE,pe=>{const ce=A.checked;ue.setAllVisibleChecked(ce)})),this._register(c.addDisposableListener(A,c.EventType.CLICK,pe=>{(pe.x||pe.y)&&x.setFocus()}));const R=c.append(M,d(".quick-input-description")),N=c.append(M,d(".quick-input-and-message")),O=c.append(N,d(".quick-input-filter")),x=this._register(new t.QuickInputBox(O,this.styles.inputBox,this.styles.toggle));x.setAttribute("aria-describedby",`${this.idPrefix}message`);const F=c.append(O,d(".quick-input-visible-count"));F.setAttribute("aria-live","polite"),F.setAttribute("aria-atomic","true");const W=new L.CountBadge(F,{countFormat:(0,n.localize)(1072,"{0} Results")},this.styles.countBadge),z=c.append(O,d(".quick-input-count"));z.setAttribute("aria-live","polite");const q=new L.CountBadge(z,{countFormat:(0,n.localize)(1073,"{0} Selected")},this.styles.countBadge),H=this._register(new k.ActionBar(M,{hoverDelegate:this.options.hoverDelegate}));H.domNode.classList.add("quick-input-inline-action-bar");const K=c.append(M,d(".quick-input-action")),U=this._register(new E.Button(K,this.styles.button));U.label=(0,n.localize)(1074,"OK"),this._register(U.onDidClick(pe=>{this.onDidAcceptEmitter.fire()}));const Y=c.append(M,d(".quick-input-action")),Q=this._register(new E.Button(Y,{...this.styles.button,supportIcons:!0}));Q.label=(0,n.localize)(1075,"Custom"),this._register(Q.onDidClick(pe=>{this.onDidCustomEmitter.fire()}));const X=c.append(N,d(`#${this.idPrefix}message.quick-input-message`)),G=this._register(new y.ProgressBar(C,this.styles.progressBar));G.getContainer().classList.add("quick-input-progress");const P=c.append(C,d(".quick-input-html-widget"));P.tabIndex=-1;const te=c.append(C,d(".quick-input-description")),se=this.idPrefix+"list",ue=this._register(this.instantiationService.createInstance(l.QuickInputTree,C,this.options.hoverDelegate,this.options.linkOpenerDelegate,se));x.setAttribute("aria-controls",se),this._register(ue.onDidChangeFocus(()=>{x.setAttribute("aria-activedescendant",ue.getActiveDescendant()??"")})),this._register(ue.onChangedAllVisibleChecked(pe=>{A.checked=pe})),this._register(ue.onChangedVisibleCount(pe=>{W.setCount(pe)})),this._register(ue.onChangedCheckedCount(pe=>{q.setCount(pe)})),this._register(ue.onLeave(()=>{setTimeout(()=>{this.controller&&(x.setFocus(),this.controller instanceof i.QuickPick&&this.controller.canSelectMany&&ue.clearFocus())},0)}));const ge=c.trackFocus(C);return this._register(ge),this._register(c.addDisposableListener(C,c.EventType.FOCUS,pe=>{const ce=this.getUI();if(c.isAncestor(pe.relatedTarget,ce.inputContainer)){const ie=ce.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ie&&this.endOfQuickInputBoxContext.set(ie)}c.isAncestor(pe.relatedTarget,ce.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=c.isHTMLElement(pe.relatedTarget)?pe.relatedTarget:void 0)},!0)),this._register(ge.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(s.QuickInputHideReason.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(x.onKeyDown(pe=>{const ce=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ce&&this.endOfQuickInputBoxContext.set(ce)})),this._register(c.addDisposableListener(C,c.EventType.FOCUS,pe=>{x.setFocus()})),this._register(c.addStandardDisposableListener(C,c.EventType.KEY_DOWN,pe=>{if(!c.isAncestor(pe.target,P))switch(pe.keyCode){case 3:c.EventHelper.stop(pe,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case 9:c.EventHelper.stop(pe,!0),this.hide(s.QuickInputHideReason.Gesture);break;case 2:if(!pe.altKey&&!pe.ctrlKey&&!pe.metaKey){const ce=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(C.classList.contains("show-checkboxes")?ce.push("input"):ce.push("input[type=text]"),this.getUI().list.displayed&&ce.push(".monaco-list"),this.getUI().message&&ce.push(".quick-input-message a"),this.getUI().widget){if(c.isAncestor(pe.target,this.getUI().widget))break;ce.push(".quick-input-html-widget")}const ie=C.querySelectorAll(ce.join(", "));pe.shiftKey&&pe.target===ie[0]?(c.EventHelper.stop(pe,!0),ue.clearFocus()):!pe.shiftKey&&c.isAncestor(pe.target,ie[ie.length-1])&&(c.EventHelper.stop(pe,!0),ie[0].focus())}break;case 10:pe.ctrlKey&&(c.EventHelper.stop(pe,!0),this.getUI().list.toggleHover());break}})),this.ui={container:C,styleSheet:w,leftActionBar:D,titleBar:S,title:I,description1:te,description2:R,widget:P,rightActionBar:T,inlineActionBar:H,checkAll:A,inputContainer:N,filterContainer:O,inputBox:x,visibleCountContainer:F,visibleCount:W,countContainer:z,count:q,okContainer:K,ok:U,message:X,customButtonContainer:Y,customButton:Q,list:ue,progressBar:G,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:pe=>this.show(pe),hide:()=>this.hide(),setVisibilities:pe=>this.setVisibilities(pe),setEnabled:pe=>this.setEnabled(pe),setContextKey:pe=>this.options.setContextKey(pe),linkOpenerDelegate:pe=>this.options.linkOpenerDelegate(pe)},this.updateStyles(),this.ui}reparentUI(v){this.ui&&(this._container=v,c.append(this._container,this.ui.container))}pick(v,C={},w=f.CancellationToken.None){return new Promise((S,D)=>{let I=R=>{I=S,C.onKeyMods?.(T.keyMods),S(R)};if(w.isCancellationRequested){I(void 0);return}const T=this.createQuickPick();let M;const A=[T,T.onDidAccept(()=>{if(T.canSelectMany)I(T.selectedItems.slice()),T.hide();else{const R=T.activeItems[0];R&&(I(R),T.hide())}}),T.onDidChangeActive(R=>{const N=R[0];N&&C.onDidFocus&&C.onDidFocus(N)}),T.onDidChangeSelection(R=>{if(!T.canSelectMany){const N=R[0];N&&(I(N),T.hide())}}),T.onDidTriggerItemButton(R=>C.onDidTriggerItemButton&&C.onDidTriggerItemButton({...R,removeItem:()=>{const N=T.items.indexOf(R.item);if(N!==-1){const O=T.items.slice(),x=O.splice(N,1),F=T.activeItems.filter(z=>z!==x[0]),W=T.keepScrollPosition;T.keepScrollPosition=!0,T.items=O,F&&(T.activeItems=F),T.keepScrollPosition=W}}})),T.onDidTriggerSeparatorButton(R=>C.onDidTriggerSeparatorButton?.(R)),T.onDidChangeValue(R=>{M&&!R&&(T.activeItems.length!==1||T.activeItems[0]!==M)&&(T.activeItems=[M])}),w.onCancellationRequested(()=>{T.hide()}),T.onDidHide(()=>{(0,b.dispose)(A),I(void 0)})];T.title=C.title,T.canSelectMany=!!C.canPickMany,T.placeholder=C.placeHolder,T.ignoreFocusOut=!!C.ignoreFocusLost,T.matchOnDescription=!!C.matchOnDescription,T.matchOnDetail=!!C.matchOnDetail,T.matchOnLabel=C.matchOnLabel===void 0||C.matchOnLabel,T.quickNavigate=C.quickNavigate,T.hideInput=!!C.hideInput,T.contextKey=C.contextKey,T.busy=!0,Promise.all([v,C.activeItem]).then(([R,N])=>{M=N,T.busy=!1,T.items=R,T.canSelectMany&&(T.selectedItems=R.filter(O=>O.type!=="separator"&&O.picked)),M&&(T.activeItems=[M])}),T.show(),Promise.resolve(v).then(void 0,R=>{D(R),T.hide()})})}createQuickPick(){const v=this.getUI(!0);return new i.QuickPick(v)}createInputBox(){const v=this.getUI(!0);return new i.InputBox(v)}show(v){const C=this.getUI(!0);this.onShowEmitter.fire();const w=this.controller;this.controller=v,w?.didHide(),this.setEnabled(!0),C.leftActionBar.clear(),C.title.textContent="",C.description1.textContent="",C.description2.textContent="",c.reset(C.widget),C.rightActionBar.clear(),C.inlineActionBar.clear(),C.checkAll.checked=!1,C.inputBox.placeholder="",C.inputBox.password=!1,C.inputBox.showDecoration(p.default.Ignore),C.visibleCount.setCount(0),C.count.setCount(0),c.reset(C.message),C.progressBar.stop(),C.list.setElements([]),C.list.matchOnDescription=!1,C.list.matchOnDetail=!1,C.list.matchOnLabel=!0,C.list.sortByLabel=!0,C.ignoreFocusOut=!1,C.inputBox.toggles=void 0;const S=this.options.backKeybindingLabel();i.backButton.tooltip=S?(0,n.localize)(1076,"Back ({0})",S):(0,n.localize)(1077,"Back"),C.container.style.display="",this.updateLayout(),C.inputBox.setFocus(),this.quickInputTypeContext.set(v.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(v){const C=this.getUI();C.title.style.display=v.title?"":"none",C.description1.style.display=v.description&&(v.inputBox||v.checkAll)?"":"none",C.description2.style.display=v.description&&!(v.inputBox||v.checkAll)?"":"none",C.checkAll.style.display=v.checkAll?"":"none",C.inputContainer.style.display=v.inputBox?"":"none",C.filterContainer.style.display=v.inputBox?"":"none",C.visibleCountContainer.style.display=v.visibleCount?"":"none",C.countContainer.style.display=v.count?"":"none",C.okContainer.style.display=v.ok?"":"none",C.customButtonContainer.style.display=v.customButton?"":"none",C.message.style.display=v.message?"":"none",C.progressBar.getContainer().style.display=v.progressBar?"":"none",C.list.displayed=!!v.list,C.container.classList.toggle("show-checkboxes",!!v.checkBox),C.container.classList.toggle("hidden-input",!v.inputBox&&!v.description),this.updateLayout()}setEnabled(v){if(v!==this.enabled){this.enabled=v;for(const C of this.getUI().leftActionBar.viewItems)C.action.enabled=v;for(const C of this.getUI().rightActionBar.viewItems)C.action.enabled=v;this.getUI().checkAll.disabled=!v,this.getUI().inputBox.enabled=v,this.getUI().ok.enabled=v,this.getUI().list.enabled=v}}hide(v){const C=this.controller;if(!C)return;C.willHide(v);const w=this.ui?.container,S=w&&!c.isAncestorOfActiveElement(w);if(this.controller=null,this.onHideEmitter.fire(),w&&(w.style.display="none"),!S){let D=this.previousFocusElement;for(;D&&!D.offsetParent;)D=D.parentElement??void 0;D?.offsetParent?(D.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}C.didHide(v)}layout(v,C){this.dimension=v,this.titleBarOffset=C,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){this.ui.container.style.top=`${this.titleBarOffset}px`;const v=this.ui.container.style,C=Math.min(this.dimension.width*.62,r.MAX_WIDTH);v.width=C+"px",v.marginLeft="-"+C/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(v){this.styles=v,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:v,quickInputBackground:C,quickInputForeground:w,widgetBorder:S,widgetShadow:D}=this.styles.widget;this.ui.titleBar.style.backgroundColor=v??"",this.ui.container.style.backgroundColor=C??"",this.ui.container.style.color=w??"",this.ui.container.style.border=S?`1px solid ${S}`:"",this.ui.container.style.boxShadow=D?`0 0 8px 2px ${D}`:"",this.ui.list.style(this.styles.list);const I=[];this.styles.pickerGroup.pickerGroupBorder&&I.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&I.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&I.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(I.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&I.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&I.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&I.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&I.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&I.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),I.push("}"));const T=I.join(`
`);T!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=T)}}};e.QuickInputController=m,e.QuickInputController=m=r=De([he(1,o.ILayoutService),he(2,u.IInstantiationService),he(3,a.IContextKeyService)],m)}),define(oe[795],re([1,0,18,6,12,7,119,62,713,109,32,25,270,794,27,5]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputService=void 0;let g=class extends n.Themable{get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(_.QuickAccessController))),this._quickAccess}constructor(l,a,r,d,m){super(r),this.instantiationService=l,this.contextKeyService=a,this.layoutService=d,this.configurationService=m,this._onShow=this._register(new k.Emitter),this._onHide=this._register(new k.Emitter),this.contexts=new Map}createController(l=this.layoutService,a){const r={idPrefix:"quickInput_",container:l.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:m=>this.setContextKey(m),linkOpenerDelegate:m=>{this.instantiationService.invokeFunction(h=>{h.get(f.IOpenerService).open(m,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>l.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(s.QuickInputHoverDelegate))},d=this._register(this.instantiationService.createInstance(t.QuickInputController,{...r,...a}));return d.layout(l.activeContainerDimension,l.activeContainerOffset.quickPickTop),this._register(l.onDidLayoutActiveContainer(m=>{(0,o.getWindow)(l.activeContainer)===(0,o.getWindow)(d.container)&&d.layout(m,l.activeContainerOffset.quickPickTop)})),this._register(l.onDidChangeActiveContainer(()=>{d.isVisible()||d.layout(l.activeContainerDimension,l.activeContainerOffset.quickPickTop)})),this._register(d.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(d.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),d}setContextKey(l){let a;l&&(a=this.contexts.get(l),a||(a=new E.RawContextKey(l,!1).bindTo(this.contextKeyService),this.contexts.set(l,a))),!(a&&a.get())&&(this.resetContextKeys(),a?.set(!0))}resetContextKeys(){this.contexts.forEach(l=>{l.get()&&l.reset()})}pick(l,a={},r=c.CancellationToken.None){return this.controller.pick(l,a,r)}createQuickPick(){return this.controller.createQuickPick()}createInputBox(){return this.controller.createInputBox()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:(0,p.asCssVariable)(p.quickInputBackground),quickInputForeground:(0,p.asCssVariable)(p.quickInputForeground),quickInputTitleBackground:(0,p.asCssVariable)(p.quickInputTitleBackground),widgetBorder:(0,p.asCssVariable)(p.widgetBorder),widgetShadow:(0,p.asCssVariable)(p.widgetShadow)},inputBox:b.defaultInputBoxStyles,toggle:b.defaultToggleStyles,countBadge:b.defaultCountBadgeStyles,button:b.defaultButtonStyles,progressBar:b.defaultProgressBarStyles,keybindingLabel:b.defaultKeybindingLabelStyles,list:(0,b.getListStyles)({listBackground:p.quickInputBackground,listFocusBackground:p.quickInputListFocusBackground,listFocusForeground:p.quickInputListFocusForeground,listInactiveFocusForeground:p.quickInputListFocusForeground,listInactiveSelectionIconForeground:p.quickInputListFocusIconForeground,listInactiveFocusBackground:p.quickInputListFocusBackground,listFocusOutline:p.activeContrastBorder,listInactiveFocusOutline:p.activeContrastBorder}),pickerGroup:{pickerGroupBorder:(0,p.asCssVariable)(p.pickerGroupBorder),pickerGroupForeground:(0,p.asCssVariable)(p.pickerGroupForeground)}}}};e.QuickInputService=g,e.QuickInputService=g=De([he(0,L.IInstantiationService),he(1,E.IContextKeyService),he(2,n.IThemeService),he(3,y.ILayoutService),he(4,i.IConfigurationService)],g)}),define(oe[796],re([1,0,6,15,25,18,7,12,388,35,795,127,27,549]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QuickInputEditorWidget=e.QuickInputEditorContribution=e.StandaloneQuickInputService=void 0;let t=class extends p.QuickInputService{constructor(l,a,r,d,m,h){super(a,r,d,new _.EditorScopedLayoutService(l.getContainerDomNode(),m),h),this.host=void 0;const v=o.get(l);if(v){const C=v.widget;this.host={_serviceBrand:void 0,get mainContainer(){return C.getDomNode()},getContainer(){return C.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[C.getDomNode()]},get activeContainer(){return C.getDomNode()},get mainContainerDimension(){return l.getLayoutInfo()},get activeContainerDimension(){return l.getLayoutInfo()},get onDidLayoutMainContainer(){return l.onDidLayoutChange},get onDidLayoutActiveContainer(){return l.onDidLayoutChange},get onDidLayoutContainer(){return c.Event.map(l.onDidLayoutChange,w=>({container:C.getDomNode(),dimension:w}))},get onDidChangeActiveContainer(){return c.Event.None},get onDidAddContainer(){return c.Event.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>l.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};t=De([he(1,y.IInstantiationService),he(2,f.IContextKeyService),he(3,E.IThemeService),he(4,b.ICodeEditorService),he(5,s.IConfigurationService)],t);let i=class{get activeService(){const l=this.codeEditorService.getFocusedCodeEditor();if(!l)throw new Error("Quick input service needs a focused editor to work.");let a=this.mapEditorToService.get(l);if(!a){const r=a=this.instantiationService.createInstance(t,l);this.mapEditorToService.set(l,a),(0,n.createSingleCallFunction)(l.onDidDispose)(()=>{r.dispose(),this.mapEditorToService.delete(l)})}return a}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}constructor(l,a){this.instantiationService=l,this.codeEditorService=a,this.mapEditorToService=new Map}pick(l,a={},r=L.CancellationToken.None){return this.activeService.pick(l,a,r)}createQuickPick(){return this.activeService.createQuickPick()}createInputBox(){return this.activeService.createInputBox()}};e.StandaloneQuickInputService=i,e.StandaloneQuickInputService=i=De([he(0,y.IInstantiationService),he(1,b.ICodeEditorService)],i);class o{static{this.ID="editor.controller.quickInput"}static get(l){return l.getContribution(o.ID)}constructor(l){this.editor=l,this.widget=new g(this.editor)}dispose(){this.widget.dispose()}}e.QuickInputEditorContribution=o;class g{static{this.ID="editor.contrib.quickInputWidget"}constructor(l){this.codeEditor=l,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return g.ID}getDomNode(){return this.domNode}getPosition(){return{preference:2}}dispose(){this.codeEditor.removeOverlayWidget(this)}}e.QuickInputEditorWidget=g,(0,k.registerEditorContribution)(o.ID,o,4)}),define(oe[217],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UndoRedoSource=e.UndoRedoGroup=e.ResourceEditStackSnapshot=e.IUndoRedoService=void 0,e.IUndoRedoService=(0,c.createDecorator)("undoRedoService");class k{constructor(f,_){this.resource=f,this.elements=_}}e.ResourceEditStackSnapshot=k;class E{static{this._ID=0}constructor(){this.id=E._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static{this.None=new E}}e.UndoRedoGroup=E;class L{static{this._ID=0}constructor(){this.id=L._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static{this.None=new L}}e.UndoRedoSource=L}),define(oe[36],re([1,0,13,33,8,6,2,11,22,144,240,56,9,4,23,197,42,34,40,601,774,372,344,591,592,340,595,203,662,131,217]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T){"use strict";var M;Object.defineProperty(e,"__esModule",{value:!0}),e.AttachedViews=e.ModelDecorationOptions=e.ModelDecorationInjectedTextOptions=e.ModelDecorationMinimapOptions=e.ModelDecorationGlyphMarginOptions=e.ModelDecorationOverviewRulerOptions=e.TextModel=void 0,e.createTextBufferFactory=A,e.createTextBufferFactoryFromSnapshot=R,e.createTextBuffer=N;function A(j){const V=new w.PieceTreeTextBufferBuilder;return V.acceptChunk(j),V.finish()}function R(j){const V=new w.PieceTreeTextBufferBuilder;let $;for(;typeof($=j.read())=="string";)V.acceptChunk($);return V.finish()}function N(j,V){let $;return typeof j=="string"?$=A(j):l.isITextSnapshot(j)?$=R(j):$=j,$.create(V)}let O=0;const x=999,F=1e4;class W{constructor(V){this._source=V,this._eos=!1}read(){if(this._eos)return null;const V=[];let $=0,Z=0;do{const ee=this._source.read();if(ee===null)return this._eos=!0,$===0?null:V.join("");if(ee.length>0&&(V[$++]=ee,Z+=ee.length),Z>=64*1024)return V.join("")}while(!0)}}const z=()=>{throw new Error("Invalid change accessor")};let q=class extends y.Disposable{static{M=this}static{this._MODEL_SYNC_LIMIT=50*1024*1024}static{this.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024}static{this.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3}static{this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024}static{this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:o.EDITOR_MODEL_DEFAULTS.tabSize,indentSize:o.EDITOR_MODEL_DEFAULTS.indentSize,insertSpaces:o.EDITOR_MODEL_DEFAULTS.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:o.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace,largeFileOptimizations:o.EDITOR_MODEL_DEFAULTS.largeFileOptimizations,bracketPairColorizationOptions:o.EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions}}static resolveOptions(V,$){if($.detectIndentation){const Z=(0,h.guessIndentation)(V,$.tabSize,$.insertSpaces);return new l.TextModelResolvedOptions({tabSize:Z.tabSize,indentSize:"tabSize",insertSpaces:Z.insertSpaces,trimAutoWhitespace:$.trimAutoWhitespace,defaultEOL:$.defaultEOL,bracketPairColorizationOptions:$.bracketPairColorizationOptions})}return new l.TextModelResolvedOptions($)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(V){return this._eventEmitter.slowEvent($=>V($.contentChangedEvent))}onDidChangeContentOrInjectedText(V){return(0,y.combinedDisposable)(this._eventEmitter.fastEvent($=>V($)),this._onDidChangeInjectedText.event($=>V($)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(V,$,Z,ee=null,le,de,me){super(),this._undoRedoService=le,this._languageService=de,this._languageConfigurationService=me,this._onWillDispose=this._register(new L.Emitter),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new ie(Ee=>this.handleBeforeFireDecorationsChangedEvent(Ee))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new L.Emitter),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new L.Emitter),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new L.Emitter),this._eventEmitter=this._register(new ne),this._languageSelectionListener=this._register(new y.MutableDisposable),this._deltaDecorationCallCnt=0,this._attachedViews=new J,O++,this.id="$model"+O,this.isForSimpleWidget=Z.isForSimpleWidget,typeof ee>"u"||ee===null?this._associatedResource=_.URI.parse("inmemory://model/"+O):this._associatedResource=ee,this._attachedEditorCount=0;const{textBuffer:be,disposable:ve}=N(V,Z.defaultEOL);this._buffer=be,this._bufferDisposable=ve,this._options=M.resolveOptions(this._buffer,Z);const Le=typeof $=="string"?$:$.languageId;typeof $!="string"&&(this._languageSelectionListener.value=$.onDidChange(()=>this._setLanguage($.languageId))),this._bracketPairs=this._register(new a.BracketPairsTextModelPart(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new m.GuidesTextModelPart(this,this._languageConfigurationService)),this._decorationProvider=this._register(new r.ColorizedBracketPairsDecorationProvider(this)),this._tokenizationTextModelPart=new D.TokenizationTextModelPart(this._languageService,this._languageConfigurationService,this,this._bracketPairs,Le,this._attachedViews);const Se=this._buffer.getLineCount(),ye=this._buffer.getValueLengthInRange(new t.Range(1,1,Se,this._buffer.getLineLength(Se)+1),0);Z.largeFileOptimizations?(this._isTooLargeForTokenization=ye>M.LARGE_FILE_SIZE_THRESHOLD||Se>M.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=ye>M.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=ye>M._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=f.singleLetterHash(O),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Q,this._commandManager=new d.EditStack(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(Le),this._register(this._languageConfigurationService.onDidChange(Ee=>{this._bracketPairs.handleLanguageConfigurationServiceChange(Ee),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(Ee)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const V=new C.PieceTreeTextBuffer([],"",`
`,!1,!1,!0,!0);V.dispose(),this._buffer=V,this._bufferDisposable=y.Disposable.None}_assertNotDisposed(){if(this._isDisposed)throw new E.BugIndicatingError("Model is disposed!")}_emitContentChangedEvent(V,$){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent($),this._bracketPairs.handleDidChangeContent($),this._eventEmitter.fire(new I.InternalModelContentChangeEvent(V,$)))}setValue(V){if(this._assertNotDisposed(),V==null)throw(0,E.illegalArgument)();const{textBuffer:$,disposable:Z}=N(V,this._options.defaultEOL);this._setValueFromTextBuffer($,Z)}_createContentChanged2(V,$,Z,ee,le,de,me,be){return{changes:[{range:V,rangeOffset:$,rangeLength:Z,text:ee}],eol:this._buffer.getEOL(),isEolChange:be,versionId:this.getVersionId(),isUndoing:le,isRedoing:de,isFlush:me}}_setValueFromTextBuffer(V,$){this._assertNotDisposed();const Z=this.getFullModelRange(),ee=this.getValueLengthInRange(Z),le=this.getLineCount(),de=this.getLineMaxColumn(le);this._buffer=V,this._bufferDisposable.dispose(),this._bufferDisposable=$,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Q,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new I.ModelRawContentChangedEvent([new I.ModelRawFlush],this._versionId,!1,!1),this._createContentChanged2(new t.Range(1,1,le,de),0,ee,this.getValue(),!1,!1,!0,!1))}setEOL(V){this._assertNotDisposed();const $=V===1?`\r
`:`
`;if(this._buffer.getEOL()===$)return;const Z=this.getFullModelRange(),ee=this.getValueLengthInRange(Z),le=this.getLineCount(),de=this.getLineMaxColumn(le);this._onBeforeEOLChange(),this._buffer.setEOL($),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new I.ModelRawContentChangedEvent([new I.ModelRawEOLChanged],this._versionId,!1,!1),this._createContentChanged2(new t.Range(1,1,le,de),0,ee,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const V=this.getVersionId(),$=this._decorationsTree.collectNodesPostOrder();for(let Z=0,ee=$.length;Z<ee;Z++){const le=$[Z],de=le.range,me=le.cachedAbsoluteStart-le.start,be=this._buffer.getOffsetAt(de.startLineNumber,de.startColumn),ve=this._buffer.getOffsetAt(de.endLineNumber,de.endColumn);le.cachedAbsoluteStart=be,le.cachedAbsoluteEnd=ve,le.cachedVersionId=V,le.start=be-me,le.end=ve-me,(0,v.recomputeMaxEnd)(le)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(V){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(V)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let V=0,$=0;const Z=this._buffer.getLineCount();for(let ee=1;ee<=Z;ee++){const le=this._buffer.getLineLength(ee);le>=F?$+=le:V+=le}return $>V}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(V){this._assertNotDisposed();const $=typeof V.tabSize<"u"?V.tabSize:this._options.tabSize,Z=typeof V.indentSize<"u"?V.indentSize:this._options.originalIndentSize,ee=typeof V.insertSpaces<"u"?V.insertSpaces:this._options.insertSpaces,le=typeof V.trimAutoWhitespace<"u"?V.trimAutoWhitespace:this._options.trimAutoWhitespace,de=typeof V.bracketColorizationOptions<"u"?V.bracketColorizationOptions:this._options.bracketPairColorizationOptions,me=new l.TextModelResolvedOptions({tabSize:$,indentSize:Z,insertSpaces:ee,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:le,bracketPairColorizationOptions:de});if(this._options.equals(me))return;const be=this._options.createChangeEvent(me);this._options=me,this._bracketPairs.handleDidChangeOptions(be),this._decorationProvider.handleDidChangeOptions(be),this._onDidChangeOptions.fire(be)}detectIndentation(V,$){this._assertNotDisposed();const Z=(0,h.guessIndentation)(this._buffer,$,V);this.updateOptions({insertSpaces:Z.insertSpaces,tabSize:Z.tabSize,indentSize:Z.tabSize})}normalizeIndentation(V){return this._assertNotDisposed(),(0,p.normalizeIndentation)(V,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(V=null){const $=this.findMatches(f.UNUSUAL_LINE_TERMINATORS.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(V,$.map(Z=>({range:Z.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(V){this._assertNotDisposed();const $=this._validatePosition(V.lineNumber,V.column,0);return this._buffer.getOffsetAt($.lineNumber,$.column)}getPositionAt(V){this._assertNotDisposed();const $=Math.min(this._buffer.getLength(),Math.max(0,V));return this._buffer.getPositionAt($)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(V){this._versionId=V}_overwriteAlternativeVersionId(V){this._alternativeVersionId=V}_overwriteInitialUndoRedoSnapshot(V){this._initialUndoRedoSnapshot=V}getValue(V,$=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new E.BugIndicatingError("Operation would exceed heap memory limits");const Z=this.getFullModelRange(),ee=this.getValueInRange(Z,V);return $?this._buffer.getBOM()+ee:ee}createSnapshot(V=!1){return new W(this._buffer.createSnapshot(V))}getValueLength(V,$=!1){this._assertNotDisposed();const Z=this.getFullModelRange(),ee=this.getValueLengthInRange(Z,V);return $?this._buffer.getBOM().length+ee:ee}getValueInRange(V,$=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(V),$)}getValueLengthInRange(V,$=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(V),$)}getCharacterCountInRange(V,$=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(V),$)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(V){if(this._assertNotDisposed(),V<1||V>this.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber");return this._buffer.getLineContent(V)}getLineLength(V){if(this._assertNotDisposed(),V<1||V>this.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber");return this._buffer.getLineLength(V)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new E.BugIndicatingError("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(V){return this._assertNotDisposed(),1}getLineMaxColumn(V){if(this._assertNotDisposed(),V<1||V>this.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber");return this._buffer.getLineLength(V)+1}getLineFirstNonWhitespaceColumn(V){if(this._assertNotDisposed(),V<1||V>this.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(V)}getLineLastNonWhitespaceColumn(V){if(this._assertNotDisposed(),V<1||V>this.getLineCount())throw new E.BugIndicatingError("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(V)}_validateRangeRelaxedNoAllocations(V){const $=this._buffer.getLineCount(),Z=V.startLineNumber,ee=V.startColumn;let le=Math.floor(typeof Z=="number"&&!isNaN(Z)?Z:1),de=Math.floor(typeof ee=="number"&&!isNaN(ee)?ee:1);if(le<1)le=1,de=1;else if(le>$)le=$,de=this.getLineMaxColumn(le);else if(de<=1)de=1;else{const Se=this.getLineMaxColumn(le);de>=Se&&(de=Se)}const me=V.endLineNumber,be=V.endColumn;let ve=Math.floor(typeof me=="number"&&!isNaN(me)?me:1),Le=Math.floor(typeof be=="number"&&!isNaN(be)?be:1);if(ve<1)ve=1,Le=1;else if(ve>$)ve=$,Le=this.getLineMaxColumn(ve);else if(Le<=1)Le=1;else{const Se=this.getLineMaxColumn(ve);Le>=Se&&(Le=Se)}return Z===le&&ee===de&&me===ve&&be===Le&&V instanceof t.Range&&!(V instanceof i.Selection)?V:new t.Range(le,de,ve,Le)}_isValidPosition(V,$,Z){if(typeof V!="number"||typeof $!="number"||isNaN(V)||isNaN($)||V<1||$<1||(V|0)!==V||($|0)!==$)return!1;const ee=this._buffer.getLineCount();if(V>ee)return!1;if($===1)return!0;const le=this.getLineMaxColumn(V);if($>le)return!1;if(Z===1){const de=this._buffer.getLineCharCode(V,$-2);if(f.isHighSurrogate(de))return!1}return!0}_validatePosition(V,$,Z){const ee=Math.floor(typeof V=="number"&&!isNaN(V)?V:1),le=Math.floor(typeof $=="number"&&!isNaN($)?$:1),de=this._buffer.getLineCount();if(ee<1)return new s.Position(1,1);if(ee>de)return new s.Position(de,this.getLineMaxColumn(de));if(le<=1)return new s.Position(ee,1);const me=this.getLineMaxColumn(ee);if(le>=me)return new s.Position(ee,me);if(Z===1){const be=this._buffer.getLineCharCode(ee,le-2);if(f.isHighSurrogate(be))return new s.Position(ee,le-1)}return new s.Position(ee,le)}validatePosition(V){return this._assertNotDisposed(),V instanceof s.Position&&this._isValidPosition(V.lineNumber,V.column,1)?V:this._validatePosition(V.lineNumber,V.column,1)}_isValidRange(V,$){const Z=V.startLineNumber,ee=V.startColumn,le=V.endLineNumber,de=V.endColumn;if(!this._isValidPosition(Z,ee,0)||!this._isValidPosition(le,de,0))return!1;if($===1){const me=ee>1?this._buffer.getLineCharCode(Z,ee-2):0,be=de>1&&de<=this._buffer.getLineLength(le)?this._buffer.getLineCharCode(le,de-2):0,ve=f.isHighSurrogate(me),Le=f.isHighSurrogate(be);return!ve&&!Le}return!0}validateRange(V){if(this._assertNotDisposed(),V instanceof t.Range&&!(V instanceof i.Selection)&&this._isValidRange(V,1))return V;const Z=this._validatePosition(V.startLineNumber,V.startColumn,0),ee=this._validatePosition(V.endLineNumber,V.endColumn,0),le=Z.lineNumber,de=Z.column,me=ee.lineNumber,be=ee.column;{const ve=de>1?this._buffer.getLineCharCode(le,de-2):0,Le=be>1&&be<=this._buffer.getLineLength(me)?this._buffer.getLineCharCode(me,be-2):0,Se=f.isHighSurrogate(ve),ye=f.isHighSurrogate(Le);return!Se&&!ye?new t.Range(le,de,me,be):le===me&&de===be?new t.Range(le,de-1,me,be-1):Se&&ye?new t.Range(le,de-1,me,be+1):Se?new t.Range(le,de-1,me,be):new t.Range(le,de,me,be+1)}return new t.Range(le,de,me,be)}modifyPosition(V,$){this._assertNotDisposed();const Z=this.getOffsetAt(V)+$;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,Z)))}getFullModelRange(){this._assertNotDisposed();const V=this.getLineCount();return new t.Range(1,1,V,this.getLineMaxColumn(V))}findMatchesLineByLine(V,$,Z,ee){return this._buffer.findMatchesLineByLine(V,$,Z,ee)}findMatches(V,$,Z,ee,le,de,me=x){this._assertNotDisposed();let be=null;$!==null&&(Array.isArray($)||($=[$]),$.every(Se=>t.Range.isIRange(Se))&&(be=$.map(Se=>this.validateRange(Se)))),be===null&&(be=[this.getFullModelRange()]),be=be.sort((Se,ye)=>Se.startLineNumber-ye.startLineNumber||Se.startColumn-ye.startColumn);const ve=[];ve.push(be.reduce((Se,ye)=>t.Range.areIntersecting(Se,ye)?Se.plusRange(ye):(ve.push(Se),ye)));let Le;if(!Z&&V.indexOf(`
`)<0){const ye=new S.SearchParams(V,Z,ee,le).parseSearchRequest();if(!ye)return[];Le=Ee=>this.findMatchesLineByLine(Ee,ye,de,me)}else Le=Se=>S.TextModelSearch.findMatches(this,new S.SearchParams(V,Z,ee,le),Se,de,me);return ve.map(Le).reduce((Se,ye)=>Se.concat(ye),[])}findNextMatch(V,$,Z,ee,le,de){this._assertNotDisposed();const me=this.validatePosition($);if(!Z&&V.indexOf(`
`)<0){const ve=new S.SearchParams(V,Z,ee,le).parseSearchRequest();if(!ve)return null;const Le=this.getLineCount();let Se=new t.Range(me.lineNumber,me.column,Le,this.getLineMaxColumn(Le)),ye=this.findMatchesLineByLine(Se,ve,de,1);return S.TextModelSearch.findNextMatch(this,new S.SearchParams(V,Z,ee,le),me,de),ye.length>0||(Se=new t.Range(1,1,me.lineNumber,this.getLineMaxColumn(me.lineNumber)),ye=this.findMatchesLineByLine(Se,ve,de,1),ye.length>0)?ye[0]:null}return S.TextModelSearch.findNextMatch(this,new S.SearchParams(V,Z,ee,le),me,de)}findPreviousMatch(V,$,Z,ee,le,de){this._assertNotDisposed();const me=this.validatePosition($);return S.TextModelSearch.findPreviousMatch(this,new S.SearchParams(V,Z,ee,le),me,de)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(V){if((this.getEOL()===`
`?0:1)!==V)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(V)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(V){return V instanceof l.ValidAnnotatedEditOperation?V:new l.ValidAnnotatedEditOperation(V.identifier||null,this.validateRange(V.range),V.text,V.forceMoveMarkers||!1,V.isAutoWhitespaceEdit||!1,V._isTracked||!1)}_validateEditOperations(V){const $=[];for(let Z=0,ee=V.length;Z<ee;Z++)$[Z]=this._validateEditOperation(V[Z]);return $}pushEditOperations(V,$,Z,ee){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(V,this._validateEditOperations($),Z,ee)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(V,$,Z,ee){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const le=$.map(me=>({range:this.validateRange(me.range),text:me.text}));let de=!0;if(V)for(let me=0,be=V.length;me<be;me++){const ve=V[me];let Le=!1;for(let Se=0,ye=le.length;Se<ye;Se++){const Ee=le[Se].range,ke=Ee.startLineNumber>ve.endLineNumber,Re=ve.startLineNumber>Ee.endLineNumber;if(!ke&&!Re){Le=!0;break}}if(!Le){de=!1;break}}if(de)for(let me=0,be=this._trimAutoWhitespaceLines.length;me<be;me++){const ve=this._trimAutoWhitespaceLines[me],Le=this.getLineMaxColumn(ve);let Se=!0;for(let ye=0,Ee=le.length;ye<Ee;ye++){const ke=le[ye].range,Re=le[ye].text;if(!(ve<ke.startLineNumber||ve>ke.endLineNumber)&&!(ve===ke.startLineNumber&&ke.startColumn===Le&&ke.isEmpty()&&Re&&Re.length>0&&Re.charAt(0)===`
`)&&!(ve===ke.startLineNumber&&ke.startColumn===1&&ke.isEmpty()&&Re&&Re.length>0&&Re.charAt(Re.length-1)===`
`)){Se=!1;break}}if(Se){const ye=new t.Range(ve,1,ve,Le);$.push(new l.ValidAnnotatedEditOperation(null,ye,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(V,$,Z,ee)}_applyUndo(V,$,Z,ee){const le=V.map(de=>{const me=this.getPositionAt(de.newPosition),be=this.getPositionAt(de.newEnd);return{range:new t.Range(me.lineNumber,me.column,be.lineNumber,be.column),text:de.oldText}});this._applyUndoRedoEdits(le,$,!0,!1,Z,ee)}_applyRedo(V,$,Z,ee){const le=V.map(de=>{const me=this.getPositionAt(de.oldPosition),be=this.getPositionAt(de.oldEnd);return{range:new t.Range(me.lineNumber,me.column,be.lineNumber,be.column),text:de.newText}});this._applyUndoRedoEdits(le,$,!1,!0,Z,ee)}_applyUndoRedoEdits(V,$,Z,ee,le,de){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=Z,this._isRedoing=ee,this.applyEdits(V,!1),this.setEOL($),this._overwriteAlternativeVersionId(le)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(de),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(V,$=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const Z=this._validateEditOperations(V);return this._doApplyEdits(Z,$)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(V,$){const Z=this._buffer.getLineCount(),ee=this._buffer.applyEdits(V,this._options.trimAutoWhitespace,$),le=this._buffer.getLineCount(),de=ee.changes;if(this._trimAutoWhitespaceLines=ee.trimAutoWhitespaceLineNumbers,de.length!==0){for(let ve=0,Le=de.length;ve<Le;ve++){const Se=de[ve];this._decorationsTree.acceptReplace(Se.rangeOffset,Se.rangeLength,Se.text.length,Se.forceMoveMarkers)}const me=[];this._increaseVersionId();let be=Z;for(let ve=0,Le=de.length;ve<Le;ve++){const Se=de[ve],[ye]=(0,b.countEOL)(Se.text);this._onDidChangeDecorations.fire();const Ee=Se.range.startLineNumber,ke=Se.range.endLineNumber,Re=ke-Ee,Pe=ye,Fe=Math.min(Re,Pe),je=Pe-Re,Te=le-be-je+Ee,Ne=Te,fe=Te+Pe,we=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new s.Position(Ne,1)),this.getOffsetAt(new s.Position(fe,this.getLineMaxColumn(fe))),0),Oe=I.LineInjectedText.fromDecorations(we),Be=new c.ArrayQueue(Oe);for(let Ue=Fe;Ue>=0;Ue--){const Ye=Ee+Ue,Qe=Te+Ue;Be.takeFromEndWhile(it=>it.lineNumber>Qe);const tt=Be.takeFromEndWhile(it=>it.lineNumber===Qe);me.push(new I.ModelRawLineChanged(Ye,this.getLineContent(Qe),tt))}if(Fe<Re){const Ue=Ee+Fe;me.push(new I.ModelRawLinesDeleted(Ue+1,ke))}if(Fe<Pe){const Ue=new c.ArrayQueue(Oe),Ye=Ee+Fe,Qe=Pe-Fe,tt=le-be-Qe+Ye+1,it=[],ut=[];for(let ct=0;ct<Qe;ct++){const nt=tt+ct;ut[ct]=this.getLineContent(nt),Ue.takeWhile(st=>st.lineNumber<nt),it[ct]=Ue.takeWhile(st=>st.lineNumber===nt)}me.push(new I.ModelRawLinesInserted(Ye+1,Ee+Pe,ut,it))}be+=je}this._emitContentChangedEvent(new I.ModelRawContentChangedEvent(me,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:de,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return ee.reverseEdits===null?void 0:ee.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(V){if(V===null||V.size===0)return;const Z=Array.from(V).map(ee=>new I.ModelRawLineChanged(ee,this.getLineContent(ee),this._getInjectedTextInLine(ee)));this._onDidChangeInjectedText.fire(new I.ModelInjectedTextChangedEvent(Z))}changeDecorations(V,$=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations($,V)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(V,$){const Z={addDecoration:(le,de)=>this._deltaDecorationsImpl(V,[],[{range:le,options:de}])[0],changeDecoration:(le,de)=>{this._changeDecorationImpl(le,de)},changeDecorationOptions:(le,de)=>{this._changeDecorationOptionsImpl(le,ce(de))},removeDecoration:le=>{this._deltaDecorationsImpl(V,[le],[])},deltaDecorations:(le,de)=>le.length===0&&de.length===0?[]:this._deltaDecorationsImpl(V,le,de)};let ee=null;try{ee=$(Z)}catch(le){(0,E.onUnexpectedError)(le)}return Z.addDecoration=z,Z.changeDecoration=z,Z.changeDecorationOptions=z,Z.removeDecoration=z,Z.deltaDecorations=z,ee}deltaDecorations(V,$,Z=0){if(this._assertNotDisposed(),V||(V=[]),V.length===0&&$.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),(0,E.onUnexpectedError)(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(Z,V,$)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(V){return this.getDecorationRange(V)}_setTrackedRange(V,$,Z){const ee=V?this._decorations[V]:null;if(!ee)return $?this._deltaDecorationsImpl(0,[],[{range:$,options:pe[Z]}],!0)[0]:null;if(!$)return this._decorationsTree.delete(ee),delete this._decorations[ee.id],null;const le=this._validateRangeRelaxedNoAllocations($),de=this._buffer.getOffsetAt(le.startLineNumber,le.startColumn),me=this._buffer.getOffsetAt(le.endLineNumber,le.endColumn);return this._decorationsTree.delete(ee),ee.reset(this.getVersionId(),de,me,le),ee.setOptions(pe[Z]),this._decorationsTree.insert(ee),ee.id}removeAllDecorationsWithOwnerId(V){if(this._isDisposed)return;const $=this._decorationsTree.collectNodesFromOwner(V);for(let Z=0,ee=$.length;Z<ee;Z++){const le=$[Z];this._decorationsTree.delete(le),delete this._decorations[le.id]}}getDecorationOptions(V){const $=this._decorations[V];return $?$.options:null}getDecorationRange(V){const $=this._decorations[V];return $?this._decorationsTree.getNodeRange(this,$):null}getLineDecorations(V,$=0,Z=!1){return V<1||V>this.getLineCount()?[]:this.getLinesDecorations(V,V,$,Z)}getLinesDecorations(V,$,Z=0,ee=!1,le=!1){const de=this.getLineCount(),me=Math.min(de,Math.max(1,V)),be=Math.min(de,Math.max(1,$)),ve=this.getLineMaxColumn(be),Le=new t.Range(me,1,be,ve),Se=this._getDecorationsInRange(Le,Z,ee,le);return(0,c.pushMany)(Se,this._decorationProvider.getDecorationsInRange(Le,Z,ee)),Se}getDecorationsInRange(V,$=0,Z=!1,ee=!1,le=!1){const de=this.validateRange(V),me=this._getDecorationsInRange(de,$,Z,le);return(0,c.pushMany)(me,this._decorationProvider.getDecorationsInRange(de,$,Z,ee)),me}getOverviewRulerDecorations(V=0,$=!1){return this._decorationsTree.getAll(this,V,$,!0,!1)}getInjectedTextDecorations(V=0){return this._decorationsTree.getAllInjectedText(this,V)}_getInjectedTextInLine(V){const $=this._buffer.getOffsetAt(V,1),Z=$+this._buffer.getLineLength(V),ee=this._decorationsTree.getInjectedTextInInterval(this,$,Z,0);return I.LineInjectedText.fromDecorations(ee).filter(le=>le.lineNumber===V)}getAllDecorations(V=0,$=!1){let Z=this._decorationsTree.getAll(this,V,$,!1,!1);return Z=Z.concat(this._decorationProvider.getAllDecorations(V,$)),Z}getAllMarginDecorations(V=0){return this._decorationsTree.getAll(this,V,!1,!1,!0)}_getDecorationsInRange(V,$,Z,ee){const le=this._buffer.getOffsetAt(V.startLineNumber,V.startColumn),de=this._buffer.getOffsetAt(V.endLineNumber,V.endColumn);return this._decorationsTree.getAllInInterval(this,le,de,$,Z,ee)}getRangeAt(V,$){return this._buffer.getRangeAt(V,$-V)}_changeDecorationImpl(V,$){const Z=this._decorations[V];if(!Z)return;if(Z.options.after){const me=this.getDecorationRange(V);this._onDidChangeDecorations.recordLineAffectedByInjectedText(me.endLineNumber)}if(Z.options.before){const me=this.getDecorationRange(V);this._onDidChangeDecorations.recordLineAffectedByInjectedText(me.startLineNumber)}const ee=this._validateRangeRelaxedNoAllocations($),le=this._buffer.getOffsetAt(ee.startLineNumber,ee.startColumn),de=this._buffer.getOffsetAt(ee.endLineNumber,ee.endColumn);this._decorationsTree.delete(Z),Z.reset(this.getVersionId(),le,de,ee),this._decorationsTree.insert(Z),this._onDidChangeDecorations.checkAffectedAndFire(Z.options),Z.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(ee.endLineNumber),Z.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(ee.startLineNumber)}_changeDecorationOptionsImpl(V,$){const Z=this._decorations[V];if(!Z)return;const ee=!!(Z.options.overviewRuler&&Z.options.overviewRuler.color),le=!!($.overviewRuler&&$.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(Z.options),this._onDidChangeDecorations.checkAffectedAndFire($),Z.options.after||$.after){const be=this._decorationsTree.getNodeRange(this,Z);this._onDidChangeDecorations.recordLineAffectedByInjectedText(be.endLineNumber)}if(Z.options.before||$.before){const be=this._decorationsTree.getNodeRange(this,Z);this._onDidChangeDecorations.recordLineAffectedByInjectedText(be.startLineNumber)}const de=ee!==le,me=U($)!==Y(Z);de||me?(this._decorationsTree.delete(Z),Z.setOptions($),this._decorationsTree.insert(Z)):Z.setOptions($)}_deltaDecorationsImpl(V,$,Z,ee=!1){const le=this.getVersionId(),de=$.length;let me=0;const be=Z.length;let ve=0;this._onDidChangeDecorations.beginDeferredEmit();try{const Le=new Array(be);for(;me<de||ve<be;){let Se=null;if(me<de){do Se=this._decorations[$[me++]];while(!Se&&me<de);if(Se){if(Se.options.after){const ye=this._decorationsTree.getNodeRange(this,Se);this._onDidChangeDecorations.recordLineAffectedByInjectedText(ye.endLineNumber)}if(Se.options.before){const ye=this._decorationsTree.getNodeRange(this,Se);this._onDidChangeDecorations.recordLineAffectedByInjectedText(ye.startLineNumber)}this._decorationsTree.delete(Se),ee||this._onDidChangeDecorations.checkAffectedAndFire(Se.options)}}if(ve<be){if(!Se){const Fe=++this._lastDecorationId,je=`${this._instanceId};${Fe}`;Se=new v.IntervalNode(je,0,0),this._decorations[je]=Se}const ye=Z[ve],Ee=this._validateRangeRelaxedNoAllocations(ye.range),ke=ce(ye.options),Re=this._buffer.getOffsetAt(Ee.startLineNumber,Ee.startColumn),Pe=this._buffer.getOffsetAt(Ee.endLineNumber,Ee.endColumn);Se.ownerId=V,Se.reset(le,Re,Pe,Ee),Se.setOptions(ke),Se.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ee.endLineNumber),Se.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(Ee.startLineNumber),ee||this._onDidChangeDecorations.checkAffectedAndFire(ke),this._decorationsTree.insert(Se),Le[ve]=Se.id,ve++}else Se&&delete this._decorations[Se.id]}return Le}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(V,$){typeof V=="string"?(this._languageSelectionListener.clear(),this._setLanguage(V,$)):(this._languageSelectionListener.value=V.onDidChange(()=>this._setLanguage(V.languageId,$)),this._setLanguage(V.languageId,$))}_setLanguage(V,$){this.tokenization.setLanguageId(V,$),this._languageService.requestRichLanguageFeatures(V)}getLanguageIdAtPosition(V,$){return this.tokenization.getLanguageIdAtPosition(V,$)}getWordAtPosition(V){return this._tokenizationTextModelPart.getWordAtPosition(V)}getWordUntilPosition(V){return this._tokenizationTextModelPart.getWordUntilPosition(V)}normalizePosition(V,$){return V}getLineIndentColumn(V){return H(this.getLineContent(V))+1}};e.TextModel=q,e.TextModel=q=M=De([he(4,T.IUndoRedoService),he(5,g.ILanguageService),he(6,u.ILanguageConfigurationService)],q);function H(j){let V=0;for(const $ of j)if($===" "||$==="	")V++;else break;return V}function K(j){return!!(j.options.overviewRuler&&j.options.overviewRuler.color)}function U(j){return!!j.after||!!j.before}function Y(j){return!!j.options.after||!!j.options.before}class Q{constructor(){this._decorationsTree0=new v.IntervalTree,this._decorationsTree1=new v.IntervalTree,this._injectedTextDecorationsTree=new v.IntervalTree}ensureAllNodesHaveRanges(V){this.getAll(V,0,!1,!1,!1)}_ensureNodesHaveRanges(V,$){for(const Z of $)Z.range===null&&(Z.range=V.getRangeAt(Z.cachedAbsoluteStart,Z.cachedAbsoluteEnd));return $}getAllInInterval(V,$,Z,ee,le,de){const me=V.getVersionId(),be=this._intervalSearch($,Z,ee,le,me,de);return this._ensureNodesHaveRanges(V,be)}_intervalSearch(V,$,Z,ee,le,de){const me=this._decorationsTree0.intervalSearch(V,$,Z,ee,le,de),be=this._decorationsTree1.intervalSearch(V,$,Z,ee,le,de),ve=this._injectedTextDecorationsTree.intervalSearch(V,$,Z,ee,le,de);return me.concat(be).concat(ve)}getInjectedTextInInterval(V,$,Z,ee){const le=V.getVersionId(),de=this._injectedTextDecorationsTree.intervalSearch($,Z,ee,!1,le,!1);return this._ensureNodesHaveRanges(V,de).filter(me=>me.options.showIfCollapsed||!me.range.isEmpty())}getAllInjectedText(V,$){const Z=V.getVersionId(),ee=this._injectedTextDecorationsTree.search($,!1,Z,!1);return this._ensureNodesHaveRanges(V,ee).filter(le=>le.options.showIfCollapsed||!le.range.isEmpty())}getAll(V,$,Z,ee,le){const de=V.getVersionId(),me=this._search($,Z,ee,de,le);return this._ensureNodesHaveRanges(V,me)}_search(V,$,Z,ee,le){if(Z)return this._decorationsTree1.search(V,$,ee,le);{const de=this._decorationsTree0.search(V,$,ee,le),me=this._decorationsTree1.search(V,$,ee,le),be=this._injectedTextDecorationsTree.search(V,$,ee,le);return de.concat(me).concat(be)}}collectNodesFromOwner(V){const $=this._decorationsTree0.collectNodesFromOwner(V),Z=this._decorationsTree1.collectNodesFromOwner(V),ee=this._injectedTextDecorationsTree.collectNodesFromOwner(V);return $.concat(Z).concat(ee)}collectNodesPostOrder(){const V=this._decorationsTree0.collectNodesPostOrder(),$=this._decorationsTree1.collectNodesPostOrder(),Z=this._injectedTextDecorationsTree.collectNodesPostOrder();return V.concat($).concat(Z)}insert(V){Y(V)?this._injectedTextDecorationsTree.insert(V):K(V)?this._decorationsTree1.insert(V):this._decorationsTree0.insert(V)}delete(V){Y(V)?this._injectedTextDecorationsTree.delete(V):K(V)?this._decorationsTree1.delete(V):this._decorationsTree0.delete(V)}getNodeRange(V,$){const Z=V.getVersionId();return $.cachedVersionId!==Z&&this._resolveNode($,Z),$.range===null&&($.range=V.getRangeAt($.cachedAbsoluteStart,$.cachedAbsoluteEnd)),$.range}_resolveNode(V,$){Y(V)?this._injectedTextDecorationsTree.resolveNode(V,$):K(V)?this._decorationsTree1.resolveNode(V,$):this._decorationsTree0.resolveNode(V,$)}acceptReplace(V,$,Z,ee){this._decorationsTree0.acceptReplace(V,$,Z,ee),this._decorationsTree1.acceptReplace(V,$,Z,ee),this._injectedTextDecorationsTree.acceptReplace(V,$,Z,ee)}}function X(j){return j.replace(/[^a-z0-9\-_]/gi," ")}class G{constructor(V){this.color=V.color||"",this.darkColor=V.darkColor||""}}class P extends G{constructor(V){super(V),this._resolvedColor=null,this.position=typeof V.position=="number"?V.position:l.OverviewRulerLane.Center}getColor(V){return this._resolvedColor||(V.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,V):this._resolvedColor=this._resolveColor(this.color,V)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(V,$){if(typeof V=="string")return V;const Z=V?$.getColor(V.id):null;return Z?Z.toString():""}}e.ModelDecorationOverviewRulerOptions=P;class te{constructor(V){this.position=V?.position??l.GlyphMarginLane.Center,this.persistLane=V?.persistLane}}e.ModelDecorationGlyphMarginOptions=te;class se extends G{constructor(V){super(V),this.position=V.position,this.sectionHeaderStyle=V.sectionHeaderStyle??null,this.sectionHeaderText=V.sectionHeaderText??null}getColor(V){return this._resolvedColor||(V.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,V):this._resolvedColor=this._resolveColor(this.color,V)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(V,$){return typeof V=="string"?k.Color.fromHex(V):$.getColor(V.id)}}e.ModelDecorationMinimapOptions=se;class ue{static from(V){return V instanceof ue?V:new ue(V)}constructor(V){this.content=V.content||"",this.inlineClassName=V.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=V.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=V.attachedData||null,this.cursorStops=V.cursorStops||null}}e.ModelDecorationInjectedTextOptions=ue;class ge{static register(V){return new ge(V)}static createDynamic(V){return new ge(V)}constructor(V){this.description=V.description,this.blockClassName=V.blockClassName?X(V.blockClassName):null,this.blockDoesNotCollapse=V.blockDoesNotCollapse??null,this.blockIsAfterEnd=V.blockIsAfterEnd??null,this.blockPadding=V.blockPadding??null,this.stickiness=V.stickiness||0,this.zIndex=V.zIndex||0,this.className=V.className?X(V.className):null,this.shouldFillLineOnLineBreak=V.shouldFillLineOnLineBreak??null,this.hoverMessage=V.hoverMessage||null,this.glyphMarginHoverMessage=V.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=V.lineNumberHoverMessage||null,this.isWholeLine=V.isWholeLine||!1,this.showIfCollapsed=V.showIfCollapsed||!1,this.collapseOnReplaceEdit=V.collapseOnReplaceEdit||!1,this.overviewRuler=V.overviewRuler?new P(V.overviewRuler):null,this.minimap=V.minimap?new se(V.minimap):null,this.glyphMargin=V.glyphMarginClassName?new te(V.glyphMargin):null,this.glyphMarginClassName=V.glyphMarginClassName?X(V.glyphMarginClassName):null,this.linesDecorationsClassName=V.linesDecorationsClassName?X(V.linesDecorationsClassName):null,this.lineNumberClassName=V.lineNumberClassName?X(V.lineNumberClassName):null,this.linesDecorationsTooltip=V.linesDecorationsTooltip?f.htmlAttributeEncodeValue(V.linesDecorationsTooltip):null,this.firstLineDecorationClassName=V.firstLineDecorationClassName?X(V.firstLineDecorationClassName):null,this.marginClassName=V.marginClassName?X(V.marginClassName):null,this.inlineClassName=V.inlineClassName?X(V.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=V.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=V.beforeContentClassName?X(V.beforeContentClassName):null,this.afterContentClassName=V.afterContentClassName?X(V.afterContentClassName):null,this.after=V.after?ue.from(V.after):null,this.before=V.before?ue.from(V.before):null,this.hideInCommentTokens=V.hideInCommentTokens??!1,this.hideInStringTokens=V.hideInStringTokens??!1}}e.ModelDecorationOptions=ge,ge.EMPTY=ge.register({description:"empty"});const pe=[ge.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),ge.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),ge.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),ge.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function ce(j){return j instanceof ge?j:ge.createDynamic(j)}class ie extends y.Disposable{constructor(V){super(),this.handleBeforeFire=V,this._actual=this._register(new L.Emitter),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(V){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(V)}checkAffectedAndFire(V){this._affectsMinimap||=!!V.minimap?.position,this._affectsOverviewRuler||=!!V.overviewRuler?.color,this._affectsGlyphMargin||=!!V.glyphMarginClassName,this._affectsLineNumber||=!!V.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);const V={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(V)}}class ne extends y.Disposable{constructor(){super(),this._fastEmitter=this._register(new L.Emitter),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new L.Emitter),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(V=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=V;const $=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire($),this._slowEmitter.fire($)}}fire(V){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(V):this._deferredEvent=V;return}this._fastEmitter.fire(V),this._slowEmitter.fire(V)}}class J{constructor(){this._onDidChangeVisibleRanges=new L.Emitter,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set}attachView(){const V=new B($=>{this._onDidChangeVisibleRanges.fire({view:V,state:$})});return this._views.add(V),V}detachView(V){this._views.delete(V),this._onDidChangeVisibleRanges.fire({view:V,state:void 0})}}e.AttachedViews=J;class B{constructor(V){this.handleStateChange=V}setVisibleLines(V,$){const Z=V.map(ee=>new n.LineRange(ee.startLineNumber,ee.endLineNumber+1));this.handleStateChange({visibleLineRanges:Z,stabilized:$})}}}),define(oe[138],re([1,0,26,30,36,3,32,71]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.diffDeleteDecorationEmpty=e.diffWholeLineDeleteDecoration=e.diffDeleteDecoration=e.diffAddDecorationEmpty=e.diffWholeLineAddDecoration=e.diffAddDecoration=e.diffLineDeleteDecorationBackground=e.diffLineAddDecorationBackground=e.diffLineDeleteDecorationBackgroundWithIndicator=e.diffLineAddDecorationBackgroundWithIndicator=e.diffRemoveIcon=e.diffInsertIcon=e.diffEditorUnchangedRegionShadow=e.diffMoveBorderActive=e.diffMoveBorder=void 0,e.diffMoveBorder=(0,y.registerColor)("diffEditor.move.border","#8b8b8b9c",(0,L.localize)(990,"The border color for text that got moved in the diff editor.")),e.diffMoveBorderActive=(0,y.registerColor)("diffEditor.moveActive.border","#FFA500",(0,L.localize)(991,"The active border color for text that got moved in the diff editor.")),e.diffEditorUnchangedRegionShadow=(0,y.registerColor)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,L.localize)(992,"The color of the shadow around unchanged region widgets.")),e.diffInsertIcon=(0,f.registerIcon)("diff-insert",c.Codicon.add,(0,L.localize)(993,"Line decoration for inserts in the diff editor.")),e.diffRemoveIcon=(0,f.registerIcon)("diff-remove",c.Codicon.remove,(0,L.localize)(994,"Line decoration for removals in the diff editor.")),e.diffLineAddDecorationBackgroundWithIndicator=E.ModelDecorationOptions.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+k.ThemeIcon.asClassName(e.diffInsertIcon),marginClassName:"gutter-insert"}),e.diffLineDeleteDecorationBackgroundWithIndicator=E.ModelDecorationOptions.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+k.ThemeIcon.asClassName(e.diffRemoveIcon),marginClassName:"gutter-delete"}),e.diffLineAddDecorationBackground=E.ModelDecorationOptions.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),e.diffLineDeleteDecorationBackground=E.ModelDecorationOptions.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),e.diffAddDecoration=E.ModelDecorationOptions.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),e.diffWholeLineAddDecoration=E.ModelDecorationOptions.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),e.diffAddDecorationEmpty=E.ModelDecorationOptions.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),e.diffDeleteDecoration=E.ModelDecorationOptions.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),e.diffWholeLineDeleteDecoration=E.ModelDecorationOptions.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),e.diffDeleteDecorationEmpty=E.ModelDecorationOptions.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})}),define(oe[283],re([1,0,5,13,14,26,2,21,30,19,75,138,402,658,664,85,56,9,95,117,58]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorViewZones=void 0,e.allowsTrueInlineDiffRendering=v;let d=class extends y.Disposable{constructor(S,D,I,T,M,A,R,N,O,x){super(),this._targetWindow=S,this._editors=D,this._diffModel=I,this._options=T,this._diffEditorWidget=M,this._canIgnoreViewZoneUpdateEvent=A,this._origViewZonesToIgnore=R,this._modViewZonesToIgnore=N,this._clipboardService=O,this._contextMenuService=x,this._originalTopPadding=(0,f.observableValue)(this,0),this._originalScrollOffset=(0,f.observableValue)(this,0),this._originalScrollOffsetAnimated=(0,o.animatedObservable)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,f.observableValue)(this,0),this._modifiedScrollOffset=(0,f.observableValue)(this,0),this._modifiedScrollOffsetAnimated=(0,o.animatedObservable)(this._targetWindow,this._modifiedScrollOffset,this._store);const F=(0,f.observableValue)("invalidateAlignmentsState",0),W=this._register(new E.RunOnceScheduler(()=>{F.set(F.get()+1,void 0)},0));this._register(this._editors.original.onDidChangeViewZones(Q=>{this._canIgnoreViewZoneUpdateEvent()||W.schedule()})),this._register(this._editors.modified.onDidChangeViewZones(Q=>{this._canIgnoreViewZoneUpdateEvent()||W.schedule()})),this._register(this._editors.original.onDidChangeConfiguration(Q=>{(Q.hasChanged(147)||Q.hasChanged(67))&&W.schedule()})),this._register(this._editors.modified.onDidChangeConfiguration(Q=>{(Q.hasChanged(147)||Q.hasChanged(67))&&W.schedule()}));const z=this._diffModel.map(Q=>Q?(0,f.observableFromEvent)(this,Q.model.original.onDidChangeTokens,()=>Q.model.original.tokenization.backgroundTokenizationState===2):void 0).map((Q,X)=>Q?.read(X)),q=(0,f.derived)(Q=>{const X=this._diffModel.read(Q),G=X?.diff.read(Q);if(!X||!G)return null;F.read(Q);const te=this._options.renderSideBySide.read(Q);return m(this._editors.original,this._editors.modified,G.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,te)}),H=(0,f.derived)(Q=>{const X=this._diffModel.read(Q)?.movedTextToCompare.read(Q);if(!X)return null;F.read(Q);const G=X.changes.map(P=>new s.DiffMapping(P));return m(this._editors.original,this._editors.modified,G,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)});function K(){const Q=document.createElement("div");return Q.className="diagonal-fill",Q}const U=this._register(new y.DisposableStore);this.viewZones=(0,f.derivedWithStore)(this,(Q,X)=>{U.clear();const G=q.read(Q)||[],P=[],te=[],se=this._modifiedTopPadding.read(Q);se>0&&te.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:se,showInHiddenAreas:!0,suppressMouseDown:!0});const ue=this._originalTopPadding.read(Q);ue>0&&P.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:ue,showInHiddenAreas:!0,suppressMouseDown:!0});const ge=this._options.renderSideBySide.read(Q),pe=ge?void 0:this._editors.modified._getViewModel()?.createLineBreaksComputer();if(pe){const $=this._editors.original.getModel();for(const Z of G)if(Z.diff)for(let ee=Z.originalRange.startLineNumber;ee<Z.originalRange.endLineNumberExclusive;ee++){if(ee>$.getLineCount())return{orig:P,mod:te};pe?.addRequest($.getLineContent(ee),null,null)}}const ce=pe?.finalize()??[];let ie=0;const ne=this._editors.modified.getOption(67),J=this._diffModel.read(Q)?.movedTextToCompare.read(Q),B=this._editors.original.getModel()?.mightContainNonBasicASCII()??!1,j=this._editors.original.getModel()?.mightContainRTL()??!1,V=i.RenderOptions.fromEditor(this._editors.modified);for(const $ of G)if($.diff&&!ge&&(!this._options.useTrueInlineDiffRendering.read(Q)||!v($.diff))){if(!$.originalRange.isEmpty){z.read(Q);const ee=document.createElement("div");ee.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const le=this._editors.original.getModel();if($.originalRange.endLineNumberExclusive-1>le.getLineCount())return{orig:P,mod:te};const de=new i.LineSource($.originalRange.mapToLineArray(Se=>le.tokenization.getLineTokens(Se)),$.originalRange.mapToLineArray(Se=>ce[ie++]),B,j),me=[];for(const Se of $.diff.innerChanges||[])me.push(new l.InlineDecoration(Se.originalRange.delta(-($.diff.original.startLineNumber-1)),n.diffDeleteDecoration.className,0));const be=(0,i.renderLines)(de,V,me,ee),ve=document.createElement("div");if(ve.className="inline-deleted-margin-view-zone",(0,p.applyFontInfo)(ve,V.fontInfo),this._options.renderIndicators.read(Q))for(let Se=0;Se<be.heightInLines;Se++){const ye=document.createElement("div");ye.className=`delete-sign ${_.ThemeIcon.asClassName(n.diffRemoveIcon)}`,ye.setAttribute("style",`position:absolute;top:${Se*ne}px;width:${V.lineDecorationsWidth}px;height:${ne}px;right:0;`),ve.appendChild(ye)}let Le;U.add(new t.InlineDiffDeletedCodeMargin(()=>(0,b.assertIsDefined)(Le),ve,this._editors.modified,$.diff,this._diffEditorWidget,be.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Se=0;Se<be.viewLineCounts.length;Se++){const ye=be.viewLineCounts[Se];ye>1&&P.push({afterLineNumber:$.originalRange.startLineNumber+Se,domNode:K(),heightInPx:(ye-1)*ne,showInHiddenAreas:!0,suppressMouseDown:!0})}te.push({afterLineNumber:$.modifiedRange.startLineNumber-1,domNode:ee,heightInPx:be.heightInLines*ne,minWidthInPx:be.minWidthInPx,marginDomNode:ve,setZoneId(Se){Le=Se},showInHiddenAreas:!0,suppressMouseDown:!0})}const Z=document.createElement("div");Z.className="gutter-delete",P.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:K(),heightInPx:$.modifiedHeightInPx,marginDomNode:Z,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const Z=$.modifiedHeightInPx-$.originalHeightInPx;if(Z>0){if(J?.lineRangeMapping.original.delta(-1).deltaLength(2).contains($.originalRange.endLineNumberExclusive-1))continue;P.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:K(),heightInPx:Z,showInHiddenAreas:!0,suppressMouseDown:!0})}else{let ee=function(){const de=document.createElement("div");return de.className="arrow-revert-change "+_.ThemeIcon.asClassName(L.Codicon.arrowRight),X.add((0,c.addDisposableListener)(de,"mousedown",me=>me.stopPropagation())),X.add((0,c.addDisposableListener)(de,"click",me=>{me.stopPropagation(),M.revert($.diff)})),(0,c.$)("div",{},de)};if(J?.lineRangeMapping.modified.delta(-1).deltaLength(2).contains($.modifiedRange.endLineNumberExclusive-1))continue;let le;$.diff&&$.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(Q)&&(le=ee()),te.push({afterLineNumber:$.modifiedRange.endLineNumberExclusive-1,domNode:K(),heightInPx:-Z,marginDomNode:le,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const $ of H.read(Q)??[]){if(!J?.lineRangeMapping.original.intersect($.originalRange)||!J?.lineRangeMapping.modified.intersect($.modifiedRange))continue;const Z=$.modifiedHeightInPx-$.originalHeightInPx;Z>0?P.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:K(),heightInPx:Z,showInHiddenAreas:!0,suppressMouseDown:!0}):te.push({afterLineNumber:$.modifiedRange.endLineNumberExclusive-1,domNode:K(),heightInPx:-Z,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:P,mod:te}});let Y=!1;this._register(this._editors.original.onDidScrollChange(Q=>{Q.scrollLeftChanged&&!Y&&(Y=!0,this._editors.modified.setScrollLeft(Q.scrollLeft),Y=!1)})),this._register(this._editors.modified.onDidScrollChange(Q=>{Q.scrollLeftChanged&&!Y&&(Y=!0,this._editors.original.setScrollLeft(Q.scrollLeft),Y=!1)})),this._originalScrollTop=(0,f.observableFromEvent)(this._editors.original.onDidScrollChange,()=>this._editors.original.getScrollTop()),this._modifiedScrollTop=(0,f.observableFromEvent)(this._editors.modified.onDidScrollChange,()=>this._editors.modified.getScrollTop()),this._register((0,f.autorun)(Q=>{const X=this._originalScrollTop.read(Q)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(Q))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(Q));X!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(X,1)})),this._register((0,f.autorun)(Q=>{const X=this._modifiedScrollTop.read(Q)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(Q))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(Q));X!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(X,1)})),this._register((0,f.autorun)(Q=>{const X=this._diffModel.read(Q)?.movedTextToCompare.read(Q);let G=0;if(X){const P=this._editors.original.getTopForLineNumber(X.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();G=this._editors.modified.getTopForLineNumber(X.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-P}G>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(G,void 0)):G<0?(this._modifiedTopPadding.set(-G,void 0),this._originalTopPadding.set(0,void 0)):setTimeout(()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)},400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-G,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+G,void 0,!0)}))}};e.DiffEditorViewZones=d,e.DiffEditorViewZones=d=De([he(8,a.IClipboardService),he(9,r.IContextMenuService)],d);function m(w,S,D,I,T,M){const A=new k.ArrayQueue(h(w,I)),R=new k.ArrayQueue(h(S,T)),N=w.getOption(67),O=S.getOption(67),x=[];let F=0,W=0;function z(q,H){for(;;){let K=A.peek(),U=R.peek();if(K&&K.lineNumber>=q&&(K=void 0),U&&U.lineNumber>=H&&(U=void 0),!K&&!U)break;const Y=K?K.lineNumber-F:Number.MAX_VALUE,Q=U?U.lineNumber-W:Number.MAX_VALUE;Y<Q?(A.dequeue(),U={lineNumber:K.lineNumber-F+W,heightInPx:0}):Y>Q?(R.dequeue(),K={lineNumber:U.lineNumber-W+F,heightInPx:0}):(A.dequeue(),R.dequeue()),x.push({originalRange:g.LineRange.ofLength(K.lineNumber,1),modifiedRange:g.LineRange.ofLength(U.lineNumber,1),originalHeightInPx:N+K.heightInPx,modifiedHeightInPx:O+U.heightInPx,diff:void 0})}}for(const q of D){let Q=function(X,G,P=!1){if(X<Y||G<U)return;if(K)K=!1;else if(!P&&(X===Y||G===U))return;const te=new g.LineRange(Y,X),se=new g.LineRange(U,G);if(te.isEmpty&&se.isEmpty)return;const ue=A.takeWhile(pe=>pe.lineNumber<X)?.reduce((pe,ce)=>pe+ce.heightInPx,0)??0,ge=R.takeWhile(pe=>pe.lineNumber<G)?.reduce((pe,ce)=>pe+ce.heightInPx,0)??0;x.push({originalRange:te,modifiedRange:se,originalHeightInPx:te.length*N+ue,modifiedHeightInPx:se.length*O+ge,diff:q.lineRangeMapping}),Y=X,U=G};const H=q.lineRangeMapping;z(H.original.startLineNumber,H.modified.startLineNumber);let K=!0,U=H.modified.startLineNumber,Y=H.original.startLineNumber;if(M)for(const X of H.innerChanges||[]){X.originalRange.startColumn>1&&X.modifiedRange.startColumn>1&&Q(X.originalRange.startLineNumber,X.modifiedRange.startLineNumber);const G=w.getModel(),P=X.originalRange.endLineNumber<=G.getLineCount()?G.getLineMaxColumn(X.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;X.originalRange.endColumn<P&&Q(X.originalRange.endLineNumber,X.modifiedRange.endLineNumber)}Q(H.original.endLineNumberExclusive,H.modified.endLineNumberExclusive,!0),F=H.original.endLineNumberExclusive,W=H.modified.endLineNumberExclusive}return z(Number.MAX_VALUE,Number.MAX_VALUE),x}function h(w,S){const D=[],I=[],T=w.getOption(147).wrappingColumn!==-1,M=w._getViewModel().coordinatesConverter,A=w.getOption(67);if(T)for(let N=1;N<=w.getModel().getLineCount();N++){const O=M.getModelLineViewLineCount(N);O>1&&I.push({lineNumber:N,heightInPx:A*(O-1)})}for(const N of w.getWhitespaces()){if(S.has(N.id))continue;const O=N.afterLineNumber===0?0:M.convertViewPositionToModelPosition(new u.Position(N.afterLineNumber,1)).lineNumber;D.push({lineNumber:O,heightInPx:N.height})}return(0,o.joinCombine)(D,I,N=>N.lineNumber,(N,O)=>({lineNumber:N.lineNumber,heightInPx:N.heightInPx+O.heightInPx}))}function v(w){return w.innerChanges?w.innerChanges.every(S=>C(S.modifiedRange)&&C(S.originalRange)):!1}function C(w){return w.startLineNumber===w.endLineNumber}}),define(oe[797],re([1,0,2,21,283,368,138,85]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorDecorations=void 0;class _ extends c.Disposable{constructor(p,n,s,t){super(),this._editors=p,this._diffModel=n,this._options=s,this._decorations=(0,k.derived)(this,i=>{const o=this._diffModel.read(i),g=o?.diff.read(i);if(!g)return null;const u=this._diffModel.read(i).movedTextToCompare.read(i),l=this._options.renderIndicators.read(i),a=this._options.showEmptyDecorations.read(i),r=[],d=[];if(!u)for(const h of g.mappings)if(h.lineRangeMapping.original.isEmpty||r.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:l?y.diffLineDeleteDecorationBackgroundWithIndicator:y.diffLineDeleteDecorationBackground}),h.lineRangeMapping.modified.isEmpty||d.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:l?y.diffLineAddDecorationBackgroundWithIndicator:y.diffLineAddDecorationBackground}),h.lineRangeMapping.modified.isEmpty||h.lineRangeMapping.original.isEmpty)h.lineRangeMapping.original.isEmpty||r.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:y.diffWholeLineDeleteDecoration}),h.lineRangeMapping.modified.isEmpty||d.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:y.diffWholeLineAddDecoration});else{const v=this._options.useTrueInlineDiffRendering.read(i)&&(0,E.allowsTrueInlineDiffRendering)(h.lineRangeMapping);for(const C of h.lineRangeMapping.innerChanges||[])if(h.lineRangeMapping.original.contains(C.originalRange.startLineNumber)&&r.push({range:C.originalRange,options:C.originalRange.isEmpty()&&a?y.diffDeleteDecorationEmpty:y.diffDeleteDecoration}),h.lineRangeMapping.modified.contains(C.modifiedRange.startLineNumber)&&d.push({range:C.modifiedRange,options:C.modifiedRange.isEmpty()&&a&&!v?y.diffAddDecorationEmpty:y.diffAddDecoration}),v){const w=o.model.original.getValueInRange(C.originalRange);d.push({range:C.modifiedRange,options:{description:"deleted-text",before:{content:w,inlineClassName:"inline-deleted-text"},zIndex:1e5,showIfCollapsed:!0}})}}if(u)for(const h of u.changes){const v=h.original.toInclusiveRange();v&&r.push({range:v,options:l?y.diffLineDeleteDecorationBackgroundWithIndicator:y.diffLineDeleteDecorationBackground});const C=h.modified.toInclusiveRange();C&&d.push({range:C,options:l?y.diffLineAddDecorationBackgroundWithIndicator:y.diffLineAddDecorationBackground});for(const w of h.innerChanges||[])r.push({range:w.originalRange,options:y.diffDeleteDecoration}),d.push({range:w.modifiedRange,options:y.diffAddDecoration})}const m=this._diffModel.read(i).activeMovedText.read(i);for(const h of g.movedTexts)r.push({range:h.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(h===m?" currentMove":""),blockPadding:[L.MovedBlocksLinesFeature.movedCodeBlockPadding,0,L.MovedBlocksLinesFeature.movedCodeBlockPadding,L.MovedBlocksLinesFeature.movedCodeBlockPadding]}}),d.push({range:h.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(h===m?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:r,modifiedDecorations:d}}),this._register((0,f.applyObservableDecorations)(this._editors.original,this._decorations.map(i=>i?.originalDecorations||[]))),this._register((0,f.applyObservableDecorations)(this._editors.modified,this._decorations.map(i=>i?.modifiedDecorations||[])))}}e.DiffEditorDecorations=_}),define(oe[798],re([1,0,21,189,283,321,37,60]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorOptions=void 0;let _=class{get editorOptions(){return this._options}constructor(i,o){this._accessibilityService=o,this._diffEditorWidth=(0,c.observableValue)(this,0),this._screenReaderMode=(0,c.observableFromEvent)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this.couldShowInlineViewBecauseOfSize=(0,c.derived)(this,u=>this._options.read(u).renderSideBySide&&this._diffEditorWidth.read(u)<=this._options.read(u).renderSideBySideInlineBreakpoint),this.renderOverviewRuler=(0,c.derived)(this,u=>this._options.read(u).renderOverviewRuler),this.renderSideBySide=(0,c.derived)(this,u=>this.compactMode.read(u)&&this.shouldRenderInlineViewInSmartMode.read(u)?!1:this._options.read(u).renderSideBySide&&!(this._options.read(u).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(u)&&!this._screenReaderMode.read(u))),this.readOnly=(0,c.derived)(this,u=>this._options.read(u).readOnly),this.shouldRenderOldRevertArrows=(0,c.derived)(this,u=>!(!this._options.read(u).renderMarginRevertIcon||!this.renderSideBySide.read(u)||this.readOnly.read(u)||this.shouldRenderGutterMenu.read(u))),this.shouldRenderGutterMenu=(0,c.derived)(this,u=>this._options.read(u).renderGutterMenu),this.renderIndicators=(0,c.derived)(this,u=>this._options.read(u).renderIndicators),this.enableSplitViewResizing=(0,c.derived)(this,u=>this._options.read(u).enableSplitViewResizing),this.splitViewDefaultRatio=(0,c.derived)(this,u=>this._options.read(u).splitViewDefaultRatio),this.ignoreTrimWhitespace=(0,c.derived)(this,u=>this._options.read(u).ignoreTrimWhitespace),this.maxComputationTimeMs=(0,c.derived)(this,u=>this._options.read(u).maxComputationTime),this.showMoves=(0,c.derived)(this,u=>this._options.read(u).experimental.showMoves&&this.renderSideBySide.read(u)),this.isInEmbeddedEditor=(0,c.derived)(this,u=>this._options.read(u).isInEmbeddedEditor),this.diffWordWrap=(0,c.derived)(this,u=>this._options.read(u).diffWordWrap),this.originalEditable=(0,c.derived)(this,u=>this._options.read(u).originalEditable),this.diffCodeLens=(0,c.derived)(this,u=>this._options.read(u).diffCodeLens),this.accessibilityVerbose=(0,c.derived)(this,u=>this._options.read(u).accessibilityVerbose),this.diffAlgorithm=(0,c.derived)(this,u=>this._options.read(u).diffAlgorithm),this.showEmptyDecorations=(0,c.derived)(this,u=>this._options.read(u).experimental.showEmptyDecorations),this.onlyShowAccessibleDiffViewer=(0,c.derived)(this,u=>this._options.read(u).onlyShowAccessibleDiffViewer),this.compactMode=(0,c.derived)(this,u=>this._options.read(u).compactMode),this.trueInlineDiffRenderingEnabled=(0,c.derived)(this,u=>this._options.read(u).experimental.useTrueInlineView),this.useTrueInlineDiffRendering=(0,c.derived)(this,u=>!this.renderSideBySide.read(u)&&this.trueInlineDiffRenderingEnabled.read(u)),this.hideUnchangedRegions=(0,c.derived)(this,u=>this._options.read(u).hideUnchangedRegions.enabled),this.hideUnchangedRegionsRevealLineCount=(0,c.derived)(this,u=>this._options.read(u).hideUnchangedRegions.revealLineCount),this.hideUnchangedRegionsContextLineCount=(0,c.derived)(this,u=>this._options.read(u).hideUnchangedRegions.contextLineCount),this.hideUnchangedRegionsMinimumLineCount=(0,c.derived)(this,u=>this._options.read(u).hideUnchangedRegions.minimumLineCount),this._model=(0,c.observableValue)(this,void 0),this.shouldRenderInlineViewInSmartMode=this._model.map(this,u=>(0,k.derivedConstOnceDefined)(this,l=>{const a=u?.diff.read(l);return a?b(a,this.trueInlineDiffRenderingEnabled.read(l)):void 0})).flatten().map(this,u=>!!u),this.inlineViewHideOriginalLineNumbers=this.compactMode;const g={...i,...s(i,L.diffEditorDefaultOptions)};this._options=(0,c.observableValue)(this,g)}updateOptions(i){const o=s(i,this._options.get()),g={...this._options.get(),...i,...o};this._options.set(g,void 0,{changedOptions:i})}setWidth(i){this._diffEditorWidth.set(i,void 0)}setModel(i){this._model.set(i,void 0)}};e.DiffEditorOptions=_,e.DiffEditorOptions=_=De([he(1,f.IAccessibilityService)],_);function b(t,i){return t.mappings.every(o=>p(o.lineRangeMapping)||n(o.lineRangeMapping)||i&&(0,E.allowsTrueInlineDiffRendering)(o.lineRangeMapping))}function p(t){return t.original.length===0}function n(t){return t.modified.length===0}function s(t,i){return{enableSplitViewResizing:(0,y.boolean)(t.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:(0,y.clampedFloat)(t.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,y.boolean)(t.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,y.boolean)(t.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,y.clampedInt)(t.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,y.clampedInt)(t.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,y.boolean)(t.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,y.boolean)(t.renderIndicators,i.renderIndicators),originalEditable:(0,y.boolean)(t.originalEditable,i.originalEditable),diffCodeLens:(0,y.boolean)(t.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,y.boolean)(t.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(0,y.stringSet)(t.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,y.stringSet)(t.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,y.boolean)(t.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:(0,y.boolean)(t.experimental?.showMoves,i.experimental.showMoves),showEmptyDecorations:(0,y.boolean)(t.experimental?.showEmptyDecorations,i.experimental.showEmptyDecorations),useTrueInlineView:(0,y.boolean)(t.experimental?.useTrueInlineView,i.experimental.useTrueInlineView)},hideUnchangedRegions:{enabled:(0,y.boolean)(t.hideUnchangedRegions?.enabled??t.experimental?.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:(0,y.clampedInt)(t.hideUnchangedRegions?.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,y.clampedInt)(t.hideUnchangedRegions?.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,y.clampedInt)(t.hideUnchangedRegions?.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,y.boolean)(t.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,y.boolean)(t.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,y.clampedInt)(t.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,y.boolean)(t.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited),renderGutterMenu:(0,y.boolean)(t.renderGutterMenu,i.renderGutterMenu),compactMode:(0,y.boolean)(t.compactMode,i.compactMode)}}}),define(oe[799],re([1,0,6,2,16,36,197,70,42,209,27,217,129,372,47,54,34]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultModelSHA1Computer=e.ModelService=void 0;function l(v){return v.toString()}class a{constructor(C,w,S){this.model=C,this._modelEventListeners=new k.DisposableStore,this.model=C,this._modelEventListeners.add(C.onWillDispose(()=>w(C))),this._modelEventListeners.add(C.onDidChangeLanguage(D=>S(C,D)))}dispose(){this._modelEventListeners.dispose()}}const r=E.isLinux||E.isMacintosh?1:2;class d{constructor(C,w,S,D,I,T,M,A){this.uri=C,this.initialUndoRedoSnapshot=w,this.time=S,this.sharesUndoRedoStack=D,this.heapSize=I,this.sha1=T,this.versionId=M,this.alternativeVersionId=A}}let m=class extends k.Disposable{static{u=this}static{this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024}constructor(C,w,S,D,I){super(),this._configurationService=C,this._resourcePropertiesService=w,this._undoRedoService=S,this._languageService=D,this._languageConfigurationService=I,this._onModelAdded=this._register(new c.Emitter),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new c.Emitter),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new c.Emitter),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(T=>this._updateModelOptions(T))),this._updateModelOptions(void 0)}static _readModelOptions(C,w){let S=y.EDITOR_MODEL_DEFAULTS.tabSize;if(C.editor&&typeof C.editor.tabSize<"u"){const x=parseInt(C.editor.tabSize,10);isNaN(x)||(S=x),S<1&&(S=1)}let D="tabSize";if(C.editor&&typeof C.editor.indentSize<"u"&&C.editor.indentSize!=="tabSize"){const x=parseInt(C.editor.indentSize,10);isNaN(x)||(D=Math.max(x,1))}let I=y.EDITOR_MODEL_DEFAULTS.insertSpaces;C.editor&&typeof C.editor.insertSpaces<"u"&&(I=C.editor.insertSpaces==="false"?!1:!!C.editor.insertSpaces);let T=r;const M=C.eol;M===`\r
`?T=2:M===`
`&&(T=1);let A=y.EDITOR_MODEL_DEFAULTS.trimAutoWhitespace;C.editor&&typeof C.editor.trimAutoWhitespace<"u"&&(A=C.editor.trimAutoWhitespace==="false"?!1:!!C.editor.trimAutoWhitespace);let R=y.EDITOR_MODEL_DEFAULTS.detectIndentation;C.editor&&typeof C.editor.detectIndentation<"u"&&(R=C.editor.detectIndentation==="false"?!1:!!C.editor.detectIndentation);let N=y.EDITOR_MODEL_DEFAULTS.largeFileOptimizations;C.editor&&typeof C.editor.largeFileOptimizations<"u"&&(N=C.editor.largeFileOptimizations==="false"?!1:!!C.editor.largeFileOptimizations);let O=y.EDITOR_MODEL_DEFAULTS.bracketPairColorizationOptions;return C.editor?.bracketPairColorization&&typeof C.editor.bracketPairColorization=="object"&&(O={enabled:!!C.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!C.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:w,tabSize:S,indentSize:D,insertSpaces:I,detectIndentation:R,defaultEOL:T,trimAutoWhitespace:A,largeFileOptimizations:N,bracketPairColorizationOptions:O}}_getEOL(C,w){if(C)return this._resourcePropertiesService.getEOL(C,w);const S=this._configurationService.getValue("files.eol",{overrideIdentifier:w});return S&&typeof S=="string"&&S!=="auto"?S:E.OS===3||E.OS===2?`
`:`\r
`}_shouldRestoreUndoStack(){const C=this._configurationService.getValue("files.restoreUndoStack");return typeof C=="boolean"?C:!0}getCreationOptions(C,w,S){const D=typeof C=="string"?C:C.languageId;let I=this._modelCreationOptionsByLanguageAndResource[D+w];if(!I){const T=this._configurationService.getValue("editor",{overrideIdentifier:D,resource:w}),M=this._getEOL(w,D);I=u._readModelOptions({editor:T,eol:M},S),this._modelCreationOptionsByLanguageAndResource[D+w]=I}return I}_updateModelOptions(C){const w=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const S=Object.keys(this._models);for(let D=0,I=S.length;D<I;D++){const T=S[D],M=this._models[T],A=M.model.getLanguageId(),R=M.model.uri;if(C&&!C.affectsConfiguration("editor",{overrideIdentifier:A,resource:R})&&!C.affectsConfiguration("files.eol",{overrideIdentifier:A,resource:R}))continue;const N=w[A+R],O=this.getCreationOptions(A,R,M.model.isForSimpleWidget);u._setModelOptionsForModel(M.model,O,N)}}static _setModelOptionsForModel(C,w,S){S&&S.defaultEOL!==w.defaultEOL&&C.getLineCount()===1&&C.setEOL(w.defaultEOL===1?0:1),!(S&&S.detectIndentation===w.detectIndentation&&S.insertSpaces===w.insertSpaces&&S.tabSize===w.tabSize&&S.indentSize===w.indentSize&&S.trimAutoWhitespace===w.trimAutoWhitespace&&(0,o.equals)(S.bracketPairColorizationOptions,w.bracketPairColorizationOptions))&&(w.detectIndentation?(C.detectIndentation(w.insertSpaces,w.tabSize),C.updateOptions({trimAutoWhitespace:w.trimAutoWhitespace,bracketColorizationOptions:w.bracketPairColorizationOptions})):C.updateOptions({insertSpaces:w.insertSpaces,tabSize:w.tabSize,indentSize:w.indentSize,trimAutoWhitespace:w.trimAutoWhitespace,bracketColorizationOptions:w.bracketPairColorizationOptions}))}_insertDisposedModel(C){this._disposedModels.set(l(C.uri),C),this._disposedModelsHeapSize+=C.heapSize}_removeDisposedModel(C){const w=this._disposedModels.get(l(C));return w&&(this._disposedModelsHeapSize-=w.heapSize),this._disposedModels.delete(l(C)),w}_ensureDisposedModelsHeapSize(C){if(this._disposedModelsHeapSize>C){const w=[];for(this._disposedModels.forEach(S=>{S.sharesUndoRedoStack||w.push(S)}),w.sort((S,D)=>S.time-D.time);w.length>0&&this._disposedModelsHeapSize>C;){const S=w.shift();this._removeDisposedModel(S.uri),S.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(S.initialUndoRedoSnapshot)}}}_createModelData(C,w,S,D){const I=this.getCreationOptions(w,S,D),T=new L.TextModel(C,w,I,S,this._undoRedoService,this._languageService,this._languageConfigurationService);if(S&&this._disposedModels.has(l(S))){const R=this._removeDisposedModel(S),N=this._undoRedoService.getElements(S),O=this._getSHA1Computer(),x=O.canComputeSHA1(T)?O.computeSHA1(T)===R.sha1:!1;if(x||R.sharesUndoRedoStack){for(const F of N.past)(0,t.isEditStackElement)(F)&&F.matchesResource(S)&&F.setModel(T);for(const F of N.future)(0,t.isEditStackElement)(F)&&F.matchesResource(S)&&F.setModel(T);this._undoRedoService.setElementsValidFlag(S,!0,F=>(0,t.isEditStackElement)(F)&&F.matchesResource(S)),x&&(T._overwriteVersionId(R.versionId),T._overwriteAlternativeVersionId(R.alternativeVersionId),T._overwriteInitialUndoRedoSnapshot(R.initialUndoRedoSnapshot))}else R.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(R.initialUndoRedoSnapshot)}const M=l(T.uri);if(this._models[M])throw new Error("ModelService: Cannot add model because it already exists!");const A=new a(T,R=>this._onWillDispose(R),(R,N)=>this._onDidChangeLanguage(R,N));return this._models[M]=A,A}createModel(C,w,S,D=!1){let I;return w?I=this._createModelData(C,w,S,D):I=this._createModelData(C,f.PLAINTEXT_LANGUAGE_ID,S,D),this._onModelAdded.fire(I.model),I.model}getModels(){const C=[],w=Object.keys(this._models);for(let S=0,D=w.length;S<D;S++){const I=w[S];C.push(this._models[I].model)}return C}getModel(C){const w=l(C),S=this._models[w];return S?S.model:null}_schemaShouldMaintainUndoRedoElements(C){return C.scheme===i.Schemas.file||C.scheme===i.Schemas.vscodeRemote||C.scheme===i.Schemas.vscodeUserData||C.scheme===i.Schemas.vscodeNotebookCell||C.scheme==="fake-fs"}_onWillDispose(C){const w=l(C.uri),S=this._models[w],D=this._undoRedoService.getUriComparisonKey(C.uri)!==C.uri.toString();let I=!1,T=0;if(D||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(C.uri)){const R=this._undoRedoService.getElements(C.uri);if(R.past.length>0||R.future.length>0){for(const N of R.past)(0,t.isEditStackElement)(N)&&N.matchesResource(C.uri)&&(I=!0,T+=N.heapSize(C.uri),N.setModel(C.uri));for(const N of R.future)(0,t.isEditStackElement)(N)&&N.matchesResource(C.uri)&&(I=!0,T+=N.heapSize(C.uri),N.setModel(C.uri))}}const M=u.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,A=this._getSHA1Computer();if(I)if(!D&&(T>M||!A.canComputeSHA1(C))){const R=S.model.getInitialUndoRedoSnapshot();R!==null&&this._undoRedoService.restoreSnapshot(R)}else this._ensureDisposedModelsHeapSize(M-T),this._undoRedoService.setElementsValidFlag(C.uri,!1,R=>(0,t.isEditStackElement)(R)&&R.matchesResource(C.uri)),this._insertDisposedModel(new d(C.uri,S.model.getInitialUndoRedoSnapshot(),Date.now(),D,T,A.computeSHA1(C),C.getVersionId(),C.getAlternativeVersionId()));else if(!D){const R=S.model.getInitialUndoRedoSnapshot();R!==null&&this._undoRedoService.restoreSnapshot(R)}delete this._models[w],S.dispose(),delete this._modelCreationOptionsByLanguageAndResource[C.getLanguageId()+C.uri],this._onModelRemoved.fire(C)}_onDidChangeLanguage(C,w){const S=w.oldLanguage,D=C.getLanguageId(),I=this.getCreationOptions(S,C.uri,C.isForSimpleWidget),T=this.getCreationOptions(D,C.uri,C.isForSimpleWidget);u._setModelOptionsForModel(C,T,I),this._onModelModeChanged.fire({model:C,oldLanguageId:S})}_getSHA1Computer(){return new h}};e.ModelService=m,e.ModelService=m=u=De([he(0,p.IConfigurationService),he(1,b.ITextResourcePropertiesService),he(2,n.IUndoRedoService),he(3,_.ILanguageService),he(4,g.ILanguageConfigurationService)],m);class h{static{this.MAX_MODEL_SIZE=10*1024*1024}canComputeSHA1(C){return C.getValueLength()<=h.MAX_MODEL_SIZE}computeSHA1(C){const w=new s.StringSHA1,S=C.createSnapshot();let D;for(;D=S.read();)w.update(D);return w.digest()}}e.DefaultModelSHA1Computer=h}),define(oe[800],re([1,0,13,9,4,250,36,131,254,623,337,95]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewModelLinesFromModelAsIs=e.ViewModelLinesFromProjectedModel=void 0;class s{constructor(r,d,m,h,v,C,w,S,D,I){this._editorId=r,this.model=d,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=m,this._monospaceLineBreaksComputerFactory=h,this.fontInfo=v,this.tabSize=C,this.wrappingStrategy=w,this.wrappingColumn=S,this.wrappingIndent=D,this.wordBreak=I,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new g(this)}_constructLines(r,d){this.modelLineProjections=[],r&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const m=this.model.getLinesContent(),h=this.model.getInjectedTextDecorations(this._editorId),v=m.length,C=this.createLineBreaksComputer(),w=new c.ArrayQueue(f.LineInjectedText.fromDecorations(h));for(let N=0;N<v;N++){const O=w.takeWhile(x=>x.lineNumber===N+1);C.addRequest(m[N],O,d?d[N]:null)}const S=C.finalize(),D=[],I=this.hiddenAreasDecorationIds.map(N=>this.model.getDecorationRange(N)).sort(E.Range.compareRangesUsingStarts);let T=1,M=0,A=-1,R=A+1<I.length?M+1:v+2;for(let N=0;N<v;N++){const O=N+1;O===R&&(A++,T=I[A].startLineNumber,M=I[A].endLineNumber,R=A+1<I.length?M+1:v+2);const x=O>=T&&O<=M,F=(0,b.createModelLineProjection)(S[N],!x);D[N]=F.getViewLineCount(),this.modelLineProjections[N]=F}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new p.ConstantTimePrefixSumComputer(D)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(r=>this.model.getDecorationRange(r))}setHiddenAreas(r){const d=r.map(M=>this.model.validateRange(M)),m=t(d),h=this.hiddenAreasDecorationIds.map(M=>this.model.getDecorationRange(M)).sort(E.Range.compareRangesUsingStarts);if(m.length===h.length){let M=!1;for(let A=0;A<m.length;A++)if(!m[A].equalsRange(h[A])){M=!0;break}if(!M)return!1}const v=m.map(M=>({range:M,options:y.ModelDecorationOptions.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,v);const C=m;let w=1,S=0,D=-1,I=D+1<C.length?S+1:this.modelLineProjections.length+2,T=!1;for(let M=0;M<this.modelLineProjections.length;M++){const A=M+1;A===I&&(D++,w=C[D].startLineNumber,S=C[D].endLineNumber,I=D+1<C.length?S+1:this.modelLineProjections.length+2);let R=!1;if(A>=w&&A<=S?this.modelLineProjections[M].isVisible()&&(this.modelLineProjections[M]=this.modelLineProjections[M].setVisible(!1),R=!0):(T=!0,this.modelLineProjections[M].isVisible()||(this.modelLineProjections[M]=this.modelLineProjections[M].setVisible(!0),R=!0)),R){const N=this.modelLineProjections[M].getViewLineCount();this.projectedModelLineLineCounts.setValue(M,N)}}return T||this.setHiddenAreas([]),!0}modelPositionIsVisible(r,d){return r<1||r>this.modelLineProjections.length?!1:this.modelLineProjections[r-1].isVisible()}getModelLineViewLineCount(r){return r<1||r>this.modelLineProjections.length?1:this.modelLineProjections[r-1].getViewLineCount()}setTabSize(r){return this.tabSize===r?!1:(this.tabSize=r,this._constructLines(!1,null),!0)}setWrappingSettings(r,d,m,h,v){const C=this.fontInfo.equals(r),w=this.wrappingStrategy===d,S=this.wrappingColumn===m,D=this.wrappingIndent===h,I=this.wordBreak===v;if(C&&w&&S&&D&&I)return!1;const T=C&&w&&!S&&D&&I;this.fontInfo=r,this.wrappingStrategy=d,this.wrappingColumn=m,this.wrappingIndent=h,this.wordBreak=v;let M=null;if(T){M=[];for(let A=0,R=this.modelLineProjections.length;A<R;A++)M[A]=this.modelLineProjections[A].getProjectionData()}return this._constructLines(!1,M),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(r,d,m){if(!r||r<=this._validModelVersionId)return null;const h=d===1?1:this.projectedModelLineLineCounts.getPrefixSum(d-1)+1,v=this.projectedModelLineLineCounts.getPrefixSum(m);return this.modelLineProjections.splice(d-1,m-d+1),this.projectedModelLineLineCounts.removeValues(d-1,m-d+1),new _.ViewLinesDeletedEvent(h,v)}onModelLinesInserted(r,d,m,h){if(!r||r<=this._validModelVersionId)return null;const v=d>2&&!this.modelLineProjections[d-2].isVisible(),C=d===1?1:this.projectedModelLineLineCounts.getPrefixSum(d-1)+1;let w=0;const S=[],D=[];for(let I=0,T=h.length;I<T;I++){const M=(0,b.createModelLineProjection)(h[I],!v);S.push(M);const A=M.getViewLineCount();w+=A,D[I]=A}return this.modelLineProjections=this.modelLineProjections.slice(0,d-1).concat(S).concat(this.modelLineProjections.slice(d-1)),this.projectedModelLineLineCounts.insertValues(d-1,D),new _.ViewLinesInsertedEvent(C,C+w-1)}onModelLineChanged(r,d,m){if(r!==null&&r<=this._validModelVersionId)return[!1,null,null,null];const h=d-1,v=this.modelLineProjections[h].getViewLineCount(),C=this.modelLineProjections[h].isVisible(),w=(0,b.createModelLineProjection)(m,C);this.modelLineProjections[h]=w;const S=this.modelLineProjections[h].getViewLineCount();let D=!1,I=0,T=-1,M=0,A=-1,R=0,N=-1;v>S?(I=this.projectedModelLineLineCounts.getPrefixSum(d-1)+1,T=I+S-1,R=T+1,N=R+(v-S)-1,D=!0):v<S?(I=this.projectedModelLineLineCounts.getPrefixSum(d-1)+1,T=I+v-1,M=T+1,A=M+(S-v)-1,D=!0):(I=this.projectedModelLineLineCounts.getPrefixSum(d-1)+1,T=I+S-1),this.projectedModelLineLineCounts.setValue(h,S);const O=I<=T?new _.ViewLinesChangedEvent(I,T-I+1):null,x=M<=A?new _.ViewLinesInsertedEvent(M,A):null,F=R<=N?new _.ViewLinesDeletedEvent(R,N):null;return[D,O,x,F]}acceptVersionId(r){this._validModelVersionId=r,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(r){if(r<1)return 1;const d=this.getViewLineCount();return r>d?d:r|0}getActiveIndentGuide(r,d,m){r=this._toValidViewLineNumber(r),d=this._toValidViewLineNumber(d),m=this._toValidViewLineNumber(m);const h=this.convertViewPositionToModelPosition(r,this.getViewLineMinColumn(r)),v=this.convertViewPositionToModelPosition(d,this.getViewLineMinColumn(d)),C=this.convertViewPositionToModelPosition(m,this.getViewLineMinColumn(m)),w=this.model.guides.getActiveIndentGuide(h.lineNumber,v.lineNumber,C.lineNumber),S=this.convertModelPositionToViewPosition(w.startLineNumber,1),D=this.convertModelPositionToViewPosition(w.endLineNumber,this.model.getLineMaxColumn(w.endLineNumber));return{startLineNumber:S.lineNumber,endLineNumber:D.lineNumber,indent:w.indent}}getViewLineInfo(r){r=this._toValidViewLineNumber(r);const d=this.projectedModelLineLineCounts.getIndexOf(r-1),m=d.index,h=d.remainder;return new i(m+1,h)}getMinColumnOfViewLine(r){return this.modelLineProjections[r.modelLineNumber-1].getViewLineMinColumn(this.model,r.modelLineNumber,r.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(r){return this.modelLineProjections[r.modelLineNumber-1].getViewLineMaxColumn(this.model,r.modelLineNumber,r.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(r){const d=this.modelLineProjections[r.modelLineNumber-1],m=d.getViewLineMinColumn(this.model,r.modelLineNumber,r.modelLineWrappedLineIdx),h=d.getModelColumnOfViewPosition(r.modelLineWrappedLineIdx,m);return new k.Position(r.modelLineNumber,h)}getModelEndPositionOfViewLine(r){const d=this.modelLineProjections[r.modelLineNumber-1],m=d.getViewLineMaxColumn(this.model,r.modelLineNumber,r.modelLineWrappedLineIdx),h=d.getModelColumnOfViewPosition(r.modelLineWrappedLineIdx,m);return new k.Position(r.modelLineNumber,h)}getViewLineInfosGroupedByModelRanges(r,d){const m=this.getViewLineInfo(r),h=this.getViewLineInfo(d),v=new Array;let C=this.getModelStartPositionOfViewLine(m),w=new Array;for(let S=m.modelLineNumber;S<=h.modelLineNumber;S++){const D=this.modelLineProjections[S-1];if(D.isVisible()){const I=S===m.modelLineNumber?m.modelLineWrappedLineIdx:0,T=S===h.modelLineNumber?h.modelLineWrappedLineIdx+1:D.getViewLineCount();for(let M=I;M<T;M++)w.push(new i(S,M))}if(!D.isVisible()&&C){const I=new k.Position(S-1,this.model.getLineMaxColumn(S-1)+1),T=E.Range.fromPositions(C,I);v.push(new o(T,w)),w=[],C=null}else D.isVisible()&&!C&&(C=new k.Position(S,1))}if(C){const S=E.Range.fromPositions(C,this.getModelEndPositionOfViewLine(h));v.push(new o(S,w))}return v}getViewLinesBracketGuides(r,d,m,h){const v=m?this.convertViewPositionToModelPosition(m.lineNumber,m.column):null,C=[];for(const w of this.getViewLineInfosGroupedByModelRanges(r,d)){const S=w.modelRange.startLineNumber,D=this.model.guides.getLinesBracketGuides(S,w.modelRange.endLineNumber,v,h);for(const I of w.viewLines){const M=D[I.modelLineNumber-S].map(A=>{if(A.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[I.modelLineNumber-1].getViewPositionOfModelPosition(0,A.forWrappedLinesAfterColumn).lineNumber>=I.modelLineWrappedLineIdx||A.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[I.modelLineNumber-1].getViewPositionOfModelPosition(0,A.forWrappedLinesBeforeOrAtColumn).lineNumber<I.modelLineWrappedLineIdx)return;if(!A.horizontalLine)return A;let R=-1;if(A.column!==-1){const x=this.modelLineProjections[I.modelLineNumber-1].getViewPositionOfModelPosition(0,A.column);if(x.lineNumber===I.modelLineWrappedLineIdx)R=x.column;else if(x.lineNumber<I.modelLineWrappedLineIdx)R=this.getMinColumnOfViewLine(I);else if(x.lineNumber>I.modelLineWrappedLineIdx)return}const N=this.convertModelPositionToViewPosition(I.modelLineNumber,A.horizontalLine.endColumn),O=this.modelLineProjections[I.modelLineNumber-1].getViewPositionOfModelPosition(0,A.horizontalLine.endColumn);return O.lineNumber===I.modelLineWrappedLineIdx?new L.IndentGuide(A.visibleColumn,R,A.className,new L.IndentGuideHorizontalLine(A.horizontalLine.top,N.column),-1,-1):O.lineNumber<I.modelLineWrappedLineIdx||A.visibleColumn!==-1?void 0:new L.IndentGuide(A.visibleColumn,R,A.className,new L.IndentGuideHorizontalLine(A.horizontalLine.top,this.getMaxColumnOfViewLine(I)),-1,-1)});C.push(M.filter(A=>!!A))}}return C}getViewLinesIndentGuides(r,d){r=this._toValidViewLineNumber(r),d=this._toValidViewLineNumber(d);const m=this.convertViewPositionToModelPosition(r,this.getViewLineMinColumn(r)),h=this.convertViewPositionToModelPosition(d,this.getViewLineMaxColumn(d));let v=[];const C=[],w=[],S=m.lineNumber-1,D=h.lineNumber-1;let I=null;for(let R=S;R<=D;R++){const N=this.modelLineProjections[R];if(N.isVisible()){const O=N.getViewLineNumberOfModelPosition(0,R===S?m.column:1),x=N.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(R+1)),F=x-O+1;let W=0;F>1&&N.getViewLineMinColumn(this.model,R+1,x)===1&&(W=O===0?1:2),C.push(F),w.push(W),I===null&&(I=new k.Position(R+1,0))}else I!==null&&(v=v.concat(this.model.guides.getLinesIndentGuides(I.lineNumber,R)),I=null)}I!==null&&(v=v.concat(this.model.guides.getLinesIndentGuides(I.lineNumber,h.lineNumber)),I=null);const T=d-r+1,M=new Array(T);let A=0;for(let R=0,N=v.length;R<N;R++){let O=v[R];const x=Math.min(T-A,C[R]),F=w[R];let W;F===2?W=0:F===1?W=1:W=x;for(let z=0;z<x;z++)z===W&&(O=0),M[A++]=O}return M}getViewLineContent(r){const d=this.getViewLineInfo(r);return this.modelLineProjections[d.modelLineNumber-1].getViewLineContent(this.model,d.modelLineNumber,d.modelLineWrappedLineIdx)}getViewLineLength(r){const d=this.getViewLineInfo(r);return this.modelLineProjections[d.modelLineNumber-1].getViewLineLength(this.model,d.modelLineNumber,d.modelLineWrappedLineIdx)}getViewLineMinColumn(r){const d=this.getViewLineInfo(r);return this.modelLineProjections[d.modelLineNumber-1].getViewLineMinColumn(this.model,d.modelLineNumber,d.modelLineWrappedLineIdx)}getViewLineMaxColumn(r){const d=this.getViewLineInfo(r);return this.modelLineProjections[d.modelLineNumber-1].getViewLineMaxColumn(this.model,d.modelLineNumber,d.modelLineWrappedLineIdx)}getViewLineData(r){const d=this.getViewLineInfo(r);return this.modelLineProjections[d.modelLineNumber-1].getViewLineData(this.model,d.modelLineNumber,d.modelLineWrappedLineIdx)}getViewLinesData(r,d,m){r=this._toValidViewLineNumber(r),d=this._toValidViewLineNumber(d);const h=this.projectedModelLineLineCounts.getIndexOf(r-1);let v=r;const C=h.index,w=h.remainder,S=[];for(let D=C,I=this.model.getLineCount();D<I;D++){const T=this.modelLineProjections[D];if(!T.isVisible())continue;const M=D===C?w:0;let A=T.getViewLineCount()-M,R=!1;if(v+A>d&&(R=!0,A=d-v+1),T.getViewLinesData(this.model,D+1,M,A,v-r,m,S),v+=A,R)break}return S}validateViewPosition(r,d,m){r=this._toValidViewLineNumber(r);const h=this.projectedModelLineLineCounts.getIndexOf(r-1),v=h.index,C=h.remainder,w=this.modelLineProjections[v],S=w.getViewLineMinColumn(this.model,v+1,C),D=w.getViewLineMaxColumn(this.model,v+1,C);d<S&&(d=S),d>D&&(d=D);const I=w.getModelColumnOfViewPosition(C,d);return this.model.validatePosition(new k.Position(v+1,I)).equals(m)?new k.Position(r,d):this.convertModelPositionToViewPosition(m.lineNumber,m.column)}validateViewRange(r,d){const m=this.validateViewPosition(r.startLineNumber,r.startColumn,d.getStartPosition()),h=this.validateViewPosition(r.endLineNumber,r.endColumn,d.getEndPosition());return new E.Range(m.lineNumber,m.column,h.lineNumber,h.column)}convertViewPositionToModelPosition(r,d){const m=this.getViewLineInfo(r),h=this.modelLineProjections[m.modelLineNumber-1].getModelColumnOfViewPosition(m.modelLineWrappedLineIdx,d);return this.model.validatePosition(new k.Position(m.modelLineNumber,h))}convertViewRangeToModelRange(r){const d=this.convertViewPositionToModelPosition(r.startLineNumber,r.startColumn),m=this.convertViewPositionToModelPosition(r.endLineNumber,r.endColumn);return new E.Range(d.lineNumber,d.column,m.lineNumber,m.column)}convertModelPositionToViewPosition(r,d,m=2,h=!1,v=!1){const C=this.model.validatePosition(new k.Position(r,d)),w=C.lineNumber,S=C.column;let D=w-1,I=!1;if(v)for(;D<this.modelLineProjections.length&&!this.modelLineProjections[D].isVisible();)D++,I=!0;else for(;D>0&&!this.modelLineProjections[D].isVisible();)D--,I=!0;if(D===0&&!this.modelLineProjections[D].isVisible())return new k.Position(h?0:1,1);const T=1+this.projectedModelLineLineCounts.getPrefixSum(D);let M;return I?v?M=this.modelLineProjections[D].getViewPositionOfModelPosition(T,1,m):M=this.modelLineProjections[D].getViewPositionOfModelPosition(T,this.model.getLineMaxColumn(D+1),m):M=this.modelLineProjections[w-1].getViewPositionOfModelPosition(T,S,m),M}convertModelRangeToViewRange(r,d=0){if(r.isEmpty()){const m=this.convertModelPositionToViewPosition(r.startLineNumber,r.startColumn,d);return E.Range.fromPositions(m)}else{const m=this.convertModelPositionToViewPosition(r.startLineNumber,r.startColumn,1),h=this.convertModelPositionToViewPosition(r.endLineNumber,r.endColumn,0);return new E.Range(m.lineNumber,m.column,h.lineNumber,h.column)}}getViewLineNumberOfModelPosition(r,d){let m=r-1;if(this.modelLineProjections[m].isVisible()){const v=1+this.projectedModelLineLineCounts.getPrefixSum(m);return this.modelLineProjections[m].getViewLineNumberOfModelPosition(v,d)}for(;m>0&&!this.modelLineProjections[m].isVisible();)m--;if(m===0&&!this.modelLineProjections[m].isVisible())return 1;const h=1+this.projectedModelLineLineCounts.getPrefixSum(m);return this.modelLineProjections[m].getViewLineNumberOfModelPosition(h,this.model.getLineMaxColumn(m+1))}getDecorationsInRange(r,d,m,h,v){const C=this.convertViewPositionToModelPosition(r.startLineNumber,r.startColumn),w=this.convertViewPositionToModelPosition(r.endLineNumber,r.endColumn);if(w.lineNumber-C.lineNumber<=r.endLineNumber-r.startLineNumber)return this.model.getDecorationsInRange(new E.Range(C.lineNumber,1,w.lineNumber,w.column),d,m,h,v);let S=[];const D=C.lineNumber-1,I=w.lineNumber-1;let T=null;for(let N=D;N<=I;N++)if(this.modelLineProjections[N].isVisible())T===null&&(T=new k.Position(N+1,N===D?C.column:1));else if(T!==null){const x=this.model.getLineMaxColumn(N);S=S.concat(this.model.getDecorationsInRange(new E.Range(T.lineNumber,T.column,N,x),d,m,h)),T=null}T!==null&&(S=S.concat(this.model.getDecorationsInRange(new E.Range(T.lineNumber,T.column,w.lineNumber,w.column),d,m,h)),T=null),S.sort((N,O)=>{const x=E.Range.compareRangesUsingStarts(N.range,O.range);return x===0?N.id<O.id?-1:N.id>O.id?1:0:x});const M=[];let A=0,R=null;for(const N of S){const O=N.id;R!==O&&(R=O,M[A++]=N)}return M}getInjectedTextAt(r){const d=this.getViewLineInfo(r.lineNumber);return this.modelLineProjections[d.modelLineNumber-1].getInjectedTextAt(d.modelLineWrappedLineIdx,r.column)}normalizePosition(r,d){const m=this.getViewLineInfo(r.lineNumber);return this.modelLineProjections[m.modelLineNumber-1].normalizePosition(m.modelLineWrappedLineIdx,r,d)}getLineIndentColumn(r){const d=this.getViewLineInfo(r);return d.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(d.modelLineNumber):0}}e.ViewModelLinesFromProjectedModel=s;function t(a){if(a.length===0)return[];const r=a.slice();r.sort(E.Range.compareRangesUsingStarts);const d=[];let m=r[0].startLineNumber,h=r[0].endLineNumber;for(let v=1,C=r.length;v<C;v++){const w=r[v];w.startLineNumber>h+1?(d.push(new E.Range(m,1,h,1)),m=w.startLineNumber,h=w.endLineNumber):w.endLineNumber>h&&(h=w.endLineNumber)}return d.push(new E.Range(m,1,h,1)),d}class i{constructor(r,d){this.modelLineNumber=r,this.modelLineWrappedLineIdx=d}}class o{constructor(r,d){this.modelRange=r,this.viewLines=d}}class g{constructor(r){this._lines=r}convertViewPositionToModelPosition(r){return this._lines.convertViewPositionToModelPosition(r.lineNumber,r.column)}convertViewRangeToModelRange(r){return this._lines.convertViewRangeToModelRange(r)}validateViewPosition(r,d){return this._lines.validateViewPosition(r.lineNumber,r.column,d)}validateViewRange(r,d){return this._lines.validateViewRange(r,d)}convertModelPositionToViewPosition(r,d,m,h){return this._lines.convertModelPositionToViewPosition(r.lineNumber,r.column,d,m,h)}convertModelRangeToViewRange(r,d){return this._lines.convertModelRangeToViewRange(r,d)}modelPositionIsVisible(r){return this._lines.modelPositionIsVisible(r.lineNumber,r.column)}getModelLineViewLineCount(r){return this._lines.getModelLineViewLineCount(r)}getViewLineNumberOfModelPosition(r,d){return this._lines.getViewLineNumberOfModelPosition(r,d)}}class u{constructor(r){this.model=r}dispose(){}createCoordinatesConverter(){return new l(this)}getHiddenAreas(){return[]}setHiddenAreas(r){return!1}setTabSize(r){return!1}setWrappingSettings(r,d,m,h){return!1}createLineBreaksComputer(){const r=[];return{addRequest:(d,m,h)=>{r.push(null)},finalize:()=>r}}onModelFlushed(){}onModelLinesDeleted(r,d,m){return new _.ViewLinesDeletedEvent(d,m)}onModelLinesInserted(r,d,m,h){return new _.ViewLinesInsertedEvent(d,m)}onModelLineChanged(r,d,m){return[!1,new _.ViewLinesChangedEvent(d,1),null,null]}acceptVersionId(r){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(r,d,m){return{startLineNumber:r,endLineNumber:r,indent:0}}getViewLinesBracketGuides(r,d,m){return new Array(d-r+1).fill([])}getViewLinesIndentGuides(r,d){const m=d-r+1,h=new Array(m);for(let v=0;v<m;v++)h[v]=0;return h}getViewLineContent(r){return this.model.getLineContent(r)}getViewLineLength(r){return this.model.getLineLength(r)}getViewLineMinColumn(r){return this.model.getLineMinColumn(r)}getViewLineMaxColumn(r){return this.model.getLineMaxColumn(r)}getViewLineData(r){const d=this.model.tokenization.getLineTokens(r),m=d.getLineContent();return new n.ViewLineData(m,!1,1,m.length+1,0,d.inflate(),null)}getViewLinesData(r,d,m){const h=this.model.getLineCount();r=Math.min(Math.max(1,r),h),d=Math.min(Math.max(1,d),h);const v=[];for(let C=r;C<=d;C++){const w=C-r;v[w]=m[w]?this.getViewLineData(C):null}return v}getDecorationsInRange(r,d,m,h,v){return this.model.getDecorationsInRange(r,d,m,h,v)}normalizePosition(r,d){return this.model.normalizePosition(r,d)}getLineIndentColumn(r){return this.model.getLineIndentColumn(r)}getInjectedTextAt(r){return null}}e.ViewModelLinesFromModelAsIs=u;class l{constructor(r){this._lines=r}_validPosition(r){return this._lines.model.validatePosition(r)}_validRange(r){return this._lines.model.validateRange(r)}convertViewPositionToModelPosition(r){return this._validPosition(r)}convertViewRangeToModelRange(r){return this._validRange(r)}validateViewPosition(r,d){return this._validPosition(d)}validateViewRange(r,d){return this._validRange(d)}convertModelPositionToViewPosition(r){return this._validPosition(r)}convertModelRangeToViewRange(r){return this._validRange(r)}modelPositionIsVisible(r){const d=this._lines.model.getLineCount();return!(r.lineNumber<1||r.lineNumber>d)}getModelLineViewLineCount(r){return 1}getViewLineNumberOfModelPosition(r,d){return r}}}),define(oe[801],re([1,0,13,14,33,2,16,11,37,699,77,9,4,131,28,70,371,254,627,374,95,375,255,800,622]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewModel=void 0;const C=!0;class w extends L.Disposable{constructor(N,O,x,F,W,z,q,H,K,U){if(super(),this.languageConfigurationService=q,this._themeService=H,this._attachedView=K,this._transactionalTarget=U,this.hiddenAreasModel=new I,this.previousHiddenAreas=[],this._editorId=N,this._configuration=O,this.model=x,this._eventDispatcher=new m.ViewModelEventDispatcher,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new p.CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new k.RunOnceScheduler(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=S.create(this.model),this.glyphLanes=new v.GlyphMarginLanesModel(0),C&&this.model.isTooLargeForTokenization())this._lines=new h.ViewModelLinesFromModelAsIs(this.model);else{const Y=this._configuration.options,Q=Y.get(50),X=Y.get(140),G=Y.get(147),P=Y.get(139),te=Y.get(130);this._lines=new h.ViewModelLinesFromProjectedModel(this._editorId,this.model,F,W,Q,this.model.getOptions().tabSize,X,G.wrappingColumn,P,te)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new b.CursorsController(x,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new l.ViewLayout(this._configuration,this.getLineCount(),z)),this._register(this.viewLayout.onDidScroll(Y=>{Y.scrollTopChanged&&this._handleVisibleLinesChanged(),Y.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new u.ViewScrollChangedEvent(Y)),this._eventDispatcher.emitOutgoingEvent(new m.ScrollChangedEvent(Y.oldScrollWidth,Y.oldScrollLeft,Y.oldScrollHeight,Y.oldScrollTop,Y.scrollWidth,Y.scrollLeft,Y.scrollHeight,Y.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(Y=>{this._eventDispatcher.emitOutgoingEvent(Y)})),this._decorations=new d.ViewModelDecorations(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(Y=>{try{const Q=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(Q,Y)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(a.MinimapTokensColorTracker.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new u.ViewTokensColorsChangedEvent)})),this._register(this._themeService.onDidColorThemeChange(Y=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new u.ViewThemeChangedEvent(Y))})),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(N){this._eventDispatcher.addViewEventHandler(N)}removeViewEventHandler(N){this._eventDispatcher.removeViewEventHandler(N)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const N=this.viewLayout.getLinesViewportData(),O=new s.Range(N.startLineNumber,this.getLineMinColumn(N.startLineNumber),N.endLineNumber,this.getLineMaxColumn(N.endLineNumber));return this._toModelVisibleRanges(O)}visibleLinesStabilized(){const N=this.getModelVisibleRanges();this._attachedView.setVisibleLines(N,!0)}_handleVisibleLinesChanged(){const N=this.getModelVisibleRanges();this._attachedView.setVisibleLines(N,!1)}setHasFocus(N){this._hasFocus=N,this._cursor.setHasFocus(N),this._eventDispatcher.emitSingleViewEvent(new u.ViewFocusChangedEvent(N)),this._eventDispatcher.emitOutgoingEvent(new m.FocusChangedEvent(!N,N))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new u.ViewCompositionStartEvent)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new u.ViewCompositionEndEvent)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const N=new n.Position(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),O=this.coordinatesConverter.convertViewPositionToModelPosition(N);return new A(O,this._viewportStart.startLineDelta)}return new A(null,0)}_onConfigurationChanged(N,O){const x=this._captureStableViewport(),F=this._configuration.options,W=F.get(50),z=F.get(140),q=F.get(147),H=F.get(139),K=F.get(130);this._lines.setWrappingSettings(W,z,q.wrappingColumn,H,K)&&(N.emitViewEvent(new u.ViewFlushedEvent),N.emitViewEvent(new u.ViewLineMappingChangedEvent),N.emitViewEvent(new u.ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(N),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),O.hasChanged(92)&&(this._decorations.reset(),N.emitViewEvent(new u.ViewDecorationsChangedEvent(null))),O.hasChanged(99)&&(this._decorations.reset(),N.emitViewEvent(new u.ViewDecorationsChangedEvent(null))),N.emitViewEvent(new u.ViewConfigurationChangedEvent(O)),this.viewLayout.onConfigurationChanged(O),x.recoverViewportStart(this.coordinatesConverter,this.viewLayout),p.CursorConfiguration.shouldRecreate(O)&&(this.cursorConfig=new p.CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(N=>{try{const x=this._eventDispatcher.beginEmitViewEvents();let F=!1,W=!1;const z=N instanceof t.InternalModelContentChangeEvent?N.rawContentChangedEvent.changes:N.changes,q=N instanceof t.InternalModelContentChangeEvent?N.rawContentChangedEvent.versionId:null,H=this._lines.createLineBreaksComputer();for(const Y of z)switch(Y.changeType){case 4:{for(let Q=0;Q<Y.detail.length;Q++){const X=Y.detail[Q];let G=Y.injectedTexts[Q];G&&(G=G.filter(P=>!P.ownerId||P.ownerId===this._editorId)),H.addRequest(X,G,null)}break}case 2:{let Q=null;Y.injectedText&&(Q=Y.injectedText.filter(X=>!X.ownerId||X.ownerId===this._editorId)),H.addRequest(Y.detail,Q,null);break}}const K=H.finalize(),U=new c.ArrayQueue(K);for(const Y of z)switch(Y.changeType){case 1:{this._lines.onModelFlushed(),x.emitViewEvent(new u.ViewFlushedEvent),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),F=!0;break}case 3:{const Q=this._lines.onModelLinesDeleted(q,Y.fromLineNumber,Y.toLineNumber);Q!==null&&(x.emitViewEvent(Q),this.viewLayout.onLinesDeleted(Q.fromLineNumber,Q.toLineNumber)),F=!0;break}case 4:{const Q=U.takeCount(Y.detail.length),X=this._lines.onModelLinesInserted(q,Y.fromLineNumber,Y.toLineNumber,Q);X!==null&&(x.emitViewEvent(X),this.viewLayout.onLinesInserted(X.fromLineNumber,X.toLineNumber)),F=!0;break}case 2:{const Q=U.dequeue(),[X,G,P,te]=this._lines.onModelLineChanged(q,Y.lineNumber,Q);W=X,G&&x.emitViewEvent(G),P&&(x.emitViewEvent(P),this.viewLayout.onLinesInserted(P.fromLineNumber,P.toLineNumber)),te&&(x.emitViewEvent(te),this.viewLayout.onLinesDeleted(te.fromLineNumber,te.toLineNumber));break}case 5:break}q!==null&&this._lines.acceptVersionId(q),this.viewLayout.onHeightMaybeChanged(),!F&&W&&(x.emitViewEvent(new u.ViewLineMappingChangedEvent),x.emitViewEvent(new u.ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(x),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const O=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&O){const x=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(x){const F=this.coordinatesConverter.convertModelPositionToViewPosition(x.getStartPosition()),W=this.viewLayout.getVerticalOffsetForLineNumber(F.lineNumber);this.viewLayout.setScrollPosition({scrollTop:W+this._viewportStart.startLineDelta},1)}}try{const x=this._eventDispatcher.beginEmitViewEvents();N instanceof t.InternalModelContentChangeEvent&&x.emitOutgoingEvent(new m.ModelContentChangedEvent(N.contentChangedEvent)),this._cursor.onModelContentChanged(x,N)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(N=>{const O=[];for(let x=0,F=N.ranges.length;x<F;x++){const W=N.ranges[x],z=this.coordinatesConverter.convertModelPositionToViewPosition(new n.Position(W.fromLineNumber,1)).lineNumber,q=this.coordinatesConverter.convertModelPositionToViewPosition(new n.Position(W.toLineNumber,this.model.getLineMaxColumn(W.toLineNumber))).lineNumber;O[x]={fromLineNumber:z,toLineNumber:q}}this._eventDispatcher.emitSingleViewEvent(new u.ViewTokensChangedEvent(O)),this._eventDispatcher.emitOutgoingEvent(new m.ModelTokensChangedEvent(N))})),this._register(this.model.onDidChangeLanguageConfiguration(N=>{this._eventDispatcher.emitSingleViewEvent(new u.ViewLanguageConfigurationEvent),this.cursorConfig=new p.CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new m.ModelLanguageConfigurationChangedEvent(N))})),this._register(this.model.onDidChangeLanguage(N=>{this.cursorConfig=new p.CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new m.ModelLanguageChangedEvent(N))})),this._register(this.model.onDidChangeOptions(N=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const O=this._eventDispatcher.beginEmitViewEvents();O.emitViewEvent(new u.ViewFlushedEvent),O.emitViewEvent(new u.ViewLineMappingChangedEvent),O.emitViewEvent(new u.ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(O),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new p.CursorConfiguration(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new m.ModelOptionsChangedEvent(N))})),this._register(this.model.onDidChangeDecorations(N=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new u.ViewDecorationsChangedEvent(N)),this._eventDispatcher.emitOutgoingEvent(new m.ModelDecorationsChangedEvent(N))}))}setHiddenAreas(N,O){this.hiddenAreasModel.setHiddenAreas(O,N);const x=this.hiddenAreasModel.getMergedRanges();if(x===this.previousHiddenAreas)return;this.previousHiddenAreas=x;const F=this._captureStableViewport();let W=!1;try{const z=this._eventDispatcher.beginEmitViewEvents();W=this._lines.setHiddenAreas(x),W&&(z.emitViewEvent(new u.ViewFlushedEvent),z.emitViewEvent(new u.ViewLineMappingChangedEvent),z.emitViewEvent(new u.ViewDecorationsChangedEvent(null)),this._cursor.onLineMappingChanged(z),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const q=F.viewportStartModelPosition?.lineNumber;q&&x.some(K=>K.startLineNumber<=q&&q<=K.endLineNumber)||F.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),W&&this._eventDispatcher.emitOutgoingEvent(new m.HiddenAreasChangedEvent)}getVisibleRangesPlusViewportAboveBelow(){const N=this._configuration.options.get(146),O=this._configuration.options.get(67),x=Math.max(20,Math.round(N.height/O)),F=this.viewLayout.getLinesViewportData(),W=Math.max(1,F.completelyVisibleStartLineNumber-x),z=Math.min(this.getLineCount(),F.completelyVisibleEndLineNumber+x);return this._toModelVisibleRanges(new s.Range(W,this.getLineMinColumn(W),z,this.getLineMaxColumn(z)))}getVisibleRanges(){const N=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(N)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(N){const O=this.coordinatesConverter.convertViewRangeToModelRange(N),x=this._lines.getHiddenAreas();if(x.length===0)return[O];const F=[];let W=0,z=O.startLineNumber,q=O.startColumn;const H=O.endLineNumber,K=O.endColumn;for(let U=0,Y=x.length;U<Y;U++){const Q=x[U].startLineNumber,X=x[U].endLineNumber;X<z||Q>H||(z<Q&&(F[W++]=new s.Range(z,q,Q-1,this.model.getLineMaxColumn(Q-1))),z=X+1,q=1)}return(z<H||z===H&&q<K)&&(F[W++]=new s.Range(z,q,H,K)),F}getCompletelyVisibleViewRange(){const N=this.viewLayout.getLinesViewportData(),O=N.completelyVisibleStartLineNumber,x=N.completelyVisibleEndLineNumber;return new s.Range(O,this.getLineMinColumn(O),x,this.getLineMaxColumn(x))}getCompletelyVisibleViewRangeAtScrollTop(N){const O=this.viewLayout.getLinesViewportDataAtScrollTop(N),x=O.completelyVisibleStartLineNumber,F=O.completelyVisibleEndLineNumber;return new s.Range(x,this.getLineMinColumn(x),F,this.getLineMaxColumn(F))}saveState(){const N=this.viewLayout.saveState(),O=N.scrollTop,x=this.viewLayout.getLineNumberAtVerticalOffset(O),F=this.coordinatesConverter.convertViewPositionToModelPosition(new n.Position(x,this.getLineMinColumn(x))),W=this.viewLayout.getVerticalOffsetForLineNumber(x)-O;return{scrollLeft:N.scrollLeft,firstPosition:F,firstPositionDeltaTop:W}}reduceRestoreState(N){if(typeof N.firstPosition>"u")return this._reduceRestoreStateCompatibility(N);const O=this.model.validatePosition(N.firstPosition),x=this.coordinatesConverter.convertModelPositionToViewPosition(O),F=this.viewLayout.getVerticalOffsetForLineNumber(x.lineNumber)-N.firstPositionDeltaTop;return{scrollLeft:N.scrollLeft,scrollTop:F}}_reduceRestoreStateCompatibility(N){return{scrollLeft:N.scrollLeft,scrollTop:N.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(N,O,x){this._viewportStart.update(this,N)}getActiveIndentGuide(N,O,x){return this._lines.getActiveIndentGuide(N,O,x)}getLinesIndentGuides(N,O){return this._lines.getViewLinesIndentGuides(N,O)}getBracketGuidesInRangeByLine(N,O,x,F){return this._lines.getViewLinesBracketGuides(N,O,x,F)}getLineContent(N){return this._lines.getViewLineContent(N)}getLineLength(N){return this._lines.getViewLineLength(N)}getLineMinColumn(N){return this._lines.getViewLineMinColumn(N)}getLineMaxColumn(N){return this._lines.getViewLineMaxColumn(N)}getLineFirstNonWhitespaceColumn(N){const O=f.firstNonWhitespaceIndex(this.getLineContent(N));return O===-1?0:O+1}getLineLastNonWhitespaceColumn(N){const O=f.lastNonWhitespaceIndex(this.getLineContent(N));return O===-1?0:O+2}getMinimapDecorationsInRange(N){return this._decorations.getMinimapDecorationsInRange(N)}getDecorationsInViewport(N){return this._decorations.getDecorationsViewportData(N).decorations}getInjectedTextAt(N){return this._lines.getInjectedTextAt(N)}getViewportViewLineRenderingData(N,O){const F=this._decorations.getDecorationsViewportData(N).inlineDecorations[O-N.startLineNumber];return this._getViewLineRenderingData(O,F)}getViewLineRenderingData(N){const O=this._decorations.getInlineDecorationsOnLine(N);return this._getViewLineRenderingData(N,O)}_getViewLineRenderingData(N,O){const x=this.model.mightContainRTL(),F=this.model.mightContainNonBasicASCII(),W=this.getTabSize(),z=this._lines.getViewLineData(N);return z.inlineDecorations&&(O=[...O,...z.inlineDecorations.map(q=>q.toInlineDecoration(N))]),new r.ViewLineRenderingData(z.minColumn,z.maxColumn,z.content,z.continuesWithWrappedLine,x,F,z.tokens,O,W,z.startVisibleColumn)}getViewLineData(N){return this._lines.getViewLineData(N)}getMinimapLinesRenderingData(N,O,x){const F=this._lines.getViewLinesData(N,O,x);return new r.MinimapLinesRenderingData(this.getTabSize(),F)}getAllOverviewRulerDecorations(N){const O=this.model.getOverviewRulerDecorations(this._editorId,(0,_.filterValidationDecorations)(this._configuration.options)),x=new D;for(const F of O){const W=F.options,z=W.overviewRuler;if(!z)continue;const q=z.position;if(q===0)continue;const H=z.getColor(N.value),K=this.coordinatesConverter.getViewLineNumberOfModelPosition(F.range.startLineNumber,F.range.startColumn),U=this.coordinatesConverter.getViewLineNumberOfModelPosition(F.range.endLineNumber,F.range.endColumn);x.accept(H,W.zIndex,K,U,q)}return x.asArray}_invalidateDecorationsColorCache(){const N=this.model.getOverviewRulerDecorations();for(const O of N)O.options.overviewRuler?.invalidateCachedColor(),O.options.minimap?.invalidateCachedColor()}getValueInRange(N,O){const x=this.coordinatesConverter.convertViewRangeToModelRange(N);return this.model.getValueInRange(x,O)}getValueLengthInRange(N,O){const x=this.coordinatesConverter.convertViewRangeToModelRange(N);return this.model.getValueLengthInRange(x,O)}modifyPosition(N,O){const x=this.coordinatesConverter.convertViewPositionToModelPosition(N),F=this.model.modifyPosition(x,O);return this.coordinatesConverter.convertModelPositionToViewPosition(F)}deduceModelPositionRelativeToViewPosition(N,O,x){const F=this.coordinatesConverter.convertViewPositionToModelPosition(N);this.model.getEOL().length===2&&(O<0?O-=x:O+=x);const z=this.model.getOffsetAt(F)+O;return this.model.getPositionAt(z)}getPlainTextToCopy(N,O,x){const F=x?`\r
`:this.model.getEOL();N=N.slice(0),N.sort(s.Range.compareRangesUsingStarts);let W=!1,z=!1;for(const H of N)H.isEmpty()?W=!0:z=!0;if(!z){if(!O)return"";const H=N.map(U=>U.startLineNumber);let K="";for(let U=0;U<H.length;U++)U>0&&H[U-1]===H[U]||(K+=this.model.getLineContent(H[U])+F);return K}if(W&&O){const H=[];let K=0;for(const U of N){const Y=U.startLineNumber;U.isEmpty()?Y!==K&&H.push(this.model.getLineContent(Y)):H.push(this.model.getValueInRange(U,x?2:0)),K=Y}return H.length===1?H[0]:H}const q=[];for(const H of N)H.isEmpty()||q.push(this.model.getValueInRange(H,x?2:0));return q.length===1?q[0]:q}getRichTextToCopy(N,O){const x=this.model.getLanguageId();if(x===o.PLAINTEXT_LANGUAGE_ID||N.length!==1)return null;let F=N[0];if(F.isEmpty()){if(!O)return null;const U=F.startLineNumber;F=new s.Range(U,this.model.getLineMinColumn(U),U,this.model.getLineMaxColumn(U))}const W=this._configuration.options.get(50),z=this._getColorMap(),H=/[:;\\\/<>]/.test(W.fontFamily)||W.fontFamily===_.EDITOR_FONT_DEFAULTS.fontFamily;let K;return H?K=_.EDITOR_FONT_DEFAULTS.fontFamily:(K=W.fontFamily,K=K.replace(/"/g,"'"),/[,']/.test(K)||/[+ ]/.test(K)&&(K=`'${K}'`),K=`${K}, ${_.EDITOR_FONT_DEFAULTS.fontFamily}`),{mode:x,html:`<div style="color: ${z[1]};background-color: ${z[2]};font-family: ${K};font-weight: ${W.fontWeight};font-size: ${W.fontSize}px;line-height: ${W.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(F,z)+"</div>"}}_getHTMLToCopy(N,O){const x=N.startLineNumber,F=N.startColumn,W=N.endLineNumber,z=N.endColumn,q=this.getTabSize();let H="";for(let K=x;K<=W;K++){const U=this.model.tokenization.getLineTokens(K),Y=U.getLineContent(),Q=K===x?F-1:0,X=K===W?z-1:Y.length;Y===""?H+="<br>":H+=(0,g.tokenizeLineToHTML)(Y,U.inflate(),O,Q,X,q,y.isWindows)}return H}_getColorMap(){const N=i.TokenizationRegistry.getColorMap(),O=["#000000"];if(N)for(let x=1,F=N.length;x<F;x++)O[x]=E.Color.Format.CSS.formatHex(N[x]);return O}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(N,O,x){return this._withViewEventsCollector(F=>this._cursor.setStates(F,N,O,x))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(N){this._cursor.setCursorColumnSelectData(N)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(N){this._cursor.setPrevEditOperationType(N)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(N,O,x=0){this._withViewEventsCollector(F=>this._cursor.setSelections(F,N,O,x))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(N){this._withViewEventsCollector(O=>this._cursor.restoreState(O,N))}_executeCursorEdit(N){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new m.ReadOnlyEditAttemptEvent);return}this._withViewEventsCollector(N)}executeEdits(N,O,x){this._executeCursorEdit(F=>this._cursor.executeEdits(F,N,O,x))}startComposition(){this._executeCursorEdit(N=>this._cursor.startComposition(N))}endComposition(N){this._executeCursorEdit(O=>this._cursor.endComposition(O,N))}type(N,O){this._executeCursorEdit(x=>this._cursor.type(x,N,O))}compositionType(N,O,x,F,W){this._executeCursorEdit(z=>this._cursor.compositionType(z,N,O,x,F,W))}paste(N,O,x,F){this._executeCursorEdit(W=>this._cursor.paste(W,N,O,x,F))}cut(N){this._executeCursorEdit(O=>this._cursor.cut(O,N))}executeCommand(N,O){this._executeCursorEdit(x=>this._cursor.executeCommand(x,N,O))}executeCommands(N,O){this._executeCursorEdit(x=>this._cursor.executeCommands(x,N,O))}revealAllCursors(N,O,x=!1){this._withViewEventsCollector(F=>this._cursor.revealAll(F,N,x,0,O,0))}revealPrimaryCursor(N,O,x=!1){this._withViewEventsCollector(F=>this._cursor.revealPrimary(F,N,x,0,O,0))}revealTopMostCursor(N){const O=this._cursor.getTopMostViewPosition(),x=new s.Range(O.lineNumber,O.column,O.lineNumber,O.column);this._withViewEventsCollector(F=>F.emitViewEvent(new u.ViewRevealRangeRequestEvent(N,!1,x,null,0,!0,0)))}revealBottomMostCursor(N){const O=this._cursor.getBottomMostViewPosition(),x=new s.Range(O.lineNumber,O.column,O.lineNumber,O.column);this._withViewEventsCollector(F=>F.emitViewEvent(new u.ViewRevealRangeRequestEvent(N,!1,x,null,0,!0,0)))}revealRange(N,O,x,F,W){this._withViewEventsCollector(z=>z.emitViewEvent(new u.ViewRevealRangeRequestEvent(N,!1,x,null,F,O,W)))}changeWhitespace(N){this.viewLayout.changeWhitespace(N)&&(this._eventDispatcher.emitSingleViewEvent(new u.ViewZonesChangedEvent),this._eventDispatcher.emitOutgoingEvent(new m.ViewZonesChangedEvent))}_withViewEventsCollector(N){return this._transactionalTarget.batchChanges(()=>{try{const O=this._eventDispatcher.beginEmitViewEvents();return N(O)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(N){this._withViewEventsCollector(()=>{N()})}normalizePosition(N,O){return this._lines.normalizePosition(N,O)}getLineIndentColumn(N){return this._lines.getLineIndentColumn(N)}}e.ViewModel=w;class S{static create(N){const O=N._setTrackedRange(null,new s.Range(1,1,1,1),1);return new S(N,1,!1,O,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(N,O,x,F,W){this._model=N,this._viewLineNumber=O,this._isValid=x,this._modelTrackedRange=F,this._startLineDelta=W}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(N,O){const x=N.coordinatesConverter.convertViewPositionToModelPosition(new n.Position(O,N.getLineMinColumn(O))),F=N.model._setTrackedRange(this._modelTrackedRange,new s.Range(x.lineNumber,x.column,x.lineNumber,x.column),1),W=N.viewLayout.getVerticalOffsetForLineNumber(O),z=N.viewLayout.getCurrentScrollTop();this._viewLineNumber=O,this._isValid=!0,this._modelTrackedRange=F,this._startLineDelta=z-W}invalidate(){this._isValid=!1}}class D{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(N,O,x,F,W){const z=this._asMap[N];if(z){const q=z.data,H=q[q.length-3],K=q[q.length-1];if(H===W&&K+1>=x){F>K&&(q[q.length-1]=F);return}q.push(W,x,F)}else{const q=new r.OverviewRulerDecorationsGroup(N,O,[W,x,F]);this._asMap[N]=q,this.asArray.push(q)}}}class I{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(N,O){const x=this.hiddenAreas.get(N);x&&M(x,O)||(this.hiddenAreas.set(N,O),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const N=Array.from(this.hiddenAreas.values()).reduce((O,x)=>T(O,x),[]);return M(this.ranges,N)?this.ranges:(this.ranges=N,this.ranges)}}function T(R,N){const O=[];let x=0,F=0;for(;x<R.length&&F<N.length;){const W=R[x],z=N[F];if(W.endLineNumber<z.startLineNumber-1)O.push(R[x++]);else if(z.endLineNumber<W.startLineNumber-1)O.push(N[F++]);else{const q=Math.min(W.startLineNumber,z.startLineNumber),H=Math.max(W.endLineNumber,z.endLineNumber);O.push(new s.Range(q,1,H,1)),x++,F++}}for(;x<R.length;)O.push(R[x++]);for(;F<N.length;)O.push(N[F++]);return O}function M(R,N){if(R.length!==N.length)return!1;for(let O=0;O<R.length;O++)if(!R[O].equalsRange(N[O]))return!1;return!0}class A{constructor(N,O){this.viewportStartModelPosition=N,this.startLineDelta=O}recoverViewportStart(N,O){if(!this.viewportStartModelPosition)return;const x=N.convertModelPositionToViewPosition(this.viewportStartModelPosition),F=O.getVerticalOffsetForLineNumber(x.lineNumber);O.setScrollPosition({scrollTop:F+this.startLineDelta},1)}}}),define(oe[218],re([1,0,5,8,6,2,47,75,679,239,15,35,773,602,322,561,37,93,80,9,4,23,199,332,198,20,34,36,17,624,801,3,60,24,12,7,180,50,32,25,29,716,507]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R,N,O,x,F,W,z,q){"use strict";var H;Object.defineProperty(e,"__esModule",{value:!0}),e.EditorModeContext=e.BooleanEventEmitter=e.CodeEditorWidget=void 0;let K=class extends L.Disposable{static{H=this}static{this.dropIntoEditorDecorationOptions=S.ModelDecorationOptions.register({description:"workbench-dnd-target",className:"dnd-target"})}get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(B,j,V,$,Z,ee,le,de,me,be,ve,Le){super(),this.languageConfigurationService=ve,this._deliveryQueue=(0,E.createEventDeliveryQueue)(),this._contributions=this._register(new o.CodeEditorContributions),this._onDidDispose=this._register(new E.Emitter),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new X(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new X(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new X(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new X(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new X(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new X(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new X(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new X(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new X(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new X(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new X(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new E.Emitter({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._updateCounter=0,this._onBeginUpdate=this._register(new E.Emitter),this.onBeginUpdate=this._onBeginUpdate.event,this._onEndUpdate=this._register(new E.Emitter),this.onEndUpdate=this._onEndUpdate.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),Z.willCreateCodeEditor();const Se={...j};this._domElement=B,this._overflowWidgetsDomNode=Se.overflowWidgetsDomNode,delete Se.overflowWidgetsDomNode,this._id=++U,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=V.telemetryData,this._configuration=this._register(this._createConfiguration(V.isSimpleWidget||!1,V.contextMenuId??(V.isSimpleWidget?q.MenuId.SimpleEditorContext:q.MenuId.EditorContext),Se,be)),this._register(this._configuration.onDidChange(ke=>{this._onDidChangeConfiguration.fire(ke);const Re=this._configuration.options;if(ke.hasChanged(146)){const Pe=Re.get(146);this._onDidLayoutChange.fire(Pe)}})),this._contextKeyService=this._register(le.createScoped(this._domElement)),this._notificationService=me,this._codeEditorService=Z,this._commandService=ee,this._themeService=de,this._register(new G(this,this._contextKeyService)),this._register(new P(this,this._contextKeyService,Le)),this._instantiationService=this._register($.createChild(new x.ServiceCollection([N.IContextKeyService,this._contextKeyService]))),this._modelData=null,this._focusTracker=new te(B,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let ye;Array.isArray(V.contributions)?ye=V.contributions:ye=p.EditorExtensionsRegistry.getEditorContributions(),this._contributions.initialize(this,ye,this._instantiationService);for(const ke of p.EditorExtensionsRegistry.getEditorActions()){if(this._actions.has(ke.id)){(0,k.onUnexpectedError)(new Error(`Cannot have two actions with the same id ${ke.id}`));continue}const Re=new h.InternalEditorAction(ke.id,ke.label,ke.alias,ke.metadata,ke.precondition??void 0,Pe=>this._instantiationService.invokeFunction(Fe=>Promise.resolve(ke.runEditorCommand(Fe,this,Pe))),this._contextKeyService);this._actions.set(Re.id,Re)}const Ee=()=>!this._configuration.options.get(92)&&this._configuration.options.get(36).enabled;this._register(new c.DragAndDropObserver(this._domElement,{onDragOver:ke=>{if(!Ee())return;const Re=this.getTargetAtClientPoint(ke.clientX,ke.clientY);Re?.position&&this.showDropIndicatorAt(Re.position)},onDrop:async ke=>{if(!Ee()||(this.removeDropIndicator(),!ke.dataTransfer))return;const Re=this.getTargetAtClientPoint(ke.clientX,ke.clientY);Re?.position&&this._onDropIntoEditor.fire({position:Re.position,event:ke})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(B){this._modelData?.view.writeScreenReaderContent(B)}_createConfiguration(B,j,V,$){return new _.EditorConfiguration(B,j,V,this._domElement,$)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return v.EditorType.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(B){return this._instantiationService.invokeFunction(B)}updateOptions(B){this._configuration.updateOptions(B||{})}getOptions(){return this._configuration.options}getOption(B){return this._configuration.options.get(B)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(B){return this._modelData?m.WordOperations.getWordAtPosition(this._modelData.model,this._configuration.options.get(132),this._configuration.options.get(131),B):null}getValue(B=null){if(!this._modelData)return"";const j=!!(B&&B.preserveBOM);let V=0;return B&&B.lineEnding&&B.lineEnding===`
`?V=1:B&&B.lineEnding&&B.lineEnding===`\r
`&&(V=2),this._modelData.model.getValue(V,j)}setValue(B){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(B)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(B=null){try{this._beginUpdate();const j=B;if(this._modelData===null&&j===null||this._modelData&&this._modelData.model===j)return;const V={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:j?.uri||null};this._onWillChangeModel.fire(V);const $=this.hasTextFocus(),Z=this._detachModel();this._attachModel(j),$&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(V),this._postDetachModelCleanup(Z),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const B in this._decorationTypeSubtypes){const j=this._decorationTypeSubtypes[B];for(const V in j)this._removeDecorationType(B+"-"+V)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(B,j,V,$){const Z=B.model.validatePosition({lineNumber:j,column:V}),ee=B.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Z);return B.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(ee.lineNumber,$)}getTopForLineNumber(B,j=!1){return this._modelData?H._getVerticalOffsetForPosition(this._modelData,B,1,j):-1}getTopForPosition(B,j){return this._modelData?H._getVerticalOffsetForPosition(this._modelData,B,j,!1):-1}static _getVerticalOffsetForPosition(B,j,V,$=!1){const Z=B.model.validatePosition({lineNumber:j,column:V}),ee=B.viewModel.coordinatesConverter.convertModelPositionToViewPosition(Z);return B.viewModel.viewLayout.getVerticalOffsetForLineNumber(ee.lineNumber,$)}getBottomForLineNumber(B,j=!1){return this._modelData?H._getVerticalOffsetAfterPosition(this._modelData,B,1,j):-1}setHiddenAreas(B,j){this._modelData?.viewModel.setHiddenAreas(B.map(V=>r.Range.lift(V)),j)}getVisibleColumnFromPosition(B){if(!this._modelData)return B.column;const j=this._modelData.model.validatePosition(B),V=this._modelData.model.getOptions().tabSize;return u.CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(j.lineNumber),j.column,V)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(B,j="api"){if(this._modelData){if(!a.Position.isIPosition(B))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(j,[{selectionStartLineNumber:B.lineNumber,selectionStartColumn:B.column,positionLineNumber:B.lineNumber,positionColumn:B.column}])}}_sendRevealRange(B,j,V,$){if(!this._modelData)return;if(!r.Range.isIRange(B))throw new Error("Invalid arguments");const Z=this._modelData.model.validateRange(B),ee=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(Z);this._modelData.viewModel.revealRange("api",V,ee,j,$)}revealLine(B,j=0){this._revealLine(B,0,j)}revealLineInCenter(B,j=0){this._revealLine(B,1,j)}revealLineInCenterIfOutsideViewport(B,j=0){this._revealLine(B,2,j)}revealLineNearTop(B,j=0){this._revealLine(B,5,j)}_revealLine(B,j,V){if(typeof B!="number")throw new Error("Invalid arguments");this._sendRevealRange(new r.Range(B,1,B,1),j,!1,V)}revealPosition(B,j=0){this._revealPosition(B,0,!0,j)}revealPositionInCenter(B,j=0){this._revealPosition(B,1,!0,j)}revealPositionInCenterIfOutsideViewport(B,j=0){this._revealPosition(B,2,!0,j)}revealPositionNearTop(B,j=0){this._revealPosition(B,5,!0,j)}_revealPosition(B,j,V,$){if(!a.Position.isIPosition(B))throw new Error("Invalid arguments");this._sendRevealRange(new r.Range(B.lineNumber,B.column,B.lineNumber,B.column),j,V,$)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(B,j="api"){const V=d.Selection.isISelection(B),$=r.Range.isIRange(B);if(!V&&!$)throw new Error("Invalid arguments");if(V)this._setSelectionImpl(B,j);else if($){const Z={selectionStartLineNumber:B.startLineNumber,selectionStartColumn:B.startColumn,positionLineNumber:B.endLineNumber,positionColumn:B.endColumn};this._setSelectionImpl(Z,j)}}_setSelectionImpl(B,j){if(!this._modelData)return;const V=new d.Selection(B.selectionStartLineNumber,B.selectionStartColumn,B.positionLineNumber,B.positionColumn);this._modelData.viewModel.setSelections(j,[V])}revealLines(B,j,V=0){this._revealLines(B,j,0,V)}revealLinesInCenter(B,j,V=0){this._revealLines(B,j,1,V)}revealLinesInCenterIfOutsideViewport(B,j,V=0){this._revealLines(B,j,2,V)}revealLinesNearTop(B,j,V=0){this._revealLines(B,j,5,V)}_revealLines(B,j,V,$){if(typeof B!="number"||typeof j!="number")throw new Error("Invalid arguments");this._sendRevealRange(new r.Range(B,1,j,1),V,!1,$)}revealRange(B,j=0,V=!1,$=!0){this._revealRange(B,V?1:0,$,j)}revealRangeInCenter(B,j=0){this._revealRange(B,1,!0,j)}revealRangeInCenterIfOutsideViewport(B,j=0){this._revealRange(B,2,!0,j)}revealRangeNearTop(B,j=0){this._revealRange(B,5,!0,j)}revealRangeNearTopIfOutsideViewport(B,j=0){this._revealRange(B,6,!0,j)}revealRangeAtTop(B,j=0){this._revealRange(B,3,!0,j)}_revealRange(B,j,V,$){if(!r.Range.isIRange(B))throw new Error("Invalid arguments");this._sendRevealRange(r.Range.lift(B),j,V,$)}setSelections(B,j="api",V=0){if(this._modelData){if(!B||B.length===0)throw new Error("Invalid arguments");for(let $=0,Z=B.length;$<Z;$++)if(!d.Selection.isISelection(B[$]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(j,B,V)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(B,j=1){if(this._modelData){if(typeof B!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:B},j)}}setScrollTop(B,j=1){if(this._modelData){if(typeof B!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:B},j)}}setScrollPosition(B,j=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(B,j)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;const B=this._contributions.saveViewState(),j=this._modelData.viewModel.saveCursorState(),V=this._modelData.viewModel.saveState();return{cursorState:j,viewState:V,contributionsState:B}}restoreViewState(B){if(!this._modelData||!this._modelData.hasRealView)return;const j=B;if(j&&j.cursorState&&j.viewState){const V=j.cursorState;Array.isArray(V)?V.length>0&&this._modelData.viewModel.restoreCursorState(V):this._modelData.viewModel.restoreCursorState([V]),this._contributions.restoreViewState(j.contributionsState||{});const $=this._modelData.viewModel.reduceRestoreState(j.viewState);this._modelData.view.restoreState($)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}getContribution(B){return this._contributions.get(B)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let B=this.getActions();return B=B.filter(j=>j.isSupported()),B}getAction(B){return this._actions.get(B)||null}trigger(B,j,V){V=V||{};try{switch(this._beginUpdate(),j){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(B);return;case"type":{const Z=V;this._type(B,Z.text||"");return}case"replacePreviousChar":{const Z=V;this._compositionType(B,Z.text||"",Z.replaceCharCnt||0,0,0);return}case"compositionType":{const Z=V;this._compositionType(B,Z.text||"",Z.replacePrevCharCnt||0,Z.replaceNextCharCnt||0,Z.positionDelta||0);return}case"paste":{const Z=V;this._paste(B,Z.text||"",Z.pasteOnNewLine||!1,Z.multicursorText||null,Z.mode||null,Z.clipboardEvent);return}case"cut":this._cut(B);return}const $=this.getAction(j);if($){Promise.resolve($.run(V)).then(void 0,k.onUnexpectedError);return}if(!this._modelData||this._triggerEditorCommand(B,j,V))return;this._triggerCommand(j,V)}finally{this._endUpdate()}}_triggerCommand(B,j){this._commandService.executeCommand(B,j)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(B){this._modelData&&(this._modelData.viewModel.endComposition(B),this._onDidCompositionEnd.fire())}_type(B,j){!this._modelData||j.length===0||(B==="keyboard"&&this._onWillType.fire(j),this._modelData.viewModel.type(j,B),B==="keyboard"&&this._onDidType.fire(j))}_compositionType(B,j,V,$,Z){this._modelData&&this._modelData.viewModel.compositionType(j,V,$,Z,B)}_paste(B,j,V,$,Z,ee){if(!this._modelData)return;const le=this._modelData.viewModel,de=le.getSelection().getStartPosition();le.paste(j,V,$,B);const me=le.getSelection().getStartPosition();B==="keyboard"&&this._onDidPaste.fire({clipboardEvent:ee,range:new r.Range(de.lineNumber,de.column,me.lineNumber,me.column),languageId:Z})}_cut(B){this._modelData&&this._modelData.viewModel.cut(B)}_triggerEditorCommand(B,j,V){const $=p.EditorExtensionsRegistry.getEditorCommand(j);return $?(V=V||{},V.source=B,this._instantiationService.invokeFunction(Z=>{Promise.resolve($.runEditorCommand(Z,this,V)).then(void 0,k.onUnexpectedError)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(92)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(B,j,V){if(!this._modelData||this._configuration.options.get(92))return!1;let $;return V?Array.isArray(V)?$=()=>V:$=V:$=()=>null,this._modelData.viewModel.executeEdits(B,j,$),!0}executeCommand(B,j){this._modelData&&this._modelData.viewModel.executeCommand(j,B)}executeCommands(B,j){this._modelData&&this._modelData.viewModel.executeCommands(j,B)}createDecorationsCollection(B){return new se(this,B)}changeDecorations(B){return this._modelData?this._modelData.model.changeDecorations(B,this._id):null}getLineDecorations(B){return this._modelData?this._modelData.model.getLineDecorations(B,this._id,(0,g.filterValidationDecorations)(this._configuration.options)):null}getDecorationsInRange(B){return this._modelData?this._modelData.model.getDecorationsInRange(B,this._id,(0,g.filterValidationDecorations)(this._configuration.options)):null}deltaDecorations(B,j){return this._modelData?B.length===0&&j.length===0?B:this._modelData.model.deltaDecorations(B,j,this._id):[]}removeDecorations(B){!this._modelData||B.length===0||this._modelData.model.changeDecorations(j=>{j.deltaDecorations(B,[])})}removeDecorationsByType(B){const j=this._decorationTypeKeysToIds[B];j&&this.changeDecorations(V=>V.deltaDecorations(j,[])),this._decorationTypeKeysToIds.hasOwnProperty(B)&&delete this._decorationTypeKeysToIds[B],this._decorationTypeSubtypes.hasOwnProperty(B)&&delete this._decorationTypeSubtypes[B]}getLayoutInfo(){return this._configuration.options.get(146)}createOverviewRuler(B){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(B)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(B){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(B)}delegateScrollFromMouseWheelEvent(B){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(B)}layout(B,j=!1){this._configuration.observeContainer(B),j||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(B){const j={widget:B,position:B.getPosition()};this._contentWidgets.hasOwnProperty(B.getId())&&console.warn("Overwriting a content widget with the same id:"+B.getId()),this._contentWidgets[B.getId()]=j,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(j)}layoutContentWidget(B){const j=B.getId();if(this._contentWidgets.hasOwnProperty(j)){const V=this._contentWidgets[j];V.position=B.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(V)}}removeContentWidget(B){const j=B.getId();if(this._contentWidgets.hasOwnProperty(j)){const V=this._contentWidgets[j];delete this._contentWidgets[j],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(V)}}addOverlayWidget(B){const j={widget:B,position:B.getPosition()};this._overlayWidgets.hasOwnProperty(B.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[B.getId()]=j,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(j)}layoutOverlayWidget(B){const j=B.getId();if(this._overlayWidgets.hasOwnProperty(j)){const V=this._overlayWidgets[j];V.position=B.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(V)}}removeOverlayWidget(B){const j=B.getId();if(this._overlayWidgets.hasOwnProperty(j)){const V=this._overlayWidgets[j];delete this._overlayWidgets[j],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(V)}}addGlyphMarginWidget(B){const j={widget:B,position:B.getPosition()};this._glyphMarginWidgets.hasOwnProperty(B.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[B.getId()]=j,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(j)}layoutGlyphMarginWidget(B){const j=B.getId();if(this._glyphMarginWidgets.hasOwnProperty(j)){const V=this._glyphMarginWidgets[j];V.position=B.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(V)}}removeGlyphMarginWidget(B){const j=B.getId();if(this._glyphMarginWidgets.hasOwnProperty(j)){const V=this._glyphMarginWidgets[j];delete this._glyphMarginWidgets[j],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(V)}}changeViewZones(B){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(B)}getTargetAtClientPoint(B,j){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(B,j)}getScrolledVisiblePosition(B){if(!this._modelData||!this._modelData.hasRealView)return null;const j=this._modelData.model.validatePosition(B),V=this._configuration.options,$=V.get(146),Z=H._getVerticalOffsetForPosition(this._modelData,j.lineNumber,j.column)-this.getScrollTop(),ee=this._modelData.view.getOffsetForColumn(j.lineNumber,j.column)+$.glyphMarginWidth+$.lineNumbersWidth+$.decorationsWidth-this.getScrollLeft();return{top:Z,left:ee,height:V.get(67)}}getOffsetForColumn(B,j){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(B,j)}render(B=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,B)})}setAriaOptions(B){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(B)}applyFontInfo(B){(0,f.applyFontInfo)(B,this._configuration.options.get(50))}setBanner(B,j){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=B,this._configuration.setReservedHeight(B?j:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(B){if(!B){this._modelData=null;return}const j=[];this._domElement.setAttribute("data-mode-id",B.getLanguageId()),this._configuration.setIsDominatedByLongLines(B.isDominatedByLongLines()),this._configuration.setModelLineCount(B.getLineCount());const V=B.onBeforeAttached(),$=new T.ViewModel(this._id,this._configuration,B,t.DOMLineBreaksComputerFactory.create(c.getWindow(this._domElement)),I.MonospaceLineBreaksComputerFactory.create(this._configuration.options),le=>c.scheduleAtNextAnimationFrame(c.getWindow(this._domElement),le),this.languageConfigurationService,this._themeService,V,{batchChanges:le=>{try{return this._beginUpdate(),le()}finally{this._endUpdate()}}});j.push(B.onWillDispose(()=>this.setModel(null))),j.push($.onEvent(le=>{switch(le.kind){case 0:this._onDidContentSizeChange.fire(le);break;case 1:this._editorTextFocus.setValue(le.hasFocus);break;case 2:this._onDidScrollChange.fire(le);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(le.reachedMaxCursorCount){const ve=this.getOption(80),Le=M.localize(1012,"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",ve);this._notificationService.prompt(F.Severity.Warning,Le,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:M.localize(1013,"Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const de=[];for(let ve=0,Le=le.selections.length;ve<Le;ve++)de[ve]=le.selections[ve].getPosition();const me={position:de[0],secondaryPositions:de.slice(1),reason:le.reason,source:le.source};this._onDidChangeCursorPosition.fire(me);const be={selection:le.selections[0],secondarySelections:le.selections.slice(1),modelVersionId:le.modelVersionId,oldSelections:le.oldSelections,oldModelVersionId:le.oldModelVersionId,source:le.source,reason:le.reason};this._onDidChangeCursorSelection.fire(be);break}case 7:this._onDidChangeModelDecorations.fire(le.event);break;case 8:this._domElement.setAttribute("data-mode-id",B.getLanguageId()),this._onDidChangeModelLanguage.fire(le.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(le.event);break;case 10:this._onDidChangeModelContent.fire(le.event);break;case 11:this._onDidChangeModelOptions.fire(le.event);break;case 12:this._onDidChangeModelTokens.fire(le.event);break}}));const[Z,ee]=this._createView($);if(ee){this._domElement.appendChild(Z.domNode.domNode);let le=Object.keys(this._contentWidgets);for(let de=0,me=le.length;de<me;de++){const be=le[de];Z.addContentWidget(this._contentWidgets[be])}le=Object.keys(this._overlayWidgets);for(let de=0,me=le.length;de<me;de++){const be=le[de];Z.addOverlayWidget(this._overlayWidgets[be])}le=Object.keys(this._glyphMarginWidgets);for(let de=0,me=le.length;de<me;de++){const be=le[de];Z.addGlyphMarginWidget(this._glyphMarginWidgets[be])}Z.render(!1,!0),Z.domNode.domNode.setAttribute("data-uri",B.uri.toString())}this._modelData=new Y(B,$,Z,ee,j,V)}_createView(B){let j;this.isSimpleWidget?j={paste:(Z,ee,le,de)=>{this._paste("keyboard",Z,ee,le,de)},type:Z=>{this._type("keyboard",Z)},compositionType:(Z,ee,le,de)=>{this._compositionType("keyboard",Z,ee,le,de)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:j={paste:(Z,ee,le,de)=>{const me={text:Z,pasteOnNewLine:ee,multicursorText:le,mode:de};this._commandService.executeCommand("paste",me)},type:Z=>{const ee={text:Z};this._commandService.executeCommand("type",ee)},compositionType:(Z,ee,le,de)=>{if(le||de){const me={text:Z,replacePrevCharCnt:ee,replaceNextCharCnt:le,positionDelta:de};this._commandService.executeCommand("compositionType",me)}else{const me={text:Z,replaceCharCnt:ee};this._commandService.executeCommand("replacePreviousChar",me)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const V=new i.ViewUserInputEvents(B.coordinatesConverter);return V.onKeyDown=Z=>this._onKeyDown.fire(Z),V.onKeyUp=Z=>this._onKeyUp.fire(Z),V.onContextMenu=Z=>this._onContextMenu.fire(Z),V.onMouseMove=Z=>this._onMouseMove.fire(Z),V.onMouseLeave=Z=>this._onMouseLeave.fire(Z),V.onMouseDown=Z=>this._onMouseDown.fire(Z),V.onMouseUp=Z=>this._onMouseUp.fire(Z),V.onMouseDrag=Z=>this._onMouseDrag.fire(Z),V.onMouseDrop=Z=>this._onMouseDrop.fire(Z),V.onMouseDropCanceled=Z=>this._onMouseDropCanceled.fire(Z),V.onMouseWheel=Z=>this._onMouseWheel.fire(Z),[new s.View(j,this._configuration,this._themeService.getColorTheme(),B,V,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(B){B?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const B=this._modelData.model,j=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),j&&this._domElement.contains(j)&&j.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),B}_removeDecorationType(B){this._codeEditorService.removeDecorationType(B)}hasModel(){return this._modelData!==null}showDropIndicatorAt(B){const j=[{range:new r.Range(B.lineNumber,B.column,B.lineNumber,B.column),options:H.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(j),this.revealPosition(B,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(B,j){this._contextKeyService.createKey(B,j)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}};e.CodeEditorWidget=K,e.CodeEditorWidget=K=H=De([he(3,O.IInstantiationService),he(4,n.ICodeEditorService),he(5,R.ICommandService),he(6,N.IContextKeyService),he(7,z.IThemeService),he(8,F.INotificationService),he(9,A.IAccessibilityService),he(10,w.ILanguageConfigurationService),he(11,D.ILanguageFeaturesService)],K);let U=0;class Y{constructor(B,j,V,$,Z,ee){this.model=B,this.viewModel=j,this.view=V,this.hasRealView=$,this.listenersToRemove=Z,this.attachedView=ee}dispose(){(0,L.dispose)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class Q extends L.Disposable{constructor(B){super(),this._emitterOptions=B,this._onDidChangeToTrue=this._register(new E.Emitter(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new E.Emitter(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(B){const j=B?2:1;this._value!==j&&(this._value=j,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}}e.BooleanEventEmitter=Q;class X extends E.Emitter{constructor(B,j){super({deliveryQueue:j}),this._contributions=B}fire(B){this._contributions.onBeforeInteractionEvent(),super.fire(B)}}class G extends L.Disposable{constructor(B,j){super(),this._editor=B,j.createKey("editorId",B.getId()),this._editorSimpleInput=C.EditorContextKeys.editorSimpleInput.bindTo(j),this._editorFocus=C.EditorContextKeys.focus.bindTo(j),this._textInputFocus=C.EditorContextKeys.textInputFocus.bindTo(j),this._editorTextFocus=C.EditorContextKeys.editorTextFocus.bindTo(j),this._tabMovesFocus=C.EditorContextKeys.tabMovesFocus.bindTo(j),this._editorReadonly=C.EditorContextKeys.readOnly.bindTo(j),this._inDiffEditor=C.EditorContextKeys.inDiffEditor.bindTo(j),this._editorColumnSelection=C.EditorContextKeys.columnSelection.bindTo(j),this._hasMultipleSelections=C.EditorContextKeys.hasMultipleSelections.bindTo(j),this._hasNonEmptySelection=C.EditorContextKeys.hasNonEmptySelection.bindTo(j),this._canUndo=C.EditorContextKeys.canUndo.bindTo(j),this._canRedo=C.EditorContextKeys.canRedo.bindTo(j),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(b.TabFocus.onDidChangeTabFocus(V=>this._tabMovesFocus.set(V))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const B=this._editor.getOptions();this._tabMovesFocus.set(b.TabFocus.getTabFocusMode()),this._editorReadonly.set(B.get(92)),this._inDiffEditor.set(B.get(61)),this._editorColumnSelection.set(B.get(22))}_updateFromSelection(){const B=this._editor.getSelections();B?(this._hasMultipleSelections.set(B.length>1),this._hasNonEmptySelection.set(B.some(j=>!j.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const B=this._editor.getModel();this._canUndo.set(!!(B&&B.canUndo())),this._canRedo.set(!!(B&&B.canRedo()))}}class P extends L.Disposable{constructor(B,j,V){super(),this._editor=B,this._contextKeyService=j,this._languageFeaturesService=V,this._langId=C.EditorContextKeys.languageId.bindTo(j),this._hasCompletionItemProvider=C.EditorContextKeys.hasCompletionItemProvider.bindTo(j),this._hasCodeActionsProvider=C.EditorContextKeys.hasCodeActionsProvider.bindTo(j),this._hasCodeLensProvider=C.EditorContextKeys.hasCodeLensProvider.bindTo(j),this._hasDefinitionProvider=C.EditorContextKeys.hasDefinitionProvider.bindTo(j),this._hasDeclarationProvider=C.EditorContextKeys.hasDeclarationProvider.bindTo(j),this._hasImplementationProvider=C.EditorContextKeys.hasImplementationProvider.bindTo(j),this._hasTypeDefinitionProvider=C.EditorContextKeys.hasTypeDefinitionProvider.bindTo(j),this._hasHoverProvider=C.EditorContextKeys.hasHoverProvider.bindTo(j),this._hasDocumentHighlightProvider=C.EditorContextKeys.hasDocumentHighlightProvider.bindTo(j),this._hasDocumentSymbolProvider=C.EditorContextKeys.hasDocumentSymbolProvider.bindTo(j),this._hasReferenceProvider=C.EditorContextKeys.hasReferenceProvider.bindTo(j),this._hasRenameProvider=C.EditorContextKeys.hasRenameProvider.bindTo(j),this._hasSignatureHelpProvider=C.EditorContextKeys.hasSignatureHelpProvider.bindTo(j),this._hasInlayHintsProvider=C.EditorContextKeys.hasInlayHintsProvider.bindTo(j),this._hasDocumentFormattingProvider=C.EditorContextKeys.hasDocumentFormattingProvider.bindTo(j),this._hasDocumentSelectionFormattingProvider=C.EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(j),this._hasMultipleDocumentFormattingProvider=C.EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(j),this._hasMultipleDocumentSelectionFormattingProvider=C.EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(j),this._isInEmbeddedEditor=C.EditorContextKeys.isInEmbeddedEditor.bindTo(j);const $=()=>this._update();this._register(B.onDidChangeModel($)),this._register(B.onDidChangeModelLanguage($)),this._register(V.completionProvider.onDidChange($)),this._register(V.codeActionProvider.onDidChange($)),this._register(V.codeLensProvider.onDidChange($)),this._register(V.definitionProvider.onDidChange($)),this._register(V.declarationProvider.onDidChange($)),this._register(V.implementationProvider.onDidChange($)),this._register(V.typeDefinitionProvider.onDidChange($)),this._register(V.hoverProvider.onDidChange($)),this._register(V.documentHighlightProvider.onDidChange($)),this._register(V.documentSymbolProvider.onDidChange($)),this._register(V.referenceProvider.onDidChange($)),this._register(V.renameProvider.onDidChange($)),this._register(V.documentFormattingEditProvider.onDidChange($)),this._register(V.documentRangeFormattingEditProvider.onDidChange($)),this._register(V.signatureHelpProvider.onDidChange($)),this._register(V.inlayHintsProvider.onDidChange($)),$()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){const B=this._editor.getModel();if(!B){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(B.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(B)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(B)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(B)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(B)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(B)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(B)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(B)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(B)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(B)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(B)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(B)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(B)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(B)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(B)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(B)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(B)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(B)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(B).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(B).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(B).length>1),this._isInEmbeddedEditor.set(B.uri.scheme===y.Schemas.walkThroughSnippet||B.uri.scheme===y.Schemas.vscodeChatCodeBlock)})}}e.EditorModeContext=P;class te extends L.Disposable{constructor(B,j){super(),this._onChange=this._register(new E.Emitter),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(c.trackFocus(B)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),j&&(this._overflowWidgetsDomNode=this._register(c.trackFocus(j)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){const B=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==B&&(this._hadFocus=B,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}}class se{get length(){return this._decorationIds.length}constructor(B,j){this._editor=B,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(j)&&j.length>0&&this.set(j)}onDidChange(B,j,V){return this._editor.onDidChangeModelDecorations($=>{this._isChangingDecorations||B.call(j,$)},V)}getRange(B){return!this._editor.hasModel()||B>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[B])}getRanges(){if(!this._editor.hasModel())return[];const B=this._editor.getModel(),j=[];for(const V of this._decorationIds){const $=B.getDecorationRange(V);$&&j.push($)}return j}has(B){return this._decorationIds.includes(B.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(B){try{this._isChangingDecorations=!0,this._editor.changeDecorations(j=>{this._decorationIds=j.deltaDecorations(this._decorationIds,B)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(B){let j=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(V=>{j=V.deltaDecorations([],B),this._decorationIds=this._decorationIds.concat(j)})}finally{this._isChangingDecorations=!1}return j}}const ue=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),ge=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function pe(J){return ue+encodeURIComponent(J.toString())+ge}const ce=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ie=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function ne(J){return ce+encodeURIComponent(J.toString())+ie}(0,z.registerThemingParticipant)((J,B)=>{const j=J.getColor(W.editorErrorForeground);j&&B.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${pe(j)}") repeat-x bottom left; }`);const V=J.getColor(W.editorWarningForeground);V&&B.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${pe(V)}") repeat-x bottom left; }`);const $=J.getColor(W.editorInfoForeground);$&&B.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${pe($)}") repeat-x bottom left; }`);const Z=J.getColor(W.editorHintForeground);Z&&B.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${ne(Z)}") no-repeat bottom left; }`);const ee=J.getColor(l.editorUnnecessaryCodeOpacity);ee&&B.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${ee.rgba.a}; }`)})}),define(oe[125],re([1,0,54,35,218,34,17,60,24,12,7,50,25]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmbeddedCodeEditorWidget=void 0;let t=class extends E.CodeEditorWidget{constructor(o,g,u,l,a,r,d,m,h,v,C,w,S){super(o,{...l.getRawOptions(),overflowWidgetsDomNode:l.getOverflowWidgetsDomNode()},u,a,r,d,m,h,v,C,w,S),this._parentEditor=l,this._overwriteOptions=g,super.updateOptions(this._overwriteOptions),this._register(l.onDidChangeConfiguration(D=>this._onParentConfigurationChanged(D)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(o){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(o){c.mixin(this._overwriteOptions,o,!0),super.updateOptions(this._overwriteOptions)}};e.EmbeddedCodeEditorWidget=t,e.EmbeddedCodeEditorWidget=t=De([he(4,p.IInstantiationService),he(5,k.ICodeEditorService),he(6,_.ICommandService),he(7,b.IContextKeyService),he(8,s.IThemeService),he(9,n.INotificationService),he(10,f.IAccessibilityService),he(11,L.ILanguageConfigurationService),he(12,y.ILanguageFeaturesService)],t)}),define(oe[284],re([1,0,5,67,8,6,2,21,65,15,35,142,218,753,797,320,283,790,379,368,410,659,85,161,391,9,4,198,20,136,12,7,180,96,766,562,798,402,509]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R,N,O,x,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorWidget=void 0;let W=class extends O.DelegatingEditor{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(H,K,U,Y,Q,X,G,P){super(),this._domElement=H,this._parentContextKeyService=Y,this._parentInstantiationService=Q,this._accessibilitySignalService=G,this._editorProgressService=P,this.elements=(0,c.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,c.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,c.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,c.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModelSrc=this._register((0,f.disposableObservableValue)(this,void 0)),this._diffModel=(0,f.derived)(this,V=>this._diffModelSrc.read(V)?.object),this.onDidChangeModel=L.Event.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new A.ServiceCollection([T.IContextKeyService,this._contextKeyService]))),this._boundarySashes=(0,f.observableValue)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,f.observableValue)(this,!1),this._accessibleDiffViewerVisible=(0,f.derived)(this,V=>this._options.onlyShowAccessibleDiffViewer.read(V)?!0:this._accessibleDiffViewerShouldBeVisible.read(V)),this._movedBlocksLinesPart=(0,f.observableValue)(this,void 0),this._layoutInfo=(0,f.derived)(this,V=>{const $=this._rootSizeObserver.width.read(V),Z=this._rootSizeObserver.height.read(V);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=Z+"px";const ee=this._sash.read(V),le=this._gutter.read(V),de=le?.width.read(V)??0,me=this._overviewRulerPart.read(V)?.width??0;let be,ve,Le,Se,ye;if(!!ee){const ke=ee.sashLeft.read(V),Re=this._movedBlocksLinesPart.read(V)?.width.read(V)??0;be=0,ve=ke-de-Re,ye=ke-de,Le=ke,Se=$-Le-me}else{ye=0;const ke=this._options.inlineViewHideOriginalLineNumbers.read(V);be=de,ke?ve=0:ve=Math.max(5,this._editors.originalObs.layoutInfoDecorationsLeft.read(V)),Le=de+ve,Se=$-Le-me}return this.elements.original.style.left=be+"px",this.elements.original.style.width=ve+"px",this._editors.original.layout({width:ve,height:Z},!0),le?.layout(ye),this.elements.modified.style.left=Le+"px",this.elements.modified.style.width=Se+"px",this._editors.modified.layout({width:Se,height:Z},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}}),this._diffValue=this._diffModel.map((V,$)=>V?.diff.read($)),this.onDidUpdateDiff=L.Event.fromObservableLight(this._diffValue),X.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,y.toDisposable)(()=>this.elements.root.remove())),this._rootSizeObserver=this._register(new m.ObservableElementSizeObserver(this.elements.root,K.dimension)),this._rootSizeObserver.setAutomaticLayout(K.automaticLayout??!1),this._options=this._instantiationService.createInstance(x.DiffEditorOptions,K),this._register((0,f.autorun)(V=>{this._options.setWidth(this._rootSizeObserver.width.read(V))})),this._contextKeyService.createKey(D.EditorContextKeys.isEmbeddedDiffEditor.key,!1),this._register((0,v.bindContextKey)(D.EditorContextKeys.isEmbeddedDiffEditor,this._contextKeyService,V=>this._options.isInEmbeddedEditor.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.comparingMovedCode,this._contextKeyService,V=>!!this._diffModel.read(V)?.movedTextToCompare.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,V=>this._options.couldShowInlineViewBecauseOfSize.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorInlineMode,this._contextKeyService,V=>!this._options.renderSideBySide.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.hasChanges,this._contextKeyService,V=>(this._diffModel.read(V)?.diff.read(V)?.mappings.length??0)>0)),this._editors=this._register(this._instantiationService.createInstance(N.DiffEditorEditors,this.elements.original,this.elements.modified,this._options,U,(V,$,Z,ee)=>this._createInnerEditor(V,$,Z,ee))),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorOriginalWritable,this._contextKeyService,V=>this._options.originalEditable.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorModifiedWritable,this._contextKeyService,V=>!this._options.readOnly.read(V))),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorOriginalUri,this._contextKeyService,V=>this._diffModel.read(V)?.model.original.uri.toString()??"")),this._register((0,v.bindContextKey)(D.EditorContextKeys.diffEditorModifiedUri,this._contextKeyService,V=>this._diffModel.read(V)?.model.modified.uri.toString()??"")),this._overviewRulerPart=(0,_.derivedDisposable)(this,V=>this._options.renderOverviewRuler.read(V)?this._instantiationService.createInstance((0,h.readHotReloadableExport)(r.OverviewRulerFeature,V),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map($=>$.modifiedEditor)):void 0).recomputeInitiallyAndOnChange(this._store);const te={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map((V,$)=>V-(this._overviewRulerPart.read($)?.width??0))};this._sashLayout=new o.SashLayout(this._options,te),this._sash=(0,_.derivedDisposable)(this,V=>{const $=this._options.renderSideBySide.read(V);return this.elements.root.classList.toggle("side-by-side",$),$?new o.DiffEditorSash(this.elements.root,te,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,()=>this._sashLayout.resetSash()):void 0}).recomputeInitiallyAndOnChange(this._store);const se=(0,_.derivedDisposable)(this,V=>this._instantiationService.createInstance((0,h.readHotReloadableExport)(l.HideUnchangedRegionsFeature,V),this._editors,this._diffModel,this._options)).recomputeInitiallyAndOnChange(this._store);(0,_.derivedDisposable)(this,V=>this._instantiationService.createInstance((0,h.readHotReloadableExport)(i.DiffEditorDecorations,V),this._editors,this._diffModel,this._options,this)).recomputeInitiallyAndOnChange(this._store);const ue=new Set,ge=new Set;let pe=!1;const ce=(0,_.derivedDisposable)(this,V=>this._instantiationService.createInstance((0,h.readHotReloadableExport)(g.DiffEditorViewZones,V),(0,c.getWindow)(this._domElement),this._editors,this._diffModel,this._options,this,()=>pe||se.get().isUpdatingHiddenAreas,ue,ge)).recomputeInitiallyAndOnChange(this._store),ie=(0,f.derived)(this,V=>{const $=ce.read(V).viewZones.read(V).orig,Z=se.read(V).viewZones.read(V).origViewZones;return $.concat(Z)}),ne=(0,f.derived)(this,V=>{const $=ce.read(V).viewZones.read(V).mod,Z=se.read(V).viewZones.read(V).modViewZones;return $.concat(Z)});this._register((0,m.applyViewZones)(this._editors.original,ie,V=>{pe=V},ue));let J;this._register((0,m.applyViewZones)(this._editors.modified,ne,V=>{pe=V,pe?J=n.StableEditorScrollState.capture(this._editors.modified):(J?.restore(this._editors.modified),J=void 0)},ge)),this._accessibleDiffViewer=(0,_.derivedDisposable)(this,V=>this._instantiationService.createInstance((0,h.readHotReloadableExport)(t.AccessibleDiffViewer,V),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,($,Z)=>this._accessibleDiffViewerShouldBeVisible.set($,Z),this._options.onlyShowAccessibleDiffViewer.map($=>!$),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(($,Z)=>$?.diff.read(Z)?.mappings.map(ee=>ee.lineRangeMapping)),new t.AccessibleDiffViewerModelFromEditors(this._editors))).recomputeInitiallyAndOnChange(this._store);const B=this._accessibleDiffViewerVisible.map(V=>V?"hidden":"visible");this._register((0,m.applyStyle)(this.elements.modified,{visibility:B})),this._register((0,m.applyStyle)(this.elements.original,{visibility:B})),this._createDiffEditorContributions(),X.addDiffEditor(this),this._gutter=(0,_.derivedDisposable)(this,V=>this._options.shouldRenderGutterMenu.read(V)?this._instantiationService.createInstance((0,h.readHotReloadableExport)(u.DiffEditorGutter,V),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0),this._register((0,f.recomputeInitiallyAndOnChange)(this._layoutInfo)),(0,_.derivedDisposable)(this,V=>new((0,h.readHotReloadableExport)(a.MovedBlocksLinesFeature,V))(this.elements.root,this._diffModel,this._layoutInfo.map($=>$.originalEditor),this._layoutInfo.map($=>$.modifiedEditor),this._editors)).recomputeInitiallyAndOnChange(this._store,V=>{this._movedBlocksLinesPart.set(V,void 0)}),this._register(L.Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,V=>this._handleCursorPositionChange(V,!0))),this._register(L.Event.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,V=>this._handleCursorPositionChange(V,!1)));const j=this._diffModel.map(this,(V,$)=>{if(V)return V.diff.read($)===void 0&&!V.isDiffUpToDate.read($)});this._register((0,f.autorunWithStore)((V,$)=>{if(j.read(V)===!0){const Z=this._editorProgressService.show(!0,1e3);$.add((0,y.toDisposable)(()=>Z.done()))}})),this._register((0,f.autorunWithStore)((V,$)=>{$.add(new((0,h.readHotReloadableExport)(d.RevertButtonsFeature,V))(this._editors,this._diffModel,this._options,this))})),this._register((0,f.autorunWithStore)((V,$)=>{const Z=this._diffModel.read(V);if(Z)for(const ee of[Z.model.original,Z.model.modified])$.add(ee.onWillDispose(le=>{(0,E.onUnexpectedError)(new E.BugIndicatingError("TextModel got disposed before DiffEditorWidget model got reset")),this.setModel(null)}))})),this._register((0,f.autorun)(V=>{this._options.setModel(this._diffModel.read(V))}))}_createInnerEditor(H,K,U,Y){return H.createInstance(s.CodeEditorWidget,K,U,Y)}_createDiffEditorContributions(){const H=b.EditorExtensionsRegistry.getDiffEditorContributions();for(const K of H)try{this._register(this._instantiationService.createInstance(K.ctor,this))}catch(U){(0,E.onUnexpectedError)(U)}}get _targetEditor(){return this._editors.modified}getEditorType(){return S.EditorType.IDiffEditor}layout(H){this._rootSizeObserver.observe(H)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){const H=this._editors.original.saveViewState(),K=this._editors.modified.saveViewState();return{original:H,modified:K,modelState:this._diffModel.get()?.serializeState()}}restoreViewState(H){if(H&&H.original&&H.modified){const K=H;this._editors.original.restoreViewState(K.original),this._editors.modified.restoreViewState(K.modified),K.modelState&&this._diffModel.get()?.restoreSerializedState(K.modelState)}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(H){return this._instantiationService.createInstance(F.DiffEditorViewModel,H,this._options)}getModel(){return this._diffModel.get()?.model??null}setModel(H){const K=H?"model"in H?m.RefCounted.create(H).createNewRef(this):m.RefCounted.create(this.createViewModel(H),this):null;this.setDiffModel(K)}setDiffModel(H,K){const U=this._diffModel.get();!H&&U&&this._accessibleDiffViewer.get().close(),this._diffModel.get()!==H?.object&&(0,f.subtransaction)(K,Y=>{const Q=H?.object;f.observableFromEvent.batchEventsGlobally(Y,()=>{this._editors.original.setModel(Q?Q.model.original:null),this._editors.modified.setModel(Q?Q.model.modified:null)});const X=this._diffModelSrc.get()?.createNewRef(this);this._diffModelSrc.set(H?.createNewRef(this),Y),setTimeout(()=>{X?.dispose()},0)})}updateOptions(H){this._options.updateOptions(H)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){const H=this._diffModel.get()?.diff.get();return H?z(H):null}revert(H){const K=this._diffModel.get();!K||!K.isDiffUpToDate.get()||this._editors.modified.executeEdits("diffEditor",[{range:H.modified.toExclusiveRange(),text:K.model.original.getValueInRange(H.original.toExclusiveRange())}])}revertRangeMappings(H){const K=this._diffModel.get();if(!K||!K.isDiffUpToDate.get())return;const U=H.map(Y=>({range:Y.modifiedRange,text:K.model.original.getValueInRange(Y.originalRange)}));this._editors.modified.executeEdits("diffEditor",U)}_goTo(H){this._editors.modified.setPosition(new C.Position(H.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(H.lineRangeMapping.modified.toExclusiveRange())}goToDiff(H){const K=this._diffModel.get()?.diff.get()?.mappings;if(!K||K.length===0)return;const U=this._editors.modified.getPosition().lineNumber;let Y;H==="next"?Y=K.find(Q=>Q.lineRangeMapping.modified.startLineNumber>U)??K[0]:Y=(0,k.findLast)(K,Q=>Q.lineRangeMapping.modified.startLineNumber<U)??K[K.length-1],this._goTo(Y),Y.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineDeleted,{source:"diffEditor.goToDiff"}):Y.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineInserted,{source:"diffEditor.goToDiff"}):Y&&this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const H=this._diffModel.get();H&&this.waitForDiff().then(()=>{const K=H.diff.get()?.mappings;!K||K.length===0||this._goTo(K[0])})}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const H=this._diffModel.get();H&&await H.waitForDiff()}mapToOtherSide(){const H=this._editors.modified.hasWidgetFocus(),K=H?this._editors.modified:this._editors.original,U=H?this._editors.original:this._editors.modified;let Y;const Q=K.getSelection();if(Q){const X=this._diffModel.get()?.diff.get()?.mappings.map(G=>H?G.lineRangeMapping.flip():G.lineRangeMapping);if(X){const G=(0,m.translatePosition)(Q.getStartPosition(),X),P=(0,m.translatePosition)(Q.getEndPosition(),X);Y=w.Range.plusRange(G,P)}}return{destination:U,destinationSelection:Y}}switchSide(){const{destination:H,destinationSelection:K}=this.mapToOtherSide();H.focus(),K&&H.setSelection(K)}exitCompareMove(){const H=this._diffModel.get();H&&H.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){const H=this._diffModel.get()?.unchangedRegions.get();H&&(0,f.transaction)(K=>{for(const U of H)U.collapseAll(K)})}showAllUnchangedRegions(){const H=this._diffModel.get()?.unchangedRegions.get();H&&(0,f.transaction)(K=>{for(const U of H)U.showAll(K)})}_handleCursorPositionChange(H,K){if(H?.reason===3){const U=this._diffModel.get()?.diff.get()?.mappings.find(Y=>K?Y.lineRangeMapping.modified.contains(H.position.lineNumber):Y.lineRangeMapping.original.contains(H.position.lineNumber));U?.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):U?.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):U&&this._accessibilitySignalService.playSignal(I.AccessibilitySignal.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};e.DiffEditorWidget=W,e.DiffEditorWidget=W=De([he(3,T.IContextKeyService),he(4,M.IInstantiationService),he(5,p.ICodeEditorService),he(6,I.IAccessibilitySignalService),he(7,R.IEditorProgressService)],W);function z(q){return q.mappings.map(H=>{const K=H.lineRangeMapping;let U,Y,Q,X,G=K.innerChanges;return K.original.isEmpty?(U=K.original.startLineNumber-1,Y=0,G=void 0):(U=K.original.startLineNumber,Y=K.original.endLineNumberExclusive-1),K.modified.isEmpty?(Q=K.modified.startLineNumber-1,X=0,G=void 0):(Q=K.modified.startLineNumber,X=K.modified.endLineNumberExclusive-1),{originalStartLineNumber:U,originalEndLineNumber:Y,modifiedStartLineNumber:Q,modifiedEndLineNumber:X,charChanges:G?.map(P=>({originalStartLineNumber:P.originalRange.startLineNumber,originalStartColumn:P.originalRange.startColumn,originalEndLineNumber:P.originalRange.endLineNumber,originalEndColumn:P.originalRange.endColumn,modifiedStartLineNumber:P.modifiedRange.startLineNumber,modifiedStartColumn:P.modifiedRange.startColumn,modifiedEndLineNumber:P.modifiedRange.endLineNumber,modifiedEndColumn:P.modifiedRange.endColumn}))}})}}),define(oe[802],re([1,0,5,26,15,35,284,20,3,29,27,12,138]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibleDiffViewerPrev=e.AccessibleDiffViewerNext=e.RevertHunkOrSelection=e.ShowAllUnchangedRegions=e.CollapseAllUnchangedRegions=e.ExitCompareMove=e.SwitchSide=e.ToggleUseInlineViewWhenSpaceIsLimited=e.ToggleShowMovedCodeBlocks=e.ToggleCollapseUnchangedRegions=void 0,e.findDiffEditor=v,e.findFocusedDiffEditor=C;class s extends b.Action2{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,_.localize2)(1e3,"Toggle Collapse Unchanged Regions"),icon:k.Codicon.map,toggled:n.ContextKeyExpr.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:n.ContextKeyExpr.has("isInDiffEditor"),menu:{when:n.ContextKeyExpr.has("isInDiffEditor"),id:b.MenuId.EditorTitle,order:22,group:"navigation"}})}run(D,...I){const T=D.get(p.IConfigurationService),M=!T.getValue("diffEditor.hideUnchangedRegions.enabled");T.updateValue("diffEditor.hideUnchangedRegions.enabled",M)}}e.ToggleCollapseUnchangedRegions=s;class t extends b.Action2{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,_.localize2)(1001,"Toggle Show Moved Code Blocks"),precondition:n.ContextKeyExpr.has("isInDiffEditor")})}run(D,...I){const T=D.get(p.IConfigurationService),M=!T.getValue("diffEditor.experimental.showMoves");T.updateValue("diffEditor.experimental.showMoves",M)}}e.ToggleShowMovedCodeBlocks=t;class i extends b.Action2{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,_.localize2)(1002,"Toggle Use Inline View When Space Is Limited"),precondition:n.ContextKeyExpr.has("isInDiffEditor")})}run(D,...I){const T=D.get(p.IConfigurationService),M=!T.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");T.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",M)}}e.ToggleUseInlineViewWhenSpaceIsLimited=i;const o=(0,_.localize2)(1003,"Diff Editor");class g extends E.EditorAction2{constructor(){super({id:"diffEditor.switchSide",title:(0,_.localize2)(1004,"Switch Side"),icon:k.Codicon.arrowSwap,precondition:n.ContextKeyExpr.has("isInDiffEditor"),f1:!0,category:o})}runEditorCommand(D,I,T){const M=C(D);if(M instanceof y.DiffEditorWidget){if(T&&T.dryRun)return{destinationSelection:M.mapToOtherSide().destinationSelection};M.switchSide()}}}e.SwitchSide=g;class u extends E.EditorAction2{constructor(){super({id:"diffEditor.exitCompareMove",title:(0,_.localize2)(1005,"Exit Compare Move"),icon:k.Codicon.close,precondition:f.EditorContextKeys.comparingMovedCode,f1:!1,category:o,keybinding:{weight:1e4,primary:9}})}runEditorCommand(D,I,...T){const M=C(D);M instanceof y.DiffEditorWidget&&M.exitCompareMove()}}e.ExitCompareMove=u;class l extends E.EditorAction2{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,_.localize2)(1006,"Collapse All Unchanged Regions"),icon:k.Codicon.fold,precondition:n.ContextKeyExpr.has("isInDiffEditor"),f1:!0,category:o})}runEditorCommand(D,I,...T){const M=C(D);M instanceof y.DiffEditorWidget&&M.collapseAllUnchangedRegions()}}e.CollapseAllUnchangedRegions=l;class a extends E.EditorAction2{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,_.localize2)(1007,"Show All Unchanged Regions"),icon:k.Codicon.unfold,precondition:n.ContextKeyExpr.has("isInDiffEditor"),f1:!0,category:o})}runEditorCommand(D,I,...T){const M=C(D);M instanceof y.DiffEditorWidget&&M.showAllUnchangedRegions()}}e.ShowAllUnchangedRegions=a;class r extends b.Action2{constructor(){super({id:"diffEditor.revert",title:(0,_.localize2)(1008,"Revert"),f1:!1,category:o})}run(D,I){const T=v(D,I.originalUri,I.modifiedUri);T instanceof y.DiffEditorWidget&&T.revertRangeMappings(I.mapping.innerChanges??[])}}e.RevertHunkOrSelection=r;const d=(0,_.localize2)(1009,"Accessible Diff Viewer");class m extends b.Action2{static{this.id="editor.action.accessibleDiffViewer.next"}constructor(){super({id:m.id,title:(0,_.localize2)(1010,"Go to Next Difference"),category:d,precondition:n.ContextKeyExpr.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(D){C(D)?.accessibleDiffViewerNext()}}e.AccessibleDiffViewerNext=m;class h extends b.Action2{static{this.id="editor.action.accessibleDiffViewer.prev"}constructor(){super({id:h.id,title:(0,_.localize2)(1011,"Go to Previous Difference"),category:d,precondition:n.ContextKeyExpr.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(D){C(D)?.accessibleDiffViewerPrev()}}e.AccessibleDiffViewerPrev=h;function v(S,D,I){return S.get(L.ICodeEditorService).listDiffEditors().find(A=>{const R=A.getModifiedEditor(),N=A.getOriginalEditor();return R&&R.getModel()?.uri.toString()===I.toString()&&N&&N.getModel()?.uri.toString()===D.toString()})||null}function C(S){const I=S.get(L.ICodeEditorService).listDiffEditors(),T=(0,c.getActiveElement)();if(T)for(const M of I){const A=M.getContainerDomNode();if(w(A,T))return M}return null}function w(S,D){let I=D;for(;I;){if(I===S)return!0;I=I.parentElement}return!1}}),define(oe[803],re([1,0,26,802,20,3,29,24,12,138]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,y.registerAction2)(k.ToggleCollapseUnchangedRegions),(0,y.registerAction2)(k.ToggleShowMovedCodeBlocks),(0,y.registerAction2)(k.ToggleUseInlineViewWhenSpaceIsLimited),y.MenuRegistry.appendMenuItem(y.MenuId.EditorTitle,{command:{id:new k.ToggleUseInlineViewWhenSpaceIsLimited().desc.id,title:(0,L.localize)(995,"Use Inline View When Space Is Limited"),toggled:_.ContextKeyExpr.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:_.ContextKeyExpr.has("isInDiffEditor")},order:11,group:"1_diff",when:_.ContextKeyExpr.and(E.EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached,_.ContextKeyExpr.has("isInDiffEditor"))}),y.MenuRegistry.appendMenuItem(y.MenuId.EditorTitle,{command:{id:new k.ToggleShowMovedCodeBlocks().desc.id,title:(0,L.localize)(996,"Show Moved Code Blocks"),icon:c.Codicon.move,toggled:_.ContextKeyEqualsExpr.create("config.diffEditor.experimental.showMoves",!0),precondition:_.ContextKeyExpr.has("isInDiffEditor")},order:10,group:"1_diff",when:_.ContextKeyExpr.has("isInDiffEditor")}),(0,y.registerAction2)(k.RevertHunkOrSelection);for(const b of[{icon:c.Codicon.arrowRight,key:E.EditorContextKeys.diffEditorInlineMode.toNegated()},{icon:c.Codicon.discard,key:E.EditorContextKeys.diffEditorInlineMode}])y.MenuRegistry.appendMenuItem(y.MenuId.DiffEditorHunkToolbar,{command:{id:new k.RevertHunkOrSelection().desc.id,title:(0,L.localize)(997,"Revert Block"),icon:b.icon},when:_.ContextKeyExpr.and(E.EditorContextKeys.diffEditorModifiedWritable,b.key),order:5,group:"primary"}),y.MenuRegistry.appendMenuItem(y.MenuId.DiffEditorSelectionToolbar,{command:{id:new k.RevertHunkOrSelection().desc.id,title:(0,L.localize)(998,"Revert Selection"),icon:b.icon},when:_.ContextKeyExpr.and(E.EditorContextKeys.diffEditorModifiedWritable,b.key),order:5,group:"primary"});(0,y.registerAction2)(k.SwitchSide),(0,y.registerAction2)(k.ExitCompareMove),(0,y.registerAction2)(k.CollapseAllUnchangedRegions),(0,y.registerAction2)(k.ShowAllUnchangedRegions),y.MenuRegistry.appendMenuItem(y.MenuId.EditorTitle,{command:{id:k.AccessibleDiffViewerNext.id,title:(0,L.localize)(999,"Open Accessible Diff Viewer"),precondition:_.ContextKeyExpr.has("isInDiffEditor")},order:10,group:"2_diff",when:_.ContextKeyExpr.and(E.EditorContextKeys.accessibleDiffViewerVisible.negate(),_.ContextKeyExpr.has("isInDiffEditor"))}),f.CommandsRegistry.registerCommandAlias("editor.action.diffReview.next",k.AccessibleDiffViewerNext.id),(0,y.registerAction2)(k.AccessibleDiffViewerNext),f.CommandsRegistry.registerCommandAlias("editor.action.diffReview.prev",k.AccessibleDiffViewerPrev.id),(0,y.registerAction2)(k.AccessibleDiffViewerPrev)}),define(oe[415],re([1,0,5,231,26,2,21,91,113,284,124,216,29,7,369]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DiffEditorItemTemplate=e.TemplateData=void 0;class o{constructor(l,a){this.viewModel=l,this.deltaScrollVertical=a}getId(){return this.viewModel}}e.TemplateData=o;let g=class extends L.Disposable{constructor(l,a,r,d){super(),this._container=l,this._overflowWidgetsDomNode=a,this._workbenchUIElementFactory=r,this._instantiationService=d,this._viewModel=(0,f.observableValue)(this,void 0),this._collapsed=(0,y.derived)(this,h=>this._viewModel.read(h)?.collapsed.read(h)),this._editorContentHeight=(0,f.observableValue)(this,500),this.contentHeight=(0,y.derived)(this,h=>(this._collapsed.read(h)?0:this._editorContentHeight.read(h))+this._outerEditorHeight),this._modifiedContentWidth=(0,f.observableValue)(this,0),this._modifiedWidth=(0,f.observableValue)(this,0),this._originalContentWidth=(0,f.observableValue)(this,0),this._originalWidth=(0,f.observableValue)(this,0),this.maxScroll=(0,y.derived)(this,h=>{const v=this._modifiedContentWidth.read(h)-this._modifiedWidth.read(h),C=this._originalContentWidth.read(h)-this._originalWidth.read(h);return v>C?{maxScroll:v,width:this._modifiedWidth.read(h)}:{maxScroll:C,width:this._originalWidth.read(h)}}),this._elements=(0,c.h)("div.multiDiffEntry",[(0,c.h)("div.header@header",[(0,c.h)("div.header-content",[(0,c.h)("div.collapse-button@collapseButton"),(0,c.h)("div.file-path",[(0,c.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,c.h)("div.status.deleted@status",["R"]),(0,c.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,c.h)("div.actions@actions")])]),(0,c.h)("div.editorParent",[(0,c.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(b.DiffEditorWidget,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=(0,_.observableCodeEditor)(this.editor.getModifiedEditor()).isFocused,this.isOriginalFocused=(0,_.observableCodeEditor)(this.editor.getOriginalEditor()).isFocused,this.isFocused=(0,y.derived)(this,h=>this.isModifedFocused.read(h)||this.isOriginalFocused.read(h)),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new L.DisposableStore,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const m=new k.Button(this._elements.collapseButton,{});this._register((0,y.autorun)(h=>{m.element.className="",m.icon=this._collapsed.read(h)?E.Codicon.chevronRight:E.Codicon.chevronDown})),this._register(m.onDidClick(()=>{this._viewModel.get()?.collapsed.set(!this._collapsed.get(),void 0)})),this._register((0,y.autorun)(h=>{this._elements.editor.style.display=this._collapsed.read(h)?"none":"block"})),this._register(this.editor.getModifiedEditor().onDidLayoutChange(h=>{const v=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(v,void 0)})),this._register(this.editor.getOriginalEditor().onDidLayoutChange(h=>{const v=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(v,void 0)})),this._register(this.editor.onDidContentSizeChange(h=>{(0,f.globalTransaction)(v=>{this._editorContentHeight.set(h.contentHeight,v),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),v),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),v)})})),this._register(this.editor.getOriginalEditor().onDidScrollChange(h=>{if(this._isSettingScrollTop||!h.scrollTopChanged||!this._data)return;const v=h.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(v)})),this._register((0,y.autorun)(h=>{const v=this._viewModel.read(h)?.isActive.read(h);this._elements.root.classList.toggle("active",v)})),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(n.MenuWorkbenchToolBar,this._elements.actions,s.MenuId.MultiDiffEditorFileToolbar,{actionRunner:this._register(new i.ActionRunnerWithContext(()=>this._viewModel.get()?.modifiedUri)),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:h=>h.startsWith("navigation")},actionViewItemProvider:(h,v)=>(0,p.createActionViewItem)(d,h,v)}))}setScrollLeft(l){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(l):this.editor.getOriginalEditor().setScrollLeft(l)}setData(l){this._data=l;function a(d){return{...d,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}if(!l){(0,f.globalTransaction)(d=>{this._viewModel.set(void 0,d),this.editor.setDiffModel(null,d),this._dataStore.clear()});return}const r=l.viewModel.documentDiffItem;(0,f.globalTransaction)(d=>{this._resourceLabel?.setUri(l.viewModel.modifiedUri??l.viewModel.originalUri,{strikethrough:l.viewModel.modifiedUri===void 0});let m=!1,h=!1,v=!1,C="";l.viewModel.modifiedUri&&l.viewModel.originalUri&&l.viewModel.modifiedUri.path!==l.viewModel.originalUri.path?(C="R",m=!0):l.viewModel.modifiedUri?l.viewModel.originalUri||(C="A",v=!0):(C="D",h=!0),this._elements.status.classList.toggle("renamed",m),this._elements.status.classList.toggle("deleted",h),this._elements.status.classList.toggle("added",v),this._elements.status.innerText=C,this._resourceLabel2?.setUri(m?l.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(l.viewModel,d),this.editor.setDiffModel(l.viewModel.diffEditorViewModelRef,d),this.editor.updateOptions(a(r.options??{}))}),r.onOptionsDidChange&&this._dataStore.add(r.onOptionsDidChange(()=>{this.editor.updateOptions(a(r.options??{}))})),l.viewModel.isAlive.recomputeInitiallyAndOnChange(this._dataStore,d=>{d||this.setData(void 0)})}render(l,a,r,d){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${l.start}px`,this._elements.root.style.height=`${l.length}px`,this._elements.root.style.width=`${a}px`,this._elements.root.style.position="absolute";const m=l.length-this._headerHeight,h=Math.max(0,Math.min(d.start-l.start,m));this._elements.header.style.transform=`translateY(${h}px)`,(0,f.globalTransaction)(v=>{this.editor.layout({width:a-2*8-2*1,height:l.length-this._outerEditorHeight})});try{this._isSettingScrollTop=!0,this._lastScrollTop=r,this.editor.getOriginalEditor().setScrollTop(r)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",h>0||r>0),this._elements.header.classList.toggle("collapsed",h===m)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};e.DiffEditorItemTemplate=g,e.DiffEditorItemTemplate=g=De([he(3,t.IInstantiationService)],g)}),define(oe[804],re([1,0,5,84,13,67,8,2,21,91,162,85,69,23,20,12,7,180,415,563,3,511]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiDiffEditorWidgetImpl=void 0;let d=class extends f.Disposable{constructor(v,C,w,S,D,I){super(),this._element=v,this._dimension=C,this._viewModel=w,this._workbenchUIElementFactory=S,this._parentContextKeyService=D,this._parentInstantiationService=I,this._scrollableElements=(0,c.h)("div.scrollContent",[(0,c.h)("div@content",{style:{overflow:"hidden"}}),(0,c.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new p.Scrollable({forceIntegerValues:!1,scheduleAtNextAnimationFrame:M=>(0,c.scheduleAtNextAnimationFrame)((0,c.getWindow)(this._element),M),smoothScrollDuration:100})),this._scrollableElement=this._register(new k.SmoothScrollableElement(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=(0,c.h)("div.monaco-component.multiDiffEditor",{},[(0,c.h)("div",{},[this._scrollableElement.getDomNode()]),(0,c.h)("div.placeholder@placeholder",{},[(0,c.h)("div",[(0,r.localize)(986,"No Changed Files")])])]),this._sizeObserver=this._register(new n.ObservableElementSizeObserver(this._element,void 0)),this._objectPool=this._register(new a.ObjectPool(M=>{const A=this._instantiationService.createInstance(l.DiffEditorItemTemplate,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return A.setData(M),A})),this.scrollTop=(0,_.observableFromEvent)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollTop),this.scrollLeft=(0,_.observableFromEvent)(this,this._scrollableElement.onScroll,()=>this._scrollableElement.getScrollPosition().scrollLeft),this._viewItemsInfo=(0,_.derivedWithStore)(this,(M,A)=>{const R=this._viewModel.read(M);if(!R)return{items:[],getItem:F=>{throw new y.BugIndicatingError}};const N=R.items.read(M),O=new Map;return{items:N.map(F=>{const W=A.add(new m(F,this._objectPool,this.scrollLeft,q=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+q})})),z=this._lastDocStates?.[W.getKey()];return z&&(0,b.transaction)(q=>{W.setViewState(z,q)}),O.set(F,W),W}),getItem:F=>O.get(F)}}),this._viewItems=this._viewItemsInfo.map(this,M=>M.items),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,(M,A)=>M.reduce((R,N)=>R+N.contentHeight.read(A)+this._spaceBetweenPx,0)),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new u.ServiceCollection([o.IContextKeyService,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(i.EditorContextKeys.inMultiDiffEditor.key,!0),this._register((0,_.autorunWithStore)((M,A)=>{const R=this._viewModel.read(M);if(R&&R.contextKeys)for(const[N,O]of Object.entries(R.contextKeys)){const x=this._contextKeyService.createKey(N,void 0);x.set(O),A.add((0,f.toDisposable)(()=>x.reset()))}}));const T=this._parentContextKeyService.createKey(i.EditorContextKeys.multiDiffEditorAllCollapsed.key,!1);this._register((0,_.autorun)(M=>{const A=this._viewModel.read(M);if(A){const R=A.items.read(M).every(N=>N.collapsed.read(M));T.set(R)}})),this._register((0,_.autorun)(M=>{const A=this._dimension.read(M);this._sizeObserver.observe(A)})),this._register((0,_.autorun)(M=>{const A=this._viewItems.read(M);this._elements.placeholder.classList.toggle("visible",A.length===0)})),this._scrollableElements.content.style.position="relative",this._register((0,_.autorun)(M=>{const A=this._sizeObserver.height.read(M);this._scrollableElements.root.style.height=`${A}px`;const R=this._totalHeight.read(M);this._scrollableElements.content.style.height=`${R}px`;const N=this._sizeObserver.width.read(M);let O=N;const x=this._viewItems.read(M),F=(0,L.findFirstMax)(x,(0,E.compareBy)(W=>W.maxScroll.read(M).maxScroll,E.numberComparator));if(F){const W=F.maxScroll.read(M);O=N+W.maxScroll}this._scrollableElement.setScrollDimensions({width:N,height:A,scrollHeight:R,scrollWidth:O})})),v.replaceChildren(this._elements.root),this._register((0,f.toDisposable)(()=>{v.replaceChildren()})),this._register(this._register((0,_.autorun)(M=>{(0,b.globalTransaction)(A=>{this.render(M)})})))}render(v){const C=this.scrollTop.read(v);let w=0,S=0,D=0;const I=this._sizeObserver.height.read(v),T=s.OffsetRange.ofStartAndLength(C,I),M=this._sizeObserver.width.read(v);for(const A of this._viewItems.read(v)){const R=A.contentHeight.read(v),N=Math.min(R,I),O=s.OffsetRange.ofStartAndLength(S,N),x=s.OffsetRange.ofStartAndLength(D,R);if(x.isBefore(T))w-=R-N,A.hide();else if(x.isAfter(T))A.hide();else{const F=Math.max(0,Math.min(T.start-x.start,R-N));w-=F;const W=s.OffsetRange.ofStartAndLength(C+w,I);A.render(O,F,M,W)}S+=N+this._spaceBetweenPx,D+=R+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(C+w)}px)`}};e.MultiDiffEditorWidgetImpl=d,e.MultiDiffEditorWidgetImpl=d=De([he(4,o.IContextKeyService),he(5,g.IInstantiationService)],d);class m extends f.Disposable{constructor(v,C,w,S){super(),this.viewModel=v,this._objectPool=C,this._scrollLeft=w,this._deltaScrollVertical=S,this._templateRef=this._register((0,b.disposableObservableValue)(this,void 0)),this.contentHeight=(0,_.derived)(this,D=>this._templateRef.read(D)?.object.contentHeight?.read(D)??this.viewModel.lastTemplateData.read(D).contentHeight),this.maxScroll=(0,_.derived)(this,D=>this._templateRef.read(D)?.object.maxScroll.read(D)??{maxScroll:0,scrollWidth:0}),this.template=(0,_.derived)(this,D=>this._templateRef.read(D)?.object),this._isHidden=(0,_.observableValue)(this,!1),this._isFocused=(0,_.derived)(this,D=>this.template.read(D)?.isFocused.read(D)??!1),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,_.autorun)(D=>{const I=this._scrollLeft.read(D);this._templateRef.read(D)?.object.setScrollLeft(I)})),this._register((0,_.autorun)(D=>{const I=this._templateRef.read(D);!I||!this._isHidden.read(D)||I.object.isFocused.read(D)||this._clear()}))}dispose(){this._clear(),super.dispose()}toString(){return`VirtualViewItem(${this.viewModel.documentDiffItem.modified?.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(v,C){this.viewModel.collapsed.set(v.collapsed,C),this._updateTemplateData(C);const w=this.viewModel.lastTemplateData.get(),S=v.selections?.map(t.Selection.liftSelection);this.viewModel.lastTemplateData.set({...w,selections:S},C);const D=this._templateRef.get();D&&S&&D.object.editor.setSelections(S)}_updateTemplateData(v){const C=this._templateRef.get();C&&this.viewModel.lastTemplateData.set({contentHeight:C.object.contentHeight.get(),selections:C.object.editor.getSelections()??void 0},v)}_clear(){const v=this._templateRef.get();v&&(0,b.transaction)(C=>{this._updateTemplateData(C),v.object.hide(),this._templateRef.set(void 0,C)})}hide(){this._isHidden.set(!0,void 0)}render(v,C,w,S){this._isHidden.set(!1,void 0);let D=this._templateRef.get();if(!D){D=this._objectPool.getUnusedObj(new l.TemplateData(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(D,void 0);const I=this.viewModel.lastTemplateData.get().selections;I&&D.object.editor.setSelections(I)}D.object.render(v,w,C,S)}}}),define(oe[805],re([1,0,2,21,161,804,7,415,747]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiDiffEditorWidget=void 0;let _=class extends c.Disposable{constructor(p,n,s){super(),this._element=p,this._workbenchUIElementFactory=n,this._instantiationService=s,this._dimension=(0,k.observableValue)(this,void 0),this._viewModel=(0,k.observableValue)(this,void 0),this._widgetImpl=(0,k.derivedWithStore)(this,(t,i)=>((0,E.readHotReloadableExport)(f.DiffEditorItemTemplate,t),i.add(this._instantiationService.createInstance((0,E.readHotReloadableExport)(L.MultiDiffEditorWidgetImpl,t),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory)))),this._register((0,k.recomputeInitiallyAndOnChange)(this._widgetImpl))}};e.MultiDiffEditorWidget=_,e.MultiDiffEditorWidget=_=De([he(2,y.IInstantiationService)],_)}),define(oe[806],re([1,0,14,2,15,9,4,23,20,40,36,3,29,32,25,513]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BracketMatchingController=void 0;const o=(0,t.registerColor)("editorOverviewRuler.bracketMatchForeground","#A0A0A0",n.localize(974,"Overview ruler marker color for matching brackets."));class g extends E.EditorAction{constructor(){super({id:"editor.action.jumpToBracket",label:n.localize(975,"Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.editorTextFocus,primary:3165,weight:100}})}run(m,h){r.get(h)?.jumpToBracket()}}class u extends E.EditorAction{constructor(){super({id:"editor.action.selectToBracket",label:n.localize(976,"Select to Bracket"),alias:"Select to Bracket",precondition:void 0,metadata:{description:n.localize2(979,"Select the text inside and including the brackets or curly braces"),args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(m,h,v){let C=!0;v&&v.selectBrackets===!1&&(C=!1),r.get(h)?.selectToBracket(C)}}class l extends E.EditorAction{constructor(){super({id:"editor.action.removeBrackets",label:n.localize(977,"Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.editorTextFocus,primary:2561,weight:100}})}run(m,h){r.get(h)?.removeBrackets(this.id)}}class a{constructor(m,h,v){this.position=m,this.brackets=h,this.options=v}}class r extends k.Disposable{static{this.ID="editor.contrib.bracketMatchingController"}static get(m){return m.getContribution(r.ID)}constructor(m){super(),this._editor=m,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new c.RunOnceScheduler(()=>this._updateBrackets(),50)),this._matchBrackets=this._editor.getOption(72),this._updateBracketsSoon.schedule(),this._register(m.onDidChangeCursorPosition(h=>{this._matchBrackets!=="never"&&this._updateBracketsSoon.schedule()})),this._register(m.onDidChangeModelContent(h=>{this._updateBracketsSoon.schedule()})),this._register(m.onDidChangeModel(h=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(m.onDidChangeModelLanguageConfiguration(h=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()})),this._register(m.onDidChangeConfiguration(h=>{h.hasChanged(72)&&(this._matchBrackets=this._editor.getOption(72),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())})),this._register(m.onDidBlurEditorWidget(()=>{this._updateBracketsSoon.schedule()})),this._register(m.onDidFocusEditorWidget(()=>{this._updateBracketsSoon.schedule()}))}jumpToBracket(){if(!this._editor.hasModel())return;const m=this._editor.getModel(),h=this._editor.getSelections().map(v=>{const C=v.getStartPosition(),w=m.bracketPairs.matchBracket(C);let S=null;if(w)w[0].containsPosition(C)&&!w[1].containsPosition(C)?S=w[1].getStartPosition():w[1].containsPosition(C)&&(S=w[0].getStartPosition());else{const D=m.bracketPairs.findEnclosingBrackets(C);if(D)S=D[1].getStartPosition();else{const I=m.bracketPairs.findNextBracket(C);I&&I.range&&(S=I.range.getStartPosition())}}return S?new f.Selection(S.lineNumber,S.column,S.lineNumber,S.column):new f.Selection(C.lineNumber,C.column,C.lineNumber,C.column)});this._editor.setSelections(h),this._editor.revealRange(h[0])}selectToBracket(m){if(!this._editor.hasModel())return;const h=this._editor.getModel(),v=[];this._editor.getSelections().forEach(C=>{const w=C.getStartPosition();let S=h.bracketPairs.matchBracket(w);if(!S&&(S=h.bracketPairs.findEnclosingBrackets(w),!S)){const T=h.bracketPairs.findNextBracket(w);T&&T.range&&(S=h.bracketPairs.matchBracket(T.range.getStartPosition()))}let D=null,I=null;if(S){S.sort(y.Range.compareRangesUsingStarts);const[T,M]=S;if(D=m?T.getStartPosition():T.getEndPosition(),I=m?M.getEndPosition():M.getStartPosition(),M.containsPosition(w)){const A=D;D=I,I=A}}D&&I&&v.push(new f.Selection(D.lineNumber,D.column,I.lineNumber,I.column))}),v.length>0&&(this._editor.setSelections(v),this._editor.revealRange(v[0]))}removeBrackets(m){if(!this._editor.hasModel())return;const h=this._editor.getModel();this._editor.getSelections().forEach(v=>{const C=v.getPosition();let w=h.bracketPairs.matchBracket(C);w||(w=h.bracketPairs.findEnclosingBrackets(C)),w&&(this._editor.pushUndoStop(),this._editor.executeEdits(m,[{range:w[0],text:""},{range:w[1],text:""}]),this._editor.pushUndoStop())})}static{this._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=p.ModelDecorationOptions.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,i.themeColorFromId)(o),position:b.OverviewRulerLane.Center}})}static{this._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=p.ModelDecorationOptions.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"})}_updateBrackets(){if(this._matchBrackets==="never")return;this._recomputeBrackets();const m=[];let h=0;for(const v of this._lastBracketsData){const C=v.brackets;C&&(m[h++]={range:C[0],options:v.options},m[h++]={range:C[1],options:v.options})}this._decorations.set(m)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus()){this._lastBracketsData=[],this._lastVersionId=0;return}const m=this._editor.getSelections();if(m.length>100){this._lastBracketsData=[],this._lastVersionId=0;return}const h=this._editor.getModel(),v=h.getVersionId();let C=[];this._lastVersionId===v&&(C=this._lastBracketsData);const w=[];let S=0;for(let A=0,R=m.length;A<R;A++){const N=m[A];N.isEmpty()&&(w[S++]=N.getStartPosition())}w.length>1&&w.sort(L.Position.compare);const D=[];let I=0,T=0;const M=C.length;for(let A=0,R=w.length;A<R;A++){const N=w[A];for(;T<M&&C[T].position.isBefore(N);)T++;if(T<M&&C[T].position.equals(N))D[I++]=C[T];else{let O=h.bracketPairs.matchBracket(N,20),x=r._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;!O&&this._matchBrackets==="always"&&(O=h.bracketPairs.findEnclosingBrackets(N,20),x=r._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),D[I++]=new a(N,O,x)}}this._lastBracketsData=D,this._lastVersionId=v}}e.BracketMatchingController=r,(0,E.registerEditorContribution)(r.ID,r,1),(0,E.registerEditorAction)(u),(0,E.registerEditorAction)(g),(0,E.registerEditorAction)(l),s.MenuRegistry.appendMenuItem(s.MenuId.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:n.localize(978,"Go to &&Bracket")},order:2})}),define(oe[416],re([1,0,5,68,26,6,2,30,40,36,248,155,3,31,71,4,514]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.LightBulbWidget=void 0;const u=(0,i.registerIcon)("gutter-lightbulb",E.Codicon.lightBulb,s.localize(902,"Icon which spawns code actions menu from the gutter when there is no space in the editor.")),l=(0,i.registerIcon)("gutter-lightbulb-auto-fix",E.Codicon.lightbulbAutofix,s.localize(903,"Icon which spawns code actions menu from the gutter when there is no space in the editor and a quick fix is available.")),a=(0,i.registerIcon)("gutter-lightbulb-sparkle",E.Codicon.lightbulbSparkle,s.localize(904,"Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix is available.")),r=(0,i.registerIcon)("gutter-lightbulb-aifix-auto-fix",E.Codicon.lightbulbSparkleAutofix,s.localize(905,"Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available.")),d=(0,i.registerIcon)("gutter-lightbulb-sparkle-filled",E.Codicon.sparkleFilled,s.localize(906,"Icon which spawns code actions menu from the gutter when there is no space in the editor and an AI fix and a quick fix is available."));var m;(function(v){v.Hidden={type:0};class C{constructor(S,D,I,T){this.actions=S,this.trigger=D,this.editorPosition=I,this.widgetPosition=T,this.type=1}}v.Showing=C})(m||(m={}));let h=class extends y.Disposable{static{g=this}static{this.GUTTER_DECORATION=b.ModelDecorationOptions.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:f.ThemeIcon.asClassName(E.Codicon.lightBulb),glyphMargin:{position:_.GlyphMarginLane.Left},stickiness:1})}static{this.ID="editor.contrib.lightbulbWidget"}static{this._posPref=[0]}constructor(C,w){super(),this._editor=C,this._keybindingService=w,this._onClick=this._register(new L.Emitter),this.onClick=this._onClick.event,this._state=m.Hidden,this._gutterState=m.Hidden,this._iconClasses=[],this.gutterDecoration=g.GUTTER_DECORATION,this._domNode=c.$("div.lightBulbWidget"),this._domNode.role="listbox",this._register(k.Gesture.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent(S=>{const D=this._editor.getModel();(this.state.type!==1||!D||this.state.editorPosition.lineNumber>=D.getLineCount())&&this.hide(),(this.gutterState.type!==1||!D||this.gutterState.editorPosition.lineNumber>=D.getLineCount())&&this.gutterHide()})),this._register(c.addStandardDisposableGenericMouseDownListener(this._domNode,S=>{if(this.state.type!==1)return;this._editor.focus(),S.preventDefault();const{top:D,height:I}=c.getDomNodePagePosition(this._domNode),T=this._editor.getOption(67);let M=Math.floor(T/3);this.state.widgetPosition.position!==null&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(M+=T),this._onClick.fire({x:S.posx,y:D+I+M,actions:this.state.actions,trigger:this.state.trigger})})),this._register(c.addDisposableListener(this._domNode,"mouseenter",S=>{(S.buttons&1)===1&&this.hide()})),this._register(L.Event.runAndSubscribe(this._keybindingService.onDidUpdateKeybindings,()=>{this._preferredKbLabel=this._keybindingService.lookupKeybinding(n.autoFixCommandId)?.getLabel()??void 0,this._quickFixKbLabel=this._keybindingService.lookupKeybinding(n.quickFixCommandId)?.getLabel()??void 0,this._updateLightBulbTitleAndIcon()})),this._register(this._editor.onMouseDown(async S=>{const D=["codicon-"+u.id,"codicon-"+r.id,"codicon-"+l.id,"codicon-"+a.id,"codicon-"+d.id];if(!S.target.element||!D.some(R=>S.target.element&&S.target.element.classList.contains(R))||this.gutterState.type!==1)return;this._editor.focus();const{top:I,height:T}=c.getDomNodePagePosition(S.target.element),M=this._editor.getOption(67);let A=Math.floor(M/3);this.gutterState.widgetPosition.position!==null&&this.gutterState.widgetPosition.position.lineNumber<this.gutterState.editorPosition.lineNumber&&(A+=M),this._onClick.fire({x:S.event.posx,y:I+T+A,actions:this.gutterState.actions,trigger:this.gutterState.trigger})}))}dispose(){super.dispose(),this._editor.removeContentWidget(this),this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return this._state.type===1?this._state.widgetPosition:null}update(C,w,S){if(C.validActions.length<=0)return this.gutterHide(),this.hide();if(!this._editor.getOptions().get(65).enabled)return this.gutterHide(),this.hide();const I=this._editor.getModel();if(!I)return this.gutterHide(),this.hide();const{lineNumber:T,column:M}=I.validatePosition(S),A=I.getOptions().tabSize,R=this._editor.getOptions().get(50),N=I.getLineContent(T),O=(0,p.computeIndentLevel)(N,A),x=R.spaceWidth*O>22,F=K=>K>2&&this._editor.getTopForLineNumber(K)===this._editor.getTopForLineNumber(K-1);let W=T,z=1;if(!x){const K=U=>{const Y=I.getLineContent(U);return/^\s*$|^\s+/.test(Y)||Y.length<=z};if(T>1&&!F(T-1)){const U=I.getLineCount(),Y=T===U,Q=T>1&&K(T-1),X=!Y&&K(T+1),G=K(T),P=!X&&!Q;let te=!1;const se=this._editor.getLineDecorations(T);if(se)for(const ue of se)ue.options.glyphMarginClassName?.includes(E.Codicon.debugBreakpoint.id)&&(te=!0);if(!X&&!Q&&!te)return this.gutterState=new m.Showing(C,w,S,{position:{lineNumber:W,column:z},preference:g._posPref}),this.renderGutterLightbub(),this.hide();Q||Y||P&&!G?W-=1:(X||P&&G)&&(W+=1)}else{if(T===1&&(T===I.getLineCount()||!K(T+1)&&!K(T)))return this.gutterState=new m.Showing(C,w,S,{position:{lineNumber:W,column:z},preference:g._posPref}),this.renderGutterLightbub(),this.hide();if(T<I.getLineCount()&&!F(T+1))W+=1;else if(M*R.spaceWidth<22)return this.hide()}z=/^\S\s*$/.test(I.getLineContent(W))?2:1}this.state=new m.Showing(C,w,S,{position:{lineNumber:W,column:z},preference:g._posPref}),this._gutterDecorationID&&(this._removeGutterDecoration(this._gutterDecorationID),this.gutterHide());const q=C.validActions,H=C.validActions[0].action.kind;if(q.length!==1||!H){this._editor.layoutContentWidget(this);return}this._editor.layoutContentWidget(this)}hide(){this.state!==m.Hidden&&(this.state=m.Hidden,this._editor.layoutContentWidget(this))}gutterHide(){this.gutterState!==m.Hidden&&(this._gutterDecorationID&&this._removeGutterDecoration(this._gutterDecorationID),this.gutterState=m.Hidden)}get state(){return this._state}set state(C){this._state=C,this._updateLightBulbTitleAndIcon()}get gutterState(){return this._gutterState}set gutterState(C){this._gutterState=C,this._updateGutterLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){if(this._domNode.classList.remove(...this._iconClasses),this._iconClasses=[],this.state.type!==1)return;let C,w=!1;this.state.actions.allAIFixes?(C=E.Codicon.sparkleFilled,this.state.actions.validActions.length===1&&(w=!0)):this.state.actions.hasAutoFix?this.state.actions.hasAIFix?C=E.Codicon.lightbulbSparkleAutofix:C=E.Codicon.lightbulbAutofix:this.state.actions.hasAIFix?C=E.Codicon.lightbulbSparkle:C=E.Codicon.lightBulb,this._updateLightbulbTitle(this.state.actions.hasAutoFix,w),this._iconClasses=f.ThemeIcon.asClassNameArray(C),this._domNode.classList.add(...this._iconClasses)}_updateGutterLightBulbTitleAndIcon(){if(this.gutterState.type!==1)return;let C,w=!1;this.gutterState.actions.allAIFixes?(C=d,this.gutterState.actions.validActions.length===1&&(w=!0)):this.gutterState.actions.hasAutoFix?this.gutterState.actions.hasAIFix?C=r:C=l:this.gutterState.actions.hasAIFix?C=a:C=u,this._updateLightbulbTitle(this.gutterState.actions.hasAutoFix,w);const S=b.ModelDecorationOptions.register({description:"codicon-gutter-lightbulb-decoration",glyphMarginClassName:f.ThemeIcon.asClassName(C),glyphMargin:{position:_.GlyphMarginLane.Left},stickiness:1});this.gutterDecoration=S}renderGutterLightbub(){const C=this._editor.getSelection();C&&(this._gutterDecorationID===void 0?this._addGutterDecoration(C.startLineNumber):this._updateGutterDecoration(this._gutterDecorationID,C.startLineNumber))}_addGutterDecoration(C){this._editor.changeDecorations(w=>{this._gutterDecorationID=w.addDecoration(new o.Range(C,0,C,0),this.gutterDecoration)})}_removeGutterDecoration(C){this._editor.changeDecorations(w=>{w.removeDecoration(C),this._gutterDecorationID=void 0})}_updateGutterDecoration(C,w){this._editor.changeDecorations(S=>{S.changeDecoration(C,new o.Range(w,0,w,0)),S.changeDecorationOptions(C,this.gutterDecoration)})}_updateLightbulbTitle(C,w){this.state.type===1&&(w?this.title=s.localize(907,"Run: {0}",this.state.actions.validActions[0].action.title):C&&this._preferredKbLabel?this.title=s.localize(908,"Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):!C&&this._quickFixKbLabel?this.title=s.localize(909,"Show Code Actions ({0})",this._quickFixKbLabel):C||(this.title=s.localize(910,"Show Code Actions")))}set title(C){this._domNode.title=C}};e.LightBulbWidget=h,e.LightBulbWidget=h=g=De([he(1,t.IKeybindingService)],h)}),define(oe[285],re([1,0,5,48,8,98,2,9,36,17,155,724,748,416,184,3,751,24,27,12,7,107,96,32,97,25,133,403,90]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D){"use strict";var I;Object.defineProperty(e,"__esModule",{value:!0}),e.CodeActionController=void 0;const T="quickfix-edit-highlight";let M=class extends y.Disposable{static{I=this}static{this.ID="editor.contrib.codeActionController"}static get(R){return R.getContribution(I.ID)}constructor(R,N,O,x,F,W,z,q,H,K){super(),this._commandService=z,this._configurationService=q,this._actionWidgetService=H,this._instantiationService=K,this._activeCodeActions=this._register(new y.MutableDisposable),this._showDisabled=!1,this._disposed=!1,this._editor=R,this._model=this._register(new S.CodeActionModel(this._editor,F.codeActionProvider,N,O,W,q)),this._register(this._model.onDidChangeState(U=>this.update(U))),this._lightBulbWidget=new L.Lazy(()=>{const U=this._editor.getContribution(t.LightBulbWidget.ID);return U&&this._register(U.onClick(Y=>this.showCodeActionsFromLightbulb(Y.actions,Y))),U}),this._resolver=x.createInstance(n.CodeActionKeybindingResolver),this._register(this._editor.onDidLayoutChange(()=>this._actionWidgetService.hide()))}dispose(){this._disposed=!0,super.dispose()}async showCodeActionsFromLightbulb(R,N){if(R.allAIFixes&&R.validActions.length===1){const O=R.validActions[0],x=O.action.command;x&&x.id==="inlineChat.start"&&x.arguments&&x.arguments.length>=1&&(x.arguments[0]={...x.arguments[0],autoSend:!1}),await this._applyCodeAction(O,!1,!1,p.ApplyCodeActionReason.FromAILightbulb);return}await this.showCodeActionList(R,N,{includeDisabledActions:!1,fromLightbulb:!0})}showCodeActions(R,N,O){return this.showCodeActionList(N,O,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(R,N,O,x){if(!this._editor.hasModel())return;i.MessageController.get(this._editor)?.closeMessage();const F=this._editor.getPosition();this._trigger({type:1,triggerAction:N,filter:O,autoApply:x,context:{notAvailableMessage:R,position:F}})}_trigger(R){return this._model.trigger(R)}async _applyCodeAction(R,N,O,x){try{await this._instantiationService.invokeFunction(p.applyCodeAction,R,x,{preview:O,editor:this._editor})}finally{N&&this._trigger({type:2,triggerAction:w.CodeActionTriggerSource.QuickFix,filter:{}})}}hideLightBulbWidget(){this._lightBulbWidget.rawValue?.hide(),this._lightBulbWidget.rawValue?.gutterHide()}async update(R){if(R.type!==1){this.hideLightBulbWidget();return}let N;try{N=await R.actions}catch(O){(0,E.onUnexpectedError)(O);return}if(!this._disposed)if(this._lightBulbWidget.value?.update(N,R.trigger,R.position),R.trigger.type===1){if(R.trigger.filter?.include){const x=this.tryGetValidActionToApply(R.trigger,N);if(x){try{this.hideLightBulbWidget(),await this._applyCodeAction(x,!1,!1,p.ApplyCodeActionReason.FromCodeActions)}finally{N.dispose()}return}if(R.trigger.context){const F=this.getInvalidActionThatWouldHaveBeenApplied(R.trigger,N);if(F&&F.action.disabled){i.MessageController.get(this._editor)?.showMessage(F.action.disabled,R.trigger.context.position),N.dispose();return}}}const O=!!R.trigger.filter?.include;if(R.trigger.context&&(!N.allActions.length||!O&&!N.validActions.length)){i.MessageController.get(this._editor)?.showMessage(R.trigger.context.notAvailableMessage,R.trigger.context.position),this._activeCodeActions.value=N,N.dispose();return}this._activeCodeActions.value=N,this.showCodeActionList(N,this.toCoords(R.position),{includeDisabledActions:O,fromLightbulb:!1})}else this._actionWidgetService.isVisible?N.dispose():this._activeCodeActions.value=N}getInvalidActionThatWouldHaveBeenApplied(R,N){if(N.allActions.length&&(R.autoApply==="first"&&N.validActions.length===0||R.autoApply==="ifSingle"&&N.allActions.length===1))return N.allActions.find(({action:O})=>O.disabled)}tryGetValidActionToApply(R,N){if(N.validActions.length&&(R.autoApply==="first"&&N.validActions.length>0||R.autoApply==="ifSingle"&&N.validActions.length===1))return N.validActions[0]}static{this.DECORATION=_.ModelDecorationOptions.register({description:"quickfix-highlight",className:T})}async showCodeActionList(R,N,O){const x=this._editor.createDecorationsCollection(),F=this._editor.getDomNode();if(!F)return;const W=O.includeDisabledActions&&(this._showDisabled||R.validActions.length===0)?R.allActions:R.validActions;if(!W.length)return;const z=f.Position.isIPosition(N)?this.toCoords(N):N,q={onSelect:async(H,K)=>{this._applyCodeAction(H,!0,!!K,O.fromLightbulb?p.ApplyCodeActionReason.FromAILightbulb:p.ApplyCodeActionReason.FromCodeActions),this._actionWidgetService.hide(!1),x.clear()},onHide:H=>{this._editor?.focus(),x.clear()},onHover:async(H,K)=>{if(K.isCancellationRequested)return;let U=!1;const Y=H.action.kind;if(Y){const Q=new D.HierarchicalKind(Y);U=[w.CodeActionKind.RefactorExtract,w.CodeActionKind.RefactorInline,w.CodeActionKind.RefactorRewrite,w.CodeActionKind.RefactorMove,w.CodeActionKind.Source].some(G=>G.contains(Q))}return{canPreview:U||!!H.action.edit?.edits.length}},onFocus:H=>{if(H&&H.action){const K=H.action.ranges,U=H.action.diagnostics;if(x.clear(),K&&K.length>0){const Y=U&&U?.length>1?U.map(Q=>({range:Q,options:I.DECORATION})):K.map(Q=>({range:Q,options:I.DECORATION}));x.set(Y)}else if(U&&U.length>0){const Y=U.map(X=>({range:X,options:I.DECORATION}));x.set(Y);const Q=U[0];if(Q.startLineNumber&&Q.startColumn){const X=this._editor.getModel()?.getWordAtPosition({lineNumber:Q.startLineNumber,column:Q.startColumn})?.word;k.status((0,o.localize)(919,"Context: {0} at line {1} and column {2}.",X,Q.startLineNumber,Q.startColumn))}}}else x.clear()}};this._actionWidgetService.show("codeActionWidget",!0,(0,s.toMenuItems)(W,this._shouldShowHeaders(),this._resolver.getResolver()),q,z,F,this._getActionBarActions(R,N,O))}toCoords(R){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(R,1),this._editor.render();const N=this._editor.getScrolledVisiblePosition(R),O=(0,c.getDomNodePagePosition)(this._editor.getDomNode()),x=O.left+N.left,F=O.top+N.top+N.height;return{x,y:F}}_shouldShowHeaders(){const R=this._editor?.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:R?.uri})}_getActionBarActions(R,N,O){if(O.fromLightbulb)return[];const x=R.documentation.map(F=>({id:F.id,label:F.title,tooltip:F.tooltip??"",class:void 0,enabled:!0,run:()=>this._commandService.executeCommand(F.id,...F.arguments??[])}));return O.includeDisabledActions&&R.validActions.length>0&&R.allActions.length!==R.validActions.length&&x.push(this._showDisabled?{id:"hideMoreActions",label:(0,o.localize)(920,"Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(R,N,O))}:{id:"showMoreActions",label:(0,o.localize)(921,"Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(R,N,O))}),x}};e.CodeActionController=M,e.CodeActionController=M=I=De([he(1,d.IMarkerService),he(2,a.IContextKeyService),he(3,r.IInstantiationService),he(4,b.ILanguageFeaturesService),he(5,m.IEditorProgressService),he(6,u.ICommandService),he(7,l.IConfigurationService),he(8,g.IActionWidgetService),he(9,r.IInstantiationService)],M),(0,C.registerThemingParticipant)((A,R)=>{((x,F)=>{F&&R.addRule(`.monaco-editor ${x} { background-color: ${F}; }`)})(".quickfix-edit-highlight",A.getColor(h.editorFindMatchHighlight));const O=A.getColor(h.editorFindMatchHighlightBorder);O&&R.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${(0,v.isHighContrast)(A.type)?"dotted":"solid"} ${O}; box-sizing: border-box; }`)})}),define(oe[807],re([1,0,90,11,15,20,155,3,12,133,285,403]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoFixAction=e.FixAllAction=e.OrganizeImportsAction=e.SourceAction=e.RefactorAction=e.CodeActionCommand=e.QuickFixAction=void 0;function s(m){return _.ContextKeyExpr.regex(n.SUPPORTED_CODE_ACTIONS.keys()[0],new RegExp("(\\s|^)"+(0,k.escapeRegExpCharacters)(m.value)+"\\b"))}const t={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:f.localize(925,"Kind of the code action to run.")},apply:{type:"string",description:f.localize(926,"Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[f.localize(927,"Always apply the first returned code action."),f.localize(928,"Apply the first returned code action if it is the only one."),f.localize(929,"Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:f.localize(930,"Controls if only preferred code actions should be returned.")}}};function i(m,h,v,C,w=b.CodeActionTriggerSource.Default){m.hasModel()&&p.CodeActionController.get(m)?.manualTriggerAtCurrentPosition(h,w,v,C)}class o extends E.EditorAction{constructor(){super({id:y.quickFixCommandId,label:f.localize(931,"Quick Fix..."),alias:"Quick Fix...",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,L.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:2137,weight:100}})}run(h,v){return i(v,f.localize(932,"No code actions available"),void 0,void 0,b.CodeActionTriggerSource.QuickFix)}}e.QuickFixAction=o;class g extends E.EditorCommand{constructor(){super({id:y.codeActionCommandId,precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,L.EditorContextKeys.hasCodeActionsProvider),metadata:{description:"Trigger a code action",args:[{name:"args",schema:t}]}})}runEditorCommand(h,v,C){const w=b.CodeActionCommandArgs.fromUser(C,{kind:c.HierarchicalKind.Empty,apply:"ifSingle"});return i(v,typeof C?.kind=="string"?w.preferred?f.localize(933,"No preferred code actions for '{0}' available",C.kind):f.localize(934,"No code actions for '{0}' available",C.kind):w.preferred?f.localize(935,"No preferred code actions available"):f.localize(936,"No code actions available"),{include:w.kind,includeSourceActions:!0,onlyIncludePreferredActions:w.preferred},w.apply)}}e.CodeActionCommand=g;class u extends E.EditorAction{constructor(){super({id:y.refactorCommandId,label:f.localize(937,"Refactor..."),alias:"Refactor...",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,L.EditorContextKeys.hasCodeActionsProvider),kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:_.ContextKeyExpr.and(L.EditorContextKeys.writable,s(b.CodeActionKind.Refactor))},metadata:{description:"Refactor...",args:[{name:"args",schema:t}]}})}run(h,v,C){const w=b.CodeActionCommandArgs.fromUser(C,{kind:b.CodeActionKind.Refactor,apply:"never"});return i(v,typeof C?.kind=="string"?w.preferred?f.localize(938,"No preferred refactorings for '{0}' available",C.kind):f.localize(939,"No refactorings for '{0}' available",C.kind):w.preferred?f.localize(940,"No preferred refactorings available"):f.localize(941,"No refactorings available"),{include:b.CodeActionKind.Refactor.contains(w.kind)?w.kind:c.HierarchicalKind.None,onlyIncludePreferredActions:w.preferred},w.apply,b.CodeActionTriggerSource.Refactor)}}e.RefactorAction=u;class l extends E.EditorAction{constructor(){super({id:y.sourceActionCommandId,label:f.localize(942,"Source Action..."),alias:"Source Action...",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,L.EditorContextKeys.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:_.ContextKeyExpr.and(L.EditorContextKeys.writable,s(b.CodeActionKind.Source))},metadata:{description:"Source Action...",args:[{name:"args",schema:t}]}})}run(h,v,C){const w=b.CodeActionCommandArgs.fromUser(C,{kind:b.CodeActionKind.Source,apply:"never"});return i(v,typeof C?.kind=="string"?w.preferred?f.localize(943,"No preferred source actions for '{0}' available",C.kind):f.localize(944,"No source actions for '{0}' available",C.kind):w.preferred?f.localize(945,"No preferred source actions available"):f.localize(946,"No source actions available"),{include:b.CodeActionKind.Source.contains(w.kind)?w.kind:c.HierarchicalKind.None,includeSourceActions:!0,onlyIncludePreferredActions:w.preferred},w.apply,b.CodeActionTriggerSource.SourceAction)}}e.SourceAction=l;class a extends E.EditorAction{constructor(){super({id:y.organizeImportsCommandId,label:f.localize(947,"Organize Imports"),alias:"Organize Imports",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,s(b.CodeActionKind.SourceOrganizeImports)),kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:1581,weight:100}})}run(h,v){return i(v,f.localize(948,"No organize imports action available"),{include:b.CodeActionKind.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",b.CodeActionTriggerSource.OrganizeImports)}}e.OrganizeImportsAction=a;class r extends E.EditorAction{constructor(){super({id:y.fixAllCommandId,label:f.localize(949,"Fix All"),alias:"Fix All",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,s(b.CodeActionKind.SourceFixAll))})}run(h,v){return i(v,f.localize(950,"No fix all action available"),{include:b.CodeActionKind.SourceFixAll,includeSourceActions:!0},"ifSingle",b.CodeActionTriggerSource.FixAll)}}e.FixAllAction=r;class d extends E.EditorAction{constructor(){super({id:y.autoFixCommandId,label:f.localize(951,"Auto Fix..."),alias:"Auto Fix...",precondition:_.ContextKeyExpr.and(L.EditorContextKeys.writable,s(b.CodeActionKind.QuickFix)),kbOpts:{kbExpr:L.EditorContextKeys.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(h,v){return i(v,f.localize(952,"No auto fixes available"),{include:b.CodeActionKind.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",b.CodeActionTriggerSource.AutoFix)}}e.AutoFixAction=d}),define(oe[808],re([1,0,15,272,807,285,416,3,108,38]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(L.CodeActionController.ID,L.CodeActionController,3),(0,c.registerEditorContribution)(y.LightBulbWidget.ID,y.LightBulbWidget,4),(0,c.registerEditorAction)(E.QuickFixAction),(0,c.registerEditorAction)(E.RefactorAction),(0,c.registerEditorAction)(E.SourceAction),(0,c.registerEditorAction)(E.OrganizeImportsAction),(0,c.registerEditorAction)(E.AutoFixAction),(0,c.registerEditorAction)(E.FixAllAction),(0,c.registerEditorCommand)(new E.CodeActionCommand),b.Registry.as(_.Extensions.Configuration).registerConfiguration({...k.editorConfigurationBaseNode,properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:f.localize(922,"Enable/disable showing group headers in the Code Action menu."),default:!0}}}),b.Registry.as(_.Extensions.Configuration).registerConfiguration({...k.editorConfigurationBaseNode,properties:{"editor.codeActionWidget.includeNearbyQuickFixes":{type:"boolean",scope:5,description:f.localize(923,"Enable/disable showing nearest Quick Fix within a line when not currently on a diagnostic."),default:!0}}}),b.Registry.as(_.Extensions.Configuration).registerConfiguration({...k.editorConfigurationBaseNode,properties:{"editor.codeActions.triggerOnFocusChange":{type:"boolean",scope:5,markdownDescription:f.localize(924,"Enable triggering {0} when {1} is set to {2}. Code Actions must be set to {3} to be triggered for window and focus changes.","`#editor.codeActionsOnSave#`","`#files.autoSave#`","`afterDelay`","`always`"),default:!1}}})}),define(oe[809],re([1,0,5,111,4,36,515]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeLensWidget=e.CodeLensHelper=void 0;class y{constructor(s,t,i){this.afterColumn=1073741824,this.afterLineNumber=s,this.heightInPx=t,this._onHeight=i,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(s){this._lastHeight===void 0?this._lastHeight=s:this._lastHeight!==s&&(this._lastHeight=s,this._onHeight())}isVisible(){return this._lastHeight!==0&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class f{static{this._idPool=0}constructor(s,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=s,this._id=`codelens.widget-${f._idPool++}`,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(s,t){this._commands.clear();const i=[];let o=!1;for(let g=0;g<s.length;g++){const u=s[g];if(u&&(o=!0,u.command)){const l=(0,k.renderLabelWithIcons)(u.command.title.trim());if(u.command.id){const a=`c${f._idPool++}`;i.push(c.$("a",{id:a,title:u.command.tooltip,role:"button"},...l)),this._commands.set(a,u.command)}else i.push(c.$("span",{title:u.command.tooltip},...l));g+1<s.length&&i.push(c.$("span",void 0,"\xA0|\xA0"))}}o?(c.reset(this._domNode,...i),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):c.reset(this._domNode,c.$("span",void 0,"no commands"))}getCommand(s){return s.parentElement===this._domNode?this._commands.get(s.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(s){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(s);this._widgetPosition={position:{lineNumber:s,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}class _{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(s,t){this._addDecorations.push(s),this._addDecorationsCallbacks.push(t)}removeDecoration(s){this._removeDecorations.push(s)}commit(s){const t=s.deltaDecorations(this._removeDecorations,this._addDecorations);for(let i=0,o=t.length;i<o;i++)this._addDecorationsCallbacks[i](t[i])}}e.CodeLensHelper=_;const b=L.ModelDecorationOptions.register({collapseOnReplaceEdit:!0,description:"codelens"});class p{constructor(s,t,i,o,g,u){this._isDisposed=!1,this._editor=t,this._data=s,this._decorationIds=[];let l;const a=[];this._data.forEach((r,d)=>{r.symbol.command&&a.push(r.symbol),i.addDecoration({range:r.symbol.range,options:b},m=>this._decorationIds[d]=m),l?l=E.Range.plusRange(l,r.symbol.range):l=E.Range.lift(r.symbol.range)}),this._viewZone=new y(l.startLineNumber-1,g,u),this._viewZoneId=o.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new f(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(s,t){this._decorationIds.forEach(s.removeDecoration,s),this._decorationIds=[],t?.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some((s,t)=>{const i=this._editor.getModel().getDecorationRange(s),o=this._data[t].symbol;return!!(i&&E.Range.isEmpty(o.range)===i.isEmpty())})}updateCodeLensSymbols(s,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=s,this._data.forEach((i,o)=>{t.addDecoration({range:i.symbol.range,options:b},g=>this._decorationIds[o]=g)})}updateHeight(s,t){this._viewZone.heightInPx=s,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(s){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const i=s.getDecorationRange(this._decorationIds[t]);i&&(this._data[t].symbol.range=i)}return this._data}updateCommands(s){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(s,!0);for(let t=0;t<this._data.length;t++){const i=s[t];if(i){const{symbol:o}=this._data[t];o.command=i.command||o.command}}}getCommand(s){return this._contentWidget?.getCommand(s)}getLineNumber(){const s=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return s?s.startLineNumber:-1}update(s){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,s.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}e.CodeLensWidget=p}),define(oe[810],re([1,0,14,8,2,142,15,37,20,380,715,809,3,24,50,63,79,17]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CodeLensContribution=void 0;let l=class{static{this.ID="css.editor.codeLens"}constructor(r,d,m,h,v,C){this._editor=r,this._languageFeaturesService=d,this._commandService=h,this._notificationService=v,this._codeLensCache=C,this._disposables=new E.DisposableStore,this._localToDispose=new E.DisposableStore,this._lenses=[],this._oldCodeLensModels=new E.DisposableStore,this._provideCodeLensDebounce=m.for(d.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=m.for(d.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new c.RunOnceScheduler(()=>this._resolveCodeLensesInViewport(),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>this._onModelChange())),this._disposables.add(this._editor.onDidChangeConfiguration(w=>{(w.hasChanged(50)||w.hasChanged(19)||w.hasChanged(18))&&this._updateLensStyle(),w.hasChanged(17)&&this._onModelChange()})),this._disposables.add(d.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),this._currentCodeLensModel?.dispose()}_getLayoutInfo(){const r=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let d=this._editor.getOption(19);return(!d||d<5)&&(d=this._editor.getOption(52)*.9|0),{fontSize:d,codeLensHeight:d*r|0}}_updateLensStyle(){const{codeLensHeight:r,fontSize:d}=this._getLayoutInfo(),m=this._editor.getOption(18),h=this._editor.getOption(50),{style:v}=this._editor.getContainerDomNode();v.setProperty("--vscode-editorCodeLens-lineHeight",`${r}px`),v.setProperty("--vscode-editorCodeLens-fontSize",`${d}px`),v.setProperty("--vscode-editorCodeLens-fontFeatureSettings",h.fontFeatureSettings),m&&(v.setProperty("--vscode-editorCodeLens-fontFamily",m),v.setProperty("--vscode-editorCodeLens-fontFamilyDefault",f.EDITOR_FONT_DEFAULTS.fontFamily)),this._editor.changeViewZones(C=>{for(const w of this._lenses)w.updateHeight(r,C)})}_localDispose(){this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=void 0,this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),this._currentCodeLensModel?.dispose()}_onModelChange(){this._localDispose();const r=this._editor.getModel();if(!r||!this._editor.getOption(17)||r.isTooLargeForTokenization())return;const d=this._codeLensCache.get(r);if(d&&this._renderCodeLensSymbols(d),!this._languageFeaturesService.codeLensProvider.has(r)){d&&(0,c.disposableTimeout)(()=>{const h=this._codeLensCache.get(r);d===h&&(this._codeLensCache.delete(r),this._onModelChange())},30*1e3,this._localToDispose);return}for(const h of this._languageFeaturesService.codeLensProvider.all(r))if(typeof h.onDidChange=="function"){const v=h.onDidChange(()=>m.schedule());this._localToDispose.add(v)}const m=new c.RunOnceScheduler(()=>{const h=Date.now();this._getCodeLensModelPromise?.cancel(),this._getCodeLensModelPromise=(0,c.createCancelablePromise)(v=>(0,b.getCodeLensModel)(this._languageFeaturesService.codeLensProvider,r,v)),this._getCodeLensModelPromise.then(v=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=v,this._codeLensCache.put(r,v);const C=this._provideCodeLensDebounce.update(r,Date.now()-h);m.delay=C,this._renderCodeLensSymbols(v),this._resolveCodeLensesInViewportSoon()},k.onUnexpectedError)},this._provideCodeLensDebounce.get(r));this._localToDispose.add(m),this._localToDispose.add((0,E.toDisposable)(()=>this._resolveCodeLensesScheduler.cancel())),this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._editor.changeDecorations(h=>{this._editor.changeViewZones(v=>{const C=[];let w=-1;this._lenses.forEach(D=>{!D.isValid()||w===D.getLineNumber()?C.push(D):(D.update(v),w=D.getLineNumber())});const S=new n.CodeLensHelper;C.forEach(D=>{D.dispose(S,v),this._lenses.splice(this._lenses.indexOf(D),1)}),S.commit(h)})}),m.schedule(),this._resolveCodeLensesScheduler.cancel(),this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0})),this._localToDispose.add(this._editor.onDidFocusEditorText(()=>{m.schedule()})),this._localToDispose.add(this._editor.onDidBlurEditorText(()=>{m.cancel()})),this._localToDispose.add(this._editor.onDidScrollChange(h=>{h.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add(this._editor.onDidLayoutChange(()=>{this._resolveCodeLensesInViewportSoon()})),this._localToDispose.add((0,E.toDisposable)(()=>{if(this._editor.getModel()){const h=L.StableEditorScrollState.capture(this._editor);this._editor.changeDecorations(v=>{this._editor.changeViewZones(C=>{this._disposeAllLenses(v,C)})}),h.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)})),this._localToDispose.add(this._editor.onMouseDown(h=>{if(h.target.type!==9)return;let v=h.target.element;if(v?.tagName==="SPAN"&&(v=v.parentElement),v?.tagName==="A")for(const C of this._lenses){const w=C.getCommand(v);if(w){this._commandService.executeCommand(w.id,...w.arguments||[]).catch(S=>this._notificationService.error(S));break}}})),m.schedule()}_disposeAllLenses(r,d){const m=new n.CodeLensHelper;for(const h of this._lenses)h.dispose(m,d);r&&m.commit(r),this._lenses.length=0}_renderCodeLensSymbols(r){if(!this._editor.hasModel())return;const d=this._editor.getModel().getLineCount(),m=[];let h;for(const w of r.lenses){const S=w.symbol.range.startLineNumber;S<1||S>d||(h&&h[h.length-1].symbol.range.startLineNumber===S?h.push(w):(h=[w],m.push(h)))}if(!m.length&&!this._lenses.length)return;const v=L.StableEditorScrollState.capture(this._editor),C=this._getLayoutInfo();this._editor.changeDecorations(w=>{this._editor.changeViewZones(S=>{const D=new n.CodeLensHelper;let I=0,T=0;for(;T<m.length&&I<this._lenses.length;){const M=m[T][0].symbol.range.startLineNumber,A=this._lenses[I].getLineNumber();A<M?(this._lenses[I].dispose(D,S),this._lenses.splice(I,1)):A===M?(this._lenses[I].updateCodeLensSymbols(m[T],D),T++,I++):(this._lenses.splice(I,0,new n.CodeLensWidget(m[T],this._editor,D,S,C.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),I++,T++)}for(;I<this._lenses.length;)this._lenses[I].dispose(D,S),this._lenses.splice(I,1);for(;T<m.length;)this._lenses.push(new n.CodeLensWidget(m[T],this._editor,D,S,C.codeLensHeight,()=>this._resolveCodeLensesInViewportSoon())),T++;D.commit(w)})}),v.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){this._resolveCodeLensesPromise?.cancel(),this._resolveCodeLensesPromise=void 0;const r=this._editor.getModel();if(!r)return;const d=[],m=[];if(this._lenses.forEach(C=>{const w=C.computeIfNecessary(r);w&&(d.push(w),m.push(C))}),d.length===0)return;const h=Date.now(),v=(0,c.createCancelablePromise)(C=>{const w=d.map((S,D)=>{const I=new Array(S.length),T=S.map((M,A)=>!M.symbol.command&&typeof M.provider.resolveCodeLens=="function"?Promise.resolve(M.provider.resolveCodeLens(r,M.symbol,C)).then(R=>{I[A]=R},k.onUnexpectedExternalError):(I[A]=M.symbol,Promise.resolve(void 0)));return Promise.all(T).then(()=>{!C.isCancellationRequested&&!m[D].isDisposed()&&m[D].updateCommands(I)})});return Promise.all(w)});this._resolveCodeLensesPromise=v,this._resolveCodeLensesPromise.then(()=>{const C=this._resolveCodeLensesDebounce.update(r,Date.now()-h);this._resolveCodeLensesScheduler.delay=C,this._currentCodeLensModel&&this._codeLensCache.put(r,this._currentCodeLensModel),this._oldCodeLensModels.clear(),v===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)},C=>{(0,k.onUnexpectedError)(C),v===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)})}async getModel(){return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,this._currentCodeLensModel?.isDisposed?void 0:this._currentCodeLensModel}};e.CodeLensContribution=l,e.CodeLensContribution=l=De([he(1,u.ILanguageFeaturesService),he(2,g.ILanguageFeatureDebounceService),he(3,t.ICommandService),he(4,i.INotificationService),he(5,p.ICodeLensCache)],l),(0,y.registerEditorContribution)(l.ID,l,1),(0,y.registerEditorAction)(class extends y.EditorAction{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:_.EditorContextKeys.hasCodeLensProvider,label:(0,s.localize)(900,"Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(r,d){if(!d.hasModel())return;const m=r.get(o.IQuickInputService),h=r.get(t.ICommandService),v=r.get(i.INotificationService),C=d.getSelection().positionLineNumber,w=d.getContribution(l.ID);if(!w)return;const S=await w.getModel();if(!S)return;const D=[];for(const M of S.lenses)M.symbol.command&&M.symbol.range.startLineNumber===C&&D.push({label:M.symbol.command.title,command:M.symbol.command});if(D.length===0)return;const I=await m.pick(D,{canPickMany:!1,placeHolder:(0,s.localize)(901,"Select a command")});if(!I)return;let T=I.command;if(S.isDisposed){const A=(await w.getModel())?.lenses.find(R=>R.symbol.range.startLineNumber===C&&R.symbol.command?.title===T.title);if(!A||!A.symbol.command)return;T=A.symbol.command}try{await h.executeCommand(T.id,...T.arguments||[])}catch(M){v.error(M)}}})}),define(oe[417],re([1,0,14,33,8,6,2,59,11,185,15,4,36,79,17,396,27]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.DecoratorLimitReporter=e.ColorDetector=e.ColorDecorationInjectedTextMarker=void 0,e.ColorDecorationInjectedTextMarker=Object.create({});let l=class extends y.Disposable{static{u=this}static{this.ID="editor.contrib.colorDetector"}static{this.RECOMPUTE_TIME=1e3}constructor(d,m,h,v){super(),this._editor=d,this._configurationService=m,this._languageFeaturesService=h,this._localToDispose=this._register(new y.DisposableStore),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new b.DynamicCssRules(this._editor),this._decoratorLimitReporter=new a,this._colorDecorationClassRefs=this._register(new y.DisposableStore),this._debounceInformation=v.for(h.colorProvider,"Document Colors",{min:u.RECOMPUTE_TIME}),this._register(d.onDidChangeModel(()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()})),this._register(d.onDidChangeModelLanguage(()=>this.updateColors())),this._register(h.colorProvider.onDidChange(()=>this.updateColors())),this._register(d.onDidChangeConfiguration(C=>{const w=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148);const S=w!==this._isColorDecoratorsEnabled||C.hasChanged(21),D=C.hasChanged(148);(S||D)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())})),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(148),this.updateColors()}isEnabled(){const d=this._editor.getModel();if(!d)return!1;const m=d.getLanguageId(),h=this._configurationService.getValue(m);if(h&&typeof h=="object"){const v=h.colorDecorators;if(v&&v.enable!==void 0&&!v.enable)return v.enable}return this._editor.getOption(20)}static get(d){return d.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const d=this._editor.getModel();!d||!this._languageFeaturesService.colorProvider.has(d)||(this._localToDispose.add(this._editor.onDidChangeModelContent(()=>{this._timeoutTimer||(this._timeoutTimer=new c.TimeoutTimer,this._timeoutTimer.cancelAndSet(()=>{this._timeoutTimer=null,this.beginCompute()},this._debounceInformation.get(d)))})),this.beginCompute())}async beginCompute(){this._computePromise=(0,c.createCancelablePromise)(async d=>{const m=this._editor.getModel();if(!m)return[];const h=new f.StopWatch(!1),v=await(0,o.getColors)(this._languageFeaturesService.colorProvider,m,d,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(m,h.elapsed()),v});try{const d=await this._computePromise;this.updateDecorations(d),this.updateColorDecorators(d),this._computePromise=null}catch(d){(0,E.onUnexpectedError)(d)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(d){const m=d.map(h=>({range:{startLineNumber:h.colorInfo.range.startLineNumber,startColumn:h.colorInfo.range.startColumn,endLineNumber:h.colorInfo.range.endLineNumber,endColumn:h.colorInfo.range.endColumn},options:s.ModelDecorationOptions.EMPTY}));this._editor.changeDecorations(h=>{this._decorationsIds=h.deltaDecorations(this._decorationsIds,m),this._colorDatas=new Map,this._decorationsIds.forEach((v,C)=>this._colorDatas.set(v,d[C]))})}updateColorDecorators(d){this._colorDecorationClassRefs.clear();const m=[],h=this._editor.getOption(21);for(let C=0;C<d.length&&m.length<h;C++){const{red:w,green:S,blue:D,alpha:I}=d[C].colorInfo.color,T=new k.RGBA(Math.round(w*255),Math.round(S*255),Math.round(D*255),I),M=`rgba(${T.r}, ${T.g}, ${T.b}, ${T.a})`,A=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:M}));m.push({range:{startLineNumber:d[C].colorInfo.range.startLineNumber,startColumn:d[C].colorInfo.range.startColumn,endLineNumber:d[C].colorInfo.range.endLineNumber,endColumn:d[C].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:_.noBreakWhitespace,inlineClassName:`${A.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:e.ColorDecorationInjectedTextMarker}}})}const v=h<d.length?h:!1;this._decoratorLimitReporter.update(d.length,v),this._colorDecoratorIds.set(m)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(d){const m=this._editor.getModel();if(!m)return null;const h=m.getDecorationsInRange(n.Range.fromPositions(d,d)).filter(v=>this._colorDatas.has(v.id));return h.length===0?null:this._colorDatas.get(h[0].id)}isColorDecoration(d){return this._colorDecoratorIds.has(d)}};e.ColorDetector=l,e.ColorDetector=l=u=De([he(1,g.IConfigurationService),he(2,i.ILanguageFeaturesService),he(3,t.ILanguageFeatureDebounceService)],l);class a{constructor(){this._onDidChange=new L.Emitter,this._computed=0,this._limited=!1}update(d,m){(d!==this._computed||m!==this._limited)&&(this._computed=d,this._limited=m,this._onDidChange.fire())}}e.DecoratorLimitReporter=a,(0,p.registerEditorContribution)(l.ID,l,1)}),define(oe[286],re([1,0,14,18,33,2,4,396,417,629,754,86,25,5]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneColorPickerParticipant=e.StandaloneColorPickerHover=e.ColorHoverParticipant=e.ColorHover=void 0;class i{constructor(h,v,C,w){this.owner=h,this.range=v,this.model=C,this.provider=w,this.forceShowAtRange=!0}isValidForHoverAnchor(h){return h.type===1&&this.range.startColumn<=h.range.startColumn&&this.range.endColumn>=h.range.endColumn}}e.ColorHover=i;let o=class{constructor(h,v){this._editor=h,this._themeService=v,this.hoverOrdinal=2}computeSync(h,v){return[]}computeAsync(h,v,C){return c.AsyncIterableObject.fromPromise(this._computeAsync(h,v,C))}async _computeAsync(h,v,C){if(!this._editor.hasModel())return[];const w=_.ColorDetector.get(this._editor);if(!w)return[];for(const S of v){if(!w.isColorDecoration(S))continue;const D=w.getColorData(S.range.getStartPosition());if(D)return[await l(this,this._editor.getModel(),D.colorInfo,D.provider)]}return[]}renderHoverParts(h,v){const C=a(this,this._editor,this._themeService,v,h);if(!C)return new n.RenderedHoverParts([]);this._colorPicker=C.colorPicker;const w={hoverPart:C.hoverPart,hoverElement:this._colorPicker.domNode,dispose(){C.disposables.dispose()}};return new n.RenderedHoverParts([w])}handleResize(){this._colorPicker?.layout()}isColorPickerVisible(){return!!this._colorPicker}};e.ColorHoverParticipant=o,e.ColorHoverParticipant=o=De([he(1,s.IThemeService)],o);class g{constructor(h,v,C,w){this.owner=h,this.range=v,this.model=C,this.provider=w}}e.StandaloneColorPickerHover=g;let u=class{constructor(h,v){this._editor=h,this._themeService=v,this._color=null}async createColorHover(h,v,C){if(!this._editor.hasModel()||!_.ColorDetector.get(this._editor))return null;const S=await(0,f.getColors)(C,this._editor.getModel(),k.CancellationToken.None);let D=null,I=null;for(const R of S){const N=R.colorInfo;y.Range.containsRange(N.range,h.range)&&(D=N,I=R.provider)}const T=D??h,M=I??v,A=!!D;return{colorHover:await l(this,this._editor.getModel(),T,M),foundInEditor:A}}async updateEditorModel(h){if(!this._editor.hasModel())return;const v=h.model;let C=new y.Range(h.range.startLineNumber,h.range.startColumn,h.range.endLineNumber,h.range.endColumn);this._color&&(await d(this._editor.getModel(),v,this._color,C,h),C=r(this._editor,C,v))}renderHoverParts(h,v){return a(this,this._editor,this._themeService,v,h)}set color(h){this._color=h}get color(){return this._color}};e.StandaloneColorPickerParticipant=u,e.StandaloneColorPickerParticipant=u=De([he(1,s.IThemeService)],u);async function l(m,h,v,C){const w=h.getValueInRange(v.range),{red:S,green:D,blue:I,alpha:T}=v.color,M=new E.RGBA(Math.round(S*255),Math.round(D*255),Math.round(I*255),T),A=new E.Color(M),R=await(0,f.getColorPresentations)(h,v,C,k.CancellationToken.None),N=new b.ColorPickerModel(A,[],0);return N.colorPresentations=R||[],N.guessColorPresentation(A,w),m instanceof o?new i(m,y.Range.lift(v.range),N,C):new g(m,y.Range.lift(v.range),N,C)}function a(m,h,v,C,w){if(C.length===0||!h.hasModel())return;if(w.setMinimumDimensions){const N=h.getOption(67)+8;w.setMinimumDimensions(new t.Dimension(302,N))}const S=new L.DisposableStore,D=C[0],I=h.getModel(),T=D.model,M=S.add(new p.ColorPickerWidget(w.fragment,T,h.getOption(144),v,m instanceof u));let A=!1,R=new y.Range(D.range.startLineNumber,D.range.startColumn,D.range.endLineNumber,D.range.endColumn);if(m instanceof u){const N=D.model.color;m.color=N,d(I,T,N,R,D),S.add(T.onColorFlushed(O=>{m.color=O}))}else S.add(T.onColorFlushed(async N=>{await d(I,T,N,R,D),A=!0,R=r(h,R,T)}));return S.add(T.onDidChangeColor(N=>{d(I,T,N,R,D)})),S.add(h.onDidChangeModelContent(N=>{A?A=!1:(w.hide(),h.focus())})),{hoverPart:D,colorPicker:M,disposables:S}}function r(m,h,v){const C=[],w=v.presentation.textEdit??{range:h,text:v.presentation.label,forceMoveMarkers:!1};C.push(w),v.presentation.additionalTextEdits&&C.push(...v.presentation.additionalTextEdits);const S=y.Range.lift(w.range),D=m.getModel()._setTrackedRange(null,S,3);return m.executeEdits("colorpicker",C),m.pushUndoStop(),m.getModel()._getTrackedRange(D)??S}async function d(m,h,v,C,w){const S=await(0,f.getColorPresentations)(m,{range:C,color:{red:v.rgba.r/255,green:v.rgba.g/255,blue:v.rgba.b/255,alpha:v.rgba.a}},w.provider,k.CancellationToken.None);h.colorPresentations=S||[]}}),define(oe[811],re([1,0,2,286,7,384,31,6,17,15,20,12,44,34,395,5,236]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g,u;Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneColorPickerWidget=e.StandaloneColorPickerController=void 0;let l=class extends c.Disposable{static{g=this}static{this.ID="editor.contrib.standaloneColorPickerController"}constructor(v,C,w,S,D,I,T){super(),this._editor=v,this._modelService=w,this._keybindingService=S,this._instantiationService=D,this._languageFeatureService=I,this._languageConfigurationService=T,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=p.EditorContextKeys.standaloneColorPickerVisible.bindTo(C),this._standaloneColorPickerFocused=p.EditorContextKeys.standaloneColorPickerFocused.bindTo(C)}showOrFocus(){this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||this._standaloneColorPickerWidget?.focus():this._standaloneColorPickerWidget=new d(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerWidget?.hide(),this._editor.focus()}insertColor(){this._standaloneColorPickerWidget?.updateEditor(),this.hide()}static get(v){return v.getContribution(g.ID)}};e.StandaloneColorPickerController=l,e.StandaloneColorPickerController=l=g=De([he(1,n.IContextKeyService),he(2,s.IModelService),he(3,y.IKeybindingService),he(4,E.IInstantiationService),he(5,_.ILanguageFeaturesService),he(6,t.ILanguageConfigurationService)],l),(0,b.registerEditorContribution)(l.ID,l,1);const a=8,r=22;let d=class extends c.Disposable{static{u=this}static{this.ID="editor.contrib.standaloneColorPickerWidget"}constructor(v,C,w,S,D,I,T,M){super(),this._editor=v,this._standaloneColorPickerVisible=C,this._standaloneColorPickerFocused=w,this._modelService=D,this._keybindingService=I,this._languageFeaturesService=T,this._languageConfigurationService=M,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new f.Emitter),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=S.createInstance(k.StandaloneColorPickerParticipant,this._editor),this._position=this._editor._getViewModel()?.getPrimaryCursorState().modelState.position;const A=this._editor.getSelection(),R=A?{startLineNumber:A.startLineNumber,startColumn:A.startColumn,endLineNumber:A.endLineNumber,endColumn:A.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},N=this._register(o.trackFocus(this._body));this._register(N.onDidBlur(O=>{this.hide()})),this._register(N.onDidFocus(O=>{this.focus()})),this._register(this._editor.onDidChangeCursorPosition(()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()})),this._register(this._editor.onMouseMove(O=>{const x=O.target.element?.classList;x&&x.contains("colorpicker-color-decoration")&&this.hide()})),this._register(this.onResult(O=>{this._render(O.value,O.foundInEditor)})),this._start(R),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return u.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const v=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:v?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(v){const C=await this._computeAsync(v);C&&this._onResult.fire(new m(C.result,C.foundInEditor))}async _computeAsync(v){if(!this._editor.hasModel())return null;const C={range:v,color:{red:0,green:0,blue:0,alpha:1}},w=await this._standaloneColorPickerParticipant.createColorHover(C,new i.DefaultDocumentColorProvider(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return w?{result:w.colorHover,foundInEditor:w.foundInEditor}:null}_render(v,C){const w=document.createDocumentFragment(),S=this._register(new L.EditorHoverStatusBar(this._keybindingService)),D={fragment:w,statusBar:S,onContentsChanged:()=>{},hide:()=>this.hide()};this._colorHover=v;const I=this._standaloneColorPickerParticipant.renderHoverParts(D,[v]);if(!I)return;this._register(I.disposables);const T=I.colorPicker;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(this._editor.getLayoutInfo().width*.66,500)+"px",this._body.tabIndex=0,this._body.appendChild(w),T.layout();const M=T.body,A=M.saturationBox.domNode.clientWidth,R=M.domNode.clientWidth-A-r-a,N=T.body.enterButton;N?.onClicked(()=>{this.updateEditor(),this.hide()});const O=T.header,x=O.pickedColorNode;x.style.width=A+a+"px";const F=O.originalColorNode;F.style.width=R+"px",T.header.closeButton?.onClicked(()=>{this.hide()}),C&&(N&&(N.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(v.range)),this._editor.layoutContentWidget(this)}};e.StandaloneColorPickerWidget=d,e.StandaloneColorPickerWidget=d=u=De([he(3,E.IInstantiationService),he(4,s.IModelService),he(5,y.IKeybindingService),he(6,_.ILanguageFeaturesService),he(7,t.ILanguageConfigurationService)],d);class m{constructor(v,C){this.value=v,this.foundInEditor=C}}}),define(oe[812],re([1,0,15,3,811,20,29,236]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowOrFocusStandaloneColorPicker=void 0;class f extends c.EditorAction2{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...(0,k.localize2)(894,"Show or Focus Standalone Color Picker"),mnemonicTitle:(0,k.localize)(891,"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:y.MenuId.CommandPalette}],metadata:{description:(0,k.localize2)(895,"Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(n,s){E.StandaloneColorPickerController.get(s)?.showOrFocus()}}e.ShowOrFocusStandaloneColorPicker=f;class _ extends c.EditorAction{constructor(){super({id:"editor.action.hideColorPicker",label:(0,k.localize)(892,"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:L.EditorContextKeys.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:(0,k.localize2)(896,"Hide the standalone color picker.")}})}run(n,s){E.StandaloneColorPickerController.get(s)?.hide()}}class b extends c.EditorAction{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,k.localize)(893,"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:L.EditorContextKeys.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:(0,k.localize2)(897,"Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(n,s){E.StandaloneColorPickerController.get(s)?.insertColor()}}(0,c.registerEditorAction)(_),(0,c.registerEditorAction)(b),(0,y.registerAction2)(f)}),define(oe[813],re([1,0,2,16,15,9,4,23,36,631,516]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DragAndDropController=void 0;function p(s){return k.isMacintosh?s.altKey:s.ctrlKey}class n extends c.Disposable{static{this.ID="editor.contrib.dragAndDrop"}static{this.TRIGGER_KEY_VALUE=k.isMacintosh?6:5}constructor(t){super(),this._editor=t,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown(i=>this._onEditorMouseDown(i))),this._register(this._editor.onMouseUp(i=>this._onEditorMouseUp(i))),this._register(this._editor.onMouseDrag(i=>this._onEditorMouseDrag(i))),this._register(this._editor.onMouseDrop(i=>this._onEditorMouseDrop(i))),this._register(this._editor.onMouseDropCanceled(()=>this._onEditorMouseDropCanceled())),this._register(this._editor.onKeyDown(i=>this.onEditorKeyDown(i))),this._register(this._editor.onKeyUp(i=>this.onEditorKeyUp(i))),this._register(this._editor.onDidBlurEditorWidget(()=>this.onEditorBlur())),this._register(this._editor.onDidBlurEditorText(()=>this.onEditorBlur())),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(t){!this._editor.getOption(35)||this._editor.getOption(22)||(p(t)&&(this._modifierPressed=!0),this._mouseDown&&p(t)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(t){!this._editor.getOption(35)||this._editor.getOption(22)||(p(t)&&(this._modifierPressed=!1),this._mouseDown&&t.keyCode===n.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(t){this._mouseDown=!0}_onEditorMouseUp(t){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(t){const i=t.target;if(this._dragSelection===null){const g=(this._editor.getSelections()||[]).filter(u=>i.position&&u.containsPosition(i.position));if(g.length===1)this._dragSelection=g[0];else return}p(t.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),i.position&&(this._dragSelection.containsPosition(i.position)?this._removeDecoration():this.showAt(i.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(t){if(t.target&&(this._hitContent(t.target)||this._hitMargin(t.target))&&t.target.position){const i=new L.Position(t.target.position.lineNumber,t.target.position.column);if(this._dragSelection===null){let o=null;if(t.event.shiftKey){const g=this._editor.getSelection();if(g){const{selectionStartLineNumber:u,selectionStartColumn:l}=g;o=[new f.Selection(u,l,i.lineNumber,i.column)]}}else o=(this._editor.getSelections()||[]).map(g=>g.containsPosition(i)?new f.Selection(i.lineNumber,i.column,i.lineNumber,i.column):g);this._editor.setSelections(o||[],"mouse",3)}else(!this._dragSelection.containsPosition(i)||(p(t.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(i)||this._dragSelection.getStartPosition().equals(i)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(n.ID,new b.DragAndDropCommand(this._dragSelection,i,p(t.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}static{this._DECORATION_OPTIONS=_.ModelDecorationOptions.register({description:"dnd-target",className:"dnd-target"})}showAt(t){this._dndDecorationIds.set([{range:new y.Range(t.lineNumber,t.column,t.lineNumber,t.column),options:n._DECORATION_OPTIONS}]),this._editor.revealPosition(t,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(t){return t.type===6||t.type===7}_hitMargin(t){return t.type===2||t.type===3||t.type===4}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}e.DragAndDropController=n,(0,E.registerEditorContribution)(n.ID,n,2)}),define(oe[814],re([1,0,4,40,36,32,25]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FindDecorations=void 0;class f{constructor(b){this._editor=b,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const b=this._findScopeDecorationIds.map(p=>this._editor.getModel().getDecorationRange(p)).filter(p=>!!p);if(b.length)return b}return null}getStartPosition(){return this._startPosition}setStartPosition(b){this._startPosition=b,this.setCurrentFindMatch(null)}_getDecorationIndex(b){const p=this._decorations.indexOf(b);return p>=0?p+1:1}getDecorationRangeAt(b){const p=b<this._decorations.length?this._decorations[b]:null;return p?this._editor.getModel().getDecorationRange(p):null}getCurrentMatchesPosition(b){const p=this._editor.getModel().getDecorationsInRange(b);for(const n of p){const s=n.options;if(s===f._FIND_MATCH_DECORATION||s===f._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(n.id)}return 0}setCurrentFindMatch(b){let p=null,n=0;if(b)for(let s=0,t=this._decorations.length;s<t;s++){const i=this._editor.getModel().getDecorationRange(this._decorations[s]);if(b.equalsRange(i)){p=this._decorations[s],n=s+1;break}}return(this._highlightedDecorationId!==null||p!==null)&&this._editor.changeDecorations(s=>{if(this._highlightedDecorationId!==null&&(s.changeDecorationOptions(this._highlightedDecorationId,f._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),p!==null&&(this._highlightedDecorationId=p,s.changeDecorationOptions(this._highlightedDecorationId,f._CURRENT_FIND_MATCH_DECORATION)),this._rangeHighlightDecorationId!==null&&(s.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),p!==null){let t=this._editor.getModel().getDecorationRange(p);if(t.startLineNumber!==t.endLineNumber&&t.endColumn===1){const i=t.endLineNumber-1,o=this._editor.getModel().getLineMaxColumn(i);t=new c.Range(t.startLineNumber,t.startColumn,i,o)}this._rangeHighlightDecorationId=s.addDecoration(t,f._RANGE_HIGHLIGHT_DECORATION)}}),n}set(b,p){this._editor.changeDecorations(n=>{let s=f._FIND_MATCH_DECORATION;const t=[];if(b.length>1e3){s=f._FIND_MATCH_NO_OVERVIEW_DECORATION;const o=this._editor.getModel().getLineCount(),u=this._editor.getLayoutInfo().height/o,l=Math.max(2,Math.ceil(3/u));let a=b[0].range.startLineNumber,r=b[0].range.endLineNumber;for(let d=1,m=b.length;d<m;d++){const h=b[d].range;r+l>=h.startLineNumber?h.endLineNumber>r&&(r=h.endLineNumber):(t.push({range:new c.Range(a,1,r,1),options:f._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),a=h.startLineNumber,r=h.endLineNumber)}t.push({range:new c.Range(a,1,r,1),options:f._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const i=new Array(b.length);for(let o=0,g=b.length;o<g;o++)i[o]={range:b[o].range,options:s};this._decorations=n.deltaDecorations(this._decorations,i),this._overviewRulerApproximateDecorations=n.deltaDecorations(this._overviewRulerApproximateDecorations,t),this._rangeHighlightDecorationId&&(n.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach(o=>n.removeDecoration(o)),this._findScopeDecorationIds=[]),p?.length&&(this._findScopeDecorationIds=p.map(o=>n.addDecoration(o,f._FIND_SCOPE_DECORATION)))})}matchBeforePosition(b){if(this._decorations.length===0)return null;for(let p=this._decorations.length-1;p>=0;p--){const n=this._decorations[p],s=this._editor.getModel().getDecorationRange(n);if(!(!s||s.endLineNumber>b.lineNumber)){if(s.endLineNumber<b.lineNumber)return s;if(!(s.endColumn>b.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(b){if(this._decorations.length===0)return null;for(let p=0,n=this._decorations.length;p<n;p++){const s=this._decorations[p],t=this._editor.getModel().getDecorationRange(s);if(!(!t||t.startLineNumber<b.lineNumber)){if(t.startLineNumber>b.lineNumber)return t;if(!(t.startColumn<b.column))return t}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let b=[];return b=b.concat(this._decorations),b=b.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&b.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&b.push(this._rangeHighlightDecorationId),b}static{this._CURRENT_FIND_MATCH_DECORATION=E.ModelDecorationOptions.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",inlineClassName:"currentFindMatchInline",showIfCollapsed:!0,overviewRuler:{color:(0,y.themeColorFromId)(L.overviewRulerFindMatchForeground),position:k.OverviewRulerLane.Center},minimap:{color:(0,y.themeColorFromId)(L.minimapFindMatch),position:1}})}static{this._FIND_MATCH_DECORATION=E.ModelDecorationOptions.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",inlineClassName:"findMatchInline",showIfCollapsed:!0,overviewRuler:{color:(0,y.themeColorFromId)(L.overviewRulerFindMatchForeground),position:k.OverviewRulerLane.Center},minimap:{color:(0,y.themeColorFromId)(L.minimapFindMatch),position:1}})}static{this._FIND_MATCH_NO_OVERVIEW_DECORATION=E.ModelDecorationOptions.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0})}static{this._FIND_MATCH_ONLY_OVERVIEW_DECORATION=E.ModelDecorationOptions.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,y.themeColorFromId)(L.overviewRulerFindMatchForeground),position:k.OverviewRulerLane.Center}})}static{this._RANGE_HIGHLIGHT_DECORATION=E.ModelDecorationOptions.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0})}static{this._FIND_SCOPE_DECORATION=E.ModelDecorationOptions.register({description:"find-scope",className:"findScope",isWholeLine:!0})}}e.FindDecorations=f}),define(oe[219],re([1,0,67,14,2,145,9,4,23,203,814,632,633,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FindModelBoundToEditorModel=e.MATCHES_LIMIT=e.FIND_IDS=e.TogglePreserveCaseKeybinding=e.ToggleSearchScopeKeybinding=e.ToggleRegexKeybinding=e.ToggleWholeWordKeybinding=e.ToggleCaseSensitiveKeybinding=e.CONTEXT_REPLACE_INPUT_FOCUSED=e.CONTEXT_FIND_INPUT_FOCUSED=e.CONTEXT_FIND_WIDGET_NOT_VISIBLE=e.CONTEXT_FIND_WIDGET_VISIBLE=void 0,e.CONTEXT_FIND_WIDGET_VISIBLE=new t.RawContextKey("findWidgetVisible",!1),e.CONTEXT_FIND_WIDGET_NOT_VISIBLE=e.CONTEXT_FIND_WIDGET_VISIBLE.toNegated(),e.CONTEXT_FIND_INPUT_FOCUSED=new t.RawContextKey("findInputFocussed",!1),e.CONTEXT_REPLACE_INPUT_FOCUSED=new t.RawContextKey("replaceInputFocussed",!1),e.ToggleCaseSensitiveKeybinding={primary:545,mac:{primary:2593}},e.ToggleWholeWordKeybinding={primary:565,mac:{primary:2613}},e.ToggleRegexKeybinding={primary:560,mac:{primary:2608}},e.ToggleSearchScopeKeybinding={primary:554,mac:{primary:2602}},e.TogglePreserveCaseKeybinding={primary:558,mac:{primary:2606}},e.FIND_IDS={StartFindAction:"actions.find",StartFindWithSelection:"actions.findWithSelection",StartFindWithArgs:"editor.actions.findWithArgs",NextMatchFindAction:"editor.action.nextMatchFindAction",PreviousMatchFindAction:"editor.action.previousMatchFindAction",GoToMatchFindAction:"editor.action.goToMatchFindAction",NextSelectionMatchFindAction:"editor.action.nextSelectionMatchFindAction",PreviousSelectionMatchFindAction:"editor.action.previousSelectionMatchFindAction",StartFindReplaceAction:"editor.action.startFindReplaceAction",CloseFindWidgetCommand:"closeFindWidget",ToggleCaseSensitiveCommand:"toggleFindCaseSensitive",ToggleWholeWordCommand:"toggleFindWholeWord",ToggleRegexCommand:"toggleFindRegex",ToggleSearchScopeCommand:"toggleFindInSelection",TogglePreserveCaseCommand:"togglePreserveCase",ReplaceOneAction:"editor.action.replaceOne",ReplaceAllAction:"editor.action.replaceAll",SelectAllMatchesAction:"editor.action.selectAllMatches"},e.MATCHES_LIMIT=19999;const i=240;class o{constructor(u,l){this._toDispose=new E.DisposableStore,this._editor=u,this._state=l,this._isDisposed=!1,this._startSearchingTimer=new k.TimeoutTimer,this._decorations=new p.FindDecorations(u),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new k.RunOnceScheduler(()=>{if(this._editor.hasModel())return this.research(!1)},100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition(a=>{(a.reason===3||a.reason===5||a.reason===6)&&this._decorations.setStartPosition(this._editor.getPosition())})),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent(a=>{this._ignoreModelContentChanged||(a.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())})),this._toDispose.add(this._state.onFindReplaceStateChange(a=>this._onStateChanged(a))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,E.dispose)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(u){this._isDisposed||this._editor.hasModel()&&(u.searchString||u.isReplaceRevealed||u.isRegex||u.wholeWord||u.matchCase||u.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet(()=>{u.searchScope?this.research(u.moveCursor,this._state.searchScope):this.research(u.moveCursor)},i)):u.searchScope?this.research(u.moveCursor,this._state.searchScope):this.research(u.moveCursor))}static _getSearchRange(u,l){return l||u.getFullModelRange()}research(u,l){let a=null;typeof l<"u"?l!==null&&(Array.isArray(l)?a=l:a=[l]):a=this._decorations.getFindScopes(),a!==null&&(a=a.map(h=>{if(h.startLineNumber!==h.endLineNumber){let v=h.endLineNumber;return h.endColumn===1&&(v=v-1),new f.Range(h.startLineNumber,1,v,this._editor.getModel().getLineMaxColumn(v))}return h}));const r=this._findMatches(a,!1,e.MATCHES_LIMIT);this._decorations.set(r,a);const d=this._editor.getSelection();let m=this._decorations.getCurrentMatchesPosition(d);if(m===0&&r.length>0){const h=(0,c.findFirstIdxMonotonousOrArrLen)(r.map(v=>v.range),v=>f.Range.compareRangesUsingStarts(v,d)>=0);m=h>0?h-1+1:m}this._state.changeMatchInfo(m,this._decorations.getCount(),void 0),u&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const u=this._decorations.getFindScope();return u&&this._editor.revealRangeInCenterIfOutsideViewport(u,0),!0}return!1}_setCurrentFindMatch(u){const l=this._decorations.setCurrentFindMatch(u);this._state.changeMatchInfo(l,this._decorations.getCount(),u),this._editor.setSelection(u),this._editor.revealRangeInCenterIfOutsideViewport(u,0)}_prevSearchPosition(u){const l=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:a,column:r}=u;const d=this._editor.getModel();return l||r===1?(a===1?a=d.getLineCount():a--,r=d.getLineMaxColumn(a)):r--,new y.Position(a,r)}_moveToPrevMatch(u,l=!1){if(!this._state.canNavigateBack()){const w=this._decorations.matchAfterPosition(u);w&&this._setCurrentFindMatch(w);return}if(this._decorations.getCount()<e.MATCHES_LIMIT){let w=this._decorations.matchBeforePosition(u);w&&w.isEmpty()&&w.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),w=this._decorations.matchBeforePosition(u)),w&&this._setCurrentFindMatch(w);return}if(this._cannotFind())return;const a=this._decorations.getFindScope(),r=o._getSearchRange(this._editor.getModel(),a);r.getEndPosition().isBefore(u)&&(u=r.getEndPosition()),u.isBefore(r.getStartPosition())&&(u=r.getEndPosition());const{lineNumber:d,column:m}=u,h=this._editor.getModel();let v=new y.Position(d,m),C=h.findPreviousMatch(this._state.searchString,v,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1);if(C&&C.range.isEmpty()&&C.range.getStartPosition().equals(v)&&(v=this._prevSearchPosition(v),C=h.findPreviousMatch(this._state.searchString,v,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,!1)),!!C){if(!l&&!r.containsRange(C.range))return this._moveToPrevMatch(C.range.getStartPosition(),!0);this._setCurrentFindMatch(C.range)}}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(u){const l=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:a,column:r}=u;const d=this._editor.getModel();return l||r===d.getLineMaxColumn(a)?(a===d.getLineCount()?a=1:a++,r=1):r++,new y.Position(a,r)}_moveToNextMatch(u){if(!this._state.canNavigateForward()){const a=this._decorations.matchBeforePosition(u);a&&this._setCurrentFindMatch(a);return}if(this._decorations.getCount()<e.MATCHES_LIMIT){let a=this._decorations.matchAfterPosition(u);a&&a.isEmpty()&&a.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),a=this._decorations.matchAfterPosition(u)),a&&this._setCurrentFindMatch(a);return}const l=this._getNextMatch(u,!1,!0);l&&this._setCurrentFindMatch(l.range)}_getNextMatch(u,l,a,r=!1){if(this._cannotFind())return null;const d=this._decorations.getFindScope(),m=o._getSearchRange(this._editor.getModel(),d);m.getEndPosition().isBefore(u)&&(u=m.getStartPosition()),u.isBefore(m.getStartPosition())&&(u=m.getStartPosition());const{lineNumber:h,column:v}=u,C=this._editor.getModel();let w=new y.Position(h,v),S=C.findNextMatch(this._state.searchString,w,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,l);return a&&S&&S.range.isEmpty()&&S.range.getStartPosition().equals(w)&&(w=this._nextSearchPosition(w),S=C.findNextMatch(this._state.searchString,w,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,l)),S?!r&&!m.containsRange(S.range)?this._getNextMatch(S.range.getEndPosition(),l,a,!0):S:null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(u){const l=this._decorations.getDecorationRangeAt(u);l&&this._setCurrentFindMatch(l)}moveToMatch(u){this._moveToMatch(u)}_getReplacePattern(){return this._state.isRegex?(0,s.parseReplaceString)(this._state.replaceString):s.ReplacePattern.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const u=this._getReplacePattern(),l=this._editor.getSelection(),a=this._getNextMatch(l.getStartPosition(),!0,!1);if(a)if(l.equalsRange(a.range)){const r=u.buildReplaceString(a.matches,this._state.preserveCase),d=new L.ReplaceCommand(l,r);this._executeEditorCommand("replace",d),this._decorations.setStartPosition(new y.Position(l.startLineNumber,l.startColumn+r.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(a.range)}_findMatches(u,l,a){const r=(u||[null]).map(d=>o._getSearchRange(this._editor.getModel(),d));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null,l,a)}replaceAll(){if(!this._hasMatches())return;const u=this._decorations.getFindScopes();u===null&&this._state.matchesCount>=e.MATCHES_LIMIT?this._largeReplaceAll():this._regularReplaceAll(u),this.research(!1)}_largeReplaceAll(){const l=new b.SearchParams(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(132):null).parseSearchRequest();if(!l)return;let a=l.regex;if(!a.multiline){let S="mu";a.ignoreCase&&(S+="i"),a.global&&(S+="g"),a=new RegExp(a.source,S)}const r=this._editor.getModel(),d=r.getValue(1),m=r.getFullModelRange(),h=this._getReplacePattern();let v;const C=this._state.preserveCase;h.hasReplacementPatterns||C?v=d.replace(a,function(){return h.buildReplaceString(arguments,C)}):v=d.replace(a,h.buildReplaceString(null,C));const w=new L.ReplaceCommandThatPreservesSelection(m,v,this._editor.getSelection());this._executeEditorCommand("replaceAll",w)}_regularReplaceAll(u){const l=this._getReplacePattern(),a=this._findMatches(u,l.hasReplacementPatterns||this._state.preserveCase,1073741824),r=[];for(let m=0,h=a.length;m<h;m++)r[m]=l.buildReplaceString(a[m].matches,this._state.preserveCase);const d=new n.ReplaceAllCommand(this._editor.getSelection(),a.map(m=>m.range),r);this._executeEditorCommand("replaceAll",d)}selectAllMatches(){if(!this._hasMatches())return;const u=this._decorations.getFindScopes();let a=this._findMatches(u,!1,1073741824).map(d=>new _.Selection(d.range.startLineNumber,d.range.startColumn,d.range.endLineNumber,d.range.endColumn));const r=this._editor.getSelection();for(let d=0,m=a.length;d<m;d++)if(a[d].equalsRange(r)){a=[r].concat(a.slice(0,d)).concat(a.slice(d+1));break}this._editor.setSelections(a)}_executeEditorCommand(u,l){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(u,l),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}e.FindModelBoundToEditorModel=o}),define(oe[815],re([1,0,5,364,83,14,219,32,43,518]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FindOptionsWidget=void 0;class b extends E.Widget{static{this.ID="editor.contrib.findOptionsWidget"}constructor(n,s,t){super(),this._hideSoon=this._register(new L.RunOnceScheduler(()=>this._hide(),2e3)),this._isVisible=!1,this._editor=n,this._state=s,this._keybindingService=t,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const i={inputActiveOptionBorder:(0,f.asCssVariable)(f.inputActiveOptionBorder),inputActiveOptionForeground:(0,f.asCssVariable)(f.inputActiveOptionForeground),inputActiveOptionBackground:(0,f.asCssVariable)(f.inputActiveOptionBackground)},o=this._register((0,_.createInstantHoverDelegate)());this.caseSensitive=this._register(new k.CaseSensitiveToggle({appendTitle:this._keybindingLabelFor(y.FIND_IDS.ToggleCaseSensitiveCommand),isChecked:this._state.matchCase,hoverDelegate:o,...i})),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange(()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)})),this.wholeWords=this._register(new k.WholeWordsToggle({appendTitle:this._keybindingLabelFor(y.FIND_IDS.ToggleWholeWordCommand),isChecked:this._state.wholeWord,hoverDelegate:o,...i})),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange(()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)})),this.regex=this._register(new k.RegexToggle({appendTitle:this._keybindingLabelFor(y.FIND_IDS.ToggleRegexCommand),isChecked:this._state.isRegex,hoverDelegate:o,...i})),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange(()=>{this._state.change({isRegex:this.regex.checked},!1)})),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange(g=>{let u=!1;g.isRegex&&(this.regex.checked=this._state.isRegex,u=!0),g.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,u=!0),g.matchCase&&(this.caseSensitive.checked=this._state.matchCase,u=!0),!this._state.isRevealed&&u&&this._revealTemporarily()})),this._register(c.addDisposableListener(this._domNode,c.EventType.MOUSE_LEAVE,g=>this._onMouseLeave())),this._register(c.addDisposableListener(this._domNode,"mouseover",g=>this._onMouseOver()))}_keybindingLabelFor(n){const s=this._keybindingService.lookupKeybinding(n);return s?` (${s.getLabel()})`:""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return b.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}e.FindOptionsWidget=b}),define(oe[816],re([1,0,6,2,4,219]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FindReplaceState=void 0;function y(_,b){return _===1?!0:_===2?!1:b}class f extends k.Disposable{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return y(this._isRegexOverride,this._isRegex)}get wholeWord(){return y(this._wholeWordOverride,this._wholeWord)}get matchCase(){return y(this._matchCaseOverride,this._matchCase)}get preserveCase(){return y(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new c.Emitter),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(b,p,n){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let t=!1;p===0&&(b=0),b>p&&(b=p),this._matchesPosition!==b&&(this._matchesPosition=b,s.matchesPosition=!0,t=!0),this._matchesCount!==p&&(this._matchesCount=p,s.matchesCount=!0,t=!0),typeof n<"u"&&(E.Range.equalsRange(this._currentMatch,n)||(this._currentMatch=n,s.currentMatch=!0,t=!0)),t&&this._onFindReplaceStateChange.fire(s)}change(b,p,n=!0){const s={moveCursor:p,updateHistory:n,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let t=!1;const i=this.isRegex,o=this.wholeWord,g=this.matchCase,u=this.preserveCase;typeof b.searchString<"u"&&this._searchString!==b.searchString&&(this._searchString=b.searchString,s.searchString=!0,t=!0),typeof b.replaceString<"u"&&this._replaceString!==b.replaceString&&(this._replaceString=b.replaceString,s.replaceString=!0,t=!0),typeof b.isRevealed<"u"&&this._isRevealed!==b.isRevealed&&(this._isRevealed=b.isRevealed,s.isRevealed=!0,t=!0),typeof b.isReplaceRevealed<"u"&&this._isReplaceRevealed!==b.isReplaceRevealed&&(this._isReplaceRevealed=b.isReplaceRevealed,s.isReplaceRevealed=!0,t=!0),typeof b.isRegex<"u"&&(this._isRegex=b.isRegex),typeof b.wholeWord<"u"&&(this._wholeWord=b.wholeWord),typeof b.matchCase<"u"&&(this._matchCase=b.matchCase),typeof b.preserveCase<"u"&&(this._preserveCase=b.preserveCase),typeof b.searchScope<"u"&&(b.searchScope?.every(l=>this._searchScope?.some(a=>!E.Range.equalsRange(a,l)))||(this._searchScope=b.searchScope,s.searchScope=!0,t=!0)),typeof b.loop<"u"&&this._loop!==b.loop&&(this._loop=b.loop,s.loop=!0,t=!0),typeof b.isSearching<"u"&&this._isSearching!==b.isSearching&&(this._isSearching=b.isSearching,s.isSearching=!0,t=!0),typeof b.filters<"u"&&(this._filters?this._filters.update(b.filters):this._filters=b.filters,s.filters=!0,t=!0),this._isRegexOverride=typeof b.isRegexOverride<"u"?b.isRegexOverride:0,this._wholeWordOverride=typeof b.wholeWordOverride<"u"?b.wholeWordOverride:0,this._matchCaseOverride=typeof b.matchCaseOverride<"u"?b.matchCaseOverride:0,this._preserveCaseOverride=typeof b.preserveCaseOverride<"u"?b.preserveCaseOverride:0,i!==this.isRegex&&(t=!0,s.isRegex=!0),o!==this.wholeWord&&(t=!0,s.wholeWord=!0),g!==this.matchCase&&(t=!0,s.matchCase=!0),u!==this.preserveCase&&(t=!0,s.preserveCase=!0),t&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||this.matchesPosition!==1}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=L.MATCHES_LIMIT}}e.FindReplaceState=f}),define(oe[817],re([1,0,5,48,165,164,83,14,26,8,2,16,11,4,219,3,399,669,32,71,25,30,97,19,109,43,519]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleButton=e.FindWidget=e.FindWidgetViewZone=e.NLS_NO_RESULTS=e.NLS_MATCHES_LOCATION=e.findNextMatchIcon=e.findPreviousMatchIcon=e.findReplaceAllIcon=e.findReplaceIcon=e.findSelectionIcon=void 0;const w=(0,a.registerIcon)("find-collapsed",_.Codicon.chevronRight,o.localize(805,"Icon to indicate that the editor find widget is collapsed.")),S=(0,a.registerIcon)("find-expanded",_.Codicon.chevronDown,o.localize(806,"Icon to indicate that the editor find widget is expanded."));e.findSelectionIcon=(0,a.registerIcon)("find-selection",_.Codicon.selection,o.localize(807,"Icon for 'Find in Selection' in the editor find widget.")),e.findReplaceIcon=(0,a.registerIcon)("find-replace",_.Codicon.replace,o.localize(808,"Icon for 'Replace' in the editor find widget.")),e.findReplaceAllIcon=(0,a.registerIcon)("find-replace-all",_.Codicon.replaceAll,o.localize(809,"Icon for 'Replace All' in the editor find widget.")),e.findPreviousMatchIcon=(0,a.registerIcon)("find-previous-match",_.Codicon.arrowUp,o.localize(810,"Icon for 'Find Previous' in the editor find widget.")),e.findNextMatchIcon=(0,a.registerIcon)("find-next-match",_.Codicon.arrowDown,o.localize(811,"Icon for 'Find Next' in the editor find widget."));const D=o.localize(812,"Find / Replace"),I=o.localize(813,"Find"),T=o.localize(814,"Find"),M=o.localize(815,"Previous Match"),A=o.localize(816,"Next Match"),R=o.localize(817,"Find in Selection"),N=o.localize(818,"Close"),O=o.localize(819,"Replace"),x=o.localize(820,"Replace"),F=o.localize(821,"Replace"),W=o.localize(822,"Replace All"),z=o.localize(823,"Toggle Replace"),q=o.localize(824,"Only the first {0} results are highlighted, but all find operations work on the entire text.",i.MATCHES_LIMIT);e.NLS_MATCHES_LOCATION=o.localize(825,"{0} of {1}"),e.NLS_NO_RESULTS=o.localize(826,"No results");const H=419,U=275-54;let Y=69;const Q=33,X="ctrlEnterReplaceAll.windows.donotask",G=n.isMacintosh?256:2048;class P{constructor(ce){this.afterLineNumber=ce,this.heightInPx=Q,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}e.FindWidgetViewZone=P;function te(pe,ce,ie){const ne=!!ce.match(/\n/);if(ie&&ne&&ie.selectionStart>0){pe.stopPropagation();return}}function se(pe,ce,ie){const ne=!!ce.match(/\n/);if(ie&&ne&&ie.selectionEnd<ie.value.length){pe.stopPropagation();return}}class ue extends y.Widget{static{this.ID="editor.contrib.findWidget"}constructor(ce,ie,ne,J,B,j,V,$,Z,ee){super(),this._hoverService=ee,this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=ce,this._controller=ie,this._state=ne,this._contextViewProvider=J,this._keybindingService=B,this._contextKeyService=j,this._storageService=$,this._notificationService=Z,this._ctrlEnterReplaceAllWarningPrompted=!!$.getBoolean(X,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new f.Delayer(500),this._register((0,p.toDisposable)(()=>this._updateHistoryDelayer.cancel())),this._register(this._state.onFindReplaceStateChange(le=>this._onStateChanged(le))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration(le=>{if(le.hasChanged(92)&&(this._codeEditor.getOption(92)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),le.hasChanged(146)&&this._tryUpdateWidgetWidth(),le.hasChanged(2)&&this.updateAccessibilitySupport(),le.hasChanged(41)){const de=this._codeEditor.getOption(41).loop;this._state.change({loop:de},!1);const me=this._codeEditor.getOption(41).addExtraSpaceOnTop;me&&!this._viewZone&&(this._viewZone=new P(0),this._showViewZone()),!me&&this._viewZone&&this._removeViewZone()}})),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection(()=>{this._isVisible&&this._updateToggleSelectionFindButton()})),this._register(this._codeEditor.onDidFocusEditorWidget(async()=>{if(this._isVisible){const le=await this._controller.getGlobalBufferTerm();le&&le!==this._state.searchString&&(this._state.change({searchString:le},!1),this._findInput.select())}})),this._findInputFocused=i.CONTEXT_FIND_INPUT_FOCUSED.bindTo(j),this._findFocusTracker=this._register(c.trackFocus(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus(()=>{this._findInputFocused.set(!0),this._updateSearchScope()})),this._register(this._findFocusTracker.onDidBlur(()=>{this._findInputFocused.set(!1)})),this._replaceInputFocused=i.CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(j),this._replaceFocusTracker=this._register(c.trackFocus(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus(()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()})),this._register(this._replaceFocusTracker.onDidBlur(()=>{this._replaceInputFocused.set(!1)})),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new P(0)),this._register(this._codeEditor.onDidChangeModel(()=>{this._isVisible&&(this._viewZoneId=void 0)})),this._register(this._codeEditor.onDidScrollChange(le=>{if(le.scrollTopChanged){this._layoutViewZone();return}setTimeout(()=>{this._layoutViewZone()},0)}))}getId(){return ue.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(ce){if(ce.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(ce.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),ce.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),ce.isReplaceRevealed&&(this._state.isReplaceRevealed?!this._codeEditor.getOption(92)&&!this._isReplaceVisible&&(this._isReplaceVisible=!0,this._replaceInput.width=c.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(ce.isRevealed||ce.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),ce.isRegex&&this._findInput.setRegex(this._state.isRegex),ce.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),ce.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),ce.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),ce.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),ce.searchString||ce.matchesCount||ce.matchesPosition){const ie=this._state.searchString.length>0&&this._state.matchesCount===0;this._domNode.classList.toggle("no-results",ie),this._updateMatchesCount(),this._updateButtons()}(ce.searchString||ce.currentMatch)&&this._layoutViewZone(),ce.updateHistory&&this._delayedUpdateHistory(),ce.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,b.onUnexpectedError)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){this._matchesCount.style.minWidth=Y+"px",this._state.matchesCount>=i.MATCHES_LIMIT?this._matchesCount.title=q:this._matchesCount.title="",this._matchesCount.firstChild?.remove();let ce;if(this._state.matchesCount>0){let ie=String(this._state.matchesCount);this._state.matchesCount>=i.MATCHES_LIMIT&&(ie+="+");let ne=String(this._state.matchesPosition);ne==="0"&&(ne="?"),ce=s.format(e.NLS_MATCHES_LOCATION,ne,ie)}else ce=e.NLS_NO_RESULTS;this._matchesCount.appendChild(document.createTextNode(ce)),(0,k.alert)(this._getAriaLabel(ce,this._state.currentMatch,this._state.searchString)),Y=Math.max(Y,this._matchesCount.clientWidth)}_getAriaLabel(ce,ie,ne){if(ce===e.NLS_NO_RESULTS)return ne===""?o.localize(827,"{0} found",ce):o.localize(828,"{0} found for '{1}'",ce,ne);if(ie){const J=o.localize(829,"{0} found for '{1}', at {2}",ce,ne,ie.startLineNumber+":"+ie.startColumn),B=this._codeEditor.getModel();return B&&ie.startLineNumber<=B.getLineCount()&&ie.startLineNumber>=1?`${B.getLineContent(ie.startLineNumber)}, ${J}`:J}return o.localize(830,"{0} found for '{1}'",ce,ne)}_updateToggleSelectionFindButton(){const ce=this._codeEditor.getSelection(),ie=ce?ce.startLineNumber!==ce.endLineNumber||ce.startColumn!==ce.endColumn:!1,ne=this._toggleSelectionFind.checked;this._isVisible&&(ne||ie)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const ce=this._state.searchString.length>0,ie=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&ce&&ie&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&ce&&ie&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&ce),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&ce),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const ne=!this._codeEditor.getOption(92);this._toggleReplaceBtn.setEnabled(this._isVisible&&ne)}_reveal(){if(this._revealTimeouts.forEach(ce=>{clearTimeout(ce)}),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const ce=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const ne=!!ce&&ce.startLineNumber!==ce.endLineNumber;this._toggleSelectionFind.checked=ne;break}default:break}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout(()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")},0)),this._revealTimeouts.push(setTimeout(()=>{this._findInput.validate()},200)),this._codeEditor.layoutOverlayWidget(this);let ie=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&ce){const ne=this._codeEditor.getDomNode();if(ne){const J=c.getDomNodePagePosition(ne),B=this._codeEditor.getScrolledVisiblePosition(ce.getStartPosition()),j=J.left+(B?B.left:0),V=B?B.top:0;if(this._viewZone&&V<this._viewZone.heightInPx){ce.endLineNumber>ce.startLineNumber&&(ie=!1);const $=c.getTopLeftOffset(this._domNode).left;j>$&&(ie=!1);const Z=this._codeEditor.getScrolledVisiblePosition(ce.getEndPosition());J.left+(Z?Z.left:0)>$&&(ie=!1)}}}this._showViewZone(ie)}}_hide(ce){this._revealTimeouts.forEach(ie=>{clearTimeout(ie)}),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),ce&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(ce){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop){this._removeViewZone();return}if(!this._isVisible)return;const ne=this._viewZone;this._viewZoneId!==void 0||!ne||this._codeEditor.changeViewZones(J=>{ne.heightInPx=this._getHeight(),this._viewZoneId=J.addZone(ne),this._codeEditor.setScrollTop(ce||this._codeEditor.getScrollTop()+ne.heightInPx)})}_showViewZone(ce=!0){if(!this._isVisible||!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;this._viewZone===void 0&&(this._viewZone=new P(0));const ne=this._viewZone;this._codeEditor.changeViewZones(J=>{if(this._viewZoneId!==void 0){const B=this._getHeight();if(B===ne.heightInPx)return;const j=B-ne.heightInPx;ne.heightInPx=B,J.layoutZone(this._viewZoneId),ce&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+j);return}else{let B=this._getHeight();if(B-=this._codeEditor.getOption(84).top,B<=0)return;ne.heightInPx=B,this._viewZoneId=J.addZone(ne),ce&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+B)}})}_removeViewZone(){this._codeEditor.changeViewZones(ce=>{this._viewZoneId!==void 0&&(ce.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))})}_tryUpdateWidgetWidth(){if(!this._isVisible||!this._domNode.isConnected)return;const ce=this._codeEditor.getLayoutInfo();if(ce.contentWidth<=0){this._domNode.classList.add("hiddenEditor");return}else this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const ne=ce.width,J=ce.minimap.minimapWidth;let B=!1,j=!1,V=!1;if(this._resized&&c.getTotalWidth(this._domNode)>H){this._domNode.style.maxWidth=`${ne-28-J-15}px`,this._replaceInput.width=c.getTotalWidth(this._findInput.domNode);return}if(H+28+J>=ne&&(j=!0),H+28+J-Y>=ne&&(V=!0),H+28+J-Y>=ne+50&&(B=!0),this._domNode.classList.toggle("collapsed-find-widget",B),this._domNode.classList.toggle("narrow-find-widget",V),this._domNode.classList.toggle("reduced-find-widget",j),!V&&!B&&(this._domNode.style.maxWidth=`${ne-28-J-15}px`),this._findInput.layout({collapsedFindWidget:B,narrowFindWidget:V,reducedFindWidget:j}),this._resized){const $=this._findInput.inputBox.element.clientWidth;$>0&&(this._replaceInput.width=$)}else this._isReplaceVisible&&(this._replaceInput.width=c.getTotalWidth(this._findInput.domNode))}_getHeight(){let ce=0;return ce+=4,ce+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(ce+=4,ce+=this._replaceInput.inputBox.height+2),ce+=4,ce}_tryUpdateHeight(){const ce=this._getHeight();return this._cachedHeight!==null&&this._cachedHeight===ce?!1:(this._cachedHeight=ce,this._domNode.style.height=`${ce}px`,!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const ce=this._codeEditor.getSelections();ce.map(ie=>{ie.endColumn===1&&ie.endLineNumber>ie.startLineNumber&&(ie=ie.setEndPosition(ie.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(ie.endLineNumber-1)));const ne=this._state.currentMatch;return ie.startLineNumber!==ie.endLineNumber&&!t.Range.equalsRange(ie,ne)?ie:null}).filter(ie=>!!ie),ce.length&&this._state.change({searchScope:ce},!0)}}_onFindInputMouseDown(ce){ce.middleButton&&ce.stopPropagation()}_onFindInputKeyDown(ce){if(ce.equals(G|3))if(this._keybindingService.dispatchEvent(ce,ce.target)){ce.preventDefault();return}else{this._findInput.inputBox.insertAtCursor(`
`),ce.preventDefault();return}if(ce.equals(2)){this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),ce.preventDefault();return}if(ce.equals(2066)){this._codeEditor.focus(),ce.preventDefault();return}if(ce.equals(16))return te(ce,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"));if(ce.equals(18))return se(ce,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea"))}_onReplaceInputKeyDown(ce){if(ce.equals(G|3))if(this._keybindingService.dispatchEvent(ce,ce.target)){ce.preventDefault();return}else{n.isWindows&&n.isNative&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(o.localize(831,"Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(X,!0,0,0)),this._replaceInput.inputBox.insertAtCursor(`
`),ce.preventDefault();return}if(ce.equals(2)){this._findInput.focusOnCaseSensitive(),ce.preventDefault();return}if(ce.equals(1026)){this._findInput.focus(),ce.preventDefault();return}if(ce.equals(2066)){this._codeEditor.focus(),ce.preventDefault();return}if(ce.equals(16))return te(ce,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"));if(ce.equals(18))return se(ce,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea"))}getVerticalSashLeft(ce){return 0}_keybindingLabelFor(ce){const ie=this._keybindingService.lookupKeybinding(ce);return ie?` (${ie.getLabel()})`:""}_buildDomNode(){this._findInput=this._register(new g.ContextScopedFindInput(null,this._contextViewProvider,{width:U,label:I,placeholder:T,appendCaseSensitiveLabel:this._keybindingLabelFor(i.FIND_IDS.ToggleCaseSensitiveCommand),appendWholeWordsLabel:this._keybindingLabelFor(i.FIND_IDS.ToggleWholeWordCommand),appendRegexLabel:this._keybindingLabelFor(i.FIND_IDS.ToggleRegexCommand),validation:ee=>{if(ee.length===0||!this._findInput.getRegex())return null;try{return new RegExp(ee,"gu"),null}catch(le){return{content:le.message}}},flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>(0,u.showHistoryKeybindingHint)(this._keybindingService),inputBoxStyles:v.defaultInputBoxStyles,toggleStyles:v.defaultToggleStyles},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown(ee=>this._onFindInputKeyDown(ee))),this._register(this._findInput.inputBox.onDidChange(()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)})),this._register(this._findInput.onDidOptionChange(()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)})),this._register(this._findInput.onCaseSensitiveKeyDown(ee=>{ee.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),ee.preventDefault())})),this._register(this._findInput.onRegexKeyDown(ee=>{ee.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),ee.preventDefault())})),this._register(this._findInput.inputBox.onDidHeightChange(ee=>{this._tryUpdateHeight()&&this._showViewZone()})),n.isLinux&&this._register(this._findInput.onMouseDown(ee=>this._onFindInputMouseDown(ee))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount();const ne=this._register((0,C.createInstantHoverDelegate)());this._prevBtn=this._register(new ge({label:M+this._keybindingLabelFor(i.FIND_IDS.PreviousMatchFindAction),icon:e.findPreviousMatchIcon,hoverDelegate:ne,onTrigger:()=>{(0,h.assertIsDefined)(this._codeEditor.getAction(i.FIND_IDS.PreviousMatchFindAction)).run().then(void 0,b.onUnexpectedError)}},this._hoverService)),this._nextBtn=this._register(new ge({label:A+this._keybindingLabelFor(i.FIND_IDS.NextMatchFindAction),icon:e.findNextMatchIcon,hoverDelegate:ne,onTrigger:()=>{(0,h.assertIsDefined)(this._codeEditor.getAction(i.FIND_IDS.NextMatchFindAction)).run().then(void 0,b.onUnexpectedError)}},this._hoverService));const J=document.createElement("div");J.className="find-part",J.appendChild(this._findInput.domNode);const B=document.createElement("div");B.className="find-actions",J.appendChild(B),B.appendChild(this._matchesCount),B.appendChild(this._prevBtn.domNode),B.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new E.Toggle({icon:e.findSelectionIcon,title:R+this._keybindingLabelFor(i.FIND_IDS.ToggleSearchScopeCommand),isChecked:!1,hoverDelegate:ne,inputActiveOptionBackground:(0,l.asCssVariable)(l.inputActiveOptionBackground),inputActiveOptionBorder:(0,l.asCssVariable)(l.inputActiveOptionBorder),inputActiveOptionForeground:(0,l.asCssVariable)(l.inputActiveOptionForeground)})),this._register(this._toggleSelectionFind.onChange(()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){let ee=this._codeEditor.getSelections();ee=ee.map(le=>(le.endColumn===1&&le.endLineNumber>le.startLineNumber&&(le=le.setEndPosition(le.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(le.endLineNumber-1))),le.isEmpty()?null:le)).filter(le=>!!le),ee.length&&this._state.change({searchScope:ee},!0)}}else this._state.change({searchScope:null},!0)})),B.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new ge({label:N+this._keybindingLabelFor(i.FIND_IDS.CloseFindWidgetCommand),icon:a.widgetClose,hoverDelegate:ne,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:ee=>{ee.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),ee.preventDefault())}},this._hoverService)),this._replaceInput=this._register(new g.ContextScopedReplaceInput(null,void 0,{label:O,placeholder:x,appendPreserveCaseLabel:this._keybindingLabelFor(i.FIND_IDS.TogglePreserveCaseCommand),history:[],flexibleHeight:!0,flexibleWidth:!0,flexibleMaxHeight:118,showHistoryHint:()=>(0,u.showHistoryKeybindingHint)(this._keybindingService),inputBoxStyles:v.defaultInputBoxStyles,toggleStyles:v.defaultToggleStyles},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown(ee=>this._onReplaceInputKeyDown(ee))),this._register(this._replaceInput.inputBox.onDidChange(()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)})),this._register(this._replaceInput.inputBox.onDidHeightChange(ee=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()})),this._register(this._replaceInput.onDidOptionChange(()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)})),this._register(this._replaceInput.onPreserveCaseKeyDown(ee=>{ee.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),ee.preventDefault())}));const j=this._register((0,C.createInstantHoverDelegate)());this._replaceBtn=this._register(new ge({label:F+this._keybindingLabelFor(i.FIND_IDS.ReplaceOneAction),icon:e.findReplaceIcon,hoverDelegate:j,onTrigger:()=>{this._controller.replace()},onKeyDown:ee=>{ee.equals(1026)&&(this._closeBtn.focus(),ee.preventDefault())}},this._hoverService)),this._replaceAllBtn=this._register(new ge({label:W+this._keybindingLabelFor(i.FIND_IDS.ReplaceAllAction),icon:e.findReplaceAllIcon,hoverDelegate:j,onTrigger:()=>{this._controller.replaceAll()}},this._hoverService));const V=document.createElement("div");V.className="replace-part",V.appendChild(this._replaceInput.domNode);const $=document.createElement("div");$.className="replace-actions",V.appendChild($),$.appendChild(this._replaceBtn.domNode),$.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new ge({label:z,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=c.getTotalWidth(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}},this._hoverService)),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=D,this._domNode.role="dialog",this._domNode.style.width=`${H}px`,this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(J),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(V),this._resizeSash=this._register(new L.Sash(this._domNode,this,{orientation:0,size:2})),this._resized=!1;let Z=H;this._register(this._resizeSash.onDidStart(()=>{Z=c.getTotalWidth(this._domNode)})),this._register(this._resizeSash.onDidChange(ee=>{this._resized=!0;const le=Z+ee.startX-ee.currentX;if(le<H)return;const de=parseFloat(c.getComputedStyle(this._domNode).maxWidth)||0;le>de||(this._domNode.style.width=`${le}px`,this._isReplaceVisible&&(this._replaceInput.width=c.getTotalWidth(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())})),this._register(this._resizeSash.onDidReset(()=>{const ee=c.getTotalWidth(this._domNode);if(ee<H)return;let le=H;if(!this._resized||ee===H){const de=this._codeEditor.getLayoutInfo();le=de.width-28-de.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width=`${le}px`,this._isReplaceVisible&&(this._replaceInput.width=c.getTotalWidth(this._findInput.domNode)),this._findInput.inputBox.layout()}))}updateAccessibilitySupport(){const ce=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(ce!==2)}}e.FindWidget=ue;class ge extends y.Widget{constructor(ce,ie){super(),this._opts=ce;let ne="button";this._opts.className&&(ne=ne+" "+this._opts.className),this._opts.icon&&(ne=ne+" "+d.ThemeIcon.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.tabIndex=0,this._domNode.className=ne,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this._register(ie.setupManagedHover(ce.hoverDelegate??(0,C.getDefaultHoverDelegate)("element"),this._domNode,this._opts.label)),this.onclick(this._domNode,J=>{this._opts.onTrigger(),J.preventDefault()}),this.onkeydown(this._domNode,J=>{if(J.equals(10)||J.equals(3)){this._opts.onTrigger(),J.preventDefault();return}this._opts.onKeyDown?.(J)})}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(ce){this._domNode.classList.toggle("disabled",!ce),this._domNode.setAttribute("aria-disabled",String(!ce)),this._domNode.tabIndex=ce?0:-1}setExpanded(ce){this._domNode.setAttribute("aria-expanded",String(!!ce)),ce?(this._domNode.classList.remove(...d.ThemeIcon.asClassNameArray(w)),this._domNode.classList.add(...d.ThemeIcon.asClassNameArray(S))):(this._domNode.classList.remove(...d.ThemeIcon.asClassNameArray(S)),this._domNode.classList.add(...d.ThemeIcon.asClassNameArray(w)))}}e.SimpleButton=ge,(0,r.registerThemingParticipant)((pe,ce)=>{const ie=pe.getColor(l.editorFindMatchHighlightBorder);ie&&ce.addRule(`.monaco-editor .findMatch { border: 1px ${(0,m.isHighContrast)(pe.type)?"dotted":"solid"} ${ie}; box-sizing: border-box; }`);const ne=pe.getColor(l.editorFindRangeHighlightBorder);ne&&ce.addRule(`.monaco-editor .findScope { border: 1px ${(0,m.isHighContrast)(pe.type)?"dashed":"solid"} ${ne}; }`);const J=pe.getColor(l.contrastBorder);J&&ce.addRule(`.monaco-editor .find-widget { border: 1px solid ${J}; }`);const B=pe.getColor(l.editorFindMatchForeground);B&&ce.addRule(`.monaco-editor .findMatchInline { color: ${B}; }`);const j=pe.getColor(l.editorFindMatchHighlightForeground);j&&ce.addRule(`.monaco-editor .currentFindMatchInline { color: ${j}; }`)})}),define(oe[418],re([1,0,14,2,11,15,80,20,40,219,815,816,817,3,29,117,12,58,31,50,63,100,25,118]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h){"use strict";var v;Object.defineProperty(e,"__esModule",{value:!0}),e.StartFindReplaceAction=e.PreviousSelectionMatchFindAction=e.NextSelectionMatchFindAction=e.SelectionMatchFindAction=e.MoveToMatchFindAction=e.PreviousMatchFindAction=e.NextMatchFindAction=e.MatchFindAction=e.StartFindWithSelectionAction=e.StartFindWithArgsAction=e.StartFindAction=e.FindController=e.CommonFindController=void 0,e.getSelectionSearchString=w;const C=524288;function w(q,H="single",K=!1){if(!q.hasModel())return null;const U=q.getSelection();if(H==="single"&&U.startLineNumber===U.endLineNumber||H==="multiple"){if(U.isEmpty()){const Y=q.getConfiguredWordAtPosition(U.getStartPosition());if(Y&&K===!1)return Y.word}else if(q.getModel().getValueLengthInRange(U)<C)return q.getModel().getValueInRange(U)}return null}let S=class extends k.Disposable{static{v=this}static{this.ID="editor.contrib.findController"}get editor(){return this._editor}static get(H){return H.getContribution(v.ID)}constructor(H,K,U,Y,Q,X){super(),this._editor=H,this._findWidgetVisible=b.CONTEXT_FIND_WIDGET_VISIBLE.bindTo(K),this._contextKeyService=K,this._storageService=U,this._clipboardService=Y,this._notificationService=Q,this._hoverService=X,this._updateHistoryDelayer=new c.Delayer(500),this._state=this._register(new n.FindReplaceState),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange(G=>this._onStateChanged(G))),this._model=null,this._register(this._editor.onDidChangeModel(()=>{const G=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),G&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})}))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(H){this.saveQueryState(H),H.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),H.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(H){H.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),H.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),H.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),H.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!b.CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){let H=this._editor.getSelections();H=H.map(K=>(K.endColumn===1&&K.endLineNumber>K.startLineNumber&&(K=K.setEndPosition(K.endLineNumber-1,this._editor.getModel().getLineMaxColumn(K.endLineNumber-1))),K.isEmpty()?null:K)).filter(K=>!!K),H.length&&this._state.change({searchScope:H},!0)}}setSearchString(H){this._state.isRegex&&(H=E.escapeRegExpCharacters(H)),this._state.change({searchString:H},!1)}highlightFindOptions(H=!1){}async _start(H,K){if(this.disposeModel(),!this._editor.hasModel())return;const U={...K,isRevealed:!0};if(H.seedSearchStringFromSelection==="single"){const Y=w(this._editor,H.seedSearchStringFromSelection,H.seedSearchStringFromNonEmptySelection);Y&&(this._state.isRegex?U.searchString=E.escapeRegExpCharacters(Y):U.searchString=Y)}else if(H.seedSearchStringFromSelection==="multiple"&&!H.updateSearchScope){const Y=w(this._editor,H.seedSearchStringFromSelection);Y&&(U.searchString=Y)}if(!U.searchString&&H.seedSearchStringFromGlobalClipboard){const Y=await this.getGlobalBufferTerm();if(!this._editor.hasModel())return;Y&&(U.searchString=Y)}if(H.forceRevealReplace||U.isReplaceRevealed?U.isReplaceRevealed=!0:this._findWidgetVisible.get()||(U.isReplaceRevealed=!1),H.updateSearchScope){const Y=this._editor.getSelections();Y.some(Q=>!Q.isEmpty())&&(U.searchScope=Y)}U.loop=H.loop,this._state.change(U,!1),this._model||(this._model=new b.FindModelBoundToEditorModel(this._editor,this._state))}start(H,K){return this._start(H,K)}moveToNextMatch(){return this._model?(this._model.moveToNextMatch(),!0):!1}moveToPrevMatch(){return this._model?(this._model.moveToPrevMatch(),!0):!1}goToMatch(H){return this._model?(this._model.moveToMatch(H),!0):!1}replace(){return this._model?(this._model.replace(),!0):!1}replaceAll(){return this._model?this._editor.getModel()?.isTooLargeForHeapOperation()?(this._notificationService.warn(t.localize(832,"The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0):!1}selectAllMatches(){return this._model?(this._model.selectAllMatches(),this._editor.focus(),!0):!1}async getGlobalBufferTerm(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}setGlobalBufferTerm(H){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(H)}};e.CommonFindController=S,e.CommonFindController=S=v=De([he(1,g.IContextKeyService),he(2,d.IStorageService),he(3,o.IClipboardService),he(4,a.INotificationService),he(5,h.IHoverService)],S);let D=class extends S{constructor(H,K,U,Y,Q,X,G,P,te){super(H,U,G,P,X,te),this._contextViewService=K,this._keybindingService=Y,this._themeService=Q,this._widget=null,this._findOptionsWidget=null}async _start(H,K){this._widget||this._createFindWidget();const U=this._editor.getSelection();let Y=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":Y=!0;break;case"never":Y=!1;break;case"multiline":{Y=!!U&&U.startLineNumber!==U.endLineNumber;break}default:break}H.updateSearchScope=H.updateSearchScope||Y,await super._start(H,K),this._widget&&(H.shouldFocus===2?this._widget.focusReplaceInput():H.shouldFocus===1&&this._widget.focusFindInput())}highlightFindOptions(H=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!H?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new s.FindWidget(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService,this._hoverService)),this._findOptionsWidget=this._register(new p.FindOptionsWidget(this._editor,this._state,this._keybindingService))}};e.FindController=D,e.FindController=D=De([he(1,u.IContextViewService),he(2,g.IContextKeyService),he(3,l.IKeybindingService),he(4,m.IThemeService),he(5,a.INotificationService),he(6,d.IStorageService),he(7,o.IClipboardService),he(8,h.IHoverService)],D),e.StartFindAction=(0,L.registerMultiEditorAction)(new L.MultiEditorAction({id:b.FIND_IDS.StartFindAction,label:t.localize(833,"Find"),alias:"Find",precondition:g.ContextKeyExpr.or(f.EditorContextKeys.focus,g.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:i.MenuId.MenubarEditMenu,group:"3_find",title:t.localize(834,"&&Find"),order:1}})),e.StartFindAction.addImplementation(0,(q,H,K)=>{const U=S.get(H);return U?U.start({forceRevealReplace:!1,seedSearchStringFromSelection:H.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:H.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:H.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:H.getOption(41).loop}):!1});const I={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},isRegex:{type:"boolean"},matchWholeWord:{type:"boolean"},isCaseSensitive:{type:"boolean"},preserveCase:{type:"boolean"},findInSelection:{type:"boolean"}}}}]};class T extends L.EditorAction{constructor(){super({id:b.FIND_IDS.StartFindWithArgs,label:t.localize(835,"Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},metadata:I})}async run(H,K,U){const Y=S.get(K);if(Y){const Q=U?{searchString:U.searchString,replaceString:U.replaceString,isReplaceRevealed:U.replaceString!==void 0,isRegex:U.isRegex,wholeWord:U.matchWholeWord,matchCase:U.isCaseSensitive,preserveCase:U.preserveCase}:{};await Y.start({forceRevealReplace:!1,seedSearchStringFromSelection:Y.getState().searchString.length===0&&K.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:K.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:U?.findInSelection||!1,loop:K.getOption(41).loop},Q),Y.setGlobalBufferTerm(Y.getState().searchString)}}}e.StartFindWithArgsAction=T;class M extends L.EditorAction{constructor(){super({id:b.FIND_IDS.StartFindWithSelection,label:t.localize(836,"Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}async run(H,K){const U=S.get(K);U&&(await U.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:K.getOption(41).loop}),U.setGlobalBufferTerm(U.getState().searchString))}}e.StartFindWithSelectionAction=M;class A extends L.EditorAction{async run(H,K){const U=S.get(K);U&&!this._run(U)&&(await U.start({forceRevealReplace:!1,seedSearchStringFromSelection:U.getState().searchString.length===0&&K.getOption(41).seedSearchStringFromSelection!=="never"?"single":"none",seedSearchStringFromNonEmptySelection:K.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:K.getOption(41).loop}),this._run(U))}}e.MatchFindAction=A;class R extends A{constructor(){super({id:b.FIND_IDS.NextMatchFindAction,label:t.localize(837,"Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:f.EditorContextKeys.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:g.ContextKeyExpr.and(f.EditorContextKeys.focus,b.CONTEXT_FIND_INPUT_FOCUSED),primary:3,weight:100}]})}_run(H){return H.moveToNextMatch()?(H.editor.pushUndoStop(),!0):!1}}e.NextMatchFindAction=R;class N extends A{constructor(){super({id:b.FIND_IDS.PreviousMatchFindAction,label:t.localize(838,"Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:f.EditorContextKeys.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:g.ContextKeyExpr.and(f.EditorContextKeys.focus,b.CONTEXT_FIND_INPUT_FOCUSED),primary:1027,weight:100}]})}_run(H){return H.moveToPrevMatch()}}e.PreviousMatchFindAction=N;class O extends L.EditorAction{constructor(){super({id:b.FIND_IDS.GoToMatchFindAction,label:t.localize(839,"Go to Match..."),alias:"Go to Match...",precondition:b.CONTEXT_FIND_WIDGET_VISIBLE}),this._highlightDecorations=[]}run(H,K,U){const Y=S.get(K);if(!Y)return;const Q=Y.getState().matchesCount;if(Q<1){H.get(a.INotificationService).notify({severity:a.Severity.Warning,message:t.localize(840,"No matches. Try searching for something else.")});return}const G=H.get(r.IQuickInputService).createInputBox();G.placeholder=t.localize(841,"Type a number to go to a specific match (between 1 and {0})",Q);const P=se=>{const ue=parseInt(se);if(isNaN(ue))return;const ge=Y.getState().matchesCount;if(ue>0&&ue<=ge)return ue-1;if(ue<0&&ue>=-ge)return ge+ue},te=se=>{const ue=P(se);if(typeof ue=="number"){G.validationMessage=void 0,Y.goToMatch(ue);const ge=Y.getState().currentMatch;ge&&this.addDecorations(K,ge)}else G.validationMessage=t.localize(842,"Please type a number between 1 and {0}",Y.getState().matchesCount),this.clearDecorations(K)};G.onDidChangeValue(se=>{te(se)}),G.onDidAccept(()=>{const se=P(G.value);typeof se=="number"?(Y.goToMatch(se),G.hide()):G.validationMessage=t.localize(843,"Please type a number between 1 and {0}",Y.getState().matchesCount)}),G.onDidHide(()=>{this.clearDecorations(K),G.dispose()}),G.show()}clearDecorations(H){H.changeDecorations(K=>{this._highlightDecorations=K.deltaDecorations(this._highlightDecorations,[])})}addDecorations(H,K){H.changeDecorations(U=>{this._highlightDecorations=U.deltaDecorations(this._highlightDecorations,[{range:K,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:K,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,m.themeColorFromId)(y.overviewRulerRangeHighlight),position:_.OverviewRulerLane.Full}}}])})}}e.MoveToMatchFindAction=O;class x extends L.EditorAction{async run(H,K){const U=S.get(K);if(!U)return;const Y=w(K,"single",!1);Y&&U.setSearchString(Y),this._run(U)||(await U.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:K.getOption(41).loop}),this._run(U))}}e.SelectionMatchFindAction=x;class F extends x{constructor(){super({id:b.FIND_IDS.NextSelectionMatchFindAction,label:t.localize(844,"Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:f.EditorContextKeys.focus,primary:2109,weight:100}})}_run(H){return H.moveToNextMatch()}}e.NextSelectionMatchFindAction=F;class W extends x{constructor(){super({id:b.FIND_IDS.PreviousSelectionMatchFindAction,label:t.localize(845,"Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:f.EditorContextKeys.focus,primary:3133,weight:100}})}_run(H){return H.moveToPrevMatch()}}e.PreviousSelectionMatchFindAction=W,e.StartFindReplaceAction=(0,L.registerMultiEditorAction)(new L.MultiEditorAction({id:b.FIND_IDS.StartFindReplaceAction,label:t.localize(846,"Replace"),alias:"Replace",precondition:g.ContextKeyExpr.or(f.EditorContextKeys.focus,g.ContextKeyExpr.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:i.MenuId.MenubarEditMenu,group:"3_find",title:t.localize(847,"&&Replace"),order:2}})),e.StartFindReplaceAction.addImplementation(0,(q,H,K)=>{if(!H.hasModel()||H.getOption(92))return!1;const U=S.get(H);if(!U)return!1;const Y=H.getSelection(),Q=U.isFindInputFocused(),X=!Y.isEmpty()&&Y.startLineNumber===Y.endLineNumber&&H.getOption(41).seedSearchStringFromSelection!=="never"&&!Q,G=Q||X?2:1;return U.start({forceRevealReplace:!0,seedSearchStringFromSelection:X?"single":"none",seedSearchStringFromNonEmptySelection:H.getOption(41).seedSearchStringFromSelection==="selection",seedSearchStringFromGlobalClipboard:H.getOption(41).seedSearchStringFromSelection!=="never",shouldFocus:G,shouldAnimate:!0,updateSearchScope:!1,loop:H.getOption(41).loop})}),(0,L.registerEditorContribution)(S.ID,D,0),(0,L.registerEditorAction)(T),(0,L.registerEditorAction)(M),(0,L.registerEditorAction)(R),(0,L.registerEditorAction)(N),(0,L.registerEditorAction)(O),(0,L.registerEditorAction)(F),(0,L.registerEditorAction)(W);const z=L.EditorCommand.bindToContribution(S.get);(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.CloseFindWidgetCommand,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.closeFindWidget(),kbOpts:{weight:105,kbExpr:g.ContextKeyExpr.and(f.EditorContextKeys.focus,g.ContextKeyExpr.not("isComposing")),primary:9,secondary:[1033]}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ToggleCaseSensitiveCommand,precondition:void 0,handler:q=>q.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:b.ToggleCaseSensitiveKeybinding.primary,mac:b.ToggleCaseSensitiveKeybinding.mac,win:b.ToggleCaseSensitiveKeybinding.win,linux:b.ToggleCaseSensitiveKeybinding.linux}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ToggleWholeWordCommand,precondition:void 0,handler:q=>q.toggleWholeWords(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:b.ToggleWholeWordKeybinding.primary,mac:b.ToggleWholeWordKeybinding.mac,win:b.ToggleWholeWordKeybinding.win,linux:b.ToggleWholeWordKeybinding.linux}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ToggleRegexCommand,precondition:void 0,handler:q=>q.toggleRegex(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:b.ToggleRegexKeybinding.primary,mac:b.ToggleRegexKeybinding.mac,win:b.ToggleRegexKeybinding.win,linux:b.ToggleRegexKeybinding.linux}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ToggleSearchScopeCommand,precondition:void 0,handler:q=>q.toggleSearchScope(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:b.ToggleSearchScopeKeybinding.primary,mac:b.ToggleSearchScopeKeybinding.mac,win:b.ToggleSearchScopeKeybinding.win,linux:b.ToggleSearchScopeKeybinding.linux}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.TogglePreserveCaseCommand,precondition:void 0,handler:q=>q.togglePreserveCase(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:b.TogglePreserveCaseKeybinding.primary,mac:b.TogglePreserveCaseKeybinding.mac,win:b.TogglePreserveCaseKeybinding.win,linux:b.TogglePreserveCaseKeybinding.linux}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ReplaceOneAction,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.replace(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:3094}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ReplaceOneAction,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.replace(),kbOpts:{weight:105,kbExpr:g.ContextKeyExpr.and(f.EditorContextKeys.focus,b.CONTEXT_REPLACE_INPUT_FOCUSED),primary:3}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ReplaceAllAction,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.replaceAll(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:2563}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.ReplaceAllAction,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.replaceAll(),kbOpts:{weight:105,kbExpr:g.ContextKeyExpr.and(f.EditorContextKeys.focus,b.CONTEXT_REPLACE_INPUT_FOCUSED),primary:void 0,mac:{primary:2051}}})),(0,L.registerEditorCommand)(new z({id:b.FIND_IDS.SelectAllMatchesAction,precondition:b.CONTEXT_FIND_WIDGET_VISIBLE,handler:q=>q.selectAllMatches(),kbOpts:{weight:105,kbExpr:f.EditorContextKeys.focus,primary:515}}))}),define(oe[419],re([1,0,26,36,3,32,71,25,30]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingDecorationProvider=e.foldingManualExpandedIcon=e.foldingManualCollapsedIcon=e.foldingCollapsedIcon=e.foldingExpandedIcon=void 0;const b=(0,L.registerColor)("editor.foldBackground",{light:(0,L.transparent)(L.editorSelectionBackground,.3),dark:(0,L.transparent)(L.editorSelectionBackground,.3),hcDark:null,hcLight:null},(0,E.localize)(777,"Background color behind folded ranges. The color must not be opaque so as not to hide underlying decorations."),!0);(0,L.registerColor)("editor.foldPlaceholderForeground",{light:"#808080",dark:"#808080",hcDark:null,hcLight:null},(0,E.localize)(778,"Color of the collapsed text after the first line of a folded range.")),(0,L.registerColor)("editorGutter.foldingControlForeground",L.iconForeground,(0,E.localize)(779,"Color of the folding control in the editor gutter.")),e.foldingExpandedIcon=(0,y.registerIcon)("folding-expanded",c.Codicon.chevronDown,(0,E.localize)(780,"Icon for expanded ranges in the editor glyph margin.")),e.foldingCollapsedIcon=(0,y.registerIcon)("folding-collapsed",c.Codicon.chevronRight,(0,E.localize)(781,"Icon for collapsed ranges in the editor glyph margin.")),e.foldingManualCollapsedIcon=(0,y.registerIcon)("folding-manual-collapsed",e.foldingCollapsedIcon,(0,E.localize)(782,"Icon for manually collapsed ranges in the editor glyph margin.")),e.foldingManualExpandedIcon=(0,y.registerIcon)("folding-manual-expanded",e.foldingExpandedIcon,(0,E.localize)(783,"Icon for manually expanded ranges in the editor glyph margin."));const p={color:(0,f.themeColorFromId)(b),position:1},n=(0,E.localize)(784,"Click to expand the range."),s=(0,E.localize)(785,"Click to collapse the range.");class t{static{this.COLLAPSED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:n,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingCollapsedIcon)})}static{this.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:p,isWholeLine:!0,linesDecorationsTooltip:n,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingCollapsedIcon)})}static{this.MANUALLY_COLLAPSED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:n,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingManualCollapsedIcon)})}static{this.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:p,isWholeLine:!0,linesDecorationsTooltip:n,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingManualCollapsedIcon)})}static{this.NO_CONTROLS_COLLAPSED_RANGE_DECORATION=k.ModelDecorationOptions.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,linesDecorationsTooltip:n})}static{this.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION=k.ModelDecorationOptions.register({description:"folding-no-controls-range-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",minimap:p,isWholeLine:!0,linesDecorationsTooltip:n})}static{this.EXPANDED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+_.ThemeIcon.asClassName(e.foldingExpandedIcon),linesDecorationsTooltip:s})}static{this.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingExpandedIcon),linesDecorationsTooltip:s})}static{this.MANUALLY_EXPANDED_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+_.ThemeIcon.asClassName(e.foldingManualExpandedIcon),linesDecorationsTooltip:s})}static{this.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=k.ModelDecorationOptions.register({description:"folding-manually-expanded-auto-hide-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:_.ThemeIcon.asClassName(e.foldingManualExpandedIcon),linesDecorationsTooltip:s})}static{this.NO_CONTROLS_EXPANDED_RANGE_DECORATION=k.ModelDecorationOptions.register({description:"folding-no-controls-range-decoration",stickiness:0,isWholeLine:!0})}static{this.HIDDEN_RANGE_DECORATION=k.ModelDecorationOptions.register({description:"folding-hidden-range-decoration",stickiness:1})}constructor(o){this.editor=o,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(o,g,u){return g?t.HIDDEN_RANGE_DECORATION:this.showFoldingControls==="never"?o?this.showFoldingHighlights?t.NO_CONTROLS_COLLAPSED_HIGHLIGHTED_RANGE_DECORATION:t.NO_CONTROLS_COLLAPSED_RANGE_DECORATION:t.NO_CONTROLS_EXPANDED_RANGE_DECORATION:o?u?this.showFoldingHighlights?t.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:t.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?t.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:t.COLLAPSED_VISUAL_DECORATION:this.showFoldingControls==="mouseover"?u?t.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:t.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:u?t.MANUALLY_EXPANDED_VISUAL_DECORATION:t.EXPANDED_VISUAL_DECORATION}changeDecorations(o){return this.editor.changeDecorations(o)}removeDecorations(o){this.editor.removeDecorations(o)}}e.FoldingDecorationProvider=t}),define(oe[287],re([1,0,14,18,8,72,2,11,19,142,15,20,28,34,349,634,350,3,12,419,204,351,50,79,59,17,6,24,22,44,27,520]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T){"use strict";var M;Object.defineProperty(e,"__esModule",{value:!0}),e.RangesLimitReporter=e.FoldingController=void 0;const A=new l.RawContextKey("foldingEnabled",!1);let R=class extends y.Disposable{static{M=this}static{this.ID="editor.contrib.folding"}static get(J){return J.getContribution(M.ID)}static getFoldingRangeProviders(J,B){const j=J.foldingRangeProvider.ordered(B);return M._foldingRangeSelector?.(j,B)??j}constructor(J,B,j,V,$,Z){super(),this.contextKeyService=B,this.languageConfigurationService=j,this.languageFeaturesService=Z,this.localToDispose=this._register(new y.DisposableStore),this.editor=J,this._foldingLimitReporter=new N(J);const ee=this.editor.getOptions();this._isEnabled=ee.get(43),this._useFoldingProviders=ee.get(44)!=="indentation",this._unfoldOnClickAfterEndOfLine=ee.get(48),this._restoringViewState=!1,this._currentModelHasFoldedImports=!1,this._foldingImportsByDefault=ee.get(46),this.updateDebounceInfo=$.for(Z.foldingRangeProvider,"Folding",{min:200}),this.foldingModel=null,this.hiddenRangeModel=null,this.rangeProvider=null,this.foldingRegionPromise=null,this.foldingModelPromise=null,this.updateScheduler=null,this.cursorChangedScheduler=null,this.mouseDownInfo=null,this.foldingDecorationProvider=new a.FoldingDecorationProvider(J),this.foldingDecorationProvider.showFoldingControls=ee.get(111),this.foldingDecorationProvider.showFoldingHighlights=ee.get(45),this.foldingEnabled=A.bindTo(this.contextKeyService),this.foldingEnabled.set(this._isEnabled),this._register(this.editor.onDidChangeModel(()=>this.onModelChanged())),this._register(this.editor.onDidChangeConfiguration(le=>{if(le.hasChanged(43)&&(this._isEnabled=this.editor.getOptions().get(43),this.foldingEnabled.set(this._isEnabled),this.onModelChanged()),le.hasChanged(47)&&this.onModelChanged(),le.hasChanged(111)||le.hasChanged(45)){const de=this.editor.getOptions();this.foldingDecorationProvider.showFoldingControls=de.get(111),this.foldingDecorationProvider.showFoldingHighlights=de.get(45),this.triggerFoldingModelChanged()}le.hasChanged(44)&&(this._useFoldingProviders=this.editor.getOptions().get(44)!=="indentation",this.onFoldingStrategyChanged()),le.hasChanged(48)&&(this._unfoldOnClickAfterEndOfLine=this.editor.getOptions().get(48)),le.hasChanged(46)&&(this._foldingImportsByDefault=this.editor.getOptions().get(46))})),this.onModelChanged()}saveViewState(){const J=this.editor.getModel();if(!J||!this._isEnabled||J.isTooLargeForTokenization())return{};if(this.foldingModel){const B=this.foldingModel.getMemento(),j=this.rangeProvider?this.rangeProvider.id:void 0;return{collapsedRegions:B,lineCount:J.getLineCount(),provider:j,foldedImports:this._currentModelHasFoldedImports}}}restoreViewState(J){const B=this.editor.getModel();if(!(!B||!this._isEnabled||B.isTooLargeForTokenization()||!this.hiddenRangeModel)&&J&&(this._currentModelHasFoldedImports=!!J.foldedImports,J.collapsedRegions&&J.collapsedRegions.length>0&&this.foldingModel)){this._restoringViewState=!0;try{this.foldingModel.applyMemento(J.collapsedRegions)}finally{this._restoringViewState=!1}}}onModelChanged(){this.localToDispose.clear();const J=this.editor.getModel();!this._isEnabled||!J||J.isTooLargeForTokenization()||(this._currentModelHasFoldedImports=!1,this.foldingModel=new i.FoldingModel(J,this.foldingDecorationProvider),this.localToDispose.add(this.foldingModel),this.hiddenRangeModel=new o.HiddenRangeModel(this.foldingModel),this.localToDispose.add(this.hiddenRangeModel),this.localToDispose.add(this.hiddenRangeModel.onDidChange(B=>this.onHiddenRangesChanges(B))),this.updateScheduler=new c.Delayer(this.updateDebounceInfo.get(J)),this.cursorChangedScheduler=new c.RunOnceScheduler(()=>this.revealCursor(),200),this.localToDispose.add(this.cursorChangedScheduler),this.localToDispose.add(this.languageFeaturesService.foldingRangeProvider.onDidChange(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelLanguageConfiguration(()=>this.onFoldingStrategyChanged())),this.localToDispose.add(this.editor.onDidChangeModelContent(B=>this.onDidChangeModelContent(B))),this.localToDispose.add(this.editor.onDidChangeCursorPosition(()=>this.onCursorPositionChanged())),this.localToDispose.add(this.editor.onMouseDown(B=>this.onEditorMouseDown(B))),this.localToDispose.add(this.editor.onMouseUp(B=>this.onEditorMouseUp(B))),this.localToDispose.add({dispose:()=>{this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.updateScheduler?.cancel(),this.updateScheduler=null,this.foldingModel=null,this.foldingModelPromise=null,this.hiddenRangeModel=null,this.cursorChangedScheduler=null,this.rangeProvider?.dispose(),this.rangeProvider=null}}),this.triggerFoldingModelChanged())}onFoldingStrategyChanged(){this.rangeProvider?.dispose(),this.rangeProvider=null,this.triggerFoldingModelChanged()}getRangeProvider(J){if(this.rangeProvider)return this.rangeProvider;const B=new g.IndentRangeProvider(J,this.languageConfigurationService,this._foldingLimitReporter);if(this.rangeProvider=B,this._useFoldingProviders&&this.foldingModel){const j=M.getFoldingRangeProviders(this.languageFeaturesService,J);j.length>0&&(this.rangeProvider=new d.SyntaxRangeProvider(J,j,()=>this.triggerFoldingModelChanged(),this._foldingLimitReporter,B))}return this.rangeProvider}getFoldingModel(){return this.foldingModelPromise}onDidChangeModelContent(J){this.hiddenRangeModel?.notifyChangeModelContent(J),this.triggerFoldingModelChanged()}triggerFoldingModelChanged(){this.updateScheduler&&(this.foldingRegionPromise&&(this.foldingRegionPromise.cancel(),this.foldingRegionPromise=null),this.foldingModelPromise=this.updateScheduler.trigger(()=>{const J=this.foldingModel;if(!J)return null;const B=new v.StopWatch,j=this.getRangeProvider(J.textModel),V=this.foldingRegionPromise=(0,c.createCancelablePromise)($=>j.compute($));return V.then($=>{if($&&V===this.foldingRegionPromise){let Z;if(this._foldingImportsByDefault&&!this._currentModelHasFoldedImports){const me=$.setCollapsedAllOfType(s.FoldingRangeKind.Imports.value,!0);me&&(Z=b.StableEditorScrollState.capture(this.editor),this._currentModelHasFoldedImports=me)}const ee=this.editor.getSelections(),le=ee?ee.map(me=>me.startLineNumber):[];J.update($,le),Z?.restore(this.editor);const de=this.updateDebounceInfo.update(J.textModel,B.elapsed());this.updateScheduler&&(this.updateScheduler.defaultDelay=de)}return J})}).then(void 0,J=>((0,E.onUnexpectedError)(J),null)))}onHiddenRangesChanges(J){if(this.hiddenRangeModel&&J.length&&!this._restoringViewState){const B=this.editor.getSelections();B&&this.hiddenRangeModel.adjustSelections(B)&&this.editor.setSelections(B)}this.editor.setHiddenAreas(J,this)}onCursorPositionChanged(){this.hiddenRangeModel&&this.hiddenRangeModel.hasRanges()&&this.cursorChangedScheduler.schedule()}revealCursor(){const J=this.getFoldingModel();J&&J.then(B=>{if(B){const j=this.editor.getSelections();if(j&&j.length>0){const V=[];for(const $ of j){const Z=$.selectionStartLineNumber;this.hiddenRangeModel&&this.hiddenRangeModel.isHidden(Z)&&V.push(...B.getAllRegionsAtLine(Z,ee=>ee.isCollapsed&&Z>ee.startLineNumber))}V.length&&(B.toggleCollapseState(V),this.reveal(j[0].getPosition()))}}}).then(void 0,E.onUnexpectedError)}onEditorMouseDown(J){if(this.mouseDownInfo=null,!this.hiddenRangeModel||!J.target||!J.target.range||!J.event.leftButton&&!J.event.middleButton)return;const B=J.target.range;let j=!1;switch(J.target.type){case 4:{const V=J.target.detail,$=J.target.element.offsetLeft;if(V.offsetX-$<4)return;j=!0;break}case 7:{if(this._unfoldOnClickAfterEndOfLine&&this.hiddenRangeModel.hasRanges()&&!J.target.detail.isAfterLines)break;return}case 6:{if(this.hiddenRangeModel.hasRanges()){const V=this.editor.getModel();if(V&&B.startColumn===V.getLineMaxColumn(B.startLineNumber))break}return}default:return}this.mouseDownInfo={lineNumber:B.startLineNumber,iconClicked:j}}onEditorMouseUp(J){const B=this.foldingModel;if(!B||!this.mouseDownInfo||!J.target)return;const j=this.mouseDownInfo.lineNumber,V=this.mouseDownInfo.iconClicked,$=J.target.range;if(!$||$.startLineNumber!==j)return;if(V){if(J.target.type!==4)return}else{const ee=this.editor.getModel();if(!ee||$.startColumn!==ee.getLineMaxColumn(j))return}const Z=B.getRegionAtLine(j);if(Z&&Z.startLineNumber===j){const ee=Z.isCollapsed;if(V||ee){const le=J.event.altKey;let de=[];if(le){const me=ve=>!ve.containedBy(Z)&&!Z.containedBy(ve),be=B.getRegionsInside(null,me);for(const ve of be)ve.isCollapsed&&de.push(ve);de.length===0&&(de=be)}else{const me=J.event.middleButton||J.event.shiftKey;if(me)for(const be of B.getRegionsInside(Z))be.isCollapsed===ee&&de.push(be);(ee||!me||de.length===0)&&de.push(Z)}B.toggleCollapseState(de),this.reveal({lineNumber:j,column:1})}}}reveal(J){this.editor.revealPositionInCenterIfOutsideViewport(J,0)}};e.FoldingController=R,e.FoldingController=R=M=De([he(1,l.IContextKeyService),he(2,t.ILanguageConfigurationService),he(3,m.INotificationService),he(4,h.ILanguageFeatureDebounceService),he(5,C.ILanguageFeaturesService)],R);class N{constructor(J){this.editor=J,this._onDidChange=new w.Emitter,this._computed=0,this._limited=!1}get limit(){return this.editor.getOptions().get(47)}update(J,B){(J!==this._computed||B!==this._limited)&&(this._computed=J,this._limited=B,this._onDidChange.fire())}}e.RangesLimitReporter=N;class O extends p.EditorAction{runEditorCommand(J,B,j){const V=J.get(t.ILanguageConfigurationService),$=R.get(B);if(!$)return;const Z=$.getFoldingModel();if(Z)return this.reportTelemetry(J,B),Z.then(ee=>{if(ee){this.invoke($,ee,B,j,V);const le=B.getSelection();le&&$.reveal(le.getStartPosition())}})}getSelectedLines(J){const B=J.getSelections();return B?B.map(j=>j.startLineNumber):[]}getLineNumbers(J,B){return J&&J.selectionLines?J.selectionLines.map(j=>j+1):this.getSelectedLines(B)}run(J,B){}}function x(ne){if(!_.isUndefined(ne)){if(!_.isObject(ne))return!1;const J=ne;if(!_.isUndefined(J.levels)&&!_.isNumber(J.levels)||!_.isUndefined(J.direction)&&!_.isString(J.direction)||!_.isUndefined(J.selectionLines)&&(!Array.isArray(J.selectionLines)||!J.selectionLines.every(_.isNumber)))return!1}return!0}class F extends O{constructor(){super({id:"editor.unfold",label:u.localize(786,"Unfold"),alias:"Unfold",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:3166,mac:{primary:2654},weight:100},metadata:{description:"Unfold the content in the editor",args:[{name:"Unfold editor argument",description:`Property-value pairs that can be passed through this argument:
						* 'levels': Number of levels to unfold. If not set, defaults to 1.
						* 'direction': If 'up', unfold given number of levels up otherwise unfolds down.
						* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the unfold action to. If not set, the active selection(s) will be used.
						`,constraint:x,schema:{type:"object",properties:{levels:{type:"number",default:1},direction:{type:"string",enum:["up","down"],default:"down"},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(J,B,j,V){const $=V&&V.levels||1,Z=this.getLineNumbers(V,j);V&&V.direction==="up"?(0,i.setCollapseStateLevelsUp)(B,!1,$,Z):(0,i.setCollapseStateLevelsDown)(B,!1,$,Z)}}class W extends O{constructor(){super({id:"editor.unfoldRecursively",label:u.localize(787,"Unfold Recursively"),alias:"Unfold Recursively",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2142),weight:100}})}invoke(J,B,j,V){(0,i.setCollapseStateLevelsDown)(B,!1,Number.MAX_VALUE,this.getSelectedLines(j))}}class z extends O{constructor(){super({id:"editor.fold",label:u.localize(788,"Fold"),alias:"Fold",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:3164,mac:{primary:2652},weight:100},metadata:{description:"Fold the content in the editor",args:[{name:"Fold editor argument",description:`Property-value pairs that can be passed through this argument:
							* 'levels': Number of levels to fold.
							* 'direction': If 'up', folds given number of levels up otherwise folds down.
							* 'selectionLines': Array of the start lines (0-based) of the editor selections to apply the fold action to. If not set, the active selection(s) will be used.
							If no levels or direction is set, folds the region at the locations or if already collapsed, the first uncollapsed parent instead.
						`,constraint:x,schema:{type:"object",properties:{levels:{type:"number"},direction:{type:"string",enum:["up","down"]},selectionLines:{type:"array",items:{type:"number"}}}}}]}})}invoke(J,B,j,V){const $=this.getLineNumbers(V,j),Z=V&&V.levels,ee=V&&V.direction;typeof Z!="number"&&typeof ee!="string"?(0,i.setCollapseStateUp)(B,!0,$):ee==="up"?(0,i.setCollapseStateLevelsUp)(B,!0,Z||1,$):(0,i.setCollapseStateLevelsDown)(B,!0,Z||1,$)}}class q extends O{constructor(){super({id:"editor.toggleFold",label:u.localize(789,"Toggle Fold"),alias:"Toggle Fold",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2090),weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);(0,i.toggleCollapseState)(B,1,V)}}class H extends O{constructor(){super({id:"editor.foldRecursively",label:u.localize(790,"Fold Recursively"),alias:"Fold Recursively",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2140),weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);(0,i.setCollapseStateLevelsDown)(B,!0,Number.MAX_VALUE,V)}}class K extends O{constructor(){super({id:"editor.toggleFoldRecursively",label:u.localize(791,"Toggle Fold Recursively"),alias:"Toggle Fold Recursively",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,3114),weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);(0,i.toggleCollapseState)(B,Number.MAX_VALUE,V)}}class U extends O{constructor(){super({id:"editor.foldAllBlockComments",label:u.localize(792,"Fold All Block Comments"),alias:"Fold All Block Comments",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2138),weight:100}})}invoke(J,B,j,V,$){if(B.regions.hasTypes())(0,i.setCollapseStateForType)(B,s.FoldingRangeKind.Comment.value,!0);else{const Z=j.getModel();if(!Z)return;const ee=$.getLanguageConfiguration(Z.getLanguageId()).comments;if(ee&&ee.blockCommentStartToken){const le=new RegExp("^\\s*"+(0,f.escapeRegExpCharacters)(ee.blockCommentStartToken));(0,i.setCollapseStateForMatchingLines)(B,le,!0)}}}}class Y extends O{constructor(){super({id:"editor.foldAllMarkerRegions",label:u.localize(793,"Fold All Regions"),alias:"Fold All Regions",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2077),weight:100}})}invoke(J,B,j,V,$){if(B.regions.hasTypes())(0,i.setCollapseStateForType)(B,s.FoldingRangeKind.Region.value,!0);else{const Z=j.getModel();if(!Z)return;const ee=$.getLanguageConfiguration(Z.getLanguageId()).foldingRules;if(ee&&ee.markers&&ee.markers.start){const le=new RegExp(ee.markers.start);(0,i.setCollapseStateForMatchingLines)(B,le,!0)}}}}class Q extends O{constructor(){super({id:"editor.unfoldAllMarkerRegions",label:u.localize(794,"Unfold All Regions"),alias:"Unfold All Regions",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2078),weight:100}})}invoke(J,B,j,V,$){if(B.regions.hasTypes())(0,i.setCollapseStateForType)(B,s.FoldingRangeKind.Region.value,!1);else{const Z=j.getModel();if(!Z)return;const ee=$.getLanguageConfiguration(Z.getLanguageId()).foldingRules;if(ee&&ee.markers&&ee.markers.start){const le=new RegExp(ee.markers.start);(0,i.setCollapseStateForMatchingLines)(B,le,!1)}}}}class X extends O{constructor(){super({id:"editor.foldAllExcept",label:u.localize(795,"Fold All Except Selected"),alias:"Fold All Except Selected",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2136),weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);(0,i.setCollapseStateForRest)(B,!0,V)}}class G extends O{constructor(){super({id:"editor.unfoldAllExcept",label:u.localize(796,"Unfold All Except Selected"),alias:"Unfold All Except Selected",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2134),weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);(0,i.setCollapseStateForRest)(B,!1,V)}}class P extends O{constructor(){super({id:"editor.foldAll",label:u.localize(797,"Fold All"),alias:"Fold All",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2069),weight:100}})}invoke(J,B,j){(0,i.setCollapseStateLevelsDown)(B,!0)}}class te extends O{constructor(){super({id:"editor.unfoldAll",label:u.localize(798,"Unfold All"),alias:"Unfold All",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2088),weight:100}})}invoke(J,B,j){(0,i.setCollapseStateLevelsDown)(B,!1)}}class se extends O{static{this.ID_PREFIX="editor.foldLevel"}static{this.ID=J=>se.ID_PREFIX+J}getFoldingLevel(){return parseInt(this.id.substr(se.ID_PREFIX.length))}invoke(J,B,j){(0,i.setCollapseStateAtLevel)(B,this.getFoldingLevel(),!0,this.getSelectedLines(j))}}class ue extends O{constructor(){super({id:"editor.gotoParentFold",label:u.localize(799,"Go to Parent Fold"),alias:"Go to Parent Fold",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);if(V.length>0){const $=(0,i.getParentFoldLine)(V[0],B);$!==null&&j.setSelection({startLineNumber:$,startColumn:1,endLineNumber:$,endColumn:1})}}}class ge extends O{constructor(){super({id:"editor.gotoPreviousFold",label:u.localize(800,"Go to Previous Folding Range"),alias:"Go to Previous Folding Range",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);if(V.length>0){const $=(0,i.getPreviousFoldLine)(V[0],B);$!==null&&j.setSelection({startLineNumber:$,startColumn:1,endLineNumber:$,endColumn:1})}}}class pe extends O{constructor(){super({id:"editor.gotoNextFold",label:u.localize(801,"Go to Next Folding Range"),alias:"Go to Next Folding Range",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,weight:100}})}invoke(J,B,j){const V=this.getSelectedLines(j);if(V.length>0){const $=(0,i.getNextFoldLine)(V[0],B);$!==null&&j.setSelection({startLineNumber:$,startColumn:1,endLineNumber:$,endColumn:1})}}}class ce extends O{constructor(){super({id:"editor.createFoldingRangeFromSelection",label:u.localize(802,"Create Folding Range from Selection"),alias:"Create Folding Range from Selection",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2135),weight:100}})}invoke(J,B,j){const V=[],$=j.getSelections();if($){for(const Z of $){let ee=Z.endLineNumber;Z.endColumn===1&&--ee,ee>Z.startLineNumber&&(V.push({startLineNumber:Z.startLineNumber,endLineNumber:ee,type:void 0,isCollapsed:!0,source:1}),j.setSelection({startLineNumber:Z.startLineNumber,startColumn:1,endLineNumber:Z.startLineNumber,endColumn:1}))}if(V.length>0){V.sort((ee,le)=>ee.startLineNumber-le.startLineNumber);const Z=r.FoldingRegions.sanitizeAndMerge(B.regions,V,j.getModel()?.getLineCount());B.updatePost(r.FoldingRegions.fromFoldRanges(Z))}}}}class ie extends O{constructor(){super({id:"editor.removeManualFoldingRanges",label:u.localize(803,"Remove Manual Folding Ranges"),alias:"Remove Manual Folding Ranges",precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2137),weight:100}})}invoke(J,B,j){const V=j.getSelections();if(V){const $=[];for(const Z of V){const{startLineNumber:ee,endLineNumber:le}=Z;$.push(le>=ee?{startLineNumber:ee,endLineNumber:le}:{endLineNumber:le,startLineNumber:ee})}B.removeManualRanges($),J.triggerFoldingModelChanged()}}}(0,p.registerEditorContribution)(R.ID,R,0),(0,p.registerEditorAction)(F),(0,p.registerEditorAction)(W),(0,p.registerEditorAction)(z),(0,p.registerEditorAction)(H),(0,p.registerEditorAction)(K),(0,p.registerEditorAction)(P),(0,p.registerEditorAction)(te),(0,p.registerEditorAction)(U),(0,p.registerEditorAction)(Y),(0,p.registerEditorAction)(Q),(0,p.registerEditorAction)(X),(0,p.registerEditorAction)(G),(0,p.registerEditorAction)(q),(0,p.registerEditorAction)(ue),(0,p.registerEditorAction)(ge),(0,p.registerEditorAction)(pe),(0,p.registerEditorAction)(ce),(0,p.registerEditorAction)(ie);for(let ne=1;ne<=7;ne++)(0,p.registerInstantiatedEditorAction)(new se({id:se.ID(ne),label:u.localize(804,"Fold Level {0}",ne),alias:`Fold Level ${ne}`,precondition:A,kbOpts:{kbExpr:n.EditorContextKeys.editorTextFocus,primary:(0,L.KeyChord)(2089,2048|21+ne),weight:100}}));S.CommandsRegistry.registerCommand("_executeFoldingRangeProvider",async function(ne,...J){const[B]=J;if(!(B instanceof D.URI))throw(0,E.illegalArgument)();const j=ne.get(C.ILanguageFeaturesService),V=ne.get(I.IModelService).getModel(B);if(!V)throw(0,E.illegalArgument)();const $=ne.get(T.IConfigurationService);if(!$.getValue("editor.folding",{resource:B}))return[];const Z=ne.get(t.ILanguageConfigurationService),ee=$.getValue("editor.foldingStrategy",{resource:B}),le={get limit(){return $.getValue("editor.foldingMaximumRegions",{resource:B})},update:(Le,Se)=>{}},de=new g.IndentRangeProvider(V,Z,le);let me=de;if(ee!=="indentation"){const Le=R.getFoldingRangeProviders(j,V);Le.length&&(me=new d.SyntaxRangeProvider(V,Le,()=>{},le,de))}const be=await me.compute(k.CancellationToken.None),ve=[];try{if(be)for(let Le=0;Le<be.length;Le++){const Se=be.getType(Le);ve.push({start:be.getStartLineNumber(Le),end:be.getEndLineNumber(Le),kind:Se?s.FoldingRangeKind.fromValue(Se):void 0})}return ve}finally{me.dispose()}})}),define(oe[818],re([1,0,14,8,122,15,4,23,20,36,116,3,640,524]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0});let i=class{static{t=this}static{this.ID="editor.contrib.inPlaceReplaceController"}static get(l){return l.getContribution(t.ID)}static{this.DECORATION=b.ModelDecorationOptions.register({description:"in-place-replace",className:"valueSetReplacement"})}constructor(l,a){this.editor=l,this.editorWorkerService=a,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(l,a){this.currentRequest?.cancel();const r=this.editor.getSelection(),d=this.editor.getModel();if(!d||!r)return;let m=r;if(m.startLineNumber!==m.endLineNumber)return;const h=new E.EditorState(this.editor,5),v=d.uri;return this.editorWorkerService.canNavigateValueSet(v)?(this.currentRequest=(0,c.createCancelablePromise)(C=>this.editorWorkerService.navigateValueSet(v,m,a)),this.currentRequest.then(C=>{if(!C||!C.range||!C.value||!h.validate(this.editor))return;const w=y.Range.lift(C.range);let S=C.range;const D=C.value.length-(m.endColumn-m.startColumn);S={startLineNumber:S.startLineNumber,startColumn:S.startColumn,endLineNumber:S.endLineNumber,endColumn:S.startColumn+C.value.length},D>1&&(m=new f.Selection(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn+D-1));const I=new s.InPlaceReplaceCommand(w,m,C.value);this.editor.pushUndoStop(),this.editor.executeCommand(l,I),this.editor.pushUndoStop(),this.decorations.set([{range:S,options:t.DECORATION}]),this.decorationRemover?.cancel(),this.decorationRemover=(0,c.timeout)(350),this.decorationRemover.then(()=>this.decorations.clear()).catch(k.onUnexpectedError)}).catch(k.onUnexpectedError)):Promise.resolve(void 0)}};i=t=De([he(1,p.IEditorWorkerService)],i);class o extends L.EditorAction{constructor(){super({id:"editor.action.inPlaceReplace.up",label:n.localize(659,"Replace with Previous Value"),alias:"Replace with Previous Value",precondition:_.EditorContextKeys.writable,kbOpts:{kbExpr:_.EditorContextKeys.editorTextFocus,primary:3159,weight:100}})}run(l,a){const r=i.get(a);return r?r.run(this.id,!1):Promise.resolve(void 0)}}class g extends L.EditorAction{constructor(){super({id:"editor.action.inPlaceReplace.down",label:n.localize(660,"Replace with Next Value"),alias:"Replace with Next Value",precondition:_.EditorContextKeys.writable,kbOpts:{kbExpr:_.EditorContextKeys.editorTextFocus,primary:3161,weight:100}})}run(l,a){const r=i.get(a);return r?r.run(this.id,!0):Promise.resolve(void 0)}}(0,L.registerEditorContribution)(i.ID,i,4),(0,L.registerEditorAction)(o),(0,L.registerEditorAction)(g)}),define(oe[819],re([1,0,2,21,9,4,42,40,149,207,138,527]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GhostTextWidget=e.INLINE_EDIT_DESCRIPTION=void 0,e.INLINE_EDIT_DESCRIPTION="inline-edit";let n=class extends c.Disposable{constructor(t,i,o){super(),this.editor=t,this.model=i,this.languageService=o,this.isDisposed=(0,k.observableValue)(this,!1),this.currentTextModel=(0,k.observableFromEvent)(this,this.editor.onDidChangeModel,()=>this.editor.getModel()),this.uiState=(0,k.derived)(this,g=>{if(this.isDisposed.read(g))return;const u=this.currentTextModel.read(g);if(u!==this.model.targetTextModel.read(g))return;const l=this.model.ghostText.read(g);if(!l)return;let a=this.model.range?.read(g);a&&a.startLineNumber===a.endLineNumber&&a.startColumn===a.endColumn&&(a=void 0);const r=(a?a.startLineNumber===a.endLineNumber:!0)&&l.parts.length===1&&l.parts[0].lines.length===1,d=l.parts.length===1&&l.parts[0].lines.every(T=>T.length===0),m=[],h=[];function v(T,M){if(h.length>0){const A=h[h.length-1];M&&A.decorations.push(new _.LineDecoration(A.content.length+1,A.content.length+1+T[0].length,M,0)),A.content+=T[0],T=T.slice(1)}for(const A of T)h.push({content:A,decorations:M?[new _.LineDecoration(1,A.length+1,M,0)]:[]})}const C=u.getLineContent(l.lineNumber);let w,S=0;if(!d&&(r||!a)){for(const T of l.parts){let M=T.lines;a&&!r&&(v(M,e.INLINE_EDIT_DESCRIPTION),M=[]),w===void 0?(m.push({column:T.column,text:M[0],preview:T.preview}),M=M.slice(1)):v([C.substring(S,T.column-1)],void 0),M.length>0&&(v(M,e.INLINE_EDIT_DESCRIPTION),w===void 0&&T.column<=C.length&&(w=T.column)),S=T.column-1}w!==void 0&&v([C.substring(S)],void 0)}const D=w!==void 0?new b.ColumnRange(w,C.length+1):void 0,I=r||!a?l.lineNumber:a.endLineNumber-1;return{inlineTexts:m,additionalLines:h,hiddenRange:D,lineNumber:I,additionalReservedLineCount:this.model.minReservedLineCount.read(g),targetTextModel:u,range:a,isSingleLine:r,isPureRemove:d}}),this.decorations=(0,k.derived)(this,g=>{const u=this.uiState.read(g);if(!u)return[];const l=[];if(u.hiddenRange&&l.push({range:u.hiddenRange.toRange(u.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),u.range){const a=[];if(u.isSingleLine)a.push(u.range);else if(!u.isPureRemove){const r=u.range.endLineNumber-u.range.startLineNumber;for(let d=0;d<r;d++){const m=u.range.startLineNumber+d,h=u.targetTextModel.getLineFirstNonWhitespaceColumn(m),v=u.targetTextModel.getLineLastNonWhitespaceColumn(m),C=new L.Range(m,h,m,v);a.push(C)}}for(const r of a)l.push({range:r,options:p.diffDeleteDecoration})}if(u.range&&!u.isSingleLine&&u.isPureRemove){const a=new L.Range(u.range.startLineNumber,1,u.range.endLineNumber-1,1);l.push({range:a,options:p.diffLineDeleteDecorationBackgroundWithIndicator})}for(const a of u.inlineTexts)l.push({range:L.Range.fromPositions(new E.Position(u.lineNumber,a.column)),options:{description:e.INLINE_EDIT_DESCRIPTION,after:{content:a.text,inlineClassName:a.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:f.InjectedTextCursorStops.Left},showIfCollapsed:!0}});return l}),this._register((0,c.toDisposable)(()=>{this.isDisposed.set(!0,void 0)})),this._register((0,b.applyObservableDecorations)(this.editor,this.decorations))}};e.GhostTextWidget=n,e.GhostTextWidget=n=De([he(2,y.ILanguageService)],n)}),define(oe[820],re([1,0,5,18,2,21,65,22,113,125,213,138,9,4,70,36,44,7,529]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";var l,a;Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditSideBySideWidget=void 0;function*r(v,C,w=1){C===void 0&&([C,v]=[v,0]);for(let S=v;S<C;S+=w)yield S}function d(v){const C=v[0].match(/^\s*/)?.[0]??"",w=C.length;return{text:v.map(S=>S.replace(new RegExp("^"+C),"")),shift:w}}let m=class extends E.Disposable{static{l=this}static{this._modelId=0}static _createUniqueUri(){return f.URI.from({scheme:"inline-edit-widget",path:new Date().toString()+String(l._modelId++)})}constructor(C,w,S,D,I){super(),this._editor=C,this._model=w,this._instantiationService=S,this._diffProviderFactoryService=D,this._modelService=I,this._position=(0,L.derived)(this,T=>{const M=this._model.read(T);if(!M||M.text.length===0||M.range.startLineNumber===M.range.endLineNumber&&!(M.range.startColumn===M.range.endColumn&&M.range.startColumn===1))return null;const A=this._editor.getModel();if(!A)return null;const R=Array.from(r(M.range.startLineNumber,M.range.endLineNumber+1)),N=R.map(z=>A.getLineLastNonWhitespaceColumn(z)),O=Math.max(...N),x=R[N.indexOf(O)],F=new s.Position(x,O);return{top:M.range.startLineNumber,left:F}}),this._text=(0,L.derived)(this,T=>{const M=this._model.read(T);if(!M)return{text:"",shift:0};const A=d(M.text.split(`
`));return{text:A.text.join(`
`),shift:A.shift}}),this._originalModel=(0,y.derivedDisposable)(()=>this._modelService.createModel("",null,l._createUniqueUri())).keepObserved(this._store),this._modifiedModel=(0,y.derivedDisposable)(()=>this._modelService.createModel("",null,l._createUniqueUri())).keepObserved(this._store),this._diff=(0,L.derived)(this,T=>this._diffPromise.read(T)?.promiseResult.read(T)?.data),this._diffPromise=(0,L.derived)(this,T=>{const M=this._model.read(T);if(!M)return;const A=this._editor.getModel();if(!A)return;const R=d(A.getValueInRange(M.range).split(`
`)).text.join(`
`),N=d(M.text.split(`
`)).text.join(`
`);this._originalModel.get().setValue(R),this._modifiedModel.get().setValue(N);const O=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return L.ObservablePromise.fromFn(async()=>{const x=await O.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},k.CancellationToken.None);if(!x.identical)return x.changes})}),this._register((0,L.autorunWithStore)((T,M)=>{if(!this._model.read(T)||this._position.get()===null)return;const R=M.add(this._instantiationService.createInstance(h,this._editor,this._position,this._text.map(N=>N.text),this._text.map(N=>N.shift),this._diff));C.addOverlayWidget(R),M.add((0,E.toDisposable)(()=>C.removeOverlayWidget(R)))}))}};e.InlineEditSideBySideWidget=m,e.InlineEditSideBySideWidget=m=l=De([he(2,u.IInstantiationService),he(3,p.IDiffProviderFactoryService),he(4,g.IModelService)],m);let h=class extends E.Disposable{static{a=this}static{this.id=0}constructor(C,w,S,D,I,T){super(),this._editor=C,this._position=w,this._text=S,this._shift=D,this._diff=I,this._instantiationService=T,this.id=`InlineEditSideBySideContentWidget${a.id++}`,this.allowEditorOverflow=!1,this._nodes=(0,c.$)("div.inlineEditSideBySide",void 0),this._scrollChanged=(0,L.observableSignalFromEvent)("editor.onDidScrollChange",this._editor.onDidScrollChange),this._previewEditor=this._register(this._instantiationService.createInstance(b.EmbeddedCodeEditorWidget,this._nodes,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,scrollbar:{vertical:"hidden",horizontal:"hidden",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},readOnly:!0,wordWrap:"off",wordWrapOverride1:"off",wordWrapOverride2:"off",wrappingIndent:"none",wrappingStrategy:void 0},{contributions:[],isSimpleWidget:!0},this._editor)),this._previewEditorObs=(0,_.observableCodeEditor)(this._previewEditor),this._editorObs=(0,_.observableCodeEditor)(this._editor),this._previewTextModel=this._register(this._instantiationService.createInstance(o.TextModel,"",this._editor.getModel()?.getLanguageId()??i.PLAINTEXT_LANGUAGE_ID,o.TextModel.DEFAULT_CREATION_OPTIONS,null)),this._setText=(0,L.derived)(M=>{const A=this._text.read(M);A&&this._previewTextModel.setValue(A)}).recomputeInitiallyAndOnChange(this._store),this._decorations=(0,L.derived)(this,M=>{this._setText.read(M);const A=this._position.read(M);if(!A)return{org:[],mod:[]};const R=this._diff.read(M);if(!R)return{org:[],mod:[]};const N=[],O=[];if(R.length===1&&R[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return{org:[],mod:[]};const x=this._shift.get(),F=W=>new t.Range(W.startLineNumber+A.top-1,W.startColumn+x,W.endLineNumber+A.top-1,W.endColumn+x);for(const W of R)if(W.original.isEmpty||N.push({range:F(W.original.toInclusiveRange()),options:n.diffLineDeleteDecorationBackgroundWithIndicator}),W.modified.isEmpty||O.push({range:W.modified.toInclusiveRange(),options:n.diffLineAddDecorationBackgroundWithIndicator}),W.modified.isEmpty||W.original.isEmpty)W.original.isEmpty||N.push({range:F(W.original.toInclusiveRange()),options:n.diffWholeLineDeleteDecoration}),W.modified.isEmpty||O.push({range:W.modified.toInclusiveRange(),options:n.diffWholeLineAddDecoration});else for(const z of W.innerChanges||[])W.original.contains(z.originalRange.startLineNumber)&&N.push({range:F(z.originalRange),options:z.originalRange.isEmpty()?n.diffDeleteDecorationEmpty:n.diffDeleteDecoration}),W.modified.contains(z.modifiedRange.startLineNumber)&&O.push({range:z.modifiedRange,options:z.modifiedRange.isEmpty()?n.diffAddDecorationEmpty:n.diffAddDecoration});return{org:N,mod:O}}),this._originalDecorations=(0,L.derived)(this,M=>this._decorations.read(M).org),this._modifiedDecorations=(0,L.derived)(this,M=>this._decorations.read(M).mod),this._previewEditor.setModel(this._previewTextModel),this._register(this._editorObs.setDecorations(this._originalDecorations)),this._register(this._previewEditorObs.setDecorations(this._modifiedDecorations)),this._register((0,L.autorun)(M=>{const A=this._previewEditorObs.contentWidth.read(M),R=this._text.read(M).split(`
`).length-1,N=this._editor.getOption(67)*R;A<=0||this._previewEditor.layout({height:N,width:A})})),this._register((0,L.autorun)(M=>{this._position.read(M),this._editor.layoutOverlayWidget(this)})),this._register((0,L.autorun)(M=>{this._scrollChanged.read(M),this._position.read(M)&&this._editor.layoutOverlayWidget(this)}))}getId(){return this.id}getDomNode(){return this._nodes}getPosition(){const C=this._position.get();if(!C)return null;const w=this._editor.getLayoutInfo(),S=this._editor.getScrolledVisiblePosition(new s.Position(C.top,1));if(!S)return null;const D=S.top-1,I=this._editor.getOffsetForColumn(C.left.lineNumber,C.left.column);return{preference:{left:w.contentLeft+I+10,top:D}}}};h=a=De([he(5,u.IInstantiationService)],h)}),define(oe[420],re([1,0,2,21,76,9,4,819,12,7,28,17,18,206,24,791,5,27,8,65,820,213,44]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m){"use strict";var h;Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditController=void 0;let v=class extends c.Disposable{static{h=this}static{this.ID="editor.contrib.inlineEditController"}static{this.inlineEditVisibleKey="inlineEditVisible"}static{this.inlineEditVisibleContext=new _.RawContextKey(this.inlineEditVisibleKey,!1)}static{this.cursorAtInlineEditKey="cursorAtInlineEdit"}static{this.cursorAtInlineEditContext=new _.RawContextKey(this.cursorAtInlineEditKey,!1)}static get(S){return S.getContribution(h.ID)}constructor(S,D,I,T,M,A,R,N){super(),this.editor=S,this.instantiationService=D,this.contextKeyService=I,this.languageFeaturesService=T,this._commandService=M,this._configurationService=A,this._diffProviderFactoryService=R,this._modelService=N,this._isVisibleContext=h.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=h.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=(0,k.observableValue)(this,void 0),this._currentWidget=(0,a.derivedDisposable)(this._currentEdit,q=>{const H=this._currentEdit.read(q);if(!H)return;const K=H.range.endLineNumber,U=H.range.endColumn,Y=H.text.endsWith(`
`)&&!(H.range.startLineNumber===H.range.endLineNumber&&H.range.startColumn===H.range.endColumn)?H.text.slice(0,-1):H.text,Q=new t.GhostText(K,[new t.GhostTextPart(U,Y,!1)]),X=H.range.startLineNumber===H.range.endLineNumber&&Q.parts.length===1&&Q.parts[0].lines.length===1,G=H.text==="";return!X&&!G?void 0:this.instantiationService.createInstance(f.GhostTextWidget,this.editor,{ghostText:(0,k.constObservable)(Q),minReservedLineCount:(0,k.constObservable)(0),targetTextModel:(0,k.constObservable)(this.editor.getModel()??void 0),range:(0,k.constObservable)(H.range)})}),this._isAccepting=(0,k.observableValue)(this,!1),this._enabled=(0,k.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).enabled),this._fontFamily=(0,k.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(63).fontFamily);const O=(0,k.observableSignalFromEvent)("InlineEditController.modelContentChangedSignal",S.onDidChangeModelContent);this._register((0,k.autorun)(q=>{this._enabled.read(q)&&(O.read(q),!this._isAccepting.read(q)&&this.getInlineEdit(S,!0))}));const x=(0,k.observableFromEvent)(this,S.onDidChangeCursorPosition,()=>S.getPosition());this._register((0,k.autorun)(q=>{if(!this._enabled.read(q))return;const H=x.read(q);H&&this.checkCursorPosition(H)})),this._register((0,k.autorun)(q=>{const H=this._currentEdit.read(q);if(this._isCursorAtInlineEditContext.set(!1),!H){this._isVisibleContext.set(!1);return}this._isVisibleContext.set(!0);const K=S.getPosition();K&&this.checkCursorPosition(K)}));const F=(0,k.observableSignalFromEvent)("InlineEditController.editorBlurSignal",S.onDidBlurEditorWidget);this._register((0,k.autorun)(async q=>{this._enabled.read(q)&&(F.read(q),!(this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||S.getOption(63).keepOnBlur)&&(this._currentRequestCts?.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))}));const W=(0,k.observableSignalFromEvent)("InlineEditController.editorFocusSignal",S.onDidFocusEditorText);this._register((0,k.autorun)(q=>{this._enabled.read(q)&&(W.read(q),this.getInlineEdit(S,!0))}));const z=this._register((0,g.createStyleSheet2)());this._register((0,k.autorun)(q=>{const H=this._fontFamily.read(q);z.setStyle(H===""||H==="default"?"":`
.monaco-editor .inline-edit-decoration,
.monaco-editor .inline-edit-decoration-preview,
.monaco-editor .inline-edit {
	font-family: ${H};
}`)})),this._register(new o.InlineEditHintsWidget(this.editor,this._currentWidget,this.instantiationService)),this._register(new r.InlineEditSideBySideWidget(this.editor,this._currentEdit,this.instantiationService,this._diffProviderFactoryService,this._modelService))}checkCursorPosition(S){if(!this._currentEdit){this._isCursorAtInlineEditContext.set(!1);return}const D=this._currentEdit.get();if(!D){this._isCursorAtInlineEditContext.set(!1);return}this._isCursorAtInlineEditContext.set(y.Range.containsPosition(D.range,S))}validateInlineEdit(S,D){if(D.text.includes(`
`)&&D.range.startLineNumber!==D.range.endLineNumber&&D.range.startColumn!==D.range.endColumn){if(D.range.startColumn!==1)return!1;const T=D.range.endLineNumber,M=D.range.endColumn,A=S.getModel()?.getLineLength(T)??0;if(M!==A+1)return!1}return!0}async fetchInlineEdit(S,D){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const I=S.getModel();if(!I)return;const T=I.getVersionId(),M=this.languageFeaturesService.inlineEditProvider.all(I);if(M.length===0)return;const A=M[0];this._currentRequestCts=new s.CancellationTokenSource;const R=this._currentRequestCts.token,N=D?p.InlineEditTriggerKind.Automatic:p.InlineEditTriggerKind.Invoke;if(D&&await C(50,R),R.isCancellationRequested||I.isDisposed()||I.getVersionId()!==T)return;const x=await A.provideInlineEdit(I,{triggerKind:N},R);if(x&&!(R.isCancellationRequested||I.isDisposed()||I.getVersionId()!==T)&&this.validateInlineEdit(S,x))return x}async getInlineEdit(S,D){this._isCursorAtInlineEditContext.set(!1),await this.clear();const I=await this.fetchInlineEdit(S,D);I&&this._currentEdit.set(I,void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){this._isAccepting.set(!0,void 0);const S=this._currentEdit.get();if(!S)return;let D=S.text;S.text.startsWith(`
`)&&(D=S.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[E.EditOperation.replace(y.Range.lift(S.range),D)]),S.accepted&&await this._commandService.executeCommand(S.accepted.id,...S.accepted.arguments||[]).then(void 0,l.onUnexpectedExternalError),this.freeEdit(S),(0,k.transaction)(I=>{this._currentEdit.set(void 0,I),this._isAccepting.set(!1,I)})}jumpToCurrent(){this._jumpBackPosition=this.editor.getSelection()?.getStartPosition();const S=this._currentEdit.get();if(!S)return;const D=L.Position.lift({lineNumber:S.range.startLineNumber,column:S.range.startColumn});this.editor.setPosition(D),this.editor.revealPositionInCenterIfOutsideViewport(D)}async clear(S=!0){const D=this._currentEdit.get();D&&D?.rejected&&S&&await this._commandService.executeCommand(D.rejected.id,...D.rejected.arguments||[]).then(void 0,l.onUnexpectedExternalError),D&&this.freeEdit(D),this._currentEdit.set(void 0,void 0)}freeEdit(S){const D=this.editor.getModel();if(!D)return;const I=this.languageFeaturesService.inlineEditProvider.all(D);I.length!==0&&I[0].freeInlineEdit(S)}};e.InlineEditController=v,e.InlineEditController=v=h=De([he(1,b.IInstantiationService),he(2,_.IContextKeyService),he(3,n.ILanguageFeaturesService),he(4,i.ICommandService),he(5,u.IConfigurationService),he(6,d.IDiffProviderFactoryService),he(7,m.IModelService)],v);function C(w,S){return new Promise(D=>{let I;const T=setTimeout(()=>{I&&I.dispose(),D()},w);S&&(I=S.onCancellationRequested(()=>{clearTimeout(T),I&&I.dispose(),D()}))})}}),define(oe[821],re([1,0,15,20,642,420,29,12]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RejectInlineEdit=e.JumpBackInlineEdit=e.JumpToInlineEdit=e.TriggerInlineEdit=e.AcceptInlineEdit=void 0;class _ extends c.EditorAction{constructor(){super({id:E.inlineEditAcceptId,label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:f.ContextKeyExpr.and(k.EditorContextKeys.writable,L.InlineEditController.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:f.ContextKeyExpr.and(k.EditorContextKeys.writable,L.InlineEditController.inlineEditVisibleContext,L.InlineEditController.cursorAtInlineEditContext)}],menuOpts:[{menuId:y.MenuId.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(i,o){await L.InlineEditController.get(o)?.accept()}}e.AcceptInlineEdit=_;class b extends c.EditorAction{constructor(){const i=f.ContextKeyExpr.and(k.EditorContextKeys.writable,f.ContextKeyExpr.not(L.InlineEditController.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:i,kbOpts:{weight:101,primary:2646,kbExpr:i}})}async run(i,o){L.InlineEditController.get(o)?.trigger()}}e.TriggerInlineEdit=b;class p extends c.EditorAction{constructor(){const i=f.ContextKeyExpr.and(k.EditorContextKeys.writable,L.InlineEditController.inlineEditVisibleContext,f.ContextKeyExpr.not(L.InlineEditController.cursorAtInlineEditKey));super({id:E.inlineEditJumpToId,label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:i,kbOpts:{weight:101,primary:2646,kbExpr:i},menuOpts:[{menuId:y.MenuId.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:i}]})}async run(i,o){L.InlineEditController.get(o)?.jumpToCurrent()}}e.JumpToInlineEdit=p;class n extends c.EditorAction{constructor(){const i=f.ContextKeyExpr.and(k.EditorContextKeys.writable,L.InlineEditController.cursorAtInlineEditContext);super({id:E.inlineEditJumpBackId,label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:i,kbOpts:{weight:110,primary:2646,kbExpr:i},menuOpts:[{menuId:y.MenuId.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:i}]})}async run(i,o){L.InlineEditController.get(o)?.jumpBack()}}e.JumpBackInlineEdit=n;class s extends c.EditorAction{constructor(){const i=f.ContextKeyExpr.and(k.EditorContextKeys.writable,L.InlineEditController.inlineEditVisibleContext);super({id:E.inlineEditRejectId,label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:i,kbOpts:{weight:100,primary:9,kbExpr:i},menuOpts:[{menuId:y.MenuId.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(i,o){await L.InlineEditController.get(o)?.clear()}}e.RejectInlineEdit=s}),define(oe[822],re([1,0,15,821,420]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorAction)(k.AcceptInlineEdit),(0,c.registerEditorAction)(k.RejectInlineEdit),(0,c.registerEditorAction)(k.JumpToInlineEdit),(0,c.registerEditorAction)(k.JumpBackInlineEdit),(0,c.registerEditorAction)(k.TriggerInlineEdit),(0,c.registerEditorContribution)(E.InlineEditController.ID,E.InlineEditController,3)}),define(oe[288],re([1,0,5,14,26,2,11,30,4,36,7,531]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineProgressManager=void 0;const n=b.ModelDecorationOptions.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:y.noBreakWhitespace,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class s extends L.Disposable{static{this.baseId="editor.widget.inlineProgressWidget"}constructor(o,g,u,l,a){super(),this.typeId=o,this.editor=g,this.range=u,this.delegate=a,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(l),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(o){this.domNode=c.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=o;const g=c.$("span.icon");this.domNode.append(g),g.classList.add(...f.ThemeIcon.asClassNameArray(E.Codicon.loading),"codicon-modifier-spin");const u=()=>{const l=this.editor.getOption(67);this.domNode.style.height=`${l}px`,this.domNode.style.width=`${Math.ceil(.8*l)}px`};u(),this._register(this.editor.onDidChangeConfiguration(l=>{(l.hasChanged(52)||l.hasChanged(67))&&u()})),this._register(c.addDisposableListener(this.domNode,c.EventType.CLICK,l=>{this.delegate.cancel()}))}getId(){return s.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}let t=class extends L.Disposable{constructor(o,g,u){super(),this.id=o,this._editor=g,this._instantiationService=u,this._showDelay=500,this._showPromise=this._register(new L.MutableDisposable),this._currentWidget=this._register(new L.MutableDisposable),this._operationIdPool=0,this._currentDecorations=g.createDecorationsCollection()}dispose(){super.dispose(),this._currentDecorations.clear()}async showWhile(o,g,u,l,a){const r=this._operationIdPool++;this._currentOperation=r,this.clear(),this._showPromise.value=(0,k.disposableTimeout)(()=>{const d=_.Range.fromPositions(o);this._currentDecorations.set([{range:d,options:n}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(s,this.id,this._editor,d,g,l))},a??this._showDelay);try{return await u}finally{this._currentOperation===r&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};e.InlineProgressManager=t,e.InlineProgressManager=t=De([he(2,p.IInstantiationService)],t)}),define(oe[823],re([1,0,13,14,195,90,2,394,4,17,342,672,122,288,3,27,12,393,7,266,390]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";var d;Object.defineProperty(e,"__esModule",{value:!0}),e.DropIntoEditorController=e.dropWidgetVisibleCtx=e.changeDropTypeCommandId=e.defaultProviderConfig=void 0,e.defaultProviderConfig="editor.experimental.dropIntoEditor.defaultProvider",e.changeDropTypeCommandId="editor.changeDropType",e.dropWidgetVisibleCtx=new g.RawContextKey("dropWidgetVisible",!1,(0,i.localize)(851,"Whether the drop widget is showing"));let m=class extends y.Disposable{static{d=this}static{this.ID="editor.contrib.dropIntoEditorController"}static get(v){return v.getContribution(d.ID)}constructor(v,C,w,S,D){super(),this._configService=w,this._languageFeaturesService=S,this._treeViewsDragAndDropService=D,this.treeItemsTransfer=u.LocalSelectionTransfer.getInstance(),this._dropProgressManager=this._register(C.createInstance(t.InlineProgressManager,"dropIntoEditor",v)),this._postDropWidgetManager=this._register(C.createInstance(r.PostEditWidgetManager,"dropIntoEditor",v,e.dropWidgetVisibleCtx,{id:e.changeDropTypeCommandId,label:(0,i.localize)(852,"Show drop options...")})),this._register(v.onDropIntoEditor(I=>this.onDropIntoEditor(v,I.position,I.event)))}clearWidgets(){this._postDropWidgetManager.clear()}changeDropType(){this._postDropWidgetManager.tryShowSelector()}async onDropIntoEditor(v,C,w){if(!w.dataTransfer||!v.hasModel())return;this._currentOperation?.cancel(),v.focus(),v.setPosition(C);const S=(0,k.createCancelablePromise)(async D=>{const I=new y.DisposableStore,T=I.add(new s.EditorStateCancellationTokenSource(v,1,void 0,D));try{const M=await this.extractDataTransferData(w);if(M.size===0||T.token.isCancellationRequested)return;const A=v.getModel();if(!A)return;const R=this._languageFeaturesService.documentDropEditProvider.ordered(A).filter(O=>O.dropMimeTypes?O.dropMimeTypes.some(x=>M.matches(x)):!0),N=I.add(await this.getDropEdits(R,A,C,M,T));if(T.token.isCancellationRequested)return;if(N.edits.length){const O=this.getInitialActiveEditIndex(A,N.edits),x=v.getOption(36).showDropSelector==="afterDrop";await this._postDropWidgetManager.applyEditAndShowIfNeeded([_.Range.fromPositions(C)],{activeEditIndex:O,allEdits:N.edits},x,async F=>F,D)}}finally{I.dispose(),this._currentOperation===S&&(this._currentOperation=void 0)}});this._dropProgressManager.showWhile(C,(0,i.localize)(853,"Running drop handlers. Click to cancel"),S,{cancel:()=>S.cancel()}),this._currentOperation=S}async getDropEdits(v,C,w,S,D){const I=new y.DisposableStore,T=await(0,k.raceCancellation)(Promise.all(v.map(async A=>{try{const R=await A.provideDocumentDropEdits(C,w,S,D.token);return R&&I.add(R),R?.edits.map(N=>({...N,providerId:A.id}))}catch(R){console.error(R)}})),D.token),M=(0,c.coalesce)(T??[]).flat();return{edits:(0,a.sortEditsByYieldTo)(M),dispose:()=>I.dispose()}}getInitialActiveEditIndex(v,C){const w=this._configService.getValue(e.defaultProviderConfig,{resource:v.uri});for(const[S,D]of Object.entries(w)){const I=new L.HierarchicalKind(D),T=C.findIndex(M=>I.value===M.providerId&&M.handledMimeType&&(0,E.matchesMimeType)(S,[M.handledMimeType]));if(T>=0)return T}return 0}async extractDataTransferData(v){if(!v.dataTransfer)return new E.VSDataTransfer;const C=(0,f.toExternalVSDataTransfer)(v.dataTransfer);if(this.treeItemsTransfer.hasData(p.DraggedTreeItemsIdentifier.prototype)){const w=this.treeItemsTransfer.getData(p.DraggedTreeItemsIdentifier.prototype);if(Array.isArray(w))for(const S of w){const D=await this._treeViewsDragAndDropService.removeDragOperationTransfer(S.identifier);if(D)for(const[I,T]of D)C.replace(I,T)}}return C}};e.DropIntoEditorController=m,e.DropIntoEditorController=m=d=De([he(1,l.IInstantiationService),he(2,o.IConfigurationService),he(3,b.ILanguageFeaturesService),he(4,n.ITreeViewsDnDService)],m)}),define(oe[824],re([1,0,13,14,18,33,8,6,2,11,22,15,35,9,4,20,36,34,3,12,17,32,79,59,532]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h){"use strict";var v;Object.defineProperty(e,"__esModule",{value:!0}),e.editorLinkedEditingBackground=e.LinkedEditingAction=e.LinkedEditingContribution=e.CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE=void 0,e.CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE=new a.RawContextKey("LinkedEditingInputVisible",!1);const C="linked-editing-decoration";let w=class extends _.Disposable{static{v=this}static{this.ID="editor.contrib.linkedEditing"}static{this.DECORATION=g.ModelDecorationOptions.register({description:"linked-editing",stickiness:0,className:C})}static get(M){return M.getContribution(v.ID)}constructor(M,A,R,N,O){super(),this.languageConfigurationService=N,this._syncRangesToken=0,this._localToDispose=this._register(new _.DisposableStore),this._editor=M,this._providers=R.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=e.CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE.bindTo(A),this._debounceInformation=O.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new _.DisposableStore),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel(()=>this.reinitialize(!0))),this._register(this._editor.onDidChangeConfiguration(x=>{(x.hasChanged(70)||x.hasChanged(94))&&this.reinitialize(!1)})),this._register(this._providers.onDidChange(()=>this.reinitialize(!1))),this._register(this._editor.onDidChangeModelLanguage(()=>this.reinitialize(!0))),this.reinitialize(!0)}reinitialize(M){const A=this._editor.getModel(),R=A!==null&&(this._editor.getOption(70)||this._editor.getOption(94))&&this._providers.has(A);if(R===this._enabled&&!M||(this._enabled=R,this.clearRanges(),this._localToDispose.clear(),!R||A===null))return;this._localToDispose.add(f.Event.runAndSubscribe(A.onDidChangeLanguageConfiguration,()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(A.getLanguageId()).getWordDefinition()}));const N=new k.Delayer(this._debounceInformation.get(A)),O=()=>{this._rangeUpdateTriggerPromise=N.trigger(()=>this.updateRanges(),this._debounceDuration??this._debounceInformation.get(A))},x=new k.Delayer(0),F=W=>{this._rangeSyncTriggerPromise=x.trigger(()=>this._syncRanges(W))};this._localToDispose.add(this._editor.onDidChangeCursorPosition(()=>{O()})),this._localToDispose.add(this._editor.onDidChangeModelContent(W=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const z=this._currentDecorations.getRange(0);if(z&&W.changes.every(q=>z.intersectRanges(q.range))){F(this._syncRangesToken);return}}O()})),this._localToDispose.add({dispose:()=>{N.dispose(),x.dispose()}}),this.updateRanges()}_syncRanges(M){if(!this._editor.hasModel()||M!==this._syncRangesToken||this._currentDecorations.length===0)return;const A=this._editor.getModel(),R=this._currentDecorations.getRange(0);if(!R||R.startLineNumber!==R.endLineNumber)return this.clearRanges();const N=A.getValueInRange(R);if(this._currentWordPattern){const x=N.match(this._currentWordPattern);if((x?x[0].length:0)!==N.length)return this.clearRanges()}const O=[];for(let x=1,F=this._currentDecorations.length;x<F;x++){const W=this._currentDecorations.getRange(x);if(W)if(W.startLineNumber!==W.endLineNumber)O.push({range:W,text:N});else{let z=A.getValueInRange(W),q=N,H=W.startColumn,K=W.endColumn;const U=b.commonPrefixLength(z,q);H+=U,z=z.substr(U),q=q.substr(U);const Y=b.commonSuffixLength(z,q);K-=Y,z=z.substr(0,z.length-Y),q=q.substr(0,q.length-Y),(H!==K||q.length!==0)&&O.push({range:new i.Range(W.startLineNumber,H,W.endLineNumber,K),text:q})}}if(O.length!==0)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const x=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",O),this._editor._getViewModel().setPrevEditOperationType(x)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(M=!1){if(!this._editor.hasModel()){this.clearRanges();return}const A=this._editor.getPosition();if(!this._enabled&&!M||this._editor.getSelections().length>1){this.clearRanges();return}const R=this._editor.getModel(),N=R.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===N){if(A.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const x=this._currentDecorations.getRange(0);if(x&&x.containsPosition(A))return}}this.clearRanges(),this._currentRequestPosition=A,this._currentRequestModelVersion=N;const O=this._currentRequestCts=new E.CancellationTokenSource;try{const x=new h.StopWatch(!1),F=await I(this._providers,R,A,O.token);if(this._debounceInformation.update(R,x.elapsed()),O!==this._currentRequestCts||(this._currentRequestCts=null,N!==R.getVersionId()))return;let W=[];F?.ranges&&(W=F.ranges),this._currentWordPattern=F?.wordPattern||this._languageWordPattern;let z=!1;for(let H=0,K=W.length;H<K;H++)if(i.Range.containsPosition(W[H],A)){if(z=!0,H!==0){const U=W[H];W.splice(H,1),W.unshift(U)}break}if(!z){this.clearRanges();return}const q=W.map(H=>({range:H,options:v.DECORATION}));this._visibleContextKey.set(!0),this._currentDecorations.set(q),this._syncRangesToken++}catch(x){(0,y.isCancellationError)(x)||(0,y.onUnexpectedError)(x),(this._currentRequestCts===O||!this._currentRequestCts)&&this.clearRanges()}}};e.LinkedEditingContribution=w,e.LinkedEditingContribution=w=v=De([he(1,a.IContextKeyService),he(2,r.ILanguageFeaturesService),he(3,u.ILanguageConfigurationService),he(4,m.ILanguageFeatureDebounceService)],w);class S extends n.EditorAction{constructor(){super({id:"editor.action.linkedEditing",label:l.localize(568,"Start Linked Editing"),alias:"Start Linked Editing",precondition:a.ContextKeyExpr.and(o.EditorContextKeys.writable,o.EditorContextKeys.hasRenameProvider),kbOpts:{kbExpr:o.EditorContextKeys.editorTextFocus,primary:3132,weight:100}})}runCommand(M,A){const R=M.get(s.ICodeEditorService),[N,O]=Array.isArray(A)&&A||[void 0,void 0];return p.URI.isUri(N)&&t.Position.isIPosition(O)?R.openCodeEditor({resource:N},R.getActiveCodeEditor()).then(x=>{x&&(x.setPosition(O),x.invokeWithinContext(F=>(this.reportTelemetry(F,x),this.run(F,x))))},y.onUnexpectedError):super.runCommand(M,A)}run(M,A){const R=w.get(A);return R?Promise.resolve(R.updateRanges(!0)):Promise.resolve()}}e.LinkedEditingAction=S;const D=n.EditorCommand.bindToContribution(w.get);(0,n.registerEditorCommand)(new D({id:"cancelLinkedEditingInput",precondition:e.CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE,handler:T=>T.clearRanges(),kbOpts:{kbExpr:o.EditorContextKeys.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));function I(T,M,A,R){const N=T.ordered(M);return(0,k.first)(N.map(O=>async()=>{try{return await O.provideLinkedEditingRanges(M,A,R)}catch(x){(0,y.onUnexpectedExternalError)(x);return}}),O=>!!O&&c.isNonEmptyArray(O?.ranges))}e.editorLinkedEditingBackground=(0,d.registerColor)("editor.linkedEditingBackground",{dark:L.Color.fromHex("#f00").transparent(.3),light:L.Color.fromHex("#f00").transparent(.3),hcDark:L.Color.fromHex("#f00").transparent(.3),hcLight:L.Color.white},l.localize(569,"Background color when the editor auto renames on type.")),(0,n.registerModelAndPositionCommand)("_executeLinkedEditingProvider",(T,M,A)=>{const{linkedEditingRangeProvider:R}=T.get(r.ILanguageFeaturesService);return I(R,M,A,E.CancellationToken.None)}),(0,n.registerEditorContribution)(w.ID,w,1),(0,n.registerEditorAction)(S)}),define(oe[825],re([1,0,14,18,8,55,2,47,16,51,59,22,15,36,79,17,205,674,3,50,62,533]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r){"use strict";var d;Object.defineProperty(e,"__esModule",{value:!0}),e.LinkDetector=void 0;let m=class extends y.Disposable{static{d=this}static{this.ID="editor.linkDetector"}static get(D){return D.getContribution(d.ID)}constructor(D,I,T,M,A){super(),this.editor=D,this.openerService=I,this.notificationService=T,this.languageFeaturesService=M,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=A.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new c.RunOnceScheduler(()=>this.computeLinksNow(),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const R=this._register(new g.ClickLinkGesture(D));this._register(R.onMouseMoveOrRelevantKeyDown(([N,O])=>{this._onEditorMouseMove(N,O)})),this._register(R.onExecute(N=>{this.onEditorMouseUp(N)})),this._register(R.onCancel(N=>{this.cleanUpActiveLinkDecoration()})),this._register(D.onDidChangeConfiguration(N=>{N.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))})),this._register(D.onDidChangeModelContent(N=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))})),this._register(D.onDidChangeModel(N=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)})),this._register(D.onDidChangeModelLanguage(N=>{this.stop(),this.computeLinks.schedule(0)})),this._register(this.providers.onDidChange(N=>{this.stop(),this.computeLinks.schedule(0)})),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const D=this.editor.getModel();if(!D.isTooLargeForSyncing()&&this.providers.has(D)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,c.createCancelablePromise)(I=>(0,u.getLinks)(this.providers,D,I));try{const I=new p.StopWatch(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(D,I.elapsed()),D.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(I){(0,E.onUnexpectedError)(I)}finally{this.computePromise=null}}}updateDecorations(D){const I=this.editor.getOption(78)==="altKey",T=[],M=Object.keys(this.currentOccurrences);for(const R of M){const N=this.currentOccurrences[R];T.push(N.decorationId)}const A=[];if(D)for(const R of D)A.push(v.decoration(R,I));this.editor.changeDecorations(R=>{const N=R.deltaDecorations(T,A);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let O=0,x=N.length;O<x;O++){const F=new v(D[O],N[O]);this.currentOccurrences[F.decorationId]=F}})}_onEditorMouseMove(D,I){const T=this.editor.getOption(78)==="altKey";if(this.isEnabled(D,I)){this.cleanUpActiveLinkDecoration();const M=this.getLinkOccurrence(D.target.position);M&&this.editor.changeDecorations(A=>{M.activate(A,T),this.activeLinkDecorationId=M.decorationId})}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const D=this.editor.getOption(78)==="altKey";if(this.activeLinkDecorationId){const I=this.currentOccurrences[this.activeLinkDecorationId];I&&this.editor.changeDecorations(T=>{I.deactivate(T,D)}),this.activeLinkDecorationId=null}}onEditorMouseUp(D){if(!this.isEnabled(D))return;const I=this.getLinkOccurrence(D.target.position);I&&this.openLinkOccurrence(I,D.hasSideBySideModifier,!0)}openLinkOccurrence(D,I,T=!1){if(!this.openerService)return;const{link:M}=D;M.resolve(k.CancellationToken.None).then(A=>{if(typeof A=="string"&&this.editor.hasModel()){const R=this.editor.getModel().uri;if(R.scheme===f.Schemas.file&&A.startsWith(`${f.Schemas.file}:`)){const N=n.URI.parse(A);if(N.scheme===f.Schemas.file){const O=b.originalFSPath(N);let x=null;O.startsWith("/./")||O.startsWith("\\.\\")?x=`.${O.substr(1)}`:(O.startsWith("//./")||O.startsWith("\\\\.\\"))&&(x=`.${O.substr(2)}`),x&&(A=b.joinPath(R,x))}}}return this.openerService.open(A,{openToSide:I,fromUserGesture:T,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})},A=>{const R=A instanceof Error?A.message:A;R==="invalid"?this.notificationService.warn(l.localize(558,"Failed to open this link because it is not well-formed: {0}",M.url.toString())):R==="missing"?this.notificationService.warn(l.localize(559,"Failed to open this link because its target is missing.")):(0,E.onUnexpectedError)(A)})}getLinkOccurrence(D){if(!this.editor.hasModel()||!D)return null;const I=this.editor.getModel().getDecorationsInRange({startLineNumber:D.lineNumber,startColumn:D.column,endLineNumber:D.lineNumber,endColumn:D.column},0,!0);for(const T of I){const M=this.currentOccurrences[T.id];if(M)return M}return null}isEnabled(D,I){return!!(D.target.type===6&&(D.hasTriggerModifier||I&&I.keyCodeIsTriggerKey))}stop(){this.computeLinks.cancel(),this.activeLinksList&&(this.activeLinksList?.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};e.LinkDetector=m,e.LinkDetector=m=d=De([he(1,r.IOpenerService),he(2,a.INotificationService),he(3,o.ILanguageFeaturesService),he(4,i.ILanguageFeatureDebounceService)],m);const h={general:t.ModelDecorationOptions.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),active:t.ModelDecorationOptions.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"})};class v{static decoration(D,I){return{range:D.range,options:v._getOptions(D,I,!1)}}static _getOptions(D,I,T){const M={...T?h.active:h.general};return M.hoverMessage=C(D,I),M}constructor(D,I){this.link=D,this.decorationId=I}activate(D,I){D.changeDecorationOptions(this.decorationId,v._getOptions(this.link,I,!0))}deactivate(D,I){D.changeDecorationOptions(this.decorationId,v._getOptions(this.link,I,!1))}}function C(S,D){const I=S.url&&/^command:/i.test(S.url.toString()),T=S.tooltip?S.tooltip:I?l.localize(560,"Execute command"):l.localize(561,"Follow link"),M=D?_.isMacintosh?l.localize(562,"cmd + click"):l.localize(563,"ctrl + click"):_.isMacintosh?l.localize(564,"option + click"):l.localize(565,"alt + click");if(S.url){let A="";if(/^command:/i.test(S.url.toString())){const N=S.url.toString().match(/^command:([^?#]+)/);if(N){const O=N[1];A=l.localize(566,"Execute command {0}",O)}}return new L.MarkdownString("",!0).appendLink(S.url.toString(!0).replace(/ /g,"%20"),T,A).appendMarkdown(` (${M})`)}else return new L.MarkdownString().appendText(`${T} (${M})`)}class w extends s.EditorAction{constructor(){super({id:"editor.action.openLink",label:l.localize(567,"Open Link"),alias:"Open Link",precondition:void 0})}run(D,I){const T=m.get(I);if(!T||!I.hasModel())return;const M=I.getSelections();for(const A of M){const R=T.getLinkOccurrence(A.getEndPosition());R&&T.openLinkOccurrence(R,!1)}}}(0,s.registerEditorContribution)(m.ID,m,1),(0,s.registerEditorAction)(w)}),define(oe[826],re([1,0,14,2,15,34,36,116]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SectionHeaderDetector=void 0;let _=class extends k.Disposable{static{this.ID="editor.sectionHeaderDetector"}constructor(n,s,t){super(),this.editor=n,this.languageConfigurationService=s,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(n.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(n.onDidChangeModel(i=>{this.currentOccurrences={},this.options=this.createOptions(n.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(n.onDidChangeModelLanguage(i=>{this.currentOccurrences={},this.options=this.createOptions(n.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)})),this._register(s.onDidChange(i=>{const o=this.editor.getModel()?.getLanguageId();o&&i.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(n.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(n.onDidChangeConfiguration(i=>{this.options&&!i.hasChanged(73)||(this.options=this.createOptions(n.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))})),this._register(this.editor.onDidChangeModelContent(i=>{this.computeSectionHeaders.schedule()})),this._register(n.onDidChangeModelTokens(i=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)})),this.computeSectionHeaders=this._register(new c.RunOnceScheduler(()=>{this.findSectionHeaders()},250)),this.computeSectionHeaders.schedule(0)}createOptions(n){if(!n||!this.editor.hasModel())return;const s=this.editor.getModel().getLanguageId();if(!s)return;const t=this.languageConfigurationService.getLanguageConfiguration(s).comments,i=this.languageConfigurationService.getLanguageConfiguration(s).foldingRules;if(!(!t&&!i?.markers))return{foldingRules:i,findMarkSectionHeaders:n.showMarkSectionHeaders,findRegionSectionHeaders:n.showRegionSectionHeaders}}findSectionHeaders(){if(!this.editor.hasModel()||!this.options?.findMarkSectionHeaders&&!this.options?.findRegionSectionHeaders)return;const n=this.editor.getModel();if(n.isDisposed()||n.isTooLargeForSyncing())return;const s=n.getVersionId();this.editorWorkerService.findSectionHeaders(n.uri,this.options).then(t=>{n.isDisposed()||n.getVersionId()!==s||this.updateDecorations(t)})}updateDecorations(n){const s=this.editor.getModel();s&&(n=n.filter(o=>{if(!o.shouldBeInComments)return!0;const g=s.validateRange(o.range),u=s.tokenization.getLineTokens(g.startLineNumber),l=u.findTokenIndexAtOffset(g.startColumn-1),a=u.getStandardTokenType(l);return u.getLanguageId(l)===s.getLanguageId()&&a===1}));const t=Object.values(this.currentOccurrences).map(o=>o.decorationId),i=n.map(o=>b(o));this.editor.changeDecorations(o=>{const g=o.deltaDecorations(t,i);this.currentOccurrences={};for(let u=0,l=g.length;u<l;u++){const a={sectionHeader:n[u],decorationId:g[u]};this.currentOccurrences[a.decorationId]=a}})}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};e.SectionHeaderDetector=_,e.SectionHeaderDetector=_=De([he(1,L.ILanguageConfigurationService),he(2,f.IEditorWorkerService)],_);function b(p){return{range:p.range,options:y.ModelDecorationOptions.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:p.hasSeparatorLine?2:1,sectionHeaderText:p.text}})}}(0,E.registerEditorContribution)(_.ID,_,1)}),define(oe[827],re([1,0,2,17,182,14,287,351,350,34,8,360,53,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StickyModelProvider=void 0;var i;(function(m){m.OUTLINE_MODEL="outlineModel",m.FOLDING_PROVIDER_MODEL="foldingProviderModel",m.INDENTATION_MODEL="indentationModel"})(i||(i={}));var o;(function(m){m[m.VALID=0]="VALID",m[m.INVALID=1]="INVALID",m[m.CANCELED=2]="CANCELED"})(o||(o={}));let g=class extends c.Disposable{constructor(h,v,C,w){switch(super(),this._editor=h,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=this._register(new L.Delayer(300)),this._updateOperation=this._register(new c.DisposableStore),this._editor.getOption(116).defaultModel){case i.OUTLINE_MODEL:this._modelProviders.push(new l(this._editor,w));case i.FOLDING_PROVIDER_MODEL:this._modelProviders.push(new d(this._editor,v,w));case i.INDENTATION_MODEL:this._modelProviders.push(new r(this._editor,C));break}}dispose(){this._modelProviders.forEach(h=>h.dispose()),this._updateOperation.clear(),this._cancelModelPromise(),super.dispose()}_cancelModelPromise(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}async update(h){return this._updateOperation.clear(),this._updateOperation.add({dispose:()=>{this._cancelModelPromise(),this._updateScheduler.cancel()}}),this._cancelModelPromise(),await this._updateScheduler.trigger(async()=>{for(const v of this._modelProviders){const{statusPromise:C,modelPromise:w}=v.computeStickyModel(h);this._modelPromise=w;const S=await C;if(this._modelPromise!==w)return null;switch(S){case o.CANCELED:return this._updateOperation.clear(),null;case o.VALID:return v.stickyModel}}return null}).catch(v=>((0,p.onUnexpectedError)(v),null))}};e.StickyModelProvider=g,e.StickyModelProvider=g=De([he(2,t.IInstantiationService),he(3,k.ILanguageFeaturesService)],g);class u extends c.Disposable{constructor(h){super(),this._editor=h,this._stickyModel=null}get stickyModel(){return this._stickyModel}_invalid(){return this._stickyModel=null,o.INVALID}computeStickyModel(h){if(h.isCancellationRequested||!this.isProviderValid())return{statusPromise:this._invalid(),modelPromise:null};const v=(0,L.createCancelablePromise)(C=>this.createModelFromProvider(C));return{statusPromise:v.then(C=>this.isModelValid(C)?h.isCancellationRequested?o.CANCELED:(this._stickyModel=this.createStickyModel(h,C),o.VALID):this._invalid()).then(void 0,C=>((0,p.onUnexpectedError)(C),o.CANCELED)),modelPromise:v}}isModelValid(h){return!0}isProviderValid(){return!0}}let l=class extends u{constructor(h,v){super(h),this._languageFeaturesService=v}createModelFromProvider(h){return E.OutlineModel.create(this._languageFeaturesService.documentSymbolProvider,this._editor.getModel(),h)}createStickyModel(h,v){const{stickyOutlineElement:C,providerID:w}=this._stickyModelFromOutlineModel(v,this._stickyModel?.outlineProviderId),S=this._editor.getModel();return new n.StickyModel(S.uri,S.getVersionId(),C,w)}isModelValid(h){return h&&h.children.size>0}_stickyModelFromOutlineModel(h,v){let C;if(s.Iterable.first(h.children.values())instanceof E.OutlineGroup){const I=s.Iterable.find(h.children.values(),T=>T.id===v);if(I)C=I.children;else{let T="",M=-1,A;for(const[R,N]of h.children.entries()){const O=this._findSumOfRangesOfGroup(N);O>M&&(A=N,M=O,T=N.id)}v=T,C=A.children}}else C=h.children;const w=[],S=Array.from(C.values()).sort((I,T)=>{const M=new n.StickyRange(I.symbol.range.startLineNumber,I.symbol.range.endLineNumber),A=new n.StickyRange(T.symbol.range.startLineNumber,T.symbol.range.endLineNumber);return this._comparator(M,A)});for(const I of S)w.push(this._stickyModelFromOutlineElement(I,I.symbol.selectionRange.startLineNumber));return{stickyOutlineElement:new n.StickyElement(void 0,w,void 0),providerID:v}}_stickyModelFromOutlineElement(h,v){const C=[];for(const S of h.children.values())if(S.symbol.selectionRange.startLineNumber!==S.symbol.range.endLineNumber)if(S.symbol.selectionRange.startLineNumber!==v)C.push(this._stickyModelFromOutlineElement(S,S.symbol.selectionRange.startLineNumber));else for(const D of S.children.values())C.push(this._stickyModelFromOutlineElement(D,S.symbol.selectionRange.startLineNumber));C.sort((S,D)=>this._comparator(S.range,D.range));const w=new n.StickyRange(h.symbol.selectionRange.startLineNumber,h.symbol.range.endLineNumber);return new n.StickyElement(w,C,void 0)}_comparator(h,v){return h.startLineNumber!==v.startLineNumber?h.startLineNumber-v.startLineNumber:v.endLineNumber-h.endLineNumber}_findSumOfRangesOfGroup(h){let v=0;for(const C of h.children.values())v+=this._findSumOfRangesOfGroup(C);return h instanceof E.OutlineElement?v+h.symbol.range.endLineNumber-h.symbol.selectionRange.startLineNumber:v}};l=De([he(1,k.ILanguageFeaturesService)],l);class a extends u{constructor(h){super(h),this._foldingLimitReporter=new y.RangesLimitReporter(h)}createStickyModel(h,v){const C=this._fromFoldingRegions(v),w=this._editor.getModel();return new n.StickyModel(w.uri,w.getVersionId(),C,void 0)}isModelValid(h){return h!==null}_fromFoldingRegions(h){const v=h.length,C=[],w=new n.StickyElement(void 0,[],void 0);for(let S=0;S<v;S++){const D=h.getParentIndex(S);let I;D!==-1?I=C[D]:I=w;const T=new n.StickyElement(new n.StickyRange(h.getStartLineNumber(S),h.getEndLineNumber(S)+1),[],I);I.children.push(T),C.push(T)}return w}}let r=class extends a{constructor(h,v){super(h),this._languageConfigurationService=v,this.provider=this._register(new _.IndentRangeProvider(h.getModel(),this._languageConfigurationService,this._foldingLimitReporter))}async createModelFromProvider(h){return this.provider.compute(h)}};r=De([he(1,b.ILanguageConfigurationService)],r);let d=class extends a{constructor(h,v,C){super(h),this._languageFeaturesService=C;const w=y.FoldingController.getFoldingRangeProviders(this._languageFeaturesService,h.getModel());w.length>0&&(this.provider=this._register(new f.SyntaxRangeProvider(h.getModel(),w,v,this._foldingLimitReporter,void 0)))}isProviderValid(){return this.provider!==void 0}async createModelFromProvider(h){return this.provider?.compute(h)??null}};d=De([he(2,k.ILanguageFeaturesService)],d)}),define(oe[828],re([1,0,2,17,18,14,13,6,34,827]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StickyLineCandidateProvider=e.StickyLineCandidate=void 0;class p{constructor(t,i,o){this.startLineNumber=t,this.endLineNumber=i,this.nestingDepth=o}}e.StickyLineCandidate=p;let n=class extends c.Disposable{constructor(t,i,o){super(),this._languageFeaturesService=i,this._languageConfigurationService=o,this._onDidChangeStickyScroll=this._register(new f.Emitter),this.onDidChangeStickyScroll=this._onDidChangeStickyScroll.event,this._model=null,this._cts=null,this._stickyModelProvider=null,this._editor=t,this._sessionStore=this._register(new c.DisposableStore),this._updateSoon=this._register(new L.RunOnceScheduler(()=>this.update(),50)),this._register(this._editor.onDidChangeConfiguration(g=>{g.hasChanged(116)&&this.readConfiguration()})),this.readConfiguration()}readConfiguration(){this._sessionStore.clear(),this._editor.getOption(116).enabled&&(this._sessionStore.add(this._editor.onDidChangeModel(()=>{this._model=null,this.updateStickyModelProvider(),this._onDidChangeStickyScroll.fire(),this.update()})),this._sessionStore.add(this._editor.onDidChangeHiddenAreas(()=>this.update())),this._sessionStore.add(this._editor.onDidChangeModelContent(()=>this._updateSoon.schedule())),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(()=>this.update())),this._sessionStore.add((0,c.toDisposable)(()=>{this._stickyModelProvider?.dispose(),this._stickyModelProvider=null})),this.updateStickyModelProvider(),this.update())}getVersionId(){return this._model?.version}updateStickyModelProvider(){this._stickyModelProvider?.dispose(),this._stickyModelProvider=null;const t=this._editor;t.hasModel()&&(this._stickyModelProvider=new b.StickyModelProvider(t,()=>this._updateSoon.schedule(),this._languageConfigurationService,this._languageFeaturesService))}async update(){this._cts?.dispose(!0),this._cts=new E.CancellationTokenSource,await this.updateStickyModel(this._cts.token),this._onDidChangeStickyScroll.fire()}async updateStickyModel(t){if(!this._editor.hasModel()||!this._stickyModelProvider||this._editor.getModel().isTooLargeForTokenization()){this._model=null;return}const i=await this._stickyModelProvider.update(t);t.isCancellationRequested||(this._model=i)}updateIndex(t){return t===-1?t=0:t<0&&(t=-t-2),t}getCandidateStickyLinesIntersectingFromStickyModel(t,i,o,g,u){if(i.children.length===0)return;let l=u;const a=[];for(let m=0;m<i.children.length;m++){const h=i.children[m];h.range&&a.push(h.range.startLineNumber)}const r=this.updateIndex((0,y.binarySearch)(a,t.startLineNumber,(m,h)=>m-h)),d=this.updateIndex((0,y.binarySearch)(a,t.startLineNumber+g,(m,h)=>m-h));for(let m=r;m<=d;m++){const h=i.children[m];if(!h)return;if(h.range){const v=h.range.startLineNumber,C=h.range.endLineNumber;t.startLineNumber<=C+1&&v-1<=t.endLineNumber&&v!==l&&(l=v,o.push(new p(v,C-1,g+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(t,h,o,g+1,v))}else this.getCandidateStickyLinesIntersectingFromStickyModel(t,h,o,g,u)}}getCandidateStickyLinesIntersecting(t){if(!this._model?.element)return[];let i=[];this.getCandidateStickyLinesIntersectingFromStickyModel(t,this._model.element,i,0,-1);const o=this._editor._getViewModel()?.getHiddenAreas();if(o)for(const g of o)i=i.filter(u=>!(u.startLineNumber>=g.startLineNumber&&u.endLineNumber<=g.endLineNumber+1));return i}};e.StickyLineCandidateProvider=n,e.StickyLineCandidateProvider=n=De([he(1,k.ILanguageFeaturesService),he(2,_.ILanguageConfigurationService)],n)}),define(oe[829],re([1,0,5,102,13,2,30,280,125,9,114,149,135,419,540]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StickyScrollWidget=e.StickyScrollWidgetState=void 0;class i{constructor(v,C,w,S=null){this.startLineNumbers=v,this.endLineNumbers=C,this.lastLineRelativePosition=w,this.showEndForLine=S}equals(v){return!!v&&this.lastLineRelativePosition===v.lastLineRelativePosition&&this.showEndForLine===v.showEndForLine&&(0,E.equals)(this.startLineNumbers,v.startLineNumbers)&&(0,E.equals)(this.endLineNumbers,v.endLineNumbers)}static get Empty(){return new i([],[],0)}}e.StickyScrollWidgetState=i;const o=(0,k.createTrustedTypesPolicy)("stickyScrollViewLayer",{createHTML:h=>h}),g="data-sticky-line-index",u="data-sticky-is-line",l="data-sticky-is-line-number",a="data-sticky-is-folding-icon";class r extends L.Disposable{constructor(v){super(),this._editor=v,this._foldingIconStore=new L.DisposableStore,this._rootDomNode=document.createElement("div"),this._lineNumbersDomNode=document.createElement("div"),this._linesDomNodeScrollable=document.createElement("div"),this._linesDomNode=document.createElement("div"),this._lineHeight=this._editor.getOption(67),this._renderedStickyLines=[],this._lineNumbers=[],this._lastLineRelativePosition=0,this._minContentWidthInPx=0,this._isOnGlyphMargin=!1,this._lineNumbersDomNode.className="sticky-widget-line-numbers",this._lineNumbersDomNode.setAttribute("role","none"),this._linesDomNode.className="sticky-widget-lines",this._linesDomNode.setAttribute("role","list"),this._linesDomNodeScrollable.className="sticky-widget-lines-scrollable",this._linesDomNodeScrollable.appendChild(this._linesDomNode),this._rootDomNode.className="sticky-widget",this._rootDomNode.classList.toggle("peek",v instanceof _.EmbeddedCodeEditorWidget),this._rootDomNode.appendChild(this._lineNumbersDomNode),this._rootDomNode.appendChild(this._linesDomNodeScrollable);const C=()=>{this._linesDomNode.style.left=this._editor.getOption(116).scrollWithEditor?`-${this._editor.getScrollLeft()}px`:"0px"};this._register(this._editor.onDidChangeConfiguration(w=>{w.hasChanged(116)&&C(),w.hasChanged(67)&&(this._lineHeight=this._editor.getOption(67))})),this._register(this._editor.onDidScrollChange(w=>{w.scrollLeftChanged&&C(),w.scrollWidthChanged&&this._updateWidgetWidth()})),this._register(this._editor.onDidChangeModel(()=>{C(),this._updateWidgetWidth()})),this._register(this._foldingIconStore),C(),this._register(this._editor.onDidLayoutChange(w=>{this._updateWidgetWidth()})),this._updateWidgetWidth()}get lineNumbers(){return this._lineNumbers}get lineNumberCount(){return this._lineNumbers.length}getRenderedStickyLine(v){return this._renderedStickyLines.find(C=>C.lineNumber===v)}getCurrentLines(){return this._lineNumbers}setState(v,C,w){if(w===void 0&&(!this._previousState&&!v||this._previousState&&this._previousState.equals(v)))return;const S=this._isWidgetHeightZero(v),D=S?void 0:v,I=S?0:this._findLineToRebuildWidgetFrom(v,w);this._renderRootNode(D,C,I),this._previousState=v}_isWidgetHeightZero(v){if(!v)return!0;const C=v.startLineNumbers.length*this._lineHeight+v.lastLineRelativePosition;if(C>0){this._lastLineRelativePosition=v.lastLineRelativePosition;const w=[...v.startLineNumbers];v.showEndForLine!==null&&(w[v.showEndForLine]=v.endLineNumbers[v.showEndForLine]),this._lineNumbers=w}else this._lastLineRelativePosition=0,this._lineNumbers=[];return C===0}_findLineToRebuildWidgetFrom(v,C){if(!v||!this._previousState)return 0;if(C!==void 0)return C;const w=this._previousState,S=v.startLineNumbers.findIndex(D=>!w.startLineNumbers.includes(D));return S===-1?0:S}_updateWidgetWidth(){const v=this._editor.getLayoutInfo(),C=v.contentLeft;this._lineNumbersDomNode.style.width=`${C}px`,this._linesDomNodeScrollable.style.setProperty("--vscode-editorStickyScroll-scrollableWidth",`${this._editor.getScrollWidth()-v.verticalScrollbarWidth}px`),this._rootDomNode.style.width=`${v.width-v.verticalScrollbarWidth}px`}_clearStickyLinesFromLine(v){this._foldingIconStore.clear();for(let C=v;C<this._renderedStickyLines.length;C++){const w=this._renderedStickyLines[C];w.lineNumberDomNode.remove(),w.lineDomNode.remove()}this._renderedStickyLines=this._renderedStickyLines.slice(0,v),this._rootDomNode.style.display="none"}_useFoldingOpacityTransition(v){this._lineNumbersDomNode.style.setProperty("--vscode-editorStickyScroll-foldingOpacityTransition",`opacity ${v?.5:0}s`)}_setFoldingIconsVisibility(v){for(const C of this._renderedStickyLines){const w=C.foldingIcon;w&&w.setVisible(v?!0:w.isCollapsed)}}async _renderRootNode(v,C,w){if(this._clearStickyLinesFromLine(w),!v)return;for(const T of this._renderedStickyLines)this._updateTopAndZIndexOfStickyLine(T);const S=this._editor.getLayoutInfo(),D=this._lineNumbers.slice(w);for(const[T,M]of D.entries()){const A=this._renderChildNode(T+w,M,C,S);A&&(this._linesDomNode.appendChild(A.lineDomNode),this._lineNumbersDomNode.appendChild(A.lineNumberDomNode),this._renderedStickyLines.push(A))}C&&(this._setFoldingHoverListeners(),this._useFoldingOpacityTransition(!this._isOnGlyphMargin));const I=this._lineNumbers.length*this._lineHeight+this._lastLineRelativePosition;this._rootDomNode.style.display="block",this._lineNumbersDomNode.style.height=`${I}px`,this._linesDomNodeScrollable.style.height=`${I}px`,this._rootDomNode.style.height=`${I}px`,this._rootDomNode.style.marginLeft="0px",this._minContentWidthInPx=Math.max(...this._renderedStickyLines.map(T=>T.scrollWidth))+S.verticalScrollbarWidth,this._editor.layoutOverlayWidget(this)}_setFoldingHoverListeners(){this._editor.getOption(111)==="mouseover"&&(this._foldingIconStore.add(c.addDisposableListener(this._lineNumbersDomNode,c.EventType.MOUSE_ENTER,()=>{this._isOnGlyphMargin=!0,this._setFoldingIconsVisibility(!0)})),this._foldingIconStore.add(c.addDisposableListener(this._lineNumbersDomNode,c.EventType.MOUSE_LEAVE,()=>{this._isOnGlyphMargin=!1,this._useFoldingOpacityTransition(!0),this._setFoldingIconsVisibility(!1)})))}_renderChildNode(v,C,w,S){const D=this._editor._getViewModel();if(!D)return;const I=D.coordinatesConverter.convertModelPositionToViewPosition(new b.Position(C,1)).lineNumber,T=D.getViewLineRenderingData(I),M=this._editor.getOption(68);let A;try{A=n.LineDecoration.filter(T.inlineDecorations,I,T.minColumn,T.maxColumn)}catch{A=[]}const R=new s.RenderLineInput(!0,!0,T.content,T.continuesWithWrappedLine,T.isBasicASCII,T.containsRTL,0,T.tokens,A,T.tabSize,T.startVisibleColumn,1,1,1,500,"none",!0,!0,null),N=new p.StringBuilder(2e3),O=(0,s.renderViewLine)(R,N);let x;o?x=o.createHTML(N.build()):x=N.build();const F=document.createElement("span");F.setAttribute(g,String(v)),F.setAttribute(u,""),F.setAttribute("role","listitem"),F.tabIndex=0,F.className="sticky-line-content",F.classList.add(`stickyLine${C}`),F.style.lineHeight=`${this._lineHeight}px`,F.innerHTML=x;const W=document.createElement("span");W.setAttribute(g,String(v)),W.setAttribute(l,""),W.className="sticky-line-number",W.style.lineHeight=`${this._lineHeight}px`;const z=S.contentLeft;W.style.width=`${z}px`;const q=document.createElement("span");M.renderType===1||M.renderType===3&&C%10===0?q.innerText=C.toString():M.renderType===2&&(q.innerText=Math.abs(C-this._editor.getPosition().lineNumber).toString()),q.className="sticky-line-number-inner",q.style.lineHeight=`${this._lineHeight}px`,q.style.width=`${S.lineNumbersWidth}px`,q.style.paddingLeft=`${S.lineNumbersLeft}px`,W.appendChild(q);const H=this._renderFoldingIconForLine(w,C);H&&W.appendChild(H.domNode),this._editor.applyFontInfo(F),this._editor.applyFontInfo(q),W.style.lineHeight=`${this._lineHeight}px`,F.style.lineHeight=`${this._lineHeight}px`,W.style.height=`${this._lineHeight}px`,F.style.height=`${this._lineHeight}px`;const K=new d(v,C,F,W,H,O.characterMapping,F.scrollWidth);return this._updateTopAndZIndexOfStickyLine(K)}_updateTopAndZIndexOfStickyLine(v){const C=v.index,w=v.lineDomNode,S=v.lineNumberDomNode,D=C===this._lineNumbers.length-1,I="0",T="1";w.style.zIndex=D?I:T,S.style.zIndex=D?I:T;const M=`${C*this._lineHeight+this._lastLineRelativePosition+(v.foldingIcon?.isCollapsed?1:0)}px`,A=`${C*this._lineHeight}px`;return w.style.top=D?M:A,S.style.top=D?M:A,v}_renderFoldingIconForLine(v,C){const w=this._editor.getOption(111);if(!v||w==="never")return;const S=v.regions,D=S.findRange(C),I=S.getStartLineNumber(D);if(!(C===I))return;const M=S.isCollapsed(D),A=new m(M,I,S.getEndLineNumber(D),this._lineHeight);return A.setVisible(this._isOnGlyphMargin?!0:M||w==="always"),A.domNode.setAttribute(a,""),A}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this._rootDomNode}getPosition(){return{preference:2,stackOridinal:10}}getMinContentWidthInPx(){return this._minContentWidthInPx}focusLineWithIndex(v){0<=v&&v<this._renderedStickyLines.length&&this._renderedStickyLines[v].lineDomNode.focus()}getEditorPositionFromNode(v){if(!v||v.children.length>0)return null;const C=this._getRenderedStickyLineFromChildDomNode(v);if(!C)return null;const w=(0,f.getColumnOfNodeOffset)(C.characterMapping,v,0);return new b.Position(C.lineNumber,w)}getLineNumberFromChildDomNode(v){return this._getRenderedStickyLineFromChildDomNode(v)?.lineNumber??null}_getRenderedStickyLineFromChildDomNode(v){const C=this.getLineIndexFromChildDomNode(v);return C===null||C<0||C>=this._renderedStickyLines.length?null:this._renderedStickyLines[C]}getLineIndexFromChildDomNode(v){const C=this._getAttributeValue(v,g);return C?parseInt(C,10):null}isInStickyLine(v){return this._getAttributeValue(v,u)!==void 0}isInFoldingIconDomNode(v){return this._getAttributeValue(v,a)!==void 0}_getAttributeValue(v,C){for(;v&&v!==this._rootDomNode;){const w=v.getAttribute(C);if(w!==null)return w;v=v.parentElement}}}e.StickyScrollWidget=r;class d{constructor(v,C,w,S,D,I,T){this.index=v,this.lineNumber=C,this.lineDomNode=w,this.lineNumberDomNode=S,this.foldingIcon=D,this.characterMapping=I,this.scrollWidth=T}}class m{constructor(v,C,w,S){this.isCollapsed=v,this.foldingStartLine=C,this.foldingEndLine=w,this.dimension=S,this.domNode=document.createElement("div"),this.domNode.style.width=`${S}px`,this.domNode.style.height=`${S}px`,this.domNode.className=y.ThemeIcon.asClassName(v?t.foldingCollapsedIcon:t.foldingExpandedIcon)}setVisible(v){this.domNode.style.cursor=v?"pointer":"default",this.domNode.style.opacity=v?"1":"0"}}}),define(oe[830],re([1,0,5,112,14,8,6,2,140,11,125,789,3,12,7,100,32,97,25,234,153,397,784,109,48,196,541,279]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v){"use strict";var C;Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestContentWidget=e.SuggestWidget=e.editorSuggestWidgetSelectedBackground=void 0,(0,g.registerColor)("editorSuggestWidget.background",g.editorWidgetBackground,s.localize(362,"Background color of the suggest widget.")),(0,g.registerColor)("editorSuggestWidget.border",g.editorWidgetBorder,s.localize(363,"Border color of the suggest widget."));const w=(0,g.registerColor)("editorSuggestWidget.foreground",g.editorForeground,s.localize(364,"Foreground color of the suggest widget."));(0,g.registerColor)("editorSuggestWidget.selectedForeground",g.quickInputListFocusForeground,s.localize(365,"Foreground color of the selected entry in the suggest widget.")),(0,g.registerColor)("editorSuggestWidget.selectedIconForeground",g.quickInputListFocusIconForeground,s.localize(366,"Icon foreground color of the selected entry in the suggest widget.")),e.editorSuggestWidgetSelectedBackground=(0,g.registerColor)("editorSuggestWidget.selectedBackground",g.quickInputListFocusBackground,s.localize(367,"Background color of the selected entry in the suggest widget.")),(0,g.registerColor)("editorSuggestWidget.highlightForeground",g.listHighlightForeground,s.localize(368,"Color of the match highlights in the suggest widget.")),(0,g.registerColor)("editorSuggestWidget.focusHighlightForeground",g.listFocusHighlightForeground,s.localize(369,"Color of the match highlights in the suggest widget when an item is focused.")),(0,g.registerColor)("editorSuggestWidgetStatus.foreground",(0,g.transparent)(w,.5),s.localize(370,"Foreground color of the suggest widget status."));class S{constructor(M,A){this._service=M,this._key=`suggestWidget.size/${A.getEditorType()}/${A instanceof p.EmbeddedCodeEditorWidget}`}restore(){const M=this._service.get(this._key,0)??"";try{const A=JSON.parse(M);if(c.Dimension.is(A))return c.Dimension.lift(A)}catch{}}store(M){this._service.store(this._key,JSON.stringify(M),0,1)}reset(){this._service.remove(this._key,0)}}let D=class{static{C=this}static{this.LOADING_MESSAGE=s.localize(371,"Loading...")}static{this.NO_SUGGESTIONS_MESSAGE=s.localize(372,"No suggestions.")}constructor(M,A,R,N,O){this.editor=M,this._storageService=A,this._state=0,this._isAuto=!1,this._pendingLayout=new f.MutableDisposable,this._pendingShowDetails=new f.MutableDisposable,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new E.TimeoutTimer,this._disposables=new f.DisposableStore,this._onDidSelect=new y.PauseableEmitter,this._onDidFocus=new y.PauseableEmitter,this._onDidHide=new y.Emitter,this._onDidShow=new y.Emitter,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new y.Emitter,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new a.ResizableHTMLElement,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new I(this,M),this._persistedSize=new S(A,M);class x{constructor(U,Y,Q=!1,X=!1){this.persistedSize=U,this.currentSize=Y,this.persistHeight=Q,this.persistWidth=X}}let F;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),F=new x(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(K=>{if(this._resize(K.dimension.width,K.dimension.height),F&&(F.persistHeight=F.persistHeight||!!K.north||!!K.south,F.persistWidth=F.persistWidth||!!K.east||!!K.west),!!K.done){if(F){const{itemHeight:U,defaultSize:Y}=this.getLayoutInfo(),Q=Math.round(U/2);let{width:X,height:G}=this.element.size;(!F.persistHeight||Math.abs(F.currentSize.height-G)<=Q)&&(G=F.persistedSize?.height??Y.height),(!F.persistWidth||Math.abs(F.currentSize.width-X)<=Q)&&(X=F.persistedSize?.width??Y.width),this._persistedSize.store(new c.Dimension(X,G))}this._contentWidget.unlockPreference(),F=void 0}})),this._messageElement=c.append(this.element.domNode,c.$(".message")),this._listElement=c.append(this.element.domNode,c.$(".tree"));const W=this._disposables.add(O.createInstance(d.SuggestDetailsWidget,this.editor));W.onDidClose(this.toggleDetails,this,this._disposables),this._details=new d.SuggestDetailsOverlay(W,this.editor);const z=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(119).showIcons);z();const q=O.createInstance(m.ItemRenderer,this.editor);this._disposables.add(q),this._disposables.add(q.onDidToggleDetails(()=>this.toggleDetails())),this._list=new k.List("SuggestWidget",this._listElement,{getHeight:K=>this.getLayoutInfo().itemHeight,getTemplateId:K=>"suggestion"},[q],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>s.localize(373,"Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:K=>{let U=K.textLabel;if(typeof K.completion.label!="string"){const{detail:G,description:P}=K.completion.label;G&&P?U=s.localize(374,"{0} {1}, {2}",U,G,P):G?U=s.localize(375,"{0} {1}",U,G):P&&(U=s.localize(376,"{0}, {1}",U,P))}if(!K.isResolved||!this._isDetailsVisible())return U;const{documentation:Y,detail:Q}=K.completion,X=b.format("{0}{1}",Q||"",Y?typeof Y=="string"?Y:Y.value:"");return s.localize(377,"{0}, docs: {1}",U,X)}}}),this._list.style((0,h.getListStyles)({listInactiveFocusBackground:e.editorSuggestWidgetSelectedBackground,listInactiveFocusOutline:g.activeContrastBorder})),this._status=O.createInstance(n.SuggestWidgetStatus,this.element.domNode,r.suggestWidgetStatusbarMenu);const H=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(119).showStatusBar);H(),this._disposables.add(N.onDidColorThemeChange(K=>this._onThemeChange(K))),this._onThemeChange(N.getColorTheme()),this._disposables.add(this._list.onMouseDown(K=>this._onListMouseDownOrTap(K))),this._disposables.add(this._list.onTap(K=>this._onListMouseDownOrTap(K))),this._disposables.add(this._list.onDidChangeSelection(K=>this._onListSelection(K))),this._disposables.add(this._list.onDidChangeFocus(K=>this._onListFocus(K))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(K=>{K.hasChanged(119)&&(H(),z()),this._completionModel&&(K.hasChanged(50)||K.hasChanged(120)||K.hasChanged(121))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=r.Context.Visible.bindTo(R),this._ctxSuggestWidgetDetailsVisible=r.Context.DetailsVisible.bindTo(R),this._ctxSuggestWidgetMultipleSuggestions=r.Context.MultipleSuggestions.bindTo(R),this._ctxSuggestWidgetHasFocusedSuggestion=r.Context.HasFocusedSuggestion.bindTo(R),this._disposables.add(c.addStandardDisposableListener(this._details.widget.domNode,"keydown",K=>{this._onDetailsKeydown.fire(K)})),this._disposables.add(this.editor.onMouseDown(K=>this._onEditorMouseDown(K)))}dispose(){this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),this._loadingTimeout?.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(M){this._details.widget.domNode.contains(M.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(M.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(M){typeof M.element>"u"||typeof M.index>"u"||(M.browserEvent.preventDefault(),M.browserEvent.stopPropagation(),this._select(M.element,M.index))}_onListSelection(M){M.elements.length&&this._select(M.elements[0],M.indexes[0])}_select(M,A){const R=this._completionModel;R&&(this._onDidSelect.fire({item:M,index:A,model:R}),this.editor.focus())}_onThemeChange(M){this._details.widget.borderWidth=(0,u.isHighContrast)(M.type)?2:1}_onListFocus(M){if(this._ignoreFocusEvents)return;if(!M.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const A=M.elements[0],R=M.indexes[0];A!==this._focusedItem&&(this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=A,this._list.reveal(R),this._currentSuggestionDetails=(0,E.createCancelablePromise)(async N=>{const O=(0,E.disposableTimeout)(()=>{this._isDetailsVisible()&&this.showDetails(!0)},250),x=N.onCancellationRequested(()=>O.dispose());try{return await A.resolve(N)}finally{O.dispose(),x.dispose()}}),this._currentSuggestionDetails.then(()=>{R>=this._list.length||A!==this._list.element(R)||(this._ignoreFocusEvents=!0,this._list.splice(R,1,[A]),this._list.setFocus([R]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:(0,m.getAriaId)(R)}))}).catch(L.onUnexpectedError)),this._onDidFocus.fire({item:A,index:R,model:this._completionModel})}_setState(M){if(this._state!==M)switch(this._state=M,this.element.domNode.classList.toggle("frozen",M===4),this.element.domNode.classList.remove("message"),M){case 0:c.hide(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=C.LOADING_MESSAGE,c.hide(this._listElement,this._status.element),c.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,v.status)(C.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=C.NO_SUGGESTIONS_MESSAGE,c.hide(this._listElement,this._status.element),c.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,v.status)(C.NO_SUGGESTIONS_MESSAGE);break;case 3:c.hide(this._messageElement),c.show(this._listElement,this._status.element),this._show();break;case 4:c.hide(this._messageElement),c.show(this._listElement,this._status.element),this._show();break;case 5:c.hide(this._messageElement),c.show(this._listElement,this._status.element),this._details.show(),this._show();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(M,A){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!M,this._isAuto||(this._loadingTimeout=(0,E.disposableTimeout)(()=>this._setState(1),A)))}showSuggestions(M,A,R,N,O){if(this._contentWidget.setPosition(this.editor.getPosition()),this._loadingTimeout?.dispose(),this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==M&&(this._completionModel=M),R&&this._state!==2&&this._state!==0){this._setState(4);return}const x=this._completionModel.items.length,F=x===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(x>1),F){this._setState(N?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(R?4:3),this._list.reveal(A,0),this._list.setFocus(O?[]:[A])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=c.runAtThisOrScheduleAtNextAnimationFrame(c.getWindow(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):this._state===3&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):((0,d.canExpandCompletionItem)(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(M){this._pendingShowDetails.value=c.runAtThisOrScheduleAtNextAnimationFrame(c.getWindow(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show(),M?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){this._pendingLayout.clear(),this._pendingShowDetails.clear(),this._loadingTimeout?.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const M=this._persistedSize.restore(),A=Math.ceil(this.getLayoutInfo().itemHeight*4.3);M&&M.height<A&&this._persistedSize.store(M.with(void 0,A))}isFrozen(){return this._state===4}_afterRender(M){if(M===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(M){if(!this.editor.hasModel()||!this.editor.getDomNode())return;const A=c.getClientArea(this.element.domNode.ownerDocument.body),R=this.getLayoutInfo();M||(M=R.defaultSize);let N=M.height,O=M.width;if(this._status.element.style.height=`${R.itemHeight}px`,this._state===2||this._state===1)N=R.itemHeight+R.borderHeight,O=R.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new c.Dimension(O,N),this._contentWidget.setPreference(2);else{const x=A.width-R.borderHeight-2*R.horizontalPadding;O>x&&(O=x);const F=this._completionModel?this._completionModel.stats.pLabelLen*R.typicalHalfwidthCharacterWidth:O,W=R.statusBarHeight+this._list.contentHeight+R.borderHeight,z=R.itemHeight+R.statusBarHeight,q=c.getDomNodePagePosition(this.editor.getDomNode()),H=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),K=q.top+H.top+H.height,U=Math.min(A.height-K-R.verticalPadding,W),Y=q.top+H.top-R.verticalPadding,Q=Math.min(Y,W);let X=Math.min(Math.max(Q,U)+R.borderHeight,W);N===this._cappedHeight?.capped&&(N=this._cappedHeight.wanted),N<z&&(N=z),N>X&&(N=X),N>U||this._forceRenderingAbove&&Y>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),X=Q):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),X=U),this.element.preferredSize=new c.Dimension(F,R.defaultSize.height),this.element.maxSize=new c.Dimension(x,X),this.element.minSize=new c.Dimension(220,z),this._cappedHeight=N===W?{wanted:this._cappedHeight?.wanted??M.height,capped:N}:void 0}this._resize(O,N)}_resize(M,A){const{width:R,height:N}=this.element.maxSize;M=Math.min(R,M),A=Math.min(N,A);const{statusBarHeight:O}=this.getLayoutInfo();this._list.layout(A-O,M),this._listElement.style.height=`${A-O}px`,this.element.layout(A,M),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,this._contentWidget.getPosition()?.preference[0]===2)}getLayoutInfo(){const M=this.editor.getOption(50),A=(0,_.clamp)(this.editor.getOption(121)||M.lineHeight,8,1e3),R=!this.editor.getOption(119).showStatusBar||this._state===2||this._state===1?0:A,N=this._details.widget.borderWidth,O=2*N;return{itemHeight:A,statusBarHeight:R,borderWidth:N,borderHeight:O,typicalHalfwidthCharacterWidth:M.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new c.Dimension(430,R+12*A+O)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(M){this._storageService.store("expandSuggestionDocs",M,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};e.SuggestWidget=D,e.SuggestWidget=D=C=De([he(1,o.IStorageService),he(2,t.IContextKeyService),he(3,l.IThemeService),he(4,i.IInstantiationService)],D);class I{constructor(M,A){this._widget=M,this._editor=A,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){const{height:M,width:A}=this._widget.element.size,{borderWidth:R,horizontalPadding:N}=this._widget.getLayoutInfo();return new c.Dimension(A+2*R+N,M+2*R)}afterRender(M){this._widget._afterRender(M)}setPreference(M){this._preferenceLocked||(this._preference=M)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(M){this._position=M}}e.SuggestContentWidget=I}),define(oe[421],re([1,0,40,36,28,3,32,25,545]),function(ae,e,c,k,E,L,y,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getHighlightDecorationOptions=l,e.getSelectionHighlightDecorationOptions=a;const _=(0,y.registerColor)("editor.wordHighlightBackground",{dark:"#575757B8",light:"#57575740",hcDark:null,hcLight:null},L.localize(282,"Background color of a symbol during read-access, like reading a variable. The color must not be opaque so as not to hide underlying decorations."),!0);(0,y.registerColor)("editor.wordHighlightStrongBackground",{dark:"#004972B8",light:"#0e639c40",hcDark:null,hcLight:null},L.localize(283,"Background color of a symbol during write-access, like writing to a variable. The color must not be opaque so as not to hide underlying decorations."),!0),(0,y.registerColor)("editor.wordHighlightTextBackground",_,L.localize(284,"Background color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0);const b=(0,y.registerColor)("editor.wordHighlightBorder",{light:null,dark:null,hcDark:y.activeContrastBorder,hcLight:y.activeContrastBorder},L.localize(285,"Border color of a symbol during read-access, like reading a variable."));(0,y.registerColor)("editor.wordHighlightStrongBorder",{light:null,dark:null,hcDark:y.activeContrastBorder,hcLight:y.activeContrastBorder},L.localize(286,"Border color of a symbol during write-access, like writing to a variable.")),(0,y.registerColor)("editor.wordHighlightTextBorder",b,L.localize(287,"Border color of a textual occurrence for a symbol."));const p=(0,y.registerColor)("editorOverviewRuler.wordHighlightForeground","#A0A0A0CC",L.localize(288,"Overview ruler marker color for symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),n=(0,y.registerColor)("editorOverviewRuler.wordHighlightStrongForeground","#C0A0C0CC",L.localize(289,"Overview ruler marker color for write-access symbol highlights. The color must not be opaque so as not to hide underlying decorations."),!0),s=(0,y.registerColor)("editorOverviewRuler.wordHighlightTextForeground",y.overviewRulerSelectionHighlightForeground,L.localize(290,"Overview ruler marker color of a textual occurrence for a symbol. The color must not be opaque so as not to hide underlying decorations."),!0),t=k.ModelDecorationOptions.register({description:"word-highlight-strong",stickiness:1,className:"wordHighlightStrong",overviewRuler:{color:(0,f.themeColorFromId)(n),position:c.OverviewRulerLane.Center},minimap:{color:(0,f.themeColorFromId)(y.minimapSelectionOccurrenceHighlight),position:1}}),i=k.ModelDecorationOptions.register({description:"word-highlight-text",stickiness:1,className:"wordHighlightText",overviewRuler:{color:(0,f.themeColorFromId)(s),position:c.OverviewRulerLane.Center},minimap:{color:(0,f.themeColorFromId)(y.minimapSelectionOccurrenceHighlight),position:1}}),o=k.ModelDecorationOptions.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",overviewRuler:{color:(0,f.themeColorFromId)(y.overviewRulerSelectionHighlightForeground),position:c.OverviewRulerLane.Center},minimap:{color:(0,f.themeColorFromId)(y.minimapSelectionOccurrenceHighlight),position:1}}),g=k.ModelDecorationOptions.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),u=k.ModelDecorationOptions.register({description:"word-highlight",stickiness:1,className:"wordHighlight",overviewRuler:{color:(0,f.themeColorFromId)(p),position:c.OverviewRulerLane.Center},minimap:{color:(0,f.themeColorFromId)(y.minimapSelectionOccurrenceHighlight),position:1}});function l(r){return r===E.DocumentHighlightKind.Write?t:r===E.DocumentHighlightKind.Text?i:u}function a(r){return r?g:o}(0,f.registerThemingParticipant)((r,d)=>{const m=r.getColor(y.editorSelectionHighlight);m&&d.addRule(`.monaco-editor .selectionHighlight { background-color: ${m.transparent(.5)}; }`)})}),define(oe[831],re([1,0,48,14,72,2,15,246,4,23,20,418,3,29,12,17,421,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";var l;Object.defineProperty(e,"__esModule",{value:!0}),e.FocusPreviousCursor=e.FocusNextCursor=e.SelectionHighlighter=e.CompatChangeAll=e.SelectHighlightsAction=e.MoveSelectionToPreviousFindMatchAction=e.MoveSelectionToNextFindMatchAction=e.AddSelectionToPreviousFindMatchAction=e.AddSelectionToNextFindMatchAction=e.MultiCursorSelectionControllerAction=e.MultiCursorSelectionController=e.MultiCursorSession=e.MultiCursorSessionResult=e.InsertCursorBelow=e.InsertCursorAbove=void 0;function a(H,K){const U=K.filter(Y=>!H.find(Q=>Q.equals(Y)));if(U.length>=1){const Y=U.map(X=>`line ${X.viewState.position.lineNumber} column ${X.viewState.position.column}`).join(", "),Q=U.length===1?s.localize(534,"Cursor added: {0}",Y):s.localize(535,"Cursors added: {0}",Y);(0,c.status)(Q)}}class r extends y.EditorAction{constructor(){super({id:"editor.action.insertCursorAbove",label:s.localize(536,"Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(537,"&&Add Cursor Above"),order:2}})}run(K,U,Y){if(!U.hasModel())return;let Q=!0;Y&&Y.logicalLine===!1&&(Q=!1);const X=U._getViewModel();if(X.cursorConfig.readOnly)return;X.model.pushStackElement();const G=X.getCursorStates();X.setCursorStates(Y.source,3,f.CursorMoveCommands.addCursorUp(X,G,Q)),X.revealTopMostCursor(Y.source),a(G,X.getCursorStates())}}e.InsertCursorAbove=r;class d extends y.EditorAction{constructor(){super({id:"editor.action.insertCursorBelow",label:s.localize(538,"Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(539,"A&&dd Cursor Below"),order:3}})}run(K,U,Y){if(!U.hasModel())return;let Q=!0;Y&&Y.logicalLine===!1&&(Q=!1);const X=U._getViewModel();if(X.cursorConfig.readOnly)return;X.model.pushStackElement();const G=X.getCursorStates();X.setCursorStates(Y.source,3,f.CursorMoveCommands.addCursorDown(X,G,Q)),X.revealBottomMostCursor(Y.source),a(G,X.getCursorStates())}}e.InsertCursorBelow=d;class m extends y.EditorAction{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:s.localize(540,"Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(541,"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(K,U,Y){if(!K.isEmpty()){for(let Q=K.startLineNumber;Q<K.endLineNumber;Q++){const X=U.getLineMaxColumn(Q);Y.push(new b.Selection(Q,X,Q,X))}K.endColumn>1&&Y.push(new b.Selection(K.endLineNumber,K.endColumn,K.endLineNumber,K.endColumn))}}run(K,U){if(!U.hasModel())return;const Y=U.getModel(),Q=U.getSelections(),X=U._getViewModel(),G=X.getCursorStates(),P=[];Q.forEach(te=>this.getCursorsForSelection(te,Y,P)),P.length>0&&U.setSelections(P),a(G,X.getCursorStates())}}class h extends y.EditorAction{constructor(){super({id:"editor.action.addCursorsToBottom",label:s.localize(542,"Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(K,U){if(!U.hasModel())return;const Y=U.getSelections(),Q=U.getModel().getLineCount(),X=[];for(let te=Y[0].startLineNumber;te<=Q;te++)X.push(new b.Selection(te,Y[0].startColumn,te,Y[0].endColumn));const G=U._getViewModel(),P=G.getCursorStates();X.length>0&&U.setSelections(X),a(P,G.getCursorStates())}}class v extends y.EditorAction{constructor(){super({id:"editor.action.addCursorsToTop",label:s.localize(543,"Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(K,U){if(!U.hasModel())return;const Y=U.getSelections(),Q=[];for(let P=Y[0].startLineNumber;P>=1;P--)Q.push(new b.Selection(P,Y[0].startColumn,P,Y[0].endColumn));const X=U._getViewModel(),G=X.getCursorStates();Q.length>0&&U.setSelections(Q),a(G,X.getCursorStates())}}class C{constructor(K,U,Y){this.selections=K,this.revealRange=U,this.revealScrollType=Y}}e.MultiCursorSessionResult=C;class w{static create(K,U){if(!K.hasModel())return null;const Y=U.getState();if(!K.hasTextFocus()&&Y.isRevealed&&Y.searchString.length>0)return new w(K,U,!1,Y.searchString,Y.wholeWord,Y.matchCase,null);let Q=!1,X,G;const P=K.getSelections();P.length===1&&P[0].isEmpty()?(Q=!0,X=!0,G=!0):(X=Y.wholeWord,G=Y.matchCase);const te=K.getSelection();let se,ue=null;if(te.isEmpty()){const ge=K.getConfiguredWordAtPosition(te.getStartPosition());if(!ge)return null;se=ge.word,ue=new b.Selection(te.startLineNumber,ge.startColumn,te.startLineNumber,ge.endColumn)}else se=K.getModel().getValueInRange(te).replace(/\r\n/g,`
`);return new w(K,U,Q,se,X,G,ue)}constructor(K,U,Y,Q,X,G,P){this._editor=K,this.findController=U,this.isDisconnectedFromFindController=Y,this.searchText=Q,this.wholeWord=X,this.matchCase=G,this.currentMatch=P}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const K=this._getNextMatch();if(!K)return null;const U=this._editor.getSelections();return new C(U.concat(K),K,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const K=this._getNextMatch();if(!K)return null;const U=this._editor.getSelections();return new C(U.slice(0,U.length-1).concat(K),K,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const Q=this.currentMatch;return this.currentMatch=null,Q}this.findController.highlightFindOptions();const K=this._editor.getSelections(),U=K[K.length-1],Y=this._editor.getModel().findNextMatch(this.searchText,U.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return Y?new b.Selection(Y.range.startLineNumber,Y.range.startColumn,Y.range.endLineNumber,Y.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const K=this._getPreviousMatch();if(!K)return null;const U=this._editor.getSelections();return new C(U.concat(K),K,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const K=this._getPreviousMatch();if(!K)return null;const U=this._editor.getSelections();return new C(U.slice(0,U.length-1).concat(K),K,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const Q=this.currentMatch;return this.currentMatch=null,Q}this.findController.highlightFindOptions();const K=this._editor.getSelections(),U=K[K.length-1],Y=this._editor.getModel().findPreviousMatch(this.searchText,U.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1);return Y?new b.Selection(Y.range.startLineNumber,Y.range.startColumn,Y.range.endLineNumber,Y.range.endColumn):null}selectAll(K){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const U=this._editor.getModel();return K?U.findMatches(this.searchText,K,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824):U.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(132):null,!1,1073741824)}}e.MultiCursorSession=w;class S extends L.Disposable{static{this.ID="editor.contrib.multiCursorController"}static get(K){return K.getContribution(S.ID)}constructor(K){super(),this._sessionDispose=this._register(new L.DisposableStore),this._editor=K,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(K){if(!this._session){const U=w.create(this._editor,K);if(!U)return;this._session=U;const Y={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(Y.wholeWordOverride=1,Y.matchCaseOverride=1,Y.isRegexOverride=2),K.getState().change(Y,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection(Q=>{this._ignoreSelectionChange||this._endSession()})),this._sessionDispose.add(this._editor.onDidBlurEditorText(()=>{this._endSession()})),this._sessionDispose.add(K.getState().onFindReplaceStateChange(Q=>{(Q.matchCase||Q.wholeWord)&&this._endSession()}))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const K={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(K,!1)}this._session=null}_setSelections(K){this._ignoreSelectionChange=!0,this._editor.setSelections(K),this._ignoreSelectionChange=!1}_expandEmptyToWord(K,U){if(!U.isEmpty())return U;const Y=this._editor.getConfiguredWordAtPosition(U.getStartPosition());return Y?new b.Selection(U.startLineNumber,Y.startColumn,U.startLineNumber,Y.endColumn):U}_applySessionResult(K){K&&(this._setSelections(K.selections),K.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(K.revealRange,K.revealScrollType))}getSession(K){return this._session}addSelectionToNextFindMatch(K){if(this._editor.hasModel()){if(!this._session){const U=this._editor.getSelections();if(U.length>1){const Q=K.getState().matchCase;if(!F(this._editor.getModel(),U,Q)){const G=this._editor.getModel(),P=[];for(let te=0,se=U.length;te<se;te++)P[te]=this._expandEmptyToWord(G,U[te]);this._editor.setSelections(P);return}}}this._beginSessionIfNeeded(K),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(K){this._beginSessionIfNeeded(K),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(K){this._beginSessionIfNeeded(K),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(K){this._beginSessionIfNeeded(K),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(K){if(!this._editor.hasModel())return;let U=null;const Y=K.getState();if(Y.isRevealed&&Y.searchString.length>0&&Y.isRegex){const Q=this._editor.getModel();Y.searchScope?U=Q.findMatches(Y.searchString,Y.searchScope,Y.isRegex,Y.matchCase,Y.wholeWord?this._editor.getOption(132):null,!1,1073741824):U=Q.findMatches(Y.searchString,!0,Y.isRegex,Y.matchCase,Y.wholeWord?this._editor.getOption(132):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(K),!this._session)return;U=this._session.selectAll(Y.searchScope)}if(U.length>0){const Q=this._editor.getSelection();for(let X=0,G=U.length;X<G;X++){const P=U[X];if(P.range.intersectRanges(Q)){U[X]=U[0],U[0]=P;break}}this._setSelections(U.map(X=>new b.Selection(X.range.startLineNumber,X.range.startColumn,X.range.endLineNumber,X.range.endColumn)))}}}e.MultiCursorSelectionController=S;class D extends y.EditorAction{run(K,U){const Y=S.get(U);if(!Y)return;const Q=U._getViewModel();if(Q){const X=Q.getCursorStates(),G=n.CommonFindController.get(U);if(G)this._run(Y,G);else{const P=K.get(u.IInstantiationService).createInstance(n.CommonFindController,U);this._run(Y,P),P.dispose()}a(X,Q.getCursorStates())}}}e.MultiCursorSelectionControllerAction=D;class I extends D{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:s.localize(544,"Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.focus,primary:2082,weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(545,"Add &&Next Occurrence"),order:5}})}_run(K,U){K.addSelectionToNextFindMatch(U)}}e.AddSelectionToNextFindMatchAction=I;class T extends D{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:s.localize(546,"Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(547,"Add P&&revious Occurrence"),order:6}})}_run(K,U){K.addSelectionToPreviousFindMatch(U)}}e.AddSelectionToPreviousFindMatchAction=T;class M extends D{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:s.localize(548,"Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.focus,primary:(0,E.KeyChord)(2089,2082),weight:100}})}_run(K,U){K.moveSelectionToNextFindMatch(U)}}e.MoveSelectionToNextFindMatchAction=M;class A extends D{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:s.localize(549,"Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(K,U){K.moveSelectionToPreviousFindMatch(U)}}e.MoveSelectionToPreviousFindMatchAction=A;class R extends D{constructor(){super({id:"editor.action.selectHighlights",label:s.localize(550,"Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:p.EditorContextKeys.focus,primary:3114,weight:100},menuOpts:{menuId:t.MenuId.MenubarSelectionMenu,group:"3_multi",title:s.localize(551,"Select All &&Occurrences"),order:7}})}_run(K,U){K.selectAll(U)}}e.SelectHighlightsAction=R;class N extends D{constructor(){super({id:"editor.action.changeAll",label:s.localize(552,"Change All Occurrences"),alias:"Change All Occurrences",precondition:i.ContextKeyExpr.and(p.EditorContextKeys.writable,p.EditorContextKeys.editorTextFocus),kbOpts:{kbExpr:p.EditorContextKeys.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(K,U){K.selectAll(U)}}e.CompatChangeAll=N;class O{constructor(K,U,Y,Q,X){this._model=K,this._searchText=U,this._matchCase=Y,this._wordSeparators=Q,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,X&&this._model===X._model&&this._searchText===X._searchText&&this._matchCase===X._matchCase&&this._wordSeparators===X._wordSeparators&&this._modelVersionId===X._modelVersionId&&(this._cachedFindMatches=X._cachedFindMatches)}findMatches(){return this._cachedFindMatches===null&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map(K=>K.range),this._cachedFindMatches.sort(_.Range.compareRangesUsingStarts)),this._cachedFindMatches}}let x=class extends L.Disposable{static{l=this}static{this.ID="editor.contrib.selectionHighlighter"}constructor(K,U){super(),this._languageFeaturesService=U,this.editor=K,this._isEnabled=K.getOption(109),this._decorations=K.createDecorationsCollection(),this.updateSoon=this._register(new k.RunOnceScheduler(()=>this._update(),300)),this.state=null,this._register(K.onDidChangeConfiguration(Q=>{this._isEnabled=K.getOption(109)})),this._register(K.onDidChangeCursorSelection(Q=>{this._isEnabled&&(Q.selection.isEmpty()?Q.reason===3?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())})),this._register(K.onDidChangeModel(Q=>{this._setState(null)})),this._register(K.onDidChangeModelContent(Q=>{this._isEnabled&&this.updateSoon.schedule()}));const Y=n.CommonFindController.get(K);Y&&this._register(Y.getState().onFindReplaceStateChange(Q=>{this._update()})),this.updateSoon.schedule()}_update(){this._setState(l._createState(this.state,this._isEnabled,this.editor))}static _createState(K,U,Y){if(!U||!Y.hasModel())return null;const Q=Y.getSelection();if(Q.startLineNumber!==Q.endLineNumber)return null;const X=S.get(Y);if(!X)return null;const G=n.CommonFindController.get(Y);if(!G)return null;let P=X.getSession(G);if(!P){const ue=Y.getSelections();if(ue.length>1){const pe=G.getState().matchCase;if(!F(Y.getModel(),ue,pe))return null}P=w.create(Y,G)}if(!P||P.currentMatch||/^[ \t]+$/.test(P.searchText)||P.searchText.length>200)return null;const te=G.getState(),se=te.matchCase;if(te.isRevealed){let ue=te.searchString;se||(ue=ue.toLowerCase());let ge=P.searchText;if(se||(ge=ge.toLowerCase()),ue===ge&&P.matchCase===te.matchCase&&P.wholeWord===te.wholeWord&&!te.isRegex)return null}return new O(Y.getModel(),P.searchText,P.matchCase,P.wholeWord?Y.getOption(132):null,K)}_setState(K){if(this.state=K,!this.state){this._decorations.clear();return}if(!this.editor.hasModel())return;const U=this.editor.getModel();if(U.isTooLargeForTokenization())return;const Y=this.state.findMatches(),Q=this.editor.getSelections();Q.sort(_.Range.compareRangesUsingStarts);const X=[];for(let se=0,ue=0,ge=Y.length,pe=Q.length;se<ge;){const ce=Y[se];if(ue>=pe)X.push(ce),se++;else{const ie=_.Range.compareRangesUsingStarts(ce,Q[ue]);ie<0?((Q[ue].isEmpty()||!_.Range.areIntersecting(ce,Q[ue]))&&X.push(ce),se++):(ie>0||se++,ue++)}}const G=this.editor.getOption(81)!=="off",P=this._languageFeaturesService.documentHighlightProvider.has(U)&&G,te=X.map(se=>({range:se,options:(0,g.getSelectionHighlightDecorationOptions)(P)}));this._decorations.set(te)}dispose(){this._setState(null),super.dispose()}};e.SelectionHighlighter=x,e.SelectionHighlighter=x=l=De([he(1,o.ILanguageFeaturesService)],x);function F(H,K,U){const Y=W(H,K[0],!U);for(let Q=1,X=K.length;Q<X;Q++){const G=K[Q];if(G.isEmpty())return!1;const P=W(H,G,!U);if(Y!==P)return!1}return!0}function W(H,K,U){const Y=H.getValueInRange(K);return U?Y.toLowerCase():Y}class z extends y.EditorAction{constructor(){super({id:"editor.action.focusNextCursor",label:s.localize(553,"Focus Next Cursor"),metadata:{description:s.localize(554,"Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(K,U,Y){if(!U.hasModel())return;const Q=U._getViewModel();if(Q.cursorConfig.readOnly)return;Q.model.pushStackElement();const X=Array.from(Q.getCursorStates()),G=X.shift();G&&(X.push(G),Q.setCursorStates(Y.source,3,X),Q.revealPrimaryCursor(Y.source,!0),a(X,Q.getCursorStates()))}}e.FocusNextCursor=z;class q extends y.EditorAction{constructor(){super({id:"editor.action.focusPreviousCursor",label:s.localize(555,"Focus Previous Cursor"),metadata:{description:s.localize(556,"Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(K,U,Y){if(!U.hasModel())return;const Q=U._getViewModel();if(Q.cursorConfig.readOnly)return;Q.model.pushStackElement();const X=Array.from(Q.getCursorStates()),G=X.pop();G&&(X.unshift(G),Q.setCursorStates(Y.source,3,X),Q.revealPrimaryCursor(Y.source,!0),a(X,Q.getCursorStates()))}}e.FocusPreviousCursor=q,(0,y.registerEditorContribution)(S.ID,S,4),(0,y.registerEditorContribution)(x.ID,x,1),(0,y.registerEditorAction)(r),(0,y.registerEditorAction)(d),(0,y.registerEditorAction)(m),(0,y.registerEditorAction)(I),(0,y.registerEditorAction)(T),(0,y.registerEditorAction)(M),(0,y.registerEditorAction)(A),(0,y.registerEditorAction)(R),(0,y.registerEditorAction)(N),(0,y.registerEditorAction)(h),(0,y.registerEditorAction)(v),(0,y.registerEditorAction)(z),(0,y.registerEditorAction)(q)}),define(oe[832],re([1,0,3,13,48,14,18,8,2,171,15,35,4,20,28,40,17,421,12,47,45,333]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";var m,h;Object.defineProperty(e,"__esModule",{value:!0}),e.WordHighlighterContribution=void 0,e.getOccurrencesAtPosition=C,e.getOccurrencesAcrossMultipleModels=w;const v=new l.RawContextKey("hasWordHighlights",!1);function C(z,q,H,K){const U=z.ordered(q);return(0,L.first)(U.map(Y=>()=>Promise.resolve(Y.provideDocumentHighlights(q,H,K)).then(void 0,f.onUnexpectedExternalError)),k.isNonEmptyArray).then(Y=>{if(Y){const Q=new r.ResourceMap;return Q.set(q.uri,Y),Q}return new r.ResourceMap})}function w(z,q,H,K,U,Y){const Q=z.ordered(q);return(0,L.first)(Q.map(X=>()=>{const G=Y.filter(P=>(0,o.shouldSynchronizeModel)(P)).filter(P=>(0,d.score)(X.selector,P.uri,P.getLanguageId(),!0,void 0,void 0)>0);return Promise.resolve(X.provideMultiDocumentHighlights(q,H,G,U)).then(void 0,f.onUnexpectedExternalError)}),X=>X instanceof r.ResourceMap&&X.size>0)}class S{constructor(q,H,K){this._model=q,this._selection=H,this._wordSeparators=K,this._wordRange=this._getCurrentWordRange(q,H),this._result=null}get result(){return this._result||(this._result=(0,L.createCancelablePromise)(q=>this._compute(this._model,this._selection,this._wordSeparators,q))),this._result}_getCurrentWordRange(q,H){const K=q.getWordAtPosition(H.getPosition());return K?new s.Range(H.startLineNumber,K.startColumn,H.startLineNumber,K.endColumn):null}isValid(q,H,K){const U=H.startLineNumber,Y=H.startColumn,Q=H.endColumn,X=this._getCurrentWordRange(q,H);let G=!!(this._wordRange&&this._wordRange.equalsRange(X));for(let P=0,te=K.length;!G&&P<te;P++){const se=K.getRange(P);se&&se.startLineNumber===U&&se.startColumn<=Y&&se.endColumn>=Q&&(G=!0)}return G}cancel(){this.result.cancel()}}class D extends S{constructor(q,H,K,U){super(q,H,K),this._providers=U}_compute(q,H,K,U){return C(this._providers,q,H.getPosition(),U).then(Y=>Y||new r.ResourceMap)}}class I extends S{constructor(q,H,K,U,Y){super(q,H,K),this._providers=U,this._otherModels=Y}_compute(q,H,K,U){return w(this._providers,q,H.getPosition(),K,U,this._otherModels).then(Y=>Y||new r.ResourceMap)}}class T extends S{constructor(q,H,K,U,Y){super(q,H,U),this._otherModels=Y,this._selectionIsEmpty=H.isEmpty(),this._word=K}_compute(q,H,K,U){return(0,L.timeout)(250,U).then(()=>{const Y=new r.ResourceMap;let Q;if(this._word?Q=this._word:Q=q.getWordAtPosition(H.getPosition()),!Q)return new r.ResourceMap;const X=[q,...this._otherModels];for(const G of X){if(G.isDisposed())continue;const te=G.findMatches(Q.word,!0,!1,!0,K,!1).map(se=>({range:se.range,kind:i.DocumentHighlightKind.Text}));te&&Y.set(G.uri,te)}return Y})}isValid(q,H,K){const U=H.isEmpty();return this._selectionIsEmpty!==U?!1:super.isValid(q,H,K)}}function M(z,q,H,K,U){return z.has(q)?new D(q,H,U,z):new T(q,H,K,U,[])}function A(z,q,H,K,U,Y){return z.has(q)?new I(q,H,U,z,Y):new T(q,H,K,U,Y)}(0,p.registerModelAndPositionCommand)("_executeDocumentHighlights",async(z,q,H)=>{const K=z.get(g.ILanguageFeaturesService);return(await C(K.documentHighlightProvider,q,H,y.CancellationToken.None))?.get(q.uri)});let R=class{static{m=this}static{this.storedDecorations=new r.ResourceMap}static{this.query=null}constructor(q,H,K,U,Y){this.toUnhook=new _.DisposableStore,this.workerRequestTokenId=0,this.workerRequestCompleted=!1,this.workerRequestValue=new r.ResourceMap,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,this.editor=q,this.providers=H,this.multiDocumentProviders=K,this.codeEditorService=Y,this._hasWordHighlights=v.bindTo(U),this._ignorePositionChangeEvent=!1,this.occurrencesHighlight=this.editor.getOption(81),this.model=this.editor.getModel(),this.toUnhook.add(q.onDidChangeCursorPosition(Q=>{this._ignorePositionChangeEvent||this.occurrencesHighlight!=="off"&&this._onPositionChanged(Q)})),this.toUnhook.add(q.onDidFocusEditorText(Q=>{this.occurrencesHighlight!=="off"&&(this.workerRequest||this._run())})),this.toUnhook.add(q.onDidChangeModelContent(Q=>{this._stopAll()})),this.toUnhook.add(q.onDidChangeModel(Q=>{!Q.newModelUrl&&Q.oldModelUrl?this._stopSingular():m.query&&this._run()})),this.toUnhook.add(q.onDidChangeConfiguration(Q=>{const X=this.editor.getOption(81);this.occurrencesHighlight!==X&&(this.occurrencesHighlight=X,this._stopAll())})),this.decorations=this.editor.createDecorationsCollection(),this.workerRequestTokenId=0,this.workerRequest=null,this.workerRequestCompleted=!1,this.lastCursorPositionChangeTime=0,this.renderDecorationsTimer=-1,m.query&&this._run()}hasDecorations(){return this.decorations.length>0}restore(){this.occurrencesHighlight!=="off"&&this._run()}_getSortedHighlights(){return this.decorations.getRanges().sort(s.Range.compareRangesUsingStarts)}moveNext(){const q=this._getSortedHighlights(),K=(q.findIndex(Y=>Y.containsPosition(this.editor.getPosition()))+1)%q.length,U=q[K];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(U.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(U);const Y=this._getWord();if(Y){const Q=this.editor.getModel().getLineContent(U.startLineNumber);(0,E.alert)(`${Q}, ${K+1} of ${q.length} for '${Y.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}moveBack(){const q=this._getSortedHighlights(),K=(q.findIndex(Y=>Y.containsPosition(this.editor.getPosition()))-1+q.length)%q.length,U=q[K];try{this._ignorePositionChangeEvent=!0,this.editor.setPosition(U.getStartPosition()),this.editor.revealRangeInCenterIfOutsideViewport(U);const Y=this._getWord();if(Y){const Q=this.editor.getModel().getLineContent(U.startLineNumber);(0,E.alert)(`${Q}, ${K+1} of ${q.length} for '${Y.word}'`)}}finally{this._ignorePositionChangeEvent=!1}}_removeSingleDecorations(){if(!this.editor.hasModel())return;const q=m.storedDecorations.get(this.editor.getModel().uri);q&&(this.editor.removeDecorations(q),m.storedDecorations.delete(this.editor.getModel().uri),this.decorations.length>0&&(this.decorations.clear(),this._hasWordHighlights.set(!1)))}_removeAllDecorations(){const q=this.codeEditorService.listCodeEditors(),H=[];for(const K of q){if(!K.hasModel())continue;const U=m.storedDecorations.get(K.getModel().uri);if(!U)continue;K.removeDecorations(U),H.push(K.getModel().uri);const Y=N.get(K);Y?.wordHighlighter&&Y.wordHighlighter.decorations.length>0&&(Y.wordHighlighter.decorations.clear(),Y.wordHighlighter.workerRequest=null,Y.wordHighlighter._hasWordHighlights.set(!1))}for(const K of H)m.storedDecorations.delete(K)}_stopSingular(){this._removeSingleDecorations(),this.editor.hasTextFocus()&&(this.editor.getModel()?.uri.scheme!==a.Schemas.vscodeNotebookCell&&m.query?.modelInfo?.model.uri.scheme!==a.Schemas.vscodeNotebookCell?(m.query=null,this._run()):m.query?.modelInfo&&(m.query.modelInfo=null)),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_stopAll(){this._removeAllDecorations(),this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1),this.workerRequest!==null&&(this.workerRequest.cancel(),this.workerRequest=null),this.workerRequestCompleted||(this.workerRequestTokenId++,this.workerRequestCompleted=!0)}_onPositionChanged(q){if(this.occurrencesHighlight==="off"){this._stopAll();return}if(q.reason!==3&&this.editor.getModel()?.uri.scheme!==a.Schemas.vscodeNotebookCell){this._stopAll();return}this._run()}_getWord(){const q=this.editor.getSelection(),H=q.startLineNumber,K=q.startColumn;return this.model.isDisposed()?null:this.model.getWordAtPosition({lineNumber:H,column:K})}getOtherModelsToHighlight(q){if(!q)return[];if(q.uri.scheme===a.Schemas.vscodeNotebookCell){const Y=[],Q=this.codeEditorService.listCodeEditors();for(const X of Q){const G=X.getModel();G&&G!==q&&G.uri.scheme===a.Schemas.vscodeNotebookCell&&Y.push(G)}return Y}const K=[],U=this.codeEditorService.listCodeEditors();for(const Y of U){if(!(0,b.isDiffEditor)(Y))continue;const Q=Y.getModel();Q&&q===Q.modified&&K.push(Q.modified)}if(K.length)return K;if(this.occurrencesHighlight==="singleFile")return[];for(const Y of U){const Q=Y.getModel();Q&&Q!==q&&K.push(Q)}return K}_run(){let q;if(this.editor.hasTextFocus()){const K=this.editor.getSelection();if(!K||K.startLineNumber!==K.endLineNumber){m.query=null,this._stopAll();return}const U=K.startColumn,Y=K.endColumn,Q=this._getWord();if(!Q||Q.startColumn>U||Q.endColumn<Y){m.query=null,this._stopAll();return}q=this.workerRequest&&this.workerRequest.isValid(this.model,K,this.decorations),m.query={modelInfo:{model:this.model,selection:K},word:Q}}else if(!m.query)return;if(this.lastCursorPositionChangeTime=new Date().getTime(),q)this.workerRequestCompleted&&this.renderDecorationsTimer!==-1&&(clearTimeout(this.renderDecorationsTimer),this.renderDecorationsTimer=-1,this._beginRenderDecorations());else{this._stopAll();const K=++this.workerRequestTokenId;this.workerRequestCompleted=!1;const U=this.getOtherModelsToHighlight(this.editor.getModel());if(!m.query.modelInfo||m.query.modelInfo.model.isDisposed())return;this.workerRequest=this.computeWithModel(m.query.modelInfo.model,m.query.modelInfo.selection,m.query.word,U),this.workerRequest?.result.then(Y=>{K===this.workerRequestTokenId&&(this.workerRequestCompleted=!0,this.workerRequestValue=Y||[],this._beginRenderDecorations())},f.onUnexpectedError)}}computeWithModel(q,H,K,U){return U.length?A(this.multiDocumentProviders,q,H,K,this.editor.getOption(132),U):M(this.providers,q,H,K,this.editor.getOption(132))}_beginRenderDecorations(){const q=new Date().getTime(),H=this.lastCursorPositionChangeTime+250;q>=H?(this.renderDecorationsTimer=-1,this.renderDecorations()):this.renderDecorationsTimer=setTimeout(()=>{this.renderDecorations()},H-q)}renderDecorations(){this.renderDecorationsTimer=-1;const q=this.codeEditorService.listCodeEditors();for(const H of q){const K=N.get(H);if(!K)continue;const U=[],Y=H.getModel()?.uri;if(Y&&this.workerRequestValue.has(Y)){const Q=m.storedDecorations.get(Y),X=this.workerRequestValue.get(Y);if(X)for(const P of X)P.range&&U.push({range:P.range,options:(0,u.getHighlightDecorationOptions)(P.kind)});let G=[];H.changeDecorations(P=>{G=P.deltaDecorations(Q??[],U)}),m.storedDecorations=m.storedDecorations.set(Y,G),U.length>0&&(K.wordHighlighter?.decorations.set(U),K.wordHighlighter?._hasWordHighlights.set(!0))}}}dispose(){this._stopSingular(),this.toUnhook.dispose()}};R=m=De([he(4,n.ICodeEditorService)],R);let N=class extends _.Disposable{static{h=this}static{this.ID="editor.contrib.wordHighlighter"}static get(q){return q.getContribution(h.ID)}constructor(q,H,K,U){super(),this._wordHighlighter=null;const Y=()=>{q.hasModel()&&!q.getModel().isTooLargeForTokenization()&&(this._wordHighlighter=new R(q,K.documentHighlightProvider,K.multiDocumentHighlightProvider,H,U))};this._register(q.onDidChangeModel(Q=>{this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),Y()})),Y()}get wordHighlighter(){return this._wordHighlighter}saveViewState(){return!!(this._wordHighlighter&&this._wordHighlighter.hasDecorations())}moveNext(){this._wordHighlighter?.moveNext()}moveBack(){this._wordHighlighter?.moveBack()}restoreViewState(q){this._wordHighlighter&&q&&this._wordHighlighter.restore()}dispose(){this._wordHighlighter&&(this._wordHighlighter.dispose(),this._wordHighlighter=null),super.dispose()}};e.WordHighlighterContribution=N,e.WordHighlighterContribution=N=h=De([he(1,l.IContextKeyService),he(2,g.ILanguageFeaturesService),he(3,n.ICodeEditorService)],N);class O extends p.EditorAction{constructor(q,H){super(H),this._isNext=q}run(q,H){const K=N.get(H);K&&(this._isNext?K.moveNext():K.moveBack())}}class x extends O{constructor(){super(!0,{id:"editor.action.wordHighlight.next",label:c.localize(279,"Go to Next Symbol Highlight"),alias:"Go to Next Symbol Highlight",precondition:v,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:65,weight:100}})}}class F extends O{constructor(){super(!1,{id:"editor.action.wordHighlight.prev",label:c.localize(280,"Go to Previous Symbol Highlight"),alias:"Go to Previous Symbol Highlight",precondition:v,kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:1089,weight:100}})}}class W extends p.EditorAction{constructor(){super({id:"editor.action.wordHighlight.trigger",label:c.localize(281,"Trigger Symbol Highlight"),alias:"Trigger Symbol Highlight",precondition:v.toNegated(),kbOpts:{kbExpr:t.EditorContextKeys.editorTextFocus,primary:0,weight:100}})}run(q,H,K){const U=N.get(H);U&&U.restoreViewState(!0)}}(0,p.registerEditorContribution)(N.ID,N,0),(0,p.registerEditorAction)(x),(0,p.registerEditorAction)(F),(0,p.registerEditorAction)(W)}),define(oe[833],re([1,0,5,164,33,187,2,54,4,36,546]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ZoneWidget=e.OverlayWidgetDelegate=void 0;const p=new E.Color(new E.RGBA(0,122,204)),n={showArrow:!0,showFrame:!0,className:"",frameColor:p,arrowColor:p,keepEditorSelection:!1},s="vs.editor.contrib.zoneWidget";class t{constructor(l,a,r,d,m,h,v,C){this.id="",this.domNode=l,this.afterLineNumber=a,this.afterColumn=r,this.heightInLines=d,this.showInHiddenAreas=v,this.ordinal=C,this._onDomNodeTop=m,this._onComputedHeight=h}onDomNodeTop(l){this._onDomNodeTop(l)}onComputedHeight(l){this._onComputedHeight(l)}}class i{constructor(l,a){this._id=l,this._domNode=a}getId(){return this._id}getDomNode(){return this._domNode}getPosition(){return null}}e.OverlayWidgetDelegate=i;class o{static{this._IdGenerator=new L.IdGenerator(".arrow-decoration-")}constructor(l){this._editor=l,this._ruleName=o._IdGenerator.nextId(),this._decorations=this._editor.createDecorationsCollection(),this._color=null,this._height=-1}dispose(){this.hide(),c.removeCSSRulesContainingSelector(this._ruleName)}set color(l){this._color!==l&&(this._color=l,this._updateStyle())}set height(l){this._height!==l&&(this._height=l,this._updateStyle())}_updateStyle(){c.removeCSSRulesContainingSelector(this._ruleName),c.createCSSRule(`.monaco-editor ${this._ruleName}`,`border-style: solid; border-color: transparent; border-bottom-color: ${this._color}; border-width: ${this._height}px; bottom: -${this._height}px !important; margin-left: -${this._height}px; `)}show(l){l.column===1&&(l={lineNumber:l.lineNumber,column:2}),this._decorations.set([{range:_.Range.fromPositions(l),options:{description:"zone-widget-arrow",className:this._ruleName,stickiness:1}}])}hide(){this._decorations.clear()}}class g{constructor(l,a={}){this._arrow=null,this._overlayWidget=null,this._resizeSash=null,this._viewZone=null,this._disposables=new y.DisposableStore,this.container=null,this._isShowing=!1,this.editor=l,this._positionMarkerId=this.editor.createDecorationsCollection(),this.options=f.deepClone(a),f.mixin(this.options,n,!1),this.domNode=document.createElement("div"),this.options.isAccessible||(this.domNode.setAttribute("aria-hidden","true"),this.domNode.setAttribute("role","presentation")),this._disposables.add(this.editor.onDidLayoutChange(r=>{const d=this._getWidth(r);this.domNode.style.width=d+"px",this.domNode.style.left=this._getLeft(r)+"px",this._onWidth(d)}))}dispose(){this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._viewZone&&this.editor.changeViewZones(l=>{this._viewZone&&l.removeZone(this._viewZone.id),this._viewZone=null}),this._positionMarkerId.clear(),this._disposables.dispose()}create(){this.domNode.classList.add("zone-widget"),this.options.className&&this.domNode.classList.add(this.options.className),this.container=document.createElement("div"),this.container.classList.add("zone-widget-container"),this.domNode.appendChild(this.container),this.options.showArrow&&(this._arrow=new o(this.editor),this._disposables.add(this._arrow)),this._fillContainer(this.container),this._initSash(),this._applyStyles()}style(l){l.frameColor&&(this.options.frameColor=l.frameColor),l.arrowColor&&(this.options.arrowColor=l.arrowColor),this._applyStyles()}_applyStyles(){if(this.container&&this.options.frameColor){const l=this.options.frameColor.toString();this.container.style.borderTopColor=l,this.container.style.borderBottomColor=l}if(this._arrow&&this.options.arrowColor){const l=this.options.arrowColor.toString();this._arrow.color=l}}_getWidth(l){return l.width-l.minimap.minimapWidth-l.verticalScrollbarWidth}_getLeft(l){return l.minimap.minimapWidth>0&&l.minimap.minimapLeft===0?l.minimap.minimapWidth:0}_onViewZoneTop(l){this.domNode.style.top=l+"px"}_onViewZoneHeight(l){if(this.domNode.style.height=`${l}px`,this.container){const a=l-this._decoratingElementsHeight();this.container.style.height=`${a}px`;const r=this.editor.getLayoutInfo();this._doLayout(a,this._getWidth(r))}this._resizeSash?.layout()}get position(){const l=this._positionMarkerId.getRange(0);if(l)return l.getStartPosition()}show(l,a){const r=_.Range.isIRange(l)?_.Range.lift(l):_.Range.fromPositions(l);this._isShowing=!0,this._showImpl(r,a),this._isShowing=!1,this._positionMarkerId.set([{range:r,options:b.ModelDecorationOptions.EMPTY}])}hide(){this._viewZone&&(this.editor.changeViewZones(l=>{this._viewZone&&l.removeZone(this._viewZone.id)}),this._viewZone=null),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this._arrow?.hide(),this._positionMarkerId.clear()}_decoratingElementsHeight(){const l=this.editor.getOption(67);let a=0;if(this.options.showArrow){const r=Math.round(l/3);a+=2*r}if(this.options.showFrame){const r=Math.round(l/9);a+=2*r}return a}_showImpl(l,a){const r=l.getStartPosition(),d=this.editor.getLayoutInfo(),m=this._getWidth(d);this.domNode.style.width=`${m}px`,this.domNode.style.left=this._getLeft(d)+"px";const h=document.createElement("div");h.style.overflow="hidden";const v=this.editor.getOption(67);if(!this.options.allowUnlimitedHeight){const I=Math.max(12,this.editor.getLayoutInfo().height/v*.8);a=Math.min(a,I)}let C=0,w=0;if(this._arrow&&this.options.showArrow&&(C=Math.round(v/3),this._arrow.height=C,this._arrow.show(r)),this.options.showFrame&&(w=Math.round(v/9)),this.editor.changeViewZones(I=>{this._viewZone&&I.removeZone(this._viewZone.id),this._overlayWidget&&(this.editor.removeOverlayWidget(this._overlayWidget),this._overlayWidget=null),this.domNode.style.top="-1000px",this._viewZone=new t(h,r.lineNumber,r.column,a,T=>this._onViewZoneTop(T),T=>this._onViewZoneHeight(T),this.options.showInHiddenAreas,this.options.ordinal),this._viewZone.id=I.addZone(this._viewZone),this._overlayWidget=new i(s+this._viewZone.id,this.domNode),this.editor.addOverlayWidget(this._overlayWidget)}),this.container&&this.options.showFrame){const I=this.options.frameWidth?this.options.frameWidth:w;this.container.style.borderTopWidth=I+"px",this.container.style.borderBottomWidth=I+"px"}const S=a*v-this._decoratingElementsHeight();this.container&&(this.container.style.top=C+"px",this.container.style.height=S+"px",this.container.style.overflow="hidden"),this._doLayout(S,m),this.options.keepEditorSelection||this.editor.setSelection(l);const D=this.editor.getModel();if(D){const I=D.validateRange(new _.Range(l.startLineNumber,1,l.endLineNumber+1,1));this.revealRange(I,I.startLineNumber===D.getLineCount())}}revealRange(l,a){a?this.editor.revealLineNearTop(l.endLineNumber,0):this.editor.revealRange(l,0)}setCssClass(l,a){this.container&&(a&&this.container.classList.remove(a),this.container.classList.add(l))}_onWidth(l){}_doLayout(l,a){}_relayout(l){this._viewZone&&this._viewZone.heightInLines!==l&&this.editor.changeViewZones(a=>{this._viewZone&&(this._viewZone.heightInLines=l,a.layoutZone(this._viewZone.id))})}_initSash(){if(this._resizeSash)return;this._resizeSash=this._disposables.add(new k.Sash(this.domNode,this,{orientation:1})),this.options.isResizeable||(this._resizeSash.state=0);let l;this._disposables.add(this._resizeSash.onDidStart(a=>{this._viewZone&&(l={startY:a.startY,heightInLines:this._viewZone.heightInLines})})),this._disposables.add(this._resizeSash.onDidEnd(()=>{l=void 0})),this._disposables.add(this._resizeSash.onDidChange(a=>{if(l){const r=(a.currentY-l.startY)/this.editor.getOption(67),d=r<0?Math.ceil(r):Math.floor(r),m=l.heightInLines+d;m>5&&m<35&&this._relayout(m)}}))}getHorizontalSashLeft(){return 0}getHorizontalSashTop(){return(this.domNode.style.height===null?0:parseInt(this.domNode.style.height))-this._decoratingElementsHeight()/2}getHorizontalSashWidth(){const l=this.editor.getLayoutInfo();return l.width-l.minimap.minimapWidth}}e.ZoneWidget=g}),define(oe[156],re([1,0,5,87,41,26,30,33,6,54,15,35,125,833,3,124,12,49,7,32,536]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.peekViewEditorMatchHighlightBorder=e.peekViewEditorMatchHighlight=e.peekViewResultsMatchHighlight=e.peekViewEditorStickyScrollBackground=e.peekViewEditorGutterBackground=e.peekViewEditorBackground=e.peekViewResultsSelectionForeground=e.peekViewResultsSelectionBackground=e.peekViewResultsFileForeground=e.peekViewResultsMatchForeground=e.peekViewResultsBackground=e.peekViewBorder=e.peekViewTitleInfoForeground=e.peekViewTitleForeground=e.peekViewTitleBackground=e.PeekViewWidget=e.PeekContext=e.IPeekViewService=void 0,e.getOuterEditor=m,e.IPeekViewService=(0,l.createDecorator)("IPeekViewService"),(0,u.registerSingleton)(e.IPeekViewService,class{constructor(){this._widgets=new Map}addExclusiveWidget(C,w){const S=this._widgets.get(C);S&&(S.listener.dispose(),S.widget.dispose());const D=()=>{const I=this._widgets.get(C);I&&I.widget===w&&(I.listener.dispose(),this._widgets.delete(C))};this._widgets.set(C,{widget:w,listener:w.onDidClose(D)})}},1);var r;(function(C){C.inPeekEditor=new g.RawContextKey("inReferenceSearchEditor",!0,i.localize(512,"Whether the current code editor is embedded inside peek")),C.notInPeekEditor=C.inPeekEditor.toNegated()})(r||(e.PeekContext=r={}));let d=class{static{this.ID="editor.contrib.referenceController"}constructor(w,S){w instanceof s.EmbeddedCodeEditorWidget&&r.inPeekEditor.bindTo(S)}dispose(){}};d=De([he(1,g.IContextKeyService)],d),(0,p.registerEditorContribution)(d.ID,d,0);function m(C){const w=C.get(n.ICodeEditorService).getFocusedCodeEditor();return w instanceof s.EmbeddedCodeEditorWidget?w.getParentEditor():w}const h={headerBackgroundColor:f.Color.white,primaryHeadingColor:f.Color.fromHex("#333333"),secondaryHeadingColor:f.Color.fromHex("#6c6c6cb3")};let v=class extends t.ZoneWidget{constructor(w,S,D){super(w,S),this.instantiationService=D,this._onDidClose=new _.Emitter,this.onDidClose=this._onDidClose.event,b.mixin(this.options,h,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(w){const S=this.options;w.headerBackgroundColor&&(S.headerBackgroundColor=w.headerBackgroundColor),w.primaryHeadingColor&&(S.primaryHeadingColor=w.primaryHeadingColor),w.secondaryHeadingColor&&(S.secondaryHeadingColor=w.secondaryHeadingColor),super.style(w)}_applyStyles(){super._applyStyles();const w=this.options;this._headElement&&w.headerBackgroundColor&&(this._headElement.style.backgroundColor=w.headerBackgroundColor.toString()),this._primaryHeading&&w.primaryHeadingColor&&(this._primaryHeading.style.color=w.primaryHeadingColor.toString()),this._secondaryHeading&&w.secondaryHeadingColor&&(this._secondaryHeading.style.color=w.secondaryHeadingColor.toString()),this._bodyElement&&w.frameColor&&(this._bodyElement.style.borderColor=w.frameColor.toString())}_fillContainer(w){this.setCssClass("peekview-widget"),this._headElement=c.$(".head"),this._bodyElement=c.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),w.appendChild(this._headElement),w.appendChild(this._bodyElement)}_fillHead(w,S){this._titleElement=c.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),c.addStandardDisposableListener(this._titleElement,"click",T=>this._onTitleClick(T))),c.append(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=c.$("span.filename"),this._secondaryHeading=c.$("span.dirname"),this._metaHeading=c.$("span.meta"),c.append(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const D=c.$(".peekview-actions");c.append(this._headElement,D);const I=this._getActionBarOptions();this._actionbarWidget=new k.ActionBar(D,I),this._disposables.add(this._actionbarWidget),S||this._actionbarWidget.push(new E.Action("peekview.close",i.localize(513,"Close"),y.ThemeIcon.asClassName(L.Codicon.close),!0,()=>(this.dispose(),Promise.resolve())),{label:!1,icon:!0})}_fillTitleIcon(w){}_getActionBarOptions(){return{actionViewItemProvider:o.createActionViewItem.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(w){}setTitle(w,S){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=w,this._primaryHeading.setAttribute("title",w),S?this._secondaryHeading.innerText=S:c.clearNode(this._secondaryHeading))}setMetaTitle(w){this._metaHeading&&(w?(this._metaHeading.innerText=w,c.show(this._metaHeading)):c.hide(this._metaHeading))}_doLayout(w,S){if(!this._isShowing&&w<0){this.dispose();return}const D=Math.ceil(this.editor.getOption(67)*1.2),I=Math.round(w-(D+2));this._doLayoutHead(D,S),this._doLayoutBody(I,S)}_doLayoutHead(w,S){this._headElement&&(this._headElement.style.height=`${w}px`,this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(w,S){this._bodyElement&&(this._bodyElement.style.height=`${w}px`)}};e.PeekViewWidget=v,e.PeekViewWidget=v=De([he(2,l.IInstantiationService)],v),e.peekViewTitleBackground=(0,a.registerColor)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:f.Color.black,hcLight:f.Color.white},i.localize(514,"Background color of the peek view title area.")),e.peekViewTitleForeground=(0,a.registerColor)("peekViewTitleLabel.foreground",{dark:f.Color.white,light:f.Color.black,hcDark:f.Color.white,hcLight:a.editorForeground},i.localize(515,"Color of the peek view title.")),e.peekViewTitleInfoForeground=(0,a.registerColor)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},i.localize(516,"Color of the peek view title info.")),e.peekViewBorder=(0,a.registerColor)("peekView.border",{dark:a.editorInfoForeground,light:a.editorInfoForeground,hcDark:a.contrastBorder,hcLight:a.contrastBorder},i.localize(517,"Color of the peek view borders and arrow.")),e.peekViewResultsBackground=(0,a.registerColor)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:f.Color.black,hcLight:f.Color.white},i.localize(518,"Background color of the peek view result list.")),e.peekViewResultsMatchForeground=(0,a.registerColor)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:f.Color.white,hcLight:a.editorForeground},i.localize(519,"Foreground color for line nodes in the peek view result list.")),e.peekViewResultsFileForeground=(0,a.registerColor)("peekViewResult.fileForeground",{dark:f.Color.white,light:"#1E1E1E",hcDark:f.Color.white,hcLight:a.editorForeground},i.localize(520,"Foreground color for file nodes in the peek view result list.")),e.peekViewResultsSelectionBackground=(0,a.registerColor)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},i.localize(521,"Background color of the selected entry in the peek view result list.")),e.peekViewResultsSelectionForeground=(0,a.registerColor)("peekViewResult.selectionForeground",{dark:f.Color.white,light:"#6C6C6C",hcDark:f.Color.white,hcLight:a.editorForeground},i.localize(522,"Foreground color of the selected entry in the peek view result list.")),e.peekViewEditorBackground=(0,a.registerColor)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:f.Color.black,hcLight:f.Color.white},i.localize(523,"Background color of the peek view editor.")),e.peekViewEditorGutterBackground=(0,a.registerColor)("peekViewEditorGutter.background",e.peekViewEditorBackground,i.localize(524,"Background color of the gutter in the peek view editor.")),e.peekViewEditorStickyScrollBackground=(0,a.registerColor)("peekViewEditorStickyScroll.background",e.peekViewEditorBackground,i.localize(525,"Background color of sticky scroll in the peek view editor.")),e.peekViewResultsMatchHighlight=(0,a.registerColor)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},i.localize(526,"Match highlight color in the peek view result list.")),e.peekViewEditorMatchHighlight=(0,a.registerColor)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},i.localize(527,"Match highlight color in the peek view editor.")),e.peekViewEditorMatchHighlightBorder=(0,a.registerColor)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:a.activeContrastBorder,hcLight:a.activeContrastBorder},i.localize(528,"Match highlight border in the peek view editor."))}),define(oe[834],re([1,0,5,84,13,33,6,2,51,11,4,156,3,124,29,12,7,181,107,62,714,32,25,521]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m){"use strict";var h;Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerNavigationWidget=void 0;class v{constructor(F,W,z,q,H){this._openerService=q,this._labelService=H,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new f.DisposableStore,this._editor=W;const K=document.createElement("div");K.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),K.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),K.appendChild(this._relatedBlock),this._disposables.add(c.addStandardDisposableListener(this._relatedBlock,"click",U=>{U.preventDefault();const Y=this._relatedDiagnostics.get(U.target);Y&&z(Y)})),this._scrollable=new k.ScrollableElement(K,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),F.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll(U=>{K.style.left=`-${U.scrollLeft}px`,K.style.top=`-${U.scrollTop}px`})),this._disposables.add(this._scrollable)}dispose(){(0,f.dispose)(this._disposables)}update(F){const{source:W,message:z,relatedInformation:q,code:H}=F;let K=(W?.length||0)+2;H&&(typeof H=="string"?K+=H.length:K+=H.value.length);const U=(0,b.splitLines)(z);this._lines=U.length,this._longestLineLength=0;for(const P of U)this._longestLineLength=Math.max(P.length+K,this._longestLineLength);c.clearNode(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(F)),this._editor.applyFontInfo(this._messageBlock);let Y=this._messageBlock;for(const P of U)Y=document.createElement("div"),Y.innerText=P,P===""&&(Y.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(Y);if(W||H){const P=document.createElement("span");if(P.classList.add("details"),Y.appendChild(P),W){const te=document.createElement("span");te.innerText=W,te.classList.add("source"),P.appendChild(te)}if(H)if(typeof H=="string"){const te=document.createElement("span");te.innerText=`(${H})`,te.classList.add("code"),P.appendChild(te)}else{this._codeLink=c.$("a.code-link"),this._codeLink.setAttribute("href",`${H.target.toString()}`),this._codeLink.onclick=se=>{this._openerService.open(H.target,{allowCommands:!0}),se.preventDefault(),se.stopPropagation()};const te=c.append(this._codeLink,c.$("span"));te.innerText=H.value,P.appendChild(this._codeLink)}}if(c.clearNode(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,E.isNonEmptyArray)(q)){const P=this._relatedBlock.appendChild(document.createElement("div"));P.style.paddingTop=`${Math.floor(this._editor.getOption(67)*.66)}px`,this._lines+=1;for(const te of q){const se=document.createElement("div"),ue=document.createElement("a");ue.classList.add("filename"),ue.innerText=`${this._labelService.getUriBasenameLabel(te.resource)}(${te.startLineNumber}, ${te.startColumn}): `,ue.title=this._labelService.getUriLabel(te.resource),this._relatedDiagnostics.set(ue,te);const ge=document.createElement("span");ge.innerText=te.message,se.appendChild(ue),se.appendChild(ge),this._lines+=1,P.appendChild(se)}}const Q=this._editor.getOption(50),X=Math.ceil(Q.typicalFullwidthCharacterWidth*this._longestLineLength*.75),G=Q.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:X,scrollHeight:G})}layout(F,W){this._scrollable.getDomNode().style.height=`${F}px`,this._scrollable.getDomNode().style.width=`${W}px`,this._scrollable.setScrollDimensions({width:W,height:F})}getHeightInLines(){return Math.min(17,this._lines)}getAriaLabel(F){let W="";switch(F.severity){case l.MarkerSeverity.Error:W=s.localize(750,"Error");break;case l.MarkerSeverity.Warning:W=s.localize(751,"Warning");break;case l.MarkerSeverity.Info:W=s.localize(752,"Info");break;case l.MarkerSeverity.Hint:W=s.localize(753,"Hint");break}let z=s.localize(754,"{0} at {1}. ",W,F.startLineNumber+":"+F.startColumn);const q=this._editor.getModel();return q&&F.startLineNumber<=q.getLineCount()&&F.startLineNumber>=1&&(z=`${q.getLineContent(F.startLineNumber)}, ${z}`),z}}let C=class extends n.PeekViewWidget{static{h=this}static{this.TitleMenu=new i.MenuId("gotoErrorTitleMenu")}constructor(F,W,z,q,H,K,U){super(F,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},H),this._themeService=W,this._openerService=z,this._menuService=q,this._contextKeyService=K,this._labelService=U,this._callOnDispose=new f.DisposableStore,this._onDidSelectRelatedInformation=new y.Emitter,this.onDidSelectRelatedInformation=this._onDidSelectRelatedInformation.event,this._severity=l.MarkerSeverity.Warning,this._backgroundColor=L.Color.white,this._applyTheme(W.getColorTheme()),this._callOnDispose.add(W.onDidColorThemeChange(this._applyTheme.bind(this))),this.create()}_applyTheme(F){this._backgroundColor=F.getColor(O);let W=I,z=T;this._severity===l.MarkerSeverity.Warning?(W=M,z=A):this._severity===l.MarkerSeverity.Info&&(W=R,z=N);const q=F.getColor(W),H=F.getColor(z);this.style({arrowColor:q,frameColor:q,headerBackgroundColor:H,primaryHeadingColor:F.getColor(n.peekViewTitleForeground),secondaryHeadingColor:F.getColor(n.peekViewTitleInfoForeground)})}_applyStyles(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),super._applyStyles()}dispose(){this._callOnDispose.dispose(),super.dispose()}_fillHead(F){super._fillHead(F),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(q=>this.editor.focus()));const W=[],z=this._menuService.getMenuActions(h.TitleMenu,this._contextKeyService);(0,t.createAndFillInActionBarActions)(z,W),this._actionbarWidget.push(W,{label:!1,icon:!0,index:0})}_fillTitleIcon(F){this._icon=c.append(F,c.$(""))}_fillBody(F){this._parentContainer=F,F.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),F.appendChild(this._container),this._message=new v(this._container,this.editor,W=>this._onDidSelectRelatedInformation.fire(W),this._openerService,this._labelService),this._disposables.add(this._message)}show(){throw new Error("call showAtMarker")}showAtMarker(F,W,z){this._container.classList.remove("stale"),this._message.update(F),this._severity=F.severity,this._applyTheme(this._themeService.getColorTheme());const q=p.Range.lift(F),H=this.editor.getPosition(),K=H&&q.containsPosition(H)?H:q.getStartPosition();super.show(K,this.computeRequiredHeight());const U=this.editor.getModel();if(U){const Y=z>1?s.localize(755,"{0} of {1} problems",W,z):s.localize(756,"{0} of {1} problem",W,z);this.setTitle((0,_.basename)(U.uri),Y)}this._icon.className=`codicon ${r.SeverityIcon.className(l.MarkerSeverity.toSeverity(this._severity))}`,this.editor.revealPositionNearTop(K,0),this.editor.focus()}updateMarker(F){this._container.classList.remove("stale"),this._message.update(F)}showStale(){this._container.classList.add("stale"),this._relayout()}_doLayoutBody(F,W){super._doLayoutBody(F,W),this._heightInPixel=F,this._message.layout(F,W),this._container.style.height=`${F}px`}_onWidth(F){this._message.layout(this._heightInPixel,F)}_relayout(){super._relayout(this.computeRequiredHeight())}computeRequiredHeight(){return 3+this._message.getHeightInLines()}};e.MarkerNavigationWidget=C,e.MarkerNavigationWidget=C=h=De([he(1,m.IThemeService),he(2,a.IOpenerService),he(3,i.IMenuService),he(4,g.IInstantiationService),he(5,o.IContextKeyService),he(6,u.ILabelService)],C);const w=(0,d.oneOf)(d.editorErrorForeground,d.editorErrorBorder),S=(0,d.oneOf)(d.editorWarningForeground,d.editorWarningBorder),D=(0,d.oneOf)(d.editorInfoForeground,d.editorInfoBorder),I=(0,d.registerColor)("editorMarkerNavigationError.background",{dark:w,light:w,hcDark:d.contrastBorder,hcLight:d.contrastBorder},s.localize(757,"Editor marker navigation widget error color.")),T=(0,d.registerColor)("editorMarkerNavigationError.headerBackground",{dark:(0,d.transparent)(I,.1),light:(0,d.transparent)(I,.1),hcDark:null,hcLight:null},s.localize(758,"Editor marker navigation widget error heading background.")),M=(0,d.registerColor)("editorMarkerNavigationWarning.background",{dark:S,light:S,hcDark:d.contrastBorder,hcLight:d.contrastBorder},s.localize(759,"Editor marker navigation widget warning color.")),A=(0,d.registerColor)("editorMarkerNavigationWarning.headerBackground",{dark:(0,d.transparent)(M,.1),light:(0,d.transparent)(M,.1),hcDark:"#0C141F",hcLight:(0,d.transparent)(M,.2)},s.localize(760,"Editor marker navigation widget warning heading background.")),R=(0,d.registerColor)("editorMarkerNavigationInfo.background",{dark:D,light:D,hcDark:d.contrastBorder,hcLight:d.contrastBorder},s.localize(761,"Editor marker navigation widget info color.")),N=(0,d.registerColor)("editorMarkerNavigationInfo.headerBackground",{dark:(0,d.transparent)(R,.1),light:(0,d.transparent)(R,.1),hcDark:null,hcLight:null},s.localize(762,"Editor marker navigation widget info heading background.")),O=(0,d.registerColor)("editorMarkerNavigation.background",d.editorBackground,s.localize(763,"Editor marker navigation widget background."))}),define(oe[422],re([1,0,26,2,15,35,9,4,20,690,3,29,12,7,71,834]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.NextMarkerAction=e.MarkerController=void 0;let u=class{static{g=this}static{this.ID="editor.contrib.markerController"}static get(w){return w.getContribution(g.ID)}constructor(w,S,D,I,T){this._markerNavigationService=S,this._contextKeyService=D,this._editorService=I,this._instantiationService=T,this._sessionDispoables=new k.DisposableStore,this._editor=w,this._widgetVisible=h.bindTo(this._contextKeyService)}dispose(){this._cleanUp(),this._sessionDispoables.dispose()}_cleanUp(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}_getOrCreateModel(w){if(this._model&&this._model.matches(w))return this._model;let S=!1;return this._model&&(S=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(w),S&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance(o.MarkerNavigationWidget,this._editor),this._widget.onDidClose(()=>this.close(),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(D=>{(!this._model?.selected||!f.Range.containsPosition(this._model?.selected.marker,D.position))&&this._model?.resetIndex()})),this._sessionDispoables.add(this._model.onDidChange(()=>{if(!this._widget||!this._widget.position||!this._model)return;const D=this._model.find(this._editor.getModel().uri,this._widget.position);D?this._widget.updateMarker(D.marker):this._widget.showStale()})),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(D=>{this._editorService.openCodeEditor({resource:D.resource,options:{pinned:!0,revealIfOpened:!0,selection:f.Range.lift(D).collapseToStart()}},this._editor),this.close(!1)})),this._sessionDispoables.add(this._editor.onDidChangeModel(()=>this._cleanUp())),this._model}close(w=!0){this._cleanUp(),w&&this._editor.focus()}showAtMarker(w){if(this._editor.hasModel()){const S=this._getOrCreateModel(this._editor.getModel().uri);S.resetIndex(),S.move(!0,this._editor.getModel(),new y.Position(w.startLineNumber,w.startColumn)),S.selected&&this._widget.showAtMarker(S.selected.marker,S.selected.index,S.selected.total)}}async nagivate(w,S){if(this._editor.hasModel()){const D=this._getOrCreateModel(S?void 0:this._editor.getModel().uri);if(D.move(w,this._editor.getModel(),this._editor.getPosition()),!D.selected)return;if(D.selected.marker.resource.toString()!==this._editor.getModel().uri.toString()){this._cleanUp();const I=await this._editorService.openCodeEditor({resource:D.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:D.selected.marker}},this._editor);I&&(g.get(I)?.close(),g.get(I)?.nagivate(w,S))}else this._widget.showAtMarker(D.selected.marker,D.selected.index,D.selected.total)}}};e.MarkerController=u,e.MarkerController=u=g=De([he(1,b.IMarkerNavigationService),he(2,s.IContextKeyService),he(3,L.ICodeEditorService),he(4,t.IInstantiationService)],u);class l extends E.EditorAction{constructor(w,S,D){super(D),this._next=w,this._multiFile=S}async run(w,S){S.hasModel()&&u.get(S)?.nagivate(this._next,this._multiFile)}}class a extends l{static{this.ID="editor.action.marker.next"}static{this.LABEL=p.localize(764,"Go to Next Problem (Error, Warning, Info)")}constructor(){super(!0,!1,{id:a.ID,label:a.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.focus,primary:578,weight:100},menuOpts:{menuId:o.MarkerNavigationWidget.TitleMenu,title:a.LABEL,icon:(0,i.registerIcon)("marker-navigation-next",c.Codicon.arrowDown,p.localize(765,"Icon for goto next marker.")),group:"navigation",order:1}})}}e.NextMarkerAction=a;class r extends l{static{this.ID="editor.action.marker.prev"}static{this.LABEL=p.localize(766,"Go to Previous Problem (Error, Warning, Info)")}constructor(){super(!1,!1,{id:r.ID,label:r.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.focus,primary:1602,weight:100},menuOpts:{menuId:o.MarkerNavigationWidget.TitleMenu,title:r.LABEL,icon:(0,i.registerIcon)("marker-navigation-previous",c.Codicon.arrowUp,p.localize(767,"Icon for goto previous marker.")),group:"navigation",order:2}})}}class d extends l{constructor(){super(!0,!0,{id:"editor.action.marker.nextInFiles",label:p.localize(768,"Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.focus,primary:66,weight:100},menuOpts:{menuId:n.MenuId.MenubarGoMenu,title:p.localize(769,"Next &&Problem"),group:"6_problem_nav",order:1}})}}class m extends l{constructor(){super(!1,!0,{id:"editor.action.marker.prevInFiles",label:p.localize(770,"Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.focus,primary:1090,weight:100},menuOpts:{menuId:n.MenuId.MenubarGoMenu,title:p.localize(771,"Previous &&Problem"),group:"6_problem_nav",order:2}})}}(0,E.registerEditorContribution)(u.ID,u,4),(0,E.registerEditorAction)(a),(0,E.registerEditorAction)(r),(0,E.registerEditorAction)(d),(0,E.registerEditorAction)(m);const h=new s.RawContextKey("markersNavigationVisible",!1),v=E.EditorCommand.bindToContribution(u.get);(0,E.registerEditorCommand)(new v({id:"closeMarkersNavigation",precondition:h,handler:C=>C.close(),kbOpts:{weight:150,kbExpr:_.EditorContextKeys.focus,primary:9,secondary:[1033]}}))}),define(oe[835],re([1,0,5,316,33,6,2,47,51,125,4,36,34,70,42,78,749,156,3,7,31,181,214,25,217,177,523]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ReferenceWidget=e.LayoutData=void 0;class w{static{this.DecorationOptions=n.ModelDecorationOptions.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"})}constructor(M,A){this._editor=M,this._model=A,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new y.DisposableStore,this._callOnModelChange=new y.DisposableStore,this._callOnDispose.add(this._editor.onDidChangeModel(()=>this._onModelChanged())),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const M=this._editor.getModel();if(M){for(const A of this._model.references)if(A.uri.toString()===M.uri.toString()){this._addDecorations(A.parent);return}}}_addDecorations(M){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(()=>this._onDecorationChanged()));const A=[],R=[];for(let N=0,O=M.children.length;N<O;N++){const x=M.children[N];this._decorationIgnoreSet.has(x.id)||x.uri.toString()===this._editor.getModel().uri.toString()&&(A.push({range:x.range,options:w.DecorationOptions}),R.push(N))}this._editor.changeDecorations(N=>{const O=N.deltaDecorations([],A);for(let x=0;x<O.length;x++)this._decorations.set(O[x],M.children[R[x]])})}_onDecorationChanged(){const M=[],A=this._editor.getModel();if(A){for(const[R,N]of this._decorations){const O=A.getDecorationRange(R);if(!O)continue;let x=!1;if(!p.Range.equalsRange(O,N.range)){if(p.Range.spansMultipleLines(O))x=!0;else{const F=N.range.endColumn-N.range.startColumn,W=O.endColumn-O.startColumn;F!==W&&(x=!0)}x?(this._decorationIgnoreSet.add(N.id),M.push(R)):N.range=O}}for(let R=0,N=M.length;R<N;R++)this._decorations.delete(M[R]);this._editor.removeDecorations(M)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}class S{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(M){let A,R;try{const N=JSON.parse(M);A=N.ratio,R=N.heightInLines}catch{}return{ratio:A||.7,heightInLines:R||18}}}e.LayoutData=S;class D extends m.WorkbenchAsyncDataTree{}let I=class extends u.PeekViewWidget{constructor(M,A,R,N,O,x,F,W,z,q,H,K){super(M,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},x),this._defaultTreeKeyboardSupport=A,this.layoutData=R,this._textModelResolverService=O,this._instantiationService=x,this._peekViewService=F,this._uriLabel=W,this._undoRedoService=z,this._keybindingService=q,this._languageService=H,this._languageConfigurationService=K,this._disposeOnNewModel=new y.DisposableStore,this._callOnDispose=new y.DisposableStore,this._onDidSelectReference=new L.Emitter,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new c.Dimension(0,0),this._applyTheme(N.getColorTheme()),this._callOnDispose.add(N.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(M,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,y.dispose)(this._preview),(0,y.dispose)(this._previewNotAvailableMessage),(0,y.dispose)(this._tree),(0,y.dispose)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(M){const A=M.getColor(u.peekViewBorder)||E.Color.transparent;this.style({arrowColor:A,frameColor:A,headerBackgroundColor:M.getColor(u.peekViewTitleBackground)||E.Color.transparent,primaryHeadingColor:M.getColor(u.peekViewTitleForeground),secondaryHeadingColor:M.getColor(u.peekViewTitleInfoForeground)})}show(M){super.show(M,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(M){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:M.ctrlKey||M.metaKey||M.altKey?"side":"open",source:"title"})}_fillBody(M){this.setCssClass("reference-zone-widget"),this._messageContainer=c.append(M,c.$("div.messages")),c.hide(this._messageContainer),this._splitView=new k.SplitView(M,{orientation:1}),this._previewContainer=c.append(M,c.$("div.preview.inline"));const A={scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!0},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}};this._preview=this._instantiationService.createInstance(b.EmbeddedCodeEditorWidget,this._previewContainer,A,{},this.editor),c.hide(this._previewContainer),this._previewNotAvailableMessage=new n.TextModel(l.localize(7,"no preview available"),t.PLAINTEXT_LANGUAGE_ID,n.TextModel.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=c.append(M,c.$("div.ref-tree.inline"));const R={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new g.AccessibilityProvider,keyboardNavigationLabelProvider:this._instantiationService.createInstance(g.StringRepresentationProvider),identityProvider:new g.IdentityProvider,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:u.peekViewResultsBackground}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(c.addStandardDisposableListener(this._treeContainer,"keydown",O=>{O.equals(9)&&(this._keybindingService.dispatchEvent(O,O.target),O.stopPropagation())},!0)),this._tree=this._instantiationService.createInstance(D,"ReferencesWidget",this._treeContainer,new g.Delegate,[this._instantiationService.createInstance(g.FileReferencesRenderer),this._instantiationService.createInstance(g.OneReferenceRenderer)],this._instantiationService.createInstance(g.DataSource),R),this._splitView.addView({onDidChange:L.Event.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:O=>{this._preview.layout({height:this._dim.height,width:O})}},k.Sizing.Distribute),this._splitView.addView({onDidChange:L.Event.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:O=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${O}px`,this._tree.layout(this._dim.height,O)}},k.Sizing.Distribute),this._disposables.add(this._splitView.onDidSashChange(()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)},void 0));const N=(O,x)=>{O instanceof C.OneReference&&(x==="show"&&this._revealReference(O,!1),this._onDidSelectReference.fire({element:O,kind:x,source:"tree"}))};this._disposables.add(this._tree.onDidOpen(O=>{O.sideBySide?N(O.element,"side"):O.editorOptions.pinned?N(O.element,"goto"):N(O.element,"show")})),c.hide(this._treeContainer)}_onWidth(M){this._dim&&this._doLayoutBody(this._dim.height,M)}_doLayoutBody(M,A){super._doLayoutBody(M,A),this._dim=new c.Dimension(A,M),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(A),this._splitView.resizeView(0,A*this.layoutData.ratio)}setSelection(M){return this._revealReference(M,!0).then(()=>{this._model&&(this._tree.setSelection([M]),this._tree.setFocus([M]))})}setModel(M){return this._disposeOnNewModel.clear(),this._model=M,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=l.localize(8,"No results"),c.show(this._messageContainer),Promise.resolve(void 0)):(c.hide(this._messageContainer),this._decorationsManager=new w(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(M=>this._tree.rerender(M))),this._disposeOnNewModel.add(this._preview.onMouseDown(M=>{const{event:A,target:R}=M;if(A.detail!==2)return;const N=this._getFocusedReference();N&&this._onDidSelectReference.fire({element:{uri:N.uri,range:R.range},kind:A.ctrlKey||A.metaKey||A.altKey?"side":"open",source:"editor"})})),this.container.classList.add("results-loaded"),c.show(this._treeContainer),c.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(this._model.groups.length===1?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[M]=this._tree.getFocus();if(M instanceof C.OneReference)return M;if(M instanceof C.FileReferences&&M.children.length>0)return M.children[0]}async revealReference(M){await this._revealReference(M,!1),this._onDidSelectReference.fire({element:M,kind:"goto",source:"tree"})}async _revealReference(M,A){if(this._revealedReference===M)return;this._revealedReference=M,M.uri.scheme!==f.Schemas.inMemory?this.setTitle((0,_.basenameOrAuthority)(M.uri),this._uriLabel.getUriLabel((0,_.dirname)(M.uri))):this.setTitle(l.localize(9,"References"));const R=this._textModelResolverService.createModelReference(M.uri);this._tree.getInput()===M.parent?this._tree.reveal(M):(A&&this._tree.reveal(M.parent),await this._tree.expand(M.parent),this._tree.reveal(M));const N=await R;if(!this._model){N.dispose();return}(0,y.dispose)(this._previewModelReference);const O=N.object;if(O){const x=this._preview.getModel()===O.textEditorModel?0:1,F=p.Range.lift(M.range).collapseToStart();this._previewModelReference=N,this._preview.setModel(O.textEditorModel),this._preview.setSelection(F),this._preview.revealRangeInCenter(F,x)}else this._preview.setModel(this._previewNotAvailableMessage),N.dispose()}};e.ReferenceWidget=I,e.ReferenceWidget=I=De([he(3,h.IThemeService),he(4,o.ITextModelService),he(5,a.IInstantiationService),he(6,u.IPeekViewService),he(7,d.ILabelService),he(8,v.IUndoRedoService),he(9,r.IKeybindingService),he(10,i.ILanguageService),he(11,s.ILanguageConfigurationService)],I)}),define(oe[423],re([1,0,14,8,72,2,35,9,4,156,3,24,27,12,7,121,214,50,100,177,835,20,178]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m){"use strict";var h;Object.defineProperty(e,"__esModule",{value:!0}),e.ReferencesController=e.ctxReferenceSearchVisible=void 0,e.ctxReferenceSearchVisible=new t.RawContextKey("referenceSearchVisible",!1,p.localize(13,"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'"));let v=class{static{h=this}static{this.ID="editor.contrib.referencesController"}static get(S){return S.getContribution(h.ID)}constructor(S,D,I,T,M,A,R,N){this._defaultTreeKeyboardSupport=S,this._editor=D,this._editorService=T,this._notificationService=M,this._instantiationService=A,this._storageService=R,this._configurationService=N,this._disposables=new L.DisposableStore,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=e.ctxReferenceSearchVisible.bindTo(I)}dispose(){this._referenceSearchVisible.reset(),this._disposables.dispose(),this._widget?.dispose(),this._model?.dispose(),this._widget=void 0,this._model=void 0}toggleWidget(S,D,I){let T;if(this._widget&&(T=this._widget.position),this.closeWidget(),T&&S.containsPosition(T))return;this._peekMode=I,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage(()=>{this.closeWidget()})),this._disposables.add(this._editor.onDidChangeModel(()=>{this._ignoreModelChangeEvent||this.closeWidget()}));const M="peekViewLayout",A=r.LayoutData.fromJSON(this._storageService.get(M,0,"{}"));this._widget=this._instantiationService.createInstance(r.ReferenceWidget,this._editor,this._defaultTreeKeyboardSupport,A),this._widget.setTitle(p.localize(14,"Loading...")),this._widget.show(S),this._disposables.add(this._widget.onDidClose(()=>{D.cancel(),this._widget&&(this._storageService.store(M,JSON.stringify(this._widget.layoutData),0,1),this._widget=void 0),this.closeWidget()})),this._disposables.add(this._widget.onDidSelectReference(N=>{const{element:O,kind:x}=N;if(O)switch(x){case"open":(N.source!=="editor"||!this._configurationService.getValue("editor.stablePeek"))&&this.openReference(O,!1,!1);break;case"side":this.openReference(O,!0,!1);break;case"goto":I?this._gotoReference(O,!0):this.openReference(O,!1,!0);break}}));const R=++this._requestIdPool;D.then(N=>{if(R!==this._requestIdPool||!this._widget){N.dispose();return}return this._model?.dispose(),this._model=N,this._widget.setModel(this._model).then(()=>{if(this._widget&&this._model&&this._editor.hasModel()){this._model.isEmpty?this._widget.setMetaTitle(""):this._widget.setMetaTitle(p.localize(15,"{0} ({1})",this._model.title,this._model.references.length));const O=this._editor.getModel().uri,x=new f.Position(S.startLineNumber,S.startColumn),F=this._model.nearestReference(O,x);if(F)return this._widget.setSelection(F).then(()=>{this._widget&&this._editor.getOption(87)==="editor"&&this._widget.focusOnPreviewEditor()})}})},N=>{this._notificationService.error(N)})}changeFocusBetweenPreviewAndReferences(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}async goToNextOrPreviousReference(S){if(!this._editor.hasModel()||!this._model||!this._widget)return;const D=this._widget.position;if(!D)return;const I=this._model.nearestReference(this._editor.getModel().uri,D);if(!I)return;const T=this._model.nextOrPreviousReference(I,S),M=this._editor.hasTextFocus(),A=this._widget.isPreviewEditorFocused();await this._widget.setSelection(T),await this._gotoReference(T,!1),M?this._editor.focus():this._widget&&A&&this._widget.focusOnPreviewEditor()}async revealReference(S){!this._editor.hasModel()||!this._model||!this._widget||await this._widget.revealReference(S)}closeWidget(S=!0){this._widget?.dispose(),this._model?.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,S&&this._editor.focus(),this._requestIdPool+=1}_gotoReference(S,D){this._widget?.hide(),this._ignoreModelChangeEvent=!0;const I=_.Range.lift(S.range).collapseToStart();return this._editorService.openCodeEditor({resource:S.uri,options:{selection:I,selectionSource:"code.jump",pinned:D}},this._editor).then(T=>{if(this._ignoreModelChangeEvent=!1,!T||!this._widget){this.closeWidget();return}if(this._editor===T)this._widget.show(I),this._widget.focusOnReferenceTree();else{const M=h.get(T),A=this._model.clone();this.closeWidget(),T.focus(),M?.toggleWidget(I,(0,c.createCancelablePromise)(R=>Promise.resolve(A)),this._peekMode??!1)}},T=>{this._ignoreModelChangeEvent=!1,(0,k.onUnexpectedError)(T)})}openReference(S,D,I){D||this.closeWidget();const{uri:T,range:M}=S;this._editorService.openCodeEditor({resource:T,options:{selection:M,selectionSource:"code.jump",pinned:I}},this._editor,D)}};e.ReferencesController=v,e.ReferencesController=v=h=De([he(2,t.IContextKeyService),he(3,y.ICodeEditorService),he(4,u.INotificationService),he(5,i.IInstantiationService),he(6,l.IStorageService),he(7,s.IConfigurationService)],v);function C(w,S){const D=(0,b.getOuterEditor)(w);if(!D)return;const I=v.get(D);I&&S(I)}o.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,E.KeyChord)(2089,60),when:t.ContextKeyExpr.or(e.ctxReferenceSearchVisible,b.PeekContext.inPeekEditor),handler(w){C(w,S=>{S.changeFocusBetweenPreviewAndReferences()})}}),o.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:t.ContextKeyExpr.or(e.ctxReferenceSearchVisible,b.PeekContext.inPeekEditor),handler(w){C(w,S=>{S.goToNextOrPreviousReference(!0)})}}),o.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:t.ContextKeyExpr.or(e.ctxReferenceSearchVisible,b.PeekContext.inPeekEditor),handler(w){C(w,S=>{S.goToNextOrPreviousReference(!1)})}}),n.CommandsRegistry.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),n.CommandsRegistry.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),n.CommandsRegistry.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),n.CommandsRegistry.registerCommand("closeReferenceSearch",w=>C(w,S=>S.closeWidget())),o.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:t.ContextKeyExpr.and(b.PeekContext.inPeekEditor,t.ContextKeyExpr.not("config.editor.stablePeek"))}),o.KeybindingsRegistry.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:t.ContextKeyExpr.and(e.ctxReferenceSearchVisible,t.ContextKeyExpr.not("config.editor.stablePeek"),t.ContextKeyExpr.or(d.EditorContextKeys.editorTextFocus,m.InputFocusedContext.negate()))}),o.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:t.ContextKeyExpr.and(e.ctxReferenceSearchVisible,g.WorkbenchListFocusContextKey,g.WorkbenchTreeElementCanCollapse.negate(),g.WorkbenchTreeElementCanExpand.negate()),handler(w){const D=w.get(g.IListService).lastFocusedList?.getFocus();Array.isArray(D)&&D[0]instanceof a.OneReference&&C(w,I=>I.revealReference(D[0]))}}),o.KeybindingsRegistry.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:t.ContextKeyExpr.and(e.ctxReferenceSearchVisible,g.WorkbenchListFocusContextKey,g.WorkbenchTreeElementCanCollapse.negate(),g.WorkbenchTreeElementCanExpand.negate()),handler(w){const D=w.get(g.IListService).lastFocusedList?.getFocus();Array.isArray(D)&&D[0]instanceof a.OneReference&&C(w,I=>I.openReference(D[0],!0,!0))}}),n.CommandsRegistry.registerCommand("openReference",w=>{const D=w.get(g.IListService).lastFocusedList?.getFocus();Array.isArray(D)&&D[0]instanceof a.OneReference&&C(w,I=>I.openReference(D[0],!1,!0))})}),define(oe[289],re([1,0,48,14,72,19,22,122,171,15,35,125,9,4,20,28,423,177,727,184,156,3,29,24,12,7,50,96,276,17,53,178]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefinitionAction=e.SymbolNavigationAction=e.SymbolNavigationAnchor=void 0,m.MenuRegistry.appendMenuItem(m.MenuId.EditorContext,{submenu:m.MenuId.EditorContextPeek,title:d.localize(711,"Peek"),group:"navigation",order:100});class A{static is(H){return!H||typeof H!="object"?!1:!!(H instanceof A||s.Position.isIPosition(H.position)&&H.model)}constructor(H,K){this.model=H,this.position=K}}e.SymbolNavigationAnchor=A;class R extends b.EditorAction2{static{this._allSymbolNavigationCommands=new Map}static{this._activeAlternativeCommands=new Set}static all(){return R._allSymbolNavigationCommands.values()}static _patchConfig(H){const K={...H,f1:!0};if(K.menu)for(const U of T.Iterable.wrap(K.menu))(U.id===m.MenuId.EditorContext||U.id===m.MenuId.EditorContextPeek)&&(U.when=v.ContextKeyExpr.and(H.precondition,U.when));return K}constructor(H,K){super(R._patchConfig(K)),this.configuration=H,R._allSymbolNavigationCommands.set(K.id,this)}runEditorCommand(H,K,U,Y){if(!K.hasModel())return Promise.resolve(void 0);const Q=H.get(w.INotificationService),X=H.get(p.ICodeEditorService),G=H.get(S.IEditorProgressService),P=H.get(l.ISymbolNavigationService),te=H.get(I.ILanguageFeaturesService),se=H.get(C.IInstantiationService),ue=K.getModel(),ge=K.getPosition(),pe=A.is(U)?U:new A(ue,ge),ce=new f.EditorStateCancellationTokenSource(K,5),ie=(0,k.raceCancellation)(this._getLocationModel(te,pe.model,pe.position,ce.token),ce.token).then(async ne=>{if(!ne||ce.token.isCancellationRequested)return;(0,c.alert)(ne.ariaMessage);let J;if(ne.referenceAt(ue.uri,ge)){const j=this._getAlternativeCommand(K);!R._activeAlternativeCommands.has(j)&&R._allSymbolNavigationCommands.has(j)&&(J=R._allSymbolNavigationCommands.get(j))}const B=ne.references.length;if(B===0){if(!this.configuration.muteMessage){const j=ue.getWordAtPosition(ge);a.MessageController.get(K)?.showMessage(this._getNoResultFoundMessage(j),ge)}}else if(B===1&&J)R._activeAlternativeCommands.add(this.desc.id),se.invokeFunction(j=>J.runEditorCommand(j,K,U,Y).finally(()=>{R._activeAlternativeCommands.delete(this.desc.id)}));else return this._onResult(X,P,K,ne,Y)},ne=>{Q.error(ne)}).finally(()=>{ce.dispose()});return G.showWhile(ie,250),ie}async _onResult(H,K,U,Y,Q){const X=this._getGoToPreference(U);if(!(U instanceof n.EmbeddedCodeEditorWidget)&&(this.configuration.openInPeek||X==="peek"&&Y.references.length>1))this._openInPeek(U,Y,Q);else{const G=Y.firstReference(),P=Y.references.length>1&&X==="gotoAndPeek",te=await this._openReference(U,H,G,this.configuration.openToSide,!P);P&&te?this._openInPeek(te,Y,Q):Y.dispose(),X==="goto"&&K.put(G)}}async _openReference(H,K,U,Y,Q){let X;if((0,o.isLocationLink)(U)&&(X=U.targetSelectionRange),X||(X=U.range),!X)return;const G=await K.openCodeEditor({resource:U.uri,options:{selection:t.Range.collapseToStart(X),selectionRevealType:3,selectionSource:"code.jump"}},H,Y);if(G){if(Q){const P=G.getModel(),te=G.createDecorationsCollection([{range:X,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]);setTimeout(()=>{G.getModel()===P&&te.clear()},350)}return G}}_openInPeek(H,K,U){const Y=g.ReferencesController.get(H);Y&&H.hasModel()?Y.toggleWidget(U??H.getSelection(),(0,k.createCancelablePromise)(Q=>Promise.resolve(K)),this.configuration.openInPeek):K.dispose()}}e.SymbolNavigationAction=R;class N extends R{async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getDefinitionsAtPosition)(H.definitionProvider,K,U,!1,Y),d.localize(712,"Definitions"))}_getNoResultFoundMessage(H){return H&&H.word?d.localize(713,"No definition found for '{0}'",H.word):d.localize(714,"No definition found")}_getAlternativeCommand(H){return H.getOption(58).alternativeDefinitionCommand}_getGoToPreference(H){return H.getOption(58).multipleDefinitions}}e.DefinitionAction=N,(0,m.registerAction2)(class Vt extends N{static{this.id="editor.action.revealDefinition"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:Vt.id,title:{...d.localize2(738,"Go to Definition"),mnemonicTitle:d.localize(715,"Go to &&Definition")},precondition:i.EditorContextKeys.hasDefinitionProvider,keybinding:[{when:i.EditorContextKeys.editorTextFocus,primary:70,weight:100},{when:v.ContextKeyExpr.and(i.EditorContextKeys.editorTextFocus,M.IsWebContext),primary:2118,weight:100}],menu:[{id:m.MenuId.EditorContext,group:"navigation",order:1.1},{id:m.MenuId.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),h.CommandsRegistry.registerCommandAlias("editor.action.goToDeclaration",Vt.id)}}),(0,m.registerAction2)(class zt extends N{static{this.id="editor.action.revealDefinitionAside"}constructor(){super({openToSide:!0,openInPeek:!1,muteMessage:!1},{id:zt.id,title:d.localize2(739,"Open Definition to the Side"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasDefinitionProvider,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),keybinding:[{when:i.EditorContextKeys.editorTextFocus,primary:(0,E.KeyChord)(2089,70),weight:100},{when:v.ContextKeyExpr.and(i.EditorContextKeys.editorTextFocus,M.IsWebContext),primary:(0,E.KeyChord)(2089,2118),weight:100}]}),h.CommandsRegistry.registerCommandAlias("editor.action.openDeclarationToTheSide",zt.id)}}),(0,m.registerAction2)(class Kt extends N{static{this.id="editor.action.peekDefinition"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:Kt.id,title:d.localize2(740,"Peek Definition"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasDefinitionProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),keybinding:{when:i.EditorContextKeys.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:m.MenuId.EditorContextPeek,group:"peek",order:2}}),h.CommandsRegistry.registerCommandAlias("editor.action.previewDeclaration",Kt.id)}});class O extends R{async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getDeclarationsAtPosition)(H.declarationProvider,K,U,!1,Y),d.localize(716,"Declarations"))}_getNoResultFoundMessage(H){return H&&H.word?d.localize(717,"No declaration found for '{0}'",H.word):d.localize(718,"No declaration found")}_getAlternativeCommand(H){return H.getOption(58).alternativeDeclarationCommand}_getGoToPreference(H){return H.getOption(58).multipleDeclarations}}(0,m.registerAction2)(class ii extends O{static{this.id="editor.action.revealDeclaration"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ii.id,title:{...d.localize2(741,"Go to Declaration"),mnemonicTitle:d.localize(719,"Go to &&Declaration")},precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasDeclarationProvider,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),menu:[{id:m.MenuId.EditorContext,group:"navigation",order:1.3},{id:m.MenuId.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}_getNoResultFoundMessage(H){return H&&H.word?d.localize(720,"No declaration found for '{0}'",H.word):d.localize(721,"No declaration found")}}),(0,m.registerAction2)(class extends O{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:d.localize2(742,"Peek Declaration"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasDeclarationProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),menu:{id:m.MenuId.EditorContextPeek,group:"peek",order:3}})}});class x extends R{async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getTypeDefinitionsAtPosition)(H.typeDefinitionProvider,K,U,!1,Y),d.localize(722,"Type Definitions"))}_getNoResultFoundMessage(H){return H&&H.word?d.localize(723,"No type definition found for '{0}'",H.word):d.localize(724,"No type definition found")}_getAlternativeCommand(H){return H.getOption(58).alternativeTypeDefinitionCommand}_getGoToPreference(H){return H.getOption(58).multipleTypeDefinitions}}(0,m.registerAction2)(class ni extends x{static{this.ID="editor.action.goToTypeDefinition"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:ni.ID,title:{...d.localize2(743,"Go to Type Definition"),mnemonicTitle:d.localize(725,"Go to &&Type Definition")},precondition:i.EditorContextKeys.hasTypeDefinitionProvider,keybinding:{when:i.EditorContextKeys.editorTextFocus,primary:0,weight:100},menu:[{id:m.MenuId.EditorContext,group:"navigation",order:1.4},{id:m.MenuId.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}}),(0,m.registerAction2)(class si extends x{static{this.ID="editor.action.peekTypeDefinition"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:si.ID,title:d.localize2(744,"Peek Type Definition"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasTypeDefinitionProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),menu:{id:m.MenuId.EditorContextPeek,group:"peek",order:4}})}});class F extends R{async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getImplementationsAtPosition)(H.implementationProvider,K,U,!1,Y),d.localize(726,"Implementations"))}_getNoResultFoundMessage(H){return H&&H.word?d.localize(727,"No implementation found for '{0}'",H.word):d.localize(728,"No implementation found")}_getAlternativeCommand(H){return H.getOption(58).alternativeImplementationCommand}_getGoToPreference(H){return H.getOption(58).multipleImplementations}}(0,m.registerAction2)(class oi extends F{static{this.ID="editor.action.goToImplementation"}constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:oi.ID,title:{...d.localize2(745,"Go to Implementations"),mnemonicTitle:d.localize(729,"Go to &&Implementations")},precondition:i.EditorContextKeys.hasImplementationProvider,keybinding:{when:i.EditorContextKeys.editorTextFocus,primary:2118,weight:100},menu:[{id:m.MenuId.EditorContext,group:"navigation",order:1.45},{id:m.MenuId.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}}),(0,m.registerAction2)(class ri extends F{static{this.ID="editor.action.peekImplementation"}constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:ri.ID,title:d.localize2(746,"Peek Implementations"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasImplementationProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),keybinding:{when:i.EditorContextKeys.editorTextFocus,primary:3142,weight:100},menu:{id:m.MenuId.EditorContextPeek,group:"peek",order:5}})}});class W extends R{_getNoResultFoundMessage(H){return H?d.localize(730,"No references found for '{0}'",H.word):d.localize(731,"No references found")}_getAlternativeCommand(H){return H.getOption(58).alternativeReferenceCommand}_getGoToPreference(H){return H.getOption(58).multipleReferences}}(0,m.registerAction2)(class extends W{constructor(){super({openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{...d.localize2(747,"Go to References"),mnemonicTitle:d.localize(732,"Go to &&References")},precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasReferenceProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),keybinding:{when:i.EditorContextKeys.editorTextFocus,primary:1094,weight:100},menu:[{id:m.MenuId.EditorContext,group:"navigation",order:1.45},{id:m.MenuId.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getReferencesAtPosition)(H.referenceProvider,K,U,!0,!1,Y),d.localize(733,"References"))}}),(0,m.registerAction2)(class extends W{constructor(){super({openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:d.localize2(748,"Peek References"),precondition:v.ContextKeyExpr.and(i.EditorContextKeys.hasReferenceProvider,r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated()),menu:{id:m.MenuId.EditorContextPeek,group:"peek",order:6}})}async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(await(0,D.getReferencesAtPosition)(H.referenceProvider,K,U,!1,!1,Y),d.localize(734,"References"))}});class z extends R{constructor(H,K,U){super(H,{id:"editor.action.goToLocation",title:d.localize2(749,"Go to Any Symbol"),precondition:v.ContextKeyExpr.and(r.PeekContext.notInPeekEditor,i.EditorContextKeys.isInEmbeddedEditor.toNegated())}),this._references=K,this._gotoMultipleBehaviour=U}async _getLocationModel(H,K,U,Y){return new u.ReferencesModel(this._references,d.localize(735,"Locations"))}_getNoResultFoundMessage(H){return H&&d.localize(736,"No results for '{0}'",H.word)||""}_getGoToPreference(H){return this._gotoMultipleBehaviour??H.getOption(58).multipleReferences}_getAlternativeCommand(){return""}}h.CommandsRegistry.registerCommand({id:"editor.action.goToLocations",metadata:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:y.URI},{name:"position",description:"The position at which to start",constraint:s.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:async(q,H,K,U,Y,Q,X)=>{(0,L.assertType)(y.URI.isUri(H)),(0,L.assertType)(s.Position.isIPosition(K)),(0,L.assertType)(Array.isArray(U)),(0,L.assertType)(typeof Y>"u"||typeof Y=="string"),(0,L.assertType)(typeof X>"u"||typeof X=="boolean");const G=q.get(p.ICodeEditorService),P=await G.openCodeEditor({resource:H},G.getFocusedCodeEditor());if((0,_.isCodeEditor)(P))return P.setPosition(K),P.revealPositionInCenterIfOutsideViewport(K,0),P.invokeWithinContext(te=>{const se=new class extends z{_getNoResultFoundMessage(ue){return Q||super._getNoResultFoundMessage(ue)}}({muteMessage:!Q,openInPeek:!!X,openToSide:!1},U,Y);te.get(C.IInstantiationService).invokeFunction(se.run.bind(se),P)})}}),h.CommandsRegistry.registerCommand({id:"editor.action.peekLocations",metadata:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:y.URI},{name:"position",description:"The position at which to start",constraint:s.Position.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto`"}]},handler:async(q,H,K,U,Y)=>{q.get(h.ICommandService).executeCommand("editor.action.goToLocations",H,K,U,Y,void 0,!0)}}),h.CommandsRegistry.registerCommand({id:"editor.action.findReferences",handler:(q,H,K)=>{(0,L.assertType)(y.URI.isUri(H)),(0,L.assertType)(s.Position.isIPosition(K));const U=q.get(I.ILanguageFeaturesService),Y=q.get(p.ICodeEditorService);return Y.openCodeEditor({resource:H},Y.getFocusedCodeEditor()).then(Q=>{if(!(0,_.isCodeEditor)(Q)||!Q.hasModel())return;const X=g.ReferencesController.get(Q);if(!X)return;const G=(0,k.createCancelablePromise)(te=>(0,D.getReferencesAtPosition)(U.referenceProvider,Q.getModel(),s.Position.lift(K),!1,!1,te).then(se=>new u.ReferencesModel(se,d.localize(737,"References")))),P=new t.Range(K.lineNumber,K.column,K.lineNumber,K.column);return Promise.resolve(X.toggleWidget(P,G,!1))})}}),h.CommandsRegistry.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")}),define(oe[424],re([1,0,14,8,55,2,122,15,4,42,78,205,156,3,12,289,276,17,36,522]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0}),e.GotoDefinitionAtPositionEditorContribution=void 0;let r=class{static{a=this}static{this.ID="editor.contrib.gotodefinitionatposition"}static{this.MAX_SOURCE_PREVIEW_LINES=8}constructor(m,h,v,C){this.textModelResolverService=h,this.languageService=v,this.languageFeaturesService=C,this.toUnhook=new L.DisposableStore,this.toUnhookForKeyboard=new L.DisposableStore,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=m,this.linkDecorations=this.editor.createDecorationsCollection();const w=new n.ClickLinkGesture(m);this.toUnhook.add(w),this.toUnhook.add(w.onMouseMoveOrRelevantKeyDown(([S,D])=>{this.startFindDefinitionFromMouse(S,D??void 0)})),this.toUnhook.add(w.onExecute(S=>{this.isEnabled(S)&&this.gotoDefinition(S.target.position,S.hasSideBySideModifier).catch(D=>{(0,k.onUnexpectedError)(D)}).finally(()=>{this.removeLinkDecorations()})})),this.toUnhook.add(w.onCancel(()=>{this.removeLinkDecorations(),this.currentWordAtPosition=null}))}static get(m){return m.getContribution(a.ID)}async startFindDefinitionFromCursor(m){await this.startFindDefinition(m),this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(()=>{this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear()})),this.toUnhookForKeyboard.add(this.editor.onKeyDown(h=>{h&&(this.currentWordAtPosition=null,this.removeLinkDecorations(),this.toUnhookForKeyboard.clear())}))}startFindDefinitionFromMouse(m,h){if(m.target.type===9&&this.linkDecorations.length>0)return;if(!this.editor.hasModel()||!this.isEnabled(m,h)){this.currentWordAtPosition=null,this.removeLinkDecorations();return}const v=m.target.position;this.startFindDefinition(v)}async startFindDefinition(m){this.toUnhookForKeyboard.clear();const h=m?this.editor.getModel()?.getWordAtPosition(m):null;if(!h){this.currentWordAtPosition=null,this.removeLinkDecorations();return}if(this.currentWordAtPosition&&this.currentWordAtPosition.startColumn===h.startColumn&&this.currentWordAtPosition.endColumn===h.endColumn&&this.currentWordAtPosition.word===h.word)return;this.currentWordAtPosition=h;const v=new y.EditorState(this.editor,15);this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,c.createCancelablePromise)(S=>this.findDefinition(m,S));let C;try{C=await this.previousPromise}catch(S){(0,k.onUnexpectedError)(S);return}if(!C||!C.length||!v.validate(this.editor)){this.removeLinkDecorations();return}const w=C[0].originSelectionRange?_.Range.lift(C[0].originSelectionRange):new _.Range(m.lineNumber,h.startColumn,m.lineNumber,h.endColumn);if(C.length>1){let S=w;for(const{originSelectionRange:D}of C)D&&(S=_.Range.plusRange(S,D));this.addDecoration(S,new E.MarkdownString().appendText(t.localize(16,"Click to show {0} definitions.",C.length)))}else{const S=C[0];if(!S.uri)return;this.textModelResolverService.createModelReference(S.uri).then(D=>{if(!D.object||!D.object.textEditorModel){D.dispose();return}const{object:{textEditorModel:I}}=D,{startLineNumber:T}=S.range;if(T<1||T>I.getLineCount()){D.dispose();return}const M=this.getPreviewValue(I,T,S),A=this.languageService.guessLanguageIdByFilepathOrFirstLine(I.uri);this.addDecoration(w,M?new E.MarkdownString().appendCodeblock(A||"",M):void 0),D.dispose()})}}getPreviewValue(m,h,v){let C=v.range;return C.endLineNumber-C.startLineNumber>=a.MAX_SOURCE_PREVIEW_LINES&&(C=this.getPreviewRangeBasedOnIndentation(m,h)),this.stripIndentationFromPreviewRange(m,h,C)}stripIndentationFromPreviewRange(m,h,v){let w=m.getLineFirstNonWhitespaceColumn(h);for(let D=h+1;D<v.endLineNumber;D++){const I=m.getLineFirstNonWhitespaceColumn(D);w=Math.min(w,I)}return m.getValueInRange(v).replace(new RegExp(`^\\s{${w-1}}`,"gm"),"").trim()}getPreviewRangeBasedOnIndentation(m,h){const v=m.getLineFirstNonWhitespaceColumn(h),C=Math.min(m.getLineCount(),h+a.MAX_SOURCE_PREVIEW_LINES);let w=h+1;for(;w<C;w++){const S=m.getLineFirstNonWhitespaceColumn(w);if(v===S)break}return new _.Range(h,1,w+1,1)}addDecoration(m,h){const v={range:m,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:h}};this.linkDecorations.set([v])}removeLinkDecorations(){this.linkDecorations.clear()}isEnabled(m,h){return this.editor.hasModel()&&m.isLeftClick&&m.isNoneOrSingleMouseDown&&m.target.type===6&&!(m.target.detail.injectedText?.options instanceof l.ModelDecorationInjectedTextOptions)&&(m.hasTriggerModifier||(h?h.keyCodeIsTriggerKey:!1))&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}findDefinition(m,h){const v=this.editor.getModel();return v?(0,g.getDefinitionsAtPosition)(this.languageFeaturesService.definitionProvider,v,m,!1,h):Promise.resolve(null)}gotoDefinition(m,h){return this.editor.setPosition(m),this.editor.invokeWithinContext(v=>{const C=!h&&this.editor.getOption(89)&&!this.isInPeekEditor(v);return new o.DefinitionAction({openToSide:h,openInPeek:C,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(v)})}isInPeekEditor(m){const h=m.get(i.IContextKeyService);return s.PeekContext.inPeekEditor.getValue(h)}dispose(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}};e.GotoDefinitionAtPositionEditorContribution=r,e.GotoDefinitionAtPositionEditorContribution=r=a=De([he(1,p.ITextModelService),he(2,b.ILanguageService),he(3,u.ILanguageFeaturesService)],r),(0,f.registerEditorContribution)(r.ID,r,2)}),define(oe[836],re([1,0,5,13,14,8,2,51,4,17,264,155,285,133,422,86,3,107,62,96]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MarkerHoverParticipant=e.MarkerHover=void 0;const r=c.$;class d{constructor(C,w,S){this.owner=C,this.range=w,this.marker=S}isValidForHoverAnchor(C){return C.type===1&&this.range.startColumn<=C.range.startColumn&&this.range.endColumn>=C.range.endColumn}}e.MarkerHover=d;const m={type:1,filter:{include:t.CodeActionKind.QuickFix},triggerAction:t.CodeActionTriggerSource.QuickFixHover};let h=class{constructor(C,w,S,D){this._editor=C,this._markerDecorationsService=w,this._openerService=S,this._languageFeaturesService=D,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(C,w){if(!this._editor.hasModel()||C.type!==1&&!C.supportsMarkerHover)return[];const S=this._editor.getModel(),D=C.range.startLineNumber,I=S.getLineMaxColumn(D),T=[];for(const M of w){const A=M.range.startLineNumber===D?M.range.startColumn:1,R=M.range.endLineNumber===D?M.range.endColumn:I,N=this._markerDecorationsService.getMarker(S.uri,M);if(!N)continue;const O=new _.Range(C.range.startLineNumber,A,C.range.startLineNumber,R);T.push(new d(this,O,N))}return T}renderHoverParts(C,w){if(!w.length)return new o.RenderedHoverParts([]);const S=new y.DisposableStore,D=[];w.forEach(T=>{const M=this._renderMarkerHover(T);C.fragment.appendChild(M.hoverElement),D.push(M)});const I=w.length===1?w[0]:w.sort((T,M)=>u.MarkerSeverity.compare(T.marker.severity,M.marker.severity))[0];return this.renderMarkerStatusbar(C,I,S),new o.RenderedHoverParts(D)}_renderMarkerHover(C){const w=new y.DisposableStore,S=r("div.hover-row"),D=c.append(S,r("div.marker.hover-contents")),{source:I,message:T,code:M,relatedInformation:A}=C.marker;this._editor.applyFontInfo(D);const R=c.append(D,r("span"));if(R.style.whiteSpace="pre-wrap",R.innerText=T,I||M)if(M&&typeof M!="string"){const O=r("span");if(I){const z=c.append(O,r("span"));z.innerText=I}const x=c.append(O,r("a.code-link"));x.setAttribute("href",M.target.toString()),w.add(c.addDisposableListener(x,"click",z=>{this._openerService.open(M.target,{allowCommands:!0}),z.preventDefault(),z.stopPropagation()}));const F=c.append(x,r("span"));F.innerText=M.value;const W=c.append(D,O);W.style.opacity="0.6",W.style.paddingLeft="6px"}else{const O=c.append(D,r("span"));O.style.opacity="0.6",O.style.paddingLeft="6px",O.innerText=I&&M?`${I}(${M})`:I||`(${M})`}if((0,k.isNonEmptyArray)(A))for(const{message:O,resource:x,startLineNumber:F,startColumn:W}of A){const z=c.append(D,r("div"));z.style.marginTop="8px";const q=c.append(z,r("a"));q.innerText=`${(0,f.basename)(x)}(${F}, ${W}): `,q.style.cursor="pointer",w.add(c.addDisposableListener(q,"click",K=>{K.stopPropagation(),K.preventDefault(),this._openerService&&this._openerService.open(x,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:F,startColumn:W}}}).catch(L.onUnexpectedError)}));const H=c.append(z,r("span"));H.innerText=O,this._editor.applyFontInfo(H)}return{hoverPart:C,hoverElement:S,dispose:()=>w.dispose()}}renderMarkerStatusbar(C,w,S){if(w.marker.severity===u.MarkerSeverity.Error||w.marker.severity===u.MarkerSeverity.Warning||w.marker.severity===u.MarkerSeverity.Info){const D=i.MarkerController.get(this._editor);D&&C.statusBar.addAction({label:g.localize(661,"View Problem"),commandId:i.NextMarkerAction.ID,run:()=>{C.hide(),D.showAtMarker(w.marker),this._editor.focus()}})}if(!this._editor.getOption(92)){const D=C.statusBar.append(r("div"));this.recentMarkerCodeActionsInfo&&(u.IMarkerData.makeKey(this.recentMarkerCodeActionsInfo.marker)===u.IMarkerData.makeKey(w.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(D.textContent=g.localize(662,"No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const I=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?y.Disposable.None:(0,E.disposableTimeout)(()=>D.textContent=g.localize(663,"Checking for quick fixes..."),200,S);D.textContent||(D.textContent="\xA0");const T=this.getCodeActions(w.marker);S.add((0,y.toDisposable)(()=>T.cancel())),T.then(M=>{if(I.dispose(),this.recentMarkerCodeActionsInfo={marker:w.marker,hasCodeActions:M.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions){M.dispose(),D.textContent=g.localize(664,"No quick fixes available");return}D.style.display="none";let A=!1;S.add((0,y.toDisposable)(()=>{A||M.dispose()})),C.statusBar.addAction({label:g.localize(665,"Quick Fix..."),commandId:n.quickFixCommandId,run:R=>{A=!0;const N=s.CodeActionController.get(this._editor),O=c.getDomNodePagePosition(R);C.hide(),N?.showCodeActions(m,M,{x:O.left,y:O.top,width:O.width,height:O.height})}})},L.onUnexpectedError)}}getCodeActions(C){return(0,E.createCancelablePromise)(w=>(0,n.getCodeActions)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new _.Range(C.startLineNumber,C.startColumn,C.endLineNumber,C.endColumn),m,a.Progress.None,w))}};e.MarkerHoverParticipant=h,e.MarkerHoverParticipant=h=De([he(1,p.IMarkerDecorationsService),he(2,l.IOpenerService),he(3,b.ILanguageFeaturesService)],h)}),define(oe[425],re([1,0,5,41,18,194,4,78,289,156,29,24,12,58,7,50]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showGoToContextMenu=g,e.goToDefinitionWithLocation=u;async function g(l,a,r,d){const m=l.get(f.ITextModelService),h=l.get(t.IContextMenuService),v=l.get(n.ICommandService),C=l.get(i.IInstantiationService),w=l.get(o.INotificationService);if(await d.item.resolve(E.CancellationToken.None),!d.part.location)return;const S=d.part.location,D=[],I=new Set(p.MenuRegistry.getMenuItems(p.MenuId.EditorContext).map(M=>(0,p.isIMenuItem)(M)?M.command.id:(0,L.generateUuid)()));for(const M of _.SymbolNavigationAction.all())I.has(M.desc.id)&&D.push(new k.Action(M.desc.id,p.MenuItemAction.label(M.desc,{renderShortTitle:!0}),void 0,!0,async()=>{const A=await m.createModelReference(S.uri);try{const R=new _.SymbolNavigationAnchor(A.object.textEditorModel,y.Range.getStartPosition(S.range)),N=d.item.anchor.range;await C.invokeFunction(M.runEditorCommand.bind(M),a,R,N)}finally{A.dispose()}}));if(d.part.command){const{command:M}=d.part;D.push(new k.Separator),D.push(new k.Action(M.id,M.title,void 0,!0,async()=>{try{await v.executeCommand(M.id,...M.arguments??[])}catch(A){w.notify({severity:o.Severity.Error,source:d.item.provider.displayName,message:A})}}))}const T=a.getOption(128);h.showContextMenu({domForShadowRoot:T?a.getDomNode()??void 0:void 0,getAnchor:()=>{const M=c.getDomNodePagePosition(r);return{x:M.left,y:M.top+M.height+8}},getActions:()=>D,onHide:()=>{a.focus()},autoSelectFirstItem:!0})}async function u(l,a,r,d){const h=await l.get(f.ITextModelService).createModelReference(d.uri);await r.invokeWithinContext(async v=>{const C=a.hasSideBySideModifier,w=v.get(s.IContextKeyService),S=b.PeekContext.inPeekEditor.getValue(w),D=!C&&r.getOption(89)&&!S;return new _.DefinitionAction({openToSide:C,openInPeek:D,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(v,new _.SymbolNavigationAnchor(h.object.textEditorModel,y.Range.getStartPosition(d.range)),y.Range.lift(d.range))}),h.dispose()}}),define(oe[426],re([1,0,5,13,14,18,8,2,45,19,22,185,142,37,76,4,28,40,36,79,17,78,205,355,425,24,49,7,50,32,25]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T){"use strict";var M;Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintsController=e.RenderedInlayHintLabelPart=void 0;class A{constructor(){this._entries=new _.LRUCache(50)}get(z){const q=A._key(z);return this._entries.get(q)}set(z,q){const H=A._key(z);this._entries.set(H,q)}static _key(z){return`${z.uri.toString()}/${z.getVersionId()}`}}const R=(0,S.createDecorator)("IInlayHintsCache");(0,w.registerSingleton)(R,A,1);class N{constructor(z,q){this.item=z,this.index=q}get part(){const z=this.item.hint.label;return typeof z=="string"?{label:z}:z[this.index]}}e.RenderedInlayHintLabelPart=N;class O{constructor(z,q){this.part=z,this.hasTriggerModifier=q}}let x=class{static{M=this}static{this.ID="editor.contrib.InlayHints"}static{this._MAX_DECORATORS=1500}static{this._MAX_LABEL_LEN=43}static get(z){return z.getContribution(M.ID)??void 0}constructor(z,q,H,K,U,Y,Q){this._editor=z,this._languageFeaturesService=q,this._inlayHintsCache=K,this._commandService=U,this._notificationService=Y,this._instaService=Q,this._disposables=new f.DisposableStore,this._sessionDisposables=new f.DisposableStore,this._decorationsMetadata=new Map,this._ruleFactory=new n.DynamicCssRules(this._editor),this._activeRenderMode=0,this._debounceInfo=H.for(q.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(q.inlayHintsProvider.onDidChange(()=>this._update())),this._disposables.add(z.onDidChangeModel(()=>this._update())),this._disposables.add(z.onDidChangeModelLanguage(()=>this._update())),this._disposables.add(z.onDidChangeConfiguration(X=>{X.hasChanged(142)&&this._update()})),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const z=this._editor.getOption(142);if(z.enabled==="off")return;const q=this._editor.getModel();if(!q||!this._languageFeaturesService.inlayHintsProvider.has(q))return;if(z.enabled==="on")this._activeRenderMode=0;else{let Q,X;z.enabled==="onUnlessPressed"?(Q=0,X=1):(Q=1,X=0),this._activeRenderMode=Q,this._sessionDisposables.add(c.ModifierKeyEmitter.getInstance().event(G=>{if(!this._editor.hasModel())return;const P=G.altKey&&G.ctrlKey&&!(G.shiftKey||G.metaKey)?X:Q;if(P!==this._activeRenderMode){this._activeRenderMode=P;const te=this._editor.getModel(),se=this._copyInlayHintsWithCurrentAnchor(te);this._updateHintsDecorators([te.getFullModelRange()],se),Y.schedule(0)}}))}const H=this._inlayHintsCache.get(q);H&&this._updateHintsDecorators([q.getFullModelRange()],H),this._sessionDisposables.add((0,f.toDisposable)(()=>{q.isDisposed()||this._cacheHintsForFastRestore(q)}));let K;const U=new Set,Y=new E.RunOnceScheduler(async()=>{const Q=Date.now();K?.dispose(!0),K=new L.CancellationTokenSource;const X=q.onWillDispose(()=>K?.cancel());try{const G=K.token,P=await h.InlayHintsFragments.create(this._languageFeaturesService.inlayHintsProvider,q,this._getHintsRanges(),G);if(Y.delay=this._debounceInfo.update(q,Date.now()-Q),G.isCancellationRequested){P.dispose();return}for(const te of P.provider)typeof te.onDidChangeInlayHints=="function"&&!U.has(te)&&(U.add(te),this._sessionDisposables.add(te.onDidChangeInlayHints(()=>{Y.isScheduled()||Y.schedule()})));this._sessionDisposables.add(P),this._updateHintsDecorators(P.ranges,P.items),this._cacheHintsForFastRestore(q)}catch(G){(0,y.onUnexpectedError)(G)}finally{K.dispose(),X.dispose()}},this._debounceInfo.get(q));this._sessionDisposables.add(Y),this._sessionDisposables.add((0,f.toDisposable)(()=>K?.dispose(!0))),Y.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange(Q=>{(Q.scrollTopChanged||!Y.isScheduled())&&Y.schedule()})),this._sessionDisposables.add(this._editor.onDidChangeModelContent(Q=>{K?.cancel();const X=Math.max(Y.delay,1250);Y.schedule(X)})),this._sessionDisposables.add(this._installDblClickGesture(()=>Y.schedule(0))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const z=new f.DisposableStore,q=z.add(new m.ClickLinkGesture(this._editor)),H=new f.DisposableStore;return z.add(H),z.add(q.onMouseMoveOrRelevantKeyDown(K=>{const[U]=K,Y=this._getInlayHintLabelPart(U),Q=this._editor.getModel();if(!Y||!Q){H.clear();return}const X=new L.CancellationTokenSource;H.add((0,f.toDisposable)(()=>X.dispose(!0))),Y.item.resolve(X.token),this._activeInlayHintPart=Y.part.command||Y.part.location?new O(Y,U.hasTriggerModifier):void 0;const G=Q.validatePosition(Y.item.hint.position).lineNumber,P=new o.Range(G,1,G,Q.getLineMaxColumn(G)),te=this._getInlineHintsForRange(P);this._updateHintsDecorators([P],te),H.add((0,f.toDisposable)(()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([P],te)}))})),z.add(q.onCancel(()=>H.clear())),z.add(q.onExecute(async K=>{const U=this._getInlayHintLabelPart(K);if(U){const Y=U.part;Y.location?this._instaService.invokeFunction(v.goToDefinitionWithLocation,K,this._editor,Y.location):g.Command.is(Y.command)&&await this._invokeCommand(Y.command,U.item)}})),z}_getInlineHintsForRange(z){const q=new Set;for(const H of this._decorationsMetadata.values())z.containsRange(H.item.anchor.range)&&q.add(H.item);return Array.from(q)}_installDblClickGesture(z){return this._editor.onMouseUp(async q=>{if(q.event.detail!==2)return;const H=this._getInlayHintLabelPart(q);if(H&&(q.event.preventDefault(),await H.item.resolve(L.CancellationToken.None),(0,k.isNonEmptyArray)(H.item.hint.textEdits))){const K=H.item.hint.textEdits.map(U=>i.EditOperation.replace(o.Range.lift(U.range),U.text));this._editor.executeEdits("inlayHint.default",K),z()}})}_installContextMenu(){return this._editor.onContextMenu(async z=>{if(!(0,c.isHTMLElement)(z.event.target))return;const q=this._getInlayHintLabelPart(z);q&&await this._instaService.invokeFunction(v.showGoToContextMenu,this._editor,z.event.target,q)})}_getInlayHintLabelPart(z){if(z.target.type!==6)return;const q=z.target.detail.injectedText?.options;if(q instanceof l.ModelDecorationInjectedTextOptions&&q?.attachedData instanceof N)return q.attachedData}async _invokeCommand(z,q){try{await this._commandService.executeCommand(z.id,...z.arguments??[])}catch(H){this._notificationService.notify({severity:D.Severity.Error,source:q.provider.displayName,message:H})}}_cacheHintsForFastRestore(z){const q=this._copyInlayHintsWithCurrentAnchor(z);this._inlayHintsCache.set(z,q)}_copyInlayHintsWithCurrentAnchor(z){const q=new Map;for(const[H,K]of this._decorationsMetadata){if(q.has(K.item))continue;const U=z.getDecorationRange(H);if(U){const Y=new h.InlayHintAnchor(U,K.item.anchor.direction),Q=K.item.with({anchor:Y});q.set(K.item,Q)}}return Array.from(q.values())}_getHintsRanges(){const q=this._editor.getModel(),H=this._editor.getVisibleRangesPlusViewportAboveBelow(),K=[];for(const U of H.sort(o.Range.compareRangesUsingStarts)){const Y=q.validateRange(new o.Range(U.startLineNumber-30,U.startColumn,U.endLineNumber+30,U.endColumn));K.length===0||!o.Range.areIntersectingOrTouching(K[K.length-1],Y)?K.push(Y):K[K.length-1]=o.Range.plusRange(K[K.length-1],Y)}return K}_updateHintsDecorators(z,q){const H=[],K=(ge,pe,ce,ie,ne)=>{const J={content:ce,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:pe.className,cursorStops:ie,attachedData:ne};H.push({item:ge,classNameRef:pe,decoration:{range:ge.anchor.range,options:{description:"InlayHint",showIfCollapsed:ge.anchor.range.isEmpty(),collapseOnReplaceEdit:!ge.anchor.range.isEmpty(),stickiness:0,[ge.anchor.direction]:this._activeRenderMode===0?J:void 0}}})},U=(ge,pe)=>{const ce=this._ruleFactory.createClassNameRef({width:`${Y/3|0}px`,display:"inline-block"});K(ge,ce,"\u200A",pe?u.InjectedTextCursorStops.Right:u.InjectedTextCursorStops.None)},{fontSize:Y,fontFamily:Q,padding:X,isUniform:G}=this._getLayoutInfo(),P="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(P,Q);let te={line:0,totalLen:0};for(const ge of q){if(te.line!==ge.anchor.range.startLineNumber&&(te={line:ge.anchor.range.startLineNumber,totalLen:0}),te.totalLen>M._MAX_LABEL_LEN)continue;ge.hint.paddingLeft&&U(ge,!1);const pe=typeof ge.hint.label=="string"?[{label:ge.hint.label}]:ge.hint.label;for(let ce=0;ce<pe.length;ce++){const ie=pe[ce],ne=ce===0,J=ce===pe.length-1,B={fontSize:`${Y}px`,fontFamily:`var(${P}), ${t.EDITOR_FONT_DEFAULTS.fontFamily}`,verticalAlign:G?"baseline":"middle",unicodeBidi:"isolate"};(0,k.isNonEmptyArray)(ge.hint.textEdits)&&(B.cursor="default"),this._fillInColors(B,ge.hint),(ie.command||ie.location)&&this._activeInlayHintPart?.part.item===ge&&this._activeInlayHintPart.part.index===ce&&(B.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(B.color=(0,T.themeColorFromId)(I.editorActiveLinkForeground),B.cursor="pointer")),X&&(ne&&J?(B.padding=`1px ${Math.max(1,Y/4)|0}px`,B.borderRadius=`${Y/4|0}px`):ne?(B.padding=`1px 0 1px ${Math.max(1,Y/4)|0}px`,B.borderRadius=`${Y/4|0}px 0 0 ${Y/4|0}px`):J?(B.padding=`1px ${Math.max(1,Y/4)|0}px 1px 0`,B.borderRadius=`0 ${Y/4|0}px ${Y/4|0}px 0`):B.padding="1px 0 1px 0");let j=ie.label;te.totalLen+=j.length;let V=!1;const $=te.totalLen-M._MAX_LABEL_LEN;if($>0&&(j=j.slice(0,-$)+"\u2026",V=!0),K(ge,this._ruleFactory.createClassNameRef(B),F(j),J&&!ge.hint.paddingRight?u.InjectedTextCursorStops.Right:u.InjectedTextCursorStops.None,new N(ge,ce)),V)break}if(ge.hint.paddingRight&&U(ge,!0),H.length>M._MAX_DECORATORS)break}const se=[];for(const[ge,pe]of this._decorationsMetadata){const ce=this._editor.getModel()?.getDecorationRange(ge);ce&&z.some(ie=>ie.containsRange(ce))&&(se.push(ge),pe.classNameRef.dispose(),this._decorationsMetadata.delete(ge))}const ue=s.StableEditorScrollState.capture(this._editor);this._editor.changeDecorations(ge=>{const pe=ge.deltaDecorations(se,H.map(ce=>ce.decoration));for(let ce=0;ce<pe.length;ce++){const ie=H[ce];this._decorationsMetadata.set(pe[ce],ie)}}),ue.restore(this._editor)}_fillInColors(z,q){q.kind===g.InlayHintKind.Parameter?(z.backgroundColor=(0,T.themeColorFromId)(I.editorInlayHintParameterBackground),z.color=(0,T.themeColorFromId)(I.editorInlayHintParameterForeground)):q.kind===g.InlayHintKind.Type?(z.backgroundColor=(0,T.themeColorFromId)(I.editorInlayHintTypeBackground),z.color=(0,T.themeColorFromId)(I.editorInlayHintTypeForeground)):(z.backgroundColor=(0,T.themeColorFromId)(I.editorInlayHintBackground),z.color=(0,T.themeColorFromId)(I.editorInlayHintForeground))}_getLayoutInfo(){const z=this._editor.getOption(142),q=z.padding,H=this._editor.getOption(52),K=this._editor.getOption(49);let U=z.fontSize;(!U||U<5||U>H)&&(U=H);const Y=z.fontFamily||K;return{fontSize:U,fontFamily:Y,padding:q,isUniform:!q&&Y===K&&U===H}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const z of this._decorationsMetadata.values())z.classNameRef.dispose();this._decorationsMetadata.clear()}};e.InlayHintsController=x,e.InlayHintsController=x=M=De([he(1,r.ILanguageFeaturesService),he(2,a.ILanguageFeatureDebounceService),he(3,R),he(4,C.ICommandService),he(5,D.INotificationService),he(6,S.IInstantiationService)],x);function F(W){return W.replace(/[ \t]/g,"\xA0")}C.CommandsRegistry.registerCommand("_executeInlayHintProvider",async(W,...z)=>{const[q,H]=z;(0,b.assertType)(p.URI.isUri(q)),(0,b.assertType)(o.Range.isIRange(H));const{inlayHintsProvider:K}=W.get(r.ILanguageFeaturesService),U=await W.get(d.ITextModelService).createModelReference(q);try{const Y=await h.InlayHintsFragments.create(K,U.object.textEditorModel,[o.Range.lift(H)],L.CancellationToken.None),Q=Y.items.map(X=>X.hint);return setTimeout(()=>Y.dispose(),0),Q}finally{U.dispose()}})}),define(oe[427],re([1,0,14,55,9,36,86,42,78,405,215,426,27,62,17,3,16,355,13,31,118,24]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintsHover=void 0;class m extends y.HoverForeignElementAnchor{constructor(C,w,S,D){super(10,w,C.item.anchor.range,S,D,!0),this.part=C}}let h=class extends p.MarkdownHoverParticipant{constructor(C,w,S,D,I,T,M,A,R){super(C,w,S,T,A,D,I,R),this._resolverService=M,this.hoverOrdinal=6}suggestHoverAnchor(C){if(!n.InlayHintsController.get(this._editor)||C.target.type!==6)return null;const S=C.target.detail.injectedText?.options;return S instanceof L.ModelDecorationInjectedTextOptions&&S.attachedData instanceof n.RenderedInlayHintLabelPart?new m(S.attachedData,this,C.event.posx,C.event.posy):null}computeSync(){return[]}computeAsync(C,w,S){return C instanceof m?new c.AsyncIterableObject(async D=>{const{part:I}=C;if(await I.item.resolve(S),S.isCancellationRequested)return;let T;typeof I.item.hint.tooltip=="string"?T=new k.MarkdownString().appendText(I.item.hint.tooltip):I.item.hint.tooltip&&(T=I.item.hint.tooltip),T&&D.emitOne(new p.MarkdownHover(this,C.range,[T],!1,0)),(0,l.isNonEmptyArray)(I.item.hint.textEdits)&&D.emitOne(new p.MarkdownHover(this,C.range,[new k.MarkdownString().appendText((0,o.localize)(631,"Double-click to insert"))],!1,10001));let M;if(typeof I.part.tooltip=="string"?M=new k.MarkdownString().appendText(I.part.tooltip):I.part.tooltip&&(M=I.part.tooltip),M&&D.emitOne(new p.MarkdownHover(this,C.range,[M],!1,1)),I.part.location||I.part.command){let R;const O=this._editor.getOption(78)==="altKey"?g.isMacintosh?(0,o.localize)(632,"cmd + click"):(0,o.localize)(633,"ctrl + click"):g.isMacintosh?(0,o.localize)(634,"option + click"):(0,o.localize)(635,"alt + click");I.part.location&&I.part.command?R=new k.MarkdownString().appendText((0,o.localize)(636,"Go to Definition ({0}), right click for more",O)):I.part.location?R=new k.MarkdownString().appendText((0,o.localize)(637,"Go to Definition ({0})",O)):I.part.command&&(R=new k.MarkdownString(`[${(0,o.localize)(638,"Execute Command")}](${(0,u.asCommandLink)(I.part.command)} "${I.part.command.title}") (${O})`,{isTrusted:!0})),R&&D.emitOne(new p.MarkdownHover(this,C.range,[R],!1,1e4))}const A=await this._resolveInlayHintLabelPartHover(I,S);for await(const R of A)D.emitOne(R)}):c.AsyncIterableObject.EMPTY}async _resolveInlayHintLabelPartHover(C,w){if(!C.part.location)return c.AsyncIterableObject.EMPTY;const{uri:S,range:D}=C.part.location,I=await this._resolverService.createModelReference(S);try{const T=I.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(T)?(0,b.getHoverProviderResultsAsAsyncIterable)(this._languageFeaturesService.hoverProvider,T,new E.Position(D.startLineNumber,D.startColumn),w).filter(M=>!(0,k.isEmptyMarkdownString)(M.hover.contents)).map(M=>new p.MarkdownHover(this,C.item.anchor.range,M.hover.contents,!1,2+M.ordinal)):c.AsyncIterableObject.EMPTY}finally{I.dispose()}}};e.InlayHintsHover=h,e.InlayHintsHover=h=De([he(1,f.ILanguageService),he(2,t.IOpenerService),he(3,a.IKeybindingService),he(4,r.IHoverService),he(5,s.IConfigurationService),he(6,_.ITextModelService),he(7,i.ILanguageFeaturesService),he(8,d.ICommandService)],h)}),define(oe[837],re([1,0,86,2,384,36,9,4,5,215,286,427,8]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RenderedContentHover=void 0;class t extends k.Disposable{constructor(u,l,a,r,d,m){super();const h=l.anchor,v=l.hoverParts;this._renderedHoverParts=this._register(new o(u,a,v,m,d));const{showAtPosition:C,showAtSecondaryPosition:w}=t.computeHoverPositions(u,h.range,v);this.shouldAppearBeforeContent=v.some(S=>S.isBeforeContent),this.showAtPosition=C,this.showAtSecondaryPosition=w,this.initialMousePosX=h.initialMousePosX,this.initialMousePosY=h.initialMousePosY,this.shouldFocus=r.shouldFocus,this.source=r.source}get domNode(){return this._renderedHoverParts.domNode}get domNodeHasChildren(){return this._renderedHoverParts.domNodeHasChildren}get focusedHoverPartIndex(){return this._renderedHoverParts.focusedHoverPartIndex}async updateHoverVerbosityLevel(u,l,a){this._renderedHoverParts.updateHoverVerbosityLevel(u,l,a)}isColorPickerVisible(){return this._renderedHoverParts.isColorPickerVisible()}static computeHoverPositions(u,l,a){let r=1;if(u.hasModel()){const w=u._getViewModel(),S=w.coordinatesConverter,D=S.convertModelRangeToViewRange(l),I=w.getLineMinColumn(D.startLineNumber),T=new y.Position(D.startLineNumber,I);r=S.convertViewPositionToModelPosition(T).column}const d=l.startLineNumber;let m=l.startColumn,h;for(const w of a){const S=w.range,D=S.startLineNumber===d,I=S.endLineNumber===d;if(D&&I){const M=S.startColumn,A=Math.min(m,M);m=Math.max(A,r)}w.forceShowAtRange&&(h=S)}let v,C;if(h){const w=h.getStartPosition();v=w,C=w}else v=l.getStartPosition(),C=new y.Position(d,m);return{showAtPosition:v,showAtSecondaryPosition:C}}}e.RenderedContentHover=t;class i{constructor(u,l){this._statusBar=l,u.appendChild(this._statusBar.hoverElement)}get hoverElement(){return this._statusBar.hoverElement}get actions(){return this._statusBar.actions}dispose(){this._statusBar.dispose()}}class o extends k.Disposable{static{this._DECORATION_OPTIONS=L.ModelDecorationOptions.register({description:"content-hover-highlight",className:"hoverHighlight"})}constructor(u,l,a,r,d){super(),this._renderedParts=[],this._focusedHoverPartIndex=-1,this._context=d,this._fragment=document.createDocumentFragment(),this._register(this._renderParts(l,a,d,r)),this._register(this._registerListenersOnRenderedParts()),this._register(this._createEditorDecorations(u,a)),this._updateMarkdownAndColorParticipantInfo(l)}_createEditorDecorations(u,l){if(l.length===0)return k.Disposable.None;let a=l[0].range;for(const d of l){const m=d.range;a=f.Range.plusRange(a,m)}const r=u.createDecorationsCollection();return r.set([{range:a,options:o._DECORATION_OPTIONS}]),(0,k.toDisposable)(()=>{r.clear()})}_renderParts(u,l,a,r){const d=new E.EditorHoverStatusBar(r),m={fragment:this._fragment,statusBar:d,...a},h=new k.DisposableStore;for(const C of u){const w=this._renderHoverPartsForParticipant(l,C,m);h.add(w);for(const S of w.renderedHoverParts)this._renderedParts.push({type:"hoverPart",participant:C,hoverPart:S.hoverPart,hoverElement:S.hoverElement})}const v=this._renderStatusBar(this._fragment,d);return v&&(h.add(v),this._renderedParts.push({type:"statusBar",hoverElement:v.hoverElement,actions:v.actions})),(0,k.toDisposable)(()=>{h.dispose()})}_renderHoverPartsForParticipant(u,l,a){const r=u.filter(m=>m.owner===l);return r.length>0?l.renderHoverParts(a,r):new c.RenderedHoverParts([])}_renderStatusBar(u,l){if(l.hasContent)return new i(u,l)}_registerListenersOnRenderedParts(){const u=new k.DisposableStore;return this._renderedParts.forEach((l,a)=>{const r=l.hoverElement;r.tabIndex=0,u.add(_.addDisposableListener(r,_.EventType.FOCUS_IN,d=>{d.stopPropagation(),this._focusedHoverPartIndex=a})),u.add(_.addDisposableListener(r,_.EventType.FOCUS_OUT,d=>{d.stopPropagation(),this._focusedHoverPartIndex=-1}))}),u}_updateMarkdownAndColorParticipantInfo(u){const l=u.find(a=>a instanceof b.MarkdownHoverParticipant&&!(a instanceof n.InlayHintsHover));l&&(this._markdownHoverParticipant=l),this._colorHoverParticipant=u.find(a=>a instanceof p.ColorHoverParticipant)}async updateHoverVerbosityLevel(u,l,a){if(!this._markdownHoverParticipant)return;const r=this._normalizedIndexToMarkdownHoverIndexRange(this._markdownHoverParticipant,l);if(r===void 0)return;const d=await this._markdownHoverParticipant.updateMarkdownHoverVerbosityLevel(u,r,a);d&&(this._renderedParts[l]={type:"hoverPart",participant:this._markdownHoverParticipant,hoverPart:d.hoverPart,hoverElement:d.hoverElement},this._context.onContentsChanged())}isColorPickerVisible(){return this._colorHoverParticipant?.isColorPickerVisible()??!1}_normalizedIndexToMarkdownHoverIndexRange(u,l){const a=this._renderedParts[l];if(!a||a.type!=="hoverPart"||!(a.participant===u))return;const d=this._renderedParts.findIndex(m=>m.type==="hoverPart"&&m.participant===u);if(d===-1)throw new s.BugIndicatingError;return l-d}get domNode(){return this._fragment}get domNodeHasChildren(){return this._fragment.hasChildNodes()}get focusedHoverPartIndex(){return this._focusedHoverPartIndex}}}),define(oe[838],re([1,0,5,2,28,353,86,7,31,385,635,636,6,837]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContentHoverController=void 0;let i=class extends k.Disposable{constructor(g,u,l){super(),this._editor=g,this._instantiationService=u,this._keybindingService=l,this._currentResult=null,this._onContentsChanged=this._register(new s.Emitter),this.onContentsChanged=this._onContentsChanged.event,this._contentHoverWidget=this._register(this._instantiationService.createInstance(b.ContentHoverWidget,this._editor)),this._participants=this._initializeHoverParticipants(),this._computer=new p.ContentHoverComputer(this._editor,this._participants),this._hoverOperation=this._register(new L.HoverOperation(this._editor,this._computer)),this._registerListeners()}_initializeHoverParticipants(){const g=[];for(const u of y.HoverParticipantRegistry.getAll()){const l=this._instantiationService.createInstance(u,this._editor);g.push(l)}return g.sort((u,l)=>u.hoverOrdinal-l.hoverOrdinal),this._register(this._contentHoverWidget.onDidResize(()=>{this._participants.forEach(u=>u.handleResize?.())})),g}_registerListeners(){this._register(this._hoverOperation.onResult(g=>{if(!this._computer.anchor)return;const u=g.hasLoadingMessage?this._addLoadingMessage(g.value):g.value;this._withResult(new n.HoverResult(this._computer.anchor,u,g.isComplete))})),this._register(c.addStandardDisposableListener(this._contentHoverWidget.getDomNode(),"keydown",g=>{g.equals(9)&&this.hide()})),this._register(E.TokenizationRegistry.onDidChange(()=>{this._contentHoverWidget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)}))}_startShowingOrUpdateHover(g,u,l,a,r){if(!(this._contentHoverWidget.position&&this._currentResult))return g?(this._startHoverOperationIfNecessary(g,u,l,a,!1),!0):!1;const m=this._editor.getOption(60).sticky,h=r&&this._contentHoverWidget.isMouseGettingCloser(r.event.posx,r.event.posy);return m&&h?(g&&this._startHoverOperationIfNecessary(g,u,l,a,!0),!0):g?this._currentResult.anchor.equals(g)?!0:g.canAdoptVisibleHover(this._currentResult.anchor,this._contentHoverWidget.position)?(this._setCurrentResult(this._currentResult.filter(g)),this._startHoverOperationIfNecessary(g,u,l,a,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(g,u,l,a,!1),!0):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(g,u,l,a,r){this._computer.anchor&&this._computer.anchor.equals(g)||(this._hoverOperation.cancel(),this._computer.anchor=g,this._computer.shouldFocus=a,this._computer.source=l,this._computer.insistOnKeepingHoverVisible=r,this._hoverOperation.start(u))}_setCurrentResult(g){let u=g;if(this._currentResult===u)return;u&&u.hoverParts.length===0&&(u=null),this._currentResult=u,this._currentResult?this._showHover(this._currentResult):this._hideHover()}_addLoadingMessage(g){if(!this._computer.anchor)return g;for(const u of this._participants){if(!u.createLoadingMessage)continue;const l=u.createLoadingMessage(this._computer.anchor);if(l)return g.slice(0).concat([l])}return g}_withResult(g){if(this._contentHoverWidget.position&&this._currentResult&&this._currentResult.isComplete||this._setCurrentResult(g),!g.isComplete)return;const a=g.hoverParts.length===0,r=this._computer.insistOnKeepingHoverVisible;a&&r||this._setCurrentResult(g)}_showHover(g){const u=this._getHoverContext();this._renderedContentHover=new t.RenderedContentHover(this._editor,g,this._participants,this._computer,u,this._keybindingService),this._renderedContentHover.domNodeHasChildren?this._contentHoverWidget.show(this._renderedContentHover):this._renderedContentHover.dispose()}_hideHover(){this._contentHoverWidget.hide()}_getHoverContext(){return{hide:()=>{this.hide()},onContentsChanged:()=>{this._onContentsChanged.fire(),this._contentHoverWidget.onContentsChanged()},setMinimumDimensions:a=>{this._contentHoverWidget.setMinimumDimensions(a)}}}showsOrWillShow(g){if(this._contentHoverWidget.isResizing)return!0;const l=this._findHoverAnchorCandidates(g);if(!(l.length>0))return this._startShowingOrUpdateHover(null,0,0,!1,g);const r=l[0];return this._startShowingOrUpdateHover(r,0,0,!1,g)}_findHoverAnchorCandidates(g){const u=[];for(const a of this._participants){if(!a.suggestHoverAnchor)continue;const r=a.suggestHoverAnchor(g);r&&u.push(r)}const l=g.target;switch(l.type){case 6:{u.push(new y.HoverRangeAnchor(0,l.range,g.event.posx,g.event.posy));break}case 7:{const a=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;if(!(!l.detail.isAfterLines&&typeof l.detail.horizontalDistanceToText=="number"&&l.detail.horizontalDistanceToText<a))break;u.push(new y.HoverRangeAnchor(0,l.range,g.event.posx,g.event.posy));break}}return u.sort((a,r)=>r.priority-a.priority),u}startShowingAtRange(g,u,l,a){this._startShowingOrUpdateHover(new y.HoverRangeAnchor(0,g,void 0,void 0),u,l,a,null)}async updateHoverVerbosityLevel(g,u,l){this._renderedContentHover?.updateHoverVerbosityLevel(g,u,l)}focusedHoverPartIndex(){return this._renderedContentHover?.focusedHoverPartIndex??-1}containsNode(g){return g?this._contentHoverWidget.getDomNode().contains(g):!1}focus(){this._contentHoverWidget.focus()}scrollUp(){this._contentHoverWidget.scrollUp()}scrollDown(){this._contentHoverWidget.scrollDown()}scrollLeft(){this._contentHoverWidget.scrollLeft()}scrollRight(){this._contentHoverWidget.scrollRight()}pageUp(){this._contentHoverWidget.pageUp()}pageDown(){this._contentHoverWidget.pageDown()}goToTop(){this._contentHoverWidget.goToTop()}goToBottom(){this._contentHoverWidget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._renderedContentHover?.isColorPickerVisible()??!1}get isVisibleFromKeyboard(){return this._contentHoverWidget.isVisibleFromKeyboard}get isVisible(){return this._contentHoverWidget.isVisible}get isFocused(){return this._contentHoverWidget.isFocused}get isResizing(){return this._contentHoverWidget.isResizing}get widget(){return this._contentHoverWidget}};e.ContentHoverController=i,e.ContentHoverController=i=De([he(1,f.IInstantiationService),he(2,_.IKeybindingService)],i)}),define(oe[290],re([1,0,262,2,7,282,31,14,385,838,704,6,237]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";var s;Object.defineProperty(e,"__esModule",{value:!0}),e.HoverController=void 0;const t=!1;let i=class extends k.Disposable{static{s=this}static{this.ID="editor.contrib.hover"}constructor(g,u,l){super(),this._editor=g,this._instantiationService=u,this._keybindingService=l,this._onHoverContentsChanged=this._register(new n.Emitter),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new k.DisposableStore,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new f.RunOnceScheduler(()=>this._reactToEditorMouseMove(this._mouseMoveEvent),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration(a=>{a.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())}))}static get(g){return g.getContribution(s.ID)}_hookListeners(){const g=this._editor.getOption(60);this._hoverSettings={enabled:g.enabled,sticky:g.sticky,hidingDelay:g.delay},g.enabled?(this._listenersStore.add(this._editor.onMouseDown(u=>this._onEditorMouseDown(u))),this._listenersStore.add(this._editor.onMouseUp(()=>this._onEditorMouseUp())),this._listenersStore.add(this._editor.onMouseMove(u=>this._onEditorMouseMove(u))),this._listenersStore.add(this._editor.onKeyDown(u=>this._onKeyDown(u)))):(this._listenersStore.add(this._editor.onMouseMove(u=>this._onEditorMouseMove(u))),this._listenersStore.add(this._editor.onKeyDown(u=>this._onKeyDown(u)))),this._listenersStore.add(this._editor.onMouseLeave(u=>this._onEditorMouseLeave(u))),this._listenersStore.add(this._editor.onDidChangeModel(()=>{this._cancelScheduler(),this._hideWidgets()})),this._listenersStore.add(this._editor.onDidChangeModelContent(()=>this._cancelScheduler())),this._listenersStore.add(this._editor.onDidScrollChange(u=>this._onEditorScrollChanged(u)))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(g){(g.scrollTopChanged||g.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(g){this._hoverState.mouseDown=!0,!this._shouldNotHideCurrentHoverWidget(g)&&this._hideWidgets()}_shouldNotHideCurrentHoverWidget(g){return!!(this._isMouseOnContentHoverWidget(g)||this._isMouseOnMarginHoverWidget(g)||this._isContentWidgetResizing())}_isMouseOnMarginHoverWidget(g){const u=g.target;return u?u.type===12&&u.detail===p.MarginHoverWidget.ID:!1}_isMouseOnContentHoverWidget(g){const u=g.target;return u?u.type===9&&u.detail===_.ContentHoverWidget.ID:!1}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(g){this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._cancelScheduler(),this._shouldNotHideCurrentHoverWidget(g))||t||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(g){const u=this._hoverSettings.sticky,l=(m,h)=>{const v=this._isMouseOnMarginHoverWidget(m);return h&&v},a=(m,h)=>{const v=this._isMouseOnContentHoverWidget(m);return h&&v},r=m=>{const h=this._isMouseOnContentHoverWidget(m),v=this._contentWidget?.isColorPickerVisible;return h&&v},d=(m,h)=>h&&this._contentWidget?.containsNode(m.event.browserEvent.view?.document.activeElement)&&!m.event.browserEvent.view?.getSelection()?.isCollapsed;return!!(l(g,u)||a(g,u)||r(g)||d(g,u))}_onEditorMouseMove(g){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave||(this._mouseMoveEvent=g,this._contentWidget?.isFocused||this._contentWidget?.isResizing))return;const u=this._hoverSettings.sticky;if(u&&this._contentWidget?.isVisibleFromKeyboard)return;if(this._shouldNotRecomputeCurrentHoverWidget(g)){this._reactToEditorMouseMoveRunner.cancel();return}const a=this._hoverSettings.hidingDelay;if(this._contentWidget?.isVisible&&u&&a>0){this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(a);return}this._reactToEditorMouseMove(g)}_reactToEditorMouseMove(g){if(!g)return;const l=g.target.element?.classList.contains("colorpicker-color-decoration"),a=this._editor.getOption(149),r=this._hoverSettings.enabled,d=this._hoverState.activatedByDecoratorClick;if(l&&(a==="click"&&!d||a==="hover"&&!r&&!t||a==="clickAndHover"&&!r&&!d)||!l&&!r&&!d){this._hideWidgets();return}this._tryShowHoverWidget(g,0)||this._tryShowHoverWidget(g,1)||t||this._hideWidgets()}_tryShowHoverWidget(g,u){const l=this._getOrCreateContentWidget(),a=this._getOrCreateGlyphWidget();let r,d;switch(u){case 0:r=l,d=a;break;case 1:r=a,d=l;break;default:throw new Error(`HoverWidgetType ${u} is unrecognized`)}const m=r.showsOrWillShow(g);return m&&d.hide(),m}_onKeyDown(g){if(!this._editor.hasModel())return;const u=this._keybindingService.softDispatch(g,this._editor.getDomNode()),l=u.kind===1||u.kind===2&&(u.commandId===c.SHOW_OR_FOCUS_HOVER_ACTION_ID||u.commandId===c.INCREASE_HOVER_VERBOSITY_ACTION_ID||u.commandId===c.DECREASE_HOVER_VERBOSITY_ACTION_ID)&&this._contentWidget?.isVisible;g.keyCode===5||g.keyCode===6||g.keyCode===57||g.keyCode===4||l||this._hideWidgets()}_hideWidgets(){t||this._hoverState.mouseDown&&this._contentWidget?.isColorPickerVisible||L.InlineSuggestionHintsContentWidget.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,this._glyphWidget?.hide(),this._contentWidget?.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(b.ContentHoverController,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged(()=>this._onHoverContentsChanged.fire()))),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(p.MarginHoverWidget,this._editor)),this._glyphWidget}showContentHover(g,u,l,a,r=!1){this._hoverState.activatedByDecoratorClick=r,this._getOrCreateContentWidget().startShowingAtRange(g,u,l,a)}_isContentWidgetResizing(){return this._contentWidget?.widget.isResizing||!1}focusedHoverPartIndex(){return this._getOrCreateContentWidget().focusedHoverPartIndex()}updateHoverVerbosityLevel(g,u,l){this._getOrCreateContentWidget().updateHoverVerbosityLevel(g,u,l)}focus(){this._contentWidget?.focus()}scrollUp(){this._contentWidget?.scrollUp()}scrollDown(){this._contentWidget?.scrollDown()}scrollLeft(){this._contentWidget?.scrollLeft()}scrollRight(){this._contentWidget?.scrollRight()}pageUp(){this._contentWidget?.pageUp()}pageDown(){this._contentWidget?.pageDown()}goToTop(){this._contentWidget?.goToTop()}goToBottom(){this._contentWidget?.goToBottom()}get isColorPickerVisible(){return this._contentWidget?.isColorPickerVisible}get isHoverVisible(){return this._contentWidget?.isVisible}dispose(){super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),this._glyphWidget?.dispose(),this._contentWidget?.dispose()}};e.HoverController=i,e.HoverController=i=s=De([he(1,E.IInstantiationService),he(2,y.IKeybindingService)],i)}),define(oe[839],re([1,0,2,15,4,417,286,290,86]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContribution=void 0;class b extends c.Disposable{static{this.ID="editor.contrib.colorContribution"}constructor(n){super(),this._editor=n,this._register(n.onMouseDown(s=>this.onMouseDown(s)))}dispose(){super.dispose()}onMouseDown(n){const s=this._editor.getOption(149);if(s!=="click"&&s!=="clickAndHover")return;const t=n.target;if(t.type!==6||!t.detail.injectedText||t.detail.injectedText.options.attachedData!==L.ColorDecorationInjectedTextMarker||!t.range)return;const i=this._editor.getContribution(f.HoverController.ID);if(i&&!i.isColorPickerVisible){const o=new E.Range(t.range.startLineNumber,t.range.startColumn+1,t.range.endLineNumber,t.range.endColumn+1);i.showContentHover(o,1,0,!1,!0)}}}e.ColorContribution=b,(0,k.registerEditorContribution)(b.ID,b,2),_.HoverParticipantRegistry.register(y.ColorHoverParticipant)}),define(oe[840],re([1,0,262,72,15,4,20,424,290,28,3,237]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DecreaseHoverVerbosityLevel=e.IncreaseHoverVerbosityLevel=e.GoToBottomHoverAction=e.GoToTopHoverAction=e.PageDownHoverAction=e.PageUpHoverAction=e.ScrollRightHoverAction=e.ScrollLeftHoverAction=e.ScrollDownHoverAction=e.ScrollUpHoverAction=e.ShowDefinitionPreviewHoverAction=e.ShowOrFocusHoverAction=void 0;var n;(function(v){v.NoAutoFocus="noAutoFocus",v.FocusIfVisible="focusIfVisible",v.AutoFocusImmediately="autoFocusImmediately"})(n||(n={}));class s extends E.EditorAction{constructor(){super({id:c.SHOW_OR_FOCUS_HOVER_ACTION_ID,label:p.localize(675,"Show or Focus Hover"),metadata:{description:p.localize2(688,"Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[n.NoAutoFocus,n.FocusIfVisible,n.AutoFocusImmediately],enumDescriptions:[p.localize(676,"The hover will not automatically take focus."),p.localize(677,"The hover will take focus only if it is already visible."),p.localize(678,"The hover will automatically take focus when it appears.")],default:n.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:y.EditorContextKeys.editorTextFocus,primary:(0,k.KeyChord)(2089,2087),weight:100}})}run(C,w,S){if(!w.hasModel())return;const D=_.HoverController.get(w);if(!D)return;const I=S?.focus;let T=n.FocusIfVisible;Object.values(n).includes(I)?T=I:typeof I=="boolean"&&I&&(T=n.AutoFocusImmediately);const M=R=>{const N=w.getPosition(),O=new L.Range(N.lineNumber,N.column,N.lineNumber,N.column);D.showContentHover(O,1,1,R)},A=w.getOption(2)===2;D.isHoverVisible?T!==n.NoAutoFocus?D.focus():M(A):M(A||T===n.AutoFocusImmediately)}}e.ShowOrFocusHoverAction=s;class t extends E.EditorAction{constructor(){super({id:c.SHOW_DEFINITION_PREVIEW_HOVER_ACTION_ID,label:p.localize(679,"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:p.localize2(689,"Show the definition preview hover in the editor.")}})}run(C,w){const S=_.HoverController.get(w);if(!S)return;const D=w.getPosition();if(!D)return;const I=new L.Range(D.lineNumber,D.column,D.lineNumber,D.column),T=f.GotoDefinitionAtPositionEditorContribution.get(w);if(!T)return;T.startFindDefinitionFromCursor(D).then(()=>{S.showContentHover(I,1,1,!0)})}}e.ShowDefinitionPreviewHoverAction=t;class i extends E.EditorAction{constructor(){super({id:c.SCROLL_UP_HOVER_ACTION_ID,label:p.localize(680,"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:16,weight:100},metadata:{description:p.localize2(690,"Scroll up the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.scrollUp()}}e.ScrollUpHoverAction=i;class o extends E.EditorAction{constructor(){super({id:c.SCROLL_DOWN_HOVER_ACTION_ID,label:p.localize(681,"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:18,weight:100},metadata:{description:p.localize2(691,"Scroll down the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.scrollDown()}}e.ScrollDownHoverAction=o;class g extends E.EditorAction{constructor(){super({id:c.SCROLL_LEFT_HOVER_ACTION_ID,label:p.localize(682,"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:15,weight:100},metadata:{description:p.localize2(692,"Scroll left the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.scrollLeft()}}e.ScrollLeftHoverAction=g;class u extends E.EditorAction{constructor(){super({id:c.SCROLL_RIGHT_HOVER_ACTION_ID,label:p.localize(683,"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:17,weight:100},metadata:{description:p.localize2(693,"Scroll right the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.scrollRight()}}e.ScrollRightHoverAction=u;class l extends E.EditorAction{constructor(){super({id:c.PAGE_UP_HOVER_ACTION_ID,label:p.localize(684,"Page Up Hover"),alias:"Page Up Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:p.localize2(694,"Page up the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.pageUp()}}e.PageUpHoverAction=l;class a extends E.EditorAction{constructor(){super({id:c.PAGE_DOWN_HOVER_ACTION_ID,label:p.localize(685,"Page Down Hover"),alias:"Page Down Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:p.localize2(695,"Page down the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.pageDown()}}e.PageDownHoverAction=a;class r extends E.EditorAction{constructor(){super({id:c.GO_TO_TOP_HOVER_ACTION_ID,label:p.localize(686,"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:p.localize2(696,"Go to the top of the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.goToTop()}}e.GoToTopHoverAction=r;class d extends E.EditorAction{constructor(){super({id:c.GO_TO_BOTTOM_HOVER_ACTION_ID,label:p.localize(687,"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:y.EditorContextKeys.hoverFocused,kbOpts:{kbExpr:y.EditorContextKeys.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:p.localize2(697,"Go to the bottom of the editor hover.")}})}run(C,w){const S=_.HoverController.get(w);S&&S.goToBottom()}}e.GoToBottomHoverAction=d;class m extends E.EditorAction{constructor(){super({id:c.INCREASE_HOVER_VERBOSITY_ACTION_ID,label:c.INCREASE_HOVER_VERBOSITY_ACTION_LABEL,alias:"Increase Hover Verbosity Level",precondition:y.EditorContextKeys.hoverVisible})}run(C,w,S){const D=_.HoverController.get(w);if(!D)return;const I=S?.index!==void 0?S.index:D.focusedHoverPartIndex();D.updateHoverVerbosityLevel(b.HoverVerbosityAction.Increase,I,S?.focus)}}e.IncreaseHoverVerbosityLevel=m;class h extends E.EditorAction{constructor(){super({id:c.DECREASE_HOVER_VERBOSITY_ACTION_ID,label:c.DECREASE_HOVER_VERBOSITY_ACTION_LABEL,alias:"Decrease Hover Verbosity Level",precondition:y.EditorContextKeys.hoverVisible})}run(C,w,S){const D=_.HoverController.get(w);if(!D)return;const I=S?.index!==void 0?S.index:D.focusedHoverPartIndex();_.HoverController.get(w)?.updateHoverVerbosityLevel(b.HoverVerbosityAction.Decrease,I,S?.focus)}}e.DecreaseHoverVerbosityLevel=h}),define(oe[841],re([1,0,840,15,32,25,86,215,836,290,376,637,237]),function(ae,e,c,k,E,L,y,f,_,b,p,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,k.registerEditorContribution)(b.HoverController.ID,b.HoverController,2),(0,k.registerEditorAction)(c.ShowOrFocusHoverAction),(0,k.registerEditorAction)(c.ShowDefinitionPreviewHoverAction),(0,k.registerEditorAction)(c.ScrollUpHoverAction),(0,k.registerEditorAction)(c.ScrollDownHoverAction),(0,k.registerEditorAction)(c.ScrollLeftHoverAction),(0,k.registerEditorAction)(c.ScrollRightHoverAction),(0,k.registerEditorAction)(c.PageUpHoverAction),(0,k.registerEditorAction)(c.PageDownHoverAction),(0,k.registerEditorAction)(c.GoToTopHoverAction),(0,k.registerEditorAction)(c.GoToBottomHoverAction),(0,k.registerEditorAction)(c.IncreaseHoverVerbosityLevel),(0,k.registerEditorAction)(c.DecreaseHoverVerbosityLevel),y.HoverParticipantRegistry.register(f.MarkdownHoverParticipant),y.HoverParticipantRegistry.register(_.MarkerHoverParticipant),(0,L.registerThemingParticipant)((s,t)=>{const i=s.getColor(E.editorHoverBorder);i&&(t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`))}),p.AccessibleViewRegistry.register(new n.HoverAccessibleView),p.AccessibleViewRegistry.register(new n.HoverAccessibilityHelp),p.AccessibleViewRegistry.register(new n.ExtHoverAccessibleView)}),define(oe[842],re([1,0,15,86,426,427]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(E.InlayHintsController.ID,E.InlayHintsController,1),k.HoverParticipantRegistry.register(L.InlayHintsHover)}),define(oe[428],re([1,0,2,17,829,828,7,58,29,12,20,205,4,276,425,9,18,34,79,5,360,74,287,349]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h){"use strict";var v;Object.defineProperty(e,"__esModule",{value:!0}),e.StickyScrollController=void 0;let C=class extends c.Disposable{static{v=this}static{this.ID="store.contrib.stickyScrollController"}constructor(S,D,I,T,M,A,R){super(),this._editor=S,this._contextMenuService=D,this._languageFeaturesService=I,this._instaService=T,this._contextKeyService=R,this._sessionStore=new c.DisposableStore,this._maxStickyLines=Number.MAX_SAFE_INTEGER,this._candidateDefinitionsLength=-1,this._focusedStickyElementIndex=-1,this._enabled=!1,this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1,this._endLineNumbers=[],this._stickyScrollWidget=new E.StickyScrollWidget(this._editor),this._stickyLineCandidateProvider=new L.StickyLineCandidateProvider(this._editor,I,M),this._register(this._stickyScrollWidget),this._register(this._stickyLineCandidateProvider),this._widgetState=E.StickyScrollWidgetState.Empty,this._onDidResize(),this._readConfiguration();const N=this._stickyScrollWidget.getDomNode();this._register(this._editor.onDidChangeConfiguration(x=>{this._readConfigurationChange(x)})),this._register(a.addDisposableListener(N,a.EventType.CONTEXT_MENU,async x=>{this._onContextMenu(a.getWindow(N),x)})),this._stickyScrollFocusedContextKey=p.EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService),this._stickyScrollVisibleContextKey=p.EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);const O=this._register(a.trackFocus(N));this._register(O.onDidBlur(x=>{this._positionRevealed===!1&&N.clientHeight===0?(this._focusedStickyElementIndex=-1,this.focus()):this._disposeFocusStickyScrollStore()})),this._register(O.onDidFocus(x=>{this.focus()})),this._registerMouseListeners(),this._register(a.addDisposableListener(N,a.EventType.MOUSE_DOWN,x=>{this._onMouseDown=!0}))}static get(S){return S.getContribution(v.ID)}_disposeFocusStickyScrollStore(){this._stickyScrollFocusedContextKey.set(!1),this._focusDisposableStore?.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}focus(){if(this._onMouseDown){this._onMouseDown=!1,this._editor.focus();return}this._stickyScrollFocusedContextKey.get()!==!0&&(this._focused=!0,this._focusDisposableStore=new c.DisposableStore,this._stickyScrollFocusedContextKey.set(!0),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}focusNext(){this._focusedStickyElementIndex<this._stickyScrollWidget.lineNumberCount-1&&this._focusNav(!0)}focusPrevious(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}selectEditor(){this._editor.focus()}_focusNav(S){this._focusedStickyElementIndex=S?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex)}goToFocused(){const S=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:S[this._focusedStickyElementIndex],column:1})}_revealPosition(S){this._reveaInEditor(S,()=>this._editor.revealPosition(S))}_revealLineInCenterIfOutsideViewport(S){this._reveaInEditor(S,()=>this._editor.revealLineInCenterIfOutsideViewport(S.lineNumber,0))}_reveaInEditor(S,D){this._focused&&this._disposeFocusStickyScrollStore(),this._positionRevealed=!0,D(),this._editor.setSelection(s.Range.fromPositions(S)),this._editor.focus()}_registerMouseListeners(){const S=this._register(new c.DisposableStore),D=this._register(new n.ClickLinkGesture(this._editor,{extractLineNumberFromMouseEvent:M=>{const A=this._stickyScrollWidget.getEditorPositionFromNode(M.target.element);return A?A.lineNumber:0}})),I=M=>{if(!this._editor.hasModel()||M.target.type!==12||M.target.detail!==this._stickyScrollWidget.getId())return null;const A=M.target.element;if(!A||A.innerText!==A.innerHTML)return null;const R=this._stickyScrollWidget.getEditorPositionFromNode(A);return R?{range:new s.Range(R.lineNumber,R.column,R.lineNumber,R.column+A.innerText.length),textElement:A}:null},T=this._stickyScrollWidget.getDomNode();this._register(a.addStandardDisposableListener(T,a.EventType.CLICK,M=>{if(M.ctrlKey||M.altKey||M.metaKey||!M.leftButton)return;if(M.shiftKey){const O=this._stickyScrollWidget.getLineIndexFromChildDomNode(M.target);if(O===null)return;const x=new o.Position(this._endLineNumbers[O],1);this._revealLineInCenterIfOutsideViewport(x);return}if(this._stickyScrollWidget.isInFoldingIconDomNode(M.target)){const O=this._stickyScrollWidget.getLineNumberFromChildDomNode(M.target);this._toggleFoldingRegionForLine(O);return}if(!this._stickyScrollWidget.isInStickyLine(M.target))return;let N=this._stickyScrollWidget.getEditorPositionFromNode(M.target);if(!N){const O=this._stickyScrollWidget.getLineNumberFromChildDomNode(M.target);if(O===null)return;N=new o.Position(O,1)}this._revealPosition(N)})),this._register(a.addStandardDisposableListener(T,a.EventType.MOUSE_MOVE,M=>{if(M.shiftKey){const A=this._stickyScrollWidget.getLineIndexFromChildDomNode(M.target);if(A===null||this._showEndForLine!==null&&this._showEndForLine===A)return;this._showEndForLine=A,this._renderStickyScroll();return}this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(a.addDisposableListener(T,a.EventType.MOUSE_LEAVE,M=>{this._showEndForLine!==void 0&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._register(D.onMouseMoveOrRelevantKeyDown(([M,A])=>{const R=I(M);if(!R||!M.hasTriggerModifier||!this._editor.hasModel()){S.clear();return}const{range:N,textElement:O}=R;if(!N.equalsRange(this._stickyRangeProjectedOnEditor))this._stickyRangeProjectedOnEditor=N,S.clear();else if(O.style.textDecoration==="underline")return;const x=new g.CancellationTokenSource;S.add((0,c.toDisposable)(()=>x.dispose(!0)));let F;(0,t.getDefinitionsAtPosition)(this._languageFeaturesService.definitionProvider,this._editor.getModel(),new o.Position(N.startLineNumber,N.startColumn+1),!1,x.token).then(W=>{if(!x.token.isCancellationRequested)if(W.length!==0){this._candidateDefinitionsLength=W.length;const z=O;F!==z?(S.clear(),F=z,F.style.textDecoration="underline",S.add((0,c.toDisposable)(()=>{F.style.textDecoration="none"}))):F||(F=z,F.style.textDecoration="underline",S.add((0,c.toDisposable)(()=>{F.style.textDecoration="none"})))}else S.clear()})})),this._register(D.onCancel(()=>{S.clear()})),this._register(D.onExecute(async M=>{if(M.target.type!==12||M.target.detail!==this._stickyScrollWidget.getId())return;const A=this._stickyScrollWidget.getEditorPositionFromNode(M.target.element);A&&(!this._editor.hasModel()||!this._stickyRangeProjectedOnEditor||(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:A.lineNumber,column:1})),this._instaService.invokeFunction(i.goToDefinitionWithLocation,M,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})))}))}_onContextMenu(S,D){const I=new d.StandardMouseEvent(S,D);this._contextMenuService.showContextMenu({menuId:_.MenuId.StickyScrollContext,getAnchor:()=>I})}_toggleFoldingRegionForLine(S){if(!this._foldingModel||S===null)return;const D=this._stickyScrollWidget.getRenderedStickyLine(S),I=D?.foldingIcon;if(!I)return;(0,h.toggleCollapseState)(this._foldingModel,Number.MAX_VALUE,[S]),I.isCollapsed=!I.isCollapsed;const T=(I.isCollapsed?this._editor.getTopForLineNumber(I.foldingEndLine):this._editor.getTopForLineNumber(I.foldingStartLine))-this._editor.getOption(67)*D.index+1;this._editor.setScrollTop(T),this._renderStickyScroll(S)}_readConfiguration(){const S=this._editor.getOption(116);if(S.enabled===!1){this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),this._enabled=!1;return}else S.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange(I=>{I.scrollTopChanged&&(this._showEndForLine=void 0,this._renderStickyScroll())})),this._sessionStore.add(this._editor.onDidLayoutChange(()=>this._onDidResize())),this._sessionStore.add(this._editor.onDidChangeModelTokens(I=>this._onTokensChange(I))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(()=>{this._showEndForLine=void 0,this._renderStickyScroll()})),this._enabled=!0);this._editor.getOption(68).renderType===2&&this._sessionStore.add(this._editor.onDidChangeCursorPosition(()=>{this._showEndForLine=void 0,this._renderStickyScroll(0)}))}_readConfigurationChange(S){(S.hasChanged(116)||S.hasChanged(73)||S.hasChanged(67)||S.hasChanged(111)||S.hasChanged(68))&&this._readConfiguration(),S.hasChanged(68)&&this._renderStickyScroll(0)}_needsUpdate(S){const D=this._stickyScrollWidget.getCurrentLines();for(const I of D)for(const T of S.ranges)if(I>=T.fromLineNumber&&I<=T.toLineNumber)return!0;return!1}_onTokensChange(S){this._needsUpdate(S)&&this._renderStickyScroll(0)}_onDidResize(){const D=this._editor.getLayoutInfo().height/this._editor.getOption(67);this._maxStickyLines=Math.round(D*.25)}async _renderStickyScroll(S){const D=this._editor.getModel();if(!D||D.isTooLargeForTokenization()){this._resetState();return}const I=this._updateAndGetMinRebuildFromLine(S),T=this._stickyLineCandidateProvider.getVersionId();if(T===void 0||T===D.getVersionId())if(!this._focused)await this._updateState(I);else if(this._focusedStickyElementIndex===-1)await this._updateState(I),this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1,this._focusedStickyElementIndex!==-1&&this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex);else{const A=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];await this._updateState(I),this._stickyScrollWidget.lineNumberCount===0?this._focusedStickyElementIndex=-1:(this._stickyScrollWidget.lineNumbers.includes(A)||(this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumberCount-1),this._stickyScrollWidget.focusLineWithIndex(this._focusedStickyElementIndex))}}_updateAndGetMinRebuildFromLine(S){if(S!==void 0){const D=this._minRebuildFromLine!==void 0?this._minRebuildFromLine:1/0;this._minRebuildFromLine=Math.min(S,D)}return this._minRebuildFromLine}async _updateState(S){this._minRebuildFromLine=void 0,this._foldingModel=await m.FoldingController.get(this._editor)?.getFoldingModel()??void 0,this._widgetState=this.findScrollWidgetState();const D=this._widgetState.startLineNumbers.length>0;this._stickyScrollVisibleContextKey.set(D),this._stickyScrollWidget.setState(this._widgetState,this._foldingModel,S)}async _resetState(){this._minRebuildFromLine=void 0,this._foldingModel=void 0,this._widgetState=E.StickyScrollWidgetState.Empty,this._stickyScrollVisibleContextKey.set(!1),this._stickyScrollWidget.setState(void 0,void 0)}findScrollWidgetState(){const S=this._editor.getOption(67),D=Math.min(this._maxStickyLines,this._editor.getOption(116).maxLineCount),I=this._editor.getScrollTop();let T=0;const M=[],A=[],R=this._editor.getVisibleRanges();if(R.length!==0){const N=new r.StickyRange(R[0].startLineNumber,R[R.length-1].endLineNumber),O=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(N);for(const x of O){const F=x.startLineNumber,W=x.endLineNumber,z=x.nestingDepth;if(W-F>0){const q=(z-1)*S,H=z*S,K=this._editor.getBottomForLineNumber(F)-I,U=this._editor.getTopForLineNumber(W)-I,Y=this._editor.getBottomForLineNumber(W)-I;if(q>U&&q<=Y){M.push(F),A.push(W+1),T=Y-H;break}else H>K&&H<=Y&&(M.push(F),A.push(W+1));if(M.length===D)break}}}return this._endLineNumbers=A,new E.StickyScrollWidgetState(M,A,T,this._showEndForLine)}dispose(){super.dispose(),this._sessionStore.dispose()}};e.StickyScrollController=C,e.StickyScrollController=C=v=De([he(1,f.IContextMenuService),he(2,k.ILanguageFeaturesService),he(3,y.IInstantiationService),he(4,u.ILanguageConfigurationService),he(5,l.ILanguageFeatureDebounceService),he(6,b.IContextKeyService)],C)}),define(oe[843],re([1,0,15,3,665,29,27,12,20,428]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectEditor=e.GoToStickyScrollLine=e.SelectPreviousStickyScrollLine=e.SelectNextStickyScrollLine=e.FocusStickyScroll=e.ToggleStickyScroll=void 0;class p extends L.Action2{constructor(){super({id:"editor.action.toggleStickyScroll",title:{...(0,k.localize2)(400,"Toggle Editor Sticky Scroll"),mnemonicTitle:(0,k.localize)(396,"&&Toggle Editor Sticky Scroll")},metadata:{description:(0,k.localize2)(401,"Toggle/enable the editor sticky scroll which shows the nested scopes at the top of the viewport")},category:E.Categories.View,toggled:{condition:f.ContextKeyExpr.equals("config.editor.stickyScroll.enabled",!0),title:(0,k.localize)(397,"Sticky Scroll"),mnemonicTitle:(0,k.localize)(398,"&&Sticky Scroll")},menu:[{id:L.MenuId.CommandPalette},{id:L.MenuId.MenubarAppearanceMenu,group:"4_editor",order:3},{id:L.MenuId.StickyScrollContext}]})}async run(l){const a=l.get(y.IConfigurationService),r=!a.getValue("editor.stickyScroll.enabled");return a.updateValue("editor.stickyScroll.enabled",r)}}e.ToggleStickyScroll=p;const n=100;class s extends c.EditorAction2{constructor(){super({id:"editor.action.focusStickyScroll",title:{...(0,k.localize2)(402,"Focus on the editor sticky scroll"),mnemonicTitle:(0,k.localize)(399,"&&Focus Sticky Scroll")},precondition:f.ContextKeyExpr.and(f.ContextKeyExpr.has("config.editor.stickyScroll.enabled"),_.EditorContextKeys.stickyScrollVisible),menu:[{id:L.MenuId.CommandPalette}]})}runEditorCommand(l,a){b.StickyScrollController.get(a)?.focus()}}e.FocusStickyScroll=s;class t extends c.EditorAction2{constructor(){super({id:"editor.action.selectNextStickyScrollLine",title:(0,k.localize2)(403,"Select the next editor sticky scroll line"),precondition:_.EditorContextKeys.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:n,primary:18}})}runEditorCommand(l,a){b.StickyScrollController.get(a)?.focusNext()}}e.SelectNextStickyScrollLine=t;class i extends c.EditorAction2{constructor(){super({id:"editor.action.selectPreviousStickyScrollLine",title:(0,k.localize2)(404,"Select the previous sticky scroll line"),precondition:_.EditorContextKeys.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:n,primary:16}})}runEditorCommand(l,a){b.StickyScrollController.get(a)?.focusPrevious()}}e.SelectPreviousStickyScrollLine=i;class o extends c.EditorAction2{constructor(){super({id:"editor.action.goToFocusedStickyScrollLine",title:(0,k.localize2)(405,"Go to the focused sticky scroll line"),precondition:_.EditorContextKeys.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:n,primary:3}})}runEditorCommand(l,a){b.StickyScrollController.get(a)?.goToFocused()}}e.GoToStickyScrollLine=o;class g extends c.EditorAction2{constructor(){super({id:"editor.action.selectEditor",title:(0,k.localize2)(406,"Select Editor"),precondition:_.EditorContextKeys.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:n,primary:9}})}runEditorCommand(l,a){b.StickyScrollController.get(a)?.selectEditor()}}e.SelectEditor=g}),define(oe[844],re([1,0,15,843,428,29]),function(ae,e,c,k,E,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(E.StickyScrollController.ID,E.StickyScrollController,1),(0,L.registerAction2)(k.ToggleStickyScroll),(0,L.registerAction2)(k.FocusStickyScroll),(0,L.registerAction2)(k.SelectPreviousStickyScrollLine),(0,L.registerAction2)(k.SelectNextStickyScrollLine),(0,L.registerAction2)(k.GoToStickyScrollLine),(0,L.registerAction2)(k.SelectEditor)}),define(oe[845],re([1,0,15,35,423,27,12,7,50,100]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneReferencesController=void 0;let p=class extends E.ReferencesController{constructor(s,t,i,o,g,u,l){super(!0,s,t,i,o,g,u,l)}};e.StandaloneReferencesController=p,e.StandaloneReferencesController=p=De([he(1,y.IContextKeyService),he(2,k.ICodeEditorService),he(3,_.INotificationService),he(4,f.IInstantiationService),he(5,b.IStorageService),he(6,L.IConfigurationService)],p),(0,c.registerEditorContribution)(E.ReferencesController.ID,p,4)}),define(oe[846],re([1,0,8,2,47,110,3,179,49,50,217]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UndoRedoService=void 0;const n=!1;function s(h){return h.scheme===E.Schemas.file?h.fsPath:h.path}let t=0;class i{constructor(v,C,w,S,D,I,T){this.id=++t,this.type=0,this.actual=v,this.label=v.label,this.confirmBeforeUndo=v.confirmBeforeUndo||!1,this.resourceLabel=C,this.strResource=w,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=S,this.groupOrder=D,this.sourceId=I,this.sourceOrder=T,this.isValid=!0}setValid(v){this.isValid=v}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class o{constructor(v,C){this.resourceLabel=v,this.reason=C}}class g{constructor(){this.elements=new Map}createMessage(){const v=[],C=[];for(const[,S]of this.elements)(S.reason===0?v:C).push(S.resourceLabel);const w=[];return v.length>0&&w.push(y.localize(1042,"The following files have been closed and modified on disk: {0}.",v.join(", "))),C.length>0&&w.push(y.localize(1043,"The following files have been modified in an incompatible way: {0}.",C.join(", "))),w.join(`
`)}get size(){return this.elements.size}has(v){return this.elements.has(v)}set(v,C){this.elements.set(v,C)}delete(v){return this.elements.delete(v)}}class u{constructor(v,C,w,S,D,I,T){this.id=++t,this.type=1,this.actual=v,this.label=v.label,this.confirmBeforeUndo=v.confirmBeforeUndo||!1,this.resourceLabels=C,this.strResources=w,this.groupId=S,this.groupOrder=D,this.sourceId=I,this.sourceOrder=T,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(v,C,w){this.removedResources||(this.removedResources=new g),this.removedResources.has(C)||this.removedResources.set(C,new o(v,w))}setValid(v,C,w){w?this.invalidatedResources&&(this.invalidatedResources.delete(C),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new g),this.invalidatedResources.has(C)||this.invalidatedResources.set(C,new o(v,0)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class l{constructor(v,C){this.resourceLabel=v,this.strResource=C,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const v of this._past)v.type===1&&v.removeResource(this.resourceLabel,this.strResource,0);for(const v of this._future)v.type===1&&v.removeResource(this.resourceLabel,this.strResource,0);this.versionId++}toString(){const v=[];v.push(`* ${this.strResource}:`);for(let C=0;C<this._past.length;C++)v.push(`   * [UNDO] ${this._past[C]}`);for(let C=this._future.length-1;C>=0;C--)v.push(`   * [REDO] ${this._future[C]}`);return v.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}_setElementValidFlag(v,C){v.type===1?v.setValid(this.resourceLabel,this.strResource,C):v.setValid(C)}setElementsValidFlag(v,C){for(const w of this._past)C(w.actual)&&this._setElementValidFlag(w,v);for(const w of this._future)C(w.actual)&&this._setElementValidFlag(w,v)}pushElement(v){for(const C of this._future)C.type===1&&C.removeResource(this.resourceLabel,this.strResource,1);this._future=[],this._past.push(v),this.versionId++}createSnapshot(v){const C=[];for(let w=0,S=this._past.length;w<S;w++)C.push(this._past[w].id);for(let w=this._future.length-1;w>=0;w--)C.push(this._future[w].id);return new p.ResourceEditStackSnapshot(v,C)}restoreSnapshot(v){const C=v.elements.length;let w=!0,S=0,D=-1;for(let T=0,M=this._past.length;T<M;T++,S++){const A=this._past[T];w&&(S>=C||A.id!==v.elements[S])&&(w=!1,D=0),!w&&A.type===1&&A.removeResource(this.resourceLabel,this.strResource,0)}let I=-1;for(let T=this._future.length-1;T>=0;T--,S++){const M=this._future[T];w&&(S>=C||M.id!==v.elements[S])&&(w=!1,I=T),!w&&M.type===1&&M.removeResource(this.resourceLabel,this.strResource,0)}D!==-1&&(this._past=this._past.slice(0,D)),I!==-1&&(this._future=this._future.slice(I+1)),this.versionId++}getElements(){const v=[],C=[];for(const w of this._past)v.push(w.actual);for(const w of this._future)C.push(w.actual);return{past:v,future:C}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(v,C){for(let w=this._past.length-1;w>=0;w--)if(this._past[w]===v){C.has(this.strResource)?this._past[w]=C.get(this.strResource):this._past.splice(w,1);break}this.versionId++}splitFutureWorkspaceElement(v,C){for(let w=this._future.length-1;w>=0;w--)if(this._future[w]===v){C.has(this.strResource)?this._future[w]=C.get(this.strResource):this._future.splice(w,1);break}this.versionId++}moveBackward(v){this._past.pop(),this._future.push(v),this.versionId++}moveForward(v){this._future.pop(),this._past.push(v),this.versionId++}}class a{constructor(v){this.editStacks=v,this._versionIds=[];for(let C=0,w=this.editStacks.length;C<w;C++)this._versionIds[C]=this.editStacks[C].versionId}isValid(){for(let v=0,C=this.editStacks.length;v<C;v++)if(this._versionIds[v]!==this.editStacks[v].versionId)return!1;return!0}}const r=new l("","");r.locked=!0;let d=class{constructor(v,C){this._dialogService=v,this._notificationService=C,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}getUriComparisonKey(v){for(const C of this._uriComparisonKeyComputers)if(C[0]===v.scheme)return C[1].getComparisonKey(v);return v.toString()}_print(v){console.log("------------------------------------"),console.log(`AFTER ${v}: `);const C=[];for(const w of this._editStacks)C.push(w[1].toString());console.log(C.join(`
`))}pushElement(v,C=p.UndoRedoGroup.None,w=p.UndoRedoSource.None){if(v.type===0){const S=s(v.resource),D=this.getUriComparisonKey(v.resource);this._pushElement(new i(v,S,D,C.id,C.nextOrder(),w.id,w.nextOrder()))}else{const S=new Set,D=[],I=[];for(const T of v.resources){const M=s(T),A=this.getUriComparisonKey(T);S.has(A)||(S.add(A),D.push(M),I.push(A))}D.length===1?this._pushElement(new i(v,D[0],I[0],C.id,C.nextOrder(),w.id,w.nextOrder())):this._pushElement(new u(v,D,I,C.id,C.nextOrder(),w.id,w.nextOrder()))}n&&this._print("pushElement")}_pushElement(v){for(let C=0,w=v.strResources.length;C<w;C++){const S=v.resourceLabels[C],D=v.strResources[C];let I;this._editStacks.has(D)?I=this._editStacks.get(D):(I=new l(S,D),this._editStacks.set(D,I)),I.pushElement(v)}}getLastElement(v){const C=this.getUriComparisonKey(v);if(this._editStacks.has(C)){const w=this._editStacks.get(C);if(w.hasFutureElements())return null;const S=w.getClosestPastElement();return S?S.actual:null}return null}_splitPastWorkspaceElement(v,C){const w=v.actual.split(),S=new Map;for(const D of w){const I=s(D.resource),T=this.getUriComparisonKey(D.resource),M=new i(D,I,T,0,0,0,0);S.set(M.strResource,M)}for(const D of v.strResources){if(C&&C.has(D))continue;this._editStacks.get(D).splitPastWorkspaceElement(v,S)}}_splitFutureWorkspaceElement(v,C){const w=v.actual.split(),S=new Map;for(const D of w){const I=s(D.resource),T=this.getUriComparisonKey(D.resource),M=new i(D,I,T,0,0,0,0);S.set(M.strResource,M)}for(const D of v.strResources){if(C&&C.has(D))continue;this._editStacks.get(D).splitFutureWorkspaceElement(v,S)}}removeElements(v){const C=typeof v=="string"?v:this.getUriComparisonKey(v);this._editStacks.has(C)&&(this._editStacks.get(C).dispose(),this._editStacks.delete(C)),n&&this._print("removeElements")}setElementsValidFlag(v,C,w){const S=this.getUriComparisonKey(v);this._editStacks.has(S)&&this._editStacks.get(S).setElementsValidFlag(C,w),n&&this._print("setElementsValidFlag")}createSnapshot(v){const C=this.getUriComparisonKey(v);return this._editStacks.has(C)?this._editStacks.get(C).createSnapshot(v):new p.ResourceEditStackSnapshot(v,[])}restoreSnapshot(v){const C=this.getUriComparisonKey(v.resource);if(this._editStacks.has(C)){const w=this._editStacks.get(C);w.restoreSnapshot(v),!w.hasPastElements()&&!w.hasFutureElements()&&(w.dispose(),this._editStacks.delete(C))}n&&this._print("restoreSnapshot")}getElements(v){const C=this.getUriComparisonKey(v);return this._editStacks.has(C)?this._editStacks.get(C).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(v){if(!v)return[null,null];let C=null,w=null;for(const[S,D]of this._editStacks){const I=D.getClosestPastElement();I&&I.sourceId===v&&(!C||I.sourceOrder>C.sourceOrder)&&(C=I,w=S)}return[C,w]}canUndo(v){if(v instanceof p.UndoRedoSource){const[,w]=this._findClosestUndoElementWithSource(v.id);return!!w}const C=this.getUriComparisonKey(v);return this._editStacks.has(C)?this._editStacks.get(C).hasPastElements():!1}_onError(v,C){(0,c.onUnexpectedError)(v);for(const w of C.strResources)this.removeElements(w);this._notificationService.error(v)}_acquireLocks(v){for(const C of v.editStacks)if(C.locked)throw new Error("Cannot acquire edit stack lock");for(const C of v.editStacks)C.locked=!0;return()=>{for(const C of v.editStacks)C.locked=!1}}_safeInvokeWithLocks(v,C,w,S,D){const I=this._acquireLocks(w);let T;try{T=C()}catch(M){return I(),S.dispose(),this._onError(M,v)}return T?T.then(()=>(I(),S.dispose(),D()),M=>(I(),S.dispose(),this._onError(M,v))):(I(),S.dispose(),D())}async _invokeWorkspacePrepare(v){if(typeof v.actual.prepareUndoRedo>"u")return k.Disposable.None;const C=v.actual.prepareUndoRedo();return typeof C>"u"?k.Disposable.None:C}_invokeResourcePrepare(v,C){if(v.actual.type!==1||typeof v.actual.prepareUndoRedo>"u")return C(k.Disposable.None);const w=v.actual.prepareUndoRedo();return w?(0,k.isDisposable)(w)?C(w):w.then(S=>C(S)):C(k.Disposable.None)}_getAffectedEditStacks(v){const C=[];for(const w of v.strResources)C.push(this._editStacks.get(w)||r);return new a(C)}_tryToSplitAndUndo(v,C,w,S){if(C.canSplit())return this._splitPastWorkspaceElement(C,w),this._notificationService.warn(S),new m(this._undo(v,0,!0));for(const D of C.strResources)this.removeElements(D);return this._notificationService.warn(S),new m}_checkWorkspaceUndo(v,C,w,S){if(C.removedResources)return this._tryToSplitAndUndo(v,C,C.removedResources,y.localize(1044,"Could not undo '{0}' across all files. {1}",C.label,C.removedResources.createMessage()));if(S&&C.invalidatedResources)return this._tryToSplitAndUndo(v,C,C.invalidatedResources,y.localize(1045,"Could not undo '{0}' across all files. {1}",C.label,C.invalidatedResources.createMessage()));const D=[];for(const T of w.editStacks)T.getClosestPastElement()!==C&&D.push(T.resourceLabel);if(D.length>0)return this._tryToSplitAndUndo(v,C,null,y.localize(1046,"Could not undo '{0}' across all files because changes were made to {1}",C.label,D.join(", ")));const I=[];for(const T of w.editStacks)T.locked&&I.push(T.resourceLabel);return I.length>0?this._tryToSplitAndUndo(v,C,null,y.localize(1047,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",C.label,I.join(", "))):w.isValid()?null:this._tryToSplitAndUndo(v,C,null,y.localize(1048,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",C.label))}_workspaceUndo(v,C,w){const S=this._getAffectedEditStacks(C),D=this._checkWorkspaceUndo(v,C,S,!1);return D?D.returnValue:this._confirmAndExecuteWorkspaceUndo(v,C,S,w)}_isPartOfUndoGroup(v){if(!v.groupId)return!1;for(const[,C]of this._editStacks){const w=C.getClosestPastElement();if(w){if(w===v){const S=C.getSecondClosestPastElement();if(S&&S.groupId===v.groupId)return!0}if(w.groupId===v.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(v,C,w,S){if(C.canSplit()&&!this._isPartOfUndoGroup(C)){let T;(function(R){R[R.All=0]="All",R[R.This=1]="This",R[R.Cancel=2]="Cancel"})(T||(T={}));const{result:M}=await this._dialogService.prompt({type:L.default.Info,message:y.localize(1049,"Would you like to undo '{0}' across all files?",C.label),buttons:[{label:y.localize(1050,"&&Undo in {0} Files",w.editStacks.length),run:()=>T.All},{label:y.localize(1051,"Undo this &&File"),run:()=>T.This}],cancelButton:{run:()=>T.Cancel}});if(M===T.Cancel)return;if(M===T.This)return this._splitPastWorkspaceElement(C,null),this._undo(v,0,!0);const A=this._checkWorkspaceUndo(v,C,w,!1);if(A)return A.returnValue;S=!0}let D;try{D=await this._invokeWorkspacePrepare(C)}catch(T){return this._onError(T,C)}const I=this._checkWorkspaceUndo(v,C,w,!0);if(I)return D.dispose(),I.returnValue;for(const T of w.editStacks)T.moveBackward(C);return this._safeInvokeWithLocks(C,()=>C.actual.undo(),w,D,()=>this._continueUndoInGroup(C.groupId,S))}_resourceUndo(v,C,w){if(!C.isValid){v.flushAllElements();return}if(v.locked){const S=y.localize(1052,"Could not undo '{0}' because there is already an undo or redo operation running.",C.label);this._notificationService.warn(S);return}return this._invokeResourcePrepare(C,S=>(v.moveBackward(C),this._safeInvokeWithLocks(C,()=>C.actual.undo(),new a([v]),S,()=>this._continueUndoInGroup(C.groupId,w))))}_findClosestUndoElementInGroup(v){if(!v)return[null,null];let C=null,w=null;for(const[S,D]of this._editStacks){const I=D.getClosestPastElement();I&&I.groupId===v&&(!C||I.groupOrder>C.groupOrder)&&(C=I,w=S)}return[C,w]}_continueUndoInGroup(v,C){if(!v)return;const[,w]=this._findClosestUndoElementInGroup(v);if(w)return this._undo(w,0,C)}undo(v){if(v instanceof p.UndoRedoSource){const[,C]=this._findClosestUndoElementWithSource(v.id);return C?this._undo(C,v.id,!1):void 0}return typeof v=="string"?this._undo(v,0,!1):this._undo(this.getUriComparisonKey(v),0,!1)}_undo(v,C=0,w){if(!this._editStacks.has(v))return;const S=this._editStacks.get(v),D=S.getClosestPastElement();if(!D)return;if(D.groupId){const[T,M]=this._findClosestUndoElementInGroup(D.groupId);if(D!==T&&M)return this._undo(M,C,w)}if((D.sourceId!==C||D.confirmBeforeUndo)&&!w)return this._confirmAndContinueUndo(v,C,D);try{return D.type===1?this._workspaceUndo(v,D,w):this._resourceUndo(S,D,w)}finally{n&&this._print("undo")}}async _confirmAndContinueUndo(v,C,w){if((await this._dialogService.confirm({message:y.localize(1053,"Would you like to undo '{0}'?",w.label),primaryButton:y.localize(1054,"&&Yes"),cancelButton:y.localize(1055,"No")})).confirmed)return this._undo(v,C,!0)}_findClosestRedoElementWithSource(v){if(!v)return[null,null];let C=null,w=null;for(const[S,D]of this._editStacks){const I=D.getClosestFutureElement();I&&I.sourceId===v&&(!C||I.sourceOrder<C.sourceOrder)&&(C=I,w=S)}return[C,w]}canRedo(v){if(v instanceof p.UndoRedoSource){const[,w]=this._findClosestRedoElementWithSource(v.id);return!!w}const C=this.getUriComparisonKey(v);return this._editStacks.has(C)?this._editStacks.get(C).hasFutureElements():!1}_tryToSplitAndRedo(v,C,w,S){if(C.canSplit())return this._splitFutureWorkspaceElement(C,w),this._notificationService.warn(S),new m(this._redo(v));for(const D of C.strResources)this.removeElements(D);return this._notificationService.warn(S),new m}_checkWorkspaceRedo(v,C,w,S){if(C.removedResources)return this._tryToSplitAndRedo(v,C,C.removedResources,y.localize(1056,"Could not redo '{0}' across all files. {1}",C.label,C.removedResources.createMessage()));if(S&&C.invalidatedResources)return this._tryToSplitAndRedo(v,C,C.invalidatedResources,y.localize(1057,"Could not redo '{0}' across all files. {1}",C.label,C.invalidatedResources.createMessage()));const D=[];for(const T of w.editStacks)T.getClosestFutureElement()!==C&&D.push(T.resourceLabel);if(D.length>0)return this._tryToSplitAndRedo(v,C,null,y.localize(1058,"Could not redo '{0}' across all files because changes were made to {1}",C.label,D.join(", ")));const I=[];for(const T of w.editStacks)T.locked&&I.push(T.resourceLabel);return I.length>0?this._tryToSplitAndRedo(v,C,null,y.localize(1059,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",C.label,I.join(", "))):w.isValid()?null:this._tryToSplitAndRedo(v,C,null,y.localize(1060,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",C.label))}_workspaceRedo(v,C){const w=this._getAffectedEditStacks(C),S=this._checkWorkspaceRedo(v,C,w,!1);return S?S.returnValue:this._executeWorkspaceRedo(v,C,w)}async _executeWorkspaceRedo(v,C,w){let S;try{S=await this._invokeWorkspacePrepare(C)}catch(I){return this._onError(I,C)}const D=this._checkWorkspaceRedo(v,C,w,!0);if(D)return S.dispose(),D.returnValue;for(const I of w.editStacks)I.moveForward(C);return this._safeInvokeWithLocks(C,()=>C.actual.redo(),w,S,()=>this._continueRedoInGroup(C.groupId))}_resourceRedo(v,C){if(!C.isValid){v.flushAllElements();return}if(v.locked){const w=y.localize(1061,"Could not redo '{0}' because there is already an undo or redo operation running.",C.label);this._notificationService.warn(w);return}return this._invokeResourcePrepare(C,w=>(v.moveForward(C),this._safeInvokeWithLocks(C,()=>C.actual.redo(),new a([v]),w,()=>this._continueRedoInGroup(C.groupId))))}_findClosestRedoElementInGroup(v){if(!v)return[null,null];let C=null,w=null;for(const[S,D]of this._editStacks){const I=D.getClosestFutureElement();I&&I.groupId===v&&(!C||I.groupOrder<C.groupOrder)&&(C=I,w=S)}return[C,w]}_continueRedoInGroup(v){if(!v)return;const[,C]=this._findClosestRedoElementInGroup(v);if(C)return this._redo(C)}redo(v){if(v instanceof p.UndoRedoSource){const[,C]=this._findClosestRedoElementWithSource(v.id);return C?this._redo(C):void 0}return typeof v=="string"?this._redo(v):this._redo(this.getUriComparisonKey(v))}_redo(v){if(!this._editStacks.has(v))return;const C=this._editStacks.get(v),w=C.getClosestFutureElement();if(w){if(w.groupId){const[S,D]=this._findClosestRedoElementInGroup(w.groupId);if(w!==S&&D)return this._redo(D)}try{return w.type===1?this._workspaceRedo(v,w):this._resourceRedo(C,w)}finally{n&&this._print("redo")}}}};e.UndoRedoService=d,e.UndoRedoService=d=De([he(0,f.IDialogService),he(1,b.INotificationService)],d);class m{constructor(v){this.returnValue=v}}(0,_.registerSingleton)(p.IUndoRedoService,d,1)}),define(oe[186],re([1,0,3,99,227,22,7]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STANDALONE_EDITOR_WORKSPACE_ID=e.WORKSPACE_FILTER=e.WORKSPACE_EXTENSION=e.WorkspaceFolder=e.Workspace=e.UNKNOWN_EMPTY_WINDOW_WORKSPACE=e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE=e.IWorkspaceContextService=void 0,e.isSingleFolderWorkspaceIdentifier=f,e.isEmptyWorkspaceIdentifier=_,e.toWorkspaceIdentifier=b,e.isWorkspaceIdentifier=p,e.isStandaloneEditorWorkspace=t,e.IWorkspaceContextService=(0,y.createDecorator)("contextService");function f(i){const o=i;return typeof o?.id=="string"&&L.URI.isUri(o.uri)}function _(i){return typeof i?.id=="string"&&!f(i)&&!p(i)}e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE={id:"ext-dev"},e.UNKNOWN_EMPTY_WINDOW_WORKSPACE={id:"empty-window"};function b(i,o){if(typeof i=="string"||typeof i>"u")return typeof i=="string"?{id:(0,k.basename)(i)}:o?e.EXTENSION_DEVELOPMENT_EMPTY_WINDOW_WORKSPACE:e.UNKNOWN_EMPTY_WINDOW_WORKSPACE;const g=i;return g.configuration?{id:g.id,configPath:g.configuration}:g.folders.length===1?{id:g.id,uri:g.folders[0].uri}:{id:g.id}}function p(i){const o=i;return typeof o?.id=="string"&&L.URI.isUri(o.configPath)}class n{constructor(o,g,u,l,a){this._id=o,this._transient=u,this._configuration=l,this._ignorePathCasing=a,this._foldersMap=E.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0),this.folders=g}get folders(){return this._folders}set folders(o){this._folders=o,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(o){this._configuration=o}getFolder(o){return o&&this._foldersMap.findSubstr(o)||null}updateFoldersMap(){this._foldersMap=E.TernarySearchTree.forUris(this._ignorePathCasing,()=>!0);for(const o of this.folders)this._foldersMap.set(o.uri,o)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}}e.Workspace=n;class s{constructor(o,g){this.raw=g,this.uri=o.uri,this.index=o.index,this.name=o.name}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}e.WorkspaceFolder=s,e.WORKSPACE_EXTENSION="code-workspace",e.WORKSPACE_FILTER=[{name:(0,c.localize)(1041,"Code Workspace"),extensions:[e.WORKSPACE_EXTENSION]}],e.STANDALONE_EDITOR_WORKSPACE_ID="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function t(i){return i.id===e.STANDALONE_EDITOR_WORKSPACE_ID}}),define(oe[429],re([1,0,5,150,41,2,16,15,20,3,29,12,58,31,27,186]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";var g;Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenuController=void 0;let u=class{static{g=this}static{this.ID="editor.contrib.contextmenu"}static get(r){return r.getContribution(g.ID)}constructor(r,d,m,h,v,C,w,S){this._contextMenuService=d,this._contextViewService=m,this._contextKeyService=h,this._keybindingService=v,this._menuService=C,this._configurationService=w,this._workspaceContextService=S,this._toDispose=new L.DisposableStore,this._contextMenuIsBeingShownCount=0,this._editor=r,this._toDispose.add(this._editor.onContextMenu(D=>this._onContextMenu(D))),this._toDispose.add(this._editor.onMouseWheel(D=>{if(this._contextMenuIsBeingShownCount>0){const I=this._contextViewService.getContextViewElement(),T=D.srcElement;T.shadowRoot&&c.getShadowRoot(I)===T.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(D=>{this._editor.getOption(24)&&D.keyCode===58&&(D.preventDefault(),D.stopPropagation(),this.showContextMenu())}))}_onContextMenu(r){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),r.target.position&&!this._editor.getSelection().containsPosition(r.target.position)&&this._editor.setPosition(r.target.position);return}if(r.target.type===12||r.target.type===6&&r.target.detail.injectedText)return;if(r.event.preventDefault(),r.event.stopPropagation(),r.target.type===11)return this._showScrollbarContextMenu(r.event);if(r.target.type!==6&&r.target.type!==7&&r.target.type!==1)return;if(this._editor.focus(),r.target.position){let m=!1;for(const h of this._editor.getSelections())if(h.containsPosition(r.target.position)){m=!0;break}m||this._editor.setPosition(r.target.position)}let d=null;r.target.type!==1&&(d=r.event),this.showContextMenu(d)}showContextMenu(r){if(!this._editor.getOption(24)||!this._editor.hasModel())return;const d=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);d.length>0&&this._doShowContextMenu(d,r)}_getMenuActions(r,d){const m=[],h=this._menuService.getMenuActions(d,this._contextKeyService,{arg:r.uri});for(const v of h){const[,C]=v;let w=0;for(const S of C)if(S instanceof p.SubmenuItemAction){const D=this._getMenuActions(r,S.item.submenu);D.length>0&&(m.push(new E.SubmenuAction(S.id,S.label,D)),w++)}else m.push(S),w++;w&&m.push(new E.Separator)}return m.length&&m.pop(),m}_doShowContextMenu(r,d=null){if(!this._editor.hasModel())return;const m=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let h=d;if(!h){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const C=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),w=c.getDomNodePagePosition(this._editor.getDomNode()),S=w.left+C.left,D=w.top+C.top+C.height;h={x:S,y:D}}const v=this._editor.getOption(128)&&!y.isIOS;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:v?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>h,getActions:()=>r,getActionViewItem:C=>{const w=this._keybindingFor(C);if(w)return new k.ActionViewItem(C,C,{label:!0,keybinding:w.getLabel(),isMenu:!0});const S=C;return typeof S.getActionViewItem=="function"?S.getActionViewItem():new k.ActionViewItem(C,C,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:C=>this._keybindingFor(C),onHide:C=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:m})}})}_showScrollbarContextMenu(r){if(!this._editor.hasModel()||(0,o.isStandaloneEditorWorkspace)(this._workspaceContextService.getWorkspace()))return;const d=this._editor.getOption(73);let m=0;const h=D=>({id:`menu-action-${++m}`,label:D.label,tooltip:"",class:void 0,enabled:typeof D.enabled>"u"?!0:D.enabled,checked:D.checked,run:D.run}),v=(D,I)=>new E.SubmenuAction(`menu-action-${++m}`,D,I,void 0),C=(D,I,T,M,A)=>{if(!I)return h({label:D,enabled:I,run:()=>{}});const R=O=>()=>{this._configurationService.updateValue(T,O)},N=[];for(const O of A)N.push(h({label:O.label,checked:M===O.value,run:R(O.value)}));return v(D,N)},w=[];w.push(h({label:b.localize(875,"Minimap"),checked:d.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!d.enabled)}})),w.push(new E.Separator),w.push(h({label:b.localize(876,"Render Characters"),enabled:d.enabled,checked:d.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!d.renderCharacters)}})),w.push(C(b.localize(877,"Vertical size"),d.enabled,"editor.minimap.size",d.size,[{label:b.localize(878,"Proportional"),value:"proportional"},{label:b.localize(879,"Fill"),value:"fill"},{label:b.localize(880,"Fit"),value:"fit"}])),w.push(C(b.localize(881,"Slider"),d.enabled,"editor.minimap.showSlider",d.showSlider,[{label:b.localize(882,"Mouse Over"),value:"mouseover"},{label:b.localize(883,"Always"),value:"always"}]));const S=this._editor.getOption(128)&&!y.isIOS;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:S?this._editor.getDomNode():void 0,getAnchor:()=>r,getActions:()=>w,onHide:D=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(r){return this._keybindingService.lookupKeybinding(r.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};e.ContextMenuController=u,e.ContextMenuController=u=g=De([he(1,s.IContextMenuService),he(2,s.IContextViewService),he(3,n.IContextKeyService),he(4,t.IKeybindingService),he(5,p.IMenuService),he(6,i.IConfigurationService),he(7,o.IWorkspaceContextService)],u);class l extends f.EditorAction{constructor(){super({id:"editor.action.showContextMenu",label:b.localize(884,"Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.textInputFocus,primary:1092,weight:100}})}run(r,d){u.get(d)?.showContextMenu()}}(0,f.registerEditorContribution)(u.ID,u,2),(0,f.registerEditorAction)(l)}),define(oe[291],re([1,0,13,195,90,2,128,47,51,22,28,17,3,186]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultPasteProvidersFeature=e.DefaultDropProvidersFeature=e.DefaultTextPasteOrDropEditProvider=void 0;class i{async provideDocumentPasteEdits(h,v,C,w,S){const D=await this.getEdit(C,S);if(D)return{edits:[{insertText:D.insertText,title:D.title,kind:D.kind,handledMimeType:D.handledMimeType,yieldTo:D.yieldTo}],dispose(){}}}async provideDocumentDropEdits(h,v,C,w){const S=await this.getEdit(C,w);if(S)return{edits:[{insertText:S.insertText,title:S.title,kind:S.kind,handledMimeType:S.handledMimeType,yieldTo:S.yieldTo}],dispose(){}}}}class o extends i{constructor(){super(...arguments),this.kind=o.kind,this.dropMimeTypes=[y.Mimes.text],this.pasteMimeTypes=[y.Mimes.text]}static{this.id="text"}static{this.kind=new E.HierarchicalKind("text.plain")}async getEdit(h,v){const C=h.get(y.Mimes.text);if(!C||h.has(y.Mimes.uriList))return;const w=await C.asString();return{handledMimeType:y.Mimes.text,title:(0,s.localize)(855,"Insert Plain Text"),insertText:w,kind:this.kind}}}e.DefaultTextPasteOrDropEditProvider=o;class g extends i{constructor(){super(...arguments),this.kind=new E.HierarchicalKind("uri.absolute"),this.dropMimeTypes=[y.Mimes.uriList],this.pasteMimeTypes=[y.Mimes.uriList]}async getEdit(h,v){const C=await a(h);if(!C.length||v.isCancellationRequested)return;let w=0;const S=C.map(({uri:I,originalText:T})=>I.scheme===f.Schemas.file?I.fsPath:(w++,T)).join(" ");let D;return w>0?D=C.length>1?(0,s.localize)(856,"Insert Uris"):(0,s.localize)(857,"Insert Uri"):D=C.length>1?(0,s.localize)(858,"Insert Paths"):(0,s.localize)(859,"Insert Path"),{handledMimeType:y.Mimes.uriList,insertText:S,title:D,kind:this.kind}}}let u=class extends i{constructor(h){super(),this._workspaceContextService=h,this.kind=new E.HierarchicalKind("uri.relative"),this.dropMimeTypes=[y.Mimes.uriList],this.pasteMimeTypes=[y.Mimes.uriList]}async getEdit(h,v){const C=await a(h);if(!C.length||v.isCancellationRequested)return;const w=(0,c.coalesce)(C.map(({uri:S})=>{const D=this._workspaceContextService.getWorkspaceFolder(S);return D?(0,_.relativePath)(D.uri,S):void 0}));if(w.length)return{handledMimeType:y.Mimes.uriList,insertText:w.join(" "),title:C.length>1?(0,s.localize)(860,"Insert Relative Paths"):(0,s.localize)(861,"Insert Relative Path"),kind:this.kind}}};u=De([he(0,t.IWorkspaceContextService)],u);class l{constructor(){this.kind=new E.HierarchicalKind("html"),this.pasteMimeTypes=["text/html"],this._yieldTo=[{mimeType:y.Mimes.text}]}async provideDocumentPasteEdits(h,v,C,w,S){if(w.triggerKind!==p.DocumentPasteTriggerKind.PasteAs&&!w.only?.contains(this.kind))return;const I=await C.get("text/html")?.asString();if(!(!I||S.isCancellationRequested))return{dispose(){},edits:[{insertText:I,yieldTo:this._yieldTo,title:(0,s.localize)(862,"Insert HTML"),kind:this.kind}]}}}async function a(m){const h=m.get(y.Mimes.uriList);if(!h)return[];const v=await h.asString(),C=[];for(const w of k.UriList.parse(v))try{C.push({uri:b.URI.parse(w),originalText:w})}catch{}return C}let r=class extends L.Disposable{constructor(h,v){super(),this._register(h.documentDropEditProvider.register("*",new o)),this._register(h.documentDropEditProvider.register("*",new g)),this._register(h.documentDropEditProvider.register("*",new u(v)))}};e.DefaultDropProvidersFeature=r,e.DefaultDropProvidersFeature=r=De([he(0,n.ILanguageFeaturesService),he(1,t.IWorkspaceContextService)],r);let d=class extends L.Disposable{constructor(h,v){super(),this._register(h.documentPasteEditProvider.register("*",new o)),this._register(h.documentPasteEditProvider.register("*",new g)),this._register(h.documentPasteEditProvider.register("*",new u(v))),this._register(h.documentPasteEditProvider.register("*",new l))}};e.DefaultPasteProvidersFeature=d,e.DefaultPasteProvidersFeature=d=De([he(0,n.ILanguageFeaturesService),he(1,t.IWorkspaceContextService)],d)}),define(oe[430],re([1,0,5,13,14,18,195,90,2,128,16,194,210,394,151,4,28,17,291,266,122,288,184,3,117,12,7,96,63,390,8]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T){"use strict";var M;Object.defineProperty(e,"__esModule",{value:!0}),e.CopyPasteController=e.pasteWidgetVisibleCtx=e.changePasteTypeCommandId=void 0,e.changePasteTypeCommandId="editor.changePasteType",e.pasteWidgetVisibleCtx=new C.RawContextKey("pasteWidgetVisible",!1,(0,h.localize)(863,"Whether the paste widget is showing"));const A="application/vnd.code.copyMetadata";let R=class extends _.Disposable{static{M=this}static{this.ID="editor.contrib.copyPasteActionController"}static get(O){return O.getContribution(M.ID)}constructor(O,x,F,W,z,q,H){super(),this._bulkEditService=F,this._clipboardService=W,this._languageFeaturesService=z,this._quickInputService=q,this._progressService=H,this._editor=O;const K=O.getContainerDomNode();this._register((0,c.addDisposableListener)(K,"copy",U=>this.handleCopy(U))),this._register((0,c.addDisposableListener)(K,"cut",U=>this.handleCopy(U))),this._register((0,c.addDisposableListener)(K,"paste",U=>this.handlePaste(U),!0)),this._pasteProgressManager=this._register(new d.InlineProgressManager("pasteIntoEditor",O,x)),this._postPasteWidgetManager=this._register(x.createInstance(I.PostEditWidgetManager,"pasteIntoEditor",O,e.pasteWidgetVisibleCtx,{id:e.changePasteTypeCommandId,label:(0,h.localize)(864,"Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(O){this._editor.focus();try{this._pasteAsActionContext={preferred:O},(0,c.getActiveDocument)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}clearWidgets(){this._postPasteWidgetManager.clear()}isPasteAsEnabled(){return this._editor.getOption(85).enabled&&!this._editor.getOption(92)}async finishedPaste(){await this._currentPasteOperation}handleCopy(O){if(!this._editor.hasTextFocus()||(p.isWeb&&this._clipboardService.writeResources([]),!O.clipboardData||!this.isPasteAsEnabled()))return;const x=this._editor.getModel(),F=this._editor.getSelections();if(!x||!F?.length)return;const W=this._editor.getOption(37);let z=F;const q=F.length===1&&F[0].isEmpty();if(q){if(!W)return;z=[new o.Range(z[0].startLineNumber,1,z[0].startLineNumber,1+x.getLineLength(z[0].startLineNumber))]}const H=this._editor._getViewModel()?.getPlainTextToCopy(F,W,p.isWindows),U={multicursorText:Array.isArray(H)?H:null,pasteOnNewLine:q,mode:null},Y=this._languageFeaturesService.documentPasteEditProvider.ordered(x).filter(te=>!!te.prepareDocumentPaste);if(!Y.length){this.setCopyMetadata(O.clipboardData,{defaultPastePayload:U});return}const Q=(0,t.toVSDataTransfer)(O.clipboardData),X=Y.flatMap(te=>te.copyMimeTypes??[]),G=(0,n.generateUuid)();this.setCopyMetadata(O.clipboardData,{id:G,providerCopyMimeTypes:X,defaultPastePayload:U});const P=(0,E.createCancelablePromise)(async te=>{const se=(0,k.coalesce)(await Promise.all(Y.map(async ue=>{try{return await ue.prepareDocumentPaste(x,z,Q,te)}catch(ge){console.error(ge);return}})));se.reverse();for(const ue of se)for(const[ge,pe]of ue)Q.replace(ge,pe);return Q});M._currentCopyOperation?.dataTransferPromise.cancel(),M._currentCopyOperation={handle:G,dataTransferPromise:P}}async handlePaste(O){if(!O.clipboardData||!this._editor.hasTextFocus())return;m.MessageController.get(this._editor)?.closeMessage(),this._currentPasteOperation?.cancel(),this._currentPasteOperation=void 0;const x=this._editor.getModel(),F=this._editor.getSelections();if(!F?.length||!x||!this.isPasteAsEnabled()&&!this._pasteAsActionContext)return;const W=this.fetchCopyMetadata(O),z=(0,t.toExternalVSDataTransfer)(O.clipboardData);z.delete(A);const q=[...O.clipboardData.types,...W?.providerCopyMimeTypes??[],b.Mimes.uriList],H=this._languageFeaturesService.documentPasteEditProvider.ordered(x).filter(K=>{const U=this._pasteAsActionContext?.preferred;return U&&K.providedPasteEditKinds&&!this.providerMatchesPreference(K,U)?!1:K.pasteMimeTypes?.some(Y=>(0,y.matchesMimeType)(Y,q))});if(!H.length){this._pasteAsActionContext?.preferred&&this.showPasteAsNoEditMessage(F,this._pasteAsActionContext.preferred);return}O.preventDefault(),O.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferred,H,F,z,W):this.doPasteInline(H,F,z,W,O)}showPasteAsNoEditMessage(O,x){m.MessageController.get(this._editor)?.showMessage((0,h.localize)(865,"No paste edits for '{0}' found",x instanceof f.HierarchicalKind?x.value:x.providerId),O[0].getStartPosition())}doPasteInline(O,x,F,W,z){const q=this._editor;if(!q.hasModel())return;const H=new r.EditorStateCancellationTokenSource(q,3,void 0),K=(0,E.createCancelablePromise)(async U=>{const Y=this._editor;if(!Y.hasModel())return;const Q=Y.getModel(),X=new _.DisposableStore,G=X.add(new L.CancellationTokenSource(U));X.add(H.token.onCancellationRequested(()=>G.cancel()));const P=G.token;try{if(await this.mergeInDataFromCopy(F,W,P),P.isCancellationRequested)return;const te=O.filter(ge=>this.isSupportedPasteProvider(ge,F));if(!te.length||te.length===1&&te[0]instanceof l.DefaultTextPasteOrDropEditProvider)return this.applyDefaultPasteHandler(F,W,P,z);const se={triggerKind:g.DocumentPasteTriggerKind.Automatic},ue=await this.getPasteEdits(te,F,Q,x,se,P);if(X.add(ue),P.isCancellationRequested)return;if(ue.edits.length===1&&ue.edits[0].provider instanceof l.DefaultTextPasteOrDropEditProvider)return this.applyDefaultPasteHandler(F,W,P,z);if(ue.edits.length){const ge=Y.getOption(85).showPasteSelector==="afterPaste";return this._postPasteWidgetManager.applyEditAndShowIfNeeded(x,{activeEditIndex:0,allEdits:ue.edits},ge,(pe,ce)=>new Promise((ie,ne)=>{(async()=>{try{const J=pe.provider.resolveDocumentPasteEdit?.(pe,ce),B=new E.DeferredPromise,j=J&&await this._pasteProgressManager.showWhile(x[0].getEndPosition(),(0,h.localize)(866,"Resolving paste edit. Click to cancel"),Promise.race([B.p,J]),{cancel:()=>(B.cancel(),ne(new T.CancellationError))},0);return j&&(pe.additionalEdit=j.additionalEdit),ie(pe)}catch(J){return ne(J)}})()}),P)}await this.applyDefaultPasteHandler(F,W,P,z)}finally{X.dispose(),this._currentPasteOperation===K&&(this._currentPasteOperation=void 0)}});this._pasteProgressManager.showWhile(x[0].getEndPosition(),(0,h.localize)(867,"Running paste handlers. Click to cancel and do basic paste"),K,{cancel:async()=>{try{if(K.cancel(),H.token.isCancellationRequested)return;await this.applyDefaultPasteHandler(F,W,H.token,z)}finally{H.dispose()}}}).then(()=>{H.dispose()}),this._currentPasteOperation=K}showPasteAsPick(O,x,F,W,z){const q=(0,E.createCancelablePromise)(async H=>{const K=this._editor;if(!K.hasModel())return;const U=K.getModel(),Y=new _.DisposableStore,Q=Y.add(new r.EditorStateCancellationTokenSource(K,3,void 0,H));try{if(await this.mergeInDataFromCopy(W,z,Q.token),Q.token.isCancellationRequested)return;let X=x.filter(ue=>this.isSupportedPasteProvider(ue,W,O));O&&(X=X.filter(ue=>this.providerMatchesPreference(ue,O)));const G={triggerKind:g.DocumentPasteTriggerKind.PasteAs,only:O&&O instanceof f.HierarchicalKind?O:void 0};let P=Y.add(await this.getPasteEdits(X,W,U,F,G,Q.token));if(Q.token.isCancellationRequested)return;if(O&&(P={edits:P.edits.filter(ue=>O instanceof f.HierarchicalKind?O.contains(ue.kind):O.providerId===ue.provider.id),dispose:P.dispose}),!P.edits.length){G.only&&this.showPasteAsNoEditMessage(F,G.only);return}let te;if(O?te=P.edits.at(0):te=(await this._quickInputService.pick(P.edits.map(ge=>({label:ge.title,description:ge.kind?.value,edit:ge})),{placeHolder:(0,h.localize)(868,"Select Paste Action")}))?.edit,!te)return;const se=(0,a.createCombinedWorkspaceEdit)(U.uri,F,te);await this._bulkEditService.apply(se,{editor:this._editor})}finally{Y.dispose(),this._currentPasteOperation===q&&(this._currentPasteOperation=void 0)}});this._progressService.withProgress({location:10,title:(0,h.localize)(869,"Running paste handlers")},()=>q)}setCopyMetadata(O,x){O.setData(A,JSON.stringify(x))}fetchCopyMetadata(O){if(!O.clipboardData)return;const x=O.clipboardData.getData(A);if(x)try{return JSON.parse(x)}catch{return}const[F,W]=s.ClipboardEventUtils.getTextData(O.clipboardData);if(W)return{defaultPastePayload:{mode:W.mode,multicursorText:W.multicursorText??null,pasteOnNewLine:!!W.isFromEmptySelection}}}async mergeInDataFromCopy(O,x,F){if(x?.id&&M._currentCopyOperation?.handle===x.id){const W=await M._currentCopyOperation.dataTransferPromise;if(F.isCancellationRequested)return;for(const[z,q]of W)O.replace(z,q)}if(!O.has(b.Mimes.uriList)){const W=await this._clipboardService.readResources();if(F.isCancellationRequested)return;W.length&&O.append(b.Mimes.uriList,(0,y.createStringDataTransferItem)(y.UriList.create(W)))}}async getPasteEdits(O,x,F,W,z,q){const H=new _.DisposableStore,K=await(0,E.raceCancellation)(Promise.all(O.map(async Y=>{try{const Q=await Y.provideDocumentPasteEdits?.(F,W,x,z,q);return Q&&H.add(Q),Q?.edits?.map(X=>({...X,provider:Y}))}catch(Q){(0,T.isCancellationError)(Q)||console.error(Q);return}})),q),U=(0,k.coalesce)(K??[]).flat().filter(Y=>!z.only||z.only.contains(Y.kind));return{edits:(0,a.sortEditsByYieldTo)(U),dispose:()=>H.dispose()}}async applyDefaultPasteHandler(O,x,F,W){const q=await(O.get(b.Mimes.text)??O.get("text"))?.asString()??"";if(F.isCancellationRequested)return;const H={clipboardEvent:W,text:q,pasteOnNewLine:x?.defaultPastePayload.pasteOnNewLine??!1,multicursorText:x?.defaultPastePayload.multicursorText??null,mode:null};this._editor.trigger("keyboard","paste",H)}isSupportedPasteProvider(O,x,F){return O.pasteMimeTypes?.some(W=>x.matches(W))?!F||this.providerMatchesPreference(O,F):!1}providerMatchesPreference(O,x){return x instanceof f.HierarchicalKind?O.providedPasteEditKinds?O.providedPasteEditKinds.some(F=>x.contains(F)):!0:O.id===x.providerId}};e.CopyPasteController=R,e.CopyPasteController=R=M=De([he(1,w.IInstantiationService),he(2,i.IBulkEditService),he(3,v.IClipboardService),he(4,u.ILanguageFeaturesService),he(5,D.IQuickInputService),he(6,S.IProgressService)],R)}),define(oe[847],re([1,0,64,5,16,210,15,35,20,430,3,29,117,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PasteAction=e.CopyAction=e.CutAction=void 0;const i="9_cutcopypaste",o=E.isNative||document.queryCommandSupported("cut"),g=E.isNative||document.queryCommandSupported("copy"),u=typeof navigator.clipboard>"u"||c.isFirefox?document.queryCommandSupported("paste"):!0;function l(d){return d.register(),d}e.CutAction=o?l(new y.MultiCommand({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:E.isNative?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:n.MenuId.MenubarEditMenu,group:"2_ccp",title:p.localize(954,"Cu&&t"),order:1},{menuId:n.MenuId.EditorContext,group:i,title:p.localize(955,"Cut"),when:_.EditorContextKeys.writable,order:1},{menuId:n.MenuId.CommandPalette,group:"",title:p.localize(956,"Cut"),order:1},{menuId:n.MenuId.SimpleEditorContext,group:i,title:p.localize(957,"Cut"),when:_.EditorContextKeys.writable,order:1}]})):void 0,e.CopyAction=g?l(new y.MultiCommand({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:E.isNative?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:n.MenuId.MenubarEditMenu,group:"2_ccp",title:p.localize(958,"&&Copy"),order:2},{menuId:n.MenuId.EditorContext,group:i,title:p.localize(959,"Copy"),order:2},{menuId:n.MenuId.CommandPalette,group:"",title:p.localize(960,"Copy"),order:1},{menuId:n.MenuId.SimpleEditorContext,group:i,title:p.localize(961,"Copy"),order:2}]})):void 0,n.MenuRegistry.appendMenuItem(n.MenuId.MenubarEditMenu,{submenu:n.MenuId.MenubarCopy,title:p.localize2(967,"Copy As"),group:"2_ccp",order:3}),n.MenuRegistry.appendMenuItem(n.MenuId.EditorContext,{submenu:n.MenuId.EditorContextCopy,title:p.localize2(968,"Copy As"),group:i,order:3}),n.MenuRegistry.appendMenuItem(n.MenuId.EditorContext,{submenu:n.MenuId.EditorContextShare,title:p.localize2(969,"Share"),group:"11_share",order:-1,when:t.ContextKeyExpr.and(t.ContextKeyExpr.notEquals("resourceScheme","output"),_.EditorContextKeys.editorTextFocus)}),n.MenuRegistry.appendMenuItem(n.MenuId.ExplorerContext,{submenu:n.MenuId.ExplorerContextShare,title:p.localize2(970,"Share"),group:"11_share",order:-1}),e.PasteAction=u?l(new y.MultiCommand({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:E.isNative?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:n.MenuId.MenubarEditMenu,group:"2_ccp",title:p.localize(962,"&&Paste"),order:4},{menuId:n.MenuId.EditorContext,group:i,title:p.localize(963,"Paste"),when:_.EditorContextKeys.writable,order:4},{menuId:n.MenuId.CommandPalette,group:"",title:p.localize(964,"Paste"),order:1},{menuId:n.MenuId.SimpleEditorContext,group:i,title:p.localize(965,"Paste"),when:_.EditorContextKeys.writable,order:4}]})):void 0;class a extends y.EditorAction{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:p.localize(966,"Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:_.EditorContextKeys.textInputFocus,primary:0,weight:100}})}run(m,h){!h.hasModel()||!h.getOption(37)&&h.getSelection().isEmpty()||(L.CopyOptions.forceCopyWithSyntaxHighlighting=!0,h.focus(),h.getContainerDomNode().ownerDocument.execCommand("copy"),L.CopyOptions.forceCopyWithSyntaxHighlighting=!1)}}function r(d,m){d&&(d.addImplementation(1e4,"code-editor",(h,v)=>{const C=h.get(f.ICodeEditorService).getFocusedCodeEditor();if(C&&C.hasTextFocus()){const w=C.getOption(37),S=C.getSelection();return S&&S.isEmpty()&&!w||C.getContainerDomNode().ownerDocument.execCommand(m),!0}return!1}),d.addImplementation(0,"generic-dom",(h,v)=>((0,k.getActiveDocument)().execCommand(m),!0)))}r(e.CutAction,"cut"),r(e.CopyAction,"copy"),e.PasteAction&&(e.PasteAction.addImplementation(1e4,"code-editor",(d,m)=>{const h=d.get(f.ICodeEditorService),v=d.get(s.IClipboardService),C=h.getFocusedCodeEditor();return C&&C.hasTextFocus()?C.getContainerDomNode().ownerDocument.execCommand("paste")?b.CopyPasteController.get(C)?.finishedPaste()??Promise.resolve():E.isWeb?(async()=>{const S=await v.readText();if(S!==""){const D=L.InMemoryClipboardMetadataManager.INSTANCE.get(S);let I=!1,T=null,M=null;D&&(I=C.getOption(37)&&!!D.isFromEmptySelection,T=typeof D.multicursorText<"u"?D.multicursorText:null,M=D.mode),C.trigger("keyboard","paste",{text:S,pasteOnNewLine:I,multicursorText:T,mode:M})}})():!0:!1}),e.PasteAction.addImplementation(0,"generic-dom",(d,m)=>((0,k.getActiveDocument)().execCommand("paste"),!0))),g&&(0,y.registerEditorAction)(a)}),define(oe[848],re([1,0,90,15,20,146,430,291,3]),function(ae,e,c,k,E,L,y,f,_){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,k.registerEditorContribution)(y.CopyPasteController.ID,y.CopyPasteController,0),(0,L.registerEditorFeature)(f.DefaultPasteProvidersFeature),(0,k.registerEditorCommand)(new class extends k.EditorCommand{constructor(){super({id:y.changePasteTypeCommandId,precondition:y.pasteWidgetVisibleCtx,kbOpts:{weight:100,primary:2137}})}runEditorCommand(b,p){return y.CopyPasteController.get(p)?.changePasteType()}}),(0,k.registerEditorCommand)(new class extends k.EditorCommand{constructor(){super({id:"editor.hidePasteWidget",precondition:y.pasteWidgetVisibleCtx,kbOpts:{weight:100,primary:9}})}runEditorCommand(b,p){y.CopyPasteController.get(p)?.clearWidgets()}}),(0,k.registerEditorAction)(class ai extends k.EditorAction{static{this.argsSchema={type:"object",properties:{kind:{type:"string",description:_.localize(870,"The kind of the paste edit to try applying. If not provided or there are multiple edits for this kind, the editor will show a picker.")}}}}constructor(){super({id:"editor.action.pasteAs",label:_.localize(871,"Paste As..."),alias:"Paste As...",precondition:E.EditorContextKeys.writable,metadata:{description:"Paste as",args:[{name:"args",schema:ai.argsSchema}]}})}run(p,n,s){let t=typeof s?.kind=="string"?s.kind:void 0;return!t&&s&&(t=typeof s.id=="string"?s.id:void 0),y.CopyPasteController.get(n)?.pasteAs(t?new c.HierarchicalKind(t):void 0)}}),(0,k.registerEditorAction)(class extends k.EditorAction{constructor(){super({id:"editor.action.pasteAsText",label:_.localize(872,"Paste as Text"),alias:"Paste as Text",precondition:E.EditorContextKeys.writable})}run(b,p){return y.CopyPasteController.get(p)?.pasteAs({providerId:f.DefaultTextPasteOrDropEditProvider.id})}})}),define(oe[849],re([1,0,15,272,146,291,3,108,38,823]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(b.DropIntoEditorController.ID,b.DropIntoEditorController,2),(0,E.registerEditorFeature)(L.DefaultDropProvidersFeature),(0,c.registerEditorCommand)(new class extends c.EditorCommand{constructor(){super({id:b.changeDropTypeCommandId,precondition:b.dropWidgetVisibleCtx,kbOpts:{weight:100,primary:2137}})}runEditorCommand(p,n,s){b.DropIntoEditorController.get(n)?.changeDropType()}}),(0,c.registerEditorCommand)(new class extends c.EditorCommand{constructor(){super({id:"editor.hideDropWidget",precondition:b.dropWidgetVisibleCtx,kbOpts:{weight:100,primary:9}})}runEditorCommand(p,n,s){b.DropIntoEditorController.get(n)?.clearWidgets()}}),_.Registry.as(f.Extensions.Configuration).registerConfiguration({...k.editorConfigurationBaseNode,properties:{[b.defaultProviderConfig]:{type:"object",scope:5,description:y.localize(854,"Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}})}),define(oe[850],re([1,0,451,99,51,11,194,34,134,3,186]),function(ae,e,c,k,E,L,y,f,_,b,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RandomBasedVariableResolver=e.WorkspaceBasedVariableResolver=e.TimeBasedVariableResolver=e.CommentBasedVariableResolver=e.ClipboardBasedVariableResolver=e.ModelBasedVariableResolver=e.SelectionBasedVariableResolver=e.CompositeSnippetVariableResolver=e.KnownSnippetVariableNames=void 0,e.KnownSnippetVariableNames=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0});class n{constructor(r){this._delegates=r}resolve(r){for(const d of this._delegates){const m=d.resolve(r);if(m!==void 0)return m}}}e.CompositeSnippetVariableResolver=n;class s{constructor(r,d,m,h){this._model=r,this._selection=d,this._selectionIdx=m,this._overtypingCapturer=h}resolve(r){const{name:d}=r;if(d==="SELECTION"||d==="TM_SELECTED_TEXT"){let m=this._model.getValueInRange(this._selection)||void 0,h=this._selection.startLineNumber!==this._selection.endLineNumber;if(!m&&this._overtypingCapturer){const v=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);v&&(m=v.value,h=v.multiline)}if(m&&h&&r.snippet){const v=this._model.getLineContent(this._selection.startLineNumber),C=(0,L.getLeadingWhitespace)(v,0,this._selection.startColumn-1);let w=C;r.snippet.walk(D=>D===r?!1:(D instanceof _.Text&&(w=(0,L.getLeadingWhitespace)((0,L.splitLines)(D.value).pop())),!0));const S=(0,L.commonPrefixLength)(w,C);m=m.replace(/(\r\n|\r|\n)(.*)/g,(D,I,T)=>`${I}${w.substr(S)}${T}`)}return m}else{if(d==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(d==="TM_CURRENT_WORD"){const m=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return m&&m.word||void 0}else{if(d==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(d==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(d==="CURSOR_INDEX")return String(this._selectionIdx);if(d==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}}e.SelectionBasedVariableResolver=s;class t{constructor(r,d){this._labelService=r,this._model=d}resolve(r){const{name:d}=r;if(d==="TM_FILENAME")return k.basename(this._model.uri.fsPath);if(d==="TM_FILENAME_BASE"){const m=k.basename(this._model.uri.fsPath),h=m.lastIndexOf(".");return h<=0?m:m.slice(0,h)}else{if(d==="TM_DIRECTORY")return k.dirname(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel((0,E.dirname)(this._model.uri));if(d==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(d==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}}e.ModelBasedVariableResolver=t;class i{constructor(r,d,m,h){this._readClipboardText=r,this._selectionIdx=d,this._selectionCount=m,this._spread=h}resolve(r){if(r.name!=="CLIPBOARD")return;const d=this._readClipboardText();if(d){if(this._spread){const m=d.split(/\r\n|\n|\r/).filter(h=>!(0,L.isFalsyOrWhitespace)(h));if(m.length===this._selectionCount)return m[this._selectionIdx]}return d}}}e.ClipboardBasedVariableResolver=i;let o=class{constructor(r,d,m){this._model=r,this._selection=d,this._languageConfigurationService=m}resolve(r){const{name:d}=r,m=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),h=this._languageConfigurationService.getLanguageConfiguration(m).comments;if(h){if(d==="LINE_COMMENT")return h.lineCommentToken||void 0;if(d==="BLOCK_COMMENT_START")return h.blockCommentStartToken||void 0;if(d==="BLOCK_COMMENT_END")return h.blockCommentEndToken||void 0}}};e.CommentBasedVariableResolver=o,e.CommentBasedVariableResolver=o=De([he(2,f.ILanguageConfigurationService)],o);class g{constructor(){this._date=new Date}static{this.dayNames=[b.localize(407,"Sunday"),b.localize(408,"Monday"),b.localize(409,"Tuesday"),b.localize(410,"Wednesday"),b.localize(411,"Thursday"),b.localize(412,"Friday"),b.localize(413,"Saturday")]}static{this.dayNamesShort=[b.localize(414,"Sun"),b.localize(415,"Mon"),b.localize(416,"Tue"),b.localize(417,"Wed"),b.localize(418,"Thu"),b.localize(419,"Fri"),b.localize(420,"Sat")]}static{this.monthNames=[b.localize(421,"January"),b.localize(422,"February"),b.localize(423,"March"),b.localize(424,"April"),b.localize(425,"May"),b.localize(426,"June"),b.localize(427,"July"),b.localize(428,"August"),b.localize(429,"September"),b.localize(430,"October"),b.localize(431,"November"),b.localize(432,"December")]}static{this.monthNamesShort=[b.localize(433,"Jan"),b.localize(434,"Feb"),b.localize(435,"Mar"),b.localize(436,"Apr"),b.localize(437,"May"),b.localize(438,"Jun"),b.localize(439,"Jul"),b.localize(440,"Aug"),b.localize(441,"Sep"),b.localize(442,"Oct"),b.localize(443,"Nov"),b.localize(444,"Dec")]}resolve(r){const{name:d}=r;if(d==="CURRENT_YEAR")return String(this._date.getFullYear());if(d==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(d==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(d==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(d==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(d==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(d==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(d==="CURRENT_DAY_NAME")return g.dayNames[this._date.getDay()];if(d==="CURRENT_DAY_NAME_SHORT")return g.dayNamesShort[this._date.getDay()];if(d==="CURRENT_MONTH_NAME")return g.monthNames[this._date.getMonth()];if(d==="CURRENT_MONTH_NAME_SHORT")return g.monthNamesShort[this._date.getMonth()];if(d==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(d==="CURRENT_TIMEZONE_OFFSET"){const m=this._date.getTimezoneOffset(),h=m>0?"-":"+",v=Math.trunc(Math.abs(m/60)),C=v<10?"0"+v:v,w=Math.abs(m)-v*60,S=w<10?"0"+w:w;return h+C+":"+S}}}e.TimeBasedVariableResolver=g;class u{constructor(r){this._workspaceService=r}resolve(r){if(!this._workspaceService)return;const d=(0,p.toWorkspaceIdentifier)(this._workspaceService.getWorkspace());if(!(0,p.isEmptyWorkspaceIdentifier)(d)){if(r.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(d);if(r.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(d)}}_resolveWorkspaceName(r){if((0,p.isSingleFolderWorkspaceIdentifier)(r))return k.basename(r.uri.path);let d=k.basename(r.configPath.path);return d.endsWith(p.WORKSPACE_EXTENSION)&&(d=d.substr(0,d.length-p.WORKSPACE_EXTENSION.length-1)),d}_resoveWorkspacePath(r){if((0,p.isSingleFolderWorkspaceIdentifier)(r))return(0,c.normalizeDriveLetter)(r.uri.fsPath);const d=k.basename(r.configPath.path);let m=r.configPath.fsPath;return m.endsWith(d)&&(m=m.substr(0,m.length-d.length-1)),m?(0,c.normalizeDriveLetter)(m):"/"}}e.WorkspaceBasedVariableResolver=u;class l{resolve(r){const{name:d}=r;if(d==="RANDOM")return Math.random().toString().slice(-6);if(d==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(d==="UUID")return(0,y.generateUuid)()}}e.RandomBasedVariableResolver=l}),define(oe[431],re([1,0,13,2,11,76,4,23,34,36,181,186,134,850,539]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetSession=e.OneSnippet=void 0;class o{static{this._decor={active:b.ModelDecorationOptions.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:b.ModelDecorationOptions.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:b.ModelDecorationOptions.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:b.ModelDecorationOptions.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})}}constructor(a,r,d){this._editor=a,this._snippet=r,this._snippetLineLeadingWhitespace=d,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,c.groupBy)(r.placeholders,s.Placeholder.compareByIndex),this._placeholderGroupsIdx=-1}initialize(a){this._offset=a.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;const a=this._editor.getModel();this._editor.changeDecorations(r=>{for(const d of this._snippet.placeholders){const m=this._snippet.offset(d),h=this._snippet.fullLen(d),v=y.Range.fromPositions(a.getPositionAt(this._offset+m),a.getPositionAt(this._offset+m+h)),C=d.isFinalTabstop?o._decor.inactiveFinal:o._decor.inactive,w=r.addDecoration(v,C);this._placeholderDecorations.set(d,w)}})}move(a){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){const m=[];for(const h of this._placeholderGroups[this._placeholderGroupsIdx])if(h.transform){const v=this._placeholderDecorations.get(h),C=this._editor.getModel().getDecorationRange(v),w=this._editor.getModel().getValueInRange(C),S=h.transform.resolve(w).split(/\r\n|\r|\n/);for(let D=1;D<S.length;D++)S[D]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+S[D]);m.push(L.EditOperation.replace(C,S.join(this._editor.getModel().getEOL())))}m.length>0&&this._editor.executeEdits("snippet.placeholderTransform",m)}let r=!1;a===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,r=!0):a===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,r=!0);const d=this._editor.getModel().changeDecorations(m=>{const h=new Set,v=[];for(const C of this._placeholderGroups[this._placeholderGroupsIdx]){const w=this._placeholderDecorations.get(C),S=this._editor.getModel().getDecorationRange(w);v.push(new f.Selection(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn)),r=r&&this._hasPlaceholderBeenCollapsed(C),m.changeDecorationOptions(w,C.isFinalTabstop?o._decor.activeFinal:o._decor.active),h.add(C);for(const D of this._snippet.enclosingPlaceholders(C)){const I=this._placeholderDecorations.get(D);m.changeDecorationOptions(I,D.isFinalTabstop?o._decor.activeFinal:o._decor.active),h.add(D)}}for(const[C,w]of this._placeholderDecorations)h.has(C)||m.changeDecorationOptions(w,C.isFinalTabstop?o._decor.inactiveFinal:o._decor.inactive);return v});return r?this.move(a):d??[]}_hasPlaceholderBeenCollapsed(a){let r=a;for(;r;){if(r instanceof s.Placeholder){const d=this._placeholderDecorations.get(r);if(this._editor.getModel().getDecorationRange(d).isEmpty()&&r.toString().length>0)return!0}r=r.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){const[a]=this._snippet.placeholders;if(a.isFinalTabstop&&this._snippet.rightMostDescendant===a)return!0}return!1}computePossibleSelections(){const a=new Map;for(const r of this._placeholderGroups){let d;for(const m of r){if(m.isFinalTabstop)break;d||(d=[],a.set(m.index,d));const h=this._placeholderDecorations.get(m),v=this._editor.getModel().getDecorationRange(h);if(!v){a.delete(m.index);break}d.push(v)}}return a}get activeChoice(){if(!this._placeholderDecorations)return;const a=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!a?.choice)return;const r=this._placeholderDecorations.get(a);if(!r)return;const d=this._editor.getModel().getDecorationRange(r);if(d)return{range:d,choice:a.choice}}get hasChoice(){let a=!1;return this._snippet.walk(r=>(a=r instanceof s.Choice,!a)),a}merge(a){const r=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(d=>{for(const m of this._placeholderGroups[this._placeholderGroupsIdx]){const h=a.shift();console.assert(h._offset!==-1),console.assert(!h._placeholderDecorations);const v=h._snippet.placeholderInfo.last.index;for(const w of h._snippet.placeholderInfo.all)w.isFinalTabstop?w.index=m.index+(v+1)/this._nestingLevel:w.index=m.index+w.index/this._nestingLevel;this._snippet.replace(m,h._snippet.children);const C=this._placeholderDecorations.get(m);d.removeDecoration(C),this._placeholderDecorations.delete(m);for(const w of h._snippet.placeholders){const S=h._snippet.offset(w),D=h._snippet.fullLen(w),I=y.Range.fromPositions(r.getPositionAt(h._offset+S),r.getPositionAt(h._offset+S+D)),T=d.addDecoration(I,o._decor.inactive);this._placeholderDecorations.set(w,T)}}this._placeholderGroups=(0,c.groupBy)(this._snippet.placeholders,s.Placeholder.compareByIndex)})}}e.OneSnippet=o;const g={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let u=i=class{static adjustWhitespace(a,r,d,m,h){const v=a.getLineContent(r.lineNumber),C=(0,E.getLeadingWhitespace)(v,0,r.column-1);let w;return m.walk(S=>{if(!(S instanceof s.Text)||S.parent instanceof s.Choice||h&&!h.has(S))return!0;const D=S.value.split(/\r\n|\r|\n/);if(d){const T=m.offset(S);if(T===0)D[0]=a.normalizeIndentation(D[0]);else{w=w??m.toString();const M=w.charCodeAt(T-1);(M===10||M===13)&&(D[0]=a.normalizeIndentation(C+D[0]))}for(let M=1;M<D.length;M++)D[M]=a.normalizeIndentation(C+D[M])}const I=D.join(a.getEOL());return I!==S.value&&(S.parent.replace(S,[new s.Text(I)]),w=void 0),!0}),C}static adjustSelection(a,r,d,m){if(d!==0||m!==0){const{positionLineNumber:h,positionColumn:v}=r,C=v-d,w=v+m,S=a.validateRange({startLineNumber:h,startColumn:C,endLineNumber:h,endColumn:w});r=f.Selection.createWithDirection(S.startLineNumber,S.startColumn,S.endLineNumber,S.endColumn,r.getDirection())}return r}static createEditsAndSnippetsFromSelections(a,r,d,m,h,v,C,w,S){const D=[],I=[];if(!a.hasModel())return{edits:D,snippets:I};const T=a.getModel(),M=a.invokeWithinContext(W=>W.get(n.IWorkspaceContextService)),A=a.invokeWithinContext(W=>new t.ModelBasedVariableResolver(W.get(p.ILabelService),T)),R=()=>C,N=T.getValueInRange(i.adjustSelection(T,a.getSelection(),d,0)),O=T.getValueInRange(i.adjustSelection(T,a.getSelection(),0,m)),x=T.getLineFirstNonWhitespaceColumn(a.getSelection().positionLineNumber),F=a.getSelections().map((W,z)=>({selection:W,idx:z})).sort((W,z)=>y.Range.compareRangesUsingStarts(W.selection,z.selection));for(const{selection:W,idx:z}of F){let q=i.adjustSelection(T,W,d,0),H=i.adjustSelection(T,W,0,m);N!==T.getValueInRange(q)&&(q=W),O!==T.getValueInRange(H)&&(H=W);const K=W.setStartPosition(q.startLineNumber,q.startColumn).setEndPosition(H.endLineNumber,H.endColumn),U=new s.SnippetParser().parse(r,!0,h),Y=K.getStartPosition(),Q=i.adjustWhitespace(T,Y,v||z>0&&x!==T.getLineFirstNonWhitespaceColumn(W.positionLineNumber),U);U.resolveVariables(new t.CompositeSnippetVariableResolver([A,new t.ClipboardBasedVariableResolver(R,z,F.length,a.getOption(79)==="spread"),new t.SelectionBasedVariableResolver(T,W,z,w),new t.CommentBasedVariableResolver(T,W,S),new t.TimeBasedVariableResolver,new t.WorkspaceBasedVariableResolver(M),new t.RandomBasedVariableResolver])),D[z]=L.EditOperation.replace(K,U.toString()),D[z].identifier={major:z,minor:0},D[z]._isTracked=!0,I[z]=new o(a,U,Q)}return{edits:D,snippets:I}}static createEditsAndSnippetsFromEdits(a,r,d,m,h,v,C){if(!a.hasModel()||r.length===0)return{edits:[],snippets:[]};const w=[],S=a.getModel(),D=new s.SnippetParser,I=new s.TextmateSnippet,T=new t.CompositeSnippetVariableResolver([a.invokeWithinContext(A=>new t.ModelBasedVariableResolver(A.get(p.ILabelService),S)),new t.ClipboardBasedVariableResolver(()=>h,0,a.getSelections().length,a.getOption(79)==="spread"),new t.SelectionBasedVariableResolver(S,a.getSelection(),0,v),new t.CommentBasedVariableResolver(S,a.getSelection(),C),new t.TimeBasedVariableResolver,new t.WorkspaceBasedVariableResolver(a.invokeWithinContext(A=>A.get(n.IWorkspaceContextService))),new t.RandomBasedVariableResolver]);r=r.sort((A,R)=>y.Range.compareRangesUsingStarts(A.range,R.range));let M=0;for(let A=0;A<r.length;A++){const{range:R,template:N}=r[A];if(A>0){const z=r[A-1].range,q=y.Range.fromPositions(z.getEndPosition(),R.getStartPosition()),H=new s.Text(S.getValueInRange(q));I.appendChild(H),M+=H.value.length}const O=D.parseFragment(N,I);i.adjustWhitespace(S,R.getStartPosition(),!0,I,new Set(O)),I.resolveVariables(T);const x=I.toString(),F=x.slice(M);M=x.length;const W=L.EditOperation.replace(R,F);W.identifier={major:A,minor:0},W._isTracked=!0,w.push(W)}return D.ensureFinalTabstop(I,d,!0),{edits:w,snippets:[new o(a,I,"")]}}constructor(a,r,d=g,m){this._editor=a,this._template=r,this._options=d,this._languageConfigurationService=m,this._templateMerges=[],this._snippets=[]}dispose(){(0,k.dispose)(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;const{edits:a,snippets:r}=typeof this._template=="string"?i.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):i.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=r,this._editor.executeEdits("snippet",a,d=>{const m=d.filter(h=>!!h.identifier);for(let h=0;h<r.length;h++)r[h].initialize(m[h].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):m.map(h=>f.Selection.fromPositions(h.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(a,r=g){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,a]);const{edits:d,snippets:m}=i.createEditsAndSnippetsFromSelections(this._editor,a,r.overwriteBefore,r.overwriteAfter,!0,r.adjustWhitespace,r.clipboardText,r.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",d,h=>{const v=h.filter(w=>!!w.identifier);for(let w=0;w<m.length;w++)m[w].initialize(v[w].textChange);const C=m[0].isTrivialSnippet;if(!C){for(const w of this._snippets)w.merge(m);console.assert(m.length===0)}return this._snippets[0].hasPlaceholder&&!C?this._move(void 0):v.map(w=>f.Selection.fromPositions(w.range.getEndPosition()))})}next(){const a=this._move(!0);this._editor.setSelections(a),this._editor.revealPositionInCenterIfOutsideViewport(a[0].getPosition())}prev(){const a=this._move(!1);this._editor.setSelections(a),this._editor.revealPositionInCenterIfOutsideViewport(a[0].getPosition())}_move(a){const r=[];for(const d of this._snippets){const m=d.move(a);r.push(...m)}return r}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;const a=this._editor.getSelections();if(a.length<this._snippets.length)return!1;const r=new Map;for(const d of this._snippets){const m=d.computePossibleSelections();if(r.size===0)for(const[h,v]of m){v.sort(y.Range.compareRangesUsingStarts);for(const C of a)if(v[0].containsRange(C)){r.set(h,[]);break}}if(r.size===0)return!1;r.forEach((h,v)=>{h.push(...m.get(v))})}a.sort(y.Range.compareRangesUsingStarts);for(const[d,m]of r){if(m.length!==a.length){r.delete(d);continue}m.sort(y.Range.compareRangesUsingStarts);for(let h=0;h<m.length;h++)if(!m[h].containsRange(a[h])){r.delete(d);continue}}return r.size>0}};e.SnippetSession=u,e.SnippetSession=u=i=De([he(3,_.ILanguageConfigurationService)],u)}),define(oe[220],re([1,0,2,19,15,9,20,34,17,153,3,12,61,431]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.SnippetController2=void 0;const o={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0};let g=class{static{i=this}static{this.ID="snippetController2"}static get(a){return a.getContribution(i.ID)}static{this.InSnippetMode=new n.RawContextKey("inSnippetMode",!1,(0,p.localize)(445,"Whether the editor in current in snippet mode"))}static{this.HasNextTabstop=new n.RawContextKey("hasNextTabstop",!1,(0,p.localize)(446,"Whether there is a next tab stop when in snippet mode"))}static{this.HasPrevTabstop=new n.RawContextKey("hasPrevTabstop",!1,(0,p.localize)(447,"Whether there is a previous tab stop when in snippet mode"))}constructor(a,r,d,m,h){this._editor=a,this._logService=r,this._languageFeaturesService=d,this._languageConfigurationService=h,this._snippetListener=new c.DisposableStore,this._modelVersionId=-1,this._inSnippet=i.InSnippetMode.bindTo(m),this._hasNextTabstop=i.HasNextTabstop.bindTo(m),this._hasPrevTabstop=i.HasPrevTabstop.bindTo(m)}dispose(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._session?.dispose(),this._snippetListener.dispose()}insert(a,r){try{this._doInsert(a,typeof r>"u"?o:{...o,...r})}catch(d){this.cancel(),this._logService.error(d),this._logService.error("snippet_error"),this._logService.error("insert_template=",a),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(a,r){if(this._editor.hasModel()){if(this._snippetListener.clear(),r.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof a!="string"&&this.cancel(),this._session?((0,k.assertType)(typeof a=="string"),this._session.merge(a,r)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new t.SnippetSession(this._editor,a,r,this._languageConfigurationService),this._session.insert()),r.undoStopAfter&&this._editor.getModel().pushStackElement(),this._session?.hasChoice){const d={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(S,D)=>{if(!this._session||S!==this._editor.getModel()||!L.Position.equals(this._editor.getPosition(),D))return;const{activeChoice:I}=this._session;if(!I||I.choice.options.length===0)return;const T=S.getValueInRange(I.range),M=!!I.choice.options.find(R=>R.value===T),A=[];for(let R=0;R<I.choice.options.length;R++){const N=I.choice.options[R];A.push({kind:13,label:N.value,insertText:N.value,sortText:"a".repeat(R+1),range:I.range,filterText:M?`${T}_${N.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,p.localize)(448,"Go to next placeholder...")}})}return{suggestions:A}}},m=this._editor.getModel();let h,v=!1;const C=()=>{h?.dispose(),v=!1},w=()=>{v||(h=this._languageFeaturesService.completionProvider.register({language:m.getLanguageId(),pattern:m.uri.fsPath,scheme:m.uri.scheme,exclusive:!0},d),this._snippetListener.add(h),v=!0)};this._choiceCompletions={provider:d,enable:w,disable:C}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(d=>d.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}const{activeChoice:a}=this._session;if(!a||!this._choiceCompletions){this._choiceCompletions?.disable(),this._currentChoice=void 0;return}this._currentChoice!==a.choice&&(this._currentChoice=a.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{(0,b.showSimpleSuggestions)(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(a=!1){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,this._session?.dispose(),this._session=void 0,this._modelVersionId=-1,a&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session?.prev(),this._updateState()}next(){this._session?.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}};e.SnippetController2=g,e.SnippetController2=g=i=De([he(1,s.ILogService),he(2,_.ILanguageFeaturesService),he(3,n.IContextKeyService),he(4,f.ILanguageConfigurationService)],g),(0,E.registerEditorContribution)(g.ID,g,4);const u=E.EditorCommand.bindToContribution(g.get);(0,E.registerEditorCommand)(new u({id:"jumpToNextSnippetPlaceholder",precondition:n.ContextKeyExpr.and(g.InSnippetMode,g.HasNextTabstop),handler:l=>l.next(),kbOpts:{weight:130,kbExpr:y.EditorContextKeys.textInputFocus,primary:2}})),(0,E.registerEditorCommand)(new u({id:"jumpToPrevSnippetPlaceholder",precondition:n.ContextKeyExpr.and(g.InSnippetMode,g.HasPrevTabstop),handler:l=>l.prev(),kbOpts:{weight:130,kbExpr:y.EditorContextKeys.textInputFocus,primary:1026}})),(0,E.registerEditorCommand)(new u({id:"leaveSnippet",precondition:g.InSnippetMode,handler:l=>l.cancel(!0),kbOpts:{weight:130,kbExpr:y.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})),(0,E.registerEditorCommand)(new u({id:"acceptSnippet",precondition:g.InSnippetMode,handler:l=>l.finish()}))}),define(oe[851],re([1,0,13,67,101,8,2,21,11,19,76,9,4,23,103,115,28,34,206,706,257,207,220,24,7]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VersionIdChangeReason=e.InlineCompletionsModel=void 0,e.getSecondaryEdits=S;let C=class extends y.Disposable{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(M,A,R,N,O,x,F,W,z,q,H,K){super(),this.textModel=M,this.selectedSuggestItem=A,this._textModelVersionId=R,this._positions=N,this._debounceValue=O,this._suggestPreviewEnabled=x,this._suggestPreviewMode=F,this._inlineSuggestMode=W,this._enabled=z,this._instantiationService=q,this._commandService=H,this._languageConfigurationService=K,this._source=this._register(this._instantiationService.createInstance(a.InlineCompletionsSource,this.textModel,this._textModelVersionId,this._debounceValue)),this._isActive=(0,f.observableValue)(this,!1),this._forceUpdateExplicitlySignal=(0,f.observableSignal)(this),this._selectedInlineCompletionId=(0,f.observableValue)(this,void 0),this._primaryPosition=(0,f.derived)(this,Y=>this._positions.read(Y)[0]??new n.Position(1,1)),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([w.Redo,w.Undo,w.AcceptWord]),this._fetchInlineCompletionsPromise=(0,f.derivedHandleChanges)({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:g.InlineCompletionTriggerKind.Automatic}),handleChange:(Y,Q)=>(Y.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(Y.change))?Q.preserveCurrentCompletion=!0:Y.didChange(this._forceUpdateExplicitlySignal)&&(Q.inlineCompletionTriggerKind=g.InlineCompletionTriggerKind.Explicit),!0)},(Y,Q)=>{if(this._forceUpdateExplicitlySignal.read(Y),!(this._enabled.read(Y)&&this.selectedSuggestItem.read(Y)||this._isActive.read(Y))){this._source.cancelUpdate();return}this._textModelVersionId.read(Y);const G=this._source.suggestWidgetInlineCompletions.get(),P=this.selectedSuggestItem.read(Y);if(G&&!P){const pe=this._source.inlineCompletions.get();(0,f.transaction)(ce=>{(!pe||G.request.versionId>pe.request.versionId)&&this._source.inlineCompletions.set(G.clone(),ce),this._source.clearSuggestWidgetInlineCompletions(ce)})}const te=this._primaryPosition.read(Y),se={triggerKind:Q.inlineCompletionTriggerKind,selectedSuggestionInfo:P?.toSelectedSuggestionInfo()},ue=this.selectedInlineCompletion.get(),ge=Q.preserveCurrentCompletion||ue?.forwardStable?ue:void 0;return this._source.fetch(te,se,ge)}),this._filteredInlineCompletionItems=(0,f.derivedOpts)({owner:this,equalsFn:(0,E.itemsEquals)()},Y=>{const Q=this._source.inlineCompletions.read(Y);if(!Q)return[];const X=this._primaryPosition.read(Y);return Q.inlineCompletions.filter(P=>P.isVisible(this.textModel,X,Y))}),this.selectedInlineCompletionIndex=(0,f.derived)(this,Y=>{const Q=this._selectedInlineCompletionId.read(Y),X=this._filteredInlineCompletionItems.read(Y),G=this._selectedInlineCompletionId===void 0?-1:X.findIndex(P=>P.semanticId===Q);return G===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):G}),this.selectedInlineCompletion=(0,f.derived)(this,Y=>{const Q=this._filteredInlineCompletionItems.read(Y),X=this.selectedInlineCompletionIndex.read(Y);return Q[X]}),this.activeCommands=(0,f.derivedOpts)({owner:this,equalsFn:(0,E.itemsEquals)()},Y=>this.selectedInlineCompletion.read(Y)?.inlineCompletion.source.inlineCompletions.commands??[]),this.lastTriggerKind=this._source.inlineCompletions.map(this,Y=>Y?.request.context.triggerKind),this.inlineCompletionsCount=(0,f.derived)(this,Y=>{if(this.lastTriggerKind.read(Y)===g.InlineCompletionTriggerKind.Explicit)return this._filteredInlineCompletionItems.read(Y).length}),this.state=(0,f.derivedOpts)({owner:this,equalsFn:(Y,Q)=>!Y||!Q?Y===Q:(0,l.ghostTextsOrReplacementsEqual)(Y.ghostTexts,Q.ghostTexts)&&Y.inlineCompletion===Q.inlineCompletion&&Y.suggestItem===Q.suggestItem},Y=>{const Q=this.textModel,X=this.selectedSuggestItem.read(Y);if(X){const G=(0,r.singleTextRemoveCommonPrefix)(X.toSingleTextEdit(),Q),P=this._computeAugmentation(G,Y);if(!this._suggestPreviewEnabled.read(Y)&&!P)return;const se=P?.edit??G,ue=P?P.edit.text.length-G.text.length:0,ge=this._suggestPreviewMode.read(Y),pe=this._positions.read(Y),ce=[se,...S(this.textModel,pe,se)],ie=ce.map((J,B)=>(0,r.computeGhostText)(J,Q,ge,pe[B],ue)).filter(b.isDefined),ne=ie[0]??new l.GhostText(se.range.endLineNumber,[]);return{edits:ce,primaryGhostText:ne,ghostTexts:ie,inlineCompletion:P?.completion,suggestItem:X}}else{if(!this._isActive.read(Y))return;const G=this.selectedInlineCompletion.read(Y);if(!G)return;const P=G.toSingleTextEdit(Y),te=this._inlineSuggestMode.read(Y),se=this._positions.read(Y),ue=[P,...S(this.textModel,se,P)],ge=ue.map((pe,ce)=>(0,r.computeGhostText)(pe,Q,te,se[ce],0)).filter(b.isDefined);return ge[0]?{edits:ue,primaryGhostText:ge[0],ghostTexts:ge,inlineCompletion:G,suggestItem:void 0}:void 0}}),this.ghostTexts=(0,f.derivedOpts)({owner:this,equalsFn:l.ghostTextsOrReplacementsEqual},Y=>{const Q=this.state.read(Y);if(Q)return Q.ghostTexts}),this.primaryGhostText=(0,f.derivedOpts)({owner:this,equalsFn:l.ghostTextOrReplacementEquals},Y=>{const Q=this.state.read(Y);if(Q)return Q?.primaryGhostText}),this._register((0,f.recomputeInitiallyAndOnChange)(this._fetchInlineCompletionsPromise));let U;this._register((0,f.autorun)(Y=>{const X=this.state.read(Y)?.inlineCompletion;if(X?.semanticId!==U?.semanticId&&(U=X,X)){const G=X.inlineCompletion,P=G.source;P.provider.handleItemDidShow?.(P.inlineCompletions,G.sourceInlineCompletion,G.insertText)}}))}_getReason(M){return M?.isUndoing?w.Undo:M?.isRedoing?w.Redo:this.isAcceptingPartially?w.AcceptWord:w.Other}async trigger(M){this._isActive.set(!0,M),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(M){(0,f.subtransaction)(M,A=>{this._isActive.set(!0,A),this._forceUpdateExplicitlySignal.trigger(A)}),await this._fetchInlineCompletionsPromise.get()}stop(M){(0,f.subtransaction)(M,A=>{this._isActive.set(!1,A),this._source.clear(A)})}_computeAugmentation(M,A){const R=this.textModel,N=this._source.suggestWidgetInlineCompletions.read(A),O=N?N.inlineCompletions:[this.selectedInlineCompletion.read(A)].filter(b.isDefined);return(0,k.mapFindFirst)(O,F=>{let W=F.toSingleTextEdit(A);return W=(0,r.singleTextRemoveCommonPrefix)(W,R,s.Range.fromPositions(W.range.getStartPosition(),M.range.getEndPosition())),(0,r.singleTextEditAugments)(W,M)?{completion:F,edit:W}:void 0})}async _deltaSelectedInlineCompletionIndex(M){await this.triggerExplicitly();const A=this._filteredInlineCompletionItems.get()||[];if(A.length>0){const R=(this.selectedInlineCompletionIndex.get()+M+A.length)%A.length;this._selectedInlineCompletionId.set(A[R].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(M){if(M.getModel()!==this.textModel)throw new L.BugIndicatingError;const A=this.state.get();if(!A||A.primaryGhostText.isEmpty()||!A.inlineCompletion)return;const R=A.inlineCompletion.toInlineCompletion(void 0);if(R.command&&R.source.addRef(),M.pushUndoStop(),R.snippetInfo)M.executeEdits("inlineSuggestion.accept",[p.EditOperation.replace(R.range,""),...R.additionalTextEdits]),M.setPosition(R.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),m.SnippetController2.get(M)?.insert(R.snippetInfo.snippet,{undoStopBefore:!1});else{const N=A.edits,O=I(N).map(x=>t.Selection.fromPositions(x));M.executeEdits("inlineSuggestion.accept",[...N.map(x=>p.EditOperation.replace(x.range,x.text)),...R.additionalTextEdits]),M.setSelections(O,"inlineCompletionAccept")}this.stop(),R.command&&(await this._commandService.executeCommand(R.command.id,...R.command.arguments||[]).then(void 0,L.onUnexpectedExternalError),R.source.removeRef())}async acceptNextWord(M){await this._acceptNext(M,(A,R)=>{const N=this.textModel.getLanguageIdAtPosition(A.lineNumber,A.column),O=this._languageConfigurationService.getLanguageConfiguration(N),x=new RegExp(O.wordDefinition.source,O.wordDefinition.flags.replace("g","")),F=R.match(x);let W=0;F&&F.index!==void 0?F.index===0?W=F[0].length:W=F.index:W=R.length;const q=/\s+/g.exec(R);return q&&q.index!==void 0&&q.index+q[0].length<W&&(W=q.index+q[0].length),W},0)}async acceptNextLine(M){await this._acceptNext(M,(A,R)=>{const N=R.match(/\n/);return N&&N.index!==void 0?N.index+1:R.length},1)}async _acceptNext(M,A,R){if(M.getModel()!==this.textModel)throw new L.BugIndicatingError;const N=this.state.get();if(!N||N.primaryGhostText.isEmpty()||!N.inlineCompletion)return;const O=N.primaryGhostText,x=N.inlineCompletion.toInlineCompletion(void 0);if(x.snippetInfo||x.filterText!==x.insertText){await this.accept(M);return}const F=O.parts[0],W=new n.Position(O.lineNumber,F.column),z=F.text,q=A(W,z);if(q===z.length&&O.parts.length===1){this.accept(M);return}const H=z.substring(0,q),K=this._positions.get(),U=K[0];x.source.addRef();try{this._isAcceptingPartially=!0;try{M.pushUndoStop();const Y=s.Range.fromPositions(U,W),Q=M.getModel().getValueInRange(Y)+H,X=new i.SingleTextEdit(Y,Q),G=[X,...S(this.textModel,K,X)],P=I(G).map(te=>t.Selection.fromPositions(te));M.executeEdits("inlineSuggestion.accept",G.map(te=>p.EditOperation.replace(te.range,te.text))),M.setSelections(P,"inlineCompletionPartialAccept"),M.revealPositionInCenterIfOutsideViewport(M.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(x.source.provider.handlePartialAccept){const Y=s.Range.fromPositions(x.range.getStartPosition(),o.TextLength.ofText(H).addToPosition(W)),Q=M.getModel().getValueInRange(Y,1);x.source.provider.handlePartialAccept(x.source.inlineCompletions,x.sourceInlineCompletion,Q.length,{kind:R})}}finally{x.source.removeRef()}}handleSuggestAccepted(M){const A=(0,r.singleTextRemoveCommonPrefix)(M.toSingleTextEdit(),this.textModel),R=this._computeAugmentation(A,void 0);if(!R)return;const N=R.completion.inlineCompletion;N.source.provider.handlePartialAccept?.(N.source.inlineCompletions,N.sourceInlineCompletion,A.text.length,{kind:2})}};e.InlineCompletionsModel=C,e.InlineCompletionsModel=C=De([he(9,v.IInstantiationService),he(10,h.ICommandService),he(11,u.ILanguageConfigurationService)],C);var w;(function(T){T[T.Undo=0]="Undo",T[T.Redo=1]="Redo",T[T.AcceptWord=2]="AcceptWord",T[T.Other=3]="Other"})(w||(e.VersionIdChangeReason=w={}));function S(T,M,A){if(M.length===1)return[];const R=M[0],N=M.slice(1),O=A.range.getStartPosition(),x=A.range.getEndPosition(),F=T.getValueInRange(s.Range.fromPositions(R,x)),W=(0,d.subtractPositions)(R,O);if(W.lineNumber<1)return(0,L.onUnexpectedError)(new L.BugIndicatingError(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${R.toString()} and ${O.toString()}`)),[];const z=D(A.text,W);return N.map(q=>{const H=(0,d.addPositions)((0,d.subtractPositions)(q,O),x),K=T.getValueInRange(s.Range.fromPositions(q,H)),U=(0,_.commonPrefixLength)(F,K),Y=s.Range.fromPositions(q,q.delta(0,U));return new i.SingleTextEdit(Y,z)})}function D(T,M){let A="";const R=(0,_.splitLinesIncludeSeparators)(T);for(let N=M.lineNumber-1;N<R.length;N++)A+=R[N].substring(N===M.lineNumber-1?M.column-1:0);return A}function I(T){const M=c.Permutation.createSortPermutation(T,(0,c.compareBy)(O=>O.range,s.Range.compareRangesUsingStarts)),R=new i.TextEdit(M.apply(T)).getNewRanges();return M.inverse().apply(R).map(O=>O.getEndPosition())}}),define(oe[432],re([1,0,14,18,8,6,2,11,23,116,362,117,27,12,61,66,361,153,17,82,19,267,220,269]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h){"use strict";var v;Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestModel=e.LineContext=void 0;class C{static shouldAutoTrigger(T){if(!T.hasModel())return!1;const M=T.getModel(),A=T.getPosition();M.tokenization.tokenizeIfCheap(A.lineNumber);const R=M.getWordAtPosition(A);return!(!R||R.endColumn!==A.column&&R.startColumn+1!==A.column||!isNaN(Number(R.word)))}constructor(T,M,A){this.leadingLineContent=T.getLineContent(M.lineNumber).substr(0,M.column-1),this.leadingWord=T.getWordUntilPosition(M),this.lineNumber=M.lineNumber,this.column=M.column,this.triggerOptions=A}}e.LineContext=C;function w(I,T,M){if(!T.getContextKeyValue(d.InlineCompletionContextKeys.inlineSuggestionVisible.key))return!0;const A=T.getContextKeyValue(d.InlineCompletionContextKeys.suppressSuggestions.key);return A!==void 0?!A:!I.getOption(62).suppressSuggestions}function S(I,T,M){if(!T.getContextKeyValue("inlineSuggestionVisible"))return!0;const A=T.getContextKeyValue(d.InlineCompletionContextKeys.suppressSuggestions.key);return A!==void 0?!A:!I.getOption(62).suppressSuggestions}let D=v=class{constructor(T,M,A,R,N,O,x,F,W){this._editor=T,this._editorWorkerService=M,this._clipboardService=A,this._telemetryService=R,this._logService=N,this._contextKeyService=O,this._configurationService=x,this._languageFeaturesService=F,this._envService=W,this._toDispose=new y.DisposableStore,this._triggerCharacterListener=new y.DisposableStore,this._triggerQuickSuggest=new c.TimeoutTimer,this._triggerState=void 0,this._completionDisposables=new y.DisposableStore,this._onDidCancel=new L.Emitter,this._onDidTrigger=new L.Emitter,this._onDidSuggest=new L.Emitter,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new _.Selection(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let z=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{z=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{z=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(q=>{z||this._onCursorChange(q)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!z&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}dispose(){(0,y.dispose)(this._triggerCharacterListener),(0,y.dispose)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(92)||!this._editor.hasModel()||!this._editor.getOption(122))return;const T=new Map;for(const A of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const R of A.triggerCharacters||[]){let N=T.get(R);N||(N=new Set,N.add((0,u.getSnippetSuggestSupport)()),T.set(R,N)),N.add(A)}const M=A=>{if(!S(this._editor,this._contextKeyService,this._configurationService)||C.shouldAutoTrigger(this._editor))return;if(!A){const O=this._editor.getPosition();A=this._editor.getModel().getLineContent(O.lineNumber).substr(0,O.column-1)}let R="";(0,f.isLowSurrogate)(A.charCodeAt(A.length-1))?(0,f.isHighSurrogate)(A.charCodeAt(A.length-2))&&(R=A.substr(A.length-2)):R=A.charAt(A.length-1);const N=T.get(R);if(N){const O=new Map;if(this._completionModel)for(const[x,F]of this._completionModel.getItemsByProvider())N.has(x)||O.set(x,F);this.trigger({auto:!0,triggerKind:1,triggerCharacter:R,retrigger:!!this._completionModel,clipboardText:this._completionModel?.clipboardText,completionOptions:{providerFilter:N,providerItemsToReuse:O}})}};this._triggerCharacterListener.add(this._editor.onDidType(M)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>M()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(T=!1){this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),this._requestToken?.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:T}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(T){if(!this._editor.hasModel())return;const M=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!T.selection.isEmpty()||T.reason!==0&&T.reason!==3||T.source!=="keyboard"&&T.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&T.reason===0?(M.containsRange(this._currentSelection)||M.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&T.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){u.QuickSuggestionsOptions.isAllOff(this._editor.getOption(90))||this._editor.getOption(119).snippetsPreventQuickSuggestions&&m.SnippetController2.get(this._editor)?.isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!C.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const T=this._editor.getModel(),M=this._editor.getPosition(),A=this._editor.getOption(90);if(!u.QuickSuggestionsOptions.isAllOff(A)){if(!u.QuickSuggestionsOptions.isAllOn(A)){T.tokenization.tokenizeIfCheap(M.lineNumber);const R=T.tokenization.getLineTokens(M.lineNumber),N=R.getStandardTokenType(R.findTokenIndexAtOffset(Math.max(M.column-1-1,0)));if(u.QuickSuggestionsOptions.valueFor(A,N)!=="on")return}w(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(T)&&this.trigger({auto:!0})}},this._editor.getOption(91)))}_refilterCompletionItems(){(0,r.assertType)(this._editor.hasModel()),(0,r.assertType)(this._triggerState!==void 0);const T=this._editor.getModel(),M=this._editor.getPosition(),A=new C(T,M,{...this._triggerState,refilter:!0});this._onNewContext(A)}trigger(T){if(!this._editor.hasModel())return;const M=this._editor.getModel(),A=new C(M,this._editor.getPosition(),T);this.cancel(T.retrigger),this._triggerState=T,this._onDidTrigger.fire({auto:T.auto,shy:T.shy??!1,position:this._editor.getPosition()}),this._context=A;let R={triggerKind:T.triggerKind??0};T.triggerCharacter&&(R={triggerKind:1,triggerCharacter:T.triggerCharacter}),this._requestToken=new k.CancellationTokenSource;const N=this._editor.getOption(113);let O=1;switch(N){case"top":O=0;break;case"bottom":O=2;break}const{itemKind:x,showDeprecated:F}=v.createSuggestFilter(this._editor),W=new u.CompletionOptions(O,T.completionOptions?.kindFilter??x,T.completionOptions?.providerFilter,T.completionOptions?.providerItemsToReuse,F),z=p.WordDistance.create(this._editorWorkerService,this._editor),q=(0,u.provideSuggestionItems)(this._languageFeaturesService.completionProvider,M,this._editor.getPosition(),W,R,this._requestToken.token);Promise.all([q,z]).then(async([H,K])=>{if(this._requestToken?.dispose(),!this._editor.hasModel())return;let U=T?.clipboardText;if(!U&&H.needsClipboard&&(U=await this._clipboardService.readText()),this._triggerState===void 0)return;const Y=this._editor.getModel(),Q=new C(Y,this._editor.getPosition(),T),X={...a.FuzzyScoreOptions.default,firstMatchCanBeWeak:!this._editor.getOption(119).matchOnWordStartOnly};if(this._completionModel=new g.CompletionModel(H.items,this._context.column,{leadingLineContent:Q.leadingLineContent,characterCountDelta:Q.column-this._context.column},K,this._editor.getOption(119),this._editor.getOption(113),X,U),this._completionDisposables.add(H.disposable),this._onNewContext(Q),this._reportDurationsTelemetry(H.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const G of H.items)G.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${G.provider._debugDisplayName}`,G.completion)}).catch(E.onUnexpectedError)}_reportDurationsTelemetry(T){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(T)}),this._logService.debug("suggest.durations.json",T)})}static createSuggestFilter(T){const M=new Set;T.getOption(113)==="none"&&M.add(27);const R=T.getOption(119);return R.showMethods||M.add(0),R.showFunctions||M.add(1),R.showConstructors||M.add(2),R.showFields||M.add(3),R.showVariables||M.add(4),R.showClasses||M.add(5),R.showStructs||M.add(6),R.showInterfaces||M.add(7),R.showModules||M.add(8),R.showProperties||M.add(9),R.showEvents||M.add(10),R.showOperators||M.add(11),R.showUnits||M.add(12),R.showValues||M.add(13),R.showConstants||M.add(14),R.showEnums||M.add(15),R.showEnumMembers||M.add(16),R.showKeywords||M.add(17),R.showWords||M.add(18),R.showColors||M.add(19),R.showFiles||M.add(20),R.showReferences||M.add(21),R.showColors||M.add(22),R.showFolders||M.add(23),R.showTypeParameters||M.add(24),R.showSnippets||M.add(27),R.showUsers||M.add(25),R.showIssues||M.add(26),{itemKind:M,showDeprecated:R.showDeprecated}}_onNewContext(T){if(this._context){if(T.lineNumber!==this._context.lineNumber){this.cancel();return}if((0,f.getLeadingWhitespace)(T.leadingLineContent)!==(0,f.getLeadingWhitespace)(this._context.leadingLineContent)){this.cancel();return}if(T.column<this._context.column){T.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(T.leadingWord.word.length!==0&&T.leadingWord.startColumn>this._context.leadingWord.startColumn){if(C.shouldAutoTrigger(this._editor)&&this._context){const A=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:A}})}return}if(T.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&T.leadingWord.word.length!==0){const M=new Map,A=new Set;for(const[R,N]of this._completionModel.getItemsByProvider())N.length>0&&N[0].container.incomplete?A.add(R):M.set(R,N);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:A,providerItemsToReuse:M}})}else{const M=this._completionModel.lineContext;let A=!1;if(this._completionModel.lineContext={leadingLineContent:T.leadingLineContent,characterCountDelta:T.column-this._context.column},this._completionModel.items.length===0){const R=C.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(R&&this._context.leadingWord.endColumn<T.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=M,A=this._completionModel.items.length>0,A&&T.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:T.triggerOptions,isFrozen:A})}}}}};e.SuggestModel=D,e.SuggestModel=D=v=De([he(1,b.IEditorWorkerService),he(2,n.IClipboardService),he(3,o.ITelemetryService),he(4,i.ILogService),he(5,t.IContextKeyService),he(6,s.IConfigurationService),he(7,l.ILanguageFeaturesService),he(8,h.IEnvironmentService)],D)}),define(oe[292],re([1,0,48,13,18,8,6,139,2,16,59,19,142,15,76,9,4,20,220,134,400,678,3,24,12,7,61,153,677,646,432,647,830,66,51,129,5,36]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R,N,O,x,F){"use strict";var W;Object.defineProperty(e,"__esModule",{value:!0}),e.TriggerSuggestAction=e.SuggestController=void 0;const z=!1;class q{constructor(G,P){if(this._model=G,this._position=P,this._decorationOptions=F.ModelDecorationOptions.register({description:"suggest-line-suffix",stickiness:1}),G.getLineMaxColumn(P.lineNumber)!==P.column){const se=G.getOffsetAt(P),ue=G.getPositionAt(se+1);G.changeDecorations(ge=>{this._marker&&ge.removeDecoration(this._marker),this._marker=ge.addDecoration(g.Range.fromPositions(P,ue),this._decorationOptions)})}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(G=>{G.removeDecoration(this._marker),this._marker=void 0})}delta(G){if(this._model.isDisposed()||this._position.lineNumber!==G.lineNumber)return 0;if(this._marker){const P=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(P.getStartPosition())-this._model.getOffsetAt(G)}else return this._model.getLineMaxColumn(G.lineNumber)-G.column}}let H=class{static{W=this}static{this.ID="editor.contrib.suggestController"}static get(G){return G.getContribution(W.ID)}constructor(G,P,te,se,ue,ge,pe){this._memoryService=P,this._commandService=te,this._contextKeyService=se,this._instantiationService=ue,this._logService=ge,this._telemetryService=pe,this._lineSuffix=new _.MutableDisposable,this._toDispose=new _.DisposableStore,this._selectors=new K(J=>J.priority),this._onWillInsertSuggestItem=new y.Emitter,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=G,this.model=ue.createInstance(T.SuggestModel,this.editor),this._selectors.register({priority:0,select:(J,B,j)=>this._memoryService.select(J,B,j)});const ce=S.Context.InsertMode.bindTo(se);ce.set(G.getOption(119).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>ce.set(G.getOption(119).insertMode))),this.widget=this._toDispose.add(new x.WindowIdleValue((0,x.getWindow)(G.getDomNode()),()=>{const J=this._instantiationService.createInstance(A.SuggestWidget,this.editor);this._toDispose.add(J),this._toDispose.add(J.onDidSelect(Z=>this._insertSuggestion(Z,0),this));const B=new I.CommitCharacterController(this.editor,J,this.model,Z=>this._insertSuggestion(Z,2));this._toDispose.add(B);const j=S.Context.MakesTextEdit.bindTo(this._contextKeyService),V=S.Context.HasInsertAndReplaceRange.bindTo(this._contextKeyService),$=S.Context.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,_.toDisposable)(()=>{j.reset(),V.reset(),$.reset()})),this._toDispose.add(J.onDidFocus(({item:Z})=>{const ee=this.editor.getPosition(),le=Z.editStart.column,de=ee.column;let me=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!Z.completion.additionalTextEdits&&!(Z.completion.insertTextRules&4)&&de-le===Z.completion.insertText.length&&(me=this.editor.getModel().getValueInRange({startLineNumber:ee.lineNumber,startColumn:le,endLineNumber:ee.lineNumber,endColumn:de})!==Z.completion.insertText),j.set(me),V.set(!o.Position.equals(Z.editInsertEnd,Z.editReplaceEnd)),$.set(!!Z.provider.resolveCompletionItem||!!Z.completion.documentation||Z.completion.detail!==Z.completion.label)})),this._toDispose.add(J.onDetailsKeyDown(Z=>{if(Z.toKeyCodeChord().equals(new f.KeyCodeChord(!0,!1,!1,!1,33))||b.isMacintosh&&Z.toKeyCodeChord().equals(new f.KeyCodeChord(!1,!1,!1,!0,33))){Z.stopPropagation();return}Z.toKeyCodeChord().isModifierKey()||this.editor.focus()})),J})),this._overtypingCapturer=this._toDispose.add(new x.WindowIdleValue((0,x.getWindow)(G.getDomNode()),()=>this._toDispose.add(new M.OvertypingCapturer(this.editor,this.model)))),this._alternatives=this._toDispose.add(new x.WindowIdleValue((0,x.getWindow)(G.getDomNode()),()=>this._toDispose.add(new D.SuggestAlternatives(this.editor,this._contextKeyService)))),this._toDispose.add(ue.createInstance(d.WordContextKey,G)),this._toDispose.add(this.model.onDidTrigger(J=>{this.widget.value.showTriggered(J.auto,J.shy?250:50),this._lineSuffix.value=new q(this.editor.getModel(),J.position)})),this._toDispose.add(this.model.onDidSuggest(J=>{if(J.triggerOptions.shy)return;let B=-1;for(const V of this._selectors.itemsOrderedByPriorityDesc)if(B=V.select(this.editor.getModel(),this.editor.getPosition(),J.completionModel.items),B!==-1)break;if(B===-1&&(B=0),this.model.state===0)return;let j=!1;if(J.triggerOptions.auto){const V=this.editor.getOption(119);V.selectionMode==="never"||V.selectionMode==="always"?j=V.selectionMode==="never":V.selectionMode==="whenTriggerCharacter"?j=J.triggerOptions.triggerKind!==1:V.selectionMode==="whenQuickSuggestion"&&(j=J.triggerOptions.triggerKind===1&&!J.triggerOptions.refilter)}this.widget.value.showSuggestions(J.completionModel,B,J.isFrozen,J.triggerOptions.auto,j)})),this._toDispose.add(this.model.onDidCancel(J=>{J.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{z||(this.model.cancel(),this.model.clear())}));const ie=S.Context.AcceptSuggestionsOnEnter.bindTo(se),ne=()=>{const J=this.editor.getOption(1);ie.set(J==="on"||J==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>ne())),ne()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(G,P){if(!G||!G.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;const te=l.SnippetController2.get(this.editor);if(!te)return;this._onWillInsertSuggestItem.fire({item:G.item});const se=this.editor.getModel(),ue=se.getAlternativeVersionId(),{item:ge}=G,pe=[],ce=new E.CancellationTokenSource;P&1||this.editor.pushUndoStop();const ie=this.getOverwriteInfo(ge,!!(P&8));this._memoryService.memorize(se,this.editor.getPosition(),ge);const ne=ge.isResolved;let J=-1,B=-1;if(Array.isArray(ge.completion.additionalTextEdits)){this.model.cancel();const V=s.StableEditorScrollState.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",ge.completion.additionalTextEdits.map($=>{let Z=g.Range.lift($.range);if(Z.startLineNumber===ge.position.lineNumber&&Z.startColumn>ge.position.column){const ee=this.editor.getPosition().column-ge.position.column,le=ee,de=g.Range.spansMultipleLines(Z)?0:ee;Z=new g.Range(Z.startLineNumber,Z.startColumn+le,Z.endLineNumber,Z.endColumn+de)}return i.EditOperation.replaceMove(Z,$.text)})),V.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!ne){const V=new p.StopWatch;let $;const Z=se.onDidChangeContent(me=>{if(me.isFlush){ce.cancel(),Z.dispose();return}for(const be of me.changes){const ve=g.Range.getEndPosition(be.range);(!$||o.Position.isBefore(ve,$))&&($=ve)}}),ee=P;P|=2;let le=!1;const de=this.editor.onWillType(()=>{de.dispose(),le=!0,ee&2||this.editor.pushUndoStop()});pe.push(ge.resolve(ce.token).then(()=>{if(!ge.completion.additionalTextEdits||ce.token.isCancellationRequested)return;if($&&ge.completion.additionalTextEdits.some(be=>o.Position.isBefore($,g.Range.getStartPosition(be.range))))return!1;le&&this.editor.pushUndoStop();const me=s.StableEditorScrollState.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",ge.completion.additionalTextEdits.map(be=>i.EditOperation.replaceMove(g.Range.lift(be.range),be.text))),me.restoreRelativeVerticalPositionOfCursor(this.editor),(le||!(ee&2))&&this.editor.pushUndoStop(),!0}).then(me=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",V.elapsed(),me),B=me===!0?1:me===!1?0:-2}).finally(()=>{Z.dispose(),de.dispose()}))}let{insertText:j}=ge.completion;if(ge.completion.insertTextRules&4||(j=a.SnippetParser.escape(j)),this.model.cancel(),te.insert(j,{overwriteBefore:ie.overwriteBefore,overwriteAfter:ie.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(ge.completion.insertTextRules&1),clipboardText:G.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),P&2||this.editor.pushUndoStop(),ge.completion.command)if(ge.completion.command.id===U.id)this.model.trigger({auto:!0,retrigger:!0});else{const V=new p.StopWatch;pe.push(this._commandService.executeCommand(ge.completion.command.id,...ge.completion.command.arguments?[...ge.completion.command.arguments]:[]).catch($=>{ge.completion.extensionId?(0,L.onUnexpectedExternalError)($):(0,L.onUnexpectedError)($)}).finally(()=>{J=V.elapsed()}))}P&4&&this._alternatives.value.set(G,V=>{for(ce.cancel();se.canUndo();){ue!==se.getAlternativeVersionId()&&se.undo(),this._insertSuggestion(V,3|(P&8?8:0));break}}),this._alertCompletionItem(ge),Promise.all(pe).finally(()=>{this._reportSuggestionAcceptedTelemetry(ge,se,ne,J,B),this.model.clear(),ce.dispose()})}_reportSuggestionAcceptedTelemetry(G,P,te,se,ue){Math.floor(Math.random()*100)!==0&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:G.extensionId?.value??"unknown",providerId:G.provider._debugDisplayName??"unknown",kind:G.completion.kind,basenameHash:(0,O.hash)((0,N.basename)(P.uri)).toString(16),languageId:P.getLanguageId(),fileExtension:(0,N.extname)(P.uri),resolveInfo:G.provider.resolveCompletionItem?te?1:0:-1,resolveDuration:G.resolveDuration,commandDuration:se,additionalEditsAsync:ue})}getOverwriteInfo(G,P){(0,n.assertType)(this.editor.hasModel());let te=this.editor.getOption(119).insertMode==="replace";P&&(te=!te);const se=G.position.column-G.editStart.column,ue=(te?G.editReplaceEnd.column:G.editInsertEnd.column)-G.position.column,ge=this.editor.getPosition().column-G.position.column,pe=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:se+ge,overwriteAfter:ue+pe}}_alertCompletionItem(G){if((0,k.isNonEmptyArray)(G.completion.additionalTextEdits)){const P=m.localize(378,"Accepting '{0}' made {1} additional edits",G.textLabel,G.completion.additionalTextEdits.length);(0,c.alert)(P)}}triggerSuggest(G,P,te){this.editor.hasModel()&&(this.model.trigger({auto:P??!1,completionOptions:{providerFilter:G,kindFilter:te?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(G){if(!this.editor.hasModel())return;const P=this.editor.getPosition(),te=()=>{P.equals(this.editor.getPosition())&&this._commandService.executeCommand(G.fallback)},se=ue=>{if(ue.completion.insertTextRules&4||ue.completion.additionalTextEdits)return!0;const ge=this.editor.getPosition(),pe=ue.editStart.column,ce=ge.column;return ce-pe!==ue.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:ge.lineNumber,startColumn:pe,endLineNumber:ge.lineNumber,endColumn:ce})!==ue.completion.insertText};y.Event.once(this.model.onDidTrigger)(ue=>{const ge=[];y.Event.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{(0,_.dispose)(ge),te()},void 0,ge),this.model.onDidSuggest(({completionModel:pe})=>{if((0,_.dispose)(ge),pe.items.length===0){te();return}const ce=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),pe.items),ie=pe.items[ce];if(!se(ie)){te();return}this.editor.pushUndoStop(),this._insertSuggestion({index:ce,item:ie,model:pe},7)},void 0,ge)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(P,0),this.editor.focus()}acceptSelectedSuggestion(G,P){const te=this.widget.value.getFocusedItem();let se=0;G&&(se|=4),P&&(se|=8),this._insertSuggestion(te,se)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(G){return this._selectors.register(G)}};e.SuggestController=H,e.SuggestController=H=W=De([he(1,r.ISuggestMemoryService),he(2,h.ICommandService),he(3,v.IContextKeyService),he(4,C.IInstantiationService),he(5,w.ILogService),he(6,R.ITelemetryService)],H);class K{constructor(G){this.prioritySelector=G,this._items=new Array}register(G){if(this._items.indexOf(G)!==-1)throw new Error("Value is already registered");return this._items.push(G),this._items.sort((P,te)=>this.prioritySelector(te)-this.prioritySelector(P)),{dispose:()=>{const P=this._items.indexOf(G);P>=0&&this._items.splice(P,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class U extends t.EditorAction{static{this.id="editor.action.triggerSuggest"}constructor(){super({id:U.id,label:m.localize(379,"Trigger Suggest"),alias:"Trigger Suggest",precondition:v.ContextKeyExpr.and(u.EditorContextKeys.writable,u.EditorContextKeys.hasCompletionItemProvider,S.Context.Visible.toNegated()),kbOpts:{kbExpr:u.EditorContextKeys.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(G,P,te){const se=H.get(P);if(!se)return;let ue;te&&typeof te=="object"&&te.auto===!0&&(ue=!0),se.triggerSuggest(void 0,ue,void 0)}}e.TriggerSuggestAction=U,(0,t.registerEditorContribution)(H.ID,H,2),(0,t.registerEditorAction)(U);const Y=190,Q=t.EditorCommand.bindToContribution(H.get);(0,t.registerEditorCommand)(new Q({id:"acceptSelectedSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,S.Context.HasFocusedSuggestion),handler(X){X.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:v.ContextKeyExpr.and(S.Context.Visible,u.EditorContextKeys.textInputFocus),weight:Y},{primary:3,kbExpr:v.ContextKeyExpr.and(S.Context.Visible,u.EditorContextKeys.textInputFocus,S.Context.AcceptSuggestionsOnEnter,S.Context.MakesTextEdit),weight:Y}],menuOpts:[{menuId:S.suggestWidgetStatusbarMenu,title:m.localize(380,"Insert"),group:"left",order:1,when:S.Context.HasInsertAndReplaceRange.toNegated()},{menuId:S.suggestWidgetStatusbarMenu,title:m.localize(381,"Insert"),group:"left",order:1,when:v.ContextKeyExpr.and(S.Context.HasInsertAndReplaceRange,S.Context.InsertMode.isEqualTo("insert"))},{menuId:S.suggestWidgetStatusbarMenu,title:m.localize(382,"Replace"),group:"left",order:1,when:v.ContextKeyExpr.and(S.Context.HasInsertAndReplaceRange,S.Context.InsertMode.isEqualTo("replace"))}]})),(0,t.registerEditorCommand)(new Q({id:"acceptAlternativeSelectedSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,u.EditorContextKeys.textInputFocus,S.Context.HasFocusedSuggestion),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:1027,secondary:[1026]},handler(X){X.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:S.suggestWidgetStatusbarMenu,group:"left",order:2,when:v.ContextKeyExpr.and(S.Context.HasInsertAndReplaceRange,S.Context.InsertMode.isEqualTo("insert")),title:m.localize(383,"Replace")},{menuId:S.suggestWidgetStatusbarMenu,group:"left",order:2,when:v.ContextKeyExpr.and(S.Context.HasInsertAndReplaceRange,S.Context.InsertMode.isEqualTo("replace")),title:m.localize(384,"Insert")}]})),h.CommandsRegistry.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,t.registerEditorCommand)(new Q({id:"hideSuggestWidget",precondition:S.Context.Visible,handler:X=>X.cancelSuggestWidget(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:9,secondary:[1033]}})),(0,t.registerEditorCommand)(new Q({id:"selectNextSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectNextSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,t.registerEditorCommand)(new Q({id:"selectNextPageSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectNextPageSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:12,secondary:[2060]}})),(0,t.registerEditorCommand)(new Q({id:"selectLastSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectLastSuggestion()})),(0,t.registerEditorCommand)(new Q({id:"selectPrevSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectPrevSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,t.registerEditorCommand)(new Q({id:"selectPrevPageSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectPrevPageSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:11,secondary:[2059]}})),(0,t.registerEditorCommand)(new Q({id:"selectFirstSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,v.ContextKeyExpr.or(S.Context.MultipleSuggestions,S.Context.HasFocusedSuggestion.negate())),handler:X=>X.selectFirstSuggestion()})),(0,t.registerEditorCommand)(new Q({id:"focusSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,S.Context.HasFocusedSuggestion.negate()),handler:X=>X.focusSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,t.registerEditorCommand)(new Q({id:"focusAndAcceptSuggestion",precondition:v.ContextKeyExpr.and(S.Context.Visible,S.Context.HasFocusedSuggestion.negate()),handler:X=>{X.focusSuggestion(),X.acceptSelectedSuggestion(!0,!1)}})),(0,t.registerEditorCommand)(new Q({id:"toggleSuggestionDetails",precondition:v.ContextKeyExpr.and(S.Context.Visible,S.Context.HasFocusedSuggestion),handler:X=>X.toggleSuggestionDetails(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:S.suggestWidgetStatusbarMenu,group:"right",order:1,when:v.ContextKeyExpr.and(S.Context.DetailsVisible,S.Context.CanResolve),title:m.localize(385,"show less")},{menuId:S.suggestWidgetStatusbarMenu,group:"right",order:1,when:v.ContextKeyExpr.and(S.Context.DetailsVisible.toNegated(),S.Context.CanResolve),title:m.localize(386,"show more")}]})),(0,t.registerEditorCommand)(new Q({id:"toggleExplainMode",precondition:S.Context.Visible,handler:X=>X.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),(0,t.registerEditorCommand)(new Q({id:"toggleSuggestionFocus",precondition:S.Context.Visible,handler:X=>X.toggleSuggestionFocus(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:2570,mac:{primary:778}}})),(0,t.registerEditorCommand)(new Q({id:"insertBestCompletion",precondition:v.ContextKeyExpr.and(u.EditorContextKeys.textInputFocus,v.ContextKeyExpr.equals("config.editor.tabCompletion","on"),d.WordContextKey.AtEnd,S.Context.Visible.toNegated(),D.SuggestAlternatives.OtherSuggestions.toNegated(),l.SnippetController2.InSnippetMode.toNegated()),handler:(X,G)=>{X.triggerSuggestAndAcceptBest((0,n.isObject)(G)?{fallback:"tab",...G}:{fallback:"tab"})},kbOpts:{weight:Y,primary:2}})),(0,t.registerEditorCommand)(new Q({id:"insertNextSuggestion",precondition:v.ContextKeyExpr.and(u.EditorContextKeys.textInputFocus,v.ContextKeyExpr.equals("config.editor.tabCompletion","on"),D.SuggestAlternatives.OtherSuggestions,S.Context.Visible.toNegated(),l.SnippetController2.InSnippetMode.toNegated()),handler:X=>X.acceptNextSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:2}})),(0,t.registerEditorCommand)(new Q({id:"insertPrevSuggestion",precondition:v.ContextKeyExpr.and(u.EditorContextKeys.textInputFocus,v.ContextKeyExpr.equals("config.editor.tabCompletion","on"),D.SuggestAlternatives.OtherSuggestions,S.Context.Visible.toNegated(),l.SnippetController2.InSnippetMode.toNegated()),handler:X=>X.acceptPrevSuggestion(),kbOpts:{weight:Y,kbExpr:u.EditorContextKeys.textInputFocus,primary:1026}})),(0,t.registerEditorAction)(class extends t.EditorAction{constructor(){super({id:"editor.action.resetSuggestSize",label:m.localize(387,"Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(X,G){H.get(G)?.resetWidgetSize()}})}),define(oe[852],re([1,0,13,67,6,2,9,4,103,28,257,134,431,292]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestItemInfo=e.SuggestWidgetAdaptor=void 0;class i extends L.Disposable{get selectedItem(){return this._currentSuggestItemInfo}constructor(l,a,r){super(),this.editor=l,this.suggestControllerPreselector=a,this.onWillAccept=r,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._onDidSelectedItemChange=this._register(new E.Emitter),this.onDidSelectedItemChange=this._onDidSelectedItemChange.event,this._register(l.onKeyDown(m=>{m.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))})),this._register(l.onKeyUp(m=>{m.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))}));const d=t.SuggestController.get(this.editor);if(d){this._register(d.registerSelector({priority:100,select:(v,C,w)=>{const S=this.editor.getModel();if(!S)return-1;const D=this.suggestControllerPreselector(),I=D?(0,p.singleTextRemoveCommonPrefix)(D,S):void 0;if(!I)return-1;const T=y.Position.lift(C),M=w.map((R,N)=>{const O=o.fromSuggestion(d,S,T,R,this.isShiftKeyPressed),x=(0,p.singleTextRemoveCommonPrefix)(O.toSingleTextEdit(),S),F=(0,p.singleTextEditAugments)(I,x);return{index:N,valid:F,prefixLength:x.text.length,suggestItem:R}}).filter(R=>R&&R.valid&&R.prefixLength>0),A=(0,k.findFirstMax)(M,(0,c.compareBy)(R=>R.prefixLength,c.numberComparator));return A?A.index:-1}}));let m=!1;const h=()=>{m||(m=!0,this._register(d.widget.value.onDidShow(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})),this._register(d.widget.value.onDidHide(()=>{this.isSuggestWidgetVisible=!1,this.update(!1)})),this._register(d.widget.value.onDidFocus(()=>{this.isSuggestWidgetVisible=!0,this.update(!0)})))};this._register(E.Event.once(d.model.onDidTrigger)(v=>{h()})),this._register(d.onWillInsertSuggestItem(v=>{const C=this.editor.getPosition(),w=this.editor.getModel();if(!C||!w)return;const S=o.fromSuggestion(d,w,C,v.item,this.isShiftKeyPressed);this.onWillAccept(S)}))}this.update(this._isActive)}update(l){const a=this.getSuggestItemInfo();(this._isActive!==l||!g(this._currentSuggestItemInfo,a))&&(this._isActive=l,this._currentSuggestItemInfo=a,this._onDidSelectedItemChange.fire())}getSuggestItemInfo(){const l=t.SuggestController.get(this.editor);if(!l||!this.isSuggestWidgetVisible)return;const a=l.widget.value.getFocusedItem(),r=this.editor.getPosition(),d=this.editor.getModel();if(!(!a||!r||!d))return o.fromSuggestion(l,d,r,a.item,this.isShiftKeyPressed)}stopForceRenderingAbove(){t.SuggestController.get(this.editor)?.stopForceRenderingAbove()}forceRenderingAbove(){t.SuggestController.get(this.editor)?.forceRenderingAbove()}}e.SuggestWidgetAdaptor=i;class o{static fromSuggestion(l,a,r,d,m){let{insertText:h}=d.completion,v=!1;if(d.completion.insertTextRules&4){const w=new n.SnippetParser().parse(h);w.children.length<100&&s.SnippetSession.adjustWhitespace(a,r,!0,w),h=w.toString(),v=!0}const C=l.getOverwriteInfo(d,m);return new o(f.Range.fromPositions(r.delta(0,-C.overwriteBefore),r.delta(0,Math.max(C.overwriteAfter,0))),h,d.completion.kind,v)}constructor(l,a,r,d){this.range=l,this.insertText=a,this.completionItemKind=r,this.isSnippetText=d}equals(l){return this.range.equalsRange(l.range)&&this.insertText===l.insertText&&this.completionItemKind===l.completionItemKind&&this.isSnippetText===l.isSnippetText}toSelectedSuggestionInfo(){return new b.SelectedSuggestionInfo(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new _.SingleTextEdit(this.range,this.insertText)}}e.SuggestItemInfo=o;function g(u,l){return u===l?!0:!u||!l?!1:u.equals(l)}}),define(oe[293],re([1,0,457,48,14,18,2,21,65,189,19,212,113,9,79,17,256,673,267,282,851,852,3,60,136,24,27,12,7,31]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I){"use strict";var T;Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionsController=void 0;let M=class extends y.Disposable{static{T=this}static{this.ID="editor.contrib.inlineCompletionsController"}static get(N){return N.getContribution(T.ID)}constructor(N,O,x,F,W,z,q,H,K,U){super(),this.editor=N,this._instantiationService=O,this._contextKeyService=x,this._configurationService=F,this._commandService=W,this._debounceService=z,this._languageFeaturesService=q,this._accessibilitySignalService=H,this._keybindingService=K,this._accessibilityService=U,this._editorObs=(0,s.observableCodeEditor)(this.editor),this._positions=(0,f.derived)(this,Q=>this._editorObs.selections.read(Q)?.map(X=>X.getEndPosition())??[new t.Position(1,1)]),this._suggestWidgetAdaptor=this._register(new d.SuggestWidgetAdaptor(this.editor,()=>(this._editorObs.forceUpdate(),this.model.get()?.selectedInlineCompletion.get()?.toSingleTextEdit(void 0)),Q=>this._editorObs.forceUpdate(X=>{this.model.get()?.handleSuggestAccepted(Q)}))),this._suggestWidgetSelectedItem=(0,f.observableFromEvent)(this,Q=>this._suggestWidgetAdaptor.onDidSelectedItemChange(()=>{this._editorObs.forceUpdate(X=>Q(void 0))}),()=>this._suggestWidgetAdaptor.selectedItem),this._enabledInConfig=(0,f.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).enabled),this._isScreenReaderEnabled=(0,f.observableFromEvent)(this,this._accessibilityService.onDidChangeScreenReaderOptimized,()=>this._accessibilityService.isScreenReaderOptimized()),this._editorDictationInProgress=(0,f.observableFromEvent)(this,this._contextKeyService.onDidChangeContext,()=>this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress")===!0),this._enabled=(0,f.derived)(this,Q=>this._enabledInConfig.read(Q)&&(!this._isScreenReaderEnabled.read(Q)||!this._editorDictationInProgress.read(Q))),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this.model=(0,_.derivedDisposable)(this,Q=>{if(this._editorObs.isReadonly.read(Q))return;const X=this._editorObs.model.read(Q);return X?this._instantiationService.createInstance(r.InlineCompletionsModel,X,this._suggestWidgetSelectedItem,this._editorObs.versionId,this._positions,this._debounceValue,(0,f.observableFromEvent)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).preview),(0,f.observableFromEvent)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(119).previewMode),(0,f.observableFromEvent)(this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).mode),this._enabled):void 0}).recomputeInitiallyAndOnChange(this._store),this._ghostTexts=(0,f.derived)(this,Q=>this.model.read(Q)?.ghostTexts.read(Q)??[]),this._stablizedGhostTexts=A(this._ghostTexts,this._store),this._ghostTextWidgets=(0,b.mapObservableArrayCached)(this,this._stablizedGhostTexts,(Q,X)=>X.add(this._instantiationService.createInstance(u.GhostTextWidget,this.editor,{ghostText:Q,minReservedLineCount:(0,f.constObservable)(0),targetTextModel:this.model.map(G=>G?.textModel)}))).recomputeInitiallyAndOnChange(this._store),this._playAccessibilitySignal=(0,f.observableSignal)(this),this._fontFamily=(0,f.observableFromEvent)(this,this.editor.onDidChangeConfiguration,()=>this.editor.getOption(62).fontFamily),this._register(new l.InlineCompletionContextKeys(this._contextKeyService,this.model)),this._register((0,s.reactToChange)(this._editorObs.onDidType,(Q,X)=>{this._enabled.get()&&this.model.get()?.trigger()})),this._register(this._commandService.onDidExecuteCommand(Q=>{new Set([n.CoreEditingCommands.Tab.id,n.CoreEditingCommands.DeleteLeft.id,n.CoreEditingCommands.DeleteRight.id,g.inlineSuggestCommitId,"acceptSelectedSuggestion"]).has(Q.commandId)&&N.hasTextFocus()&&this._enabled.get()&&this._editorObs.forceUpdate(G=>{this.model.get()?.trigger(G)})})),this._register((0,s.reactToChange)(this._editorObs.selections,(Q,X)=>{X.some(G=>G.reason===3||G.source==="api")&&this.model.get()?.stop()})),this._register(this.editor.onDidBlurEditorWidget(()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||N.getOption(62).keepOnBlur||a.InlineSuggestionHintsContentWidget.dropDownVisible||(0,f.transaction)(Q=>{this.model.get()?.stop(Q)})})),this._register((0,f.autorun)(Q=>{const X=this.model.read(Q)?.state.read(Q);X?.suggestItem?X.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()})),this._register((0,y.toDisposable)(()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()}));const Y=(0,b.derivedObservableWithCache)(this,(Q,X)=>{const P=this.model.read(Q)?.state.read(Q);return this._suggestWidgetSelectedItem.get()?X:P?.inlineCompletion?.semanticId});this._register((0,s.reactToChangeWithStore)((0,f.derived)(Q=>(this._playAccessibilitySignal.read(Q),Y.read(Q),{})),async(Q,X,G)=>{const P=this.model.get(),te=P?.state.get();if(!te||!P)return;const se=P.textModel.getLineContent(te.primaryGhostText.lineNumber);await(0,E.timeout)(50,(0,L.cancelOnDispose)(G)),await(0,f.waitForState)(this._suggestWidgetSelectedItem,p.isUndefined,()=>!1,(0,L.cancelOnDispose)(G)),await this._accessibilitySignalService.playSignal(v.AccessibilitySignal.inlineSuggestion),this.editor.getOption(8)&&this._provideScreenReaderUpdate(te.primaryGhostText.renderForScreenReader(se))})),this._register(new a.InlineCompletionsHintsWidget(this.editor,this.model,this._instantiationService)),this._register((0,c.createStyleSheetFromObservable)((0,f.derived)(Q=>{const X=this._fontFamily.read(Q);return X===""||X==="default"?"":`
.monaco-editor .ghost-text-decoration,
.monaco-editor .ghost-text-decoration-preview,
.monaco-editor .ghost-text {
	font-family: ${X};
}`}))),this._register(this._configurationService.onDidChangeConfiguration(Q=>{Q.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})})),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(N){this._playAccessibilitySignal.trigger(N)}_provideScreenReaderUpdate(N){const O=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),x=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let F;!O&&x&&this.editor.getOption(150)&&(F=(0,m.localize)(614,"Inspect this in the accessible view ({0})",x.getAriaLabel())),(0,k.alert)(F?N+", "+F:N)}shouldShowHoverAt(N){const O=this.model.get()?.primaryGhostText.get();return O?O.parts.some(x=>N.containsPosition(new t.Position(O.lineNumber,x.column))):!1}shouldShowHoverAtViewZone(N){return this._ghostTextWidgets.get()[0]?.ownsViewZone(N)??!1}};e.InlineCompletionsController=M,e.InlineCompletionsController=M=T=De([he(1,D.IInstantiationService),he(2,S.IContextKeyService),he(3,w.IConfigurationService),he(4,C.ICommandService),he(5,i.ILanguageFeatureDebounceService),he(6,o.ILanguageFeaturesService),he(7,v.IAccessibilitySignalService),he(8,I.IKeybindingService),he(9,h.IAccessibilityService)],M);function A(R,N){const O=(0,f.observableValue)("result",[]),x=[];return N.add((0,f.autorun)(F=>{const W=R.read(F);(0,f.transaction)(z=>{if(W.length!==x.length){x.length=W.length;for(let q=0;q<x.length;q++)x[q]||(x[q]=(0,f.observableValue)("item",W[q]));O.set([...x],z)}x.forEach((q,H)=>q.set(W[H],z))})})),O}}),define(oe[853],re([1,0,21,91,15,20,256,267,293,153,3,29,27,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleAlwaysShowInlineSuggestionToolbar=e.HideInlineCompletion=e.AcceptInlineCompletion=e.AcceptNextLineOfInlineCompletion=e.AcceptNextWordOfInlineCompletion=e.TriggerInlineSuggestionAction=e.ShowPreviousInlineSuggestionAction=e.ShowNextInlineSuggestionAction=void 0;class i extends E.EditorAction{static{this.ID=y.showNextInlineSuggestionActionId}constructor(){super({id:i.ID,label:p.localize(620,"Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:t.ContextKeyExpr.and(L.EditorContextKeys.writable,f.InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(h,v){_.InlineCompletionsController.get(v)?.model.get()?.next()}}e.ShowNextInlineSuggestionAction=i;class o extends E.EditorAction{static{this.ID=y.showPreviousInlineSuggestionActionId}constructor(){super({id:o.ID,label:p.localize(621,"Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:t.ContextKeyExpr.and(L.EditorContextKeys.writable,f.InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(h,v){_.InlineCompletionsController.get(v)?.model.get()?.previous()}}e.ShowPreviousInlineSuggestionAction=o;class g extends E.EditorAction{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:p.localize(622,"Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:L.EditorContextKeys.writable})}async run(h,v){const C=_.InlineCompletionsController.get(v);await(0,k.asyncTransaction)(async w=>{await C?.model.get()?.triggerExplicitly(w),C?.playAccessibilitySignal(w)})}}e.TriggerInlineSuggestionAction=g;class u extends E.EditorAction{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:p.localize(623,"Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:t.ContextKeyExpr.and(L.EditorContextKeys.writable,f.InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:t.ContextKeyExpr.and(L.EditorContextKeys.writable,f.InlineCompletionContextKeys.inlineSuggestionVisible)},menuOpts:[{menuId:n.MenuId.InlineSuggestionToolbar,title:p.localize(624,"Accept Word"),group:"primary",order:2}]})}async run(h,v){const C=_.InlineCompletionsController.get(v);await C?.model.get()?.acceptNextWord(C.editor)}}e.AcceptNextWordOfInlineCompletion=u;class l extends E.EditorAction{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:p.localize(625,"Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:t.ContextKeyExpr.and(L.EditorContextKeys.writable,f.InlineCompletionContextKeys.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:n.MenuId.InlineSuggestionToolbar,title:p.localize(626,"Accept Line"),group:"secondary",order:2}]})}async run(h,v){const C=_.InlineCompletionsController.get(v);await C?.model.get()?.acceptNextLine(C.editor)}}e.AcceptNextLineOfInlineCompletion=l;class a extends E.EditorAction{constructor(){super({id:y.inlineSuggestCommitId,label:p.localize(627,"Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:f.InlineCompletionContextKeys.inlineSuggestionVisible,menuOpts:[{menuId:n.MenuId.InlineSuggestionToolbar,title:p.localize(628,"Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:t.ContextKeyExpr.and(f.InlineCompletionContextKeys.inlineSuggestionVisible,L.EditorContextKeys.tabMovesFocus.toNegated(),f.InlineCompletionContextKeys.inlineSuggestionHasIndentationLessThanTabSize,b.Context.Visible.toNegated(),L.EditorContextKeys.hoverFocused.toNegated())}})}async run(h,v){const C=_.InlineCompletionsController.get(v);C&&(C.model.get()?.accept(C.editor),C.editor.focus())}}e.AcceptInlineCompletion=a;class r extends E.EditorAction{static{this.ID="editor.action.inlineSuggest.hide"}constructor(){super({id:r.ID,label:p.localize(629,"Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:f.InlineCompletionContextKeys.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(h,v){const C=_.InlineCompletionsController.get(v);(0,c.transaction)(w=>{C?.model.get()?.stop(w)})}}e.HideInlineCompletion=r;class d extends n.Action2{static{this.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar"}constructor(){super({id:d.ID,title:p.localize(630,"Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:n.MenuId.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:t.ContextKeyExpr.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(h,v){const C=h.get(s.IConfigurationService),S=C.getValue("editor.inlineSuggest.showToolbar")==="always"?"onHover":"always";C.updateValue("editor.inlineSuggest.showToolbar",S)}}e.ToggleAlwaysShowInlineSuggestionToolbar=d}),define(oe[854],re([1,0,5,55,2,21,4,42,86,293,282,120,3,60,7,62,66]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineCompletionsHoverParticipant=e.InlineCompletionsHover=void 0;class u{constructor(r,d,m){this.owner=r,this.range=d,this.controller=m}isValidForHoverAnchor(r){return r.type===1&&this.range.startColumn<=r.range.startColumn&&this.range.endColumn>=r.range.endColumn}}e.InlineCompletionsHover=u;let l=class{constructor(r,d,m,h,v,C){this._editor=r,this._languageService=d,this._openerService=m,this.accessibilityService=h,this._instantiationService=v,this._telemetryService=C,this.hoverOrdinal=4}suggestHoverAnchor(r){const d=b.InlineCompletionsController.get(this._editor);if(!d)return null;const m=r.target;if(m.type===8){const h=m.detail;if(d.shouldShowHoverAtViewZone(h.viewZoneId))return new _.HoverForeignElementAnchor(1e3,this,y.Range.fromPositions(this._editor.getModel().validatePosition(h.positionBefore||h.position)),r.event.posx,r.event.posy,!1)}return m.type===7&&d.shouldShowHoverAt(m.range)?new _.HoverForeignElementAnchor(1e3,this,m.range,r.event.posx,r.event.posy,!1):m.type===6&&m.detail.mightBeForeignElement&&d.shouldShowHoverAt(m.range)?new _.HoverForeignElementAnchor(1e3,this,m.range,r.event.posx,r.event.posy,!1):null}computeSync(r,d){if(this._editor.getOption(62).showToolbar!=="onHover")return[];const m=b.InlineCompletionsController.get(this._editor);return m&&m.shouldShowHoverAt(r.range)?[new u(this,r.range,m)]:[]}renderHoverParts(r,d){const m=new E.DisposableStore,h=d[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&m.add(this.renderScreenReaderText(r,h));const v=h.controller.model.get(),C=this._instantiationService.createInstance(p.InlineSuggestionHintsContentWidget,this._editor,!1,(0,L.constObservable)(null),v.selectedInlineCompletionIndex,v.inlineCompletionsCount,v.activeCommands),w=C.getDomNode();r.fragment.appendChild(w),v.triggerExplicitly(),m.add(C);const S={hoverPart:h,hoverElement:w,dispose(){m.dispose()}};return new _.RenderedHoverParts([S])}renderScreenReaderText(r,d){const m=new E.DisposableStore,h=c.$,v=h("div.hover-row.markdown-hover"),C=c.append(v,h("div.hover-contents",{"aria-live":"assertive"})),w=m.add(new n.MarkdownRenderer({editor:this._editor},this._languageService,this._openerService)),S=D=>{m.add(w.onDidRenderAsync(()=>{C.className="hover-contents code-hover-contents",r.onContentsChanged()}));const I=s.localize(619,"Suggestion:"),T=m.add(w.render(new k.MarkdownString().appendText(I).appendCodeblock("text",D)));C.replaceChildren(T.element)};return m.add((0,L.autorun)(D=>{const I=d.controller.model.read(D)?.primaryGhostText.read(D);if(I){const T=this._editor.getModel().getLineContent(I.lineNumber);S(I.renderForScreenReader(T))}else c.reset(C)})),r.fragment.appendChild(v),m}};e.InlineCompletionsHoverParticipant=l,e.InlineCompletionsHoverParticipant=l=De([he(1,f.ILanguageService),he(2,o.IOpenerService),he(3,t.IAccessibilityService),he(4,i.IInstantiationService),he(5,g.ITelemetryService)],l)}),define(oe[855],re([1,0,15,86,853,854,641,293,376,29]),function(ae,e,c,k,E,L,y,f,_,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(f.InlineCompletionsController.ID,f.InlineCompletionsController,3),(0,c.registerEditorAction)(E.TriggerInlineSuggestionAction),(0,c.registerEditorAction)(E.ShowNextInlineSuggestionAction),(0,c.registerEditorAction)(E.ShowPreviousInlineSuggestionAction),(0,c.registerEditorAction)(E.AcceptNextWordOfInlineCompletion),(0,c.registerEditorAction)(E.AcceptNextLineOfInlineCompletion),(0,c.registerEditorAction)(E.AcceptInlineCompletion),(0,c.registerEditorAction)(E.HideInlineCompletion),(0,b.registerAction2)(E.ToggleAlwaysShowInlineSuggestionToolbar),k.HoverParticipantRegistry.register(L.InlineCompletionsHoverParticipant),_.AccessibleViewRegistry.register(new y.InlineCompletionsAccessibleView)}),define(oe[433],re([1,0,5,299,2,21,65,15,113,125,138,85,70,36,429,356,292,7,530]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditsWidget=e.InlineEdit=void 0;class l{constructor(C,w,S){this.range=C,this.newLines=w,this.changes=S}}e.InlineEdit=l;let a=class extends E.Disposable{constructor(C,w,S,D){super(),this._editor=C,this._edit=w,this._userPrompt=S,this._instantiationService=D,this._editorObs=(0,_.observableCodeEditor)(this._editor),this._elements=(0,c.h)("div.inline-edits-widget",{style:{position:"absolute",overflow:"visible",top:"0px",left:"0px"}},[(0,c.h)("div@editorContainer",{style:{position:"absolute",top:"0px",left:"0px",width:"500px",height:"500px"}},[(0,c.h)("div.toolbar@toolbar",{style:{position:"absolute",top:"-25px",left:"0px"}}),(0,c.h)("div.promptEditor@promptEditor",{style:{position:"absolute",top:"-25px",left:"80px",width:"300px",height:"22px"}}),(0,c.h)("div.preview@editor",{style:{position:"absolute",top:"0px",left:"0px"}})]),(0,c.svgElem)("svg",{style:{overflow:"visible",pointerEvents:"none"}},[(0,c.svgElem)("defs",[(0,c.svgElem)("linearGradient",{id:"Gradient2",x1:"0",y1:"0",x2:"1",y2:"0"},[(0,c.svgElem)("stop",{offset:"0%",class:"gradient-stop"}),(0,c.svgElem)("stop",{offset:"100%",class:"gradient-stop"})])]),(0,c.svgElem)("path@path",{d:"",fill:"url(#Gradient2)"})])]),this._previewTextModel=this._register(this._instantiationService.createInstance(t.TextModel,"",s.PLAINTEXT_LANGUAGE_ID,t.TextModel.DEFAULT_CREATION_OPTIONS,null)),this._setText=(0,L.derived)(T=>{const M=this._edit.read(T);M&&this._previewTextModel.setValue(M.newLines.join(`
`))}).recomputeInitiallyAndOnChange(this._store),this._promptTextModel=this._register(this._instantiationService.createInstance(t.TextModel,"",s.PLAINTEXT_LANGUAGE_ID,t.TextModel.DEFAULT_CREATION_OPTIONS,null)),this._promptEditor=this._register(this._instantiationService.createInstance(b.EmbeddedCodeEditorWidget,this._elements.promptEditor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0,placeholder:"Describe the change you want...",fontFamily:k.DEFAULT_FONT_FAMILY},{contributions:f.EditorExtensionsRegistry.getSomeEditorContributions([g.SuggestController.ID,o.PlaceholderTextContribution.ID,i.ContextMenuController.ID]),isSimpleWidget:!0},this._editor)),this._previewEditor=this._register(this._instantiationService.createInstance(b.EmbeddedCodeEditorWidget,this._elements.editor,{glyphMargin:!1,lineNumbers:"off",minimap:{enabled:!1},guides:{indentation:!1,bracketPairs:!1,bracketPairsHorizontal:!1,highlightActiveIndentation:!1},folding:!1,selectOnLineNumbers:!1,selectionHighlight:!1,columnSelection:!1,overviewRulerBorder:!1,overviewRulerLanes:0,lineDecorationsWidth:0,lineNumbersMinChars:0},{contributions:[]},this._editor)),this._previewEditorObs=(0,_.observableCodeEditor)(this._previewEditor),this._decorations=(0,L.derived)(this,T=>{this._setText.read(T);const M=this._edit.read(T)?.changes;if(!M)return[];const A=[],R=[];if(M.length===1&&M[0].innerChanges[0].modifiedRange.equalsRange(this._previewTextModel.getFullModelRange()))return[];for(const N of M)if(N.original.isEmpty||A.push({range:N.original.toInclusiveRange(),options:p.diffLineDeleteDecorationBackgroundWithIndicator}),N.modified.isEmpty||R.push({range:N.modified.toInclusiveRange(),options:p.diffLineAddDecorationBackgroundWithIndicator}),N.modified.isEmpty||N.original.isEmpty)N.original.isEmpty||A.push({range:N.original.toInclusiveRange(),options:p.diffWholeLineDeleteDecoration}),N.modified.isEmpty||R.push({range:N.modified.toInclusiveRange(),options:p.diffWholeLineAddDecoration});else for(const O of N.innerChanges||[])N.original.contains(O.originalRange.startLineNumber)&&A.push({range:O.originalRange,options:O.originalRange.isEmpty()?p.diffDeleteDecorationEmpty:p.diffDeleteDecoration}),N.modified.contains(O.modifiedRange.startLineNumber)&&R.push({range:O.modifiedRange,options:O.modifiedRange.isEmpty()?p.diffAddDecorationEmpty:p.diffAddDecoration});return R}),this._layout1=(0,L.derived)(this,T=>{const M=this._editor.getModel(),A=this._edit.read(T);if(!A)return null;const R=A.range;let N=0;for(let F=R.startLineNumber;F<R.endLineNumberExclusive;F++){const W=M.getLineMaxColumn(F),z=this._editor.getOffsetForColumn(F,W);N=Math.max(N,z)}return{left:this._editor.getLayoutInfo().contentLeft+N}}),this._layout=(0,L.derived)(this,T=>{const M=this._edit.read(T);if(!M)return null;const A=M.range,R=this._editorObs.scrollLeft.read(T),N=this._layout1.read(T).left+20-R,O=this._editor.getTopForLineNumber(A.startLineNumber)-this._editorObs.scrollTop.read(T),x=this._editor.getTopForLineNumber(A.endLineNumberExclusive)-this._editorObs.scrollTop.read(T),F=new d(N,O),W=new d(N,x),z=x-O,q=50,H=this._editor.getOption(67)*M.newLines.length,K=z-H,U=new d(N+q,O+K/2),Y=new d(N+q,x-K/2);return{topCode:F,bottomCode:W,codeHeight:z,topEdit:U,bottomEdit:Y,editHeight:H}});const I=(0,L.derived)(this,T=>this._edit.read(T)!==void 0||this._userPrompt.read(T)!==void 0);this._register((0,n.applyStyle)(this._elements.root,{display:(0,L.derived)(this,T=>I.read(T)?"block":"none")})),this._register((0,n.appendRemoveOnDispose)(this._editor.getDomNode(),this._elements.root)),this._register((0,_.observableCodeEditor)(C).createOverlayWidget({domNode:this._elements.root,position:(0,L.constObservable)(null),allowEditorOverflow:!1,minContentWidthInPx:(0,L.derived)(T=>{const M=this._layout1.read(T)?.left;if(M===void 0)return 0;const A=this._previewEditorObs.contentWidth.read(T);return M+A})})),this._previewEditor.setModel(this._previewTextModel),this._register(this._previewEditorObs.setDecorations(this._decorations)),this._register((0,L.autorun)(T=>{const M=this._layout.read(T);if(!M)return;const{topCode:A,bottomCode:R,topEdit:N,bottomEdit:O,editHeight:x}=M,F=10,W=0,z=40,q=new m().moveTo(A).lineTo(A.deltaX(F)).curveTo(A.deltaX(F+z),N.deltaX(-z-W),N.deltaX(-W)).lineTo(N).lineTo(O).lineTo(O.deltaX(-W)).curveTo(O.deltaX(-z-W),R.deltaX(F+z),R.deltaX(F)).lineTo(R).build();this._elements.path.setAttribute("d",q),this._elements.editorContainer.style.top=`${N.y}px`,this._elements.editorContainer.style.left=`${N.x}px`,this._elements.editorContainer.style.height=`${x}px`;const H=this._previewEditorObs.contentWidth.read(T);this._previewEditor.layout({height:x,width:H})})),this._promptEditor.setModel(this._promptTextModel),this._promptEditor.layout(),this._register(h(r(this._userPrompt,T=>T??"",T=>T),(0,_.observableCodeEditor)(this._promptEditor).value)),this._register((0,L.autorun)(T=>{const M=(0,_.observableCodeEditor)(this._promptEditor).isFocused.read(T);this._elements.root.classList.toggle("focused",M)}))}};e.InlineEditsWidget=a,e.InlineEditsWidget=a=De([he(3,u.IInstantiationService)],a);function r(v,C,w){return(0,y.derivedWithSetter)(void 0,S=>C(v.read(S)),(S,D)=>v.set(w(S),D))}class d{constructor(C,w){this.x=C,this.y=w}deltaX(C){return new d(this.x+C,this.y)}}class m{constructor(){this._data=""}moveTo(C){return this._data+=`M ${C.x} ${C.y} `,this}lineTo(C){return this._data+=`L ${C.x} ${C.y} `,this}curveTo(C,w,S){return this._data+=`C ${C.x} ${C.y} ${w.x} ${w.y} ${S.x} ${S.y} `,this}build(){return this._data}}function h(v,C){const w=new E.DisposableStore;return w.add((0,L.autorun)(S=>{const D=v.read(S);C.set(D,void 0)})),w.add((0,L.autorun)(S=>{const D=C.read(S);v.set(D,void 0)})),w}}),define(oe[856],re([1,0,14,18,101,8,2,21,65,22,213,56,28,17,44,359,433]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditsModel=void 0;let l=class extends y.Disposable{static{u=this}static{this._modelId=0}static _createUniqueUri(){return b.URI.from({scheme:"inline-edits",path:new Date().toString()+String(u._modelId++)})}constructor(m,h,v,C,w,S,D){super(),this.textModel=m,this._textModelVersionId=h,this._selection=v,this._debounceValue=C,this.languageFeaturesService=w,this._diffProviderFactoryService=S,this._modelService=D,this._forceUpdateExplicitlySignal=(0,f.observableSignal)(this),this._selectedInlineCompletionId=(0,f.observableValue)(this,void 0),this._isActive=(0,f.observableValue)(this,!1),this._originalModel=(0,_.derivedDisposable)(()=>this._modelService.createModel("",null,u._createUniqueUri())).keepObserved(this._store),this._modifiedModel=(0,_.derivedDisposable)(()=>this._modelService.createModel("",null,u._createUniqueUri())).keepObserved(this._store),this._pinnedRange=new r(this.textModel,this._textModelVersionId),this.isPinned=this._pinnedRange.range.map(I=>!!I),this.userPrompt=(0,f.observableValue)(this,void 0),this.inlineEdit=(0,f.derived)(this,I=>this._inlineEdit.read(I)?.promiseResult.read(I)?.data),this._inlineEdit=(0,f.derived)(this,I=>{const T=this.selectedInlineEdit.read(I);if(!T)return;const M=T.inlineCompletion.range;if(T.inlineCompletion.insertText.trim()==="")return;let A=T.inlineCompletion.insertText.split(/\r\n|\r|\n/);function R(F){const W=F[0].match(/^\s*/)?.[0]??"";return F.map(z=>z.replace(new RegExp("^"+W),""))}A=R(A);let O=this.textModel.getValueInRange(M).split(/\r\n|\r|\n/);O=R(O),this._originalModel.get().setValue(O.join(`
`)),this._modifiedModel.get().setValue(A.join(`
`));const x=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:"advanced"});return f.ObservablePromise.fromFn(async()=>{const F=await x.computeDiff(this._originalModel.get(),this._modifiedModel.get(),{computeMoves:!1,ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3},k.CancellationToken.None);if(!F.identical)return new g.InlineEdit(n.LineRange.fromRangeInclusive(M),R(A),F.changes)})}),this._fetchStore=this._register(new y.DisposableStore),this._inlineEditsFetchResult=(0,f.disposableObservableValue)(this,void 0),this._inlineEdits=(0,f.derivedOpts)({owner:this,equalsFn:E.structuralEquals},I=>this._inlineEditsFetchResult.read(I)?.completions.map(T=>new a(T))??[]),this._fetchInlineEditsPromise=(0,f.derivedHandleChanges)({owner:this,createEmptyChangeSummary:()=>({inlineCompletionTriggerKind:s.InlineCompletionTriggerKind.Automatic}),handleChange:(I,T)=>(I.didChange(this._forceUpdateExplicitlySignal)&&(T.inlineCompletionTriggerKind=s.InlineCompletionTriggerKind.Explicit),!0)},async(I,T)=>{this._fetchStore.clear(),this._forceUpdateExplicitlySignal.read(I),this._textModelVersionId.read(I);function M(x,F){return F(x)}const A=this._pinnedRange.range.read(I)??M(this._selection.read(I),x=>x.isEmpty()?void 0:x);if(!A){this._inlineEditsFetchResult.set(void 0,void 0),this.userPrompt.set(void 0,void 0);return}const R={triggerKind:T.inlineCompletionTriggerKind,selectedSuggestionInfo:void 0,userPrompt:this.userPrompt.read(I)},N=(0,k.cancelOnDispose)(this._fetchStore);await(0,c.timeout)(200,N);const O=await(0,o.provideInlineCompletions)(this.languageFeaturesService.inlineCompletionsProvider,A,this.textModel,R,N);N.isCancellationRequested||this._inlineEditsFetchResult.set(O,void 0)}),this._filteredInlineEditItems=(0,f.derivedOpts)({owner:this,equalsFn:(0,E.itemsEquals)()},I=>this._inlineEdits.read(I)),this.selectedInlineCompletionIndex=(0,f.derived)(this,I=>{const T=this._selectedInlineCompletionId.read(I),M=this._filteredInlineEditItems.read(I),A=this._selectedInlineCompletionId===void 0?-1:M.findIndex(R=>R.semanticId===T);return A===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):A}),this.selectedInlineEdit=(0,f.derived)(this,I=>{const T=this._filteredInlineEditItems.read(I),M=this.selectedInlineCompletionIndex.read(I);return T[M]}),this._register((0,f.recomputeInitiallyAndOnChange)(this._fetchInlineEditsPromise))}async triggerExplicitly(m){(0,f.subtransaction)(m,h=>{this._isActive.set(!0,h),this._forceUpdateExplicitlySignal.trigger(h)}),await this._fetchInlineEditsPromise.get()}stop(m){(0,f.subtransaction)(m,h=>{this.userPrompt.set(void 0,h),this._isActive.set(!1,h),this._inlineEditsFetchResult.set(void 0,h),this._pinnedRange.setRange(void 0,h)})}async _deltaSelectedInlineCompletionIndex(m){await this.triggerExplicitly();const h=this._filteredInlineEditItems.get()||[];if(h.length>0){const v=(this.selectedInlineCompletionIndex.get()+m+h.length)%h.length;this._selectedInlineCompletionId.set(h[v].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(m){if(m.getModel()!==this.textModel)throw new L.BugIndicatingError;const h=this.selectedInlineEdit.get();h&&(m.pushUndoStop(),m.executeEdits("inlineSuggestion.accept",[h.inlineCompletion.toSingleTextEdit().toSingleEditOperation()]),this.stop())}};e.InlineEditsModel=l,e.InlineEditsModel=l=u=De([he(4,t.ILanguageFeaturesService),he(5,p.IDiffProviderFactoryService),he(6,i.IModelService)],l);class a{constructor(m){this.inlineCompletion=m,this.semanticId=this.inlineCompletion.hash()}}class r extends y.Disposable{constructor(m,h){super(),this._textModel=m,this._versionId=h,this._decorations=(0,f.observableValue)(this,[]),this.range=(0,f.derived)(this,v=>{this._versionId.read(v);const C=this._decorations.read(v)[0];return C?this._textModel.getDecorationRange(C)??null:null}),this._register((0,y.toDisposable)(()=>{this._textModel.deltaDecorations(this._decorations.get(),[])}))}setRange(m,h){this._decorations.set(this._textModel.deltaDecorations(this._decorations.get(),m?[{range:m,options:{description:"trackedRange"}}]:[]),h)}}}),define(oe[434],re([1,0,2,21,65,113,161,23,79,17,383,856,433,27,12,7,391]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g){"use strict";var u;Object.defineProperty(e,"__esModule",{value:!0}),e.InlineEditsController=void 0;let l=class extends c.Disposable{static{u=this}static{this.ID="editor.contrib.inlineEditsController"}static get(d){return d.getContribution(u.ID)}constructor(d,m,h,v,C,w){super(),this.editor=d,this._instantiationService=m,this._contextKeyService=h,this._debounceService=v,this._languageFeaturesService=C,this._configurationService=w,this._enabled=(0,g.observableConfigValue)("editor.inlineEdits.enabled",!1,this._configurationService),this._editorObs=(0,L.observableCodeEditor)(this.editor),this._selection=(0,k.derived)(this,S=>this._editorObs.cursorSelection.read(S)??new f.Selection(1,1,1,1)),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineEditsDebounce",{min:50,max:50}),this.model=(0,E.derivedDisposable)(this,S=>{if(!this._enabled.read(S)||this._editorObs.isReadonly.read(S))return;const D=this._editorObs.model.read(S);return D?this._instantiationService.createInstance((0,y.readHotReloadableExport)(n.InlineEditsModel,S),D,this._editorObs.versionId,this._selection,this._debounceValue):void 0}),this._hadInlineEdit=(0,k.derivedObservableWithCache)(this,(S,D)=>D||this.model.read(S)?.inlineEdit.read(S)!==void 0),this._widget=(0,E.derivedDisposable)(this,S=>{if(this._hadInlineEdit.read(S))return this._instantiationService.createInstance((0,y.readHotReloadableExport)(s.InlineEditsWidget,S),this.editor,this.model.map((D,I)=>D?.inlineEdit.read(I)),a(D=>this.model.read(D)?.userPrompt??(0,k.observableValue)("empty","")))}),this._register((0,g.bindContextKey)(p.inlineEditVisible,this._contextKeyService,S=>!!this.model.read(S)?.inlineEdit.read(S))),this._register((0,g.bindContextKey)(p.isPinnedContextKey,this._contextKeyService,S=>!!this.model.read(S)?.isPinned.read(S))),this.model.recomputeInitiallyAndOnChange(this._store),this._widget.recomputeInitiallyAndOnChange(this._store)}};e.InlineEditsController=l,e.InlineEditsController=l=u=De([he(1,o.IInstantiationService),he(2,i.IContextKeyService),he(3,_.ILanguageFeatureDebounceService),he(4,b.ILanguageFeaturesService),he(5,t.IConfigurationService)],l);function a(r){return(0,E.derivedWithSetter)(void 0,d=>r(d).read(d),(d,m)=>{r(void 0).set(d,m)})}}),define(oe[857],re([1,0,26,21,91,15,125,20,383,434,3,29,12]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HideInlineEdit=e.AcceptInlineEdit=e.TriggerInlineEditAction=e.ShowPreviousInlineEditAction=e.ShowNextInlineEditAction=void 0;function t(a){return{label:a.value,alias:a.original}}class i extends L.EditorAction{static{this.ID=_.showNextInlineEditActionId}constructor(){super({id:i.ID,...t(p.localize2(604,"Show Next Inline Edit")),precondition:s.ContextKeyExpr.and(f.EditorContextKeys.writable,_.inlineEditVisible),kbOpts:{weight:100,primary:606}})}async run(r,d){b.InlineEditsController.get(d)?.model.get()?.next()}}e.ShowNextInlineEditAction=i;class o extends L.EditorAction{static{this.ID=_.showPreviousInlineEditActionId}constructor(){super({id:o.ID,...t(p.localize2(605,"Show Previous Inline Edit")),precondition:s.ContextKeyExpr.and(f.EditorContextKeys.writable,_.inlineEditVisible),kbOpts:{weight:100,primary:604}})}async run(r,d){b.InlineEditsController.get(d)?.model.get()?.previous()}}e.ShowPreviousInlineEditAction=o;class g extends L.EditorAction{constructor(){super({id:"editor.action.inlineEdits.trigger",...t(p.localize2(606,"Trigger Inline Edit")),precondition:f.EditorContextKeys.writable})}async run(r,d){const m=b.InlineEditsController.get(d);await(0,E.asyncTransaction)(async h=>{await m?.model.get()?.triggerExplicitly(h)})}}e.TriggerInlineEditAction=g;class u extends L.EditorAction{constructor(){super({id:_.inlineEditAcceptId,...t(p.localize2(607,"Accept Inline Edit")),precondition:_.inlineEditVisible,menuOpts:{menuId:n.MenuId.InlineEditsActions,title:p.localize(603,"Accept Inline Edit"),group:"primary",order:1,icon:c.Codicon.check},kbOpts:{primary:2058,weight:2e4,kbExpr:_.inlineEditVisible}})}async run(r,d){d instanceof y.EmbeddedCodeEditorWidget&&(d=d.getParentEditor());const m=b.InlineEditsController.get(d);m&&(m.model.get()?.accept(m.editor),m.editor.focus())}}e.AcceptInlineEdit=u;class l extends L.EditorAction{static{this.ID="editor.action.inlineEdits.hide"}constructor(){super({id:l.ID,...t(p.localize2(608,"Hide Inline Edit")),precondition:_.inlineEditVisible,kbOpts:{weight:100,primary:9}})}async run(r,d){const m=b.InlineEditsController.get(d);(0,k.transaction)(h=>{m?.model.get()?.stop(h)})}}e.HideInlineEdit=l}),define(oe[858],re([1,0,15,857,434]),function(ae,e,c,k,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),(0,c.registerEditorContribution)(E.InlineEditsController.ID,E.InlineEditsController,3),(0,c.registerEditorAction)(k.TriggerInlineEditAction),(0,c.registerEditorAction)(k.ShowNextInlineEditAction),(0,c.registerEditorAction)(k.ShowPreviousInlineEditAction),(0,c.registerEditorAction)(k.AcceptInlineEdit),(0,c.registerEditorAction)(k.HideInlineEdit)}),define(oe[859],re([1,0,18,82,53,2,35,4,146,17,361,153,400,432,362,117]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestInlineCompletions=void 0;class g{constructor(r,d,m,h,v,C){this.range=r,this.insertText=d,this.filterText=m,this.additionalTextEdits=h,this.command=v,this.completion=C}}let u=class extends L.RefCountedDisposable{constructor(r,d,m,h,v,C){super(v.disposable),this.model=r,this.line=d,this.word=m,this.completionModel=h,this._suggestMemoryService=C}canBeReused(r,d,m){return this.model===r&&this.line===d&&this.word.word.length>0&&this.word.startColumn===m.startColumn&&this.word.endColumn<m.endColumn&&this.completionModel.getIncompleteProvider().size===0}get items(){const r=[],{items:d}=this.completionModel,m=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},d),h=E.Iterable.slice(d,m),v=E.Iterable.slice(d,0,m);let C=5;for(const w of E.Iterable.concat(h,v)){if(w.score===k.FuzzyScore.Default)continue;const S=new f.Range(w.editStart.lineNumber,w.editStart.column,w.editInsertEnd.lineNumber,w.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),D=w.completion.insertTextRules&&w.completion.insertTextRules&4?{snippet:w.completion.insertText}:w.completion.insertText;r.push(new g(S,D,w.filterTextLow??w.labelLow,w.completion.additionalTextEdits,w.completion.command,w)),C-->=0&&w.resolve(c.CancellationToken.None)}return r}};u=De([he(5,s.ISuggestMemoryService)],u);let l=class extends L.Disposable{constructor(r,d,m,h){super(),this._languageFeatureService=r,this._clipboardService=d,this._suggestMemoryService=m,this._editorService=h,this._store.add(r.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(r,d,m,h){if(m.selectedSuggestionInfo)return;let v;for(const A of this._editorService.listCodeEditors())if(A.getModel()===r){v=A;break}if(!v)return;const C=v.getOption(90);if(n.QuickSuggestionsOptions.isAllOff(C))return;r.tokenization.tokenizeIfCheap(d.lineNumber);const w=r.tokenization.getLineTokens(d.lineNumber),S=w.getStandardTokenType(w.findTokenIndexAtOffset(Math.max(d.column-1-1,0)));if(n.QuickSuggestionsOptions.valueFor(C,S)!=="inline")return;let D=r.getWordAtPosition(d),I;if(D?.word||(I=this._getTriggerCharacterInfo(r,d)),!D?.word&&!I||(D||(D=r.getWordUntilPosition(d)),D.endColumn!==d.column))return;let T;const M=r.getValueInRange(new f.Range(d.lineNumber,1,d.lineNumber,d.column));if(!I&&this._lastResult?.canBeReused(r,d.lineNumber,D)){const A=new p.LineContext(M,d.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=A,this._lastResult.acquire(),T=this._lastResult}else{const A=await(0,n.provideSuggestionItems)(this._languageFeatureService.completionProvider,r,d,new n.CompletionOptions(void 0,t.SuggestModel.createSuggestFilter(v).itemKind,I?.providers),I&&{triggerKind:1,triggerCharacter:I.ch},h);let R;A.needsClipboard&&(R=await this._clipboardService.readText());const N=new p.CompletionModel(A.items,d.column,new p.LineContext(M,0),i.WordDistance.None,v.getOption(119),v.getOption(113),{boostFullMatch:!1,firstMatchCanBeWeak:!1},R);T=new u(r,d.lineNumber,D,N,A,this._suggestMemoryService)}return this._lastResult=T,T}handleItemDidShow(r,d){d.completion.resolve(c.CancellationToken.None)}freeInlineCompletions(r){r.release()}_getTriggerCharacterInfo(r,d){const m=r.getValueInRange(f.Range.fromPositions({lineNumber:d.lineNumber,column:d.column-1},d)),h=new Set;for(const v of this._languageFeatureService.completionProvider.all(r))v.triggerCharacters?.includes(m)&&h.add(v);if(h.size!==0)return{providers:h,ch:m}}};e.SuggestInlineCompletions=l,e.SuggestInlineCompletions=l=De([he(0,b.ILanguageFeaturesService),he(1,o.IClipboardService),he(2,s.ISuggestMemoryService),he(3,y.ICodeEditorService)],l),(0,_.registerEditorFeature)(l)}),define(oe[435],re([1,0,7]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IWorkspaceTrustManagementService=void 0,e.IWorkspaceTrustManagementService=(0,c.createDecorator)("workspaceTrustManagementService")}),define(oe[860],re([1,0,14,26,55,2,16,11,15,37,36,343,116,42,375,86,215,757,3,27,7,62,63,71,435,544]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ShowExcludeOptions=e.DisableHighlightingOfNonBasicAsciiCharactersAction=e.DisableHighlightingOfInvisibleCharactersAction=e.DisableHighlightingOfAmbiguousCharactersAction=e.DisableHighlightingInStringsAction=e.DisableHighlightingInCommentsAction=e.UnicodeHighlighterHoverParticipant=e.UnicodeHighlighter=e.warningIcon=void 0,e.warningIcon=(0,h.registerIcon)("extensions-warning-message",k.Codicon.warning,l.localize(296,"Icon shown with a warning message in the extensions editor."));let C=class extends L.Disposable{static{this.ID="editor.contrib.unicodeHighlighter"}constructor(X,G,P,te){super(),this._editor=X,this._editorWorkerService=G,this._workspaceTrustService=P,this._highlighter=null,this._bannerClosed=!1,this._updateState=se=>{if(se&&se.hasMore){if(this._bannerClosed)return;const ue=Math.max(se.ambiguousCharacterCount,se.nonBasicAsciiCharacterCount,se.invisibleCharacterCount);let ge;if(se.nonBasicAsciiCharacterCount>=ue)ge={message:l.localize(297,"This document contains many non-basic ASCII unicode characters"),command:new q};else if(se.ambiguousCharacterCount>=ue)ge={message:l.localize(298,"This document contains many ambiguous unicode characters"),command:new W};else if(se.invisibleCharacterCount>=ue)ge={message:l.localize(299,"This document contains many invisible unicode characters"),command:new z};else throw new Error("Unreachable");this._bannerController.show({id:"unicodeHighlightBanner",message:ge.message,icon:e.warningIcon,actions:[{label:ge.command.shortLabel,href:`command:${ge.command.id}`}],onClose:()=>{this._bannerClosed=!0}})}else this._bannerController.hide()},this._bannerController=this._register(te.createInstance(u.BannerController,X)),this._register(this._editor.onDidChangeModel(()=>{this._bannerClosed=!1,this._updateHighlighter()})),this._options=X.getOption(126),this._register(P.onDidChangeTrust(se=>{this._updateHighlighter()})),this._register(X.onDidChangeConfiguration(se=>{se.hasChanged(126)&&(this._options=X.getOption(126),this._updateHighlighter())})),this._updateHighlighter()}dispose(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),super.dispose()}_updateHighlighter(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),!this._editor.hasModel())return;const X=w(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if([X.nonBasicASCII,X.ambiguousCharacters,X.invisibleCharacters].every(P=>P===!1))return;const G={nonBasicASCII:X.nonBasicASCII,ambiguousCharacters:X.ambiguousCharacters,invisibleCharacters:X.invisibleCharacters,includeComments:X.includeComments,includeStrings:X.includeStrings,allowedCodePoints:Object.keys(X.allowedCharacters).map(P=>P.codePointAt(0)),allowedLocales:Object.keys(X.allowedLocales).map(P=>P==="_os"?new Intl.NumberFormat().resolvedOptions().locale:P==="_vscode"?y.language:P)};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new S(this._editor,G,this._updateState,this._editorWorkerService):this._highlighter=new D(this._editor,G,this._updateState)}getDecorationInfo(X){return this._highlighter?this._highlighter.getDecorationInfo(X):null}};e.UnicodeHighlighter=C,e.UnicodeHighlighter=C=De([he(1,s.IEditorWorkerService),he(2,v.IWorkspaceTrustManagementService),he(3,r.IInstantiationService)],C);function w(Q,X){return{nonBasicASCII:X.nonBasicASCII===b.inUntrustedWorkspace?!Q:X.nonBasicASCII,ambiguousCharacters:X.ambiguousCharacters,invisibleCharacters:X.invisibleCharacters,includeComments:X.includeComments===b.inUntrustedWorkspace?!Q:X.includeComments,includeStrings:X.includeStrings===b.inUntrustedWorkspace?!Q:X.includeStrings,allowedCharacters:X.allowedCharacters,allowedLocales:X.allowedLocales}}let S=class extends L.Disposable{constructor(X,G,P,te){super(),this._editor=X,this._options=G,this._updateState=P,this._editorWorkerService=te,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new c.RunOnceScheduler(()=>this._update(),250)),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const X=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then(G=>{if(this._model.isDisposed()||this._model.getVersionId()!==X)return;this._updateState(G);const P=[];if(!G.hasMore)for(const te of G.ranges)P.push({range:te,options:O.instance.getDecorationFromOptions(this._options)});this._decorations.set(P)})}getDecorationInfo(X){if(!this._decorations.has(X))return null;const G=this._editor.getModel();if(!(0,i.isModelDecorationVisible)(G,X))return null;const P=G.getValueInRange(X.range);return{reason:N(P,this._options),inComment:(0,i.isModelDecorationInComment)(G,X),inString:(0,i.isModelDecorationInString)(G,X)}}};S=De([he(3,s.IEditorWorkerService)],S);class D extends L.Disposable{constructor(X,G,P){super(),this._editor=X,this._options=G,this._updateState=P,this._model=this._editor.getModel(),this._decorations=this._editor.createDecorationsCollection(),this._updateSoon=this._register(new c.RunOnceScheduler(()=>this._update(),250)),this._register(this._editor.onDidLayoutChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidScrollChange(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeHiddenAreas(()=>{this._updateSoon.schedule()})),this._register(this._editor.onDidChangeModelContent(()=>{this._updateSoon.schedule()})),this._updateSoon.schedule()}dispose(){this._decorations.clear(),super.dispose()}_update(){if(this._model.isDisposed())return;if(!this._model.mightContainNonBasicASCII()){this._decorations.clear();return}const X=this._editor.getVisibleRanges(),G=[],P={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1};for(const te of X){const se=n.UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model,this._options,te);for(const ue of se.ranges)P.ranges.push(ue);P.ambiguousCharacterCount+=P.ambiguousCharacterCount,P.invisibleCharacterCount+=P.invisibleCharacterCount,P.nonBasicAsciiCharacterCount+=P.nonBasicAsciiCharacterCount,P.hasMore=P.hasMore||se.hasMore}if(!P.hasMore)for(const te of P.ranges)G.push({range:te,options:O.instance.getDecorationFromOptions(this._options)});this._updateState(P),this._decorations.set(G)}getDecorationInfo(X){if(!this._decorations.has(X))return null;const G=this._editor.getModel(),P=G.getValueInRange(X.range);return(0,i.isModelDecorationVisible)(G,X)?{reason:N(P,this._options),inComment:(0,i.isModelDecorationInComment)(G,X),inString:(0,i.isModelDecorationInString)(G,X)}:null}}const I=l.localize(300,"Configure Unicode Highlight Options");let T=class{constructor(X,G,P){this._editor=X,this._languageService=G,this._openerService=P,this.hoverOrdinal=5}computeSync(X,G){if(!this._editor.hasModel()||X.type!==1)return[];const P=this._editor.getModel(),te=this._editor.getContribution(C.ID);if(!te)return[];const se=[],ue=new Set;let ge=300;for(const pe of G){const ce=te.getDecorationInfo(pe);if(!ce)continue;const ne=P.getValueInRange(pe.range).codePointAt(0),J=A(ne);let B;switch(ce.reason.kind){case 0:{(0,f.isBasicASCII)(ce.reason.confusableWith)?B=l.localize(301,"The character {0} could be confused with the ASCII character {1}, which is more common in source code.",J,A(ce.reason.confusableWith.codePointAt(0))):B=l.localize(302,"The character {0} could be confused with the character {1}, which is more common in source code.",J,A(ce.reason.confusableWith.codePointAt(0)));break}case 1:B=l.localize(303,"The character {0} is invisible.",J);break;case 2:B=l.localize(304,"The character {0} is not a basic ASCII character.",J);break}if(ue.has(B))continue;ue.add(B);const j={codePoint:ne,reason:ce.reason,inComment:ce.inComment,inString:ce.inString},V=l.localize(305,"Adjust settings"),$=`command:${H.ID}?${encodeURIComponent(JSON.stringify(j))}`,Z=new E.MarkdownString("",!0).appendMarkdown(B).appendText(" ").appendLink($,V,I);se.push(new g.MarkdownHover(this,pe.range,[Z],!1,ge++))}return se}renderHoverParts(X,G){return(0,g.renderMarkdownHovers)(X,G,this._editor,this._languageService,this._openerService)}};e.UnicodeHighlighterHoverParticipant=T,e.UnicodeHighlighterHoverParticipant=T=De([he(1,t.ILanguageService),he(2,d.IOpenerService)],T);function M(Q){return`U+${Q.toString(16).padStart(4,"0")}`}function A(Q){let X=`\`${M(Q)}\``;return f.InvisibleCharacters.isInvisibleCharacter(Q)||(X+=` "${`${R(Q)}`}"`),X}function R(Q){return Q===96?"`` ` ``":"`"+String.fromCodePoint(Q)+"`"}function N(Q,X){return n.UnicodeTextModelHighlighter.computeUnicodeHighlightReason(Q,X)}class O{constructor(){this.map=new Map}static{this.instance=new O}getDecorationFromOptions(X){return this.getDecoration(!X.includeComments,!X.includeStrings)}getDecoration(X,G){const P=`${X}${G}`;let te=this.map.get(P);return te||(te=p.ModelDecorationOptions.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:X,hideInStringTokens:G}),this.map.set(P,te)),te}}class x extends _.EditorAction{constructor(){super({id:W.ID,label:l.localize(307,"Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0}),this.shortLabel=l.localize(306,"Disable Highlight In Comments")}async run(X,G,P){const te=X?.get(a.IConfigurationService);te&&this.runAction(te)}async runAction(X){await X.updateValue(b.unicodeHighlightConfigKeys.includeComments,!1,2)}}e.DisableHighlightingInCommentsAction=x;class F extends _.EditorAction{constructor(){super({id:W.ID,label:l.localize(309,"Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0}),this.shortLabel=l.localize(308,"Disable Highlight In Strings")}async run(X,G,P){const te=X?.get(a.IConfigurationService);te&&this.runAction(te)}async runAction(X){await X.updateValue(b.unicodeHighlightConfigKeys.includeStrings,!1,2)}}e.DisableHighlightingInStringsAction=F;class W extends _.EditorAction{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters"}constructor(){super({id:W.ID,label:l.localize(311,"Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0}),this.shortLabel=l.localize(310,"Disable Ambiguous Highlight")}async run(X,G,P){const te=X?.get(a.IConfigurationService);te&&this.runAction(te)}async runAction(X){await X.updateValue(b.unicodeHighlightConfigKeys.ambiguousCharacters,!1,2)}}e.DisableHighlightingOfAmbiguousCharactersAction=W;class z extends _.EditorAction{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters"}constructor(){super({id:z.ID,label:l.localize(313,"Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0}),this.shortLabel=l.localize(312,"Disable Invisible Highlight")}async run(X,G,P){const te=X?.get(a.IConfigurationService);te&&this.runAction(te)}async runAction(X){await X.updateValue(b.unicodeHighlightConfigKeys.invisibleCharacters,!1,2)}}e.DisableHighlightingOfInvisibleCharactersAction=z;class q extends _.EditorAction{static{this.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters"}constructor(){super({id:q.ID,label:l.localize(315,"Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0}),this.shortLabel=l.localize(314,"Disable Non ASCII Highlight")}async run(X,G,P){const te=X?.get(a.IConfigurationService);te&&this.runAction(te)}async runAction(X){await X.updateValue(b.unicodeHighlightConfigKeys.nonBasicASCII,!1,2)}}e.DisableHighlightingOfNonBasicAsciiCharactersAction=q;class H extends _.EditorAction{static{this.ID="editor.action.unicodeHighlight.showExcludeOptions"}constructor(){super({id:H.ID,label:l.localize(316,"Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}async run(X,G,P){const{codePoint:te,reason:se,inString:ue,inComment:ge}=P,pe=String.fromCodePoint(te),ce=X.get(m.IQuickInputService),ie=X.get(a.IConfigurationService);function ne(j){return f.InvisibleCharacters.isInvisibleCharacter(j)?l.localize(317,"Exclude {0} (invisible character) from being highlighted",M(j)):l.localize(318,"Exclude {0} from being highlighted",`${M(j)} "${pe}"`)}const J=[];if(se.kind===0)for(const j of se.notAmbiguousInLocales)J.push({label:l.localize(319,'Allow unicode characters that are more common in the language "{0}".',j),run:async()=>{U(ie,[j])}});if(J.push({label:ne(te),run:()=>K(ie,[te])}),ge){const j=new x;J.push({label:j.label,run:async()=>j.runAction(ie)})}else if(ue){const j=new F;J.push({label:j.label,run:async()=>j.runAction(ie)})}if(se.kind===0){const j=new W;J.push({label:j.label,run:async()=>j.runAction(ie)})}else if(se.kind===1){const j=new z;J.push({label:j.label,run:async()=>j.runAction(ie)})}else if(se.kind===2){const j=new q;J.push({label:j.label,run:async()=>j.runAction(ie)})}else Y(se);const B=await ce.pick(J,{title:I});B&&await B.run()}}e.ShowExcludeOptions=H;async function K(Q,X){const G=Q.getValue(b.unicodeHighlightConfigKeys.allowedCharacters);let P;typeof G=="object"&&G?P=G:P={};for(const te of X)P[String.fromCodePoint(te)]=!0;await Q.updateValue(b.unicodeHighlightConfigKeys.allowedCharacters,P,2)}async function U(Q,X){const G=Q.inspect(b.unicodeHighlightConfigKeys.allowedLocales).user?.value;let P;typeof G=="object"&&G?P=Object.assign({},G):P={};for(const te of X)P[te]=!0;await Q.updateValue(b.unicodeHighlightConfigKeys.allowedLocales,P,2)}function Y(Q){throw new Error(`Unexpected value: ${Q}`)}(0,_.registerEditorAction)(W),(0,_.registerEditorAction)(z),(0,_.registerEditorAction)(q),(0,_.registerEditorAction)(H),(0,_.registerEditorContribution)(C.ID,C,1),o.HoverParticipantRegistry.register(T)}),define(oe[861],re([1,0,212,218,803,718,806,719,720,847,808,810,839,812,721,429,722,813,848,849,418,287,725,726,687,855,288,289,424,422,841,728,842,818,729,730,824,825,731,831,822,858,756,777,781,826,782,783,733,220,844,292,859,734,709,860,735,832,406,736,732,686,106,196]),function(ae,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0})}),define(oe[294],re([1,0,11,5,46,6,139,2,16,110,22,151,272,76,9,4,44,78,209,24,27,398,12,179,7,683,31,386,121,387,684,181,50,96,66,186,119,106,51,35,61,435,58,389,703,792,49,693,116,273,42,775,264,799,796,414,152,685,60,29,401,688,117,680,263,681,180,214,107,691,62,63,100,708,136,689,146,8,269,52,45,34,413,388,846,79,776,671,763]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R,N,O,x,F,W,z,q,H,K,U,Y,Q,X,G,P,te,se,ue,ge,pe,ce,ie,ne,J,B,j,V,$,Z,ee,le,de,me,be,ve,Le,Se,ye,Ee,ke,Re,Pe,Fe,je,Te,Ne,fe){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneServices=e.StandaloneConfigurationService=e.StandaloneKeybindingService=e.StandaloneCommandService=e.StandaloneNotificationService=void 0,e.updateConfigurationService=wt;class we{constructor(Me){this.disposed=!1,this.model=Me,this._onWillDispose=new L.Emitter}get textEditorModel(){return this.model}dispose(){this.disposed=!0,this._onWillDispose.fire()}}let Oe=class{constructor(Me){this.modelService=Me}createModelReference(Me){const xe=this.modelService.getModel(Me);return xe?Promise.resolve(new f.ImmortalReference(new we(xe))):Promise.reject(new Error("Model not found"))}};Oe=De([he(0,g.IModelService)],Oe);class Be{static{this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}}}show(){return Be.NULL_PROGRESS_RUNNER}async showWhile(Me,xe){await Me}}class Ue{withProgress(Me,xe,ze){return xe({report:()=>{}})}}class Ye{constructor(){this.isExtensionDevelopment=!1,this.isBuilt=!1}}class Qe{async confirm(Me){return{confirmed:this.doConfirm(Me.message,Me.detail),checkboxChecked:!1}}doConfirm(Me,xe){let ze=Me;return xe&&(ze=ze+`

`+xe),Ne.mainWindow.confirm(ze)}async prompt(Me){let xe;if(this.doConfirm(Me.message,Me.detail)){const Ge=[...Me.buttons??[]];Me.cancelButton&&typeof Me.cancelButton!="string"&&typeof Me.cancelButton!="boolean"&&Ge.push(Me.cancelButton),xe=await Ge[0]?.run({checkboxChecked:!1})}return{result:xe}}async error(Me,xe){await this.prompt({type:b.default.Error,message:Me,detail:xe})}}class tt{static{this.NO_OP=new A.NoOpNotification}info(Me){return this.notify({severity:b.default.Info,message:Me})}warn(Me){return this.notify({severity:b.default.Warning,message:Me})}error(Me){return this.notify({severity:b.default.Error,message:Me})}notify(Me){switch(Me.severity){case b.default.Error:console.error(Me.message);break;case b.default.Warning:console.warn(Me.message);break;default:console.log(Me.message);break}return tt.NO_OP}prompt(Me,xe,ze,Ge){return tt.NO_OP}status(Me,xe){return f.Disposable.None}}e.StandaloneNotificationService=tt;let it=class{constructor(Me){this._onWillExecuteCommand=new L.Emitter,this._onDidExecuteCommand=new L.Emitter,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=Me}executeCommand(Me,...xe){const ze=a.CommandsRegistry.getCommand(Me);if(!ze)return Promise.reject(new Error(`command '${Me}' not found`));try{this._onWillExecuteCommand.fire({commandId:Me,args:xe});const Ge=this._instantiationService.invokeFunction.apply(this._instantiationService,[ze.handler,...xe]);return this._onDidExecuteCommand.fire({commandId:Me,args:xe}),Promise.resolve(Ge)}catch(Ge){return Promise.reject(Ge)}}};e.StandaloneCommandService=it,e.StandaloneCommandService=it=De([he(0,v.IInstantiationService)],it);let ut=class extends C.AbstractKeybindingService{constructor(Me,xe,ze,Ge,Xe,Je){super(Me,xe,ze,Ge,Xe),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const rt=lt=>{const ft=new f.DisposableStore;ft.add(k.addDisposableListener(lt,k.EventType.KEY_DOWN,Dt=>{const Et=new E.StandardKeyboardEvent(Dt);this._dispatch(Et,Et.target)&&(Et.preventDefault(),Et.stopPropagation())})),ft.add(k.addDisposableListener(lt,k.EventType.KEY_UP,Dt=>{const Et=new E.StandardKeyboardEvent(Dt);this._singleModifierDispatch(Et,Et.target)&&Et.preventDefault()})),this._domNodeListeners.push(new ct(lt,ft))},et=lt=>{for(let ft=0;ft<this._domNodeListeners.length;ft++){const Dt=this._domNodeListeners[ft];Dt.domNode===lt&&(this._domNodeListeners.splice(ft,1),Dt.dispose())}},ot=lt=>{lt.getOption(61)||rt(lt.getContainerDomNode())},at=lt=>{lt.getOption(61)||et(lt.getContainerDomNode())};this._register(Je.onCodeEditorAdd(ot)),this._register(Je.onCodeEditorRemove(at)),Je.listCodeEditors().forEach(ot);const gt=lt=>{rt(lt.getContainerDomNode())},pt=lt=>{et(lt.getContainerDomNode())};this._register(Je.onDiffEditorAdd(gt)),this._register(Je.onDiffEditorRemove(pt)),Je.listDiffEditors().forEach(gt)}addDynamicKeybinding(Me,xe,ze,Ge){return(0,f.combinedDisposable)(a.CommandsRegistry.registerCommand(Me,ze),this.addDynamicKeybindings([{keybinding:xe,command:Me,when:Ge}]))}addDynamicKeybindings(Me){const xe=Me.map(ze=>({keybinding:(0,y.decodeKeybinding)(ze.keybinding,_.OS),command:ze.command??null,commandArgs:ze.commandArgs,when:ze.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(xe),this.updateResolver(),(0,f.toDisposable)(()=>{for(let ze=0;ze<this._dynamicKeybindings.length;ze++)if(this._dynamicKeybindings[ze]===xe[0]){this._dynamicKeybindings.splice(ze,xe.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}_getResolver(){if(!this._cachedResolver){const Me=this._toNormalizedKeybindingItems(D.KeybindingsRegistry.getDefaultKeybindings(),!0),xe=this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1);this._cachedResolver=new S.KeybindingResolver(Me,xe,ze=>this._log(ze))}return this._cachedResolver}_documentHasFocus(){return Ne.mainWindow.document.hasFocus()}_toNormalizedKeybindingItems(Me,xe){const ze=[];let Ge=0;for(const Xe of Me){const Je=Xe.when||void 0,rt=Xe.keybinding;if(!rt)ze[Ge++]=new I.ResolvedKeybindingItem(void 0,Xe.command,Xe.commandArgs,Je,xe,null,!1);else{const et=T.USLayoutResolvedKeybinding.resolveKeybinding(rt,_.OS);for(const ot of et)ze[Ge++]=new I.ResolvedKeybindingItem(ot,Xe.command,Xe.commandArgs,Je,xe,null,!1)}}return ze}resolveKeyboardEvent(Me){const xe=new y.KeyCodeChord(Me.ctrlKey,Me.shiftKey,Me.altKey,Me.metaKey,Me.keyCode);return new T.USLayoutResolvedKeybinding([xe],_.OS)}};e.StandaloneKeybindingService=ut,e.StandaloneKeybindingService=ut=De([he(0,m.IContextKeyService),he(1,a.ICommandService),he(2,N.ITelemetryService),he(3,A.INotificationService),he(4,q.ILogService),he(5,z.ICodeEditorService)],ut);class ct extends f.Disposable{constructor(Me,xe){super(),this.domNode=Me,this._register(xe)}}function nt(Ve){return Ve&&typeof Ve=="object"&&(!Ve.overrideIdentifier||typeof Ve.overrideIdentifier=="string")&&(!Ve.resource||Ve.resource instanceof p.URI)}let st=class{constructor(Me){this.logService=Me,this._onDidChangeConfiguration=new L.Emitter,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const xe=new ke.DefaultConfiguration(Me);this._configuration=new d.Configuration(xe.reload(),d.ConfigurationModel.createEmptyModel(Me),d.ConfigurationModel.createEmptyModel(Me),d.ConfigurationModel.createEmptyModel(Me),d.ConfigurationModel.createEmptyModel(Me),d.ConfigurationModel.createEmptyModel(Me),new fe.ResourceMap,d.ConfigurationModel.createEmptyModel(Me),new fe.ResourceMap,Me),xe.dispose()}getValue(Me,xe){const ze=typeof Me=="string"?Me:void 0,Ge=nt(Me)?Me:nt(xe)?xe:{};return this._configuration.getValue(ze,Ge,void 0)}updateValues(Me){const xe={data:this._configuration.toData()},ze=[];for(const Ge of Me){const[Xe,Je]=Ge;this.getValue(Xe)!==Je&&(this._configuration.updateValue(Xe,Je),ze.push(Xe))}if(ze.length>0){const Ge=new d.ConfigurationChangeEvent({keys:ze,overrides:[]},xe,this._configuration,void 0,this.logService);Ge.source=8,this._onDidChangeConfiguration.fire(Ge)}return Promise.resolve()}updateValue(Me,xe,ze,Ge){return this.updateValues([[Me,xe]])}inspect(Me,xe={}){return this._configuration.inspect(Me,xe,void 0)}};e.StandaloneConfigurationService=st,e.StandaloneConfigurationService=st=De([he(0,q.ILogService)],st);let dt=class{constructor(Me,xe,ze){this.configurationService=Me,this.modelService=xe,this.languageService=ze,this._onDidChangeConfiguration=new L.Emitter,this.configurationService.onDidChangeConfiguration(Ge=>{this._onDidChangeConfiguration.fire({affectedKeys:Ge.affectedKeys,affectsConfiguration:(Xe,Je)=>Ge.affectsConfiguration(Je)})})}getValue(Me,xe,ze){const Ge=i.Position.isIPosition(xe)?xe:null,Xe=Ge?typeof ze=="string"?ze:void 0:typeof xe=="string"?xe:void 0,Je=Me?this.getLanguage(Me,Ge):void 0;return typeof Xe>"u"?this.configurationService.getValue({resource:Me,overrideIdentifier:Je}):this.configurationService.getValue(Xe,{resource:Me,overrideIdentifier:Je})}getLanguage(Me,xe){const ze=this.modelService.getModel(Me);return ze?xe?ze.getLanguageIdAtPosition(xe.lineNumber,xe.column):ze.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(Me)}};dt=De([he(0,r.IConfigurationService),he(1,g.IModelService),he(2,se.ILanguageService)],dt);let St=class{constructor(Me){this.configurationService=Me}getEOL(Me,xe){const ze=this.configurationService.getValue("files.eol",{overrideIdentifier:xe,resource:Me});return ze&&typeof ze=="string"&&ze!=="auto"?ze:_.isLinux||_.isMacintosh?`
`:`\r
`}};St=De([he(0,r.IConfigurationService)],St);class _t{publicLog2(){}}class ht{static{this.SCHEME="inmemory"}constructor(){const Me=p.URI.from({scheme:ht.SCHEME,authority:"model",path:"/"});this.workspace={id:O.STANDALONE_EDITOR_WORKSPACE_ID,folders:[new O.WorkspaceFolder({uri:Me,name:"",index:0})]}}getWorkspace(){return this.workspace}getWorkspaceFolder(Me){return Me&&Me.scheme===ht.SCHEME?this.workspace.folders[0]:null}}function wt(Ve,Me,xe){if(!Me||!(Ve instanceof st))return;const ze=[];Object.keys(Me).forEach(Ge=>{(0,s.isEditorConfigurationKey)(Ge)&&ze.push([`editor.${Ge}`,Me[Ge]]),xe&&(0,s.isDiffEditorConfigurationKey)(Ge)&&ze.push([`diffEditor.${Ge}`,Me[Ge]])}),ze.length>0&&Ve.updateValues(ze)}let qe=class{constructor(Me){this._modelService=Me}hasPreviewHandler(){return!1}async apply(Me,xe){const ze=Array.isArray(Me)?Me:n.ResourceEdit.convert(Me),Ge=new Map;for(const rt of ze){if(!(rt instanceof n.ResourceTextEdit))throw new Error("bad edit - only text edits are supported");const et=this._modelService.getModel(rt.resource);if(!et)throw new Error("bad edit - model not found");if(typeof rt.versionId=="number"&&et.getVersionId()!==rt.versionId)throw new Error("bad state - model changed in the meantime");let ot=Ge.get(et);ot||(ot=[],Ge.set(et,ot)),ot.push(t.EditOperation.replaceMove(o.Range.lift(rt.textEdit.range),rt.textEdit.text))}let Xe=0,Je=0;for(const[rt,et]of Ge)rt.pushStackElement(),rt.pushEditOperations([],et,()=>[]),rt.pushStackElement(),Je+=1,Xe+=et.length;return{ariaSummary:c.format(F.StandaloneServicesNLS.bulkEditServiceSummary,Xe,Je),isApplied:Xe>0}}};qe=De([he(0,g.IModelService)],qe);class Ce{getUriLabel(Me,xe){return Me.scheme==="file"?Me.fsPath:Me.path}getUriBasenameLabel(Me){return(0,W.basename)(Me)}}let _e=class extends U.ContextViewService{constructor(Me,xe){super(Me),this._codeEditorService=xe}showContextView(Me,xe,ze){if(!xe){const Ge=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();Ge&&(xe=Ge.getContainerDomNode())}return super.showContextView(Me,xe,ze)}};_e=De([he(0,x.ILayoutService),he(1,z.ICodeEditorService)],_e);class Ie{constructor(){this._neverEmitter=new L.Emitter,this.onDidChangeTrust=this._neverEmitter.event}isWorkspaceTrusted(){return!0}}class Ae extends Y.LanguageService{constructor(){super()}}class We extends Pe.LogService{constructor(){super(new q.ConsoleLogger)}}let Ke=class extends Q.ContextMenuService{constructor(Me,xe,ze,Ge,Xe,Je){super(Me,xe,ze,Ge,Xe,Je),this.configure({blockMouse:!1})}};Ke=De([he(0,N.ITelemetryService),he(1,A.INotificationService),he(2,K.IContextViewService),he(3,w.IKeybindingService),he(4,j.IMenuService),he(5,m.IContextKeyService)],Ke);class He{async playSignal(Me,xe){}}(0,X.registerSingleton)(q.ILogService,We,0),(0,X.registerSingleton)(r.IConfigurationService,st,0),(0,X.registerSingleton)(l.ITextResourceConfigurationService,dt,0),(0,X.registerSingleton)(l.ITextResourcePropertiesService,St,0),(0,X.registerSingleton)(O.IWorkspaceContextService,ht,0),(0,X.registerSingleton)(M.ILabelService,Ce,0),(0,X.registerSingleton)(N.ITelemetryService,_t,0),(0,X.registerSingleton)(h.IDialogService,Qe,0),(0,X.registerSingleton)(Te.IEnvironmentService,Ye,0),(0,X.registerSingleton)(A.INotificationService,tt,0),(0,X.registerSingleton)(ve.IMarkerService,Le.MarkerService,0),(0,X.registerSingleton)(se.ILanguageService,Ae,0),(0,X.registerSingleton)(ne.IStandaloneThemeService,ie.StandaloneThemeService,0),(0,X.registerSingleton)(g.IModelService,pe.ModelService,0),(0,X.registerSingleton)(ge.IMarkerDecorationsService,ue.MarkerDecorationsService,0),(0,X.registerSingleton)(m.IContextKeyService,ee.ContextKeyService,0),(0,X.registerSingleton)(R.IProgressService,Ue,0),(0,X.registerSingleton)(R.IEditorProgressService,Be,0),(0,X.registerSingleton)(Ee.IStorageService,Ee.InMemoryStorageService,0),(0,X.registerSingleton)(P.IEditorWorkerService,te.EditorWorkerService,0),(0,X.registerSingleton)(n.IBulkEditService,qe,0),(0,X.registerSingleton)(H.IWorkspaceTrustManagementService,Ie,0),(0,X.registerSingleton)(u.ITextModelService,Oe,0),(0,X.registerSingleton)(B.IAccessibilityService,J.AccessibilityService,0),(0,X.registerSingleton)(be.IListService,be.ListService,0),(0,X.registerSingleton)(a.ICommandService,it,0),(0,X.registerSingleton)(w.IKeybindingService,ut,0),(0,X.registerSingleton)(ye.IQuickInputService,ce.StandaloneQuickInputService,0),(0,X.registerSingleton)(K.IContextViewService,_e,0),(0,X.registerSingleton)(Se.IOpenerService,G.OpenerService,0),(0,X.registerSingleton)(Z.IClipboardService,$.BrowserClipboardService,0),(0,X.registerSingleton)(K.IContextMenuService,Ke,0),(0,X.registerSingleton)(j.IMenuService,V.MenuService,0),(0,X.registerSingleton)(Re.IAccessibilitySignalService,He,0);var $e;(function(Ve){const Me=new me.ServiceCollection;for(const[et,ot]of(0,X.getSingletonServiceDescriptors)())Me.set(et,ot);const xe=new de.InstantiationService(Me,!0);Me.set(v.IInstantiationService,xe);function ze(et){Ge||Je({});const ot=Me.get(et);if(!ot)throw new Error("Missing service "+et);return ot instanceof le.SyncDescriptor?xe.invokeFunction(at=>at.get(et)):ot}Ve.get=ze;let Ge=!1;const Xe=new L.Emitter;function Je(et){if(Ge)return xe;Ge=!0;for(const[at,gt]of(0,X.getSingletonServiceDescriptors)())Me.get(at)||Me.set(at,gt);for(const at in et)if(et.hasOwnProperty(at)){const gt=(0,v.createDecorator)(at);Me.get(gt)instanceof le.SyncDescriptor&&Me.set(gt,et[at])}const ot=(0,Fe.getEditorFeatures)();for(const at of ot)try{xe.createInstance(at)}catch(gt){(0,je.onUnexpectedError)(gt)}return Xe.fire(),xe}Ve.initialize=Je;function rt(et){if(Ge)return et();const ot=new f.DisposableStore,at=ot.add(Xe.event(()=>{at.dispose(),ot.add(et())}));return ot}Ve.withServices=rt})($e||(e.StandaloneServices=$e={}))}),define(oe[862],re([1,0,48,2,35,218,332,294,152,29,24,27,12,58,7,31,50,25,60,106,117,96,44,42,413,70,34,17,284,136,52,43,118,81]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A,R){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StandaloneDiffEditor2=e.StandaloneEditor=e.StandaloneCodeEditor=void 0,e.createTextModel=q;let N=0,O=!1;function x(K){if(!K){if(O)return;O=!0}c.setARIAContainer(K||T.mainWindow.document.body)}let F=class extends L.CodeEditorWidget{constructor(U,Y,Q,X,G,P,te,se,ue,ge,pe,ce,ie){const ne={...Y};ne.ariaLabel=ne.ariaLabel||a.StandaloneCodeEditorNLS.editorViewAccessibleLabel,ne.ariaLabel=ne.ariaLabel+";"+a.StandaloneCodeEditorNLS.accessibilityHelpMessage,super(U,ne,{},Q,X,G,P,ue,ge,pe,ce,ie),se instanceof f.StandaloneKeybindingService?this._standaloneKeybindingService=se:this._standaloneKeybindingService=null,x(ne.ariaContainerElement),(0,M.setHoverDelegateFactory)((J,B)=>Q.createInstance(A.WorkbenchHoverDelegate,J,B,{})),(0,R.setBaseLayerHoverDelegate)(te)}addCommand(U,Y,Q){if(!this._standaloneKeybindingService)return console.warn("Cannot add command because the editor is configured with an unrecognized KeybindingService"),null;const X="DYNAMIC_"+ ++N,G=s.ContextKeyExpr.deserialize(Q);return this._standaloneKeybindingService.addDynamicKeybinding(X,U,Y,G),X}createContextKey(U,Y){return this._contextKeyService.createKey(U,Y)}addAction(U){if(typeof U.id!="string"||typeof U.label!="string"||typeof U.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");if(!this._standaloneKeybindingService)return console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),k.Disposable.None;const Y=U.id,Q=U.label,X=s.ContextKeyExpr.and(s.ContextKeyExpr.equals("editorId",this.getId()),s.ContextKeyExpr.deserialize(U.precondition)),G=U.keybindings,P=s.ContextKeyExpr.and(X,s.ContextKeyExpr.deserialize(U.keybindingContext)),te=U.contextMenuGroupId||null,se=U.contextMenuOrder||0,ue=(ie,...ne)=>Promise.resolve(U.run(this,...ne)),ge=new k.DisposableStore,pe=this.getId()+":"+Y;if(ge.add(p.CommandsRegistry.registerCommand(pe,ue)),te){const ie={command:{id:pe,title:Q},when:X,group:te,order:se};ge.add(b.MenuRegistry.appendMenuItem(b.MenuId.EditorContext,ie))}if(Array.isArray(G))for(const ie of G)ge.add(this._standaloneKeybindingService.addDynamicKeybinding(pe,ie,ue,P));const ce=new y.InternalEditorAction(pe,Q,Q,void 0,X,(...ie)=>Promise.resolve(U.run(this,...ie)),this._contextKeyService);return this._actions.set(Y,ce),ge.add((0,k.toDisposable)(()=>{this._actions.delete(Y)})),ge}_triggerCommand(U,Y){if(this._codeEditorService instanceof v.StandaloneCodeEditorService)try{this._codeEditorService.setActiveCodeEditor(this),super._triggerCommand(U,Y)}finally{this._codeEditorService.setActiveCodeEditor(null)}else super._triggerCommand(U,Y)}};e.StandaloneCodeEditor=F,e.StandaloneCodeEditor=F=De([he(2,i.IInstantiationService),he(3,E.ICodeEditorService),he(4,p.ICommandService),he(5,s.IContextKeyService),he(6,A.IHoverService),he(7,o.IKeybindingService),he(8,u.IThemeService),he(9,g.INotificationService),he(10,l.IAccessibilityService),he(11,w.ILanguageConfigurationService),he(12,S.ILanguageFeaturesService)],F);let W=class extends F{constructor(U,Y,Q,X,G,P,te,se,ue,ge,pe,ce,ie,ne,J,B){const j={...Y};(0,f.updateConfigurationService)(pe,j,!1);const V=ue.registerEditorContainer(U);typeof j.theme=="string"&&ue.setTheme(j.theme),typeof j.autoDetectHighContrast<"u"&&ue.setAutoDetectHighContrast(!!j.autoDetectHighContrast);const $=j.model;delete j.model,super(U,j,Q,X,G,P,te,se,ue,ge,ce,J,B),this._configurationService=pe,this._standaloneThemeService=ue,this._register(V);let Z;if(typeof $>"u"){const ee=ne.getLanguageIdByMimeType(j.language)||j.language||C.PLAINTEXT_LANGUAGE_ID;Z=q(ie,ne,j.value||"",ee,void 0),this._ownsModel=!0}else Z=$,this._ownsModel=!1;if(this._attachModel(Z),Z){const ee={oldModelUrl:null,newModelUrl:Z.uri};this._onDidChangeModel.fire(ee)}}dispose(){super.dispose()}updateOptions(U){(0,f.updateConfigurationService)(this._configurationService,U,!1),typeof U.theme=="string"&&this._standaloneThemeService.setTheme(U.theme),typeof U.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!U.autoDetectHighContrast),super.updateOptions(U)}_postDetachModelCleanup(U){super._postDetachModelCleanup(U),U&&this._ownsModel&&(U.dispose(),this._ownsModel=!1)}};e.StandaloneEditor=W,e.StandaloneEditor=W=De([he(2,i.IInstantiationService),he(3,E.ICodeEditorService),he(4,p.ICommandService),he(5,s.IContextKeyService),he(6,A.IHoverService),he(7,o.IKeybindingService),he(8,_.IStandaloneThemeService),he(9,g.INotificationService),he(10,n.IConfigurationService),he(11,l.IAccessibilityService),he(12,m.IModelService),he(13,h.ILanguageService),he(14,w.ILanguageConfigurationService),he(15,S.ILanguageFeaturesService)],W);let z=class extends D.DiffEditorWidget{constructor(U,Y,Q,X,G,P,te,se,ue,ge,pe,ce){const ie={...Y};(0,f.updateConfigurationService)(se,ie,!0);const ne=P.registerEditorContainer(U);typeof ie.theme=="string"&&P.setTheme(ie.theme),typeof ie.autoDetectHighContrast<"u"&&P.setAutoDetectHighContrast(!!ie.autoDetectHighContrast),super(U,ie,{},X,Q,G,ce,ge),this._configurationService=se,this._standaloneThemeService=P,this._register(ne)}dispose(){super.dispose()}updateOptions(U){(0,f.updateConfigurationService)(this._configurationService,U,!0),typeof U.theme=="string"&&this._standaloneThemeService.setTheme(U.theme),typeof U.autoDetectHighContrast<"u"&&this._standaloneThemeService.setAutoDetectHighContrast(!!U.autoDetectHighContrast),super.updateOptions(U)}_createInnerEditor(U,Y,Q){return U.createInstance(F,Y,Q)}getOriginalEditor(){return super.getOriginalEditor()}getModifiedEditor(){return super.getModifiedEditor()}addCommand(U,Y,Q){return this.getModifiedEditor().addCommand(U,Y,Q)}createContextKey(U,Y){return this.getModifiedEditor().createContextKey(U,Y)}addAction(U){return this.getModifiedEditor().addAction(U)}};e.StandaloneDiffEditor2=z,e.StandaloneDiffEditor2=z=De([he(2,i.IInstantiationService),he(3,s.IContextKeyService),he(4,E.ICodeEditorService),he(5,_.IStandaloneThemeService),he(6,g.INotificationService),he(7,n.IConfigurationService),he(8,t.IContextMenuService),he(9,d.IEditorProgressService),he(10,r.IClipboardService),he(11,I.IAccessibilitySignalService)],z);function q(K,U,Y,Q,X){if(Y=Y||"",!Q){const G=Y.indexOf(`
`);let P=Y;return G!==-1&&(P=Y.substring(0,G)),H(K,Y,U.createByFilepathOrFirstLine(X||null,P),X)}return H(K,Y,U.createById(Q),X)}function H(K,U,Y,Q){return K.createModel(U,Y,Q)}}),define(oe[863],re([1,0,52,2,11,22,370,15,35,698,37,167,261,198,28,42,34,70,176,40,44,249,675,862,294,152,29,24,12,31,107,62,805,550]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o,g,u,l,a,r,d,m,h,v,C,w,S,D,I,T,M,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=R,e.onDidCreateEditor=N,e.onDidCreateDiffEditor=O,e.getEditors=x,e.getDiffEditors=F,e.createDiffEditor=W,e.createMultiFileDiffEditor=z,e.addCommand=q,e.addEditorAction=H,e.addKeybindingRule=K,e.addKeybindingRules=U,e.createModel=Y,e.setModelLanguage=Q,e.setModelMarkers=X,e.removeAllMarkers=G,e.getModelMarkers=P,e.onDidChangeMarkers=te,e.getModel=se,e.getModels=ue,e.onDidCreateModel=ge,e.onWillDisposeModel=pe,e.onDidChangeModelLanguage=ce,e.createWebWorker=ie,e.colorizeElement=ne,e.colorize=J,e.colorizeModelLine=B,e.tokenize=V,e.defineTheme=$,e.setTheme=Z,e.remeasureFonts=ee,e.registerCommand=le,e.registerLinkOpener=de,e.registerEditorOpener=me,e.createMonacoEditorAPI=be;function R(ve,Le,Se){return v.StandaloneServices.initialize(Se||{}).createInstance(h.StandaloneEditor,ve,Le)}function N(ve){return v.StandaloneServices.get(_.ICodeEditorService).onCodeEditorAdd(Se=>{ve(Se)})}function O(ve){return v.StandaloneServices.get(_.ICodeEditorService).onDiffEditorAdd(Se=>{ve(Se)})}function x(){return v.StandaloneServices.get(_.ICodeEditorService).listCodeEditors()}function F(){return v.StandaloneServices.get(_.ICodeEditorService).listDiffEditors()}function W(ve,Le,Se){return v.StandaloneServices.initialize(Se||{}).createInstance(h.StandaloneDiffEditor2,ve,Le)}function z(ve,Le){const Se=v.StandaloneServices.initialize(Le||{});return new A.MultiDiffEditorWidget(ve,{},Se)}function q(ve){if(typeof ve.id!="string"||typeof ve.run!="function")throw new Error("Invalid command descriptor, `id` and `run` are required properties!");return S.CommandsRegistry.registerCommand(ve.id,ve.run)}function H(ve){if(typeof ve.id!="string"||typeof ve.label!="string"||typeof ve.run!="function")throw new Error("Invalid action descriptor, `id`, `label` and `run` are required properties!");const Le=D.ContextKeyExpr.deserialize(ve.precondition),Se=(Ee,...ke)=>f.EditorCommand.runEditorCommand(Ee,ke,Le,(Re,Pe,Fe)=>Promise.resolve(ve.run(Pe,...Fe))),ye=new k.DisposableStore;if(ye.add(S.CommandsRegistry.registerCommand(ve.id,Se)),ve.contextMenuGroupId){const Ee={command:{id:ve.id,title:ve.label},when:Le,group:ve.contextMenuGroupId,order:ve.contextMenuOrder||0};ye.add(w.MenuRegistry.appendMenuItem(w.MenuId.EditorContext,Ee))}if(Array.isArray(ve.keybindings)){const Ee=v.StandaloneServices.get(I.IKeybindingService);if(!(Ee instanceof v.StandaloneKeybindingService))console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService");else{const ke=D.ContextKeyExpr.and(Le,D.ContextKeyExpr.deserialize(ve.keybindingContext));ye.add(Ee.addDynamicKeybindings(ve.keybindings.map(Re=>({keybinding:Re,command:ve.id,when:ke}))))}}return ye}function K(ve){return U([ve])}function U(ve){const Le=v.StandaloneServices.get(I.IKeybindingService);return Le instanceof v.StandaloneKeybindingService?Le.addDynamicKeybindings(ve.map(Se=>({keybinding:Se.keybinding,command:Se.command,commandArgs:Se.commandArgs,when:D.ContextKeyExpr.deserialize(Se.when)}))):(console.warn("Cannot add keybinding because the editor is configured with an unrecognized KeybindingService"),k.Disposable.None)}function Y(ve,Le,Se){const ye=v.StandaloneServices.get(o.ILanguageService),Ee=ye.getLanguageIdByMimeType(Le)||Le;return(0,h.createTextModel)(v.StandaloneServices.get(r.IModelService),ye,ve,Ee,Se)}function Q(ve,Le){const Se=v.StandaloneServices.get(o.ILanguageService),ye=Se.getLanguageIdByMimeType(Le)||Le||u.PLAINTEXT_LANGUAGE_ID;ve.setLanguage(Se.createById(ye))}function X(ve,Le,Se){ve&&v.StandaloneServices.get(T.IMarkerService).changeOne(Le,ve.uri,Se)}function G(ve){v.StandaloneServices.get(T.IMarkerService).changeAll(ve,[])}function P(ve){return v.StandaloneServices.get(T.IMarkerService).read(ve)}function te(ve){return v.StandaloneServices.get(T.IMarkerService).onMarkerChanged(ve)}function se(ve){return v.StandaloneServices.get(r.IModelService).getModel(ve)}function ue(){return v.StandaloneServices.get(r.IModelService).getModels()}function ge(ve){return v.StandaloneServices.get(r.IModelService).onModelAdded(ve)}function pe(ve){return v.StandaloneServices.get(r.IModelService).onModelRemoved(ve)}function ce(ve){return v.StandaloneServices.get(r.IModelService).onModelLanguageChanged(Se=>{ve({model:Se.model,oldLanguage:Se.oldLanguageId})})}function ie(ve){return(0,b.createWebWorker)(v.StandaloneServices.get(r.IModelService),v.StandaloneServices.get(g.ILanguageConfigurationService),ve)}function ne(ve,Le){const Se=v.StandaloneServices.get(o.ILanguageService),ye=v.StandaloneServices.get(C.IStandaloneThemeService);return m.Colorizer.colorizeElement(ye,Se,ve,Le).then(()=>{ye.registerEditorContainer(ve)})}function J(ve,Le,Se){const ye=v.StandaloneServices.get(o.ILanguageService);return v.StandaloneServices.get(C.IStandaloneThemeService).registerEditorContainer(c.mainWindow.document.body),m.Colorizer.colorize(ye,ve,Le,Se)}function B(ve,Le,Se=4){return v.StandaloneServices.get(C.IStandaloneThemeService).registerEditorContainer(c.mainWindow.document.body),m.Colorizer.colorizeModelLine(ve,Le,Se)}function j(ve){const Le=i.TokenizationRegistry.get(ve);return Le||{getInitialState:()=>l.NullState,tokenize:(Se,ye,Ee)=>(0,l.nullTokenize)(ve,Ee)}}function V(ve,Le){i.TokenizationRegistry.getOrCreate(Le);const Se=j(Le),ye=(0,E.splitLines)(ve),Ee=[];let ke=Se.getInitialState();for(let Re=0,Pe=ye.length;Re<Pe;Re++){const Fe=ye[Re],je=Se.tokenize(Fe,!0,ke);Ee[Re]=je.tokens,ke=je.endState}return Ee}function $(ve,Le){v.StandaloneServices.get(C.IStandaloneThemeService).defineTheme(ve,Le)}function Z(ve){v.StandaloneServices.get(C.IStandaloneThemeService).setTheme(ve)}function ee(){y.FontMeasurements.clearAllFontInfos()}function le(ve,Le){return S.CommandsRegistry.registerCommand({id:ve,handler:Le})}function de(ve){return v.StandaloneServices.get(M.IOpenerService).registerOpener({async open(Se){return typeof Se=="string"&&(Se=L.URI.parse(Se)),ve.open(Se)}})}function me(ve){return v.StandaloneServices.get(_.ICodeEditorService).registerCodeEditorOpenHandler(async(Se,ye,Ee)=>{if(!ye)return null;const ke=Se.options?.selection;let Re;return ke&&typeof ke.endLineNumber=="number"&&typeof ke.endColumn=="number"?Re=ke:ke&&(Re={lineNumber:ke.startLineNumber,column:ke.startColumn}),await ve.openCodeEditor(ye,Se.resource,Re)?ye:null})}function be(){return{create:R,getEditors:x,getDiffEditors:F,onDidCreateEditor:N,onDidCreateDiffEditor:O,createDiffEditor:W,addCommand:q,addEditorAction:H,addKeybindingRule:K,addKeybindingRules:U,createModel:Y,setModelLanguage:Q,setModelMarkers:X,getModelMarkers:P,removeAllMarkers:G,onDidChangeMarkers:te,getModels:ue,getModel:se,onDidCreateModel:ge,onWillDisposeModel:pe,onDidChangeModelLanguage:ce,createWebWorker:ie,colorizeElement:ne,colorize:J,colorizeModelLine:B,tokenize:V,defineTheme:$,setTheme:Z,remeasureFonts:ee,registerCommand:le,registerLinkOpener:de,registerEditorOpener:me,AccessibilitySupport:d.AccessibilitySupport,ContentWidgetPositionPreference:d.ContentWidgetPositionPreference,CursorChangeReason:d.CursorChangeReason,DefaultEndOfLine:d.DefaultEndOfLine,EditorAutoIndentStrategy:d.EditorAutoIndentStrategy,EditorOption:d.EditorOption,EndOfLinePreference:d.EndOfLinePreference,EndOfLineSequence:d.EndOfLineSequence,MinimapPosition:d.MinimapPosition,MinimapSectionHeaderStyle:d.MinimapSectionHeaderStyle,MouseTargetType:d.MouseTargetType,OverlayWidgetPositionPreference:d.OverlayWidgetPositionPreference,OverviewRulerLane:d.OverviewRulerLane,GlyphMarginLane:d.GlyphMarginLane,RenderLineNumbersType:d.RenderLineNumbersType,RenderMinimap:d.RenderMinimap,ScrollbarVisibility:d.ScrollbarVisibility,ScrollType:d.ScrollType,TextEditorCursorBlinkingStyle:d.TextEditorCursorBlinkingStyle,TextEditorCursorStyle:d.TextEditorCursorStyle,TrackedRangeStickiness:d.TrackedRangeStickiness,WrappingIndent:d.WrappingIndent,InjectedTextCursorStops:d.InjectedTextCursorStops,PositionAffinity:d.PositionAffinity,ShowLightbulbIconMode:d.ShowLightbulbIconMode,ConfigurationChangedEvent:p.ConfigurationChangedEvent,BareFontInfo:s.BareFontInfo,FontInfo:s.FontInfo,TextModelResolvedOptions:a.TextModelResolvedOptions,FindMatch:a.FindMatch,ApplyUpdateResult:p.ApplyUpdateResult,EditorZoom:n.EditorZoom,createMultiFileDiffEditor:z,EditorType:t.EditorType,EditorOptions:p.EditorOptions}}}),define(oe[864],re([1,0,33,4,28,42,34,70,17,249,294,648,382,152,27,107]),function(ae,e,c,k,E,L,y,f,_,b,p,n,s,t,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenizationSupportAdapter=e.EncodedTokenizationSupportAdapter=void 0,e.register=g,e.getLanguages=u,e.getEncodedLanguageId=l,e.onLanguage=a,e.onLanguageEncountered=r,e.setLanguageConfiguration=d,e.setColorMap=S,e.registerTokensProviderFactory=I,e.setTokensProvider=T,e.setMonarchTokensProvider=M,e.registerReferenceProvider=A,e.registerRenameProvider=R,e.registerNewSymbolNameProvider=N,e.registerSignatureHelpProvider=O,e.registerHoverProvider=x,e.registerDocumentSymbolProvider=F,e.registerDocumentHighlightProvider=W,e.registerLinkedEditingRangeProvider=z,e.registerDefinitionProvider=q,e.registerImplementationProvider=H,e.registerTypeDefinitionProvider=K,e.registerCodeLensProvider=U,e.registerCodeActionProvider=Y,e.registerDocumentFormattingEditProvider=Q,e.registerDocumentRangeFormattingEditProvider=X,e.registerOnTypeFormattingEditProvider=G,e.registerLinkProvider=P,e.registerCompletionItemProvider=te,e.registerColorProvider=se,e.registerFoldingRangeProvider=ue,e.registerDeclarationProvider=ge,e.registerSelectionRangeProvider=pe,e.registerDocumentSemanticTokensProvider=ce,e.registerDocumentRangeSemanticTokensProvider=ie,e.registerInlineCompletionsProvider=ne,e.registerInlineEditProvider=J,e.registerInlayHintsProvider=B,e.createMonacoLanguagesAPI=j;function g(V){f.ModesRegistry.registerLanguage(V)}function u(){let V=[];return V=V.concat(f.ModesRegistry.getLanguages()),V}function l(V){return p.StandaloneServices.get(L.ILanguageService).languageIdCodec.encodeLanguageId(V)}function a(V,$){return p.StandaloneServices.withServices(()=>{const ee=p.StandaloneServices.get(L.ILanguageService).onDidRequestRichLanguageFeatures(le=>{le===V&&(ee.dispose(),$())});return ee})}function r(V,$){return p.StandaloneServices.withServices(()=>{const ee=p.StandaloneServices.get(L.ILanguageService).onDidRequestBasicLanguageFeatures(le=>{le===V&&(ee.dispose(),$())});return ee})}function d(V,$){if(!p.StandaloneServices.get(L.ILanguageService).isRegisteredLanguageId(V))throw new Error(`Cannot set configuration for unknown language ${V}`);return p.StandaloneServices.get(y.ILanguageConfigurationService).register(V,$,100)}class m{constructor($,Z){this._languageId=$,this._actual=Z}dispose(){}getInitialState(){return this._actual.getInitialState()}tokenize($,Z,ee){if(typeof this._actual.tokenize=="function")return h.adaptTokenize(this._languageId,this._actual,$,ee);throw new Error("Not supported!")}tokenizeEncoded($,Z,ee){const le=this._actual.tokenizeEncoded($,ee);return new E.EncodedTokenizationResult(le.tokens,le.endState)}}e.EncodedTokenizationSupportAdapter=m;class h{constructor($,Z,ee,le){this._languageId=$,this._actual=Z,this._languageService=ee,this._standaloneThemeService=le}dispose(){}getInitialState(){return this._actual.getInitialState()}static _toClassicTokens($,Z){const ee=[];let le=0;for(let de=0,me=$.length;de<me;de++){const be=$[de];let ve=be.startIndex;de===0?ve=0:ve<le&&(ve=le),ee[de]=new E.Token(ve,be.scopes,Z),le=ve}return ee}static adaptTokenize($,Z,ee,le){const de=Z.tokenize(ee,le),me=h._toClassicTokens(de.tokens,$);let be;return de.endState.equals(le)?be=le:be=de.endState,new E.TokenizationResult(me,be)}tokenize($,Z,ee){return h.adaptTokenize(this._languageId,this._actual,$,ee)}_toBinaryTokens($,Z){const ee=$.encodeLanguageId(this._languageId),le=this._standaloneThemeService.getColorTheme().tokenTheme,de=[];let me=0,be=0;for(let Le=0,Se=Z.length;Le<Se;Le++){const ye=Z[Le],Ee=le.match(ee,ye.scopes)|1024;if(me>0&&de[me-1]===Ee)continue;let ke=ye.startIndex;Le===0?ke=0:ke<be&&(ke=be),de[me++]=ke,de[me++]=Ee,be=ke}const ve=new Uint32Array(me);for(let Le=0;Le<me;Le++)ve[Le]=de[Le];return ve}tokenizeEncoded($,Z,ee){const le=this._actual.tokenize($,ee),de=this._toBinaryTokens(this._languageService.languageIdCodec,le.tokens);let me;return le.endState.equals(ee)?me=ee:me=le.endState,new E.EncodedTokenizationResult(de,me)}}e.TokenizationSupportAdapter=h;function v(V){return typeof V.getInitialState=="function"}function C(V){return"tokenizeEncoded"in V}function w(V){return V&&typeof V.then=="function"}function S(V){const $=p.StandaloneServices.get(t.IStandaloneThemeService);if(V){const Z=[null];for(let ee=1,le=V.length;ee<le;ee++)Z[ee]=c.Color.fromHex(V[ee]);$.setColorMapOverride(Z)}else $.setColorMapOverride(null)}function D(V,$){return C($)?new m(V,$):new h(V,$,p.StandaloneServices.get(L.ILanguageService),p.StandaloneServices.get(t.IStandaloneThemeService))}function I(V,$){const Z=new E.LazyTokenizationSupport(async()=>{const ee=await Promise.resolve($.create());return ee?v(ee)?D(V,ee):new s.MonarchTokenizer(p.StandaloneServices.get(L.ILanguageService),p.StandaloneServices.get(t.IStandaloneThemeService),V,(0,n.compile)(V,ee),p.StandaloneServices.get(i.IConfigurationService)):null});return E.TokenizationRegistry.registerFactory(V,Z)}function T(V,$){if(!p.StandaloneServices.get(L.ILanguageService).isRegisteredLanguageId(V))throw new Error(`Cannot set tokens provider for unknown language ${V}`);return w($)?I(V,{create:()=>$}):E.TokenizationRegistry.register(V,D(V,$))}function M(V,$){const Z=ee=>new s.MonarchTokenizer(p.StandaloneServices.get(L.ILanguageService),p.StandaloneServices.get(t.IStandaloneThemeService),V,(0,n.compile)(V,ee),p.StandaloneServices.get(i.IConfigurationService));return w($)?I(V,{create:()=>$}):E.TokenizationRegistry.register(V,Z($))}function A(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).referenceProvider.register(V,$)}function R(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).renameProvider.register(V,$)}function N(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).newSymbolNamesProvider.register(V,$)}function O(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).signatureHelpProvider.register(V,$)}function x(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).hoverProvider.register(V,{provideHover:async(ee,le,de,me)=>{const be=ee.getWordAtPosition(le);return Promise.resolve($.provideHover(ee,le,de,me)).then(ve=>{if(ve)return!ve.range&&be&&(ve.range=new k.Range(le.lineNumber,be.startColumn,le.lineNumber,be.endColumn)),ve.range||(ve.range=new k.Range(le.lineNumber,le.column,le.lineNumber,le.column)),ve})}})}function F(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentSymbolProvider.register(V,$)}function W(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentHighlightProvider.register(V,$)}function z(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).linkedEditingRangeProvider.register(V,$)}function q(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).definitionProvider.register(V,$)}function H(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).implementationProvider.register(V,$)}function K(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).typeDefinitionProvider.register(V,$)}function U(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).codeLensProvider.register(V,$)}function Y(V,$,Z){return p.StandaloneServices.get(_.ILanguageFeaturesService).codeActionProvider.register(V,{providedCodeActionKinds:Z?.providedCodeActionKinds,documentation:Z?.documentation,provideCodeActions:(le,de,me,be)=>{const Le=p.StandaloneServices.get(o.IMarkerService).read({resource:le.uri}).filter(Se=>k.Range.areIntersectingOrTouching(Se,de));return $.provideCodeActions(le,de,{markers:Le,only:me.only,trigger:me.trigger},be)},resolveCodeAction:$.resolveCodeAction})}function Q(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentFormattingEditProvider.register(V,$)}function X(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentRangeFormattingEditProvider.register(V,$)}function G(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).onTypeFormattingEditProvider.register(V,$)}function P(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).linkProvider.register(V,$)}function te(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).completionProvider.register(V,$)}function se(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).colorProvider.register(V,$)}function ue(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).foldingRangeProvider.register(V,$)}function ge(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).declarationProvider.register(V,$)}function pe(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).selectionRangeProvider.register(V,$)}function ce(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentSemanticTokensProvider.register(V,$)}function ie(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).documentRangeSemanticTokensProvider.register(V,$)}function ne(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).inlineCompletionsProvider.register(V,$)}function J(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).inlineEditProvider.register(V,$)}function B(V,$){return p.StandaloneServices.get(_.ILanguageFeaturesService).inlayHintsProvider.register(V,$)}function j(){return{register:g,getLanguages:u,onLanguage:a,onLanguageEncountered:r,getEncodedLanguageId:l,setLanguageConfiguration:d,setColorMap:S,registerTokensProviderFactory:I,setTokensProvider:T,setMonarchTokensProvider:M,registerReferenceProvider:A,registerRenameProvider:R,registerNewSymbolNameProvider:N,registerCompletionItemProvider:te,registerSignatureHelpProvider:O,registerHoverProvider:x,registerDocumentSymbolProvider:F,registerDocumentHighlightProvider:W,registerLinkedEditingRangeProvider:z,registerDefinitionProvider:q,registerImplementationProvider:H,registerTypeDefinitionProvider:K,registerCodeLensProvider:U,registerCodeActionProvider:Y,registerDocumentFormattingEditProvider:Q,registerDocumentRangeFormattingEditProvider:X,registerOnTypeFormattingEditProvider:G,registerLinkProvider:P,registerColorProvider:se,registerFoldingRangeProvider:ue,registerDeclarationProvider:ge,registerSelectionRangeProvider:pe,registerDocumentSemanticTokensProvider:ce,registerDocumentRangeSemanticTokensProvider:ie,registerInlineCompletionsProvider:ne,registerInlineEditProvider:J,registerInlayHintsProvider:B,DocumentHighlightKind:b.DocumentHighlightKind,CompletionItemKind:b.CompletionItemKind,CompletionItemTag:b.CompletionItemTag,CompletionItemInsertTextRule:b.CompletionItemInsertTextRule,SymbolKind:b.SymbolKind,SymbolTag:b.SymbolTag,IndentAction:b.IndentAction,CompletionTriggerKind:b.CompletionTriggerKind,SignatureHelpTriggerKind:b.SignatureHelpTriggerKind,InlayHintKind:b.InlayHintKind,InlineCompletionTriggerKind:b.InlineCompletionTriggerKind,InlineEditTriggerKind:b.InlineEditTriggerKind,CodeActionTriggerType:b.CodeActionTriggerType,NewSymbolNameTag:b.NewSymbolNameTag,NewSymbolNameTriggerKind:b.NewSymbolNameTriggerKind,PartialAcceptTriggerKind:b.PartialAcceptTriggerKind,HoverVerbosityAction:b.HoverVerbosityAction,FoldingRangeKind:E.FoldingRangeKind,SelectedSuggestionInfo:E.SelectedSuggestionInfo}}}),define(oe[865],re([1,0,37,373,863,864,404]),function(ae,e,c,k,E,L,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.languages=e.editor=e.Token=e.Uri=e.MarkerTag=e.MarkerSeverity=e.SelectionDirection=e.Selection=e.Range=e.Position=e.KeyMod=e.KeyCode=e.Emitter=e.CancellationTokenSource=void 0,c.EditorOptions.wrappingIndent.defaultValue=0,c.EditorOptions.glyphMargin.defaultValue=!1,c.EditorOptions.autoIndent.defaultValue=3,c.EditorOptions.overviewRulerLanes.defaultValue=2,y.FormattingConflicts.setFormatterSelector((b,p,n)=>Promise.resolve(b[0]));const f=(0,k.createMonacoBaseAPI)();f.editor=(0,E.createMonacoEditorAPI)(),f.languages=(0,L.createMonacoLanguagesAPI)(),e.CancellationTokenSource=f.CancellationTokenSource,e.Emitter=f.Emitter,e.KeyCode=f.KeyCode,e.KeyMod=f.KeyMod,e.Position=f.Position,e.Range=f.Range,e.Selection=f.Selection,e.SelectionDirection=f.SelectionDirection,e.MarkerSeverity=f.MarkerSeverity,e.MarkerTag=f.MarkerTag,e.Uri=f.Uri,e.Token=f.Token,e.editor=f.editor,e.languages=f.languages,(globalThis.MonacoEnvironment?.globalAPI||typeof define=="function"&&define.amd)&&(globalThis.monaco=f),typeof globalThis.require<"u"&&typeof globalThis.require.config=="function"&&globalThis.require.config({ignoreDuplicateModules:["vscode-languageserver-types","vscode-languageserver-types/main","vscode-languageserver-textdocument","vscode-languageserver-textdocument/main","vscode-nls","vscode-nls/vscode-nls","jsonc-parser","jsonc-parser/main","vscode-uri","vscode-uri/index","vs/basic-languages/typescript/typescript"]})});var bt=this&&this.__exportStar||function(ae,e){for(var c in ae)c!=="default"&&!Object.prototype.hasOwnProperty.call(e,c)&&ti(e,ae,c)};define(oe[867],re([1,0,865,861,737,738,712,785,786,741,845,788]),function(ae,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),bt(c,e)})}).call(this);


/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(277ad905e2fd5989253e838d310cb4d78b3a71f9)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/basic-languages/monaco.contribution", ["require","require","vs/editor/editor.api"],(require)=>{
"use strict";var moduleExports=(()=>{var y=Object.create;var g=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty;var a=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,s)=>(typeof require<"u"?require:r)[s]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var D=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var l=(e,r,s,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of q(r))!M.call(e,o)&&o!==s&&g(e,o,{get:()=>r[o],enumerable:!(n=x(r,o))||n.enumerable});return e},p=(e,r,s)=>(l(e,r,"default"),s&&l(s,r,"default")),c=(e,r,s)=>(s=e!=null?y(A(e)):{},l(r||!e||!e.__esModule?g(s,"default",{value:e,enumerable:!0}):s,e));var v=D((w,d)=>{var b=c(a("vs/editor/editor.api"));d.exports=b});var t={};p(t,c(v()));var f={},m={},u=class e{static getOrCreate(r){return m[r]||(m[r]=new e(r)),m[r]}constructor(r){this._languageId=r,this._loadingTriggered=!1,this._lazyLoadPromise=new Promise((s,n)=>{this._lazyLoadPromiseResolve=s,this._lazyLoadPromiseReject=n})}load(){return this._loadingTriggered||(this._loadingTriggered=!0,f[this._languageId].loader().then(r=>this._lazyLoadPromiseResolve(r),r=>this._lazyLoadPromiseReject(r))),this._lazyLoadPromise}};function i(e){let r=e.id;f[r]=e,t.languages.register(e);let s=u.getOrCreate(r);t.languages.registerTokensProviderFactory(r,{create:async()=>(await s.load()).language}),t.languages.onLanguageEncountered(r,async()=>{let n=await s.load();t.languages.setLanguageConfiguration(r,n.conf)})}i({id:"abap",extensions:[".abap"],aliases:["abap","ABAP"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/abap/abap"],e,r)})});i({id:"apex",extensions:[".cls"],aliases:["Apex","apex"],mimetypes:["text/x-apex-source","text/x-apex"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/apex/apex"],e,r)})});i({id:"azcli",extensions:[".azcli"],aliases:["Azure CLI","azcli"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/azcli/azcli"],e,r)})});i({id:"bat",extensions:[".bat",".cmd"],aliases:["Batch","bat"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/bat/bat"],e,r)})});i({id:"bicep",extensions:[".bicep"],aliases:["Bicep"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/bicep/bicep"],e,r)})});i({id:"cameligo",extensions:[".mligo"],aliases:["Cameligo"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/cameligo/cameligo"],e,r)})});i({id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"],aliases:["clojure","Clojure"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/clojure/clojure"],e,r)})});i({id:"coffeescript",extensions:[".coffee"],aliases:["CoffeeScript","coffeescript","coffee"],mimetypes:["text/x-coffeescript","text/coffeescript"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/coffee/coffee"],e,r)})});i({id:"c",extensions:[".c",".h"],aliases:["C","c"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/cpp/cpp"],e,r)})});i({id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"],aliases:["C++","Cpp","cpp"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/cpp/cpp"],e,r)})});i({id:"csharp",extensions:[".cs",".csx",".cake"],aliases:["C#","csharp"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/csharp/csharp"],e,r)})});i({id:"csp",extensions:[".csp"],aliases:["CSP","csp"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/csp/csp"],e,r)})});i({id:"css",extensions:[".css"],aliases:["CSS","css"],mimetypes:["text/css"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/css/css"],e,r)})});i({id:"cypher",extensions:[".cypher",".cyp"],aliases:["Cypher","OpenCypher"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/cypher/cypher"],e,r)})});i({id:"dart",extensions:[".dart"],aliases:["Dart","dart"],mimetypes:["text/x-dart-source","text/x-dart"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/dart/dart"],e,r)})});i({id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"],aliases:["Dockerfile"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/dockerfile/dockerfile"],e,r)})});i({id:"ecl",extensions:[".ecl"],aliases:["ECL","Ecl","ecl"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/ecl/ecl"],e,r)})});i({id:"elixir",extensions:[".ex",".exs"],aliases:["Elixir","elixir","ex"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/elixir/elixir"],e,r)})});i({id:"flow9",extensions:[".flow"],aliases:["Flow9","Flow","flow9","flow"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/flow9/flow9"],e,r)})});i({id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"],aliases:["F#","FSharp","fsharp"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/fsharp/fsharp"],e,r)})});i({id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"],aliases:["FreeMarker2","Apache FreeMarker2"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagAngleInterpolationDollar)});i({id:"freemarker2.tag-angle.interpolation-dollar",aliases:["FreeMarker2 (Angle/Dollar)","Apache FreeMarker2 (Angle/Dollar)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagAngleInterpolationDollar)});i({id:"freemarker2.tag-bracket.interpolation-dollar",aliases:["FreeMarker2 (Bracket/Dollar)","Apache FreeMarker2 (Bracket/Dollar)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagBracketInterpolationDollar)});i({id:"freemarker2.tag-angle.interpolation-bracket",aliases:["FreeMarker2 (Angle/Bracket)","Apache FreeMarker2 (Angle/Bracket)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagAngleInterpolationBracket)});i({id:"freemarker2.tag-bracket.interpolation-bracket",aliases:["FreeMarker2 (Bracket/Bracket)","Apache FreeMarker2 (Bracket/Bracket)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagBracketInterpolationBracket)});i({id:"freemarker2.tag-auto.interpolation-dollar",aliases:["FreeMarker2 (Auto/Dollar)","Apache FreeMarker2 (Auto/Dollar)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagAutoInterpolationDollar)});i({id:"freemarker2.tag-auto.interpolation-bracket",aliases:["FreeMarker2 (Auto/Bracket)","Apache FreeMarker2 (Auto/Bracket)"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/freemarker2/freemarker2"],e,r)}).then(e=>e.TagAutoInterpolationBracket)});i({id:"go",extensions:[".go"],aliases:["Go"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/go/go"],e,r)})});i({id:"graphql",extensions:[".graphql",".gql"],aliases:["GraphQL","graphql","gql"],mimetypes:["application/graphql"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/graphql/graphql"],e,r)})});i({id:"handlebars",extensions:[".handlebars",".hbs"],aliases:["Handlebars","handlebars","hbs"],mimetypes:["text/x-handlebars-template"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/handlebars/handlebars"],e,r)})});i({id:"hcl",extensions:[".tf",".tfvars",".hcl"],aliases:["Terraform","tf","HCL","hcl"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/hcl/hcl"],e,r)})});i({id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"],aliases:["HTML","htm","html","xhtml"],mimetypes:["text/html","text/x-jshtm","text/template","text/ng-template"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/html/html"],e,r)})});i({id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"],aliases:["Ini","ini"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/ini/ini"],e,r)})});i({id:"java",extensions:[".java",".jav"],aliases:["Java","java"],mimetypes:["text/x-java-source","text/x-java"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/java/java"],e,r)})});i({id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],firstLine:"^#!.*\\bnode",filenames:["jakefile"],aliases:["JavaScript","javascript","js"],mimetypes:["text/javascript"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/javascript/javascript"],e,r)})});i({id:"julia",extensions:[".jl"],aliases:["julia","Julia"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/julia/julia"],e,r)})});i({id:"kotlin",extensions:[".kt",".kts"],aliases:["Kotlin","kotlin"],mimetypes:["text/x-kotlin-source","text/x-kotlin"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/kotlin/kotlin"],e,r)})});i({id:"less",extensions:[".less"],aliases:["Less","less"],mimetypes:["text/x-less","text/less"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/less/less"],e,r)})});i({id:"lexon",extensions:[".lex"],aliases:["Lexon"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/lexon/lexon"],e,r)})});i({id:"lua",extensions:[".lua"],aliases:["Lua","lua"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/lua/lua"],e,r)})});i({id:"liquid",extensions:[".liquid",".html.liquid"],aliases:["Liquid","liquid"],mimetypes:["application/liquid"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/liquid/liquid"],e,r)})});i({id:"m3",extensions:[".m3",".i3",".mg",".ig"],aliases:["Modula-3","Modula3","modula3","m3"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/m3/m3"],e,r)})});i({id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"],aliases:["Markdown","markdown"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/markdown/markdown"],e,r)})});i({id:"mdx",extensions:[".mdx"],aliases:["MDX","mdx"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/mdx/mdx"],e,r)})});i({id:"mips",extensions:[".s"],aliases:["MIPS","MIPS-V"],mimetypes:["text/x-mips","text/mips","text/plaintext"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/mips/mips"],e,r)})});i({id:"msdax",extensions:[".dax",".msdax"],aliases:["DAX","MSDAX"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/msdax/msdax"],e,r)})});i({id:"mysql",extensions:[],aliases:["MySQL","mysql"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/mysql/mysql"],e,r)})});i({id:"objective-c",extensions:[".m"],aliases:["Objective-C"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/objective-c/objective-c"],e,r)})});i({id:"pascal",extensions:[".pas",".p",".pp"],aliases:["Pascal","pas"],mimetypes:["text/x-pascal-source","text/x-pascal"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/pascal/pascal"],e,r)})});i({id:"pascaligo",extensions:[".ligo"],aliases:["Pascaligo","ligo"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/pascaligo/pascaligo"],e,r)})});i({id:"perl",extensions:[".pl",".pm"],aliases:["Perl","pl"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/perl/perl"],e,r)})});i({id:"pgsql",extensions:[],aliases:["PostgreSQL","postgres","pg","postgre"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/pgsql/pgsql"],e,r)})});i({id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"],aliases:["PHP","php"],mimetypes:["application/x-php"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/php/php"],e,r)})});i({id:"pla",extensions:[".pla"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/pla/pla"],e,r)})});i({id:"postiats",extensions:[".dats",".sats",".hats"],aliases:["ATS","ATS/Postiats"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/postiats/postiats"],e,r)})});i({id:"powerquery",extensions:[".pq",".pqm"],aliases:["PQ","M","Power Query","Power Query M"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/powerquery/powerquery"],e,r)})});i({id:"powershell",extensions:[".ps1",".psm1",".psd1"],aliases:["PowerShell","powershell","ps","ps1"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/powershell/powershell"],e,r)})});i({id:"proto",extensions:[".proto"],aliases:["protobuf","Protocol Buffers"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/protobuf/protobuf"],e,r)})});i({id:"pug",extensions:[".jade",".pug"],aliases:["Pug","Jade","jade"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/pug/pug"],e,r)})});i({id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"],aliases:["Python","py"],firstLine:"^#!/.*\\bpython[0-9.-]*\\b",loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/python/python"],e,r)})});i({id:"qsharp",extensions:[".qs"],aliases:["Q#","qsharp"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/qsharp/qsharp"],e,r)})});i({id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"],aliases:["R","r"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/r/r"],e,r)})});i({id:"razor",extensions:[".cshtml"],aliases:["Razor","razor"],mimetypes:["text/x-cshtml"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/razor/razor"],e,r)})});i({id:"redis",extensions:[".redis"],aliases:["redis"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/redis/redis"],e,r)})});i({id:"redshift",extensions:[],aliases:["Redshift","redshift"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/redshift/redshift"],e,r)})});i({id:"restructuredtext",extensions:[".rst"],aliases:["reStructuredText","restructuredtext"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/restructuredtext/restructuredtext"],e,r)})});i({id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"],aliases:["Ruby","rb"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/ruby/ruby"],e,r)})});i({id:"rust",extensions:[".rs",".rlib"],aliases:["Rust","rust"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/rust/rust"],e,r)})});i({id:"sb",extensions:[".sb"],aliases:["Small Basic","sb"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/sb/sb"],e,r)})});i({id:"scala",extensions:[".scala",".sc",".sbt"],aliases:["Scala","scala","SBT","Sbt","sbt","Dotty","dotty"],mimetypes:["text/x-scala-source","text/x-scala","text/x-sbt","text/x-dotty"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/scala/scala"],e,r)})});i({id:"scheme",extensions:[".scm",".ss",".sch",".rkt"],aliases:["scheme","Scheme"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/scheme/scheme"],e,r)})});i({id:"scss",extensions:[".scss"],aliases:["Sass","sass","scss"],mimetypes:["text/x-scss","text/scss"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/scss/scss"],e,r)})});i({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/shell/shell"],e,r)})});i({id:"sol",extensions:[".sol"],aliases:["sol","solidity","Solidity"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/solidity/solidity"],e,r)})});i({id:"aes",extensions:[".aes"],aliases:["aes","sophia","Sophia"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/sophia/sophia"],e,r)})});i({id:"sparql",extensions:[".rq"],aliases:["sparql","SPARQL"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/sparql/sparql"],e,r)})});i({id:"sql",extensions:[".sql"],aliases:["SQL"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/sql/sql"],e,r)})});i({id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib",".TcPOU",".TcDUT",".TcGVL",".TcIO"],aliases:["StructuredText","scl","stl"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/st/st"],e,r)})});i({id:"swift",aliases:["Swift","swift"],extensions:[".swift"],mimetypes:["text/swift"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/swift/swift"],e,r)})});i({id:"systemverilog",extensions:[".sv",".svh"],aliases:["SV","sv","SystemVerilog","systemverilog"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/systemverilog/systemverilog"],e,r)})});i({id:"verilog",extensions:[".v",".vh"],aliases:["V","v","Verilog","verilog"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/systemverilog/systemverilog"],e,r)})});i({id:"tcl",extensions:[".tcl"],aliases:["tcl","Tcl","tcltk","TclTk","tcl/tk","Tcl/Tk"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/tcl/tcl"],e,r)})});i({id:"twig",extensions:[".twig"],aliases:["Twig","twig"],mimetypes:["text/x-twig"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/twig/twig"],e,r)})});i({id:"typescript",extensions:[".ts",".tsx",".cts",".mts"],aliases:["TypeScript","ts","typescript"],mimetypes:["text/typescript"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/typescript/typescript"],e,r)})});i({id:"typespec",extensions:[".tsp"],aliases:["TypeSpec"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/typespec/typespec"],e,r)})});i({id:"vb",extensions:[".vb"],aliases:["Visual Basic","vb"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/vb/vb"],e,r)})});i({id:"wgsl",extensions:[".wgsl"],aliases:["WebGPU Shading Language","WGSL","wgsl"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/wgsl/wgsl"],e,r)})});i({id:"xml",extensions:[".xml",".xsd",".dtd",".ascx",".csproj",".config",".props",".targets",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xslt",".xsl"],firstLine:"(\\<\\?xml.*)|(\\<svg)|(\\<\\!doctype\\s+svg)",aliases:["XML","xml"],mimetypes:["text/xml","application/xml","application/xaml+xml","application/xml-dtd"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/xml/xml"],e,r)})});i({id:"yaml",extensions:[".yaml",".yml"],aliases:["YAML","yaml","YML","yml"],mimetypes:["application/x-yaml","text/x-yaml"],loader:()=>new Promise((e,r)=>{a(["vs/basic-languages/yaml/yaml"],e,r)})});})();
return moduleExports;
});

/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(277ad905e2fd5989253e838d310cb4d78b3a71f9)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/css/monaco.contribution", ["require","require","vs/editor/editor.api"],(require)=>{
"use strict";var moduleExports=(()=>{var C=Object.create;var g=Object.defineProperty;var S=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var x=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty;var l=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,r)=>(typeof require<"u"?require:n)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var I=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),M=(e,n)=>{for(var r in n)g(e,r,{get:n[r],enumerable:!0})},s=(e,n,r,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let t of b(n))!h.call(e,t)&&t!==r&&g(e,t,{get:()=>n[t],enumerable:!(a=S(n,t))||a.enumerable});return e},y=(e,n,r)=>(s(e,n,"default"),r&&s(r,n,"default")),w=(e,n,r)=>(r=e!=null?C(x(e)):{},s(n||!e||!e.__esModule?g(r,"default",{value:e,enumerable:!0}):r,e)),P=e=>s(g({},"__esModule",{value:!0}),e);var v=I((k,D)=>{var O=w(l("vs/editor/editor.api"));D.exports=O});var R={};M(R,{cssDefaults:()=>p,lessDefaults:()=>f,scssDefaults:()=>c});var o={};y(o,w(v()));var i=class{constructor(n,r,a){this._onDidChange=new o.Emitter;this._languageId=n,this.setOptions(r),this.setModeConfiguration(a)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this.options}get options(){return this._options}setOptions(n){this._options=n||Object.create(null),this._onDidChange.fire(this)}setDiagnosticsOptions(n){this.setOptions(n)}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(this)}},d={validate:!0,lint:{compatibleVendorPrefixes:"ignore",vendorPrefix:"warning",duplicateProperties:"warning",emptyRules:"warning",importStatement:"ignore",boxModel:"ignore",universalSelector:"ignore",zeroUnits:"ignore",fontFaceProperties:"warning",hexColorLength:"error",argumentsInColorFunction:"error",unknownProperties:"warning",ieHack:"ignore",unknownVendorSpecificProperties:"ignore",propertyIgnoredDueToDisplay:"warning",important:"ignore",float:"ignore",idSelector:"ignore"},data:{useDefaultDataProvider:!0},format:{newlineBetweenSelectors:!0,newlineBetweenRules:!0,spaceAroundSelectorSeparator:!1,braceStyle:"collapse",maxPreserveNewLines:void 0,preserveNewLines:!0}},u={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0,documentFormattingEdits:!0,documentRangeFormattingEdits:!0},p=new i("css",d,u),c=new i("scss",d,u),f=new i("less",d,u);o.languages.css={cssDefaults:p,lessDefaults:f,scssDefaults:c};function m(){return new Promise((e,n)=>{l(["vs/language/css/cssMode"],e,n)})}o.languages.onLanguage("less",()=>{m().then(e=>e.setupMode(f))});o.languages.onLanguage("scss",()=>{m().then(e=>e.setupMode(c))});o.languages.onLanguage("css",()=>{m().then(e=>e.setupMode(p))});return P(R);})();
return moduleExports;
});

/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(277ad905e2fd5989253e838d310cb4d78b3a71f9)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/html/monaco.contribution", ["require","require","vs/editor/editor.api"],(require)=>{
"use strict";var moduleExports=(()=>{var w=Object.create;var l=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var H=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,_=Object.prototype.hasOwnProperty;var f=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,t)=>(typeof require<"u"?require:n)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var k=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),T=(e,n)=>{for(var t in n)l(e,t,{get:n[t],enumerable:!0})},d=(e,n,t,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of H(n))!_.call(e,o)&&o!==t&&l(e,o,{get:()=>n[o],enumerable:!(r=R(n,o))||r.enumerable});return e},b=(e,n,t)=>(d(e,n,"default"),t&&d(t,n,"default")),v=(e,n,t)=>(t=e!=null?w(O(e)):{},d(n||!e||!e.__esModule?l(t,"default",{value:e,enumerable:!0}):t,e)),A=e=>d(l({},"__esModule",{value:!0}),e);var C=k((z,h)=>{var E=v(f("vs/editor/editor.api"));h.exports=E});var V={};T(V,{handlebarDefaults:()=>M,handlebarLanguageService:()=>m,htmlDefaults:()=>x,htmlLanguageService:()=>c,razorDefaults:()=>I,razorLanguageService:()=>y,registerHTMLLanguageService:()=>s});var a={};b(a,v(C()));var p=class{constructor(n,t,r){this._onDidChange=new a.Emitter;this._languageId=n,this.setOptions(t),this.setModeConfiguration(r)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get options(){return this._options}get modeConfiguration(){return this._modeConfiguration}setOptions(n){this._options=n||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(this)}},F={tabSize:4,insertSpaces:!1,wrapLineLength:120,unformatted:'default": "a, abbr, acronym, b, bdo, big, br, button, cite, code, dfn, em, i, img, input, kbd, label, map, object, q, samp, select, small, span, strong, sub, sup, textarea, tt, var',contentUnformatted:"pre",indentInnerHtml:!1,preserveNewLines:!0,maxPreserveNewLines:void 0,indentHandlebars:!1,endWithNewline:!1,extraLiners:"head, body, /html",wrapAttributes:"auto"},u={format:F,suggest:{},data:{useDefaultDataProvider:!0}};function g(e){return{completionItems:!0,hovers:!0,documentSymbols:!0,links:!0,documentHighlights:!0,rename:!0,colors:!0,foldingRanges:!0,selectionRanges:!0,diagnostics:e===i,documentFormattingEdits:e===i,documentRangeFormattingEdits:e===i}}var i="html",D="handlebars",L="razor",c=s(i,u,g(i)),x=c.defaults,m=s(D,u,g(D)),M=m.defaults,y=s(L,u,g(L)),I=y.defaults;a.languages.html={htmlDefaults:x,razorDefaults:I,handlebarDefaults:M,htmlLanguageService:c,handlebarLanguageService:m,razorLanguageService:y,registerHTMLLanguageService:s};function P(){return new Promise((e,n)=>{f(["vs/language/html/htmlMode"],e,n)})}function s(e,n=u,t=g(e)){let r=new p(e,n,t),o,S=a.languages.onLanguage(e,async()=>{o=(await P()).setupMode(r)});return{defaults:r,dispose(){S.dispose(),o?.dispose(),o=void 0}}}return A(V);})();
return moduleExports;
});

/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(277ad905e2fd5989253e838d310cb4d78b3a71f9)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/json/monaco.contribution", ["require","require","vs/editor/editor.api"],(require)=>{
"use strict";var moduleExports=(()=>{var f=Object.create;var s=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var d=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(n,o)=>(typeof require<"u"?require:n)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var v=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),x=(e,n)=>{for(var o in n)s(e,o,{get:n[o],enumerable:!0})},i=(e,n,o,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of N(n))!O.call(e,r)&&r!==o&&s(e,r,{get:()=>n[r],enumerable:!(a=h(n,r))||a.enumerable});return e},g=(e,n,o)=>(i(e,n,"default"),o&&i(o,n,"default")),c=(e,n,o)=>(o=e!=null?f(b(e)):{},i(n||!e||!e.__esModule?s(o,"default",{value:e,enumerable:!0}):o,e)),A=e=>i(s({},"__esModule",{value:!0}),e);var S=v((R,u)=>{var T=c(d("vs/editor/editor.api"));u.exports=T});var M={};x(M,{getWorker:()=>p,jsonDefaults:()=>m});var t={};g(t,c(S()));var l=class{constructor(n,o,a){this._onDidChange=new t.Emitter;this._languageId=n,this.setDiagnosticsOptions(o),this.setModeConfiguration(a)}get onDidChange(){return this._onDidChange.event}get languageId(){return this._languageId}get modeConfiguration(){return this._modeConfiguration}get diagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(n){this._diagnosticsOptions=n||Object.create(null),this._onDidChange.fire(this)}setModeConfiguration(n){this._modeConfiguration=n||Object.create(null),this._onDidChange.fire(this)}},D={validate:!0,allowComments:!0,schemas:[],enableSchemaRequest:!1,schemaRequest:"warning",schemaValidation:"warning",comments:"error",trailingCommas:"error"},C={documentFormattingEdits:!0,documentRangeFormattingEdits:!0,completionItems:!0,hovers:!0,documentSymbols:!0,tokens:!0,colors:!0,foldingRanges:!0,diagnostics:!0,selectionRanges:!0},m=new l("json",D,C),p=()=>y().then(e=>e.getWorker());t.languages.json={jsonDefaults:m,getWorker:p};function y(){return new Promise((e,n)=>{d(["vs/language/json/jsonMode"],e,n)})}t.languages.register({id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"],aliases:["JSON","json"],mimetypes:["application/json"]});t.languages.onLanguage("json",()=>{y().then(e=>e.setupMode(m))});return A(M);})();
return moduleExports;
});

/*!-----------------------------------------------------------------------------
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Version: 0.50.0(277ad905e2fd5989253e838d310cb4d78b3a71f9)
 * Released under the MIT license
 * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt
 *-----------------------------------------------------------------------------*/
define("vs/language/typescript/monaco.contribution", ["require","require","vs/editor/editor.api"],(require)=>{
"use strict";var moduleExports=(()=>{var N=Object.create;var m=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var M=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty;var c=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(e,t)=>(typeof require<"u"?require:e)[t]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),A=(n,e)=>{for(var t in e)m(n,t,{get:e[t],enumerable:!0})},g=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of M(e))!F.call(n,r)&&r!==t&&m(n,r,{get:()=>e[r],enumerable:!(i=H(e,r))||i.enumerable});return n},v=(n,e,t)=>(g(n,e,"default"),t&&g(t,e,"default")),C=(n,e,t)=>(t=n!=null?N(R(n)):{},g(e||!n||!n.__esModule?m(t,"default",{value:n,enumerable:!0}):t,n)),W=n=>g(m({},"__esModule",{value:!0}),n);var _=w((B,L)=>{var V=C(c("vs/editor/editor.api"));L.exports=V});var T={};A(T,{JsxEmit:()=>f,ModuleKind:()=>b,ModuleResolutionKind:()=>O,NewLineKind:()=>y,ScriptTarget:()=>h,getJavaScriptWorker:()=>k,getTypeScriptWorker:()=>P,javascriptDefaults:()=>D,typescriptDefaults:()=>x,typescriptVersion:()=>I});var E="5.4.5";var l={};v(l,C(_()));var b=(s=>(s[s.None=0]="None",s[s.CommonJS=1]="CommonJS",s[s.AMD=2]="AMD",s[s.UMD=3]="UMD",s[s.System=4]="System",s[s.ES2015=5]="ES2015",s[s.ESNext=99]="ESNext",s))(b||{}),f=(a=>(a[a.None=0]="None",a[a.Preserve=1]="Preserve",a[a.React=2]="React",a[a.ReactNative=3]="ReactNative",a[a.ReactJSX=4]="ReactJSX",a[a.ReactJSXDev=5]="ReactJSXDev",a))(f||{}),y=(t=>(t[t.CarriageReturnLineFeed=0]="CarriageReturnLineFeed",t[t.LineFeed=1]="LineFeed",t))(y||{}),h=(o=>(o[o.ES3=0]="ES3",o[o.ES5=1]="ES5",o[o.ES2015=2]="ES2015",o[o.ES2016=3]="ES2016",o[o.ES2017=4]="ES2017",o[o.ES2018=5]="ES2018",o[o.ES2019=6]="ES2019",o[o.ES2020=7]="ES2020",o[o.ESNext=99]="ESNext",o[o.JSON=100]="JSON",o[o.Latest=99]="Latest",o))(h||{}),O=(t=>(t[t.Classic=1]="Classic",t[t.NodeJs=2]="NodeJs",t))(O||{}),d=class{constructor(e,t,i,r,p){this._onDidChange=new l.Emitter;this._onDidExtraLibsChange=new l.Emitter;this._extraLibs=Object.create(null),this._removedExtraLibs=Object.create(null),this._eagerModelSync=!1,this.setCompilerOptions(e),this.setDiagnosticsOptions(t),this.setWorkerOptions(i),this.setInlayHintsOptions(r),this.setModeConfiguration(p),this._onDidExtraLibsChangeTimeout=-1}get onDidChange(){return this._onDidChange.event}get onDidExtraLibsChange(){return this._onDidExtraLibsChange.event}get modeConfiguration(){return this._modeConfiguration}get workerOptions(){return this._workerOptions}get inlayHintsOptions(){return this._inlayHintsOptions}getExtraLibs(){return this._extraLibs}addExtraLib(e,t){let i;if(typeof t>"u"?i=`ts:extralib-${Math.random().toString(36).substring(2,15)}`:i=t,this._extraLibs[i]&&this._extraLibs[i].content===e)return{dispose:()=>{}};let r=1;return this._removedExtraLibs[i]&&(r=this._removedExtraLibs[i]+1),this._extraLibs[i]&&(r=this._extraLibs[i].version+1),this._extraLibs[i]={content:e,version:r},this._fireOnDidExtraLibsChangeSoon(),{dispose:()=>{let p=this._extraLibs[i];p&&p.version===r&&(delete this._extraLibs[i],this._removedExtraLibs[i]=r,this._fireOnDidExtraLibsChangeSoon())}}}setExtraLibs(e){for(let t in this._extraLibs)this._removedExtraLibs[t]=this._extraLibs[t].version;if(this._extraLibs=Object.create(null),e&&e.length>0)for(let t of e){let i=t.filePath||`ts:extralib-${Math.random().toString(36).substring(2,15)}`,r=t.content,p=1;this._removedExtraLibs[i]&&(p=this._removedExtraLibs[i]+1),this._extraLibs[i]={content:r,version:p}}this._fireOnDidExtraLibsChangeSoon()}_fireOnDidExtraLibsChangeSoon(){this._onDidExtraLibsChangeTimeout===-1&&(this._onDidExtraLibsChangeTimeout=window.setTimeout(()=>{this._onDidExtraLibsChangeTimeout=-1,this._onDidExtraLibsChange.fire(void 0)},0))}getCompilerOptions(){return this._compilerOptions}setCompilerOptions(e){this._compilerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}getDiagnosticsOptions(){return this._diagnosticsOptions}setDiagnosticsOptions(e){this._diagnosticsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setWorkerOptions(e){this._workerOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setInlayHintsOptions(e){this._inlayHintsOptions=e||Object.create(null),this._onDidChange.fire(void 0)}setMaximumWorkerIdleTime(e){}setEagerModelSync(e){this._eagerModelSync=e}getEagerModelSync(){return this._eagerModelSync}setModeConfiguration(e){this._modeConfiguration=e||Object.create(null),this._onDidChange.fire(void 0)}},I=E,S={completionItems:!0,hovers:!0,documentSymbols:!0,definitions:!0,references:!0,documentHighlights:!0,rename:!0,diagnostics:!0,documentRangeFormattingEdits:!0,signatureHelp:!0,onTypeFormattingEdits:!0,codeActions:!0,inlayHints:!0},x=new d({allowNonTsExtensions:!0,target:99},{noSemanticValidation:!1,noSyntaxValidation:!1,onlyVisible:!1},{},{},S),D=new d({allowNonTsExtensions:!0,allowJs:!0,target:99},{noSemanticValidation:!0,noSyntaxValidation:!1,onlyVisible:!1},{},{},S),P=()=>u().then(n=>n.getTypeScriptWorker()),k=()=>u().then(n=>n.getJavaScriptWorker());l.languages.typescript={ModuleKind:b,JsxEmit:f,NewLineKind:y,ScriptTarget:h,ModuleResolutionKind:O,typescriptVersion:I,typescriptDefaults:x,javascriptDefaults:D,getTypeScriptWorker:P,getJavaScriptWorker:k};function u(){return new Promise((n,e)=>{c(["vs/language/typescript/tsMode"],n,e)})}l.languages.onLanguage("typescript",()=>u().then(n=>n.setupTypeScript(x)));l.languages.onLanguage("javascript",()=>u().then(n=>n.setupJavaScript(D)));return W(T);})();
return moduleExports;
});

define("vs/editor/editor.main", ["vs/editor/edcore.main","vs/basic-languages/monaco.contribution","vs/language/css/monaco.contribution","vs/language/html/monaco.contribution","vs/language/json/monaco.contribution","vs/language/typescript/monaco.contribution"], function(api) { return api; });
//# sourceMappingURL=../../../min-maps/vs/editor/editor.main.js.map